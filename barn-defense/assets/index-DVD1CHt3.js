(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const R of document.querySelectorAll('link[rel="modulepreload"]'))M(R);new MutationObserver(R=>{for(const w of R)if(w.type==="childList")for(const v of w.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&M(v)}).observe(document,{childList:!0,subtree:!0});function x(R){const w={};return R.integrity&&(w.integrity=R.integrity),R.referrerPolicy&&(w.referrerPolicy=R.referrerPolicy),R.crossOrigin==="use-credentials"?w.credentials="include":R.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function M(R){if(R.ep)return;R.ep=!0;const w=x(R);fetch(R.href,w)}})();function kM(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Sr={exports:{}},JM=Sr.exports,Gu;function jM(){return Gu||(Gu=1,(function(i,p){(function(M,R){i.exports=R()})(JM,()=>(()=>{var x={50792:(v=>{var T=Object.prototype.hasOwnProperty,t="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(t=!1));function g(e,s,u){this.fn=e,this.context=s,this.once=u||!1}function o(e,s,u,n,l){if(typeof u!="function")throw new TypeError("The listener must be a function");var c=new g(u,n||e,l),d=t?t+s:s;return e._events[d]?e._events[d].fn?e._events[d]=[e._events[d],c]:e._events[d].push(c):(e._events[d]=c,e._eventsCount++),e}function a(e,s){--e._eventsCount===0?e._events=new h:delete e._events[s]}function r(){this._events=new h,this._eventsCount=0}r.prototype.eventNames=function(){var s=[],u,n;if(this._eventsCount===0)return s;for(n in u=this._events)T.call(u,n)&&s.push(t?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(u)):s},r.prototype.listeners=function(s){var u=t?t+s:s,n=this._events[u];if(!n)return[];if(n.fn)return[n.fn];for(var l=0,c=n.length,d=new Array(c);l<c;l++)d[l]=n[l].fn;return d},r.prototype.listenerCount=function(s){var u=t?t+s:s,n=this._events[u];return n?n.fn?1:n.length:0},r.prototype.emit=function(s,u,n,l,c,d){var f=t?t+s:s;if(!this._events[f])return!1;var m=this._events[f],y=arguments.length,S,C;if(m.fn){switch(m.once&&this.removeListener(s,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,n),!0;case 4:return m.fn.call(m.context,u,n,l),!0;case 5:return m.fn.call(m.context,u,n,l,c),!0;case 6:return m.fn.call(m.context,u,n,l,c,d),!0}for(C=1,S=new Array(y-1);C<y;C++)S[C-1]=arguments[C];m.fn.apply(m.context,S)}else{var E=m.length,P;for(C=0;C<E;C++)switch(m[C].once&&this.removeListener(s,m[C].fn,void 0,!0),y){case 1:m[C].fn.call(m[C].context);break;case 2:m[C].fn.call(m[C].context,u);break;case 3:m[C].fn.call(m[C].context,u,n);break;case 4:m[C].fn.call(m[C].context,u,n,l);break;default:if(!S)for(P=1,S=new Array(y-1);P<y;P++)S[P-1]=arguments[P];m[C].fn.apply(m[C].context,S)}}return!0},r.prototype.on=function(s,u,n){return o(this,s,u,n,!1)},r.prototype.once=function(s,u,n){return o(this,s,u,n,!0)},r.prototype.removeListener=function(s,u,n,l){var c=t?t+s:s;if(!this._events[c])return this;if(!u)return a(this,c),this;var d=this._events[c];if(d.fn)d.fn===u&&(!l||d.once)&&(!n||d.context===n)&&a(this,c);else{for(var f=0,m=[],y=d.length;f<y;f++)(d[f].fn!==u||l&&!d[f].once||n&&d[f].context!==n)&&m.push(d[f]);m.length?this._events[c]=m.length===1?m[0]:m:a(this,c)}return this},r.prototype.removeAllListeners=function(s){var u;return s?(u=t?t+s:s,this._events[u]&&a(this,u)):(this._events=new h,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=t,r.EventEmitter=r,v.exports=r}),11517:((v,T,t)=>{var h=t(38829),g=function(o,a,r,e){for(var s=o[0],u=1;u<o.length;u++){var n=o[u];h(n,s,a,r,e),s=n}return o};v.exports=g}),80318:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s){return h(o,"angle",a,r,e,s)};v.exports=g}),60757:(v=>{var T=function(t,h,g){for(var o=0;o<t.length;o++){var a=t[o];h.call(g,a)}return t};v.exports=T}),69927:(v=>{var T=function(t,h,g){g===void 0&&(g=0);for(var o=g;o<t.length;o++){var a=t[o],r=!0;for(var e in h)a[e]!==h[e]&&(r=!1);if(r)return a}return null};v.exports=T}),32265:(v=>{var T=function(t,h,g){g===void 0&&(g=0);for(var o=t.length-1;o>=g;o--){var a=t[o],r=!0;for(var e in h)a[e]!==h[e]&&(r=!1);if(r)return a}return null};v.exports=T}),94420:((v,T,t)=>{var h=t(11879),g=t(60461),o=t(95540),a=t(29747),r=t(41481),e=new r({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1).setOrigin(0,0),s=function(u,n){n===void 0&&(n={});var l=n.hasOwnProperty("width"),c=n.hasOwnProperty("height"),d=o(n,"width",-1),f=o(n,"height",-1),m=o(n,"cellWidth",1),y=o(n,"cellHeight",m),S=o(n,"position",g.TOP_LEFT),C=o(n,"x",0),E=o(n,"y",0),P=0,A=0,F=d*m,G=f*y;e.setPosition(C,E),e.setSize(m,y);for(var D=0;D<u.length;D++)if(h(u[D],e,S),l&&d===-1)e.x+=m;else if(c&&f===-1)e.y+=y;else if(c&&!l){if(A+=y,e.y+=y,A===G&&(A=0,P+=m,e.y=E,e.x+=m,P===F))break}else if(P+=m,e.x+=m,P===F&&(P=0,A+=y,e.x=C,e.y+=y,A===G))break;return u};v.exports=s}),41721:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s){return h(o,"alpha",a,r,e,s)};v.exports=g}),67285:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s){return h(o,"x",a,r,e,s)};v.exports=g}),9074:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s,u,n){return r==null&&(r=a),h(o,"x",a,e,u,n),h(o,"y",r,s,u,n)};v.exports=g}),75222:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s){return h(o,"y",a,r,e,s)};v.exports=g}),22983:(v=>{var T=function(t,h,g,o){g===void 0&&(g=0),o===void 0&&(o=6.28);for(var a=g,r=(o-g)/t.length,e=h.x,s=h.y,u=h.radius,n=0;n<t.length;n++)t[n].x=e+u*Math.cos(a),t[n].y=s+u*Math.sin(a),a+=r;return t};v.exports=T}),95253:(v=>{var T=function(t,h,g,o){g===void 0&&(g=0),o===void 0&&(o=6.28);for(var a=g,r=(o-g)/t.length,e=h.width/2,s=h.height/2,u=0;u<t.length;u++)t[u].x=h.x+e*Math.cos(a),t[u].y=h.y+s*Math.sin(a),a+=r;return t};v.exports=T}),88505:((v,T,t)=>{var h=t(15258),g=t(26708),o=function(a,r,e){var s;e?s=g(r,e,a.length):s=h(r,a.length);for(var u=0;u<a.length;u++){var n=a[u],l=s[u];n.x=l.x,n.y=l.y}return a};v.exports=o}),41346:((v,T,t)=>{var h=t(14649),g=t(86003),o=t(49498),a=function(r,e,s){s===void 0&&(s=0);var u=h(e,!1,r.length);s>0?g(u,s):s<0&&o(u,Math.abs(s));for(var n=0;n<r.length;n++)r[n].x=u[n].x,r[n].y=u[n].y;return r};v.exports=a}),11575:((v,T,t)=>{var h=t(84993),g=function(o,a,r){var e=h({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},r),s=h({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},r),u=h({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},r);e.pop(),s.pop(),u.pop(),e=e.concat(s,u);for(var n=e.length/o.length,l=0,c=0;c<o.length;c++){var d=o[c],f=e[Math.floor(l)];d.x=f.x,d.y=f.y,l+=n}return o};v.exports=g}),29953:(v=>{var T=function(t,h,g){for(var o=0;o<t.length;o++){var a=t[o];a.anims&&a.anims.play(h,g)}return t};v.exports=T}),66979:(v=>{var T=function(t,h,g,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=1);var e,s=0,u=t.length;if(r===1)for(e=a;e<u;e++)t[e][h]+=g+s*o,s++;else for(e=a;e>=0;e--)t[e][h]+=g+s*o,s++;return t};v.exports=T}),43967:(v=>{var T=function(t,h,g,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=1);var e,s=0,u=t.length;if(r===1)for(e=a;e<u;e++)t[e][h]=g+s*o,s++;else for(e=a;e>=0;e--)t[e][h]=g+s*o,s++;return t};v.exports=T}),88926:((v,T,t)=>{var h=t(28176),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};v.exports=g}),33286:((v,T,t)=>{var h=t(24820),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};v.exports=g}),96e3:((v,T,t)=>{var h=t(65822),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};v.exports=g}),28789:((v,T,t)=>{var h=t(26597),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};v.exports=g}),97154:((v,T,t)=>{var h=t(90260),g=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};v.exports=g}),20510:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s){return h(o,"rotation",a,r,e,s)};v.exports=g}),91051:((v,T,t)=>{var h=t(1163),g=t(20339),o=function(a,r,e){for(var s=r.x,u=r.y,n=0;n<a.length;n++){var l=a[n];h(l,s,u,e,Math.max(1,g(l.x,l.y,s,u)))}return a};v.exports=o}),76332:((v,T,t)=>{var h=t(1163),g=function(o,a,r,e){var s=a.x,u=a.y;if(e===0)return o;for(var n=0;n<o.length;n++)h(o[n],s,u,r,e);return o};v.exports=g}),61619:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s){return h(o,"scaleX",a,r,e,s)};v.exports=g}),94868:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s,u,n){return r==null&&(r=a),h(o,"scaleX",a,e,u,n),h(o,"scaleY",r,s,u,n)};v.exports=g}),95532:((v,T,t)=>{var h=t(66979),g=function(o,a,r,e,s){return h(o,"scaleY",a,r,e,s)};v.exports=g}),8689:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"alpha",a,r,e,s)};v.exports=g}),2645:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e){return h(o,"blendMode",a,0,r,e)};v.exports=g}),32372:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"depth",a,r,e,s)};v.exports=g}),85373:(v=>{var T=function(t,h,g){for(var o=0;o<t.length;o++)t[o].setInteractive(h,g);return t};v.exports=T}),81583:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s,u,n){return r==null&&(r=a),h(o,"originX",a,e,u,n),h(o,"originY",r,s,u,n),o.forEach(function(l){l.updateDisplayOrigin()}),o};v.exports=g}),79939:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"rotation",a,r,e,s)};v.exports=g}),2699:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s,u,n){return r==null&&(r=a),h(o,"scaleX",a,e,u,n),h(o,"scaleY",r,s,u,n)};v.exports=g}),98739:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"scaleX",a,r,e,s)};v.exports=g}),98476:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"scaleY",a,r,e,s)};v.exports=g}),6207:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s,u,n){return r==null&&(r=a),h(o,"scrollFactorX",a,e,u,n),h(o,"scrollFactorY",r,s,u,n)};v.exports=g}),6607:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"scrollFactorX",a,r,e,s)};v.exports=g}),72248:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"scrollFactorY",a,r,e,s)};v.exports=g}),14036:(v=>{var T=function(t,h,g,o,a){for(var r=0;r<t.length;r++)t[r].setTint(h,g,o,a);return t};v.exports=T}),50159:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e){return h(o,"visible",a,0,r,e)};v.exports=g}),77597:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"x",a,r,e,s)};v.exports=g}),83194:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s,u,n){return r==null&&(r=a),h(o,"x",a,e,u,n),h(o,"y",r,s,u,n)};v.exports=g}),67678:((v,T,t)=>{var h=t(43967),g=function(o,a,r,e,s){return h(o,"y",a,r,e,s)};v.exports=g}),35850:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s){e===void 0&&(e=0),s===void 0&&(s=new h);var u,n,l=o.length;if(l===1)u=o[0].x,n=o[0].y,o[0].x=a,o[0].y=r;else{var c=1,d=0;e===0&&(d=l-1,c=l-2),u=o[d].x,n=o[d].y,o[d].x=a,o[d].y=r;for(var f=0;f<l;f++)if(!(c>=l||c===-1)){var m=o[c],y=m.x,S=m.y;m.x=u,m.y=n,u=y,n=S,e===0?c--:c++}}return s.x=u,s.y=n,s};v.exports=g}),8628:((v,T,t)=>{var h=t(33680),g=function(o){return h(o)};v.exports=g}),21837:((v,T,t)=>{var h=t(7602),g=function(o,a,r,e,s){s===void 0&&(s=!1);var u=Math.abs(e-r)/o.length,n;if(s)for(n=0;n<o.length;n++)o[n][a]+=h(n*u,r,e);else for(n=0;n<o.length;n++)o[n][a]=h(n*u,r,e);return o};v.exports=g}),21910:((v,T,t)=>{var h=t(54261),g=function(o,a,r,e,s){s===void 0&&(s=!1);var u=Math.abs(e-r)/o.length,n;if(s)for(n=0;n<o.length;n++)o[n][a]+=h(n*u,r,e);else for(n=0;n<o.length;n++)o[n][a]=h(n*u,r,e);return o};v.exports=g}),62054:(v=>{var T=function(t,h,g,o,a){if(a===void 0&&(a=!1),t.length===0)return t;if(t.length===1)return a?t[0][h]+=(o+g)/2:t[0][h]=(o+g)/2,t;var r=Math.abs(o-g)/(t.length-1),e;if(a)for(e=0;e<t.length;e++)t[e][h]+=e*r+g;else for(e=0;e<t.length;e++)t[e][h]=e*r+g;return t};v.exports=T}),79815:(v=>{var T=function(t){for(var h=0;h<t.length;h++)t[h].visible=!t[h].visible;return t};v.exports=T}),39665:((v,T,t)=>{var h=t(15994),g=function(o,a,r){r===void 0&&(r=0);for(var e=0;e<o.length;e++){var s=o[e];s.x=h(s.x,a.left-r,a.right+r),s.y=h(s.y,a.top-r,a.bottom+r)}return o};v.exports=g}),61061:((v,T,t)=>{v.exports={AlignTo:t(11517),Angle:t(80318),Call:t(60757),GetFirst:t(69927),GetLast:t(32265),GridAlign:t(94420),IncAlpha:t(41721),IncX:t(67285),IncXY:t(9074),IncY:t(75222),PlaceOnCircle:t(22983),PlaceOnEllipse:t(95253),PlaceOnLine:t(88505),PlaceOnRectangle:t(41346),PlaceOnTriangle:t(11575),PlayAnimation:t(29953),PropertyValueInc:t(66979),PropertyValueSet:t(43967),RandomCircle:t(88926),RandomEllipse:t(33286),RandomLine:t(96e3),RandomRectangle:t(28789),RandomTriangle:t(97154),Rotate:t(20510),RotateAround:t(91051),RotateAroundDistance:t(76332),ScaleX:t(61619),ScaleXY:t(94868),ScaleY:t(95532),SetAlpha:t(8689),SetBlendMode:t(2645),SetDepth:t(32372),SetHitArea:t(85373),SetOrigin:t(81583),SetRotation:t(79939),SetScale:t(2699),SetScaleX:t(98739),SetScaleY:t(98476),SetScrollFactor:t(6207),SetScrollFactorX:t(6607),SetScrollFactorY:t(72248),SetTint:t(14036),SetVisible:t(50159),SetX:t(77597),SetXY:t(83194),SetY:t(67678),ShiftPosition:t(35850),Shuffle:t(8628),SmootherStep:t(21910),SmoothStep:t(21837),Spread:t(62054),ToggleVisible:t(79815),WrapInRectangle:t(39665)}}),42099:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(74943),a=t(81957),r=t(41138),e=t(35154),s=t(90126),u=new g({initialize:function(l,c,d){this.manager=l,this.key=c,this.type="frame",this.frames=this.getFrames(l.textureManager,e(d,"frames",[]),e(d,"defaultTextureKey",null),e(d,"sortFrames",!0)),this.frameRate=e(d,"frameRate",null),this.duration=e(d,"duration",null),this.msPerFrame,this.skipMissedFrames=e(d,"skipMissedFrames",!0),this.delay=e(d,"delay",0),this.repeat=e(d,"repeat",0),this.repeatDelay=e(d,"repeatDelay",0),this.yoyo=e(d,"yoyo",!1),this.showBeforeDelay=e(d,"showBeforeDelay",!1),this.showOnStart=e(d,"showOnStart",!1),this.hideOnComplete=e(d,"hideOnComplete",!1),this.randomFrame=e(d,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(o.PAUSE_ALL,this.pause,this),this.manager.on(o.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(n,l,c,d){c===null&&d===null?(n.frameRate=24,n.duration=24/l*1e3):c&&d===null?(n.duration=c,n.frameRate=l/(c/1e3)):(n.frameRate=d,n.duration=l/d*1e3),n.msPerFrame=1e3/n.frameRate},addFrame:function(n){return this.addFrameAt(this.frames.length,n)},addFrameAt:function(n,l){var c=this.getFrames(this.manager.textureManager,l);if(c.length>0){if(n===0)this.frames=c.concat(this.frames);else if(n===this.frames.length)this.frames=this.frames.concat(c);else{var d=this.frames.slice(0,n),f=this.frames.slice(n);this.frames=d.concat(c,f)}this.updateFrameSequence()}return this},checkFrame:function(n){return n>=0&&n<this.frames.length},getFirstTick:function(n){n.accumulator=0,n.nextTick=n.frameRate===n.currentAnim.frameRate&&n.currentFrame.duration||n.msPerFrame},getFrameAt:function(n){return this.frames[n]},getFrames:function(n,l,c,d){d===void 0&&(d=!0);var f=[],m,y,S=1,C,E;if(typeof l=="string"){if(E=l,!n.exists(E))return console.warn('Texture "%s" not found',E),f;var P=n.get(E),A=P.getFrameNames();d&&s(A),l=[],A.forEach(function(I){l.push({key:E,frame:I})})}if(!Array.isArray(l)||l.length===0)return f;for(C=0;C<l.length;C++){var F=l[C],G=e(F,"key",c);if(G){var D=e(F,"frame",0),L=n.getFrame(G,D);if(!L){console.warn('Texture "%s" not found',G);continue}y=new r(G,D,S,L),y.duration=e(F,"duration",0),y.isFirst=!m,m&&(m.nextFrame=y,y.prevFrame=m),f.push(y),m=y,S++}}if(f.length>0){y.isLast=!0,y.nextFrame=f[0],f[0].prevFrame=y;var b=1/(f.length-1);for(C=0;C<f.length;C++)f[C].progress=C*b}return f},getNextTick:function(n){n.accumulator-=n.nextTick,n.nextTick=n.frameRate===n.currentAnim.frameRate&&n.currentFrame.duration||n.msPerFrame},getFrameByProgress:function(n){return n=h(n,0,1),a(n,this.frames,"progress")},nextFrame:function(n){var l=n.currentFrame;l.isLast?n.yoyo?this.handleYoyoFrame(n,!1):n.repeatCounter>0?n.inReverse&&n.forward?n.forward=!1:this.repeatAnimation(n):n.complete():this.updateAndGetNextTick(n,l.nextFrame)},handleYoyoFrame:function(n,l){if(l||(l=!1),n.inReverse===!l&&n.repeatCounter>0){(n.repeatDelay===0||n.pendingRepeat)&&(n.forward=l),this.repeatAnimation(n);return}if(n.inReverse!==l&&n.repeatCounter===0){n.complete();return}n.forward=l;var c=l?n.currentFrame.nextFrame:n.currentFrame.prevFrame;this.updateAndGetNextTick(n,c)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(n){var l=n.currentFrame;l.isFirst?n.yoyo?this.handleYoyoFrame(n,!0):n.repeatCounter>0?n.inReverse&&!n.forward?this.repeatAnimation(n):(n.forward=!0,this.repeatAnimation(n)):n.complete():this.updateAndGetNextTick(n,l.prevFrame)},updateAndGetNextTick:function(n,l){n.setCurrentFrame(l),this.getNextTick(n)},removeFrame:function(n){var l=this.frames.indexOf(n);return l!==-1&&this.removeFrameAt(l),this},removeFrameAt:function(n){return this.frames.splice(n,1),this.updateFrameSequence(),this},repeatAnimation:function(n){if(n._pendingStop===2){if(n._pendingStopValue===0)return n.stop();n._pendingStopValue--}n.repeatDelay>0&&!n.pendingRepeat?(n.pendingRepeat=!0,n.accumulator-=n.nextTick,n.nextTick+=n.repeatDelay):(n.repeatCounter--,n.forward?n.setCurrentFrame(n.currentFrame.nextFrame):n.setCurrentFrame(n.currentFrame.prevFrame),n.isPlaying&&(this.getNextTick(n),n.handleRepeat()))},toJSON:function(){var n={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(l){n.frames.push(l.toJSON())}),n},updateFrameSequence:function(){for(var n=this.frames.length,l=1/(n-1),c,d=0;d<n;d++)c=this.frames[d],c.index=d+1,c.isFirst=!1,c.isLast=!1,c.progress=d*l,d===0?(c.isFirst=!0,n===1?(c.isLast=!0,c.nextFrame=c,c.prevFrame=c):(c.isLast=!1,c.prevFrame=this.frames[n-1],c.nextFrame=this.frames[d+1])):d===n-1&&n>1?(c.isLast=!0,c.prevFrame=this.frames[n-2],c.nextFrame=this.frames[0]):n>1&&(c.prevFrame=this.frames[d-1],c.nextFrame=this.frames[d+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(o.PAUSE_ALL,this.pause,this),this.manager.off(o.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var n=0;n<this.frames.length;n++)this.frames[n].destroy();this.frames=[],this.manager=null}});v.exports=u}),41138:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,s,u){u===void 0&&(u=!1),this.textureKey=a,this.textureFrame=r,this.index=e,this.frame=s,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=u},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});v.exports=g}),60848:((v,T,t)=>{var h=t(42099),g=t(83419),o=t(90330),a=t(50792),r=t(74943),e=t(8443),s=t(95540),u=t(35154),n=t(36383),l=t(20283),c=t(41836),d=new g({Extends:a,initialize:function(m){a.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new o,this.mixes=new o,this.paused=!1,this.name="AnimationManager",m.events.once(e.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(e.DESTROY,this.destroy,this)},addMix:function(f,m,y){var S=this.anims,C=this.mixes,E=typeof f=="string"?f:f.key,P=typeof m=="string"?m:m.key;if(S.has(E)&&S.has(P)){var A=C.get(E);A||(A={}),A[P]=y,C.set(E,A)}return this},removeMix:function(f,m){var y=this.mixes,S=typeof f=="string"?f:f.key,C=y.get(S);if(C)if(m){var E=typeof m=="string"?m:m.key;C.hasOwnProperty(E)&&delete C[E]}else m||y.delete(S);return this},getMix:function(f,m){var y=this.mixes,S=typeof f=="string"?f:f.key,C=typeof m=="string"?m:m.key,E=y.get(S);return E&&E.hasOwnProperty(C)?E[C]:0},add:function(f,m){return this.anims.has(f)?(console.warn("Animation key exists: "+f),this):(m.key=f,this.anims.set(f,m),this.emit(r.ADD_ANIMATION,f,m),this)},exists:function(f){return this.anims.has(f)},createFromAseprite:function(f,m,y){var S=[],C=this.game.cache.json.get(f);if(!C)return console.warn("No Aseprite data found for: "+f),S;var E=this,P=u(C,"meta",null),A=u(C,"frames",null);if(P&&A){var F=u(P,"frameTags",[]);F.forEach(function(G){var D=[],L=s(G,"name",null),b=s(G,"from",0),I=s(G,"to",0),N=s(G,"direction","forward");if(L&&(!m||m&&m.indexOf(L)>-1)){for(var Z=0,U=b;U<=I;U++){var W=U.toString(),X=A[W];if(X){var V=s(X,"duration",n.MAX_SAFE_INTEGER);D.push({key:f,frame:W,duration:V}),Z+=V}}N==="reverse"&&(D=D.reverse());var O={key:L,frames:D,duration:Z,yoyo:N==="pingpong"},z;y?y.anims&&(z=y.anims.create(O)):z=E.create(O),z&&S.push(z)}})}return S},create:function(f){var m=f.key,y=!1;return m&&(y=this.get(m),y?console.warn("AnimationManager key already exists: "+m):(y=new h(this,m,f),this.anims.set(m,y),this.emit(r.ADD_ANIMATION,m,y))),y},fromJSON:function(f,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof f=="string"&&(f=JSON.parse(f));var y=[];if(f.hasOwnProperty("anims")&&Array.isArray(f.anims)){for(var S=0;S<f.anims.length;S++)y.push(this.create(f.anims[S]));f.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=f.globalTimeScale)}else f.hasOwnProperty("key")&&f.type==="frame"&&y.push(this.create(f));return y},generateFrameNames:function(f,m){var y=u(m,"prefix",""),S=u(m,"start",0),C=u(m,"end",0),E=u(m,"suffix",""),P=u(m,"zeroPad",0),A=u(m,"outputArray",[]),F=u(m,"frames",!1);if(!this.textureManager.exists(f))return console.warn('Texture "%s" not found',f),A;var G=this.textureManager.get(f);if(!G)return A;var D;if(m)for(F||(F=l(S,C)),D=0;D<F.length;D++){var L=y+c(F[D],P,"0",1)+E;G.has(L)?A.push({key:f,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,f)}else for(F=G.getFrameNames(),D=0;D<F.length;D++)A.push({key:f,frame:F[D]});return A},generateFrameNumbers:function(f,m){var y=u(m,"start",0),S=u(m,"end",-1),C=u(m,"first",!1),E=u(m,"outputArray",[]),P=u(m,"frames",!1);if(!this.textureManager.exists(f))return console.warn('Texture "%s" not found',f),E;var A=this.textureManager.get(f);if(!A)return E;C&&A.has(C)&&E.push({key:f,frame:C}),P||(S===-1&&(S=A.frameTotal-2),P=l(y,S));for(var F=0;F<P.length;F++){var G=P[F];A.has(G)?E.push({key:f,frame:G}):console.warn('Frame "%s" not found in texture "%s"',G,f)}return E},get:function(f){return this.anims.get(f)},getAnimsFromTexture:function(f){for(var m=this.textureManager.get(f),y=m.key,S=this.anims.getArray(),C=[],E=0;E<S.length;E++)for(var P=S[E],A=P.frames,F=0;F<A.length;F++)if(A[F].textureKey===y){C.push(P.key);break}return C},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(r.PAUSE_ALL)),this},play:function(f,m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++)m[y].anims.play(f);return this},staggerPlay:function(f,m,y,S){y===void 0&&(y=0),S===void 0&&(S=!0),Array.isArray(m)||(m=[m]);var C=m.length;S||C--;for(var E=0;E<m.length;E++){var P=y<0?Math.abs(y)*(C-E):y*E;m[E].anims.playAfterDelay(f,P)}return this},remove:function(f){var m=this.get(f);return m&&(this.emit(r.REMOVE_ANIMATION,f,m),this.anims.delete(f),this.removeMix(f)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(r.RESUME_ALL)),this},toJSON:function(f){var m={anims:[],globalTimeScale:this.globalTimeScale};return f!==void 0&&f!==""?m.anims.push(this.anims.get(f).toJSON()):this.anims.each(function(y,S){m.anims.push(S.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});v.exports=d}),9674:((v,T,t)=>{var h=t(42099),g=t(30976),o=t(83419),a=t(90330),r=t(74943),e=t(95540),s=new o({initialize:function(n){this.parent=n,this.animationManager=n.scene.sys.anims,this.animationManager.on(r.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(u){var n=this.parent;if(u===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,n;Array.isArray(u)||(u=[u]);for(var l=0;l<u.length;l++){var c=u[l];this.nextAnim?this.nextAnimsQueue.push(c):this.nextAnim=c}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(u){this.isPlaying&&this.stop();var n=this.animationManager,l=typeof u=="string"?u:e(u,"key",null),c=this.exists(l)?this.get(l):n.get(l);if(!c)console.warn("Missing animation: "+l);else{this.currentAnim=c;var d=c.getTotalFrames(),f=e(u,"frameRate",c.frameRate),m=e(u,"duration",c.duration);c.calculateDuration(this,d,m,f),this.delay=e(u,"delay",c.delay),this.repeat=e(u,"repeat",c.repeat),this.repeatDelay=e(u,"repeatDelay",c.repeatDelay),this.yoyo=e(u,"yoyo",c.yoyo),this.showBeforeDelay=e(u,"showBeforeDelay",c.showBeforeDelay),this.showOnStart=e(u,"showOnStart",c.showOnStart),this.hideOnComplete=e(u,"hideOnComplete",c.hideOnComplete),this.skipMissedFrames=e(u,"skipMissedFrames",c.skipMissedFrames),this.randomFrame=e(u,"randomFrame",c.randomFrame),this.timeScale=e(u,"timeScale",this.timeScale);var y=e(u,"startFrame",0);y>d&&(y=0),this.randomFrame&&(y=g(0,d-1));var S=c.frames[y];y===0&&!this.forward&&(S=c.getLastFrame()),this.currentFrame=S}return this.parent},pause:function(u){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),u!==void 0&&this.setCurrentFrame(u),this.parent},resume:function(u){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),u!==void 0&&this.setCurrentFrame(u),this.parent},playAfterDelay:function(u,n){if(!this.isPlaying)this.delayCounter=n,this.play(u,!0);else{var l=this.nextAnim,c=this.nextAnimsQueue;l&&c.unshift(l),this.nextAnim=u,this._pendingStop=1,this._pendingStopValue=n}return this.parent},playAfterRepeat:function(u,n){if(n===void 0&&(n=1),!this.isPlaying)this.play(u);else{var l=this.nextAnim,c=this.nextAnimsQueue;l&&c.unshift(l),this.repeatCounter!==-1&&n>this.repeatCounter&&(n=this.repeatCounter),this.nextAnim=u,this._pendingStop=2,this._pendingStopValue=n}return this.parent},play:function(u,n){n===void 0&&(n=!1);var l=this.currentAnim,c=this.parent,d=typeof u=="string"?u:u.key;if(n&&this.isPlaying&&l.key===d)return c;if(l&&this.isPlaying){var f=this.animationManager.getMix(l.key,u);if(f>0)return this.playAfterDelay(u,f)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u)},playReverse:function(u,n){n===void 0&&(n=!1);var l=typeof u=="string"?u:u.key;return n&&this.isPlaying&&this.currentAnim.key===l?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(u))},startAnimation:function(u){this.load(u);var n=this.currentAnim,l=this.parent;return n&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,n.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),l},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(r.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(r.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(r.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(r.ANIMATION_COMPLETE,r.ANIMATION_COMPLETE_KEY)},emitEvents:function(u,n){var l=this.currentAnim;if(l){var c=this.currentFrame,d=this.parent,f=c.textureFrame;d.emit(u,l,c,d,f),n&&d.emit(n+l.key,l,c,d,f)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var u=this.currentFrame;if(!u)return 0;var n=u.progress;return this.inReverse&&(n*=-1),n},setProgress:function(u){return this.forward||(u=1-u),this.setCurrentFrame(this.currentAnim.getFrameByProgress(u)),this.parent},setRepeat:function(u){return this.repeatCounter=u===-1?Number.MAX_VALUE:u,this.parent},globalRemove:function(u,n){n===void 0&&(n=this.currentAnim),this.isPlaying&&n.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(u,n){u===void 0&&(u=!1),n===void 0&&(n=!1);var l=this.currentAnim,c=this.parent;return l?(n&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),l.getFirstTick(this),this.emitEvents(r.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!u,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(l.frames[0]),this.parent):c},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(u)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var u=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(u)}return this.parent},stopAfterDelay:function(u){return this._pendingStop=1,this._pendingStopValue=u,this.parent},stopAfterRepeat:function(u){return u===void 0&&(u=1),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=u,this.parent},stopOnFrame:function(u){return this._pendingStop=3,this._pendingStopValue=u,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(u,n){var l=this.currentAnim;if(!(!this.isPlaying||!l||l.paused)){if(this.accumulator+=n*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=n,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?l.nextFrame(this):l.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var c=0;do this.forward?l.nextFrame(this):l.previousFrame(this),c++;while(this.isPlaying&&this.accumulator>this.nextTick&&c<60)}}},setCurrentFrame:function(u){var n=this.parent;return this.currentFrame=u,n.texture=u.frame.texture,n.frame=u.frame,n.isCropped&&n.frame.updateCropUVs(n._crop,n.flipX,n.flipY),u.setAlpha&&(n.alpha=u.alpha),n.setSizeToFrame(),n._originComponent&&(u.frame.customPivot?n.setOrigin(u.frame.pivotX,u.frame.pivotY):n.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(r.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===u&&this.stop()),n},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(u){return this.anims?this.anims.get(u):null},exists:function(u){return this.anims?this.anims.has(u):!1},create:function(u){var n=u.key,l=!1;return n&&(l=this.get(n),l?console.warn("Animation key already exists: "+n):(l=new h(this,n,u),this.anims||(this.anims=new a),this.anims.set(n,l))),l},createFromAseprite:function(u,n){return this.animationManager.createFromAseprite(u,n,this.parent)},generateFrameNames:function(u,n){return this.animationManager.generateFrameNames(u,n)},generateFrameNumbers:function(u,n){return this.animationManager.generateFrameNumbers(u,n)},remove:function(u){var n=this.get(u);return n&&(this.currentAnim===n&&this.stop(),this.anims.delete(u)),n},destroy:function(){this.animationManager.off(r.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});v.exports=s}),57090:(v=>{v.exports="add"}),25312:(v=>{v.exports="animationcomplete"}),89580:(v=>{v.exports="animationcomplete-"}),52860:(v=>{v.exports="animationrepeat"}),63850:(v=>{v.exports="animationrestart"}),99085:(v=>{v.exports="animationstart"}),28087:(v=>{v.exports="animationstop"}),1794:(v=>{v.exports="animationupdate"}),52562:(v=>{v.exports="pauseall"}),57953:(v=>{v.exports="remove"}),68339:(v=>{v.exports="resumeall"}),74943:((v,T,t)=>{v.exports={ADD_ANIMATION:t(57090),ANIMATION_COMPLETE:t(25312),ANIMATION_COMPLETE_KEY:t(89580),ANIMATION_REPEAT:t(52860),ANIMATION_RESTART:t(63850),ANIMATION_START:t(99085),ANIMATION_STOP:t(28087),ANIMATION_UPDATE:t(1794),PAUSE_ALL:t(52562),REMOVE_ANIMATION:t(57953),RESUME_ALL:t(68339)}}),60421:((v,T,t)=>{v.exports={Animation:t(42099),AnimationFrame:t(41138),AnimationManager:t(60848),AnimationState:t(9674),Events:t(74943)}}),2161:((v,T,t)=>{var h=t(83419),g=t(90330),o=t(50792),a=t(24736),r=new h({initialize:function(){this.entries=new g,this.events=new o},add:function(e,s){return this.entries.set(e,s),this.events.emit(a.ADD,this,e,s),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var s=this.get(e);return s&&(this.entries.delete(e),this.events.emit(a.REMOVE,this,e,s.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});v.exports=r}),24047:((v,T,t)=>{var h=t(2161),g=t(83419),o=t(8443),a=new g({initialize:function(e){this.game=e,this.binary=new h,this.bitmapFont=new h,this.json=new h,this.physics=new h,this.shader=new h,this.audio=new h,this.video=new h,this.text=new h,this.html=new h,this.obj=new h,this.tilemap=new h,this.xml=new h,this.custom={},this.game.events.once(o.DESTROY,this.destroy,this)},addCustom:function(r){return this.custom.hasOwnProperty(r)||(this.custom[r]=new h),this.custom[r]},destroy:function(){for(var r=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<r.length;e++)this[r[e]].destroy(),this[r[e]]=null;for(var s in this.custom)this.custom[s].destroy();this.custom=null,this.game=null}});v.exports=a}),51464:(v=>{v.exports="add"}),59261:(v=>{v.exports="remove"}),24736:((v,T,t)=>{v.exports={ADD:t(51464),REMOVE:t(59261)}}),83388:((v,T,t)=>{v.exports={BaseCache:t(2161),CacheManager:t(24047),Events:t(24736)}}),71911:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(39506),a=t(50792),r=t(19715),e=t(87841),s=t(61340),u=t(80333),n=t(26099),l=new h({Extends:a,Mixins:[g.AlphaSingle,g.Visible],initialize:function(d,f,m,y){d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new e,this.dirty=!0,this._x=d,this._y=f,this._width=m,this._height=y,this._bounds=new e,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new s,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new n(m/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(c){this.renderList.push(c)},setOrigin:function(c,d){return c===void 0&&(c=.5),d===void 0&&(d=c),this.originX=c,this.originY=d,this},getScroll:function(c,d,f){f===void 0&&(f=new n);var m=this.width*.5,y=this.height*.5;return f.x=c-m,f.y=d-y,this.useBounds&&(f.x=this.clampX(f.x),f.y=this.clampY(f.y)),f},centerOnX:function(c){var d=this.width*.5;return this.midPoint.x=c,this.scrollX=c-d,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(c){var d=this.height*.5;return this.midPoint.y=c,this.scrollY=c-d,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(c,d){return this.centerOnX(c),this.centerOnY(d),this},centerToBounds:function(){if(this.useBounds){var c=this._bounds,d=this.width*.5,f=this.height*.5;this.midPoint.set(c.centerX,c.centerY),this.scrollX=c.centerX-d,this.scrollY=c.centerY-f}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(c){if(this.disableCull)return c;var d=this.matrix.matrix,f=d[0],m=d[1],y=d[2],S=d[3],C=f*S-m*y;if(!C)return c;var E=d[4],P=d[5],A=this.scrollX,F=this.scrollY,G=this.width,D=this.height,L=this.y,b=L+D,I=this.x,N=I+G,Z=this.culledObjects,U=c.length;C=1/C,Z.length=0;for(var W=0;W<U;++W){var X=c[W];if(!X.hasOwnProperty("width")||X.parentContainer){Z.push(X);continue}var V=X.width,O=X.height,z=X.x-A*X.scrollFactorX-V*X.originX,B=X.y-F*X.scrollFactorY-O*X.originY,Y=z*f+B*y+E,k=z*m+B*S+P,J=(z+V)*f+(B+O)*y+E,j=(z+V)*m+(B+O)*S+P;J>I&&Y<N&&j>L&&k<b&&Z.push(X)}return Z},getWorldPoint:function(c,d,f){f===void 0&&(f=new n);var m=this.matrix.matrix,y=m[0],S=m[1],C=m[2],E=m[3],P=m[4],A=m[5],F=y*E-S*C;if(!F)return f.x=c,f.y=d,f;F=1/F;var G=E*F,D=-S*F,L=-C*F,b=y*F,I=(C*A-E*P)*F,N=(S*P-y*A)*F,Z=Math.cos(this.rotation),U=Math.sin(this.rotation),W=this.zoomX,X=this.zoomY,V=this.scrollX,O=this.scrollY,z=c+(V*Z-O*U)*W,B=d+(V*U+O*Z)*X;return f.x=z*G+B*L+I,f.y=z*D+B*b+N,f},ignore:function(c){var d=this.id;Array.isArray(c)||(c=[c]);for(var f=0;f<c.length;f++){var m=c[f];Array.isArray(m)?this.ignore(m):m.isParent?this.ignore(m.getChildren()):m.cameraFilter|=d}return this},clampX:function(c){var d=this._bounds,f=this.displayWidth,m=d.x+(f-this.width)/2,y=Math.max(m,m+d.width-f);return c<m?c=m:c>y&&(c=y),c},clampY:function(c){var d=this._bounds,f=this.displayHeight,m=d.y+(f-this.height)/2,y=Math.max(m,m+d.height-f);return c<m?c=m:c>y&&(c=y),c},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(c){return c===void 0&&(c=0),this.rotation=o(c),this},setBackgroundColor:function(c){return c===void 0&&(c="rgba(0,0,0,0)"),this.backgroundColor=u(c),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(c,d,f,m,y){return y===void 0&&(y=!1),this._bounds.setTo(c,d,f,m),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(c){c===void 0&&(c=new e);var d=this._bounds;return c.setTo(d.x,d.y,d.width,d.height),c},setName:function(c){return c===void 0&&(c=""),this.name=c,this},setPosition:function(c,d){return d===void 0&&(d=c),this.x=c,this.y=d,this},setRotation:function(c){return c===void 0&&(c=0),this.rotation=c,this},setRoundPixels:function(c){return this.roundPixels=c,this},setScene:function(c,d){d===void 0&&(d=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=c,this.isSceneCamera=d;var f=c.sys;return this.sceneManager=f.game.scene,this.scaleManager=f.scale,this.cameraManager=f.cameras,this.updateSystem(),this},setScroll:function(c,d){return d===void 0&&(d=c),this.scrollX=c,this.scrollY=d,this},setSize:function(c,d){return d===void 0&&(d=c),this.width=c,this.height=d,this},setViewport:function(c,d,f,m){return this.x=c,this.y=d,this.width=f,this.height=m,this},setZoom:function(c,d){return c===void 0&&(c=1),d===void 0&&(d=c),c===0&&(c=.001),d===0&&(d=.001),this.zoomX=c,this.zoomY=d,this},setMask:function(c,d){return d===void 0&&(d=!0),this.mask=c,this._maskCamera=d?this.cameraManager.default:this,this},clearMask:function(c){return c===void 0&&(c=!1),c&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var c={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(c.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),c},update:function(){},setIsSceneCamera:function(c){return this.isSceneCamera=c,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var c=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,d=this.sceneManager;c&&!this._customViewport?d.customViewports++:!c&&this._customViewport&&d.customViewports--,this.dirty=!0,this._customViewport=c}},destroy:function(){this.emit(r.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(c){this._x=c,this.updateSystem()}},y:{get:function(){return this._y},set:function(c){this._y=c,this.updateSystem()}},width:{get:function(){return this._width},set:function(c){this._width=c,this.updateSystem()}},height:{get:function(){return this._height},set:function(c){this._height=c,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(c){c!==this._scrollX&&(this._scrollX=c,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(c){c!==this._scrollY&&(this._scrollY=c,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(c){this._zoomX=c,this._zoomY=c,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(c){this._zoomX=c,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(c){this._zoomY=c,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});v.exports=l}),38058:((v,T,t)=>{var h=t(71911),g=t(67502),o=t(45319),a=t(83419),r=t(31401),e=t(20052),s=t(19715),u=t(28915),n=t(87841),l=t(26099),c=new a({Extends:h,Mixins:[r.PostPipeline],initialize:function(f,m,y,S){h.call(this,f,m,y,S),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new e.Fade(this),this.flashEffect=new e.Flash(this),this.shakeEffect=new e.Shake(this),this.panEffect=new e.Pan(this),this.rotateToEffect=new e.RotateTo(this),this.zoomEffect=new e.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(d,f){if(d===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=d,this.deadzone.height=f):this.deadzone=new n(0,0,d,f),this._follow){var m=this.width/2,y=this.height/2,S=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(S,C),this.scrollX=S-m,this.scrollY=C-y}g(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(d,f,m,y,S,C){return this.fadeEffect.start(!1,d,f,m,y,!0,S,C)},fadeOut:function(d,f,m,y,S,C){return this.fadeEffect.start(!0,d,f,m,y,!0,S,C)},fadeFrom:function(d,f,m,y,S,C,E){return this.fadeEffect.start(!1,d,f,m,y,S,C,E)},fade:function(d,f,m,y,S,C,E){return this.fadeEffect.start(!0,d,f,m,y,S,C,E)},flash:function(d,f,m,y,S,C,E){return this.flashEffect.start(d,f,m,y,S,C,E)},shake:function(d,f,m,y,S){return this.shakeEffect.start(d,f,m,y,S)},pan:function(d,f,m,y,S,C,E){return this.panEffect.start(d,f,m,y,S,C,E)},rotateTo:function(d,f,m,y,S,C,E){return this.rotateToEffect.start(d,f,m,y,S,C,E)},zoomTo:function(d,f,m,y,S,C){return this.zoomEffect.start(d,f,m,y,S,C)},preRender:function(){this.renderList.length=0;var d=this.width,f=this.height,m=d*.5,y=f*.5,S=this.zoomX,C=this.zoomY,E=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(S)&&Number.isInteger(C);var P=d*this.originX,A=f*this.originY,F=this._follow,G=this.deadzone,D=this.scrollX,L=this.scrollY;G&&g(G,this.midPoint.x,this.midPoint.y);var b=!1;if(F&&!this.panEffect.isRunning){var I=this.lerp,N=F.x-this.followOffset.x,Z=F.y-this.followOffset.y;G?(N<G.x?D=u(D,D-(G.x-N),I.x):N>G.right&&(D=u(D,D+(N-G.right),I.x)),Z<G.y?L=u(L,L-(G.y-Z),I.y):Z>G.bottom&&(L=u(L,L+(Z-G.bottom),I.y))):(D=u(D,N-P,I.x),L=u(L,Z-A,I.y)),b=!0}this.roundPixels&&(D=Math.floor(D),L=Math.floor(L)),this.useBounds&&(D=this.clampX(D),L=this.clampY(L)),this.scrollX=D,this.scrollY=L;var U=D+m,W=L+y;this.midPoint.set(U,W);var X=Math.floor(d/S+.5),V=Math.floor(f/C+.5),O=Math.floor(U-X/2+.5),z=Math.floor(W-V/2+.5);this.worldView.setTo(O,z,X,V),E.applyITRS(Math.floor(this.x+P+.5),Math.floor(this.y+A+.5),this.rotation,S,C),E.translate(-P,-A),this.shakeEffect.preRender(),b&&this.emit(s.FOLLOW_UPDATE,this,F)},setLerp:function(d,f){return d===void 0&&(d=1),f===void 0&&(f=d),this.lerp.set(d,f),this},setFollowOffset:function(d,f){return d===void 0&&(d=0),f===void 0&&(f=0),this.followOffset.set(d,f),this},startFollow:function(d,f,m,y,S,C){f===void 0&&(f=!1),m===void 0&&(m=1),y===void 0&&(y=m),S===void 0&&(S=0),C===void 0&&(C=S),this._follow=d,this.roundPixels=f,m=o(m,0,1),y=o(y,0,1),this.lerp.set(m,y),this.followOffset.set(S,C);var E=this.width/2,P=this.height/2,A=d.x-S,F=d.y-C;return this.midPoint.set(A,F),this.scrollX=A-E,this.scrollY=F-P,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(d,f){this.visible&&(this.rotateToEffect.update(d,f),this.panEffect.update(d,f),this.zoomEffect.update(d,f),this.shakeEffect.update(d,f),this.flashEffect.update(d,f),this.fadeEffect.update(d,f))},destroy:function(){this.resetFX(),h.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});v.exports=c}),32743:((v,T,t)=>{var h=t(38058),g=t(83419),o=t(95540),a=t(37277),r=t(37303),e=t(97480),s=t(44594),u=new g({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(s.BOOT,this.boot,this),l.sys.events.on(s.START,this.start,this)},boot:function(){var n=this.systems;n.settings.cameras?this.fromJSON(n.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new h(0,0,n.scale.width,n.scale.height).setScene(this.scene),n.game.scale.on(e.RESIZE,this.onResize,this),this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){if(!this.main){var n=this.systems;n.settings.cameras?this.fromJSON(n.settings.cameras):this.add(),this.main=this.cameras[0]}var l=this.systems.events;l.on(s.UPDATE,this.update,this),l.once(s.SHUTDOWN,this.shutdown,this)},add:function(n,l,c,d,f,m){n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),f===void 0&&(f=!1),m===void 0&&(m="");var y=new h(n,l,c,d);return y.setName(m),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),f&&(this.main=y),y},addExisting:function(n,l){l===void 0&&(l=!1);var c=this.cameras.indexOf(n);return c===-1?(n.id=this.getNextID(),n.setRoundPixels(this.roundPixels),this.cameras.push(n),l&&(this.main=n),n):null},getNextID:function(){for(var n=this.cameras,l=1,c=0;c<32;c++){for(var d=!1,f=0;f<n.length;f++){var m=n[f];if(m&&m.id===l){d=!0;continue}}if(d)l=l<<1;else return l}return 0},getTotal:function(n){n===void 0&&(n=!1);for(var l=0,c=this.cameras,d=0;d<c.length;d++){var f=c[d];(!n||n&&f.visible)&&l++}return l},fromJSON:function(n){Array.isArray(n)||(n=[n]);for(var l=this.scene.sys.scale.width,c=this.scene.sys.scale.height,d=0;d<n.length;d++){var f=n[d],m=o(f,"x",0),y=o(f,"y",0),S=o(f,"width",l),C=o(f,"height",c),E=this.add(m,y,S,C);E.name=o(f,"name",""),E.zoom=o(f,"zoom",1),E.rotation=o(f,"rotation",0),E.scrollX=o(f,"scrollX",0),E.scrollY=o(f,"scrollY",0),E.roundPixels=o(f,"roundPixels",!1),E.visible=o(f,"visible",!0);var P=o(f,"backgroundColor",!1);P&&E.setBackgroundColor(P);var A=o(f,"bounds",null);if(A){var F=o(A,"x",0),G=o(A,"y",0),D=o(A,"width",l),L=o(A,"height",c);E.setBounds(F,G,D,L)}}return this},getCamera:function(n){for(var l=this.cameras,c=0;c<l.length;c++)if(l[c].name===n)return l[c];return null},getCamerasBelowPointer:function(n){for(var l=this.cameras,c=n.x,d=n.y,f=[],m=0;m<l.length;m++){var y=l[m];y.visible&&y.inputEnabled&&r(y,c,d)&&f.unshift(y)}return f},remove:function(n,l){l===void 0&&(l=!0),Array.isArray(n)||(n=[n]);for(var c=0,d=this.cameras,f=0;f<n.length;f++){var m=d.indexOf(n[f]);m!==-1&&(l?d[m].destroy():d[m].renderList=[],d.splice(m,1),c++)}return!this.main&&d[0]&&(this.main=d[0]),c},render:function(n,l){for(var c=this.scene,d=this.cameras,f=0;f<d.length;f++){var m=d[f];if(m.visible&&m.alpha>0){m.preRender();var y=this.getVisibleChildren(l.getChildren(),m);n.render(c,y,m)}}},getVisibleChildren:function(n,l){return n.filter(function(c){return c.willRender(l)})},resetAll:function(){for(var n=0;n<this.cameras.length;n++)this.cameras[n].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(n,l){for(var c=0;c<this.cameras.length;c++)this.cameras[c].update(n,l)},onResize:function(n,l,c,d,f){for(var m=0;m<this.cameras.length;m++){var y=this.cameras[m];y._x===0&&y._y===0&&y._width===d&&y._height===f&&y.setSize(l.width,l.height)}},resize:function(n,l){for(var c=0;c<this.cameras.length;c++)this.cameras[c].setSize(n,l)},shutdown:function(){this.main=void 0;for(var n=0;n<this.cameras.length;n++)this.cameras[n].destroy();this.cameras=[];var l=this.systems.events;l.off(s.UPDATE,this.update,this),l.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(s.START,this.start,this),this.systems.events.off(s.DESTROY,this.destroy,this),this.systems.game.scale.off(e.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});a.register("CameraManager",u,"cameras"),v.exports=u}),5020:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(19715),a=new g({initialize:function(e){this.camera=e,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,e,s,u,n,l,c,d){if(r===void 0&&(r=!0),e===void 0&&(e=1e3),s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=!1),c===void 0&&(c=null),d===void 0&&(d=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=r,this.progress=0,this.red=s,this.green=u,this.blue=n,this.alpha=r?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d;var f=r?o.FADE_OUT_START:o.FADE_IN_START;return this.camera.emit(f,this.camera,this,e,s,u,n),this.camera},update:function(r,e){this.isRunning&&(this._elapsed+=e,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(r){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return r.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",r.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(r,e){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera,u=this.red/255,n=this.green/255,l=this.blue/255;return r.drawFillRect(s.x,s.y,s.width,s.height,e(l,n,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var r=this.direction?o.FADE_OUT_COMPLETE:o.FADE_IN_COMPLETE;this.camera.emit(r,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=a}),10662:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(19715),a=new g({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(r,e,s,u,n,l,c){return r===void 0&&(r=250),e===void 0&&(e=255),s===void 0&&(s=255),u===void 0&&(u=255),n===void 0&&(n=!1),l===void 0&&(l=null),c===void 0&&(c=this.camera.scene),!n&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,this.red=e,this.green=s,this.blue=u,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=c,this.camera.emit(o.FLASH_START,this.camera,this,r,e,s,u),this.camera)},update:function(r,e){this.isRunning&&(this._elapsed+=e,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(r){if(!this.isRunning)return!1;var e=this.camera;return r.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",r.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(r,e){if(!this.isRunning)return!1;var s=this.camera,u=this.red/255,n=this.green/255,l=this.blue/255;return r.drawFillRect(s.x,s.y,s.width,s.height,e(l,n,u,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=a}),20359:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(62640),a=t(19715),r=t(26099),e=new g({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=new r,this.current=new r,this.destination=new r,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,u,n,l,c,d,f){n===void 0&&(n=1e3),l===void 0&&(l=o.Linear),c===void 0&&(c=!1),d===void 0&&(d=null),f===void 0&&(f=this.camera.scene);var m=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source.set(m.scrollX,m.scrollY),this.destination.set(s,u),m.getScroll(s,u,this.current),typeof l=="string"&&o.hasOwnProperty(l)?this.ease=o[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f,this.camera.emit(a.PAN_START,this.camera,this,n,s,u)),m},update:function(s,u){if(this.isRunning){this._elapsed+=u;var n=h(this._elapsed/this.duration,0,1);this.progress=n;var l=this.camera;if(this._elapsed<this.duration){var c=this.ease(n);l.getScroll(this.destination.x,this.destination.y,this.current);var d=this.source.x+(this.current.x-this.source.x)*c,f=this.source.y+(this.current.y-this.source.y)*c;l.setScroll(d,f),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,n,d,f)}else l.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,n,l.scrollX,l.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});v.exports=e}),34208:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(19715),a=t(62640),r=new g({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(e,s,u,n,l,c,d){u===void 0&&(u=1e3),n===void 0&&(n=a.Linear),l===void 0&&(l=!1),c===void 0&&(c=null),d===void 0&&(d=this.camera.scene),s===void 0&&(s=!1),this.shortestPath=s;var f=e;e<0?(f=-1*e,this.clockwise=!1):this.clockwise=!0;var m=360*Math.PI/180;f=f-Math.floor(f/m)*m;var y=this.camera;if(!l&&this.isRunning)return y;if(this.isRunning=!0,this.duration=u,this.progress=0,this.source=y.rotation,this.destination=f,typeof n=="string"&&a.hasOwnProperty(n)?this.ease=a[n]:typeof n=="function"&&(this.ease=n),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d,this.shortestPath){var S=0,C=0;this.destination>this.source?S=Math.abs(this.destination-this.source):S=Math.abs(this.destination+m)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+m)-this.destination,S<C?this.clockwise=!0:S>C&&(this.clockwise=!1)}return this.camera.emit(o.ROTATE_START,this.camera,this,u,f),y},update:function(e,s){if(this.isRunning){this._elapsed+=s;var u=h(this._elapsed/this.duration,0,1);this.progress=u;var n=this.camera;if(this._elapsed<this.duration){var l=this.ease(u);this.current=n.rotation;var c=0,d=360*Math.PI/180,f=this.destination,m=this.current;this.clockwise===!1&&(f=this.current,m=this.destination),f>=m?c=Math.abs(f-m):c=Math.abs(f+d)-m;var y=0;this.clockwise?y=n.rotation+c*l:y=n.rotation-c*l,n.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,u,y)}else n.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,u,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});v.exports=r}),30330:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(19715),a=t(26099),r=new g({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(e,s,u,n,l){return e===void 0&&(e=100),s===void 0&&(s=.05),u===void 0&&(u=!1),n===void 0&&(n=null),l===void 0&&(l=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,typeof s=="number"?this.intensity.set(s):this.intensity.set(s.x,s.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=n,this._onUpdateScope=l,this.camera.emit(o.SHAKE_START,this.camera,this,e,s),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(e,s){if(this.isRunning)if(this._elapsed+=s,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var u=this.intensity,n=this.camera.width,l=this.camera.height,c=this.camera.zoom;this._offsetX=(Math.random()*u.x*n*2-u.x*n)*c,this._offsetY=(Math.random()*u.y*l*2-u.y*l)*c,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});v.exports=r}),45641:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(62640),a=t(19715),r=new g({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,s,u,n,l,c){s===void 0&&(s=1e3),u===void 0&&(u=o.Linear),n===void 0&&(n=!1),l===void 0&&(l=null),c===void 0&&(c=this.camera.scene);var d=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,this.source=d.zoom,this.destination=e,typeof u=="string"&&o.hasOwnProperty(u)?this.ease=o[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=l,this._onUpdateScope=c,this.camera.emit(a.ZOOM_START,this.camera,this,s,e)),d},update:function(e,s){this.isRunning&&(this._elapsed+=s,this.progress=h(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=r}),20052:((v,T,t)=>{v.exports={Fade:t(5020),Flash:t(10662),Pan:t(20359),Shake:t(30330),RotateTo:t(34208),Zoom:t(45641)}}),16438:(v=>{v.exports="cameradestroy"}),32726:(v=>{v.exports="camerafadeincomplete"}),87807:(v=>{v.exports="camerafadeinstart"}),45917:(v=>{v.exports="camerafadeoutcomplete"}),95666:(v=>{v.exports="camerafadeoutstart"}),47056:(v=>{v.exports="cameraflashcomplete"}),91261:(v=>{v.exports="cameraflashstart"}),45047:(v=>{v.exports="followupdate"}),81927:(v=>{v.exports="camerapancomplete"}),74264:(v=>{v.exports="camerapanstart"}),54419:(v=>{v.exports="postrender"}),79330:(v=>{v.exports="prerender"}),93183:(v=>{v.exports="camerarotatecomplete"}),80112:(v=>{v.exports="camerarotatestart"}),62252:(v=>{v.exports="camerashakecomplete"}),86017:(v=>{v.exports="camerashakestart"}),539:(v=>{v.exports="camerazoomcomplete"}),51892:(v=>{v.exports="camerazoomstart"}),19715:((v,T,t)=>{v.exports={DESTROY:t(16438),FADE_IN_COMPLETE:t(32726),FADE_IN_START:t(87807),FADE_OUT_COMPLETE:t(45917),FADE_OUT_START:t(95666),FLASH_COMPLETE:t(47056),FLASH_START:t(91261),FOLLOW_UPDATE:t(45047),PAN_COMPLETE:t(81927),PAN_START:t(74264),POST_RENDER:t(54419),PRE_RENDER:t(79330),ROTATE_COMPLETE:t(93183),ROTATE_START:t(80112),SHAKE_COMPLETE:t(62252),SHAKE_START:t(86017),ZOOM_COMPLETE:t(539),ZOOM_START:t(51892)}}),87969:((v,T,t)=>{v.exports={Camera:t(38058),BaseCamera:t(71911),CameraManager:t(32743),Effects:t(20052),Events:t(19715)}}),63091:((v,T,t)=>{var h=t(83419),g=t(35154),o=new h({initialize:function(r){this.camera=g(r,"camera",null),this.left=g(r,"left",null),this.right=g(r,"right",null),this.up=g(r,"up",null),this.down=g(r,"down",null),this.zoomIn=g(r,"zoomIn",null),this.zoomOut=g(r,"zoomOut",null),this.zoomSpeed=g(r,"zoomSpeed",.01),this.minZoom=g(r,"minZoom",.001),this.maxZoom=g(r,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=g(r,"speed",null);typeof e=="number"?(this.speedX=e,this.speedY=e):(this.speedX=g(r,"speed.x",0),this.speedY=g(r,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(this.active){a===void 0&&(a=1);var r=this.camera;this.up&&this.up.isDown?r.scrollY-=this.speedY*a|0:this.down&&this.down.isDown&&(r.scrollY+=this.speedY*a|0),this.left&&this.left.isDown?r.scrollX-=this.speedX*a|0:this.right&&this.right.isDown&&(r.scrollX+=this.speedX*a|0),this.zoomIn&&this.zoomIn.isDown?(r.zoom-=this.zoomSpeed,r.zoom<this.minZoom&&(r.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(r.zoom+=this.zoomSpeed,r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});v.exports=o}),58818:((v,T,t)=>{var h=t(83419),g=t(35154),o=new h({initialize:function(r){this.camera=g(r,"camera",null),this.left=g(r,"left",null),this.right=g(r,"right",null),this.up=g(r,"up",null),this.down=g(r,"down",null),this.zoomIn=g(r,"zoomIn",null),this.zoomOut=g(r,"zoomOut",null),this.zoomSpeed=g(r,"zoomSpeed",.01),this.minZoom=g(r,"minZoom",.001),this.maxZoom=g(r,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=g(r,"acceleration",null);typeof e=="number"?(this.accelX=e,this.accelY=e):(this.accelX=g(r,"acceleration.x",0),this.accelY=g(r,"acceleration.y",0)),this.dragX=0,this.dragY=0;var s=g(r,"drag",null);typeof s=="number"?(this.dragX=s,this.dragY=s):(this.dragX=g(r,"drag.x",0),this.dragY=g(r,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var u=g(r,"maxSpeed",null);typeof u=="number"?(this.maxSpeedX=u,this.maxSpeedY=u):(this.maxSpeedX=g(r,"maxSpeed.x",0),this.maxSpeedY=g(r,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(this.active){a===void 0&&(a=1);var r=this.camera;this._speedX>0?(this._speedX-=this.dragX*a,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*a,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*a,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*a,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(r.scrollX-=this._speedX*a|0),this._speedY!==0&&(r.scrollY-=this._speedY*a|0),this._zoom!==0&&(r.zoom+=this._zoom,r.zoom<this.minZoom?r.zoom=this.minZoom:r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});v.exports=o}),38865:((v,T,t)=>{v.exports={FixedKeyControl:t(63091),SmoothedKeyControl:t(58818)}}),26638:((v,T,t)=>{v.exports={Controls:t(38865),Scene2D:t(87969)}}),8054:((v,T,t)=>{var h={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:t(10312),ScaleModes:t(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};v.exports=h}),69547:((v,T,t)=>{var h=t(83419),g=t(8054),o=t(42363),a=t(82264),r=t(95540),e=t(35154),s=t(41212),u=t(29747),n=t(75508),l=t(36060),c=t(80333),d=new h({initialize:function(m){m===void 0&&(m={});var y=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],S="#ffffff",C=e(m,"scale",null);this.width=e(C,"width",1024,m),this.height=e(C,"height",768,m),this.zoom=e(C,"zoom",1,m),this.parent=e(C,"parent",void 0,m),this.scaleMode=e(C,C?"mode":"scaleMode",0,m),this.expandParent=e(C,"expandParent",!0,m),this.autoRound=e(C,"autoRound",!1,m),this.autoCenter=e(C,"autoCenter",0,m),this.resizeInterval=e(C,"resizeInterval",500,m),this.fullscreenTarget=e(C,"fullscreenTarget",null,m),this.minWidth=e(C,"min.width",0,m),this.maxWidth=e(C,"max.width",0,m),this.minHeight=e(C,"min.height",0,m),this.maxHeight=e(C,"max.height",0,m),this.snapWidth=e(C,"snap.width",0,m),this.snapHeight=e(C,"snap.height",0,m),this.renderType=e(m,"type",g.AUTO),this.canvas=e(m,"canvas",null),this.context=e(m,"context",null),this.canvasStyle=e(m,"canvasStyle",null),this.customEnvironment=e(m,"customEnvironment",!1),this.sceneConfig=e(m,"scene",null),this.seed=e(m,"seed",[(Date.now()*Math.random()).toString()]),n.RND=new n.RandomDataGenerator(this.seed),this.gameTitle=e(m,"title",""),this.gameURL=e(m,"url","https://phaser.io/"+g.LOG_VERSION),this.gameVersion=e(m,"version",""),this.autoFocus=e(m,"autoFocus",!0),this.stableSort=e(m,"stableSort",-1),this.stableSort===-1&&(this.stableSort=a.browser.es2019?1:0),a.features.stableSort=this.stableSort,this.domCreateContainer=e(m,"dom.createContainer",!1),this.domPointerEvents=e(m,"dom.pointerEvents","none"),this.inputKeyboard=e(m,"input.keyboard",!0),this.inputKeyboardEventTarget=e(m,"input.keyboard.target",window),this.inputKeyboardCapture=e(m,"input.keyboard.capture",[]),this.inputMouse=e(m,"input.mouse",!0),this.inputMouseEventTarget=e(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=e(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=e(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=e(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=e(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=e(m,"input.touch",a.input.touch),this.inputTouchEventTarget=e(m,"input.touch.target",null),this.inputTouchCapture=e(m,"input.touch.capture",!0),this.inputActivePointers=e(m,"input.activePointers",1),this.inputSmoothFactor=e(m,"input.smoothFactor",0),this.inputWindowEvents=e(m,"input.windowEvents",!0),this.inputGamepad=e(m,"input.gamepad",!1),this.inputGamepadEventTarget=e(m,"input.gamepad.target",window),this.disableContextMenu=e(m,"disableContextMenu",!1),this.audio=e(m,"audio",{}),this.hideBanner=e(m,"banner",null)===!1,this.hidePhaser=e(m,"banner.hidePhaser",!1),this.bannerTextColor=e(m,"banner.text",S),this.bannerBackgroundColor=e(m,"banner.background",y),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=e(m,"fps",null),this.disablePreFX=e(m,"disablePreFX",!1),this.disablePostFX=e(m,"disablePostFX",!1);var E=e(m,"render",null);this.pipeline=e(E,"pipeline",null,m),this.autoMobilePipeline=e(E,"autoMobilePipeline",!0,m),this.defaultPipeline=e(E,"defaultPipeline",l.MULTI_PIPELINE,m),this.antialias=e(E,"antialias",!0,m),this.antialiasGL=e(E,"antialiasGL",!0,m),this.mipmapFilter=e(E,"mipmapFilter","",m),this.desynchronized=e(E,"desynchronized",!1,m),this.roundPixels=e(E,"roundPixels",!1,m),this.pixelArt=e(E,"pixelArt",this.zoom!==1,m),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=e(E,"transparent",!1,m),this.clearBeforeRender=e(E,"clearBeforeRender",!0,m),this.preserveDrawingBuffer=e(E,"preserveDrawingBuffer",!1,m),this.premultipliedAlpha=e(E,"premultipliedAlpha",!0,m),this.failIfMajorPerformanceCaveat=e(E,"failIfMajorPerformanceCaveat",!1,m),this.powerPreference=e(E,"powerPreference","default",m),this.batchSize=e(E,"batchSize",4096,m),this.maxTextures=e(E,"maxTextures",-1,m),this.maxLights=e(E,"maxLights",10,m);var P=e(m,"backgroundColor",0);this.backgroundColor=c(P),this.transparent&&(this.backgroundColor=c(0),this.backgroundColor.alpha=0),this.preBoot=e(m,"callbacks.preBoot",u),this.postBoot=e(m,"callbacks.postBoot",u),this.physics=e(m,"physics",{}),this.defaultPhysicsSystem=e(this.physics,"default",!1),this.loaderBaseURL=e(m,"loader.baseURL",""),this.loaderPath=e(m,"loader.path",""),this.loaderMaxParallelDownloads=e(m,"loader.maxParallelDownloads",a.os.android?6:32),this.loaderCrossOrigin=e(m,"loader.crossOrigin",void 0),this.loaderResponseType=e(m,"loader.responseType",""),this.loaderAsync=e(m,"loader.async",!0),this.loaderUser=e(m,"loader.user",""),this.loaderPassword=e(m,"loader.password",""),this.loaderTimeout=e(m,"loader.timeout",0),this.loaderMaxRetries=e(m,"loader.maxRetries",2),this.loaderWithCredentials=e(m,"loader.withCredentials",!1),this.loaderImageLoadType=e(m,"loader.imageLoadType","XHR"),this.loaderLocalScheme=e(m,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=e(m,"fx.glow.quality",.1),this.glowFXDistance=e(m,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=e(m,"plugins",null),F=o.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:s(A)&&(this.installGlobalPlugins=r(A,"global",[]),this.installScenePlugins=r(A,"scene",[]),Array.isArray(A.default)?F=A.default:Array.isArray(A.defaultMerge)&&(F=F.concat(A.defaultMerge)))),this.defaultPlugins=F;var G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=e(m,"images.default",G+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=e(m,"images.missing",G+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=e(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=g.WEBGL:window.FORCE_CANVAS&&(this.renderType=g.CANVAS))}});v.exports=d}),86054:((v,T,t)=>{var h=t(20623),g=t(27919),o=t(8054),a=t(89357),r=function(e){var s=e.config;if((s.customEnvironment||s.canvas)&&s.renderType===o.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!s.customEnvironment&&!s.canvas&&s.renderType!==o.HEADLESS)if(s.renderType===o.AUTO&&(s.renderType=a.webGL?o.WEBGL:o.CANVAS),s.renderType===o.WEBGL){if(!a.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(s.renderType===o.CANVAS){if(!a.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+s.renderType);s.antialias||g.disableSmoothing();var u=e.scale.baseSize,n=u.width,l=u.height;if(s.canvas?(e.canvas=s.canvas,e.canvas.width=n,e.canvas.height=l):e.canvas=g.create(e,n,l,s.renderType),s.canvasStyle&&(e.canvas.style=s.canvasStyle),s.antialias||h.setCrisp(e.canvas),s.renderType!==o.HEADLESS){var c,d;c=t(68627),d=t(74797),s.renderType===o.WEBGL?e.renderer=new d(e):(e.renderer=new c(e),e.context=e.renderer.gameContext)}};v.exports=r}),96391:((v,T,t)=>{var h=t(8054),g=function(o){var a=o.config;if(!a.hideBanner){var r="WebGL";a.renderType===h.CANVAS?r="Canvas":a.renderType===h.HEADLESS&&(r="Headless");var e=a.audio,s=o.device.audio,u;if(s.webAudio&&!e.disableWebAudio?u="Web Audio":e.noAudio||!s.webAudio&&!s.audioData?u="No Audio":u="HTML5 Audio",o.device.browser.ie)window.console&&console.log("Phaser v"+h.VERSION+" / https://phaser.io");else{var n="",l=[n];if(Array.isArray(a.bannerBackgroundColor)){var c;a.bannerBackgroundColor.forEach(function(f){n=n.concat("%c "),l.push("background: "+f),c=f}),l[l.length-1]="color: "+a.bannerTextColor+"; background: "+c}else n=n.concat("%c "),l.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);l.push("background: transparent"),a.gameTitle&&(n=n.concat(a.gameTitle),a.gameVersion&&(n=n.concat(" v"+a.gameVersion)),a.hidePhaser||(n=n.concat(" / ")));var d="";a.hidePhaser||(n=n.concat("Phaser v"+h.VERSION+d+" ("+r+" | "+u+")")),n=n.concat(" %c "+a.gameURL),l[0]=n,console.log.apply(console,l)}}};v.exports=g}),50127:((v,T,t)=>{var h=t(40366),g=t(60848),o=t(24047),a=t(27919),r=t(83419),e=t(69547),s=t(83719),u=t(86054),n=t(45893),l=t(96391),c=t(82264),d=t(57264),f=t(50792),m=t(8443),y=t(7003),S=t(37277),C=t(77332),E=t(76531),P=t(60903),A=t(69442),F=t(17130),G=t(65898),D=t(51085),L=t(14747),b=new r({initialize:function(N){this.config=new e(N),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new f,this.anims=new g(this),this.textures=new F(this),this.cache=new o(this),this.registry=new n(this,new f),this.input=new y(this,this.config),this.scene=new P(this,this.config.sceneConfig),this.device=c,this.scale=new E(this,this.config),this.sound=null,this.sound=L.create(this),this.loop=new G(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,d(this.boot.bind(this))},boot:function(){if(!S.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),s(this),l(this),h(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(m.BOOT)},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),D(this);var I=this.events;I.on(m.HIDDEN,this.onHidden,this),I.on(m.VISIBLE,this.onVisible,this),I.on(m.BLUR,this.onBlur,this),I.on(m.FOCUS,this.onFocus,this)},step:function(I,N){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Z=this.events;Z.emit(m.PRE_STEP,I,N),Z.emit(m.STEP,I,N),this.scene.update(I,N),Z.emit(m.POST_STEP,I,N);var U=this.renderer;U.preRender(),Z.emit(m.PRE_RENDER,U,I,N),this.scene.render(U),U.postRender(),Z.emit(m.POST_RENDER,U,I,N)}},headlessStep:function(I,N){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Z=this.events;Z.emit(m.PRE_STEP,I,N),Z.emit(m.STEP,I,N),this.scene.update(I,N),Z.emit(m.POST_STEP,I,N),this.scene.isProcessing=!1,Z.emit(m.PRE_RENDER,null,I,N),Z.emit(m.POST_RENDER,null,I,N)}},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},pause:function(){var I=this.isPaused;this.isPaused=!0,I||this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME,this.loop.pauseDuration)},resume:function(){var I=this.isPaused;this.isPaused=!1,I&&this.events.emit(m.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(I,N){N===void 0&&(N=!1),this.pendingDestroy=!0,this.removeCanvas=I,this.noReturn=N},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});v.exports=b}),65898:((v,T,t)=>{var h=t(83419),g=t(35154),o=t(29747),a=t(43092),r=new h({initialize:function(s,u){this.game=s,this.raf=new a,this.started=!1,this.running=!1,this.minFps=g(u,"min",5),this.targetFps=g(u,"target",60),this.fpsLimit=g(u,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=o,this.forceSetTimeOut=g(u,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=g(u,"deltaHistory",10),this.panicMax=g(u,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=g(u,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var e=window.performance.now();this.time=e,this.lastTime=e,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0;for(var s=0;s<this.deltaSmoothingMax;s++)this.deltaHistory[s]=Math.min(this._target,this.deltaHistory[s]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(e){if(this.started)return this;this.started=!0,this.running=!0;for(var s=0;s<this.deltaSmoothingMax;s++)this.deltaHistory[s]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=e;var u=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(u,this.forceSetTimeOut,this._target)},smoothDelta:function(e){var s=this.deltaIndex,u=this.deltaHistory,n=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,e=Math.min(e,this._target)),e>this._min&&(e=u[s],e=Math.min(e,this._min)),u[s]=e,this.deltaIndex++,this.deltaIndex>=n&&(this.deltaIndex=0);for(var l=0,c=0;c<n;c++)l+=u[c];return l/=n,l},updateFPS:function(e){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0},stepLimitFPS:function(e){this.now=e;var s=Math.max(0,e-this.lastTime);this.rawDelta=s,this.time+=this.rawDelta,this.smoothStep&&(s=this.smoothDelta(s)),this.delta+=s,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(e,this.delta),this.delta=0),this.lastTime=e,this.frame++},step:function(e){this.now=e;var s=Math.max(0,e-this.lastTime);this.rawDelta=s,this.time+=this.rawDelta,this.smoothStep&&(s=this.smoothDelta(s)),this.delta=s,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.callback(e,s),this.lastTime=e,this.frame++},tick:function(){var e=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(e):this.step(e)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(e){e===void 0&&(e=!1);var s=window.performance.now();if(!this.running){e&&(this.startTime+=-this.lastTime+(this.lastTime+s));var u=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(u,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});v.exports=r}),51085:((v,T,t)=>{var h=t(8443),g=function(o){var a,r=o.events;if(document.hidden!==void 0)a="visibilitychange";else{var e=["webkit","moz","ms"];e.forEach(function(u){document[u+"Hidden"]!==void 0&&(document.hidden=function(){return document[u+"Hidden"]},a=u+"visibilitychange")})}var s=function(u){document.hidden||u.type==="pause"?r.emit(h.HIDDEN):r.emit(h.VISIBLE)};a&&document.addEventListener(a,s,!1),window.onblur=function(){r.emit(h.BLUR)},window.onfocus=function(){r.emit(h.FOCUS)},window.focus&&o.config.autoFocus&&window.focus()};v.exports=g}),97217:(v=>{v.exports="blur"}),47548:(v=>{v.exports="boot"}),19814:(v=>{v.exports="contextlost"}),68446:(v=>{v.exports="destroy"}),41700:(v=>{v.exports="focus"}),25432:(v=>{v.exports="hidden"}),65942:(v=>{v.exports="pause"}),59211:(v=>{v.exports="postrender"}),47789:(v=>{v.exports="poststep"}),39066:(v=>{v.exports="prerender"}),460:(v=>{v.exports="prestep"}),16175:(v=>{v.exports="ready"}),42331:(v=>{v.exports="resume"}),11966:(v=>{v.exports="step"}),32969:(v=>{v.exports="systemready"}),94830:(v=>{v.exports="visible"}),8443:((v,T,t)=>{v.exports={BLUR:t(97217),BOOT:t(47548),CONTEXT_LOST:t(19814),DESTROY:t(68446),FOCUS:t(41700),HIDDEN:t(25432),PAUSE:t(65942),POST_RENDER:t(59211),POST_STEP:t(47789),PRE_RENDER:t(39066),PRE_STEP:t(460),READY:t(16175),RESUME:t(42331),STEP:t(11966),SYSTEM_READY:t(32969),VISIBLE:t(94830)}}),42857:((v,T,t)=>{v.exports={Config:t(69547),CreateRenderer:t(86054),DebugHeader:t(96391),Events:t(8443),TimeStep:t(65898),VisibilityHandler:t(51085)}}),99584:((v,T,t)=>{var h=t(5290),g=t(27919),o=t(35154),a=function(r){var e=o(r,"data",[]),s=o(r,"canvas",null),u=o(r,"palette",h),n=o(r,"pixelWidth",1),l=o(r,"pixelHeight",n),c=o(r,"resizeCanvas",!0),d=o(r,"clearCanvas",!0),f=o(r,"preRender",null),m=o(r,"postRender",null),y=Math.floor(Math.abs(e[0].length*n)),S=Math.floor(Math.abs(e.length*l));s||(s=g.create2D(this,y,S),c=!1,d=!1),c&&(s.width=y,s.height=S);var C=s.getContext("2d",{willReadFrequently:!0});d&&C.clearRect(0,0,y,S),f&&f(s,C);for(var E=0;E<e.length;E++)for(var P=e[E],A=0;A<P.length;A++){var F=P[A];F!=="."&&F!==" "&&(C.fillStyle=u[F],C.fillRect(A*n,E*l,n,l))}return m&&m(s,C),s};v.exports=a}),15822:((v,T,t)=>{v.exports={GenerateTexture:t(99584),Palettes:t(57763)}}),5290:(v=>{v.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}}),23816:(v=>{v.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}}),9866:(v=>{v.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}}),77552:(v=>{v.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}}),92259:(v=>{v.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}}),57763:((v,T,t)=>{v.exports={ARNE16:t(5290),C64:t(23816),CGA:t(9866),JMP:t(77552),MSX:t(92259)}}),46728:((v,T,t)=>{var h=t(83419),g=t(36316),o=t(80021),a=t(26099),r=new h({Extends:o,initialize:function(s,u,n,l){o.call(this,"CubicBezierCurve"),Array.isArray(s)&&(l=new a(s[6],s[7]),n=new a(s[4],s[5]),u=new a(s[2],s[3]),s=new a(s[0],s[1])),this.p0=s,this.p1=u,this.p2=n,this.p3=l},getStartPoint:function(e){return e===void 0&&(e=new a),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,s){s===void 0&&(s=new a);var u=this.p0,n=this.p1,l=this.p2,c=this.p3;return s.set(g(e,u.x,n.x,l.x,c.x),g(e,u.y,n.y,l.y,c.y))},draw:function(e,s){s===void 0&&(s=32);var u=this.getPoints(s);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var n=1;n<u.length;n++)e.lineTo(u[n].x,u[n].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});r.fromJSON=function(e){var s=e.points,u=new a(s[0],s[1]),n=new a(s[2],s[3]),l=new a(s[4],s[5]),c=new a(s[6],s[7]);return new r(u,n,l,c)},v.exports=r}),80021:((v,T,t)=>{var h=t(83419),g=t(19217),o=t(87841),a=t(26099),r=new h({initialize:function(s){this.type=s,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(e,s){return s===void 0&&(s=32),e.strokePoints(this.getPoints(s))},getBounds:function(e,s){e||(e=new o),s===void 0&&(s=16);var u=this.getLength();s>u&&(s=u/2);var n=Math.max(1,Math.round(u/s));return g(this.getSpacedPoints(n),e)},getDistancePoints:function(e){var s=this.getLength(),u=Math.max(1,s/e);return this.getSpacedPoints(u)},getEndPoint:function(e){return e===void 0&&(e=new a),this.getPointAt(1,e)},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var s=[],u,n=this.getPoint(0,this._tmpVec2A),l=0;s.push(0);for(var c=1;c<=e;c++)u=this.getPoint(c/e,this._tmpVec2B),l+=u.distance(n),s.push(l),n.copy(u);return this.cacheArcLengths=s,s},getPointAt:function(e,s){var u=this.getUtoTmapping(e);return this.getPoint(u,s)},getPoints:function(e,s,u){u===void 0&&(u=[]),e||(s?e=this.getLength()/s:e=this.defaultDivisions);for(var n=0;n<=e;n++)u.push(this.getPoint(n/e));return u},getRandomPoint:function(e){return e===void 0&&(e=new a),this.getPoint(Math.random(),e)},getSpacedPoints:function(e,s,u){u===void 0&&(u=[]),e||(s?e=this.getLength()/s:e=this.defaultDivisions);for(var n=0;n<=e;n++){var l=this.getUtoTmapping(n/e,null,e);u.push(this.getPoint(l))}return u},getStartPoint:function(e){return e===void 0&&(e=new a),this.getPointAt(0,e)},getTangent:function(e,s){s===void 0&&(s=new a);var u=1e-4,n=e-u,l=e+u;return n<0&&(n=0),l>1&&(l=1),this.getPoint(n,this._tmpVec2A),this.getPoint(l,s),s.subtract(this._tmpVec2A).normalize()},getTangentAt:function(e,s){var u=this.getUtoTmapping(e);return this.getTangent(u,s)},getTFromDistance:function(e,s){return e<=0?0:this.getUtoTmapping(0,e,s)},getUtoTmapping:function(e,s,u){var n=this.getLengths(u),l=0,c=n.length,d;s?d=Math.min(s,n[c-1]):d=e*n[c-1];for(var f=0,m=c-1,y;f<=m;)if(l=Math.floor(f+(m-f)/2),y=n[l]-d,y<0)f=l+1;else if(y>0)m=l-1;else{m=l;break}if(l=m,n[l]===d)return l/(c-1);var S=n[l],C=n[l+1],E=C-S,P=(d-S)/E;return(l+P)/(c-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});v.exports=r}),73825:((v,T,t)=>{var h=t(83419),g=t(80021),o=t(39506),a=t(35154),r=t(43396),e=t(26099),s=new h({Extends:g,initialize:function(n,l,c,d,f,m,y,S){if(typeof n=="object"){var C=n;n=a(C,"x",0),l=a(C,"y",0),c=a(C,"xRadius",0),d=a(C,"yRadius",c),f=a(C,"startAngle",0),m=a(C,"endAngle",360),y=a(C,"clockwise",!1),S=a(C,"rotation",0)}else d===void 0&&(d=c),f===void 0&&(f=0),m===void 0&&(m=360),y===void 0&&(y=!1),S===void 0&&(S=0);g.call(this,"EllipseCurve"),this.p0=new e(n,l),this._xRadius=c,this._yRadius=d,this._startAngle=o(f),this._endAngle=o(m),this._clockwise=y,this._rotation=o(S)},getStartPoint:function(u){return u===void 0&&(u=new e),this.getPoint(0,u)},getResolution:function(u){return u*2},getPoint:function(u,n){n===void 0&&(n=new e);for(var l=Math.PI*2,c=this._endAngle-this._startAngle,d=Math.abs(c)<Number.EPSILON;c<0;)c+=l;for(;c>l;)c-=l;c<Number.EPSILON&&(d?c=0:c=l),this._clockwise&&!d&&(c===l?c=-l:c=c-l);var f=this._startAngle+u*c,m=this.p0.x+this._xRadius*Math.cos(f),y=this.p0.y+this._yRadius*Math.sin(f);if(this._rotation!==0){var S=Math.cos(this._rotation),C=Math.sin(this._rotation),E=m-this.p0.x,P=y-this.p0.y;m=E*S-P*C+this.p0.x,y=E*C+P*S+this.p0.y}return n.set(m,y)},setXRadius:function(u){return this.xRadius=u,this},setYRadius:function(u){return this.yRadius=u,this},setWidth:function(u){return this.xRadius=u/2,this},setHeight:function(u){return this.yRadius=u/2,this},setStartAngle:function(u){return this.startAngle=u,this},setEndAngle:function(u){return this.endAngle=u,this},setClockwise:function(u){return this.clockwise=u,this},setRotation:function(u){return this.rotation=u,this},x:{get:function(){return this.p0.x},set:function(u){this.p0.x=u}},y:{get:function(){return this.p0.y},set:function(u){this.p0.y=u}},xRadius:{get:function(){return this._xRadius},set:function(u){this._xRadius=u}},yRadius:{get:function(){return this._yRadius},set:function(u){this._yRadius=u}},startAngle:{get:function(){return r(this._startAngle)},set:function(u){this._startAngle=o(u)}},endAngle:{get:function(){return r(this._endAngle)},set:function(u){this._endAngle=o(u)}},clockwise:{get:function(){return this._clockwise},set:function(u){this._clockwise=u}},angle:{get:function(){return r(this._rotation)},set:function(u){this._rotation=o(u)}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:r(this._startAngle),endAngle:r(this._endAngle),clockwise:this._clockwise,rotation:r(this._rotation)}}});s.fromJSON=function(u){return new s(u)},v.exports=s}),33951:((v,T,t)=>{var h=t(83419),g=t(80021),o=t(19217),a=t(87841),r=t(26099),e=new h({Extends:g,initialize:function(u,n){g.call(this,"LineCurve"),Array.isArray(u)&&(n=new r(u[2],u[3]),u=new r(u[0],u[1])),this.p0=u,this.p1=n,this.arcLengthDivisions=1},getBounds:function(s){return s===void 0&&(s=new a),o([this.p0,this.p1],s)},getStartPoint:function(s){return s===void 0&&(s=new r),s.copy(this.p0)},getResolution:function(s){return s===void 0&&(s=1),s},getPoint:function(s,u){return u===void 0&&(u=new r),s===1?u.copy(this.p1):(u.copy(this.p1).subtract(this.p0).scale(s).add(this.p0),u)},getPointAt:function(s,u){return this.getPoint(s,u)},getTangent:function(s,u){return u===void 0&&(u=new r),u.copy(this.p1).subtract(this.p0).normalize(),u},getUtoTmapping:function(s,u,n){var l;if(u){var c=this.getLengths(n),d=c[c.length-1],f=Math.min(u,d);l=f/d}else l=s;return l},draw:function(s){return s.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});e.fromJSON=function(s){var u=s.points,n=new r(u[0],u[1]),l=new r(u[2],u[3]);return new e(n,l)},v.exports=e}),14744:((v,T,t)=>{var h=t(83419),g=t(80021),o=t(32112),a=t(26099),r=new h({Extends:g,initialize:function(s,u,n){g.call(this,"QuadraticBezierCurve"),Array.isArray(s)&&(n=new a(s[4],s[5]),u=new a(s[2],s[3]),s=new a(s[0],s[1])),this.p0=s,this.p1=u,this.p2=n},getStartPoint:function(e){return e===void 0&&(e=new a),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,s){s===void 0&&(s=new a);var u=this.p0,n=this.p1,l=this.p2;return s.set(o(e,u.x,n.x,l.x),o(e,u.y,n.y,l.y))},draw:function(e,s){s===void 0&&(s=32);var u=this.getPoints(s);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var n=1;n<u.length;n++)e.lineTo(u[n].x,u[n].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});r.fromJSON=function(e){var s=e.points,u=new a(s[0],s[1]),n=new a(s[2],s[3]),l=new a(s[4],s[5]);return new r(u,n,l)},v.exports=r}),42534:((v,T,t)=>{var h=t(87842),g=t(83419),o=t(80021),a=t(26099),r=new g({Extends:o,initialize:function(s){s===void 0&&(s=[]),o.call(this,"SplineCurve"),this.points=[],this.addPoints(s)},addPoints:function(e){for(var s=0;s<e.length;s++){var u=new a;typeof e[s]=="number"?(u.x=e[s],u.y=e[s+1],s++):Array.isArray(e[s])?(u.x=e[s][0],u.y=e[s][1]):(u.x=e[s].x,u.y=e[s].y),this.points.push(u)}return this},addPoint:function(e,s){var u=new a(e,s);return this.points.push(u),u},getStartPoint:function(e){return e===void 0&&(e=new a),e.copy(this.points[0])},getResolution:function(e){return e*this.points.length},getPoint:function(e,s){s===void 0&&(s=new a);var u=this.points,n=(u.length-1)*e,l=Math.floor(n),c=n-l,d=u[l===0?l:l-1],f=u[l],m=u[l>u.length-2?u.length-1:l+1],y=u[l>u.length-3?u.length-1:l+2];return s.set(h(c,d.x,f.x,m.x,y.x),h(c,d.y,f.y,m.y,y.y))},toJSON:function(){for(var e=[],s=0;s<this.points.length;s++)e.push(this.points[s].x),e.push(this.points[s].y);return{type:this.type,points:e}}});r.fromJSON=function(e){return new r(e.points)},v.exports=r}),25410:((v,T,t)=>{v.exports={Path:t(46669),MoveTo:t(68618),CubicBezier:t(46728),Curve:t(80021),Ellipse:t(73825),Line:t(33951),QuadraticBezier:t(14744),Spline:t(42534)}}),68618:((v,T,t)=>{var h=t(83419),g=t(26099),o=new h({initialize:function(r,e){this.active=!1,this.p0=new g(r,e)},getPoint:function(a,r){return r===void 0&&(r=new g),r.copy(this.p0)},getPointAt:function(a,r){return this.getPoint(a,r)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});v.exports=o}),46669:((v,T,t)=>{var h=t(83419),g=t(46728),o=t(73825),a=t(39429),r=t(33951),e=t(68618),s=t(14744),u=t(87841),n=t(42534),l=t(26099),c=t(36383),d=new h({initialize:function(m,y){m===void 0&&(m=0),y===void 0&&(y=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new l,this._tmpVec2A=new l,this._tmpVec2B=new l,typeof m=="object"?this.fromJSON(m):this.startPoint.set(m,y)},add:function(f){return this.curves.push(f),this},circleTo:function(f,m,y){return m===void 0&&(m=!1),this.ellipseTo(f,f,0,360,m,y)},closePath:function(){var f=this.curves[0].getPoint(0),m=this.curves[this.curves.length-1].getPoint(1);return f.equals(m)||this.curves.push(new r(m,f)),this},cubicBezierTo:function(f,m,y,S,C,E){var P=this.getEndPoint(),A,F,G;return f instanceof l?(A=f,F=m,G=y):(A=new l(y,S),F=new l(C,E),G=new l(f,m)),this.add(new g(P,A,F,G))},quadraticBezierTo:function(f,m,y,S){var C=this.getEndPoint(),E,P;return f instanceof l?(E=f,P=m):(E=new l(y,S),P=new l(f,m)),this.add(new s(C,E,P))},draw:function(f,m){for(var y=0;y<this.curves.length;y++){var S=this.curves[y];S.active&&S.draw(f,m)}return f},ellipseTo:function(f,m,y,S,C,E){var P=new o(0,0,f,m,y,S,C,E),A=this.getEndPoint(this._tmpVec2A),F=P.getStartPoint(this._tmpVec2B);return A.subtract(F),P.x=A.x,P.y=A.y,this.add(P)},fromJSON:function(f){this.curves=[],this.cacheLengths=[],this.startPoint.set(f.x,f.y),this.autoClose=f.autoClose;for(var m=0;m<f.curves.length;m++){var y=f.curves[m];switch(y.type){case"LineCurve":this.add(r.fromJSON(y));break;case"EllipseCurve":this.add(o.fromJSON(y));break;case"SplineCurve":this.add(n.fromJSON(y));break;case"CubicBezierCurve":this.add(g.fromJSON(y));break;case"QuadraticBezierCurve":this.add(s.fromJSON(y));break}}return this},getBounds:function(f,m){f===void 0&&(f=new u),m===void 0&&(m=16),f.x=Number.MAX_VALUE,f.y=Number.MAX_VALUE;for(var y=new u,S=c.MIN_SAFE_INTEGER,C=c.MIN_SAFE_INTEGER,E=0;E<this.curves.length;E++){var P=this.curves[E];P.active&&(P.getBounds(y,m),f.x=Math.min(f.x,y.x),f.y=Math.min(f.y,y.y),S=Math.max(S,y.right),C=Math.max(C,y.bottom))}return f.right=S,f.bottom=C,f},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var f=[],m=0,y=0;y<this.curves.length;y++)m+=this.curves[y].getLength(),f.push(m);return this.cacheLengths=f,f},getCurveAt:function(f){for(var m=f*this.getLength(),y=this.getCurveLengths(),S=0;S<y.length;){if(y[S]>=m)return this.curves[S];S++}return null},getEndPoint:function(f){return f===void 0&&(f=new l),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,f):f.copy(this.startPoint),f},getLength:function(){var f=this.getCurveLengths();return f[f.length-1]},getPoint:function(f,m){m===void 0&&(m=new l);for(var y=f*this.getLength(),S=this.getCurveLengths(),C=0;C<S.length;){if(S[C]>=y){var E=S[C]-y,P=this.curves[C],A=P.getLength(),F=A===0?0:1-E/A;return P.getPointAt(F,m)}C++}return null},getPoints:function(f,m){!f&&!m&&(f=this.defaultDivisions);for(var y=[],S,C=0;C<this.curves.length;C++){var E=this.curves[C];if(E.active)for(var P=E.getResolution(f),A=E.getPoints(P,m),F=0;F<A.length;F++){var G=A[F];S&&S.equals(G)||(y.push(G),S=G)}}return this.autoClose&&y.length>1&&!y[y.length-1].equals(y[0])&&y.push(y[0]),y},getRandomPoint:function(f){return f===void 0&&(f=new l),this.getPoint(Math.random(),f)},getSpacedPoints:function(f){f===void 0&&(f=40);for(var m=[],y=0;y<=f;y++)m.push(this.getPoint(y/f));return this.autoClose&&m.push(m[0]),m},getStartPoint:function(f){return f===void 0&&(f=new l),f.copy(this.startPoint)},getTangent:function(f,m){m===void 0&&(m=new l);for(var y=f*this.getLength(),S=this.getCurveLengths(),C=0;C<S.length;){if(S[C]>=y){var E=S[C]-y,P=this.curves[C],A=P.getLength(),F=A===0?0:1-E/A;return P.getTangentAt(F,m)}C++}return null},lineTo:function(f,m){f instanceof l?this._tmpVec2B.copy(f):typeof f=="object"?this._tmpVec2B.setFromObject(f):this._tmpVec2B.set(f,m);var y=this.getEndPoint(this._tmpVec2A);return this.add(new r([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(f){return f.unshift(this.getEndPoint()),this.add(new n(f))},moveTo:function(f,m){return f instanceof l?this.add(new e(f.x,f.y)):this.add(new e(f,m))},toJSON:function(){for(var f=[],m=0;m<this.curves.length;m++)f.push(this.curves[m].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:f}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(f,m){return new d(f,m)}),v.exports=d}),45893:((v,T,t)=>{var h=t(83419),g=t(24882),o=new h({initialize:function(r,e){this.parent=r,this.events=e,e||(this.events=r.events?r.events:r),this.list={},this.values={},this._frozen=!1,!r.hasOwnProperty("sys")&&this.events&&this.events.once(g.DESTROY,this.destroy,this)},get:function(a){var r=this.list;if(Array.isArray(a)){for(var e=[],s=0;s<a.length;s++)e.push(r[a[s]]);return e}else return r[a]},getAll:function(){var a={};for(var r in this.list)this.list.hasOwnProperty(r)&&(a[r]=this.list[r]);return a},query:function(a){var r={};for(var e in this.list)this.list.hasOwnProperty(e)&&e.match(a)&&(r[e]=this.list[e]);return r},set:function(a,r){if(this._frozen)return this;if(typeof a=="string")return this.setValue(a,r);for(var e in a)this.setValue(e,a[e]);return this},inc:function(a,r){if(this._frozen)return this;r===void 0&&(r=1);var e=this.get(a);return e===void 0&&(e=0),this.set(a,e+r),this},toggle:function(a){return this._frozen?this:(this.set(a,!this.get(a)),this)},setValue:function(a,r){if(this._frozen)return this;if(this.has(a))this.values[a]=r;else{var e=this,s=this.list,u=this.events,n=this.parent;Object.defineProperty(this.values,a,{enumerable:!0,configurable:!0,get:function(){return s[a]},set:function(l){if(!e._frozen){var c=s[a];s[a]=l,u.emit(g.CHANGE_DATA,n,a,l,c),u.emit(g.CHANGE_DATA_KEY+a,n,l,c)}}}),s[a]=r,u.emit(g.SET_DATA,n,a,r)}return this},each:function(a,r){for(var e=[this.parent,null,void 0],s=1;s<arguments.length;s++)e.push(arguments[s]);for(var u in this.list)e[1]=u,e[2]=this.list[u],a.apply(r,e);return this},merge:function(a,r){r===void 0&&(r=!0);for(var e in a)a.hasOwnProperty(e)&&(r||!r&&!this.has(e))&&this.setValue(e,a[e]);return this},remove:function(a){if(this._frozen)return this;if(Array.isArray(a))for(var r=0;r<a.length;r++)this.removeValue(a[r]);else return this.removeValue(a);return this},removeValue:function(a){if(this.has(a)){var r=this.list[a];delete this.list[a],delete this.values[a],this.events.emit(g.REMOVE_DATA,this.parent,a,r)}return this},pop:function(a){var r=void 0;return!this._frozen&&this.has(a)&&(r=this.list[a],delete this.list[a],delete this.values[a],this.events.emit(g.REMOVE_DATA,this.parent,a,r)),r},has:function(a){return this.list.hasOwnProperty(a)},setFreeze:function(a){return this._frozen=a,this},reset:function(){for(var a in this.list)delete this.list[a],delete this.values[a];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(g.CHANGE_DATA),this.events.off(g.SET_DATA),this.events.off(g.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(a){this._frozen=!!a}},count:{get:function(){var a=0;for(var r in this.list)this.list[r]!==void 0&&a++;return a}}});v.exports=o}),63646:((v,T,t)=>{var h=t(83419),g=t(45893),o=t(37277),a=t(44594),r=new h({Extends:g,initialize:function(s){g.call(this,s,s.sys.events),this.scene=s,this.systems=s.sys,s.sys.events.once(a.BOOT,this.boot,this),s.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){g.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("DataManagerPlugin",r,"data"),v.exports=r}),10700:(v=>{v.exports="changedata"}),93608:(v=>{v.exports="changedata-"}),60883:(v=>{v.exports="destroy"}),69780:(v=>{v.exports="removedata"}),22166:(v=>{v.exports="setdata"}),24882:((v,T,t)=>{v.exports={CHANGE_DATA:t(10700),CHANGE_DATA_KEY:t(93608),DESTROY:t(60883),REMOVE_DATA:t(69780),SET_DATA:t(22166)}}),44965:((v,T,t)=>{v.exports={DataManager:t(45893),DataManagerPlugin:t(63646),Events:t(24882)}}),7098:((v,T,t)=>{var h=t(84148),g={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function o(){if(typeof importScripts=="function")return g;g.audioData=!!window.Audio,g.webAudio=!!(window.AudioContext||window.webkitAudioContext);var a=document.createElement("audio"),r=!!a.canPlayType;try{if(r){var e=function(n,l){var c=a.canPlayType("audio/"+n).replace(/^no$/,"");return l?!!(c||a.canPlayType("audio/"+l).replace(/^no$/,"")):!!c};if(g.ogg=e('ogg; codecs="vorbis"'),g.opus=e('ogg; codecs="opus"',"opus"),g.mp3=e("mpeg"),g.wav=e("wav"),g.m4a=e("x-m4a"),g.aac=e("aac"),g.flac=e("flac","x-flac"),g.webm=e('webm; codecs="vorbis"'),a.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(h.edge)g.dolby=!0;else if(h.safari&&h.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var s=parseInt(RegExp.$1,10),u=parseInt(RegExp.$2,10);(s===10&&u>=11||s>10)&&(g.dolby=!0)}}}}catch{}return g}v.exports=o()}),84148:((v,T,t)=>{var h=t(25892),g={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function o(){var a=navigator.userAgent;return/Edg\/\d+/.test(a)?(g.edge=!0,g.es2019=!0):/OPR/.test(a)?(g.opera=!0,g.es2019=!0):/Chrome\/(\d+)/.test(a)&&!h.windowsPhone?(g.chrome=!0,g.chromeVersion=parseInt(RegExp.$1,10),g.es2019=g.chromeVersion>69):/Firefox\D+(\d+)/.test(a)?(g.firefox=!0,g.firefoxVersion=parseInt(RegExp.$1,10),g.es2019=g.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(a)&&h.iOS?(g.mobileSafari=!0,g.es2019=!0):/MSIE (\d+\.\d+);/.test(a)?(g.ie=!0,g.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(a)&&!h.windowsPhone?(g.safari=!0,g.safariVersion=parseInt(RegExp.$1,10),g.es2019=g.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(g.ie=!0,g.trident=!0,g.tridentVersion=parseInt(RegExp.$1,10),g.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(a)&&(g.silk=!0),g}v.exports=o()}),89289:((v,T,t)=>{var h=t(27919),g={supportInverseAlpha:!1,supportNewBlendModes:!1};function o(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",s="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",u=new Image;return u.onload=function(){var n=new Image;n.onload=function(){var l=h.create2D(n,6),c=l.getContext("2d",{willReadFrequently:!0});if(c.globalCompositeOperation="multiply",c.drawImage(u,0,0),c.drawImage(n,2,0),!c.getImageData(2,0,1,1))return!1;var d=c.getImageData(2,0,1,1).data;h.remove(n),g.supportNewBlendModes=d[0]===255&&d[1]===0&&d[2]===0},n.src=e+"/wCKxvRF"+s},u.src=e+"AP804Oa6"+s,!1}function a(){var e=h.create2D(this,2),s=e.getContext("2d",{willReadFrequently:!0});s.fillStyle="rgba(10, 20, 30, 0.5)",s.fillRect(0,0,1,1);var u=s.getImageData(0,0,1,1);if(u===null)return!1;s.putImageData(u,1,0);var n=s.getImageData(1,0,1,1),l=n.data[0]===u.data[0]&&n.data[1]===u.data[1]&&n.data[2]===u.data[2]&&n.data[3]===u.data[3];return h.remove(this),l}function r(){return typeof importScripts!="function"&&document!==void 0&&(g.supportNewBlendModes=o(),g.supportInverseAlpha=a()),g}v.exports=r()}),89357:((v,T,t)=>{var h=t(25892),g=t(84148),o=t(27919),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function r(){var s=new ArrayBuffer(4),u=new Uint8Array(s),n=new Uint32Array(s);return u[0]=161,u[1]=178,u[2]=195,u[3]=212,n[0]===3569595041?!0:n[0]===2712847316?!1:null}function e(){if(typeof importScripts=="function")return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch{a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var s=!1,u=function(){if(window.WebGLRenderingContext)try{var n=o.createWebGL(this),l=n.getContext("webgl")||n.getContext("experimental-webgl"),c=o.create2D(this),d=c.getContext("2d",{willReadFrequently:!0}),f=d.createImageData(1,1);return s=f.data instanceof Uint8ClampedArray,o.remove(n),o.remove(c),!!l}catch{return!1}return!1};return a.webGL=u(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,g.firefox&&g.firefoxVersion<21&&(a.getUserMedia=!1),!h.iOS&&(g.ie||g.firefox||g.chrome)&&(a.canvasBitBltShift=!0),(g.safari||g.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(a.littleEndian=r()),a.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&a.littleEndian!==null&&s,a}v.exports=e()}),91639:(v=>{var T={available:!1,cancel:"",keyboard:!1,request:""};function t(){if(typeof importScripts=="function")return T;var h,g="Fullscreen",o="FullScreen",a=["request"+g,"request"+o,"webkitRequest"+g,"webkitRequest"+o,"msRequest"+g,"msRequest"+o,"mozRequest"+o,"mozRequest"+g];for(h=0;h<a.length;h++)if(document.documentElement[a[h]]){T.available=!0,T.request=a[h];break}var r=["cancel"+o,"exit"+g,"webkitCancel"+o,"webkitExit"+g,"msCancel"+o,"msExit"+g,"mozCancel"+o,"mozExit"+g];if(T.available){for(h=0;h<r.length;h++)if(document[r[h]]){T.cancel=r[h];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(T.keyboard=!0),Object.defineProperty(T,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),T}v.exports=t()}),31784:((v,T,t)=>{var h=t(84148),g={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function o(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(g.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(g.mspointer=!0),navigator.getGamepads&&(g.gamepads=!0),"onwheel"in window||h.ie&&"WheelEvent"in window?g.wheelEvent="wheel":"onmousewheel"in window?g.wheelEvent="mousewheel":h.firefox&&"MouseScrollEvent"in window&&(g.wheelEvent="DOMMouseScroll")),g}v.exports=o()}),25892:(v=>{var T={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function t(){if(typeof importScripts=="function")return T;var h=navigator.userAgent;/Windows/.test(h)?T.windows=!0:/Mac OS/.test(h)&&!/like Mac OS/.test(h)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(T.iOS=!0,T.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),T.iOSVersion=parseInt(RegExp.$1,10)):T.macOS=!0:/Android/.test(h)?T.android=!0:/Linux/.test(h)?T.linux=!0:/iP[ao]d|iPhone/i.test(h)?(T.iOS=!0,navigator.appVersion.match(/OS (\d+)/),T.iOSVersion=parseInt(RegExp.$1,10),T.iPhone=h.toLowerCase().indexOf("iphone")!==-1,T.iPad=h.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(h)||/\bKF[A-Z][A-Z]+/.test(h)||/Silk.*Mobile Safari/.test(h)?T.kindle=!0:/CrOS/.test(h)&&(T.chromeOS=!0),(/Windows Phone/i.test(h)||/IEMobile/i.test(h))&&(T.android=!1,T.iOS=!1,T.macOS=!1,T.windows=!0,T.windowsPhone=!0);var g=/Silk/.test(h);return(T.windows||T.macOS||T.linux&&!g||T.chromeOS)&&(T.desktop=!0),(T.windowsPhone||/Windows NT/i.test(h)&&/Touch/i.test(h))&&(T.desktop=!1),navigator.standalone&&(T.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(T.cordova=!0),window.ejecta!==void 0&&(T.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(T.node=!0),T.node&&typeof process.versions=="object"&&(T.nodeWebkit=!!process.versions["node-webkit"],T.electron=!!process.versions.electron),/Crosswalk/.test(h)&&(T.crosswalk=!0),T.pixelRatio=window.devicePixelRatio||1,T}v.exports=t()}),43267:((v,T,t)=>{var h=t(95540),g={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function o(){if(typeof importScripts=="function")return g;var a=document.createElement("video"),r=!!a.canPlayType,e=/^no$/;try{r&&(a.canPlayType('video/ogg; codecs="theora"').replace(e,"")&&(g.ogg=!0),a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(e,"")&&(g.h264=!0,g.mp4=!0),a.canPlayType("video/x-m4v").replace(e,"")&&(g.m4v=!0),a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(e,"")&&(g.webm=!0),a.canPlayType('video/webm; codecs="vp9"').replace(e,"")&&(g.vp9=!0),a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(e,"")&&(g.hls=!0))}catch{}return a.parentNode&&a.parentNode.removeChild(a),g.getVideoURL=function(s){Array.isArray(s)||(s=[s]);for(var u=0;u<s.length;u++){var n=h(s[u],"url",s[u]);if(n.indexOf("blob:")===0)return{url:n,type:""};var l;if(n.indexOf("data:")===0?l=n.split(",")[0].match(/\/(.*?);/):l=n.match(/\.([a-zA-Z0-9]+)($|\?)/),l=h(s[u],"type",l?l[1]:"").toLowerCase(),g[l])return{url:n,type:l}}return null},g}v.exports=o()}),82264:((v,T,t)=>{v.exports={os:t(25892),browser:t(84148),features:t(89357),input:t(31784),audio:t(7098),video:t(43267),fullscreen:t(91639),canvasFeatures:t(89289)}}),89422:((v,T,t)=>{var h=t(83419),g=new Float32Array(20),o=new h({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(a){return this._matrix.set(a),this._dirty=!0,this},reset:function(){var a=this._matrix;return a.fill(0),a[0]=1,a[6]=1,a[12]=1,a[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var a=this._data;return this._dirty&&(a.set(this._matrix),a[4]/=255,a[9]/=255,a[14]/=255,a[19]/=255,this._dirty=!1),a},brightness:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var e=a;return this.multiply([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],r)},saturate:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var e=a*2/3+1,s=(e-1)*-.5;return this.multiply([e,s,s,0,0,s,e,s,0,0,s,s,e,0,0,0,0,0,1,0],r)},desaturate:function(a){return a===void 0&&(a=!1),this.saturate(-1,a)},hue:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1),a=a/180*Math.PI;var e=Math.cos(a),s=Math.sin(a),u=.213,n=.715,l=.072;return this.multiply([u+e*(1-u)+s*-u,n+e*-n+s*-n,l+e*-l+s*(1-l),0,0,u+e*-u+s*.143,n+e*(1-n)+s*.14,l+e*-l+s*-.283,0,0,u+e*-u+s*-.787,n+e*-n+s*n,l+e*(1-l)+s*l,0,0,0,0,0,1,0],r)},grayscale:function(a,r){return a===void 0&&(a=1),r===void 0&&(r=!1),this.saturate(-a,r)},blackWhite:function(a){return a===void 0&&(a=!1),this.multiply(o.BLACK_WHITE,a)},contrast:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var e=a+1,s=-.5*(e-1);return this.multiply([e,0,0,0,s,0,e,0,0,s,0,0,e,0,s,0,0,0,1,0],r)},negative:function(a){return a===void 0&&(a=!1),this.multiply(o.NEGATIVE,a)},desaturateLuminance:function(a){return a===void 0&&(a=!1),this.multiply(o.DESATURATE_LUMINANCE,a)},sepia:function(a){return a===void 0&&(a=!1),this.multiply(o.SEPIA,a)},night:function(a,r){return a===void 0&&(a=.1),r===void 0&&(r=!1),this.multiply([a*-2,-a,0,0,0,-a,0,a,0,0,0,a,a*2,0,0,0,0,0,1,0],r)},lsd:function(a){return a===void 0&&(a=!1),this.multiply(o.LSD,a)},brown:function(a){return a===void 0&&(a=!1),this.multiply(o.BROWN,a)},vintagePinhole:function(a){return a===void 0&&(a=!1),this.multiply(o.VINTAGE,a)},kodachrome:function(a){return a===void 0&&(a=!1),this.multiply(o.KODACHROME,a)},technicolor:function(a){return a===void 0&&(a=!1),this.multiply(o.TECHNICOLOR,a)},polaroid:function(a){return a===void 0&&(a=!1),this.multiply(o.POLAROID,a)},shiftToBGR:function(a){return a===void 0&&(a=!1),this.multiply(o.SHIFT_BGR,a)},multiply:function(a,r){r===void 0&&(r=!1),r||this.reset();var e=this._matrix,s=g;return s.set(e),e.set([s[0]*a[0]+s[1]*a[5]+s[2]*a[10]+s[3]*a[15],s[0]*a[1]+s[1]*a[6]+s[2]*a[11]+s[3]*a[16],s[0]*a[2]+s[1]*a[7]+s[2]*a[12]+s[3]*a[17],s[0]*a[3]+s[1]*a[8]+s[2]*a[13]+s[3]*a[18],s[0]*a[4]+s[1]*a[9]+s[2]*a[14]+s[3]*a[19]+s[4],s[5]*a[0]+s[6]*a[5]+s[7]*a[10]+s[8]*a[15],s[5]*a[1]+s[6]*a[6]+s[7]*a[11]+s[8]*a[16],s[5]*a[2]+s[6]*a[7]+s[7]*a[12]+s[8]*a[17],s[5]*a[3]+s[6]*a[8]+s[7]*a[13]+s[8]*a[18],s[5]*a[4]+s[6]*a[9]+s[7]*a[14]+s[8]*a[19]+s[9],s[10]*a[0]+s[11]*a[5]+s[12]*a[10]+s[13]*a[15],s[10]*a[1]+s[11]*a[6]+s[12]*a[11]+s[13]*a[16],s[10]*a[2]+s[11]*a[7]+s[12]*a[12]+s[13]*a[17],s[10]*a[3]+s[11]*a[8]+s[12]*a[13]+s[13]*a[18],s[10]*a[4]+s[11]*a[9]+s[12]*a[14]+s[13]*a[19]+s[14],s[15]*a[0]+s[16]*a[5]+s[17]*a[10]+s[18]*a[15],s[15]*a[1]+s[16]*a[6]+s[17]*a[11]+s[18]*a[16],s[15]*a[2]+s[16]*a[7]+s[17]*a[12]+s[18]*a[17],s[15]*a[3]+s[16]*a[8]+s[17]*a[13]+s[18]*a[18],s[15]*a[4]+s[16]*a[9]+s[17]*a[14]+s[18]*a[19]+s[19]]),this._dirty=!0,this}});o.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],o.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],o.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],o.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],o.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],o.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],o.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],o.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],o.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],o.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],o.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],v.exports=o}),51767:((v,T,t)=>{var h=t(83419),g=t(29747),o=new h({initialize:function(r,e,s){this._rgb=[0,0,0],this.onChangeCallback=g,this.dirty=!1,this.set(r,e,s)},set:function(a,r,e){return a===void 0&&(a=0),r===void 0&&(r=0),e===void 0&&(e=0),this._rgb=[a,r,e],this.onChange(),this},equals:function(a,r,e){var s=this._rgb;return s[0]===a&&s[1]===r&&s[2]===e},onChange:function(){this.dirty=!0;var a=this._rgb;this.onChangeCallback.call(this,a[0],a[1],a[2])},r:{get:function(){return this._rgb[0]},set:function(a){this._rgb[0]=a,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(a){this._rgb[1]=a,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(a){this._rgb[2]=a,this.onChange()}},destroy:function(){this.onChangeCallback=null}});v.exports=o}),60461:(v=>{var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};v.exports=T}),54312:((v,T,t)=>{var h=t(62235),g=t(35893),o=t(86327),a=t(88417),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)+u),o(e,h(s)+n),e};v.exports=r}),46768:((v,T,t)=>{var h=t(62235),g=t(26541),o=t(86327),a=t(385),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)-u),o(e,h(s)+n),e};v.exports=r}),35827:((v,T,t)=>{var h=t(62235),g=t(54380),o=t(86327),a=t(40136),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)+u),o(e,h(s)+n),e};v.exports=r}),46871:((v,T,t)=>{var h=t(66786),g=t(35893),o=t(7702),a=function(r,e,s,u){return s===void 0&&(s=0),u===void 0&&(u=0),h(r,g(e)+s,o(e)+u),r};v.exports=a}),5198:((v,T,t)=>{var h=t(7702),g=t(26541),o=t(20786),a=t(385),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)-u),o(e,h(s)+n),e};v.exports=r}),11879:((v,T,t)=>{var h=t(60461),g=[];g[h.BOTTOM_CENTER]=t(54312),g[h.BOTTOM_LEFT]=t(46768),g[h.BOTTOM_RIGHT]=t(35827),g[h.CENTER]=t(46871),g[h.LEFT_CENTER]=t(5198),g[h.RIGHT_CENTER]=t(80503),g[h.TOP_CENTER]=t(89698),g[h.TOP_LEFT]=t(922),g[h.TOP_RIGHT]=t(21373),g[h.LEFT_BOTTOM]=g[h.BOTTOM_LEFT],g[h.LEFT_TOP]=g[h.TOP_LEFT],g[h.RIGHT_BOTTOM]=g[h.BOTTOM_RIGHT],g[h.RIGHT_TOP]=g[h.TOP_RIGHT];var o=function(a,r,e,s,u){return g[e](a,r,s,u)};v.exports=o}),80503:((v,T,t)=>{var h=t(7702),g=t(54380),o=t(20786),a=t(40136),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)+u),o(e,h(s)+n),e};v.exports=r}),89698:((v,T,t)=>{var h=t(35893),g=t(17717),o=t(88417),a=t(66737),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),o(e,h(s)+u),a(e,g(s)-n),e};v.exports=r}),922:((v,T,t)=>{var h=t(26541),g=t(17717),o=t(385),a=t(66737),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),o(e,h(s)-u),a(e,g(s)-n),e};v.exports=r}),21373:((v,T,t)=>{var h=t(54380),g=t(17717),o=t(40136),a=t(66737),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),o(e,h(s)+u),a(e,g(s)-n),e};v.exports=r}),91660:((v,T,t)=>{v.exports={BottomCenter:t(54312),BottomLeft:t(46768),BottomRight:t(35827),Center:t(46871),LeftCenter:t(5198),QuickSet:t(11879),RightCenter:t(80503),TopCenter:t(89698),TopLeft:t(922),TopRight:t(21373)}}),71926:((v,T,t)=>{var h=t(60461),g=t(79291),o={In:t(91660),To:t(16694)};o=g(!1,o,h),v.exports=o}),21578:((v,T,t)=>{var h=t(62235),g=t(35893),o=t(88417),a=t(66737),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),o(e,g(s)+u),a(e,h(s)+n),e};v.exports=r}),10210:((v,T,t)=>{var h=t(62235),g=t(26541),o=t(385),a=t(66737),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),o(e,g(s)-u),a(e,h(s)+n),e};v.exports=r}),82341:((v,T,t)=>{var h=t(62235),g=t(54380),o=t(40136),a=t(66737),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),o(e,g(s)+u),a(e,h(s)+n),e};v.exports=r}),87958:((v,T,t)=>{var h=t(62235),g=t(26541),o=t(86327),a=t(40136),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)-u),o(e,h(s)+n),e};v.exports=r}),40080:((v,T,t)=>{var h=t(7702),g=t(26541),o=t(20786),a=t(40136),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)-u),o(e,h(s)+n),e};v.exports=r}),88466:((v,T,t)=>{var h=t(26541),g=t(17717),o=t(40136),a=t(66737),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),o(e,h(s)-u),a(e,g(s)-n),e};v.exports=r}),38829:((v,T,t)=>{var h=t(60461),g=[];g[h.BOTTOM_CENTER]=t(21578),g[h.BOTTOM_LEFT]=t(10210),g[h.BOTTOM_RIGHT]=t(82341),g[h.LEFT_BOTTOM]=t(87958),g[h.LEFT_CENTER]=t(40080),g[h.LEFT_TOP]=t(88466),g[h.RIGHT_BOTTOM]=t(19211),g[h.RIGHT_CENTER]=t(34609),g[h.RIGHT_TOP]=t(48741),g[h.TOP_CENTER]=t(49440),g[h.TOP_LEFT]=t(81288),g[h.TOP_RIGHT]=t(61323);var o=function(a,r,e,s,u){return g[e](a,r,s,u)};v.exports=o}),19211:((v,T,t)=>{var h=t(62235),g=t(54380),o=t(86327),a=t(385),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)+u),o(e,h(s)+n),e};v.exports=r}),34609:((v,T,t)=>{var h=t(7702),g=t(54380),o=t(20786),a=t(385),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,g(s)+u),o(e,h(s)+n),e};v.exports=r}),48741:((v,T,t)=>{var h=t(54380),g=t(17717),o=t(385),a=t(66737),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),o(e,h(s)+u),a(e,g(s)-n),e};v.exports=r}),49440:((v,T,t)=>{var h=t(35893),g=t(17717),o=t(86327),a=t(88417),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,h(s)+u),o(e,g(s)-n),e};v.exports=r}),81288:((v,T,t)=>{var h=t(26541),g=t(17717),o=t(86327),a=t(385),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,h(s)-u),o(e,g(s)-n),e};v.exports=r}),61323:((v,T,t)=>{var h=t(54380),g=t(17717),o=t(86327),a=t(40136),r=function(e,s,u,n){return u===void 0&&(u=0),n===void 0&&(n=0),a(e,h(s)+u),o(e,g(s)-n),e};v.exports=r}),16694:((v,T,t)=>{v.exports={BottomCenter:t(21578),BottomLeft:t(10210),BottomRight:t(82341),LeftBottom:t(87958),LeftCenter:t(40080),LeftTop:t(88466),QuickSet:t(38829),RightBottom:t(19211),RightCenter:t(34609),RightTop:t(48741),TopCenter:t(49440),TopLeft:t(81288),TopRight:t(61323)}}),66786:((v,T,t)=>{var h=t(88417),g=t(20786),o=function(a,r,e){return h(a,r),g(a,e)};v.exports=o}),62235:(v=>{var T=function(t){return t.y+t.height-t.height*t.originY};v.exports=T}),72873:((v,T,t)=>{var h=t(62235),g=t(26541),o=t(54380),a=t(17717),r=t(87841),e=function(s,u){u===void 0&&(u=new r);var n=g(s),l=a(s);return u.x=n,u.y=l,u.width=o(s)-n,u.height=h(s)-l,u};v.exports=e}),35893:(v=>{var T=function(t){return t.x-t.width*t.originX+t.width*.5};v.exports=T}),7702:(v=>{var T=function(t){return t.y-t.height*t.originY+t.height*.5};v.exports=T}),26541:(v=>{var T=function(t){return t.x-t.width*t.originX};v.exports=T}),87431:(v=>{var T=function(t){return t.width*t.originX};v.exports=T}),46928:(v=>{var T=function(t){return t.height*t.originY};v.exports=T}),54380:(v=>{var T=function(t){return t.x+t.width-t.width*t.originX};v.exports=T}),17717:(v=>{var T=function(t){return t.y-t.height*t.originY};v.exports=T}),86327:(v=>{var T=function(t,h){return t.y=h-t.height+t.height*t.originY,t};v.exports=T}),88417:(v=>{var T=function(t,h){var g=t.width*t.originX;return t.x=h+g-t.width*.5,t};v.exports=T}),20786:(v=>{var T=function(t,h){var g=t.height*t.originY;return t.y=h+g-t.height*.5,t};v.exports=T}),385:(v=>{var T=function(t,h){return t.x=h+t.width*t.originX,t};v.exports=T}),40136:(v=>{var T=function(t,h){return t.x=h-t.width+t.width*t.originX,t};v.exports=T}),66737:(v=>{var T=function(t,h){return t.y=h+t.height*t.originY,t};v.exports=T}),58724:((v,T,t)=>{v.exports={CenterOn:t(66786),GetBottom:t(62235),GetBounds:t(72873),GetCenterX:t(35893),GetCenterY:t(7702),GetLeft:t(26541),GetOffsetX:t(87431),GetOffsetY:t(46928),GetRight:t(54380),GetTop:t(17717),SetBottom:t(86327),SetCenterX:t(88417),SetCenterY:t(20786),SetLeft:t(385),SetRight:t(40136),SetTop:t(66737)}}),20623:(v=>{var T={setCrisp:function(t){var h=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return h.forEach(function(g){t.style["image-rendering"]=g}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};v.exports=T}),27919:((v,T,t)=>{var h=t(8054),g=t(68703),o=[],a=!1,r=function(){var e=function(y,S,C,E,P){S===void 0&&(S=1),C===void 0&&(C=1),E===void 0&&(E=h.CANVAS),P===void 0&&(P=!1);var A,F=n(E);return F===null?(F={parent:y,canvas:document.createElement("canvas"),type:E},E===h.CANVAS&&o.push(F),A=F.canvas):(F.parent=y,A=F.canvas),P&&(F.parent=A),A.width=S,A.height=C,a&&E===h.CANVAS&&g.disable(A.getContext("2d",{willReadFrequently:!1})),A},s=function(y,S,C){return e(y,S,C,h.CANVAS)},u=function(y,S,C){return e(y,S,C,h.WEBGL)},n=function(y){if(y===void 0&&(y=h.CANVAS),y===h.WEBGL)return null;for(var S=0;S<o.length;S++){var C=o[S];if(!C.parent&&C.type===y)return C}return null},l=function(y){var S=y instanceof HTMLCanvasElement;o.forEach(function(C){(S&&C.canvas===y||!S&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},c=function(){var y=0;return o.forEach(function(S){S.parent&&y++}),y},d=function(){return o.length-c()},f=function(){a=!0},m=function(){a=!1};return{create2D:s,create:e,createWebGL:u,disableSmoothing:f,enableSmoothing:m,first:n,free:d,pool:o,remove:l,total:c}};v.exports=r()}),68703:(v=>{var T="",t=function(){var h=function(r){for(var e=["i","webkitI","msI","mozI","oI"],s=0;s<e.length;s++){var u=e[s]+"mageSmoothingEnabled";if(u in r)return u}return null},g=function(r){return T===""&&(T=h(r)),T&&(r[T]=!0),r},o=function(r){return T===""&&(T=h(r)),T&&(r[T]=!1),r},a=function(r){return T!==null?r[T]:null};return{disable:o,enable:g,getPrefix:h,isEnabled:a}};v.exports=t()}),65208:(v=>{var T=function(t,h){return h===void 0&&(h="none"),t.style.msTouchAction=h,t.style["ms-touch-action"]=h,t.style["touch-action"]=h,t};v.exports=T}),91610:(v=>{var T=function(t,h){h===void 0&&(h="none");var g=["-webkit-","-khtml-","-moz-","-ms-",""];return g.forEach(function(o){t.style[o+"user-select"]=h}),t.style["-webkit-touch-callout"]=h,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};v.exports=T}),26253:((v,T,t)=>{v.exports={CanvasInterpolation:t(20623),CanvasPool:t(27919),Smoothing:t(68703),TouchAction:t(65208),UserSelect:t(91610)}}),40987:((v,T,t)=>{var h=t(83419),g=t(37589),o=t(1e3),a=t(7537),r=t(87837),e=new h({initialize:function(u,n,l,c){u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(u,n,l,c)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(s,u,n,l,c){return l===void 0&&(l=255),c===void 0&&(c=!0),this._locked=!0,this.red=s,this.green=u,this.blue=n,this.alpha=l,this._locked=!1,this.update(c)},setGLTo:function(s,u,n,l){return l===void 0&&(l=1),this._locked=!0,this.redGL=s,this.greenGL=u,this.blueGL=n,this.alphaGL=l,this._locked=!1,this.update(!0)},setFromRGB:function(s){return this._locked=!0,this.red=s.r,this.green=s.g,this.blue=s.b,s.hasOwnProperty("a")&&(this.alpha=s.a),this._locked=!1,this.update(!0)},setFromHSV:function(s,u,n){return a(s,u,n,this)},update:function(s){if(s===void 0&&(s=!1),this._locked)return this;var u=this.r,n=this.g,l=this.b,c=this.a;return this._color=g(u,n,l),this._color32=o(u,n,l,c),this._rgba="rgba("+u+","+n+","+l+","+c/255+")",s&&r(u,n,l,this),this},updateHSV:function(){var s=this.r,u=this.g,n=this.b;return r(s,u,n,this),this},clone:function(){return new e(this.r,this.g,this.b,this.a)},gray:function(s){return this.setTo(s,s,s)},random:function(s,u){s===void 0&&(s=0),u===void 0&&(u=255);var n=Math.floor(s+Math.random()*(u-s)),l=Math.floor(s+Math.random()*(u-s)),c=Math.floor(s+Math.random()*(u-s));return this.setTo(n,l,c)},randomGray:function(s,u){s===void 0&&(s=0),u===void 0&&(u=255);var n=Math.floor(s+Math.random()*(u-s));return this.setTo(n,n,n)},saturate:function(s){return this.s+=s/100,this},desaturate:function(s){return this.s-=s/100,this},lighten:function(s){return this.v+=s/100,this},darken:function(s){return this.v-=s/100,this},brighten:function(s){var u=this.r,n=this.g,l=this.b;return u=Math.max(0,Math.min(255,u-Math.round(255*-(s/100)))),n=Math.max(0,Math.min(255,n-Math.round(255*-(s/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(s/100)))),this.setTo(u,n,l)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(s){this.gl[0]=Math.min(Math.abs(s),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(s){this.gl[1]=Math.min(Math.abs(s),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(s){this.gl[2]=Math.min(Math.abs(s),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(s){this.gl[3]=Math.min(Math.abs(s),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(s){s=Math.floor(Math.abs(s)),this.r=Math.min(s,255),this.gl[0]=s/255,this.update(!0)}},green:{get:function(){return this.g},set:function(s){s=Math.floor(Math.abs(s)),this.g=Math.min(s,255),this.gl[1]=s/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(s){s=Math.floor(Math.abs(s)),this.b=Math.min(s,255),this.gl[2]=s/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(s){s=Math.floor(Math.abs(s)),this.a=Math.min(s,255),this.gl[3]=s/255,this.update()}},h:{get:function(){return this._h},set:function(s){this._h=s,a(s,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(s){this._s=s,a(this._h,s,this._v,this)}},v:{get:function(){return this._v},set:function(s){this._v=s,a(this._h,this._s,s,this)}}});v.exports=e}),92728:((v,T,t)=>{var h=t(37589),g=function(o){o===void 0&&(o=1024);var a=[],r=255,e,s=255,u=0,n=0;for(e=0;e<=r;e++)a.push({r:s,g:e,b:n,color:h(s,e,n)});for(u=255,e=r;e>=0;e--)a.push({r:e,g:u,b:n,color:h(e,u,n)});for(s=0,e=0;e<=r;e++,u--)a.push({r:s,g:u,b:e,color:h(s,u,e)});for(u=0,n=255,e=0;e<=r;e++,n--,s++)a.push({r:s,g:u,b:n,color:h(s,u,n)});if(o===1024)return a;var l=[],c=0,d=1024/o;for(e=0;e<o;e++)l.push(a[Math.floor(c)]),c+=d;return l};v.exports=g}),91588:(v=>{var T=function(t){var h={r:t>>16&255,g:t>>8&255,b:t&255,a:255};return t>16777215&&(h.a=t>>>24),h};v.exports=T}),62957:(v=>{var T=function(t){var h=t.toString(16);return h.length===1?"0"+h:h};v.exports=T}),37589:(v=>{var T=function(t,h,g){return t<<16|h<<8|g};v.exports=T}),1e3:(v=>{var T=function(t,h,g,o){return o<<24|t<<16|h<<8|g};v.exports=T}),62183:((v,T,t)=>{var h=t(40987),g=t(89528),o=function(a,r,e){var s=e,u=e,n=e;if(r!==0){var l=e<.5?e*(1+r):e+r-e*r,c=2*e-l;s=g(c,l,a+1/3),u=g(c,l,a),n=g(c,l,a-1/3)}var d=new h;return d.setGLTo(s,u,n,1)};v.exports=o}),27939:((v,T,t)=>{var h=t(7537),g=function(o,a){o===void 0&&(o=1),a===void 0&&(a=1);for(var r=[],e=0;e<=359;e++)r.push(h(e/359,o,a));return r};v.exports=g}),7537:((v,T,t)=>{var h=t(37589);function g(a,r,e,s){var u=(a+r*6)%6,n=Math.min(u,4-u,1);return Math.round(255*(s-s*e*Math.max(0,n)))}var o=function(a,r,e,s){r===void 0&&(r=1),e===void 0&&(e=1);var u=g(5,a,r,e),n=g(3,a,r,e),l=g(1,a,r,e);return s?s.setTo?s.setTo(u,n,l,s.alpha,!0):(s.r=u,s.g=n,s.b=l,s.color=h(u,n,l),s):{r:u,g:n,b:l,color:h(u,n,l)}};v.exports=o}),70238:((v,T,t)=>{var h=t(40987),g=function(o){var a=new h;o=o.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,l,c,d){return l+l+c+c+d+d});var r=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);if(r){var e=parseInt(r[1],16),s=parseInt(r[2],16),u=parseInt(r[3],16);a.setTo(e,s,u)}return a};v.exports=g}),89528:(v=>{var T=function(t,h,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?t+(h-t)*6*g:g<.5?h:g<.6666666666666666?t+(h-t)*(.6666666666666666-g)*6:t};v.exports=T}),30100:((v,T,t)=>{var h=t(40987),g=t(90664),o=function(a){var r=g(a);return new h(r.r,r.g,r.b,r.a)};v.exports=o}),90664:(v=>{var T=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:t&255}:{a:255,r:t>>16&255,g:t>>8&255,b:t&255}};v.exports=T}),13699:((v,T,t)=>{var h=t(28915),g=t(37589),o=function(e,s,u,n,l,c,d,f){d===void 0&&(d=100),f===void 0&&(f=0);var m=f/d,y=h(e,n,m),S=h(s,l,m),C=h(u,c,m);return{r:y,g:S,b:C,a:255,color:g(y,S,C)}},a=function(e,s,u,n){return u===void 0&&(u=100),n===void 0&&(n=0),o(e.r,e.g,e.b,s.r,s.g,s.b,u,n)},r=function(e,s,u,n,l,c){return l===void 0&&(l=100),c===void 0&&(c=0),o(e.r,e.g,e.b,s,u,n,l,c)};v.exports={RGBWithRGB:o,ColorWithRGB:r,ColorWithColor:a}}),68957:((v,T,t)=>{var h=t(40987),g=function(o){return new h(o.r,o.g,o.b,o.a)};v.exports=g}),87388:((v,T,t)=>{var h=t(40987),g=function(o){var a=new h,r=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(o.toLowerCase());if(r){var e=parseInt(r[1],10),s=parseInt(r[2],10),u=parseInt(r[3],10),n=r[4]!==void 0?parseFloat(r[4]):1;a.setTo(e,s,u,n*255)}return a};v.exports=g}),87837:(v=>{var T=function(t,h,g,o){o===void 0&&(o={h:0,s:0,v:0}),t/=255,h/=255,g/=255;var a=Math.min(t,h,g),r=Math.max(t,h,g),e=r-a,s=0,u=r===0?0:e/r,n=r;return r!==a&&(r===t?s=(h-g)/e+(h<g?6:0):r===h?s=(g-t)/e+2:r===g&&(s=(t-h)/e+4),s/=6),o.hasOwnProperty("_h")?(o._h=s,o._s=u,o._v=n):(o.h=s,o.s=u,o.v=n),o};v.exports=T}),75723:((v,T,t)=>{var h=t(62957),g=function(o,a,r,e,s){return e===void 0&&(e=255),s===void 0&&(s="#"),s==="#"?"#"+((1<<24)+(o<<16)+(a<<8)+r).toString(16).slice(1,7):"0x"+h(e)+h(o)+h(a)+h(r)};v.exports=g}),85386:((v,T,t)=>{var h=t(30976),g=t(40987),o=function(a,r){return a===void 0&&(a=0),r===void 0&&(r=255),new g(h(a,r),h(a,r),h(a,r))};v.exports=o}),80333:((v,T,t)=>{var h=t(70238),g=t(30100),o=t(68957),a=t(87388),r=function(e){var s=typeof e;switch(s){case"string":return e.substr(0,3).toLowerCase()==="rgb"?a(e):h(e);case"number":return g(e);case"object":return o(e)}};v.exports=r}),3956:((v,T,t)=>{var h=t(40987);h.ColorSpectrum=t(92728),h.ColorToRGBA=t(91588),h.ComponentToHex=t(62957),h.GetColor=t(37589),h.GetColor32=t(1e3),h.HexStringToColor=t(70238),h.HSLToColor=t(62183),h.HSVColorWheel=t(27939),h.HSVToRGB=t(7537),h.HueToComponent=t(89528),h.IntegerToColor=t(30100),h.IntegerToRGB=t(90664),h.Interpolate=t(13699),h.ObjectToColor=t(68957),h.RandomRGB=t(85386),h.RGBStringToColor=t(87388),h.RGBToHSV=t(87837),h.RGBToString=t(75723),h.ValueToColor=t(80333),v.exports=h}),27460:((v,T,t)=>{v.exports={Align:t(71926),BaseShader:t(73894),Bounds:t(58724),Canvas:t(26253),Color:t(3956),ColorMatrix:t(89422),Masks:t(69781),RGB:t(51767)}}),6858:((v,T,t)=>{var h=t(83419),g=t(39429),o=new h({initialize:function(r,e,s,u,n,l){e||(e=r.sys.make.image({x:s,y:u,key:n,frame:l,add:!1})),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(a){this.bitmapMask=a},preRenderWebGL:function(a,r,e){a.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,e)},postRenderWebGL:function(a,r,e){a.pipelines.BITMAPMASK_PIPELINE.endMask(this,r,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});g.register("bitmapMask",function(a,r,e,s,u){return new o(this.scene,a,r,e,s,u)}),v.exports=o}),80661:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r){this.geometryMask=r,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(o){return this.geometryMask=o,this},setInvertAlpha:function(o){return o===void 0&&(o=!0),this.invertAlpha=o,this},preRenderWebGL:function(o,a,r){var e=o.gl;o.flush(),o.maskStack.length===0&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),o.maskCount=0),o.currentCameraMask.mask!==this&&(o.currentMask.mask=this),o.maskStack.push({mask:this,camera:r}),this.applyStencil(o,r,!0),o.maskCount++},applyStencil:function(o,a,r){var e=o.gl,s=this.geometryMask,u=o.maskCount,n=255;e.colorMask(!1,!1,!1,!1),r?(e.stencilFunc(e.EQUAL,u,n),e.stencilOp(e.KEEP,e.KEEP,e.INCR),u++):(e.stencilFunc(e.EQUAL,u+1,n),e.stencilOp(e.KEEP,e.KEEP,e.DECR)),this.level=u,s.renderWebGL(o,s,a),o.flush(),e.colorMask(!0,!0,!0,!0),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),this.invertAlpha?e.stencilFunc(e.NOTEQUAL,u,n):e.stencilFunc(e.EQUAL,u,n)},postRenderWebGL:function(o){var a=o.gl;o.maskStack.pop(),o.maskCount--,o.flush();var r=o.currentMask;if(o.maskStack.length===0)r.mask=null,a.disable(a.STENCIL_TEST);else{var e=o.maskStack[o.maskStack.length-1];e.mask.applyStencil(o,e.camera,!1),o.currentCameraMask.mask!==e.mask?(r.mask=e.mask,r.camera=e.camera):r.mask=null}},preRenderCanvas:function(o,a,r){var e=this.geometryMask;o.currentContext.save(),e.renderCanvas(o,e,r,null,null,!0),o.currentContext.clip()},postRenderCanvas:function(o){o.currentContext.restore()},destroy:function(){this.geometryMask=null}});v.exports=g}),69781:((v,T,t)=>{v.exports={BitmapMask:t(6858),GeometryMask:t(80661)}}),73894:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,s){(!r||r==="")&&(r=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!e||e==="")&&(e=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),s===void 0&&(s=null),this.key=a,this.fragmentSrc=r,this.vertexSrc=e,this.uniforms=s}});v.exports=g}),40366:(v=>{var T=function(t,h){var g;if(h)typeof h=="string"?g=document.getElementById(h):typeof h=="object"&&h.nodeType===1&&(g=h);else if(t.parentElement||h===null)return t;return g||(g=document.body),g.appendChild(t),t};v.exports=T}),83719:((v,T,t)=>{var h=t(40366),g=function(o){var a=o.config;if(!(!a.parent||!a.domCreateContainer)){var r=document.createElement("div");r.style.cssText=["display: block;","width: "+o.scale.width+"px;","height: "+o.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),o.domContainer=r,h(r,a.parent)}};v.exports=g}),57264:((v,T,t)=>{var h=t(25892),g=function(o){if(document.readyState==="complete"||document.readyState==="interactive"){o();return}var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),o()};document.body?h.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)};v.exports=g}),57811:(v=>{var T=function(t){if(!t)return window.innerHeight;var h=Math.abs(window.orientation),g={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),g.w=h===90?o.offsetHeight:window.innerWidth,g.h=h===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?g.h:g.w};v.exports=T}),45818:((v,T,t)=>{var h=t(13560),g=function(o,a){var r=window.screen,e=r?r.orientation||r.mozOrientation||r.msOrientation:!1;if(e&&typeof e.type=="string")return e.type;if(typeof e=="string")return e;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return h.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return h.ORIENTATION.LANDSCAPE}else return a>o?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE};v.exports=g}),74403:(v=>{var T=function(t){var h;return t!==""&&(typeof t=="string"?h=document.getElementById(t):t&&t.nodeType===1&&(h=t)),h||(h=document.body),h};v.exports=T}),56836:(v=>{var T=function(t){var h="";try{if(window.DOMParser){var g=new DOMParser;h=g.parseFromString(t,"text/xml")}else h=new ActiveXObject("Microsoft.XMLDOM"),h.loadXML(t)}catch{h=null}return!h||!h.documentElement||h.getElementsByTagName("parsererror").length?null:h};v.exports=T}),35846:(v=>{var T=function(t){t.parentNode&&t.parentNode.removeChild(t)};v.exports=T}),43092:((v,T,t)=>{var h=t(83419),g=t(29747),o=new h({initialize:function(){this.isRunning=!1,this.callback=g,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var r=this;this.step=function e(s){r.callback(s),r.isRunning&&(r.timeOutID=window.requestAnimationFrame(e))},this.stepTimeout=function e(){r.isRunning&&(r.timeOutID=window.setTimeout(e,r.delay)),r.callback(window.performance.now())}},start:function(a,r,e){this.isRunning||(this.callback=a,this.isSetTimeOut=r,this.delay=e,this.isRunning=!0,this.timeOutID=r?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=g}});v.exports=o}),84902:((v,T,t)=>{var h={AddToDOM:t(40366),DOMContentLoaded:t(57264),GetInnerHeight:t(57811),GetScreenOrientation:t(45818),GetTarget:t(74403),ParseXML:t(56836),RemoveFromDOM:t(35846),RequestAnimationFrame:t(43092)};v.exports=h}),47565:((v,T,t)=>{var h=t(83419),g=t(50792),o=t(37277),a=new h({Extends:g,initialize:function(){g.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});o.register("EventEmitter",a,"events"),v.exports=a}),93055:((v,T,t)=>{v.exports={EventEmitter:t(47565)}}),20122:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s){s===void 0&&(s=1),g.call(this,o.BARREL,e),this.amount=s}});v.exports=a}),32251:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l,c,d){u===void 0&&(u=1),n===void 0&&(n=1),l===void 0&&(l=1),c===void 0&&(c=1),d===void 0&&(d=4),g.call(this,o.BLOOM,e),this.steps=d,this.offsetX=u,this.offsetY=n,this.blurStrength=l,this.strength=c,this.glcolor=[1,1,1],s!=null&&(this.color=s)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});v.exports=a}),9047:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l,c,d){s===void 0&&(s=0),u===void 0&&(u=2),n===void 0&&(n=2),l===void 0&&(l=1),d===void 0&&(d=4),g.call(this,o.BLUR,e),this.quality=s,this.x=u,this.y=n,this.steps=d,this.strength=l,this.glcolor=[1,1,1],c!=null&&(this.color=c)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});v.exports=a}),27885:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l,c,d,f){s===void 0&&(s=.5),u===void 0&&(u=1),n===void 0&&(n=.2),l===void 0&&(l=!1),c===void 0&&(c=1),d===void 0&&(d=1),f===void 0&&(f=1),g.call(this,o.BOKEH,e),this.radius=s,this.amount=u,this.contrast=n,this.isTiltShift=l,this.strength=f,this.blurX=c,this.blurY=d}});v.exports=a}),12578:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l,c){s===void 0&&(s=8),l===void 0&&(l=1),c===void 0&&(c=.005),g.call(this,o.CIRCLE,e),this.scale=l,this.feather=c,this.thickness=s,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],u!=null&&(this.color=u),n!=null&&(this.backgroundColor=n)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}},backgroundColor:{get:function(){var r=this.glcolor2;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor2;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(r){this.glcolor2[3]=r}}});v.exports=a}),15802:((v,T,t)=>{var h=t(83419),g=t(89422),o=t(14811),a=new h({Extends:g,initialize:function(e){g.call(this),this.type=o.COLOR_MATRIX,this.gameObject=e,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});v.exports=a}),72898:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r){this.type=a,this.gameObject=r,this.active=!0},setActive:function(o){return this.active=o,this},destroy:function(){this.gameObject=null,this.active=!1}});v.exports=g}),44553:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n){s===void 0&&(s="__WHITE"),u===void 0&&(u=.005),n===void 0&&(n=.005),g.call(this,o.DISPLACEMENT,e),this.x=u,this.y=n,this.glTexture,this.setTexture(s)},setTexture:function(r){var e=this.gameObject.scene.sys.textures.getFrame(r);return e&&(this.glTexture=e.glTexture),this}});v.exports=a}),68531:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l){u===void 0&&(u=4),n===void 0&&(n=0),l===void 0&&(l=!1),g.call(this,o.GLOW,e),this.outerStrength=u,this.innerStrength=n,this.knockout=l,this.glcolor=[1,1,1,1],s!==void 0&&(this.color=s)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});v.exports=a}),37102:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l,c,d,f,m){n===void 0&&(n=.2),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=1),m===void 0&&(m=0),g.call(this,o.GRADIENT,e),this.alpha=n,this.size=m,this.fromX=l,this.fromY=c,this.toX=d,this.toY=f,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],s!=null&&(this.color1=s),u!=null&&(this.color2=u)},color1:{get:function(){var r=this.glcolor1;return(r[0]<<16)+(r[1]<<8)+(r[2]|0)},set:function(r){var e=this.glcolor1;e[0]=r>>16&255,e[1]=r>>8&255,e[2]=r&255}},color2:{get:function(){var r=this.glcolor2;return(r[0]<<16)+(r[1]<<8)+(r[2]|0)},set:function(r){var e=this.glcolor2;e[0]=r>>16&255,e[1]=r>>8&255,e[2]=r&255}}});v.exports=a}),86886:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s){s===void 0&&(s=1),g.call(this,o.PIXELATE,e),this.amount=s}});v.exports=a}),92322:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l,c,d,f){s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n=.1),l===void 0&&(l=1),d===void 0&&(d=6),f===void 0&&(f=1),g.call(this,o.SHADOW,e),this.x=s,this.y=u,this.decay=n,this.power=l,this.glcolor=[0,0,0,1],this.samples=d,this.intensity=f,c!==void 0&&(this.color=c)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var e=this.glcolor;e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255}}});v.exports=a}),39563:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l){s===void 0&&(s=.5),u===void 0&&(u=.5),n===void 0&&(n=3),l===void 0&&(l=!1),g.call(this,o.SHINE,e),this.speed=s,this.lineWidth=u,this.gradient=n,this.reveal=l}});v.exports=a}),56448:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l){s===void 0&&(s=.5),u===void 0&&(u=.5),n===void 0&&(n=.5),l===void 0&&(l=.5),g.call(this,o.VIGNETTE,e),this.x=s,this.y=u,this.radius=n,this.strength=l}});v.exports=a}),38433:((v,T,t)=>{var h=t(83419),g=t(72898),o=t(14811),a=new h({Extends:g,initialize:function(e,s,u,n,l){s===void 0&&(s=.1),u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=!1),g.call(this,o.WIPE,e),this.progress=0,this.wipeWidth=s,this.direction=u,this.axis=n,this.reveal=l}});v.exports=a}),14811:(v=>{var T={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};v.exports=T}),66064:((v,T,t)=>{var h=t(79291),g=t(14811),o={Barrel:t(20122),Controller:t(72898),Bloom:t(32251),Blur:t(9047),Bokeh:t(27885),Circle:t(12578),ColorMatrix:t(15802),Displacement:t(44553),Glow:t(68531),Gradient:t(37102),Pixelate:t(86886),Shadow:t(92322),Shine:t(39563),Vignette:t(56448),Wipe:t(38433)};o=h(!1,o,g),v.exports=o}),25305:((v,T,t)=>{var h=t(10312),g=t(23568),o=function(a,r,e){r.x=g(e,"x",0),r.y=g(e,"y",0),r.depth=g(e,"depth",0),r.flipX=g(e,"flipX",!1),r.flipY=g(e,"flipY",!1);var s=g(e,"scale",null);typeof s=="number"?r.setScale(s):s!==null&&(r.scaleX=g(s,"x",1),r.scaleY=g(s,"y",1));var u=g(e,"scrollFactor",null);typeof u=="number"?r.setScrollFactor(u):u!==null&&(r.scrollFactorX=g(u,"x",1),r.scrollFactorY=g(u,"y",1)),r.rotation=g(e,"rotation",0);var n=g(e,"angle",null);n!==null&&(r.angle=n),r.alpha=g(e,"alpha",1);var l=g(e,"origin",null);if(typeof l=="number")r.setOrigin(l);else if(l!==null){var c=g(l,"x",.5),d=g(l,"y",.5);r.setOrigin(c,d)}r.blendMode=g(e,"blendMode",h.NORMAL),r.visible=g(e,"visible",!0);var f=g(e,"add",!0);return f&&a.sys.displayList.add(r),r.preUpdate&&a.sys.updateList.add(r),r};v.exports=o}),13059:((v,T,t)=>{var h=t(23568),g=function(o,a){var r=h(a,"anims",null);if(r===null)return o;if(typeof r=="string")o.anims.play(r);else if(typeof r=="object"){var e=o.anims,s=h(r,"key",void 0);if(s){var u=h(r,"startFrame",void 0),n=h(r,"delay",0),l=h(r,"repeat",0),c=h(r,"repeatDelay",0),d=h(r,"yoyo",!1),f=h(r,"play",!1),m=h(r,"delayedPlay",0),y={key:s,delay:n,repeat:l,repeatDelay:c,yoyo:d,startFrame:u};f?e.play(y):m>0?e.playAfterDelay(y,m):e.load(y)}}return o};v.exports=g}),8050:((v,T,t)=>{var h=t(83419),g=t(73162),o=t(37277),a=t(51708),r=t(44594),e=t(19186),s=new h({Extends:g,initialize:function(n){g.call(this,n),this.sortChildrenFlag=!1,this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},addChildCallback:function(u){u.displayList&&u.displayList!==this&&u.removeFromDisplayList(),u.parentContainer&&u.parentContainer.remove(u),u.displayList||(this.queueDepthSort(),u.displayList=this,u.emit(a.ADDED_TO_SCENE,u,this.scene),this.events.emit(r.ADDED_TO_SCENE,u,this.scene))},removeChildCallback:function(u){this.queueDepthSort(),u.displayList=null,u.emit(a.REMOVED_FROM_SCENE,u,this.scene),this.events.emit(r.REMOVED_FROM_SCENE,u,this.scene)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(e(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(u,n){return u._depth-n._depth},getChildren:function(){return this.list},shutdown:function(){for(var u=this.list,n=u.length;n--;)u[n]&&u[n].destroy(!0);u.length=0,this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});o.register("DisplayList",s,"displayList"),v.exports=s}),95643:((v,T,t)=>{var h=t(83419),g=t(53774),o=t(45893),a=t(50792),r=t(51708),e=t(44594),s=new h({Extends:a,initialize:function(n,l){a.call(this),this.scene=n,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this),n.sys.queueDepthSort()},setActive:function(u){return this.active=u,this},setName:function(u){return this.name=u,this},setState:function(u){return this.state=u,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(u,n){return this.data||(this.data=new o(this)),this.data.set(u,n),this},incData:function(u,n){return this.data||(this.data=new o(this)),this.data.inc(u,n),this},toggleData:function(u){return this.data||(this.data=new o(this)),this.data.toggle(u),this},getData:function(u){return this.data||(this.data=new o(this)),this.data.get(u)},setInteractive:function(u,n,l){return this.scene.sys.input.enable(this,u,n,l),this},disableInteractive:function(u){return u===void 0&&(u=!1),this.scene.sys.input.disable(this,u),this},removeInteractive:function(u){return u===void 0&&(u=!1),this.scene.sys.input.clear(this),u&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return g(this)},willRender:function(u){var n=this.displayList&&this.displayList.active?this.displayList.willRender(u):!0;return!(!n||s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},getIndexList:function(){for(var u=this,n=this.parentContainer,l=[];n&&(l.unshift(n.getIndex(u)),u=n,n.parentContainer);)n=n.parentContainer;return this.displayList?l.unshift(this.displayList.getIndex(u)):l.unshift(this.scene.sys.displayList.getIndex(u)),l},addToDisplayList:function(u){return u===void 0&&(u=this.scene.sys.displayList),this.displayList&&this.displayList!==u&&this.removeFromDisplayList(),u.exists(this)||(this.displayList=u,u.add(this,!0),u.queueDepthSort(),this.emit(r.ADDED_TO_SCENE,this,this.scene),u.events.emit(e.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var u=this.displayList||this.scene.sys.displayList;return u&&u.exists(this)&&(u.remove(this,!0),u.queueDepthSort(),this.displayList=null,this.emit(r.REMOVED_FROM_SCENE,this,this.scene),u.events.emit(e.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var u=null;return this.parentContainer?u=this.parentContainer.list:this.displayList&&(u=this.displayList.list),u},destroy:function(u){!this.scene||this.ignoreDestroy||(u===void 0&&(u=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(r.DESTROY,this,u),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});s.RENDER_MASK=15,v.exports=s}),44603:((v,T,t)=>{var h=t(83419),g=t(37277),o=t(44594),a=new h({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(r,e){a.prototype.hasOwnProperty(r)||(a.prototype[r]=e)},a.remove=function(r){a.prototype.hasOwnProperty(r)&&delete a.prototype[r]},g.register("GameObjectCreator",a,"make"),v.exports=a}),39429:((v,T,t)=>{var h=t(83419),g=t(37277),o=t(44594),a=new h({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},existing:function(r){return(r.renderCanvas||r.renderWebGL)&&this.displayList.add(r),r.preUpdate&&this.updateList.add(r),r},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(r,e){a.prototype.hasOwnProperty(r)||(a.prototype[r]=e)},a.remove=function(r){a.prototype.hasOwnProperty(r)&&delete a.prototype[r]},g.register("GameObjectFactory",a,"add"),v.exports=a}),91296:((v,T,t)=>{var h=t(61340),g=new h,o=new h,a=new h,r={camera:g,sprite:o,calc:a},e=function(s,u,n){var l=g,c=o,d=a;return c.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),l.copyFrom(u.matrix),n?(l.multiplyWithOffset(n,-u.scrollX*s.scrollFactorX,-u.scrollY*s.scrollFactorY),c.e=s.x,c.f=s.y):(c.e-=u.scrollX*s.scrollFactorX,c.f-=u.scrollY*s.scrollFactorY),l.multiply(c,d),r};v.exports=e}),45027:((v,T,t)=>{var h=t(83419),g=t(25774),o=t(37277),a=t(44594),r=new h({Extends:g,initialize:function(s){g.call(this),this.checkQueue=!0,this.scene=s,this.systems=s.sys,s.sys.events.once(a.BOOT,this.boot,this),s.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(a.PRE_UPDATE,this.update,this),e.on(a.UPDATE,this.sceneUpdate,this),e.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(e,s){for(var u=this._active,n=u.length,l=0;l<n;l++){var c=u[l];c.active&&c.preUpdate.call(c,e,s)}},shutdown:function(){for(var e=this._active.length;e--;)this._active[e].destroy(!0);for(e=this._pending.length;e--;)this._pending[e].destroy(!0);for(e=this._destroy.length;e--;)this._destroy[e].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var s=this.systems.events;s.off(a.PRE_UPDATE,this.update,this),s.off(a.UPDATE,this.sceneUpdate,this),s.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("UpdateList",r,"updateList"),v.exports=r}),3217:(v=>{var T=function(t,h,g,o,a,r,e,s,u,n,l,c,d,f,m){var y=g.x-h.displayOriginX+a,S=g.y-h.displayOriginY+r,C=y+g.w,E=S+g.h,P=e.a,A=e.b,F=e.c,G=e.d,D=e.e,L=e.f,b=y*P+S*F+D,I=y*A+S*G+L,N=y*P+E*F+D,Z=y*A+E*G+L,U=C*P+E*F+D,W=C*A+E*G+L,X=C*P+S*F+D,V=C*A+S*G+L;s&&(b=Math.round(b),I=Math.round(I),N=Math.round(N),Z=Math.round(Z),U=Math.round(U),W=Math.round(W),X=Math.round(X),V=Math.round(V)),t.batchQuad(h,b,I,N,Z,U,W,X,V,o.u0,o.v0,o.u1,o.v1,u,n,l,c,d,f,m)};v.exports=T}),53048:(v=>{var T=function(t,h,g,o){if(g===void 0&&(g=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var a=t.text,r=a.length,e=t.maxWidth,s=t.wordWrapCharCode,u=Number.MAX_VALUE,n=Number.MAX_VALUE,l=0,c=0,d=t.fontData.chars,f=t.fontData.lineHeight,m=t.letterSpacing,y=t.lineSpacing,S=0,C=0,E=0,P=null,A=t._align,F=0,G=0,D=t.fontSize/t.fontData.size,L=D*t.scaleX,b=D*t.scaleY,I=null,N=0,Z=[],U=Number.MAX_VALUE,W=0,X=0,V=0,O,z,B,Y=[],k=[],J=null,j=function(ve,Te){for(var _t=0,ce=0;ce<ve.length;ce++){var wt=ve.charCodeAt(ce),Ht=Te.chars[wt];Ht&&(_t+=Ht.xAdvance)}return _t*L};if(e>0){B=a.split(`
`);var tt=[];for(O=0;O<B.length;O++){var ut=B[O],ht="",st="",dt="",lt="";for(z=0;z<ut.length;z++)if(E=ut.charCodeAt(z),ht+=ut[z],E===s||z===ut.length-1){lt=dt+ht;var ft=j(lt,t.fontData);ft<=e?dt=lt:(st=st.slice(0,-1),st+=(st?`
`:"")+dt,dt=ht),ht=""}st=st.slice(0,-1),st+=(st?`
`:"")+dt,tt.push(st)}a=tt.join(`
`),o.wrappedText=a,r=a.length}var Lt=0;for(O=0;O<r;O++){if(E=a.charCodeAt(O),E===10){J!==null&&(Y.push({word:J.word,i:J.i,x:J.x*L,y:J.y*b,w:J.w*L,h:J.h*b}),J=null),I=null,Z[X]=V,V>W&&(W=V),V<U&&(U=V),X++,V=0,S=0,C=(f+y)*X;continue}if(P=d[E],!!P){if(F=S,G=C,I!==null){var Nt=P.kerning[N];F+=Nt!==void 0?Nt:0}u>F&&(u=F),n>G&&(n=G);var Vt=F+P.xAdvance,pt=G+f;l<Vt&&(l=Vt),c<pt&&(c=pt);var Pt=P.xOffset+P.xAdvance+(Nt!==void 0?Nt:0);E===s?J!==null&&(Y.push({word:J.word,i:J.i,x:J.x*L,y:J.y*b,w:J.w*L,h:J.h*b}),J=null):(J===null&&(J={word:"",i:Lt,x:S,y:C,w:0,h:f}),J.word=J.word.concat(a[O]),J.w+=Pt),k.push({i:Lt,idx:O,char:a[O],code:E,x:(P.xOffset+F)*D,y:(P.yOffset+C)*D,w:P.width*D,h:P.height*D,t:C*D,r:Vt*D,b:f*D,line:X,glyph:P}),S+=P.xAdvance+m+(Nt!==void 0?Nt:0),I=P,N=E,V=Vt*D,Lt++}}if(J!==null&&Y.push({word:J.word,i:J.i,x:J.x*L,y:J.y*b,w:J.w*L,h:J.h*b}),Z[X]=V,V>W&&(W=V),V<U&&(U=V),A>0)for(var Dt=0;Dt<k.length;Dt++){var Gt=k[Dt];if(A===1){var Ut=(W-Z[Gt.line])/2;Gt.x+=Ut,Gt.r+=Ut}else if(A===2){var Ot=W-Z[Gt.line];Gt.x+=Ot,Gt.r+=Ot}}var Wt=o.local,Zt=o.global;return B=o.lines,Wt.x=u*D,Wt.y=n*D,Wt.width=l*D,Wt.height=c*D,Zt.x=t.x-t._displayOriginX+u*L,Zt.y=t.y-t._displayOriginY+n*b,Zt.width=l*L,Zt.height=c*b,B.shortest=U,B.longest=W,B.lengths=Z,h&&(Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y),Wt.width=Math.ceil(Wt.width),Wt.height=Math.ceil(Wt.height),Zt.x=Math.ceil(Zt.x),Zt.y=Math.ceil(Zt.y),Zt.width=Math.ceil(Zt.width),Zt.height=Math.ceil(Zt.height),B.shortest=Math.ceil(U),B.longest=Math.ceil(W)),g&&(t._displayOriginX=t.originX*Wt.width,t._displayOriginY=t.originY*Wt.height,Zt.x=t.x-t._displayOriginX*t.scaleX,Zt.y=t.y-t._displayOriginY*t.scaleY,h&&(Zt.x=Math.ceil(Zt.x),Zt.y=Math.ceil(Zt.y))),o.words=Y,o.characters=k,o.lines.height=f,o.scale=D,o.scaleX=t.scaleX,o.scaleY=t.scaleY,o};v.exports=T}),61327:((v,T,t)=>{var h=t(21859),g=function(o,a,r,e,s,u,n){var l=o.sys.textures.get(r),c=l.get(e),d=o.sys.cache.xml.get(s);if(c&&d){var f=h(d,c,u,n,l);return o.sys.cache.bitmapFont.add(a,{data:f,texture:r,frame:e,fromAtlas:!0}),!0}else return!1};v.exports=g}),6925:((v,T,t)=>{var h=t(35154),g=function(o,a){var r=a.width,e=a.height,s=Math.floor(r/2),u=Math.floor(e/2),n=h(a,"chars","");if(n!==""){var l=h(a,"image",""),c=o.sys.textures.getFrame(l),d=c.cutX,f=c.cutY,m=c.source.width,y=c.source.height,S=h(a,"offset.x",0),C=h(a,"offset.y",0),E=h(a,"spacing.x",0),P=h(a,"spacing.y",0),A=h(a,"lineSpacing",0),F=h(a,"charsPerRow",null);F===null&&(F=m/r,F>n.length&&(F=n.length));for(var G=S,D=C,L={retroFont:!0,font:l,size:r,lineHeight:e+A,chars:{}},b=0,I=0;I<n.length;I++){var N=n.charCodeAt(I),Z=(d+G)/m,U=(f+D)/y,W=(d+G+r)/m,X=(f+D+e)/y;L.chars[N]={x:G,y:D,width:r,height:e,centerX:s,centerY:u,xOffset:0,yOffset:0,xAdvance:r,data:{},kerning:{},u0:Z,v0:U,u1:W,v1:X},b++,b===F?(b=0,G=S,D+=e+P):G+=r+E}var V={data:L,frame:null,texture:l};return V}};v.exports=g}),21859:(v=>{function T(h,g){return parseInt(h.getAttribute(g),10)}var t=function(h,g,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0);var e=g.cutX,s=g.cutY,u=g.source.width,n=g.source.height,l=g.sourceIndex,c={},d=h.getElementsByTagName("info")[0],f=h.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=T(d,"size"),c.lineHeight=T(f,"lineHeight")+a,c.chars={};var m=h.getElementsByTagName("char"),y=g!==void 0&&g.trimmed;if(y)var S=g.height,C=g.width;for(var E=0;E<m.length;E++){var P=m[E],A=T(P,"id"),F=String.fromCharCode(A),G=T(P,"x"),D=T(P,"y"),L=T(P,"width"),b=T(P,"height");y&&(G<C&&(C=G),D<S&&(S=D)),y&&S!==0&&C!==0&&(G-=g.x,D-=g.y);var I=(e+G)/u,N=(s+D)/n,Z=(e+G+L)/u,U=(s+D+b)/n;if(c.chars[A]={x:G,y:D,width:L,height:b,centerX:Math.floor(L/2),centerY:Math.floor(b/2),xOffset:T(P,"xoffset"),yOffset:T(P,"yoffset"),xAdvance:T(P,"xadvance")+o,data:{},kerning:{},u0:I,v0:N,u1:Z,v1:U},r&&L!==0&&b!==0){var W=r.add(F,l,G,D,L,b);W&&W.setUVs(L,b,I,N,Z,U)}}var X=h.getElementsByTagName("kerning");for(E=0;E<X.length;E++){var V=X[E],O=T(V,"first"),z=T(V,"second"),B=T(V,"amount");c.chars[z].kerning[O]=B}return c};v.exports=t}),196:((v,T,t)=>{var h=t(87662),g=t(79291),o={Parse:t(6925)};o=g(!1,o,h),v.exports=o}),87662:(v=>{var T={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};v.exports=T}),2638:((v,T,t)=>{var h=t(22186),g=t(83419),o=t(12310),a=new g({Extends:h,Mixins:[o],initialize:function(e,s,u,n,l,c,d){h.call(this,e,s,u,n,l,c,d),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(r,e){return this.cropWidth=r,this.cropHeight=e,this},setDisplayCallback:function(r){return this.displayCallback=r,this},setScrollX:function(r){return this.scrollX=r,this},setScrollY:function(r){return this.scrollY=r,this}});v.exports=a}),86741:((v,T,t)=>{var h=t(20926),g=function(o,a,r,e){var s=a._text,u=s.length,n=o.currentContext;if(!(u===0||!h(o,n,a,r,e))){r.addToRenderList(a);var l=a.fromAtlas?a.frame:a.texture.frames.__BASE,c=a.displayCallback,d=a.callbackData,f=a.fontData.chars,m=a.fontData.lineHeight,y=a._letterSpacing,S=0,C=0,E=0,P=null,A=0,F=0,G=0,D=0,L=0,b=0,I=null,N=0,Z=a.frame.source.image,U=l.cutX,W=l.cutY,X=0,V=0,O=a._fontSize/a.fontData.size,z=a._align,B=0,Y=0;a.getTextBounds(!1);var k=a._bounds.lines;z===1?Y=(k.longest-k.lengths[0])/2:z===2&&(Y=k.longest-k.lengths[0]),n.translate(-a.displayOriginX,-a.displayOriginY);var J=r.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(n.beginPath(),n.rect(0,0,a.cropWidth,a.cropHeight),n.clip());for(var j=0;j<u;j++){if(V=O,X=0,E=s.charCodeAt(j),E===10){B++,z===1?Y=(k.longest-k.lengths[B])/2:z===2&&(Y=k.longest-k.lengths[B]),S=0,C+=m,I=null;continue}if(P=f[E],!!P){if(A=U+P.x,F=W+P.y,G=P.width,D=P.height,L=P.xOffset+S-a.scrollX,b=P.yOffset+C-a.scrollY,I!==null){var tt=P.kerning[N];L+=tt!==void 0?tt:0}if(c){d.index=j,d.charCode=E,d.x=L,d.y=b,d.scale=V,d.rotation=X,d.data=P.data;var ut=c(d);L=ut.x,b=ut.y,V=ut.scale,X=ut.rotation}L*=V,b*=V,L+=Y,S+=P.xAdvance+y+(tt!==void 0?tt:0),I=P,N=E,!(G===0||D===0||E===32)&&(J&&(L=Math.round(L),b=Math.round(b)),n.save(),n.translate(L,b),n.rotate(X),n.scale(V,V),n.drawImage(Z,A,F,G,D,0,0,G,D),n.restore())}}n.restore()}};v.exports=g}),11164:((v,T,t)=>{var h=t(2638),g=t(25305),o=t(44603),a=t(23568);o.register("dynamicBitmapText",function(r,e){r===void 0&&(r={});var s=a(r,"font",""),u=a(r,"text",""),n=a(r,"size",!1),l=new h(this.scene,0,0,s,u,n);return e!==void 0&&(r.add=e),g(this.scene,l,r),l})}),72566:((v,T,t)=>{var h=t(2638),g=t(39429);g.register("dynamicBitmapText",function(o,a,r,e,s){return this.displayList.add(new h(this.scene,o,a,r,e,s))})}),12310:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(73482),o=t(86741),v.exports={renderWebGL:g,renderCanvas:o}}),73482:((v,T,t)=>{var h=t(91296),g=t(61340),o=t(70554),a=new g,r=function(e,s,u,n){var l=s.text,c=l.length;if(c!==0){u.addToRenderList(s);var d=e.pipelines.set(s.pipeline,s),f=h(s,u,n);e.pipelines.preBatch(s);var m=f.sprite,y=f.calc,S=a,C=s.cropWidth>0||s.cropHeight>0;C&&(d.flush(),e.pushScissor(y.tx,y.ty,s.cropWidth*y.scaleX,s.cropHeight*y.scaleY));var E=s.frame,P=E.glTexture,A=s.tintFill,F=o.getTintAppendFloatAlpha(s.tintTopLeft,u.alpha*s._alphaTL),G=o.getTintAppendFloatAlpha(s.tintTopRight,u.alpha*s._alphaTR),D=o.getTintAppendFloatAlpha(s.tintBottomLeft,u.alpha*s._alphaBL),L=o.getTintAppendFloatAlpha(s.tintBottomRight,u.alpha*s._alphaBR),b=d.setGameObject(s),I=0,N=0,Z=0,U=0,W=s.letterSpacing,X,V=0,O=0,z,B=s.scrollX,Y=s.scrollY,k=s.fontData,J=k.chars,j=k.lineHeight,tt=s.fontSize/k.size,ut=0,ht=s._align,st=0,dt=0,lt=s.getTextBounds(!1);s.maxWidth>0&&(l=lt.wrappedText,c=l.length);var ft=s._bounds.lines;ht===1?dt=(ft.longest-ft.lengths[0])/2:ht===2&&(dt=ft.longest-ft.lengths[0]);for(var Lt=u.roundPixels,Nt=s.displayCallback,Vt=s.callbackData,pt=0;pt<c;pt++){if(Z=l.charCodeAt(pt),Z===10){st++,ht===1?dt=(ft.longest-ft.lengths[st])/2:ht===2&&(dt=ft.longest-ft.lengths[st]),I=0,N+=j,z=null;continue}if(X=J[Z],!!X){V=X.width,O=X.height;var Pt=X.xOffset+I-B,Dt=X.yOffset+N-Y;if(z!==null){var Gt=X.kerning[U]||0;Pt+=Gt,I+=Gt}if(I+=X.xAdvance+W,z=X,U=Z,!(V===0||O===0||Z===32)){if(tt=s.fontSize/s.fontData.size,ut=0,Nt){Vt.color=0,Vt.tint.topLeft=F,Vt.tint.topRight=G,Vt.tint.bottomLeft=D,Vt.tint.bottomRight=L,Vt.index=pt,Vt.charCode=Z,Vt.x=Pt,Vt.y=Dt,Vt.scale=tt,Vt.rotation=ut,Vt.data=X.data;var Ut=Nt(Vt);Pt=Ut.x,Dt=Ut.y,tt=Ut.scale,ut=Ut.rotation,Ut.color?(F=Ut.color,G=Ut.color,D=Ut.color,L=Ut.color):(F=Ut.tint.topLeft,G=Ut.tint.topRight,D=Ut.tint.bottomLeft,L=Ut.tint.bottomRight),F=o.getTintAppendFloatAlpha(F,u.alpha*s._alphaTL),G=o.getTintAppendFloatAlpha(G,u.alpha*s._alphaTR),D=o.getTintAppendFloatAlpha(D,u.alpha*s._alphaBL),L=o.getTintAppendFloatAlpha(L,u.alpha*s._alphaBR)}Pt*=tt,Dt*=tt,Pt-=s.displayOriginX,Dt-=s.displayOriginY,Pt+=dt,S.applyITRS(Pt,Dt,ut,tt,tt),y.multiply(S,m);var Ot=X.u0,Wt=X.v0,Zt=X.u1,ve=X.v1,Te=V,_t=O,ce=m.e,wt=m.f,Ht=_t*m.c+m.e,he=_t*m.d+m.f,me=Te*m.a+_t*m.c+m.e,te=Te*m.b+_t*m.d+m.f,Me=Te*m.a+m.e,be=Te*m.b+m.f;Lt&&(ce=Math.round(ce),wt=Math.round(wt),Ht=Math.round(Ht),he=Math.round(he),me=Math.round(me),te=Math.round(te),Me=Math.round(Me),be=Math.round(be)),d.shouldFlush(6)&&(d.flush(),b=d.setGameObject(s)),d.batchQuad(s,ce,wt,Ht,he,me,te,Me,be,Ot,Wt,Zt,ve,F,G,D,L,A,P,b)}}}C&&(d.flush(),e.popScissor()),e.pipelines.postBatch(s)}};v.exports=r}),22186:((v,T,t)=>{var h=t(83419),g=t(45319),o=t(31401),a=t(95643),r=t(53048),e=t(61327),s=t(21859),u=t(87841),n=t(18658),l=new h({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Texture,o.Tint,o.Transform,o.Visible,n],initialize:function(d,f,m,y,S,C,E){S===void 0&&(S=""),E===void 0&&(E=0),a.call(this,d,"BitmapText"),this.font=y;var P=this.scene.sys.cache.bitmapFont.get(y);if(!P)throw new Error("Invalid BitmapText key: "+y);this.fontData=P.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=E,this._bounds=r(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=P.fromAtlas,this.setTexture(P.texture,P.frame),this.setPosition(f,m),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(S)},setLeftAlign:function(){return this._align=l.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=l.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=l.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(c){return this._fontSize=c,this._dirty=!0,this},setLetterSpacing:function(c){return c===void 0&&(c=0),this._letterSpacing=c,this._dirty=!0,this},setLineSpacing:function(c){return c===void 0&&(c=0),this.lineSpacing=c,this},setText:function(c){return!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this.text&&(this._text=c.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(c,d,f,m){return c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=.5),this.dropShadowX=c,this.dropShadowY=d,this.dropShadowColor=f,this.dropShadowAlpha=m,this},setCharacterTint:function(c,d,f,m,y,S,C){c===void 0&&(c=0),d===void 0&&(d=1),f===void 0&&(f=!1),m===void 0&&(m=-1),y===void 0&&(y=m,S=m,C=m);var E=this.text.length;d===-1&&(d=E),c<0&&(c=E+c),c=g(c,0,E-1);for(var P=g(c+d,c,E),A=this.charColors,F=c;F<P;F++){var G=A[F];if(m===-1)A[F]=null;else{var D=f?1:0;G?(G.tintEffect=D,G.tintTL=m,G.tintTR=y,G.tintBL=S,G.tintBR=C):A[F]={tintEffect:D,tintTL:m,tintTR:y,tintBL:S,tintBR:C}}}return this},setWordTint:function(c,d,f,m,y,S,C){d===void 0&&(d=1);for(var E=this.getTextBounds(),P=E.words,A=typeof c=="number",F=0,G=0;G<P.length;G++){var D=P[G];if((A&&G===c||!A&&D.word===c)&&(this.setCharacterTint(D.i,D.word.length,f,m,y,S,C),F++,F===d))return this}return this},getTextBounds:function(c){var d=this._bounds;return(this._dirty||c||this.scaleX!==d.scaleX||this.scaleY!==d.scaleY)&&(r(this,c,!0,d),this._dirty=!1),d},getCharacterAt:function(c,d,f){for(var m=this.getLocalPoint(c,d,null,f),y=this.getTextBounds(),S=y.characters,C=new u,E=0;E<S.length;E++){var P=S[E];if(C.setTo(P.x,P.t,P.r-P.x,P.b),C.contains(m.x,m.y))return P}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(c,d,f){d===void 0&&(d=this._fontSize),f===void 0&&(f=this._align);var m=this.scene.sys.cache.bitmapFont.get(c);return m&&(this.font=c,this.fontData=m.data,this._fontSize=d,this._align=f,this.fromAtlas=m.fromAtlas===!0,this.setTexture(m.texture,m.frame),r(this,!1,!0,this._bounds)),this},setMaxWidth:function(c,d){return this._maxWidth=c,this._dirty=!0,d!==void 0&&(this.wordWrapCharCode=d),this},setDisplaySize:function(c,d){this.setScale(1,1),this.getTextBounds(!1);var f=c/this.width,m=d/this.height;return this.setScale(f,m),this},align:{set:function(c){this._align=c,this._dirty=!0},get:function(){return this._align}},text:{set:function(c){this.setText(c)},get:function(){return this._text}},fontSize:{set:function(c){this._fontSize=c,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(c){this._letterSpacing=c,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(c){this._lineSpacing=c,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(c){this._maxWidth=c,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(c){this.setScaleX(1),this.getTextBounds(!1);var d=c/this.width;this.setScaleX(d)},get:function(){return this.width}},displayHeight:{set:function(c){this.setScaleY(1),this.getTextBounds(!1);var d=c/this.height;this.setScaleY(d)},get:function(){return this.height}},toJSON:function(){var c=o.ToJSON(this),d={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return c.data=d,c},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});l.ALIGN_LEFT=0,l.ALIGN_CENTER=1,l.ALIGN_RIGHT=2,l.ParseFromAtlas=e,l.ParseXMLBitmapFont=s,v.exports=l}),37289:((v,T,t)=>{var h=t(20926),g=function(o,a,r,e){var s=a._text,u=s.length,n=o.currentContext;if(!(u===0||!h(o,n,a,r,e))){r.addToRenderList(a);var l=a.fromAtlas?a.frame:a.texture.frames.__BASE,c=a.fontData.chars,d=a.fontData.lineHeight,f=a._letterSpacing,m=a._lineSpacing,y=0,S=0,C=0,E=null,P=0,A=0,F=0,G=0,D=0,L=0,b=null,I=0,N=l.source.image,Z=l.cutX,U=l.cutY,W=a._fontSize/a.fontData.size,X=a._align,V=0,O=0,z=a.getTextBounds(!1);a.maxWidth>0&&(s=z.wrappedText,u=s.length);var B=a._bounds.lines;X===1?O=(B.longest-B.lengths[0])/2:X===2&&(O=B.longest-B.lengths[0]),n.translate(-a.displayOriginX,-a.displayOriginY);for(var Y=r.roundPixels,k=0;k<u;k++){if(C=s.charCodeAt(k),C===10){V++,X===1?O=(B.longest-B.lengths[V])/2:X===2&&(O=B.longest-B.lengths[V]),y=0,S+=d+m,b=null;continue}if(E=c[C],!!E){if(P=Z+E.x,A=U+E.y,F=E.width,G=E.height,D=E.xOffset+y,L=E.yOffset+S,b!==null){var J=E.kerning[I];D+=J!==void 0?J:0}D*=W,L*=W,D+=O,y+=E.xAdvance+f+(J!==void 0?J:0),b=E,I=C,!(F===0||G===0||C===32)&&(Y&&(D=Math.round(D),L=Math.round(L)),n.save(),n.translate(D,L),n.scale(W,W),n.drawImage(N,P,A,F,G,0,0,F,G),n.restore())}}n.restore()}};v.exports=g}),57336:((v,T,t)=>{var h=t(22186),g=t(25305),o=t(44603),a=t(23568),r=t(35154);o.register("bitmapText",function(e,s){e===void 0&&(e={});var u=r(e,"font",""),n=a(e,"text",""),l=a(e,"size",!1),c=r(e,"align",0),d=new h(this.scene,0,0,u,n,l,c);return s!==void 0&&(e.add=s),g(this.scene,d,e),d})}),34914:((v,T,t)=>{var h=t(22186),g=t(39429);g.register("bitmapText",function(o,a,r,e,s,u){return this.displayList.add(new h(this.scene,o,a,r,e,s,u))})}),18658:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(33590),o=t(37289),v.exports={renderWebGL:g,renderCanvas:o}}),33590:((v,T,t)=>{var h=t(3217),g=t(91296),o=t(70554),a=function(r,e,s,u){var n=e._text,l=n.length;if(l!==0){s.addToRenderList(e);var c=r.pipelines.set(e.pipeline,e),d=g(e,s,u).calc;r.pipelines.preBatch(e);var f=s.roundPixels,m=s.alpha,y=e.charColors,S=e.tintFill,C=o.getTintAppendFloatAlpha,E=C(e.tintTopLeft,m*e._alphaTL),P=C(e.tintTopRight,m*e._alphaTR),A=C(e.tintBottomLeft,m*e._alphaBL),F=C(e.tintBottomRight,m*e._alphaBR),G=e.frame.glTexture,D=c.setGameObject(e),L=e.getTextBounds(!1),b,I,N,Z=L.characters,U=e.dropShadowX,W=e.dropShadowY,X=U!==0||W!==0;if(X){var V=e.dropShadowColor,O=e.dropShadowAlpha,z=C(V,m*O*e._alphaTL),B=C(V,m*O*e._alphaTR),Y=C(V,m*O*e._alphaBL),k=C(V,m*O*e._alphaBR);for(b=0;b<Z.length;b++)I=Z[b],N=I.glyph,!(I.code===32||N.width===0||N.height===0)&&h(c,e,I,N,U,W,d,f,z,B,Y,k,1,G,D)}for(b=0;b<Z.length;b++)if(I=Z[b],N=I.glyph,!(I.code===32||N.width===0||N.height===0))if(c.shouldFlush(6)&&(c.flush(),D=c.setGameObject(e)),y[I.i]){var J=y[I.i],j=J.tintEffect,tt=C(J.tintTL,m*e._alphaTL),ut=C(J.tintTR,m*e._alphaTR),ht=C(J.tintBL,m*e._alphaBL),st=C(J.tintBR,m*e._alphaBR);h(c,e,I,N,0,0,d,f,tt,ut,ht,st,j,G,D)}else h(c,e,I,N,0,0,d,f,E,P,A,F,S,G,D);r.pipelines.postBatch(e)}};v.exports=a}),6107:((v,T,t)=>{var h=t(48011),g=t(46590),o=t(83419),a=t(31401),r=t(4327),e=t(95643),s=t(73162),u=new o({Extends:e,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,h],initialize:function(l,c,d,f,m){e.call(this,l,"Blitter"),this.setTexture(f,m),this.setPosition(c,d),this.initPipeline(),this.initPostPipeline(),this.children=new s,this.renderList=[],this.dirty=!1},create:function(n,l,c,d,f){d===void 0&&(d=!0),f===void 0&&(f=this.children.length),c===void 0?c=this.frame:c instanceof r||(c=this.texture.get(c));var m=new g(this,n,l,c,d);return this.children.addAt(m,f,!1),this.dirty=!0,m},createFromCallback:function(n,l,c,d){for(var f=this.createMultiple(l,c,d),m=0;m<f.length;m++){var y=f[m];n.call(this,y,m)}return f},createMultiple:function(n,l,c){l===void 0&&(l=this.frame.name),c===void 0&&(c=!0),Array.isArray(l)||(l=[l]);var d=[],f=this;return l.forEach(function(m){for(var y=0;y<n;y++)d.push(f.create(0,0,m,c))}),d},childCanRender:function(n){return n.visible&&n.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});v.exports=u}),72396:(v=>{var T=function(t,h,g,o){var a=h.getRenderList();if(a.length!==0){var r=t.currentContext,e=g.alpha*h.alpha;if(e!==0){g.addToRenderList(h),r.globalCompositeOperation=t.blendModes[h.blendMode],r.imageSmoothingEnabled=!h.frame.source.scaleMode;var s=h.x-g.scrollX*h.scrollFactorX,u=h.y-g.scrollY*h.scrollFactorY;r.save(),o&&o.copyToContext(r);for(var n=g.roundPixels,l=0;l<a.length;l++){var c=a[l],d=c.flipX||c.flipY,f=c.frame,m=f.canvasData,y=f.x,S=f.y,C=1,E=1,P=c.alpha*e;P!==0&&(r.globalAlpha=P,d?(c.flipX&&(C=-1,y-=m.width),c.flipY&&(E=-1,S-=m.height),m.width>0&&m.height>0&&(r.save(),r.translate(c.x+s,c.y+u),r.scale(C,E),r.drawImage(f.source.image,m.x,m.y,m.width,m.height,y,S,m.width,m.height),r.restore())):(n&&(y=Math.round(y),S=Math.round(S)),m.width>0&&m.height>0&&r.drawImage(f.source.image,m.x,m.y,m.width,m.height,y+c.x+s,S+c.y+u,m.width,m.height)))}r.restore()}}};v.exports=T}),9403:((v,T,t)=>{var h=t(6107),g=t(25305),o=t(44603),a=t(23568);o.register("blitter",function(r,e){r===void 0&&(r={});var s=a(r,"key",null),u=a(r,"frame",null),n=new h(this.scene,0,0,s,u);return e!==void 0&&(r.add=e),g(this.scene,n,r),n})}),12709:((v,T,t)=>{var h=t(6107),g=t(39429);g.register("blitter",function(o,a,r,e){return this.displayList.add(new h(this.scene,o,a,r,e))})}),48011:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(99485),o=t(72396),v.exports={renderWebGL:g,renderCanvas:o}}),99485:((v,T,t)=>{var h=t(61340),g=t(70554),o=new h,a=function(r,e,s,u){var n=e.getRenderList(),l=s.alpha*e.alpha;if(!(n.length===0||l===0)){s.addToRenderList(e);var c=r.pipelines.set(this.pipeline,e),d=s.scrollX*e.scrollFactorX,f=s.scrollY*e.scrollFactorY,m=o.copyFrom(s.matrix);u&&(m.multiplyWithOffset(u,-d,-f),d=0,f=0);var y=e.x-d,S=e.y-f,C=-1,E=!1,P=s.roundPixels;r.pipelines.preBatch(e);for(var A=0;A<n.length;A++){var F=n[A],G=F.frame,D=F.alpha*l;if(D!==0){var L=G.width,b=G.height,I=y+F.x+G.x,N=S+F.y+G.y;F.flipX&&(L*=-1,I+=G.width),F.flipY&&(b*=-1,N+=G.height);var Z=m.setQuad(I,N,I+L,N+b,P),U=g.getTintAppendFloatAlpha(F.tint,D);if(G.sourceIndex!==C){var W=c.setGameObject(e,G);C=G.sourceIndex}c.batchQuad(e,Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],G.u0,G.v0,G.u1,G.v1,U,U,U,U,E,G.glTexture,W)&&(C=-1)}}r.pipelines.postBatch(e)}};v.exports=a}),46590:((v,T,t)=>{var h=t(83419),g=t(4327),o=new h({initialize:function(r,e,s,u,n){this.parent=r,this.x=e,this.y=s,this.frame=u,this.data={},this.tint=16777215,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(a){return a===void 0?this.frame=this.parent.frame:a instanceof g&&a.texture===this.parent.texture?this.frame=a:this.frame=this.parent.texture.get(a),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(a,r,e){return this.x=a,this.y=r,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,e&&this.setFrame(e),this},setPosition:function(a,r){return this.x=a,this.y=r,this},setFlipX:function(a){return this.flipX=a,this},setFlipY:function(a){return this.flipY=a,this},setFlip:function(a,r){return this.flipX=a,this.flipY=r,this},setVisible:function(a){return this.visible=a,this},setAlpha:function(a){return this.alpha=a,this},setTint:function(a){return this.tint=a,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(a){this.parent.dirty|=this._visible!==a,this._visible=a}},alpha:{get:function(){return this._alpha},set:function(a){this.parent.dirty|=this._alpha>0!=a>0,this._alpha=a}}});v.exports=o}),16005:((v,T,t)=>{var h=t(45319),g=2,o={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,r,e,s){return a===void 0&&(a=1),r===void 0?this.alpha=a:(this._alphaTL=h(a,0,1),this._alphaTR=h(r,0,1),this._alphaBL=h(e,0,1),this._alphaBR=h(s,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var r=h(a,0,1);this._alpha=r,this._alphaTL=r,this._alphaTR=r,this._alphaBL=r,this._alphaBR=r,r===0?this.renderFlags&=~g:this.renderFlags|=g}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var r=h(a,0,1);this._alphaTL=r,r!==0&&(this.renderFlags|=g)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var r=h(a,0,1);this._alphaTR=r,r!==0&&(this.renderFlags|=g)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var r=h(a,0,1);this._alphaBL=r,r!==0&&(this.renderFlags|=g)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var r=h(a,0,1);this._alphaBR=r,r!==0&&(this.renderFlags|=g)}}};v.exports=o}),88509:((v,T,t)=>{var h=t(45319),g=2,o={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var r=h(a,0,1);this._alpha=r,r===0?this.renderFlags&=~g:this.renderFlags|=g}}};v.exports=o}),90065:((v,T,t)=>{var h=t(10312),g={_blendMode:h.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(o){typeof o=="string"&&(o=h[o]),o|=0,o>=-1&&(this._blendMode=o)}},setBlendMode:function(o){return this.blendMode=o,this}};v.exports=g}),94215:(v=>{var T={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,h){return this.width=t,this.height=h,this},setDisplaySize:function(t,h){return this.displayWidth=t,this.displayHeight=h,this}};v.exports=T}),61683:(v=>{var T={texture:null,frame:null,isCropped:!1,setCrop:function(t,h,g,o){if(t===void 0)this.isCropped=!1;else if(this.frame){if(typeof t=="number")this.frame.setCropUVs(this._crop,t,h,g,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};v.exports=T}),89272:((v,T,t)=>{var h=t(37105),g={_depth:0,depth:{get:function(){return this._depth},set:function(o){this.displayList&&this.displayList.queueDepthSort(),this._depth=o}},setDepth:function(o){return o===void 0&&(o=0),this.depth=o,this},setToTop:function(){var o=this.getDisplayList();return o&&h.BringToTop(o,this),this},setToBack:function(){var o=this.getDisplayList();return o&&h.SendToBack(o,this),this},setAbove:function(o){var a=this.getDisplayList();return a&&o&&h.MoveAbove(a,this,o),this},setBelow:function(o){var a=this.getDisplayList();return a&&o&&h.MoveBelow(a,this,o),this}};v.exports=g}),47059:((v,T,t)=>{var h=t(83419),g=t(66064),o=t(19133),a=new h({initialize:function(e,s){this.gameObject=e,this.isPost=s,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(r){return r===void 0&&(r=0),this.padding=r,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(r){if(!this.isPost){var e=this.gameObject.scene.sys.renderer;e&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,r!==void 0&&(this.padding=r),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var r=this.list,e=0;e<r.length;e++)r[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(r){var e;if(this.isPost){var s=this.gameObject.getPostPipeline(String(r.type));for(Array.isArray(s)||(s=[s]),e=0;e<s.length;e++){var u=s[e];if(u.controller===r){this.gameObject.removePostPipeline(u),r.destroy();break}}}else{var n=this.list;for(e=0;e<n.length;e++)n[e]===r&&(o(n,e),r.destroy())}return this.gameObject},disable:function(r){return r===void 0&&(r=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,r&&this.clear(),this.gameObject},add:function(r,e){if(this.isPost){var s=String(r.type);this.gameObject.setPostPipeline(s,e);var u=this.gameObject.getPostPipeline(s);if(u)return Array.isArray(u)&&(u=u.pop()),u&&(u.controller=r),r}else return this.enabled||this.enable(),this.list.push(r),r},addGlow:function(r,e,s,u,n,l){return this.add(new g.Glow(this.gameObject,r,e,s,u),{quality:n,distance:l})},addShadow:function(r,e,s,u,n,l,c){return this.add(new g.Shadow(this.gameObject,r,e,s,u,n,l,c))},addPixelate:function(r){return this.add(new g.Pixelate(this.gameObject,r))},addVignette:function(r,e,s,u){return this.add(new g.Vignette(this.gameObject,r,e,s,u))},addShine:function(r,e,s,u){return this.add(new g.Shine(this.gameObject,r,e,s,u))},addBlur:function(r,e,s,u,n,l){return this.add(new g.Blur(this.gameObject,r,e,s,u,n,l))},addGradient:function(r,e,s,u,n,l,c,d){return this.add(new g.Gradient(this.gameObject,r,e,s,u,n,l,c,d))},addBloom:function(r,e,s,u,n,l){return this.add(new g.Bloom(this.gameObject,r,e,s,u,n,l))},addColorMatrix:function(){return this.add(new g.ColorMatrix(this.gameObject))},addCircle:function(r,e,s,u,n){return this.add(new g.Circle(this.gameObject,r,e,s,u,n))},addBarrel:function(r){return this.add(new g.Barrel(this.gameObject,r))},addDisplacement:function(r,e,s){return this.add(new g.Displacement(this.gameObject,r,e,s))},addWipe:function(r,e,s){return this.add(new g.Wipe(this.gameObject,r,e,s))},addReveal:function(r,e,s){return this.add(new g.Wipe(this.gameObject,r,e,s,!0))},addBokeh:function(r,e,s){return this.add(new g.Bokeh(this.gameObject,r,e,s))},addTiltShift:function(r,e,s,u,n,l){return this.add(new g.Bokeh(this.gameObject,r,e,s,!0,u,n,l))},destroy:function(){this.clear(),this.gameObject=null}});v.exports=a}),54434:(v=>{var T={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,h){return this.flipX=t,this.flipY=h,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};v.exports=T}),8004:((v,T,t)=>{var h=t(87841),g=t(11520),o=t(26099),a={prepareBoundsOutput:function(r,e){if(e===void 0&&(e=!1),this.rotation!==0&&g(r,this.x,this.y,this.rotation),e&&this.parentContainer){var s=this.parentContainer.getBoundsTransformMatrix();s.transformPoint(r.x,r.y,r)}return r},getCenter:function(r,e){return r===void 0&&(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getTopLeft:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getTopCenter:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getTopRight:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,e)},getLeftCenter:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getRightCenter:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,e)},getBottomLeft:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBottomCenter:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBottomRight:function(r,e){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,e)},getBounds:function(r){r===void 0&&(r=new h);var e,s,u,n,l,c,d,f;if(this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(r),m.transformPoint(r.x,r.y,r),e=r.x,s=r.y,this.getTopRight(r),m.transformPoint(r.x,r.y,r),u=r.x,n=r.y,this.getBottomLeft(r),m.transformPoint(r.x,r.y,r),l=r.x,c=r.y,this.getBottomRight(r),m.transformPoint(r.x,r.y,r),d=r.x,f=r.y}else this.getTopLeft(r),e=r.x,s=r.y,this.getTopRight(r),u=r.x,n=r.y,this.getBottomLeft(r),l=r.x,c=r.y,this.getBottomRight(r),d=r.x,f=r.y;return r.x=Math.min(e,u,l,d),r.y=Math.min(s,n,c,f),r.width=Math.max(e,u,l,d)-r.x,r.height=Math.max(s,n,c,f)-r.y,r}};v.exports=a}),8573:((v,T,t)=>{var h=t(6858),g=t(80661),o={mask:null,setMask:function(a){return this.mask=a,this},clearMask:function(a){return a===void 0&&(a=!1),a&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(a,r,e,s,u){return a===void 0&&(this.texture||this.shader||this.geom)&&(a=this),new h(this.scene,a,r,e,s,u)},createGeometryMask:function(a){return a===void 0&&(this.type==="Graphics"||this.geom)&&(a=this),new g(this.scene,a)}};v.exports=o}),27387:(v=>{var T={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,h){return t===void 0&&(t=.5),h===void 0&&(h=t),this.originX=t,this.originY=h,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(t,h){return t===void 0&&(t=0),h===void 0&&(h=t),this.displayOriginX=t,this.displayOriginY=h,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};v.exports=T}),37640:((v,T,t)=>{var h=t(39506),g=t(57355),o=t(35154),a=t(86353),r=t(26099),e={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(s,u){u===void 0&&(u=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=s,u&&this.startFollow(u),this},setRotateToPath:function(s,u){return u===void 0&&(u=0),this.rotateToPath=s,this.pathRotationOffset=u,this},isFollowing:function(){var s=this.pathTween;return s&&s.isPlaying()},startFollow:function(s,u){s===void 0&&(s={}),u===void 0&&(u=0);var n=this.pathTween;n&&n.isPlaying()&&n.stop(),typeof s=="number"&&(s={duration:s}),s.from=o(s,"from",0),s.to=o(s,"to",1);var l=g(s,"positionOnPath",!1);this.rotateToPath=g(s,"rotateToPath",!1),this.pathRotationOffset=o(s,"rotationOffset",0);var c=o(s,"startAt",u);if(c&&(s.onStart=function(f){var m=f.data[0];m.progress=c,m.elapsed=m.duration*c;var y=m.ease(m.progress);m.current=m.start+(m.end-m.start)*y,m.setTargetValue()}),this.pathOffset||(this.pathOffset=new r(this.x,this.y)),this.pathVector||(this.pathVector=new r),this.pathDelta||(this.pathDelta=new r),this.pathDelta.reset(),s.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(s),this.path.getStartPoint(this.pathOffset),l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var d=this.path.getPoint(.1);this.rotation=Math.atan2(d.y-this.y,d.x-this.x)+h(this.pathRotationOffset)}return this.pathConfig=s,this},pauseFollow:function(){var s=this.pathTween;return s&&s.isPlaying()&&s.pause(),this},resumeFollow:function(){var s=this.pathTween;return s&&s.isPaused()&&s.resume(),this},stopFollow:function(){var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this},pathUpdate:function(){var s=this.pathTween;if(s&&s.data){var u=s.data[0],n=this.pathDelta,l=this.pathVector;if(n.copy(l).negate(),u.state===a.COMPLETE){this.path.getPoint(u.end,l),n.add(l),l.add(this.pathOffset),this.setPosition(l.x,l.y);return}else if(u.state!==a.PLAYING_FORWARD&&u.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(s.getValue(),l),n.add(l),l.add(this.pathOffset);var c=this.x,d=this.y;this.setPosition(l.x,l.y);var f=this.x-c,m=this.y-d;if(f===0&&m===0)return;if(u.state!==this._prevDirection){this._prevDirection=u.state;return}this.rotateToPath&&(this.rotation=Math.atan2(m,f)+h(this.pathRotationOffset))}}};v.exports=e}),72699:((v,T,t)=>{var h=t(62644),g={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(o){this.pipelineData={};var a=this.scene.sys.renderer;if(!a)return!1;var r=a.pipelines;if(r){o===void 0&&(o=r.default);var e=r.get(o);if(e)return this.defaultPipeline=e,this.pipeline=e,!0}return!1},setPipeline:function(o,a,r){var e=this.scene.sys.renderer;if(!e)return this;var s=e.pipelines;if(s){var u=s.get(o);u&&(this.pipeline=u),a&&(this.pipelineData=r?h(a):a)}return this},setPipelineData:function(o,a){var r=this.pipelineData;return a===void 0?delete r[o]:r[o]=a,this},resetPipeline:function(o){return o===void 0&&(o=!1),this.pipeline=this.defaultPipeline,o&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};v.exports=g}),17581:((v,T,t)=>{var h=t(62644),g=t(47059),o=t(19133),a={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(r){this.postPipelines=[],this.postPipelineData={},this.postFX=new g(this,!0),r&&(this.preFX=new g(this,!1))},setPostPipeline:function(r,e,s){var u=this.scene.sys.renderer;if(!u)return this;var n=u.pipelines;if(n){Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var c=n.getPostPipeline(r[l],this,e);c&&this.postPipelines.push(c)}e&&(this.postPipelineData=s?h(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(r,e){var s=this.postPipelineData;return e===void 0?delete s[r]:s[r]=e,this},getPostPipeline:function(r){for(var e=typeof r=="string",s=this.postPipelines,u=[],n=0;n<s.length;n++){var l=s[n];(e&&l.name===r||!e&&l instanceof r)&&u.push(l)}return u.length===1?u[0]:u},resetPostPipeline:function(r){r===void 0&&(r=!1);for(var e=this.postPipelines,s=0;s<e.length;s++)e[s].destroy();this.postPipelines=[],this.hasPostPipeline=!1,r&&(this.postPipelineData={})},removePostPipeline:function(r){for(var e=typeof r=="string",s=this.postPipelines,u=s.length-1;u>=0;u--){var n=s[u];(e&&n.name===r||!e&&n===r)&&(n.destroy(),o(s,u))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};v.exports=a}),80227:(v=>{var T={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,h){return h===void 0&&(h=t),this.scrollFactorX=t,this.scrollFactorY=h,this}};v.exports=T}),16736:(v=>{var T={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=this.width,h.hitArea.height=this.height),this},setSize:function(t,h){return this.width=t,this.height=h,this},setDisplaySize:function(t,h){return this.displayWidth=t,this.displayHeight=h,this}};v.exports=T}),37726:((v,T,t)=>{var h=t(4327),g=8,o={texture:null,frame:null,isCropped:!1,setTexture:function(a,r,e,s){return this.texture=this.scene.sys.textures.get(a),this.setFrame(r,e,s)},setFrame:function(a,r,e){return r===void 0&&(r=!0),e===void 0&&(e=!0),a instanceof h?(this.texture=this.scene.sys.textures.get(a.texture.key),this.frame=a):this.frame=this.texture.get(a),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&e&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};v.exports=o}),79812:((v,T,t)=>{var h=t(4327),g=8,o={texture:null,frame:null,isCropped:!1,setCrop:function(a,r,e,s){if(a===void 0)this.isCropped=!1;else if(this.frame){if(typeof a=="number")this.frame.setCropUVs(this._crop,a,r,e,s,this.flipX,this.flipY);else{var u=a;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(a,r){return this.texture=this.scene.sys.textures.get(a),this.setFrame(r)},setFrame:function(a,r,e){return r===void 0&&(r=!0),e===void 0&&(e=!0),a instanceof h?(this.texture=this.scene.sys.textures.get(a.texture.key),this.frame=a):this.frame=this.texture.get(a),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&e&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};v.exports=o}),27472:(v=>{var T={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,h,g,o){return t===void 0&&(t=16777215),h===void 0&&(h=t,g=t,o=t),this.tintTopLeft=t,this.tintTopRight=h,this.tintBottomLeft=g,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(t,h,g,o){return this.setTint(t,h,g,o),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};v.exports=T}),53774:(v=>{var T=function(t){var h={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(h.textureKey=t.texture.key,h.frameKey=t.frame.name),h};v.exports=T}),16901:((v,T,t)=>{var h=t(36383),g=t(61340),o=t(85955),a=t(86554),r=t(30954),e=t(26099),s=4,u={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(n){this._scaleX=n,this._scaleY=n,n===0?this.renderFlags&=~s:this.renderFlags|=s}},scaleX:{get:function(){return this._scaleX},set:function(n){this._scaleX=n,n===0?this.renderFlags&=~s:this._scaleY!==0&&(this.renderFlags|=s)}},scaleY:{get:function(){return this._scaleY},set:function(n){this._scaleY=n,n===0?this.renderFlags&=~s:this._scaleX!==0&&(this.renderFlags|=s)}},angle:{get:function(){return r(this._rotation*h.RAD_TO_DEG)},set:function(n){this.rotation=r(n)*h.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(n){this._rotation=a(n)}},setPosition:function(n,l,c,d){return n===void 0&&(n=0),l===void 0&&(l=n),c===void 0&&(c=0),d===void 0&&(d=0),this.x=n,this.y=l,this.z=c,this.w=d,this},copyPosition:function(n){return n.x!==void 0&&(this.x=n.x),n.y!==void 0&&(this.y=n.y),n.z!==void 0&&(this.z=n.z),n.w!==void 0&&(this.w=n.w),this},setRandomPosition:function(n,l,c,d){return n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),this.x=n+Math.random()*c,this.y=l+Math.random()*d,this},setRotation:function(n){return n===void 0&&(n=0),this.rotation=n,this},setAngle:function(n){return n===void 0&&(n=0),this.angle=n,this},setScale:function(n,l){return n===void 0&&(n=1),l===void 0&&(l=n),this.scaleX=n,this.scaleY=l,this},setX:function(n){return n===void 0&&(n=0),this.x=n,this},setY:function(n){return n===void 0&&(n=0),this.y=n,this},setZ:function(n){return n===void 0&&(n=0),this.z=n,this},setW:function(n){return n===void 0&&(n=0),this.w=n,this},getLocalTransformMatrix:function(n){return n===void 0&&(n=new g),n.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(n,l){n===void 0&&(n=new g);var c=this.parentContainer;if(!c)return this.getLocalTransformMatrix(n);var d=!1;for(l||(l=new g,d=!0),n.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);c;)l.applyITRS(c.x,c.y,c._rotation,c._scaleX,c._scaleY),l.multiply(n,n),c=c.parentContainer;return d&&l.destroy(),n},getLocalPoint:function(n,l,c,d){c||(c=new e),d||(d=this.scene.sys.cameras.main);var f=d.scrollX,m=d.scrollY,y=n+f*this.scrollFactorX-f,S=l+m*this.scrollFactorY-m;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,S,c):o(y,S,this.x,this.y,this.rotation,this.scaleX,this.scaleY,c),this._originComponent&&(c.x+=this._displayOriginX,c.y+=this._displayOriginY),c},getWorldPoint:function(n,l,c){n===void 0&&(n=new e);var d=this.parentContainer;if(!d)return n.x=this.x,n.y=this.y,n;var f=this.getWorldTransformMatrix(l,c);return n.x=f.tx,n.y=f.ty,n},getParentRotation:function(){for(var n=0,l=this.parentContainer;l;)n+=l.rotation,l=l.parentContainer;return n}};v.exports=u}),61340:((v,T,t)=>{var h=t(83419),g=t(36383),o=t(26099),a=new h({initialize:function(e,s,u,n,l,c){e===void 0&&(e=1),s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n=1),l===void 0&&(l=0),c===void 0&&(c=0),this.matrix=new Float32Array([e,s,u,n,l,c,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(r){this.matrix[0]=r}},b:{get:function(){return this.matrix[1]},set:function(r){this.matrix[1]=r}},c:{get:function(){return this.matrix[2]},set:function(r){this.matrix[2]=r}},d:{get:function(){return this.matrix[3]},set:function(r){this.matrix[3]=r}},e:{get:function(){return this.matrix[4]},set:function(r){this.matrix[4]=r}},f:{get:function(){return this.matrix[5]},set:function(r){this.matrix[5]=r}},tx:{get:function(){return this.matrix[4]},set:function(r){this.matrix[4]=r}},ty:{get:function(){return this.matrix[5]},set:function(r){this.matrix[5]=r}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var r=this.matrix,e=r[0],s=r[1],u=r[2],n=r[3];return e||s?s>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):u||n?g.TAU-(n>0?Math.acos(-u/this.scaleY):-Math.acos(u/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var r=this.matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,this},translate:function(r,e){var s=this.matrix;return s[4]=s[0]*r+s[2]*e+s[4],s[5]=s[1]*r+s[3]*e+s[5],this},scale:function(r,e){var s=this.matrix;return s[0]*=r,s[1]*=r,s[2]*=e,s[3]*=e,this},rotate:function(r){var e=Math.sin(r),s=Math.cos(r),u=this.matrix,n=u[0],l=u[1],c=u[2],d=u[3];return u[0]=n*s+c*e,u[1]=l*s+d*e,u[2]=n*-e+c*s,u[3]=l*-e+d*s,this},multiply:function(r,e){var s=this.matrix,u=r.matrix,n=s[0],l=s[1],c=s[2],d=s[3],f=s[4],m=s[5],y=u[0],S=u[1],C=u[2],E=u[3],P=u[4],A=u[5],F=e===void 0?s:e.matrix;return F[0]=y*n+S*c,F[1]=y*l+S*d,F[2]=C*n+E*c,F[3]=C*l+E*d,F[4]=P*n+A*c+f,F[5]=P*l+A*d+m,F},multiplyWithOffset:function(r,e,s){var u=this.matrix,n=r.matrix,l=u[0],c=u[1],d=u[2],f=u[3],m=u[4],y=u[5],S=e*l+s*d+m,C=e*c+s*f+y,E=n[0],P=n[1],A=n[2],F=n[3],G=n[4],D=n[5];return u[0]=E*l+P*d,u[1]=E*c+P*f,u[2]=A*l+F*d,u[3]=A*c+F*f,u[4]=G*l+D*d+S,u[5]=G*c+D*f+C,this},transform:function(r,e,s,u,n,l){var c=this.matrix,d=c[0],f=c[1],m=c[2],y=c[3],S=c[4],C=c[5];return c[0]=r*d+e*m,c[1]=r*f+e*y,c[2]=s*d+u*m,c[3]=s*f+u*y,c[4]=n*d+l*m+S,c[5]=n*f+l*y+C,this},transformPoint:function(r,e,s){s===void 0&&(s={x:0,y:0});var u=this.matrix,n=u[0],l=u[1],c=u[2],d=u[3],f=u[4],m=u[5];return s.x=r*n+e*c+f,s.y=r*l+e*d+m,s},invert:function(){var r=this.matrix,e=r[0],s=r[1],u=r[2],n=r[3],l=r[4],c=r[5],d=e*n-s*u;return r[0]=n/d,r[1]=-s/d,r[2]=-u/d,r[3]=e/d,r[4]=(u*c-n*l)/d,r[5]=-(e*c-s*l)/d,this},copyFrom:function(r){var e=this.matrix;return e[0]=r.a,e[1]=r.b,e[2]=r.c,e[3]=r.d,e[4]=r.e,e[5]=r.f,this},copyFromArray:function(r){var e=this.matrix;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],this},copyToContext:function(r){var e=this.matrix;return r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),r},setToContext:function(r){return r.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),r},copyToArray:function(r){var e=this.matrix;return r===void 0?r=[e[0],e[1],e[2],e[3],e[4],e[5]]:(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5]),r},setTransform:function(r,e,s,u,n,l){var c=this.matrix;return c[0]=r,c[1]=e,c[2]=s,c[3]=u,c[4]=n,c[5]=l,this},decomposeMatrix:function(){var r=this.decomposedMatrix,e=this.matrix,s=e[0],u=e[1],n=e[2],l=e[3],c=s*l-u*n;if(r.translateX=e[4],r.translateY=e[5],s||u){var d=Math.sqrt(s*s+u*u);r.rotation=u>0?Math.acos(s/d):-Math.acos(s/d),r.scaleX=d,r.scaleY=c/d}else if(n||l){var f=Math.sqrt(n*n+l*l);r.rotation=Math.PI*.5-(l>0?Math.acos(-n/f):-Math.acos(n/f)),r.scaleX=c/f,r.scaleY=f}else r.rotation=0,r.scaleX=0,r.scaleY=0;return r},applyITRS:function(r,e,s,u,n){var l=this.matrix,c=Math.sin(s),d=Math.cos(s);return l[4]=r,l[5]=e,l[0]=d*u,l[1]=c*u,l[2]=-c*n,l[3]=d*n,this},applyInverse:function(r,e,s){s===void 0&&(s=new o);var u=this.matrix,n=u[0],l=u[1],c=u[2],d=u[3],f=u[4],m=u[5],y=1/(n*d+c*-l);return s.x=d*y*r+-c*y*e+(m*c-f*d)*y,s.y=n*y*e+-l*y*r+(-m*n+f*l)*y,s},setQuad:function(r,e,s,u,n,l){n===void 0&&(n=!1),l===void 0&&(l=this.quad);var c=this.matrix,d=c[0],f=c[1],m=c[2],y=c[3],S=c[4],C=c[5],E=r*d+e*m+S,P=r*f+e*y+C,A=r*d+u*m+S,F=r*f+u*y+C,G=s*d+u*m+S,D=s*f+u*y+C,L=s*d+e*m+S,b=s*f+e*y+C;if(n){var I=Math.floor(E+.5),N=Math.floor(P+.5),Z=I-E,U=N-P;l[0]=I,l[1]=N,l[2]=A+Z,l[3]=F+U,l[4]=G+Z,l[5]=D+U,l[6]=L+Z,l[7]=b+U}else l[0]=E,l[1]=P,l[2]=A,l[3]=F,l[4]=G,l[5]=D,l[6]=L,l[7]=b;return l},getX:function(r,e){return r*this.a+e*this.c+this.e},getY:function(r,e){return r*this.b+e*this.d+this.f},getXRound:function(r,e,s){var u=this.getX(r,e);return s&&(u=Math.floor(u+.5)),u},getYRound:function(r,e,s){var u=this.getY(r,e);return s&&(u=Math.floor(u+.5)),u},getCSSMatrix:function(){var r=this.matrix;return"matrix("+r[0]+","+r[1]+","+r[2]+","+r[3]+","+r[4]+","+r[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});v.exports=a}),59715:(v=>{var T=1,t={_visible:!0,visible:{get:function(){return this._visible},set:function(h){h?(this._visible=!0,this.renderFlags|=T):(this._visible=!1,this.renderFlags&=~T)}},setVisible:function(h){return this.visible=h,this}};v.exports=t}),31401:((v,T,t)=>{v.exports={Alpha:t(16005),AlphaSingle:t(88509),BlendMode:t(90065),ComputedSize:t(94215),Crop:t(61683),Depth:t(89272),Flip:t(54434),FX:t(47059),GetBounds:t(8004),Mask:t(8573),Origin:t(27387),PathFollower:t(37640),Pipeline:t(72699),PostPipeline:t(17581),ScrollFactor:t(80227),Size:t(16736),Texture:t(37726),TextureCrop:t(79812),Tint:t(27472),ToJSON:t(53774),Transform:t(16901),TransformMatrix:t(61340),Visible:t(59715)}}),31559:((v,T,t)=>{var h=t(37105),g=t(10312),o=t(83419),a=t(31401),r=t(51708),e=t(95643),s=t(87841),u=t(29959),n=t(36899),l=t(26099),c=new a.TransformMatrix,d=new o({Extends:e,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.PostPipeline,a.Transform,a.Visible,u],initialize:function(m,y,S,C){e.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(y,S),this.setBlendMode(g.SKIP_CHECK),C&&this.add(C)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(f){return f===void 0&&(f=!0),this.exclusive=f,this},getBounds:function(f){if(f===void 0&&(f=new s),f.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),y=m.transformPoint(this.x,this.y);f.setTo(y.x,y.y,0,0)}if(this.list.length>0){var S=this.list,C=new s,E=!1;f.setEmpty();for(var P=0;P<S.length;P++){var A=S[P];A.getBounds&&(A.getBounds(C),E?n(C,f,f):(f.setTo(C.x,C.y,C.width,C.height),E=!0))}}return f},addHandler:function(f){f.once(r.DESTROY,this.onChildDestroyed,this),this.exclusive&&(f.parentContainer&&f.parentContainer.remove(f),f.parentContainer=this,f.removeFromDisplayList(),f.addedToScene())},removeHandler:function(f){f.off(r.DESTROY,this.remove,this),this.exclusive&&(f.parentContainer=null,f.removedFromScene(),f.addToDisplayList())},pointToContainer:function(f,m){m===void 0&&(m=new l),this.parentContainer?this.parentContainer.pointToContainer(f,m):(m.x=f.x,m.y=f.y);var y=c;return y.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),y.invert(),y.transformPoint(f.x,f.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(c,this.localTransform)},add:function(f){return h.Add(this.list,f,this.maxSize,this.addHandler,this),this},addAt:function(f,m){return h.AddAt(this.list,f,m,this.maxSize,this.addHandler,this),this},getAt:function(f){return this.list[f]},getIndex:function(f){return this.list.indexOf(f)},sort:function(f,m){return f?(m===void 0&&(m=function(y,S){return y[f]-S[f]}),h.StableSort(this.list,m),this):this},getByName:function(f){return h.GetFirst(this.list,"name",f)},getRandom:function(f,m){return h.GetRandom(this.list,f,m)},getFirst:function(f,m,y,S){return h.GetFirst(this.list,f,m,y,S)},getAll:function(f,m,y,S){return h.GetAll(this.list,f,m,y,S)},count:function(f,m,y,S){return h.CountAllMatching(this.list,f,m,y,S)},swap:function(f,m){return h.Swap(this.list,f,m),this},moveTo:function(f,m){return h.MoveTo(this.list,f,m),this},moveAbove:function(f,m){return h.MoveAbove(this.list,f,m),this},moveBelow:function(f,m){return h.MoveBelow(this.list,f,m),this},remove:function(f,m){var y=h.Remove(this.list,f,this.removeHandler,this);if(m&&y){Array.isArray(y)||(y=[y]);for(var S=0;S<y.length;S++)y[S].destroy()}return this},removeAt:function(f,m){var y=h.RemoveAt(this.list,f,this.removeHandler,this);return m&&y&&y.destroy(),this},removeBetween:function(f,m,y){var S=h.RemoveBetween(this.list,f,m,this.removeHandler,this);if(y)for(var C=0;C<S.length;C++)S[C].destroy();return this},removeAll:function(f){var m=this.list;if(f){for(var y=0;y<m.length;y++)m[y]&&m[y].scene&&(m[y].off(r.DESTROY,this.onChildDestroyed,this),m[y].destroy());this.list=[]}else h.RemoveBetween(m,0,m.length,this.removeHandler,this);return this},bringToTop:function(f){return h.BringToTop(this.list,f),this},sendToBack:function(f){return h.SendToBack(this.list,f),this},moveUp:function(f){return h.MoveUp(this.list,f),this},moveDown:function(f){return h.MoveDown(this.list,f),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(f,m,y){var S=h.Replace(this.list,f,m);return S&&(this.addHandler(m),this.removeHandler(f),y&&f.destroy()),this},exists:function(f){return this.list.indexOf(f)>-1},setAll:function(f,m,y,S){return h.SetAll(this.list,f,m,y,S),this},each:function(f,m){var y=[null],S,C=this.list.slice(),E=C.length;for(S=2;S<arguments.length;S++)y.push(arguments[S]);for(S=0;S<E;S++)y[0]=C[S],f.apply(m,y);return this},iterate:function(f,m){var y=[null],S;for(S=2;S<arguments.length;S++)y.push(arguments[S]);for(S=0;S<this.list.length;S++)y[0]=this.list[S],f.apply(m,y);return this},setScrollFactor:function(f,m,y){return m===void 0&&(m=f),y===void 0&&(y=!1),this.scrollFactorX=f,this.scrollFactorY=m,y&&(h.SetAll(this.list,"scrollFactorX",f),h.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(f){h.Remove(this.list,f),this.exclusive&&(f.parentContainer=null,f.removedFromScene())}});v.exports=d}),53584:(v=>{var T=function(t,h,g,o){g.addToRenderList(h);var a=h.list;if(a.length!==0){var r=h.localTransform;o?(r.loadIdentity(),r.multiply(o),r.translate(h.x,h.y),r.rotate(h.rotation),r.scale(h.scaleX,h.scaleY)):r.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var e=h.blendMode!==-1;e||t.setBlendMode(0);var s=h._alpha,u=h.scrollFactorX,n=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(t,null,g);for(var l=0;l<a.length;l++){var c=a[l];if(c.willRender(g)){var d=c.alpha,f=c.scrollFactorX,m=c.scrollFactorY;!e&&c.blendMode!==t.currentBlendMode&&t.setBlendMode(c.blendMode),c.setScrollFactor(f*u,m*n),c.setAlpha(d*s),c.renderCanvas(t,c,g,r),c.setAlpha(d),c.setScrollFactor(f,m)}}h.mask&&h.mask.postRenderCanvas(t)}};v.exports=T}),77143:((v,T,t)=>{var h=t(25305),g=t(31559),o=t(44603),a=t(23568),r=t(95540);o.register("container",function(e,s){e===void 0&&(e={});var u=a(e,"x",0),n=a(e,"y",0),l=r(e,"children",null),c=new g(this.scene,u,n,l);return s!==void 0&&(e.add=s),h(this.scene,c,e),c})}),24961:((v,T,t)=>{var h=t(31559),g=t(39429);g.register("container",function(o,a,r){return this.displayList.add(new h(this.scene,o,a,r))})}),29959:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(72249),o=t(53584),v.exports={renderWebGL:g,renderCanvas:o}}),72249:(v=>{var T=function(t,h,g,o){g.addToRenderList(h);var a=h.list,r=a.length;if(r!==0){var e=h.localTransform;o?(e.loadIdentity(),e.multiply(o),e.translate(h.x,h.y),e.rotate(h.rotation),e.scale(h.scaleX,h.scaleY)):e.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),t.pipelines.preBatch(h);var s=h.blendMode!==-1;s||t.setBlendMode(0);for(var u=h.alpha,n=h.scrollFactorX,l=h.scrollFactorY,c=0;c<r;c++){var d=a[c];if(d.willRender(g)){var f,m,y,S;if(d.alphaTopLeft!==void 0)f=d.alphaTopLeft,m=d.alphaTopRight,y=d.alphaBottomLeft,S=d.alphaBottomRight;else{var C=d.alpha;f=C,m=C,y=C,S=C}var E=d.scrollFactorX,P=d.scrollFactorY;!s&&d.blendMode!==t.currentBlendMode&&t.setBlendMode(d.blendMode);var A=d.mask;A&&A.preRenderWebGL(t,d,g);var F=d.type;F!==t.currentType&&(t.newType=!0,t.currentType=F),t.nextTypeMatch=c<r-1?a[c+1].type===t.currentType:!1,d.setScrollFactor(E*n,P*l),d.setAlpha(f*u,m*u,y*u,S*u),d.renderWebGL(t,d,g,e,h),d.setAlpha(f,m,y,S),d.setScrollFactor(E,P),A&&A.postRenderWebGL(t,g),t.newType=!1}}t.pipelines.postBatch(h)}};v.exports=T}),47407:(v=>{v.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}),3069:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(441),a=t(95643),r=t(41212),e=t(35846),s=t(44594),u=t(61369),n=new h({Extends:a,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Origin,g.ScrollFactor,g.Transform,g.Visible,o],initialize:function(c,d,f,m,y,S){if(a.call(this,c,"DOMElement"),this.parent=c.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=c.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(d,f),typeof m=="string"?m[0]==="#"?this.setElement(m.substr(1),y,S):this.createElement(m,y,S):m&&this.setElement(m,y,S),c.sys.events.on(s.SLEEP,this.handleSceneEvent,this),c.sys.events.on(s.WAKE,this.handleSceneEvent,this),c.sys.events.on(s.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(l){var c=this.node,d=c.style;c&&(d.display=l.settings.visible?"block":"none")},setSkew:function(l,c){return l===void 0&&(l=0),c===void 0&&(c=l),this.skewX=l,this.skewY=c,this},setPerspective:function(l){return this.parent.style.perspective=l+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=l.split(" ");for(var c=0;c<l.length;c++)this.node.addEventListener(l[c],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var c=0;c<l.length;c++)this.node.removeEventListener(l[c],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,c,d){return this.setElement(document.createElement(l),c,d)},setElement:function(l,c,d){this.removeElement();var f;if(typeof l=="string"?(l[0]==="#"&&(l=l.substr(1)),f=document.getElementById(l)):typeof l=="object"&&l.nodeType===1&&(f=l),!f)return this;if(this.node=f,c&&r(c))for(var m in c)f.style[m]=c[m];else typeof c=="string"&&(f.style=c);return f.style.zIndex="0",f.style.display="inline",f.style.position="absolute",f.phaser=this,this.parent.appendChild(f),d&&(f.innerText=d),this.updateSize()},createFromCache:function(l,c){var d=this.cache.get(l);return d&&this.createFromHTML(d,c),this},createFromHTML:function(l,c){c===void 0&&(c="div"),this.removeElement();var d=document.createElement(c);return this.node=d,d.style.zIndex="0",d.style.display="inline",d.style.position="absolute",d.phaser=this,this.parent.appendChild(d),d.innerHTML=l,this.updateSize()},removeElement:function(){return this.node&&(e(this.node),this.node=null),this},updateSize:function(){var l=this.node;return this.width=l.clientWidth,this.height=l.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(l,c){if(this.node){for(var d=this.node.querySelectorAll("*"),f=0;f<d.length;f++)if(d[f][l]===c)return d[f]}return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){return this.node&&(this.node.className=l,this.updateSize()),this},setText:function(l){return this.node&&(this.node.innerText=l,this.updateSize()),this},setHTML:function(l){return this.node&&(this.node.innerHTML=l,this.updateSize()),this},preRender:function(){var l=this.parentContainer,c=this.node;c&&l&&!l.willRender()&&(c.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(s.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(s.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(s.PRE_RENDER,this.preRender,this)}});v.exports=n}),49381:((v,T,t)=>{var h=t(47407),g=t(95643),o=t(61340),a=new o,r=new o,e=new o,s=function(u,n,l,c){if(n.node){var d=n.node.style,f=n.scene.sys.settings;if(!d||!f.visible||g.RENDER_MASK!==n.renderFlags||n.cameraFilter!==0&&n.cameraFilter&l.id||n.parentContainer&&!n.parentContainer.willRender()){d.display="none";return}var m=n.parentContainer,y=l.alpha*n.alpha;m&&(y*=m.alpha);var S=a,C=r,E=e,P=0,A=0,F="0%",G="0%";c?(P=n.width*n.scaleX*n.originX,A=n.height*n.scaleY*n.originY,C.applyITRS(n.x-P,n.y-A,n.rotation,n.scaleX,n.scaleY),S.copyFrom(l.matrix),S.multiplyWithOffset(c,-l.scrollX*n.scrollFactorX,-l.scrollY*n.scrollFactorY),C.e=n.x-P,C.f=n.y-A,S.multiply(C,E)):(P=n.width*n.originX,A=n.height*n.originY,C.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),S.copyFrom(l.matrix),F=100*n.originX+"%",G=100*n.originY+"%",C.e-=l.scrollX*n.scrollFactorX,C.f-=l.scrollY*n.scrollFactorY,S.multiply(C,E),E.e-=P,E.f-=A),n.transformOnly||(d.display="block",d.opacity=y,d.zIndex=n._depth,d.pointerEvents=n.pointerEvents,d.mixBlendMode=h[n._blendMode]),d.transform=E.getCSSMatrix()+" skew("+n.skewX+"rad, "+n.skewY+"rad) rotate3d("+n.rotate3d.x+","+n.rotate3d.y+","+n.rotate3d.z+","+n.rotate3d.w+n.rotate3dAngle+")",d.transformOrigin=F+" "+G}};v.exports=s}),2611:((v,T,t)=>{var h=t(3069),g=t(39429);g.register("dom",function(o,a,r,e,s){var u=new h(this.scene,o,a,r,e,s);return this.displayList.add(u),u})}),441:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(49381),o=t(49381),v.exports={renderWebGL:g,renderCanvas:o}}),62980:(v=>{v.exports="addedtoscene"}),41337:(v=>{v.exports="destroy"}),44947:(v=>{v.exports="removedfromscene"}),49358:(v=>{v.exports="complete"}),35163:(v=>{v.exports="created"}),97249:(v=>{v.exports="error"}),19483:(v=>{v.exports="locked"}),56059:(v=>{v.exports="loop"}),26772:(v=>{v.exports="metadata"}),64437:(v=>{v.exports="playing"}),83411:(v=>{v.exports="play"}),75780:(v=>{v.exports="seeked"}),67799:(v=>{v.exports="seeking"}),63500:(v=>{v.exports="stalled"}),55541:(v=>{v.exports="stop"}),53208:(v=>{v.exports="textureready"}),4992:(v=>{v.exports="unlocked"}),12:(v=>{v.exports="unsupported"}),51708:((v,T,t)=>{v.exports={ADDED_TO_SCENE:t(62980),DESTROY:t(41337),REMOVED_FROM_SCENE:t(44947),VIDEO_COMPLETE:t(49358),VIDEO_CREATED:t(35163),VIDEO_ERROR:t(97249),VIDEO_LOCKED:t(19483),VIDEO_LOOP:t(56059),VIDEO_METADATA:t(26772),VIDEO_PLAY:t(83411),VIDEO_PLAYING:t(64437),VIDEO_SEEKED:t(75780),VIDEO_SEEKING:t(67799),VIDEO_STALLED:t(63500),VIDEO_STOP:t(55541),VIDEO_TEXTURE:t(53208),VIDEO_UNLOCKED:t(4992),VIDEO_UNSUPPORTED:t(12)}}),42421:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(64993),r=new h({Extends:o,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.Origin,g.ScrollFactor,g.Size,g.Texture,g.Tint,g.Transform,g.Visible,a],initialize:function(s){o.call(this,s,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});v.exports=r}),70217:(()=>{}),56315:((v,T,t)=>{var h=t(42421),g=t(39429);g.register("extern",function(){var o=new h(this.scene);return this.displayList.add(o),o})}),64993:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(80287),o=t(70217),v.exports={renderWebGL:g,renderCanvas:o}}),80287:((v,T,t)=>{var h=t(91296),g=function(o,a,r,e){o.pipelines.clear();var s=h(a,r,e).calc;a.render.call(a,o,r,s),o.pipelines.rebind()};v.exports=g}),85592:(v=>{v.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}}),43831:((v,T,t)=>{var h=t(71911),g=t(83419),o=t(85592),a=t(31401),r=t(8497),e=t(95643),s=t(95540),u=t(35154),n=t(36383),l=t(84503),c=new g({Extends:e,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,l],initialize:function(f,m){var y=u(m,"x",0),S=u(m,"y",0);e.call(this,f,"Graphics"),this.setPosition(y,S),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(m)},setDefaultStyles:function(d){return u(d,"lineStyle",null)&&(this.defaultStrokeWidth=u(d,"lineStyle.width",1),this.defaultStrokeColor=u(d,"lineStyle.color",16777215),this.defaultStrokeAlpha=u(d,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),u(d,"fillStyle",null)&&(this.defaultFillColor=u(d,"fillStyle.color",16777215),this.defaultFillAlpha=u(d,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(d,f,m){return m===void 0&&(m=1),this.commandBuffer.push(o.LINE_STYLE,d,f,m),this._lineWidth=d,this},fillStyle:function(d,f){return f===void 0&&(f=1),this.commandBuffer.push(o.FILL_STYLE,d,f),this},fillGradientStyle:function(d,f,m,y,S,C,E,P){return S===void 0&&(S=1),C===void 0&&(C=S),E===void 0&&(E=S),P===void 0&&(P=S),this.commandBuffer.push(o.GRADIENT_FILL_STYLE,S,C,E,P,d,f,m,y),this},lineGradientStyle:function(d,f,m,y,S,C){return C===void 0&&(C=1),this.commandBuffer.push(o.GRADIENT_LINE_STYLE,d,C,f,m,y,S),this},beginPath:function(){return this.commandBuffer.push(o.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(o.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(o.FILL_PATH),this},fill:function(){return this.commandBuffer.push(o.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(o.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(o.STROKE_PATH),this},fillCircleShape:function(d){return this.fillCircle(d.x,d.y,d.radius)},strokeCircleShape:function(d){return this.strokeCircle(d.x,d.y,d.radius)},fillCircle:function(d,f,m){return this.beginPath(),this.arc(d,f,m,0,n.PI2),this.fillPath(),this},strokeCircle:function(d,f,m){return this.beginPath(),this.arc(d,f,m,0,n.PI2),this.strokePath(),this},fillRectShape:function(d){return this.fillRect(d.x,d.y,d.width,d.height)},strokeRectShape:function(d){return this.strokeRect(d.x,d.y,d.width,d.height)},fillRect:function(d,f,m,y){return this.commandBuffer.push(o.FILL_RECT,d,f,m,y),this},strokeRect:function(d,f,m,y){var S=this._lineWidth/2,C=d-S,E=d+S;return this.beginPath(),this.moveTo(d,f),this.lineTo(d,f+y),this.strokePath(),this.beginPath(),this.moveTo(d+m,f),this.lineTo(d+m,f+y),this.strokePath(),this.beginPath(),this.moveTo(C,f),this.lineTo(E+m,f),this.strokePath(),this.beginPath(),this.moveTo(C,f+y),this.lineTo(E+m,f+y),this.strokePath(),this},fillRoundedRect:function(d,f,m,y,S){S===void 0&&(S=20);var C=S,E=S,P=S,A=S;typeof S!="number"&&(C=s(S,"tl",20),E=s(S,"tr",20),P=s(S,"bl",20),A=s(S,"br",20));var F=C>=0,G=E>=0,D=P>=0,L=A>=0;return C=Math.abs(C),E=Math.abs(E),P=Math.abs(P),A=Math.abs(A),this.beginPath(),this.moveTo(d+C,f),this.lineTo(d+m-E,f),G?this.arc(d+m-E,f+E,E,-n.TAU,0):this.arc(d+m,f,E,Math.PI,n.TAU,!0),this.lineTo(d+m,f+y-A),L?this.arc(d+m-A,f+y-A,A,0,n.TAU):this.arc(d+m,f+y,A,-n.TAU,Math.PI,!0),this.lineTo(d+P,f+y),D?this.arc(d+P,f+y-P,P,n.TAU,Math.PI):this.arc(d,f+y,P,0,-n.TAU,!0),this.lineTo(d,f+C),F?this.arc(d+C,f+C,C,-Math.PI,-n.TAU):this.arc(d,f,C,n.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(d,f,m,y,S){S===void 0&&(S=20);var C=S,E=S,P=S,A=S,F=Math.min(m,y)/2;typeof S!="number"&&(C=s(S,"tl",20),E=s(S,"tr",20),P=s(S,"bl",20),A=s(S,"br",20));var G=C>=0,D=E>=0,L=P>=0,b=A>=0;return C=Math.min(Math.abs(C),F),E=Math.min(Math.abs(E),F),P=Math.min(Math.abs(P),F),A=Math.min(Math.abs(A),F),this.beginPath(),this.moveTo(d+C,f),this.lineTo(d+m-E,f),this.moveTo(d+m-E,f),D?this.arc(d+m-E,f+E,E,-n.TAU,0):this.arc(d+m,f,E,Math.PI,n.TAU,!0),this.lineTo(d+m,f+y-A),this.moveTo(d+m,f+y-A),b?this.arc(d+m-A,f+y-A,A,0,n.TAU):this.arc(d+m,f+y,A,-n.TAU,Math.PI,!0),this.lineTo(d+P,f+y),this.moveTo(d+P,f+y),L?this.arc(d+P,f+y-P,P,n.TAU,Math.PI):this.arc(d,f+y,P,0,-n.TAU,!0),this.lineTo(d,f+C),this.moveTo(d,f+C),G?this.arc(d+C,f+C,C,-Math.PI,-n.TAU):this.arc(d,f,C,n.TAU,0,!0),this.strokePath(),this},fillPointShape:function(d,f){return this.fillPoint(d.x,d.y,f)},fillPoint:function(d,f,m){return!m||m<1?m=1:(d-=m/2,f-=m/2),this.commandBuffer.push(o.FILL_RECT,d,f,m,m),this},fillTriangleShape:function(d){return this.fillTriangle(d.x1,d.y1,d.x2,d.y2,d.x3,d.y3)},strokeTriangleShape:function(d){return this.strokeTriangle(d.x1,d.y1,d.x2,d.y2,d.x3,d.y3)},fillTriangle:function(d,f,m,y,S,C){return this.commandBuffer.push(o.FILL_TRIANGLE,d,f,m,y,S,C),this},strokeTriangle:function(d,f,m,y,S,C){return this.commandBuffer.push(o.STROKE_TRIANGLE,d,f,m,y,S,C),this},strokeLineShape:function(d){return this.lineBetween(d.x1,d.y1,d.x2,d.y2)},lineBetween:function(d,f,m,y){return this.beginPath(),this.moveTo(d,f),this.lineTo(m,y),this.strokePath(),this},lineTo:function(d,f){return this.commandBuffer.push(o.LINE_TO,d,f),this},moveTo:function(d,f){return this.commandBuffer.push(o.MOVE_TO,d,f),this},strokePoints:function(d,f,m,y){f===void 0&&(f=!1),m===void 0&&(m=!1),y===void 0&&(y=d.length),this.beginPath(),this.moveTo(d[0].x,d[0].y);for(var S=1;S<y;S++)this.lineTo(d[S].x,d[S].y);return f&&this.lineTo(d[0].x,d[0].y),m&&this.closePath(),this.strokePath(),this},fillPoints:function(d,f,m,y){f===void 0&&(f=!1),m===void 0&&(m=!1),y===void 0&&(y=d.length),this.beginPath(),this.moveTo(d[0].x,d[0].y);for(var S=1;S<y;S++)this.lineTo(d[S].x,d[S].y);return f&&this.lineTo(d[0].x,d[0].y),m&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(d,f){f===void 0&&(f=32);var m=d.getPoints(f);return this.strokePoints(m,!0)},strokeEllipse:function(d,f,m,y,S){S===void 0&&(S=32);var C=new r(d,f,m,y),E=C.getPoints(S);return this.strokePoints(E,!0)},fillEllipseShape:function(d,f){f===void 0&&(f=32);var m=d.getPoints(f);return this.fillPoints(m,!0)},fillEllipse:function(d,f,m,y,S){S===void 0&&(S=32);var C=new r(d,f,m,y),E=C.getPoints(S);return this.fillPoints(E,!0)},arc:function(d,f,m,y,S,C,E){return C===void 0&&(C=!1),E===void 0&&(E=0),this.commandBuffer.push(o.ARC,d,f,m,y,S,C,E),this},slice:function(d,f,m,y,S,C,E){return C===void 0&&(C=!1),E===void 0&&(E=0),this.commandBuffer.push(o.BEGIN_PATH),this.commandBuffer.push(o.MOVE_TO,d,f),this.commandBuffer.push(o.ARC,d,f,m,y,S,C,E),this.commandBuffer.push(o.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(o.SAVE),this},restore:function(){return this.commandBuffer.push(o.RESTORE),this},translateCanvas:function(d,f){return this.commandBuffer.push(o.TRANSLATE,d,f),this},scaleCanvas:function(d,f){return this.commandBuffer.push(o.SCALE,d,f),this},rotateCanvas:function(d){return this.commandBuffer.push(o.ROTATE,d),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(d,f,m){var y=this.scene.sys,S=y.game.renderer;f===void 0&&(f=y.scale.width),m===void 0&&(m=y.scale.height),c.TargetCamera.setScene(this.scene),c.TargetCamera.setViewport(0,0,f,m),c.TargetCamera.scrollX=this.x,c.TargetCamera.scrollY=this.y;var C,E,P={willReadFrequently:!0};if(typeof d=="string")if(y.textures.exists(d)){C=y.textures.get(d);var A=C.getSourceImage();A instanceof HTMLCanvasElement&&(E=A.getContext("2d",P))}else C=y.textures.createCanvas(d,f,m),E=C.getSourceImage().getContext("2d",P);else d instanceof HTMLCanvasElement&&(E=d.getContext("2d",P));return E&&(this.renderCanvas(S,this,c.TargetCamera,null,E,!1),C&&C.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});c.TargetCamera=new h,v.exports=c}),32768:((v,T,t)=>{var h=t(85592),g=t(20926),o=function(a,r,e,s,u,n){var l=r.commandBuffer,c=l.length,d=u||a.currentContext;if(!(c===0||!g(a,d,r,e,s))){e.addToRenderList(r);var f=1,m=1,y=0,S=0,C=1,E=0,P=0,A=0;d.beginPath();for(var F=0;F<c;++F){var G=l[F];switch(G){case h.ARC:d.arc(l[F+1],l[F+2],l[F+3],l[F+4],l[F+5],l[F+6]),F+=7;break;case h.LINE_STYLE:C=l[F+1],y=l[F+2],f=l[F+3],E=(y&16711680)>>>16,P=(y&65280)>>>8,A=y&255,d.strokeStyle="rgba("+E+","+P+","+A+","+f+")",d.lineWidth=C,F+=3;break;case h.FILL_STYLE:S=l[F+1],m=l[F+2],E=(S&16711680)>>>16,P=(S&65280)>>>8,A=S&255,d.fillStyle="rgba("+E+","+P+","+A+","+m+")",F+=2;break;case h.BEGIN_PATH:d.beginPath();break;case h.CLOSE_PATH:d.closePath();break;case h.FILL_PATH:n||d.fill();break;case h.STROKE_PATH:n||d.stroke();break;case h.FILL_RECT:n?d.rect(l[F+1],l[F+2],l[F+3],l[F+4]):d.fillRect(l[F+1],l[F+2],l[F+3],l[F+4]),F+=4;break;case h.FILL_TRIANGLE:d.beginPath(),d.moveTo(l[F+1],l[F+2]),d.lineTo(l[F+3],l[F+4]),d.lineTo(l[F+5],l[F+6]),d.closePath(),n||d.fill(),F+=6;break;case h.STROKE_TRIANGLE:d.beginPath(),d.moveTo(l[F+1],l[F+2]),d.lineTo(l[F+3],l[F+4]),d.lineTo(l[F+5],l[F+6]),d.closePath(),n||d.stroke(),F+=6;break;case h.LINE_TO:d.lineTo(l[F+1],l[F+2]),F+=2;break;case h.MOVE_TO:d.moveTo(l[F+1],l[F+2]),F+=2;break;case h.LINE_FX_TO:d.lineTo(l[F+1],l[F+2]),F+=5;break;case h.MOVE_FX_TO:d.moveTo(l[F+1],l[F+2]),F+=5;break;case h.SAVE:d.save();break;case h.RESTORE:d.restore();break;case h.TRANSLATE:d.translate(l[F+1],l[F+2]),F+=2;break;case h.SCALE:d.scale(l[F+1],l[F+2]),F+=2;break;case h.ROTATE:d.rotate(l[F+1]),F+=1;break;case h.GRADIENT_FILL_STYLE:F+=5;break;case h.GRADIENT_LINE_STYLE:F+=6;break}}d.restore()}};v.exports=o}),87079:((v,T,t)=>{var h=t(44603),g=t(43831);h.register("graphics",function(o,a){o===void 0&&(o={}),a!==void 0&&(o.add=a);var r=new g(this.scene,o);return o.add&&this.scene.sys.displayList.add(r),r})}),1201:((v,T,t)=>{var h=t(43831),g=t(39429);g.register("graphics",function(o){return this.displayList.add(new h(this.scene,o))})}),84503:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(77545),o=t(32768),o=t(32768),v.exports={renderWebGL:g,renderCanvas:o}}),77545:((v,T,t)=>{var h=t(85592),g=t(91296),o=t(61340),a=t(70554),r=function(l,c,d){this.x=l,this.y=c,this.width=d},e=function(l,c,d){this.points=[],this.pointsLength=1,this.points[0]=new r(l,c,d)},s=[],u=new o,n=function(l,c,d,f){if(c.commandBuffer.length!==0){d.addToRenderList(c);var m=l.pipelines.set(c.pipeline,c);l.pipelines.preBatch(c);for(var y=g(c,d,f).calc,S=u.loadIdentity(),C=c.commandBuffer,E=d.alpha*c.alpha,P=1,A=m.fillTint,F=m.strokeTint,G=0,D=0,L=0,b=.01,I=Math.PI*2,N,Z=[],U=0,W=!0,X=null,V=a.getTintAppendFloatAlpha,O=0;O<C.length;O++)switch(N=C[O],N){case h.BEGIN_PATH:{Z.length=0,X=null,W=!0;break}case h.CLOSE_PATH:{W=!1,X&&X.points.length&&X.points.push(X.points[0]);break}case h.FILL_PATH:{for(U=0;U<Z.length;U++)m.batchFillPath(Z[U].points,S,y);break}case h.STROKE_PATH:{for(U=0;U<Z.length;U++)m.batchStrokePath(Z[U].points,P,W,S,y);break}case h.LINE_STYLE:{P=C[++O];var z=C[++O],B=C[++O]*E,Y=V(z,B);F.TL=Y,F.TR=Y,F.BL=Y,F.BR=Y;break}case h.FILL_STYLE:{var k=C[++O],J=C[++O]*E,j=V(k,J);A.TL=j,A.TR=j,A.BL=j,A.BR=j;break}case h.GRADIENT_FILL_STYLE:{var tt=C[++O]*E,ut=C[++O]*E,ht=C[++O]*E,st=C[++O]*E;A.TL=V(C[++O],tt),A.TR=V(C[++O],ut),A.BL=V(C[++O],ht),A.BR=V(C[++O],st);break}case h.GRADIENT_LINE_STYLE:{P=C[++O];var dt=C[++O]*E;F.TL=V(C[++O],dt),F.TR=V(C[++O],dt),F.BL=V(C[++O],dt),F.BR=V(C[++O],dt);break}case h.ARC:{var lt=0,ft=C[++O],Lt=C[++O],Nt=C[++O],Vt=C[++O],pt=C[++O],Pt=C[++O],Dt=C[++O];for(pt-=Vt,Pt?pt<-I?pt=-I:pt>0&&(pt=-I+pt%I):pt>I?pt=I:pt<0&&(pt=I+pt%I),X===null&&(X=new e(ft+Math.cos(Vt)*Nt,Lt+Math.sin(Vt)*Nt,P),Z.push(X),lt+=b);lt<1+Dt;)L=pt*lt+Vt,G=ft+Math.cos(L)*Nt,D=Lt+Math.sin(L)*Nt,X.points.push(new r(G,D,P)),lt+=b;L=pt+Vt,G=ft+Math.cos(L)*Nt,D=Lt+Math.sin(L)*Nt,X.points.push(new r(G,D,P));break}case h.FILL_RECT:{m.batchFillRect(C[++O],C[++O],C[++O],C[++O],S,y);break}case h.FILL_TRIANGLE:{m.batchFillTriangle(C[++O],C[++O],C[++O],C[++O],C[++O],C[++O],S,y);break}case h.STROKE_TRIANGLE:{m.batchStrokeTriangle(C[++O],C[++O],C[++O],C[++O],C[++O],C[++O],P,S,y);break}case h.LINE_TO:{X!==null?X.points.push(new r(C[++O],C[++O],P)):(X=new e(C[++O],C[++O],P),Z.push(X));break}case h.MOVE_TO:{X=new e(C[++O],C[++O],P),Z.push(X);break}case h.SAVE:{s.push(S.copyToArray());break}case h.RESTORE:{S.copyFromArray(s.pop());break}case h.TRANSLATE:{ft=C[++O],Lt=C[++O],S.translate(ft,Lt);break}case h.SCALE:{ft=C[++O],Lt=C[++O],S.scale(ft,Lt);break}case h.ROTATE:{S.rotate(C[++O]);break}}l.pipelines.postBatch(c)}};v.exports=n}),26479:((v,T,t)=>{var h=t(61061),g=t(83419),o=t(51708),a=t(50792),r=t(46710),e=t(95540),s=t(35154),u=t(97022),n=t(41212),l=t(88492),c=t(35072),d=t(68287),f=new g({Extends:a,initialize:function(y,S,C){a.call(this),C?S&&!Array.isArray(S)&&(S=[S]):Array.isArray(S)?n(S[0])&&(C=S,S=null):n(S)&&(C=S,S=null),this.scene=y,this.children=new c,this.isParent=!0,this.type="Group",this.classType=e(C,"classType",d),this.name=e(C,"name",""),this.active=e(C,"active",!0),this.maxSize=e(C,"maxSize",-1),this.defaultKey=e(C,"defaultKey",null),this.defaultFrame=e(C,"defaultFrame",null),this.runChildUpdate=e(C,"runChildUpdate",!1),this.createCallback=e(C,"createCallback",null),this.removeCallback=e(C,"removeCallback",null),this.createMultipleCallback=e(C,"createMultipleCallback",null),this.internalCreateCallback=e(C,"internalCreateCallback",null),this.internalRemoveCallback=e(C,"internalRemoveCallback",null),S&&this.addMultiple(S),C&&this.createMultiple(C),this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,y,S,C,E,P){if(m===void 0&&(m=0),y===void 0&&(y=0),S===void 0&&(S=this.defaultKey),C===void 0&&(C=this.defaultFrame),E===void 0&&(E=!0),P===void 0&&(P=!0),this.isFull())return null;var A=new this.classType(this.scene,m,y,S,C);return A.addToDisplayList(this.scene.sys.displayList),A.addToUpdateList(),A.visible=E,A.setActive(P),this.add(A),A},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var y=[];if(m[0].key)for(var S=0;S<m.length;S++){var C=this.createFromConfig(m[S]);y=y.concat(C)}return y},createFromConfig:function(m){if(this.isFull())return[];this.classType=e(m,"classType",this.classType);var y=e(m,"key",void 0),S=e(m,"frame",null),C=e(m,"visible",!0),E=e(m,"active",!0),P=[];if(y===void 0)return P;Array.isArray(y)||(y=[y]),Array.isArray(S)||(S=[S]);var A=e(m,"repeat",0),F=e(m,"randomKey",!1),G=e(m,"randomFrame",!1),D=e(m,"yoyo",!1),L=e(m,"quantity",!1),b=e(m,"frameQuantity",1),I=e(m,"max",0),N=l(y,S,{max:I,qty:L||b,random:F,randomB:G,repeat:A,yoyo:D});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback),m.internalCreateCallback&&(this.internalCreateCallback=m.internalCreateCallback),m.internalRemoveCallback&&(this.internalRemoveCallback=m.internalRemoveCallback);for(var Z=0;Z<N.length;Z++){var U=this.create(0,0,N[Z].a,N[Z].b,C,E);if(!U)break;P.push(U)}if(u(m,"setXY")){var W=s(m,"setXY.x",0),X=s(m,"setXY.y",0),V=s(m,"setXY.stepX",0),O=s(m,"setXY.stepY",0);h.SetXY(P,W,X,V,O)}if(u(m,"setRotation")){var z=s(m,"setRotation.value",0),B=s(m,"setRotation.step",0);h.SetRotation(P,z,B)}if(u(m,"setScale")){var Y=s(m,"setScale.x",1),k=s(m,"setScale.y",Y),J=s(m,"setScale.stepX",0),j=s(m,"setScale.stepY",0);h.SetScale(P,Y,k,J,j)}if(u(m,"setOrigin")){var tt=s(m,"setOrigin.x",.5),ut=s(m,"setOrigin.y",tt),ht=s(m,"setOrigin.stepX",0),st=s(m,"setOrigin.stepY",0);h.SetOrigin(P,tt,ut,ht,st)}if(u(m,"setAlpha")){var dt=s(m,"setAlpha.value",1),lt=s(m,"setAlpha.step",0);h.SetAlpha(P,dt,lt)}if(u(m,"setDepth")){var ft=s(m,"setDepth.value",0),Lt=s(m,"setDepth.step",0);h.SetDepth(P,ft,Lt)}if(u(m,"setScrollFactor")){var Nt=s(m,"setScrollFactor.x",1),Vt=s(m,"setScrollFactor.y",Nt),pt=s(m,"setScrollFactor.stepX",0),Pt=s(m,"setScrollFactor.stepY",0);h.SetScrollFactor(P,Nt,Vt,pt,Pt)}var Dt=e(m,"hitArea",null),Gt=e(m,"hitAreaCallback",null);Dt&&h.SetHitArea(P,Dt,Gt);var Ut=e(m,"gridAlign",!1);return Ut&&h.GridAlign(P,Ut),this.createMultipleCallback&&this.createMultipleCallback.call(this,P),P},preUpdate:function(m,y){if(!(!this.runChildUpdate||this.children.size===0))for(var S=this.children.entries.slice(),C=0;C<S.length;C++){var E=S[C];E.active&&E.update(m,y)}},add:function(m,y){return y===void 0&&(y=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),y&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(o.DESTROY,this.remove,this),this)},addMultiple:function(m,y){if(y===void 0&&(y=!1),Array.isArray(m))for(var S=0;S<m.length;S++)this.add(m[S],y);return this},remove:function(m,y,S){return y===void 0&&(y=!1),S===void 0&&(S=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(o.DESTROY,this.remove,this),S?m.destroy():y&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,y){m===void 0&&(m=!1),y===void 0&&(y=!1);for(var S=this.children,C=0;C<S.size;C++){var E=S.entries[C];E.off(o.DESTROY,this.remove,this),y?E.destroy():m&&(E.removeFromDisplayList(),E.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,y,S,C){return r(this.children.entries,m,y,S,C)},getFirst:function(m,y,S,C,E,P,A){return this.getHandler(!0,1,m,y,S,C,E,P,A)},getFirstNth:function(m,y,S,C,E,P,A,F){return this.getHandler(!0,m,y,S,C,E,P,A,F)},getLast:function(m,y,S,C,E,P,A){return this.getHandler(!1,1,m,y,S,C,E,P,A)},getLastNth:function(m,y,S,C,E,P,A,F){return this.getHandler(!1,m,y,S,C,E,P,A,F)},getHandler:function(m,y,S,C,E,P,A,F,G){S===void 0&&(S=!1),C===void 0&&(C=!1);var D,L,b=0,I=this.children.entries;if(m)for(L=0;L<I.length;L++)if(D=I[L],D.active===S){if(b++,b===y)break}else D=null;else for(L=I.length-1;L>=0;L--)if(D=I[L],D.active===S){if(b++,b===y)break}else D=null;return D?(typeof E=="number"&&(D.x=E),typeof P=="number"&&(D.y=P),D):C?this.create(E,P,A,F,G):null},get:function(m,y,S,C,E){return this.getFirst(!1,!0,m,y,S,C,E)},getFirstAlive:function(m,y,S,C,E,P){return this.getFirst(!0,m,y,S,C,E,P)},getFirstDead:function(m,y,S,C,E,P){return this.getFirst(!1,m,y,S,C,E,P)},playAnimation:function(m,y){return h.PlayAnimation(this.children.entries,m,y),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var y=0,S=0;S<this.children.size;S++)this.children.entries[S].active===m&&y++;return y},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),y=this.maxSize===-1?999999999999:this.maxSize;return y-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,y,S,C,E){return h.PropertyValueSet(this.children.entries,m,y,S,C,E),this},propertyValueInc:function(m,y,S,C,E){return h.PropertyValueInc(this.children.entries,m,y,S,C,E),this},setX:function(m,y){return h.SetX(this.children.entries,m,y),this},setY:function(m,y){return h.SetY(this.children.entries,m,y),this},setXY:function(m,y,S,C){return h.SetXY(this.children.entries,m,y,S,C),this},incX:function(m,y){return h.IncX(this.children.entries,m,y),this},incY:function(m,y){return h.IncY(this.children.entries,m,y),this},incXY:function(m,y,S,C){return h.IncXY(this.children.entries,m,y,S,C),this},shiftPosition:function(m,y,S){return h.ShiftPosition(this.children.entries,m,y,S),this},angle:function(m,y){return h.Angle(this.children.entries,m,y),this},rotate:function(m,y){return h.Rotate(this.children.entries,m,y),this},rotateAround:function(m,y){return h.RotateAround(this.children.entries,m,y),this},rotateAroundDistance:function(m,y,S){return h.RotateAroundDistance(this.children.entries,m,y,S),this},setAlpha:function(m,y){return h.SetAlpha(this.children.entries,m,y),this},setTint:function(m,y,S,C){return h.SetTint(this.children.entries,m,y,S,C),this},setOrigin:function(m,y,S,C){return h.SetOrigin(this.children.entries,m,y,S,C),this},scaleX:function(m,y){return h.ScaleX(this.children.entries,m,y),this},scaleY:function(m,y){return h.ScaleY(this.children.entries,m,y),this},scaleXY:function(m,y,S,C){return h.ScaleXY(this.children.entries,m,y,S,C),this},setDepth:function(m,y){return h.SetDepth(this.children.entries,m,y),this},setBlendMode:function(m){return h.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,y){return h.SetHitArea(this.children.entries,m,y),this},shuffle:function(){return h.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,y,S){return h.SetVisible(this.children.entries,m,y,S),this},toggleVisible:function(){return h.ToggleVisible(this.children.entries),this},destroy:function(m,y){m===void 0&&(m=!1),y===void 0&&(y=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(o.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(y,m),this.scene=void 0,this.children=void 0)}});v.exports=f}),94975:((v,T,t)=>{var h=t(44603),g=t(26479);h.register("group",function(o){return new g(this.scene,null,o)})}),3385:((v,T,t)=>{var h=t(26479),g=t(39429);g.register("group",function(o,a){return this.updateList.add(new h(this.scene,o,a))})}),88571:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(59819),r=new h({Extends:o,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.TextureCrop,g.Tint,g.Transform,g.Visible,a],initialize:function(s,u,n,l,c){o.call(this,s,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,c),this.setPosition(u,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});v.exports=r}),40652:(v=>{var T=function(t,h,g,o){g.addToRenderList(h),t.batchSprite(h,h.frame,g,o)};v.exports=T}),82459:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(88571);g.register("image",function(r,e){r===void 0&&(r={});var s=o(r,"key",null),u=o(r,"frame",null),n=new a(this.scene,0,0,s,u);return e!==void 0&&(r.add=e),h(this.scene,n,r),n})}),2117:((v,T,t)=>{var h=t(88571),g=t(39429);g.register("image",function(o,a,r,e){return this.displayList.add(new h(this.scene,o,a,r,e))})}),59819:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(99517),o=t(40652),v.exports={renderWebGL:g,renderCanvas:o}}),99517:(v=>{var T=function(t,h,g,o){g.addToRenderList(h),this.pipeline.batchSprite(h,g,o)};v.exports=T}),77856:((v,T,t)=>{var h={Events:t(51708),DisplayList:t(8050),GameObjectCreator:t(44603),GameObjectFactory:t(39429),UpdateList:t(45027),Components:t(31401),GetCalcMatrix:t(91296),BuildGameObject:t(25305),BuildGameObjectAnimation:t(13059),GameObject:t(95643),BitmapText:t(22186),Blitter:t(6107),Bob:t(46590),Container:t(31559),DOMElement:t(3069),DynamicBitmapText:t(2638),Extern:t(42421),Graphics:t(43831),Group:t(26479),Image:t(88571),Layer:t(93595),Particles:t(18404),PathFollower:t(1159),RenderTexture:t(591),RetroFont:t(196),Rope:t(77757),Sprite:t(68287),Text:t(50171),GetTextSize:t(14220),MeasureText:t(79557),TextStyle:t(35762),TileSprite:t(20839),Zone:t(41481),Video:t(18471),Shape:t(17803),Arc:t(23629),Curve:t(89),Ellipse:t(19921),Grid:t(30479),IsoBox:t(61475),IsoTriangle:t(16933),Line:t(57847),Polygon:t(24949),Rectangle:t(74561),Star:t(55911),Triangle:t(36931),Factories:{Blitter:t(12709),Container:t(24961),DOMElement:t(2611),DynamicBitmapText:t(72566),Extern:t(56315),Graphics:t(1201),Group:t(3385),Image:t(2117),Layer:t(20005),Particles:t(676),PathFollower:t(90145),RenderTexture:t(60505),Rope:t(96819),Sprite:t(46409),StaticBitmapText:t(34914),Text:t(68005),TileSprite:t(91681),Zone:t(84175),Video:t(89025),Arc:t(42563),Curve:t(40511),Ellipse:t(1543),Grid:t(34137),IsoBox:t(3933),IsoTriangle:t(49803),Line:t(2481),Polygon:t(64827),Rectangle:t(87959),Star:t(93697),Triangle:t(45245)},Creators:{Blitter:t(9403),Container:t(77143),DynamicBitmapText:t(11164),Graphics:t(87079),Group:t(94975),Image:t(82459),Layer:t(25179),Particles:t(92730),RenderTexture:t(34495),Rope:t(26209),Sprite:t(15567),StaticBitmapText:t(57336),Text:t(71259),TileSprite:t(14167),Zone:t(95261),Video:t(11511)}};h.Shader=t(20071),h.Mesh=t(4703),h.NineSlice=t(28103),h.PointLight=t(80321),h.Plane=t(33663),h.Factories.Shader=t(74177),h.Factories.Mesh=t(9225),h.Factories.NineSlice=t(47521),h.Factories.PointLight=t(71255),h.Factories.Plane=t(30985),h.Creators.Shader=t(54935),h.Creators.Mesh=t(20527),h.Creators.NineSlice=t(28279),h.Creators.PointLight=t(39829),h.Creators.Plane=t(56015),h.Light=t(41432),h.LightsManager=t(61356),h.LightsPlugin=t(88992),v.exports=h}),93595:((v,T,t)=>{var h=t(10312),g=t(83419),o=t(31401),a=t(53774),r=t(45893),e=t(50792),s=t(51708),u=t(73162),n=t(33963),l=t(44594),c=t(19186),d=new g({Extends:u,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.PostPipeline,o.Visible,e,n],initialize:function(m,y){u.call(this,m),e.call(this),this.scene=m,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=m.sys,this.events=m.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),y&&this.add(y),m.sys.queueDepthSort()},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},setState:function(f){return this.state=f,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(f,m){return this.data||(this.data=new r(this)),this.data.set(f,m),this},incData:function(f,m){return this.data||(this.data=new r(this)),this.data.inc(f,m),this},toggleData:function(f){return this.data||(this.data=new r(this)),this.data.toggle(f),this},getData:function(f){return this.data||(this.data=new r(this)),this.data.get(f)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(f){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&f.id)},getIndexList:function(){for(var f=this,m=this.parentContainer,y=[];m&&(y.unshift(m.getIndex(f)),f=m,m.parentContainer);)m=m.parentContainer;return y.unshift(this.displayList.getIndex(f)),y},addChildCallback:function(f){var m=f.displayList;m&&m!==this&&f.removeFromDisplayList(),f.displayList||(this.queueDepthSort(),f.displayList=this,f.emit(s.ADDED_TO_SCENE,f,this.scene),this.events.emit(l.ADDED_TO_SCENE,f,this.scene))},removeChildCallback:function(f){this.queueDepthSort(),f.displayList=null,f.emit(s.REMOVED_FROM_SCENE,f,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,f,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(c(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(f,m){return f._depth-m._depth},getChildren:function(){return this.list},addToDisplayList:function(f){return f===void 0&&(f=this.scene.sys.displayList),this.displayList&&this.displayList!==f&&this.removeFromDisplayList(),f.exists(this)||(this.displayList=f,f.add(this,!0),f.queueDepthSort(),this.emit(s.ADDED_TO_SCENE,this,this.scene),f.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var f=this.displayList||this.scene.sys.displayList;return f.exists(this)&&(f.remove(this,!0),f.queueDepthSort(),this.displayList=null,this.emit(s.REMOVED_FROM_SCENE,this,this.scene),f.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var f=null;return this.parentContainer?f=this.parentContainer.list:this.displayList&&(f=this.displayList.list),f},destroy:function(f){if(!(!this.scene||this.ignoreDestroy)){this.emit(s.DESTROY,this);for(var m=this.list;m.length;)m[0].destroy(f);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});v.exports=d}),2956:(v=>{var T=function(t,h,g){var o=h.list;if(o.length!==0){h.depthSort();var a=h.blendMode!==-1;a||t.setBlendMode(0);var r=h._alpha;h.mask&&h.mask.preRenderCanvas(t,null,g);for(var e=0;e<o.length;e++){var s=o[e];if(s.willRender(g)){var u=s.alpha;!a&&s.blendMode!==t.currentBlendMode&&t.setBlendMode(s.blendMode),s.setAlpha(u*r),s.renderCanvas(t,s,g),s.setAlpha(u)}}h.mask&&h.mask.postRenderCanvas(t)}};v.exports=T}),25179:((v,T,t)=>{var h=t(25305),g=t(93595),o=t(44603),a=t(23568);o.register("layer",function(r,e){r===void 0&&(r={});var s=a(r,"children",null),u=new g(this.scene,s);return e!==void 0&&(r.add=e),h(this.scene,u,r),u})}),20005:((v,T,t)=>{var h=t(93595),g=t(39429);g.register("layer",function(o){return this.displayList.add(new h(this.scene,o))})}),33963:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(15869),o=t(2956),v.exports={renderWebGL:g,renderCanvas:o}}),15869:(v=>{var T=function(t,h,g){var o=h.list,a=o.length;if(a!==0){h.depthSort(),t.pipelines.preBatch(h);var r=h.blendMode!==-1;r||t.setBlendMode(0);for(var e=h.alpha,s=0;s<a;s++){var u=o[s];if(u.willRender(g)){var n,l,c,d;if(u.alphaTopLeft!==void 0)n=u.alphaTopLeft,l=u.alphaTopRight,c=u.alphaBottomLeft,d=u.alphaBottomRight;else{var f=u.alpha;n=f,l=f,c=f,d=f}!r&&u.blendMode!==t.currentBlendMode&&t.setBlendMode(u.blendMode);var m=u.mask;m&&m.preRenderWebGL(t,u,g);var y=u.type;y!==t.currentType&&(t.newType=!0,t.currentType=y),t.nextTypeMatch=s<a-1?o[s+1].type===t.currentType:!1,u.setAlpha(n*e,l*e,c*e,d*e),u.renderWebGL(t,u,g),u.setAlpha(n,l,c,d),m&&m.postRenderWebGL(t,g),t.newType=!1}}t.pipelines.postBatch(h)}};v.exports=T}),41432:((v,T,t)=>{var h=t(96503),g=t(83419),o=t(31401),a=t(51767),r=t(70554),e=new g({Extends:h,Mixins:[o.Origin,o.ScrollFactor,o.Visible],initialize:function(u,n,l,c,d,f,m){h.call(this,u,n,l),this.color=new a(c,d,f),this.intensity=m,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(l)},displayWidth:{get:function(){return this.diameter},set:function(s){this.diameter=s}},displayHeight:{get:function(){return this.diameter},set:function(s){this.diameter=s}},width:{get:function(){return this.diameter},set:function(s){this.diameter=s}},height:{get:function(){return this.diameter},set:function(s){this.diameter=s}},willRender:function(s){return!(e.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&s.id)},setColor:function(s){var u=r.getFloatsFromUintRGB(s);return this.color.set(u[0],u[1],u[2]),this},setIntensity:function(s){return this.intensity=s,this},setRadius:function(s){return this.radius=s,this}});e.RENDER_MASK=15,v.exports=e}),61356:((v,T,t)=>{var h=t(81491),g=t(83419),o=t(20339),a=t(41432),r=t(80321),e=t(51767),s=t(19133),u=t(19186),n=t(70554),l=new g({initialize:function(){this.lights=[],this.ambientColor=new e(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(c,d,f,m,y,S){return this.systems.displayList.add(new r(this.scene,c,d,f,m,y,S))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(c){for(var d=this.lights,f=c.worldView,m=[],y=0;y<d.length;y++){var S=d[y];S.willRender(c)&&h(S,f)&&m.push({light:S,distance:o(S.x,S.y,f.centerX,f.centerY)})}return m.length>this.maxLights&&(u(m,this.sortByDistance),m=m.slice(0,this.maxLights)),this.visibleLights=m.length,m},sortByDistance:function(c,d){return c.distance>=d.distance},setAmbientColor:function(c){var d=n.getFloatsFromUintRGB(c);return this.ambientColor.set(d[0],d[1],d[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(c,d,f,m,y){c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=128),m===void 0&&(m=16777215),y===void 0&&(y=1);var S=n.getFloatsFromUintRGB(m),C=new a(c,d,f,S[0],S[1],S[2],y);return this.lights.push(C),C},removeLight:function(c){var d=this.lights.indexOf(c);return d>=0&&s(this.lights,d),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});v.exports=l}),88992:((v,T,t)=>{var h=t(83419),g=t(61356),o=t(37277),a=t(44594),r=new h({Extends:g,initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once(a.BOOT,this.boot,this),g.call(this)},boot:function(){var e=this.systems.events;e.on(a.SHUTDOWN,this.shutdown,this),e.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});o.register("LightsPlugin",r,"lights"),v.exports=r}),4703:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(39506),a=t(83997),r=t(95643),e=t(34684),s=t(92515),u=t(91296),n=t(37867),l=t(29807),c=t(43396),d=t(19186),f=t(25836),m=t(39318),y=new h({Extends:r,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.Texture,g.Transform,g.Visible,l],initialize:function(C,E,P,A,F,G,D,L,b,I,N,Z){E===void 0&&(E=0),P===void 0&&(P=0),A===void 0&&(A="__WHITE"),r.call(this,C,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new f,this.modelScale=new f(1,1,1),this.modelRotation=new f,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new n,this.viewPosition=new f,this.viewMatrix=new n,this.projectionMatrix=new n,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var U=C.sys.renderer;this.setPosition(E,P),this.setTexture(A,F),this.setSize(U.width,U.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(U.width,U.height),G&&this.addVertices(G,D,L,b,I,N,Z)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(S){return this.viewPosition.addScale(f.LEFT,S),this.dirtyCache[10]=1,this},panY:function(S){return this.viewPosition.y+=f.DOWN.y*S,this.dirtyCache[10]=1,this},panZ:function(S){return this.viewPosition.z+=S,this.dirtyCache[10]=1,this},setPerspective:function(S,C,E,P,A){return E===void 0&&(E=45),P===void 0&&(P=.01),A===void 0&&(A=1e3),this.fov=E,this.projectionMatrix.perspective(o(E),S/C,P,A),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(S,C,E,P){return S===void 0&&(S=this.scene.sys.renderer.getAspectRatio()),C===void 0&&(C=1),E===void 0&&(E=-1e3),P===void 0&&(P=1e3),this.fov=0,this.projectionMatrix.ortho(-S,S,-C,C,E,P),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(S){S.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(S,C,E,P,A,F,G,D,L){var b=this.scene.sys.cache.obj.get(S),I;return b&&(I=e(b,this,C,E,P,A,F,G,D,L)),(!I||I.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",S),this},sortByDepth:function(S,C){return S.depth-C.depth},depthSort:function(){return d(this.faces,this.sortByDepth),this},addVertex:function(S,C,E,P,A,F,G){var D=new m(S,C,E,P,A,F,G);return this.vertices.push(D),D},addFace:function(S,C,E){var P=new a(S,C,E);return this.faces.push(P),this.dirtyCache[9]=-1,P},addVertices:function(S,C,E,P,A,F,G){var D=s(S,C,E,P,A,F,G);return D?(this.faces=this.faces.concat(D.faces),this.vertices=this.vertices.concat(D.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(S){return this.faces[S]},hasFaceAt:function(S,C,E){E===void 0&&(E=this.scene.sys.cameras.main);for(var P=u(this,E).calc,A=this.faces,F=0;F<A.length;F++){var G=A[F];if(G.contains(S,C,P))return!0}return!1},getFaceAt:function(S,C,E){E===void 0&&(E=this.scene.sys.cameras.main);for(var P=u(this,E).calc,A=this.faces,F=[],G=0;G<A.length;G++){var D=A[G];D.contains(S,C,P)&&F.push(D)}return d(F,this.sortByDepth)},setDebug:function(S,C){return this.debugGraphic=S,!S&&!C?this.debugCallback=null:C?this.debugCallback=C:this.debugCallback=this.renderDebug,this},isDirty:function(){var S=this.modelPosition,C=this.modelRotation,E=this.modelScale,P=this.dirtyCache,A=S.x,F=S.y,G=S.z,D=C.x,L=C.y,b=C.z,I=E.x,N=E.y,Z=E.z,U=this.getFaceCount(),W=P[0],X=P[1],V=P[2],O=P[3],z=P[4],B=P[5],Y=P[6],k=P[7],J=P[8],j=P[9];return P[0]=A,P[1]=F,P[2]=G,P[3]=D,P[4]=L,P[5]=b,P[6]=I,P[7]=N,P[8]=Z,P[9]=U,W!==A||X!==F||V!==G||O!==D||z!==L||B!==b||Y!==I||k!==N||J!==Z||j!==U},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var S=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!S[10]&&!this.isDirty())){var C=this.width,E=this.height,P=this.viewMatrix,A=this.viewPosition;S[10]&&(P.identity(),P.translate(A),P.invert(),S[10]=0);var F=this.transformMatrix;F.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var G=A.z,D=this.faces,L=0;L<D.length;L++)D[L].transformCoordinatesLocal(F,C,E,G);this.depthSort()}},renderDebug:function(S,C){for(var E=S.debugGraphic,P=0;P<C.length;P++){var A=C[P],F=A.vertex1.tx,G=A.vertex1.ty,D=A.vertex2.tx,L=A.vertex2.ty,b=A.vertex3.tx,I=A.vertex3.ty;E.strokeTriangle(F,G,D,L,b,I)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(S){S===void 0&&(S={});var C=function(E,P,A){for(var F=this.faces,G=0;G<F.length;G++){var D=F[G];if(D.contains(P,A))return!0}return!1}.bind(this);return this.scene.sys.input.enable(this,S,C),this},setTint:function(S){S===void 0&&(S=16777215);for(var C=this.vertices,E=0;E<C.length;E++)C[E].color=S;return this},uvScroll:function(S,C){for(var E=this.faces,P=0;P<E.length;P++)E[P].scrollUV(S,C);return this},uvScale:function(S,C){for(var E=this.faces,P=0;P<E.length;P++)E[P].scaleUV(S,C);return this},tint:{set:function(S){this.setTint(S)}},rotateX:{get:function(){return c(this.modelRotation.x)},set:function(S){this.modelRotation.x=o(S)}},rotateY:{get:function(){return c(this.modelRotation.y)},set:function(S){this.modelRotation.y=o(S)}},rotateZ:{get:function(){return c(this.modelRotation.z)},set:function(S){this.modelRotation.z=o(S)}}});v.exports=y}),36488:(v=>{var T=function(){};v.exports=T}),20527:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(35154),r=t(4703);g.register("mesh",function(e,s){e===void 0&&(e={});var u=o(e,"key",null),n=o(e,"frame",null),l=a(e,"vertices",[]),c=a(e,"uvs",[]),d=a(e,"indicies",[]),f=a(e,"containsZ",!1),m=a(e,"normals",[]),y=a(e,"colors",16777215),S=a(e,"alphas",1),C=new r(this.scene,0,0,u,n,l,c,d,f,m,y,S);return s!==void 0&&(e.add=s),h(this.scene,C,e),C})}),9225:((v,T,t)=>{var h=t(4703),g=t(39429);g.register("mesh",function(o,a,r,e,s,u,n,l,c,d,f){return this.displayList.add(new h(this.scene,o,a,r,e,s,u,n,l,c,d,f))})}),29807:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(48833),o=t(36488),v.exports={renderWebGL:g,renderCanvas:o}}),48833:((v,T,t)=>{var h=t(91296),g=function(o,a,r,e){var s=a.faces,u=s.length;if(u!==0){r.addToRenderList(a);var n=o.pipelines.set(a.pipeline,a),l=h(a,r,e).calc;o.pipelines.preBatch(a);for(var c=n.setGameObject(a),d=n.vertexViewF32,f=n.vertexViewU32,m=n.vertexCount*n.currentShader.vertexComponentCount-1,y=a.tintFill,S=[],C=a.debugCallback,E=l.a,P=l.b,A=l.c,F=l.d,G=l.e,D=l.f,L=a.viewPosition.z,b=a.hideCCW,I=r.roundPixels,N=r.alpha*a.alpha,Z=0,U=0;U<u;U++){var W=s[U];W.isInView(r,b,L,N,E,P,A,F,G,D,I)&&(n.shouldFlush(3)&&(n.flush(),c=n.setGameObject(a),m=n.vertexCount*n.currentShader.vertexComponentCount-1),m=W.load(d,f,m,c,y),Z++,n.vertexCount+=3,n.currentBatch.count=n.vertexCount-n.currentBatch.start,C&&S.push(W))}a.totalFrame+=Z,C&&C.call(a,a,S),o.pipelines.postBatch(a)}};v.exports=g}),28103:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(78023),r=t(39318),e=new h({Extends:o,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,a],initialize:function(u,n,l,c,d,f,m,y,S,C,E){o.call(this,u,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var P=u.textures.getFrame(c,d);this.is3Slice=!C&&!E,P&&P.scale9&&(this.is3Slice=P.is3Slice);for(var A=this.is3Slice?18:54,F=0;F<A;F++)this.vertices.push(new r);this.setPosition(n,l),this.setTexture(c,d),this.setSlices(f,m,y,S,C,E,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(s,u,n,l,c,d,f){n===void 0&&(n=10),l===void 0&&(l=10),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=!1);var m=this.frame,y=!1;if(this.is3Slice&&f&&c!==0&&d!==0&&(y=!0),y)console.warn("Cannot change 9 slice to 3 slice");else{if(m&&m.scale9&&!f){var S=m.data.scale9Borders,C=S.x,E=S.y;n=C,l=m.width-S.w-C,c=E,d=m.height-S.h-E,s===void 0&&(s=m.width),u===void 0&&(u=m.height)}else s===void 0&&(s=256),u===void 0&&(u=256);this._width=s,this._height=u,this.leftWidth=n,this.rightWidth=l,this.topHeight=c,this.bottomHeight=d,this.is3Slice&&(u=m.height,this._height=u,this.topHeight=u,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var s=this.leftWidth,u=this.rightWidth,n=this.topHeight,l=this.bottomHeight,c=this.frame.width,d=this.frame.height;this.updateQuadUVs(0,0,0,s/c,n/d),this.updateQuadUVs(6,s/c,0,1-u/c,n/d),this.updateQuadUVs(12,1-u/c,0,1,n/d),this.is3Slice||(this.updateQuadUVs(18,0,n/d,s/c,1-l/d),this.updateQuadUVs(24,s/c,n/d,1-u/c,1-l/d),this.updateQuadUVs(30,1-u/c,n/d,1,1-l/d),this.updateQuadUVs(36,0,1-l/d,s/c,1),this.updateQuadUVs(42,s/c,1-l/d,1-u/c,1),this.updateQuadUVs(48,1-u/c,1-l/d,1,1))},updateVertices:function(){var s=this.leftWidth,u=this.rightWidth,n=this.topHeight,l=this.bottomHeight,c=this.width,d=this.height;this.updateQuad(0,-.5,.5,-.5+s/c,.5-n/d),this.updateQuad(6,-.5+s/c,.5,.5-u/c,.5-n/d),this.updateQuad(12,.5-u/c,.5,.5,.5-n/d),this.is3Slice||(this.updateQuad(18,-.5,.5-n/d,-.5+s/c,-.5+l/d),this.updateQuad(24,-.5+s/c,.5-n/d,.5-u/c,-.5+l/d),this.updateQuad(30,.5-u/c,.5-n/d,.5,-.5+l/d),this.updateQuad(36,-.5,-.5+l/d,-.5+s/c,-.5),this.updateQuad(42,-.5+s/c,-.5+l/d,.5-u/c,-.5),this.updateQuad(48,.5-u/c,-.5+l/d,.5,-.5))},updateQuad:function(s,u,n,l,c){var d=this.width,f=this.height,m=this.originX,y=this.originY,S=this.vertices;S[s+0].resize(u,n,d,f,m,y),S[s+1].resize(u,c,d,f,m,y),S[s+2].resize(l,n,d,f,m,y),S[s+3].resize(u,c,d,f,m,y),S[s+4].resize(l,c,d,f,m,y),S[s+5].resize(l,n,d,f,m,y)},updateQuadUVs:function(s,u,n,l,c){var d=this.vertices,f=this.frame,m=f.u0,y=f.v0,S=f.u1,C=f.v1;if(m!==0||S!==1){var E=S-m;u=m+u*E,l=m+l*E}if(y!==0||C!==1){var P=C-y;n=y+n*P,c=y+c*P}d[s+0].setUVs(u,n),d[s+1].setUVs(u,c),d[s+2].setUVs(l,n),d[s+3].setUVs(u,c),d[s+4].setUVs(l,c),d[s+5].setUVs(l,n)},clearTint:function(){return this.setTint(16777215),this},setTint:function(s){return s===void 0&&(s=16777215),this.tint=s,this.tintFill=!1,this},setTintFill:function(s){return this.setTint(s),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(s){this._width=Math.max(s,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(s){this.is3Slice||(this._height=Math.max(s,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,u){this.width=s,this.height=u,this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=this.width,n.hitArea.height=this.height),this},setDisplaySize:function(s,u){return this.displayWidth=s,this.displayHeight=u,this},originX:{get:function(){return this._originX},set:function(s){this._originX=s,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(s){this._originY=s,this.updateVertices()}},setOrigin:function(s,u){return s===void 0&&(s=.5),u===void 0&&(u=s),this._originX=s,this._originY=u,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var s=this.frame.height;this._height=s,this.topHeight=s,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});v.exports=e}),28279:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(35154),r=t(28103);g.register("nineslice",function(e,s){e===void 0&&(e={});var u=o(e,"key",null),n=o(e,"frame",null),l=a(e,"width",256),c=a(e,"height",256),d=a(e,"leftWidth",10),f=a(e,"rightWidth",10),m=a(e,"topHeight",0),y=a(e,"bottomHeight",0),S=new r(this.scene,0,0,u,n,l,c,d,f,m,y);return s!==void 0&&(e.add=s),h(this.scene,S,e),S})}),47521:((v,T,t)=>{var h=t(28103),g=t(39429);g.register("nineslice",function(o,a,r,e,s,u,n,l,c,d){return this.displayList.add(new h(this.scene,o,a,r,e,s,u,n,l,c,d))})}),78023:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(52230),v.exports={renderWebGL:g,renderCanvas:o}}),52230:((v,T,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,s){var u=r.vertices,n=u.length;if(n!==0){e.addToRenderList(r);var l=a.pipelines.set(r.pipeline,r),c=h(r,e,s,!1).calc;a.pipelines.preBatch(r);var d=l.setGameObject(r),f=l.vertexViewF32,m=l.vertexViewU32,y=l.vertexCount*l.currentShader.vertexComponentCount-1,S=e.roundPixels,C=r.tintFill,E=e.alpha*r.alpha,P=g.getTintAppendFloatAlpha(r.tint,E),A=l.vertexAvailable(),F=-1;A<n&&(F=A);for(var G=0;G<n;G++){var D=u[G];G===F&&(l.flush(),d=l.setGameObject(r),y=0),f[++y]=c.getXRound(D.vx,D.vy,S),f[++y]=c.getYRound(D.vx,D.vy,S),f[++y]=D.u,f[++y]=D.v,f[++y]=d,f[++y]=C,m[++y]=P,l.vertexCount++,l.currentBatch.count=l.vertexCount-l.currentBatch.start}a.pipelines.postBatch(r)}};v.exports=o}),76472:((v,T,t)=>{var h=t(83419),g=t(44777),o=t(37589),a=t(6113),r=t(91389),e=t(90664),s=new h({Extends:g,initialize:function(n){g.call(this,n,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var u=this.propertyValue,n=u,l=this.defaultEmit,c=this.defaultUpdate;if(this.method===9){this.start=u[0],this.ease=a("Linear"),this.interpolation=r("linear"),l=this.easedValueEmit,c=this.easeValueUpdate,n=u[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var d=0;d<u.length;d++){var f=e(u[d]);this.r.push(f.r),this.g.push(f.g),this.b.push(f.b)}}return this.onEmit=l,this.onUpdate=c,this.current=n,this},setEase:function(u){this.easeName=u,this.ease=a(u)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(u,n,l){var c=this.ease(l),d=this.interpolation(this.r,c),f=this.interpolation(this.g,c),m=this.interpolation(this.b,c),y=o(d,f,m);return this.current=y,y}});v.exports=s}),44777:((v,T,t)=>{var h=t(30976),g=t(45319),o=t(83419),a=t(99472),r=t(6113),e=t(95540),s=t(91389),u=t(77720),n=t(15994),l=new o({initialize:function(d,f,m){m===void 0&&(m=!1),this.propertyKey=d,this.propertyValue=f,this.defaultValue=f,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=m,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(c,d){c===void 0&&(c={}),d&&(this.propertyKey=d),this.propertyValue=e(c,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(c){var d;switch(this.method){case 1:case 3:case 8:d=c;break;case 2:this.propertyValue.indexOf(c)>=0&&(d=c);break;case 4:var f=(this.end-this.start)/this.steps;d=u(c,f),this.counter=d;break;case 5:case 6:case 7:d=g(c,this.start,this.end);break;case 9:d=this.start[0];break}return this.current=d,this},getMethod:function(){var c=this.propertyValue;if(c===null)return 0;var d=typeof c;if(d==="number")return 1;if(Array.isArray(c))return 2;if(d==="function")return 3;if(d==="object"){if(this.hasBoth(c,"start","end"))return this.has(c,"steps")?4:5;if(this.hasBoth(c,"min","max"))return 6;if(this.has(c,"random"))return 7;if(this.hasEither(c,"onEmit","onUpdate"))return 8;if(this.hasEither(c,"values","interpolation"))return 9}return 0},setMethods:function(){var c=this.propertyValue,d=c,f=this.defaultEmit,m=this.defaultUpdate;switch(this.method){case 1:f=this.staticValueEmit;break;case 2:f=this.randomStaticValueEmit,d=c[0];break;case 3:this._onEmit=c,f=this.proxyEmit,d=this.defaultValue;break;case 4:this.start=c.start,this.end=c.end,this.steps=c.steps,this.counter=this.start,this.yoyo=this.has(c,"yoyo")?c.yoyo:!1,this.direction=0,f=this.steppedEmit,d=this.start;break;case 5:this.start=c.start,this.end=c.end;var y=this.has(c,"ease")?c.ease:"Linear";this.ease=r(y,c.easeParams),f=this.has(c,"random")&&c.random?this.randomRangedValueEmit:this.easedValueEmit,m=this.easeValueUpdate,d=this.start;break;case 6:this.start=c.min,this.end=c.max,f=this.has(c,"int")&&c.int?this.randomRangedIntEmit:this.randomRangedValueEmit,d=this.start;break;case 7:var S=c.random;Array.isArray(S)&&(this.start=S[0],this.end=S[1]),f=this.randomRangedIntEmit,d=this.start;break;case 8:this._onEmit=this.has(c,"onEmit")?c.onEmit:this.defaultEmit,this._onUpdate=this.has(c,"onUpdate")?c.onUpdate:this.defaultUpdate,f=this.proxyEmit,m=this.proxyUpdate,d=this.defaultValue;break;case 9:this.start=c.values;var C=this.has(c,"ease")?c.ease:"Linear";this.ease=r(C,c.easeParams),this.interpolation=s(c.interpolation),f=this.easedValueEmit,m=this.easeValueUpdate,d=this.start[0];break}return this.onEmit=f,this.onUpdate=m,this.current=d,this},has:function(c,d){return c.hasOwnProperty(d)},hasBoth:function(c,d,f){return c.hasOwnProperty(d)&&c.hasOwnProperty(f)},hasEither:function(c,d,f){return c.hasOwnProperty(d)||c.hasOwnProperty(f)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(c,d,f,m){return m},proxyEmit:function(c,d,f){var m=this._onEmit(c,d,f);return this.current=m,m},proxyUpdate:function(c,d,f,m){var y=this._onUpdate(c,d,f,m);return this.current=y,y},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var c=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[c],this.current},randomRangedValueEmit:function(c,d){var f=a(this.start,this.end);return c&&c.data[d]&&(c.data[d].min=f,c.data[d].max=this.end),this.current=f,f},randomRangedIntEmit:function(c,d){var f=h(this.start,this.end);return c&&c.data[d]&&(c.data[d].min=f,c.data[d].max=this.end),this.current=f,f},steppedEmit:function(){var c=this.counter,d=c,f=(this.end-this.start)/this.steps;if(this.yoyo){var m;this.direction===0?(d+=f,d>=this.end&&(m=d-this.end,d=this.end-m,this.direction=1)):(d-=f,d<=this.start&&(m=this.start-d,d=this.start+m,this.direction=0)),this.counter=d}else this.counter=n(d+f,this.start,this.end);return this.current=c,c},easedValueEmit:function(c,d){if(c&&c.data[d]){var f=c.data[d];f.min=this.start,f.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(c,d,f){var m=c.data[d],y,S=this.ease(f);return this.interpolation?y=this.interpolation(this.start,S):y=(m.max-m.min)*S+m.min,this.current=y,y},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});v.exports=l}),24502:((v,T,t)=>{var h=t(83419),g=t(95540),o=t(20286),a=new h({Extends:o,initialize:function(e,s,u,n,l){if(typeof e=="object"){var c=e;e=g(c,"x",0),s=g(c,"y",0),u=g(c,"power",0),n=g(c,"epsilon",100),l=g(c,"gravity",50)}else e===void 0&&(e=0),s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n=100),l===void 0&&(l=50);o.call(this,e,s,!0),this._gravity=l,this._power=u*l,this._epsilon=n*n},update:function(r,e){var s=this.x-r.x,u=this.y-r.y,n=s*s+u*u;if(n!==0){var l=Math.sqrt(n);n<this._epsilon&&(n=this._epsilon);var c=this._power*e/(n*l)*100;r.velocityX+=s*c,r.velocityY+=u*c}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(r){this._epsilon=r*r}},power:{get:function(){return this._power/this._gravity},set:function(r){this._power=r*this._gravity}},gravity:{get:function(){return this._gravity},set:function(r){var e=this.power;this._gravity=r,this.power=e}}});v.exports=a}),56480:((v,T,t)=>{var h=t(9674),g=t(45319),o=t(83419),a=t(39506),r=t(87841),e=t(11520),s=t(26099),u=new o({initialize:function(l){this.emitter=l,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new s,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=l.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new h(this)),this.bounds=new r},emit:function(n,l,c,d,f,m){return this.emitter.emit(n,l,c,d,f,m)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(n,l){n===void 0&&(n=0),l===void 0&&(l=0),this.x=n,this.y=l},fire:function(n,l){var c=this.emitter,d=c.ops,f=c.getAnim();if(f?this.anims.play(f):(this.frame=c.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(c.getEmitZone(this),n===void 0?this.x+=d.x.onEmit(this,"x"):d.x.steps>0?this.x+=n+d.x.onEmit(this,"x"):this.x+=n,l===void 0?this.y+=d.y.onEmit(this,"y"):d.y.steps>0?this.y+=l+d.y.onEmit(this,"y"):this.y+=l,this.life=d.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=d.delay.onEmit(this,"delay"),this.holdCurrent=d.hold.onEmit(this,"hold"),this.scaleX=d.scaleX.onEmit(this,"scaleX"),this.scaleY=d.scaleY.active?d.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=d.rotate.onEmit(this,"rotate"),this.rotation=a(this.angle),c.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&c.getDeathZone(this))return this.lifeCurrent=0,!1;var m=d.speedX.onEmit(this,"speedX"),y=d.speedY.active?d.speedY.onEmit(this,"speedY"):m;if(c.radial){var S=a(d.angle.onEmit(this,"angle"));this.velocityX=Math.cos(S)*Math.abs(m),this.velocityY=Math.sin(S)*Math.abs(y)}else if(c.moveTo){var C=d.moveToX.onEmit(this,"moveToX"),E=d.moveToY.onEmit(this,"moveToY"),P=this.life/1e3;this.velocityX=(C-this.x)/P,this.velocityY=(E-this.y)/P}else this.velocityX=m,this.velocityY=y;return c.acceleration&&(this.accelerationX=d.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=d.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=d.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=d.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=d.bounce.onEmit(this,"bounce"),this.alpha=d.alpha.onEmit(this,"alpha"),d.color.active?this.tint=d.color.onEmit(this,"tint"):this.tint=d.tint.onEmit(this,"tint"),!0},update:function(n,l,c){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=n,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=n,!1;this.anims&&this.anims.update(0,n);var d=this.emitter,f=d.ops,m=1-this.lifeCurrent/this.life;if(this.lifeT=m,this.x=f.x.onUpdate(this,"x",m,this.x),this.y=f.y.onUpdate(this,"y",m,this.y),d.moveTo){var y=f.moveToX.onUpdate(this,"moveToX",m,d.moveToX),S=f.moveToY.onUpdate(this,"moveToY",m,d.moveToY),C=this.lifeCurrent/1e3;this.velocityX=(y-this.x)/C,this.velocityY=(S-this.y)/C}return this.computeVelocity(d,n,l,c,m),this.scaleX=f.scaleX.onUpdate(this,"scaleX",m,this.scaleX),f.scaleY.active?this.scaleY=f.scaleY.onUpdate(this,"scaleY",m,this.scaleY):this.scaleY=this.scaleX,this.angle=f.rotate.onUpdate(this,"rotate",m,this.angle),this.rotation=a(this.angle),d.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=g(f.alpha.onUpdate(this,"alpha",m,this.alpha),0,1),f.color.active?this.tint=f.color.onUpdate(this,"color",m,this.tint):this.tint=f.tint.onUpdate(this,"tint",m,this.tint),this.lifeCurrent-=n,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(n,l,c,d,f){var m=n.ops,y=this.velocityX,S=this.velocityY,C=m.accelerationX.onUpdate(this,"accelerationX",f,this.accelerationX),E=m.accelerationY.onUpdate(this,"accelerationY",f,this.accelerationY),P=m.maxVelocityX.onUpdate(this,"maxVelocityX",f,this.maxVelocityX),A=m.maxVelocityY.onUpdate(this,"maxVelocityY",f,this.maxVelocityY);this.bounce=m.bounce.onUpdate(this,"bounce",f,this.bounce),y+=n.gravityX*c+C*c,S+=n.gravityY*c+E*c,y=g(y,-P,P),S=g(S,-A,A),this.velocityX=y,this.velocityY=S,this.x+=y*c,this.y+=S*c,n.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var F=0;F<d.length;F++){var G=d[F];G.active&&G.update(this,l,c,f)}},setSizeToFrame:function(){},getBounds:function(n){n===void 0&&(n=this.emitter.getWorldTransformMatrix());var l=Math.abs(n.scaleX)*this.scaleX,c=Math.abs(n.scaleY)*this.scaleY,d=this.x,f=this.y,m=this.rotation,y=this.frame.width*l/2,S=this.frame.height*c/2,C=this.bounds,E=new s(d-y,f-S),P=new s(d+y,f-S),A=new s(d-y,f+S),F=new s(d+y,f+S);return m!==0&&(e(E,d,f,m),e(P,d,f,m),e(A,d,f,m),e(F,d,f,m)),n.transformPoint(E.x,E.y,E),n.transformPoint(P.x,P.y,P),n.transformPoint(A.x,A.y,A),n.transformPoint(F.x,F.y,F),C.x=Math.min(E.x,P.x,A.x,F.x),C.y=Math.min(E.y,P.y,A.y,F.y),C.width=Math.max(E.x,P.x,A.x,F.x)-C.x,C.height=Math.max(E.y,P.y,A.y,F.y)-C.y,C},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});v.exports=u}),69601:((v,T,t)=>{var h=t(83419),g=t(20286),o=t(87841),a=new h({Extends:g,initialize:function(e,s,u,n,l,c,d,f){l===void 0&&(l=!0),c===void 0&&(c=!0),d===void 0&&(d=!0),f===void 0&&(f=!0),g.call(this,e,s,!0),this.bounds=new o(e,s,u,n),this.collideLeft=l,this.collideRight=c,this.collideTop=d,this.collideBottom=f},update:function(r){var e=this.bounds,s=-r.bounce,u=r.worldPosition;u.x<e.x&&this.collideLeft?(r.x+=e.x-u.x,r.velocityX*=s):u.x>e.right&&this.collideRight&&(r.x-=u.x-e.right,r.velocityX*=s),u.y<e.y&&this.collideTop?(r.y+=e.y-u.y,r.velocityY*=s):u.y>e.bottom&&this.collideBottom&&(r.y-=u.y-e.bottom,r.velocityY*=s)}});v.exports=a}),31600:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(53774),a=t(43459),r=t(26388),e=t(19909),s=t(76472),u=t(44777),n=t(20696),l=t(95643),c=t(95540),d=t(26546),f=t(24502),m=t(69036),y=t(1985),S=t(97022),C=t(86091),E=t(73162),P=t(20074),A=t(269),F=t(56480),G=t(69601),D=t(68875),L=t(87841),b=t(59996),I=t(72905),N=t(90668),Z=t(19186),U=t(61340),W=t(26099),X=t(15994),V=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],O=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],z=new h({Extends:l,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,N],initialize:function(Y,k,J,j,tt){l.call(this,Y,"ParticleEmitter"),this.particleClass=F,this.config=null,this.ops={accelerationX:new u("accelerationX",0),accelerationY:new u("accelerationY",0),alpha:new u("alpha",1),angle:new u("angle",{min:0,max:360},!0),bounce:new u("bounce",0),color:new s("color"),delay:new u("delay",0,!0),hold:new u("hold",0,!0),lifespan:new u("lifespan",1e3,!0),maxVelocityX:new u("maxVelocityX",1e4),maxVelocityY:new u("maxVelocityY",1e4),moveToX:new u("moveToX",0),moveToY:new u("moveToY",0),quantity:new u("quantity",1,!0),rotate:new u("rotate",0),scaleX:new u("scaleX",1),scaleY:new u("scaleY",1),speedX:new u("speedX",0,!0),speedY:new u("speedY",0,!0),tint:new u("tint",16777215),x:new u("x",0),y:new u("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new W,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new U,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new E(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(k,J),this.setTexture(j),tt&&this.setConfig(tt)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(B){if(!B)return this;this.config=B;var Y=0,k="",J=this.ops;for(Y=0;Y<O.length;Y++)k=O[Y],J[k].loadConfig(B);for(Y=0;Y<V.length;Y++)k=V[Y],S(B,k)&&(this[k]=c(B,k));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=m(B,["moveToX","moveToY"]),S(B,"speed")&&(J.speedX.loadConfig(B,"speed"),J.speedY.active=!1),(y(B,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),S(B,"scale")&&(J.scaleX.loadConfig(B,"scale"),J.scaleY.active=!1),S(B,"callbackScope")){var j=c(B,"callbackScope",null);this.emitCallbackScope=j,this.deathCallbackScope=j}if(S(B,"emitZone")&&this.addEmitZone(B.emitZone),S(B,"deathZone")&&this.addDeathZone(B.deathZone),S(B,"bounds")){var tt=this.addParticleBounds(B.bounds);tt.collideLeft=c(B,"collideLeft",!0),tt.collideRight=c(B,"collideRight",!0),tt.collideTop=c(B,"collideTop",!0),tt.collideBottom=c(B,"collideBottom",!0)}return S(B,"followOffset")&&this.followOffset.setFromObject(c(B,"followOffset",0)),S(B,"texture")&&this.setTexture(B.texture),S(B,"frame")?this.setEmitterFrame(B.frame):S(B,"anim")&&this.setAnim(B.anim),S(B,"reserve")&&this.reserve(B.reserve),S(B,"advance")&&this.fastForward(B.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(n.START,this),this},updateConfig:function(B){return B&&(this.config?this.setConfig(A(this.config,B)):this.setConfig(B)),this},toJSON:function(){var B=o(this),Y=0,k="";for(Y=0;Y<V.length;Y++)k=V[Y],B[k]=this[k];var J=this.ops;for(Y=0;Y<O.length;Y++)k=O[Y],J[k]&&(B[k]=J[k].toJSON());return J.speedY.active||(delete B.speedX,B.speed=J.speedX.toJSON()),this.scaleX===this.scaleY&&(delete B.scaleX,delete B.scaleY,B.scale=J.scaleX.toJSON()),B},resetCounters:function(B,Y){var k=this.counters;k.fill(0),k[0]=B,Y&&(k[5]=1)},startFollow:function(B,Y,k,J){return Y===void 0&&(Y=0),k===void 0&&(k=0),J===void 0&&(J=!1),this.follow=B,this.followOffset.set(Y,k),this.trackVisible=J,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var B=this.frames,Y=B.length,k;return Y===1?k=B[0]:this.randomFrame?k=d(B):(k=B[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===Y&&(this.currentFrame=0))),this.texture.get(k)},setEmitterFrame:function(B,Y,k){Y===void 0&&(Y=!0),k===void 0&&(k=1),this.randomFrame=Y,this.frameQuantity=k,this.currentFrame=0;var J=typeof B;if(this.frames.length=0,Array.isArray(B))this.frames=this.frames.concat(B);else if(J==="string"||J==="number")this.frames.push(B);else if(J==="object"){var j=B;B=c(j,"frames",null),B&&(this.frames=this.frames.concat(B));var tt=c(j,"cycle",!1);this.randomFrame=!tt,this.frameQuantity=c(j,"quantity",k)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var B=this.anims,Y=B.length;if(Y===0)return null;if(Y===1)return B[0];if(this.randomAnim)return d(B);var k=B[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=X(this.currentAnim+1,0,Y)),k},setAnim:function(B,Y,k){Y===void 0&&(Y=!0),k===void 0&&(k=1),this.randomAnim=Y,this.animQuantity=k,this.currentAnim=0;var J=typeof B;if(this.anims.length=0,Array.isArray(B))this.anims=this.anims.concat(B);else if(J==="string")this.anims.push(B);else if(J==="object"){var j=B;B=c(j,"anims",null),B&&(this.anims=this.anims.concat(B));var tt=c(j,"cycle",!1);this.randomAnim=!tt,this.animQuantity=c(j,"quantity",k)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(B){return B===void 0&&(B=!0),this.radial=B,this},addParticleBounds:function(B,Y,k,J,j,tt,ut,ht){if(typeof B=="object"){var st=B;B=st.x,Y=st.y,k=S(st,"w")?st.w:st.width,J=S(st,"h")?st.h:st.height}return this.addParticleProcessor(new G(B,Y,k,J,j,tt,ut,ht))},setParticleSpeed:function(B,Y){return Y===void 0&&(Y=B),this.ops.speedX.onChange(B),B===Y?this.ops.speedY.active=!1:this.ops.speedY.onChange(Y),this.radial=!0,this},setParticleScale:function(B,Y){return B===void 0&&(B=1),Y===void 0&&(Y=B),this.ops.scaleX.onChange(B),this.ops.scaleY.onChange(Y),this},setParticleGravity:function(B,Y){return this.gravityX=B,this.gravityY=Y,this},setParticleAlpha:function(B){return this.ops.alpha.onChange(B),this},setParticleTint:function(B){return this.ops.tint.onChange(B),this},setEmitterAngle:function(B){return this.ops.angle.onChange(B),this},setParticleLifespan:function(B){return this.ops.lifespan.onChange(B),this},setQuantity:function(B){return this.quantity=B,this},setFrequency:function(B,Y){return this.frequency=B,this.flowCounter=B>0?B:0,Y&&(this.quantity=Y),this},addDeathZone:function(B){Array.isArray(B)||(B=[B]);for(var Y,k=[],J=0;J<B.length;J++)if(Y=B[J],Y instanceof r)k.push(Y);else if(typeof Y.contains=="function")Y=new r(Y,!0),k.push(Y);else{var j=c(Y,"type","onEnter"),tt=c(Y,"source",null);if(tt&&typeof tt.contains=="function"){var ut=j==="onEnter";Y=new r(tt,ut),k.push(Y)}}return this.deathZones=this.deathZones.concat(k),k},removeDeathZone:function(B){return I(this.deathZones,B),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(B){Array.isArray(B)||(B=[B]);for(var Y,k=[],J=0;J<B.length;J++)if(Y=B[J],Y instanceof D||Y instanceof e)k.push(Y);else{var j=c(Y,"source",null);if(j){var tt=c(Y,"type","random");if(tt==="random"&&typeof j.getRandomPoint=="function")Y=new D(j),k.push(Y);else if(tt==="edge"&&typeof j.getPoints=="function"){var ut=c(Y,"quantity",1),ht=c(Y,"stepRate",0),st=c(Y,"yoyo",!1),dt=c(Y,"seamless",!0),lt=c(Y,"total",-1);Y=new e(j,ut,ht,st,dt,lt),k.push(Y)}}}return this.emitZones=this.emitZones.concat(k),k},removeEmitZone:function(B){return I(this.emitZones,B),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(B){var Y=this.emitZones,k=Y.length;if(k!==0){var J=Y[this.zoneIndex];J.getPoint(B),J.total>-1&&(this.zoneTotal++,this.zoneTotal===J.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===k&&(this.zoneIndex=0)))}},getDeathZone:function(B){for(var Y=this.deathZones,k=0;k<Y.length;k++){var J=Y[k];if(J.willKill(B))return this.emit(n.DEATH_ZONE,this,B,J),!0}return!1},setEmitZone:function(B){var Y;return isFinite(B)?Y=B:Y=this.emitZones.indexOf(B),Y>=0&&(this.zoneIndex=Y),this},addParticleProcessor:function(B){return this.processors.exists(B)||(B.emitter&&B.emitter.removeParticleProcessor(B),this.processors.add(B),B.emitter=this),B},removeParticleProcessor:function(B){return this.processors.exists(B)&&(this.processors.remove(B,!0),B.emitter=null),B},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(B){return this.addParticleProcessor(new f(B))},reserve:function(B){var Y=this.dead;if(this.maxParticles>0){var k=this.getParticleCount();k+B>this.maxParticles&&(B=this.maxParticles-(k+B))}for(var J=0;J<B;J++)Y.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(B,Y){return B===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof B=="function"&&(this.emitCallback=B,Y&&(this.emitCallbackScope=Y)),this},onParticleDeath:function(B,Y){return B===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof B=="function"&&(this.deathCallback=B,Y&&(this.deathCallbackScope=Y)),this},killAll:function(){for(var B=this.dead,Y=this.alive;Y.length>0;)B.push(Y.pop());return this},forEachAlive:function(B,Y){for(var k=this.alive,J=k.length,j=0;j<J;j++)B.call(Y,k[j],this);return this},forEachDead:function(B,Y){for(var k=this.dead,J=k.length,j=0;j<J;j++)B.call(Y,k[j],this);return this},start:function(B,Y){return B===void 0&&(B=0),this.emitting||(B>0&&this.fastForward(B),this.emitting=!0,this.resetCounters(this.frequency,!0),Y!==void 0&&(this.duration=Math.abs(Y)),this.emit(n.START,this)),this},stop:function(B){return B===void 0&&(B=!1),this.emitting&&(this.emitting=!1,B&&this.killAll(),this.emit(n.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(B,Y){return B===void 0&&(B=""),Y===void 0&&(Y=this.true),this.sortProperty=B,this.sortOrderAsc=Y,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(B){return this.sortProperty!==""?B=this.depthSortCallback:B=null,this.sortCallback=B,this},depthSort:function(){return Z(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(B,Y){var k=this.sortProperty;return this.sortOrderAsc?B[k]-Y[k]:Y[k]-B[k]},flow:function(B,Y,k){return Y===void 0&&(Y=1),this.emitting=!1,this.frequency=B,this.quantity=Y,k!==void 0&&(this.stopAfter=k),this.start()},explode:function(B,Y,k){this.frequency=-1,this.resetCounters(-1,!0);var J=this.emitParticle(B,Y,k);return this.emit(n.EXPLODE,this,J),J},emitParticleAt:function(B,Y,k){return this.emitParticle(k,B,Y)},emitParticle:function(B,Y,k){if(!this.atLimit()){B===void 0&&(B=this.ops.quantity.onEmit());for(var J=this.dead,j=this.stopAfter,tt=this.follow?this.follow.x+this.followOffset.x:Y,ut=this.follow?this.follow.y+this.followOffset.y:k,ht=0;ht<B;ht++){var st=J.pop();if(st||(st=new this.particleClass(this)),st.fire(tt,ut)?(this.particleBringToTop?this.alive.push(st):this.alive.unshift(st),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,st,this)):this.dead.push(st),j>0&&(this.stopCounter++,this.stopCounter>=j)||this.atLimit())break}return st}},fastForward:function(B,Y){Y===void 0&&(Y=1e3/60);var k=0;for(this.skipping=!0;k<Math.abs(B);)this.preUpdate(0,Y),k+=Y;return this.skipping=!1,this},preUpdate:function(B,Y){Y*=this.timeScale;var k=Y/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var J=this.getProcessors(),j=this.alive,tt=this.dead,ut=0,ht=[],st=j.length;for(ut=0;ut<st;ut++){var dt=j[ut];dt.update(Y,k,J)&&ht.push({index:ut,particle:dt})}if(st=ht.length,st>0){var lt=this.deathCallback,ft=this.deathCallbackScope;for(ut=st-1;ut>=0;ut--){var Lt=ht[ut];j.splice(Lt.index,1),tt.push(Lt.particle),lt&&lt.call(ft,Lt.particle),Lt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&j.length===0&&(this.completeFlag=0,this.emit(n.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=Y;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=Y,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(B){for(var Y=this.getWorldTransformMatrix(),k=this.alive,J=k.length,j=[],tt=0;tt<J;tt++){var ut=k[tt];b(B,ut.getBounds(Y))&&j.push(ut)}return j},getBounds:function(B,Y,k,J){B===void 0&&(B=0),Y===void 0&&(Y=0),k===void 0&&(k=1e3/60),J===void 0&&(J=new L);var j=this.getWorldTransformMatrix(),tt,ut,ht=this.alive,st=!1;if(J.setTo(0,0,0,0),Y>0){var dt=0;for(this.skipping=!0;dt<Math.abs(Y);){for(this.preUpdate(0,k),tt=0;tt<ht.length;tt++)ut=ht[tt].getBounds(j),st?P(J,ut):(st=!0,a(ut,J));dt+=k}this.skipping=!1}else for(tt=0;tt<ht.length;tt++)ut=ht[tt].getBounds(j),st?P(J,ut):(st=!0,a(ut,J));return B>0&&C(J,B,B),J},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(B){this.ops.x.onChange(B)}},particleY:{get:function(){return this.ops.y.current},set:function(B){this.ops.y.onChange(B)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(B){this.ops.accelerationX.onChange(B)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(B){this.ops.accelerationY.onChange(B)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(B){this.ops.maxVelocityX.onChange(B)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(B){this.ops.maxVelocityY.onChange(B)}},speed:{get:function(){return this.ops.speedX.current},set:function(B){this.ops.speedX.onChange(B),this.ops.speedY.onChange(B)}},speedX:{get:function(){return this.ops.speedX.current},set:function(B){this.ops.speedX.onChange(B)}},speedY:{get:function(){return this.ops.speedY.current},set:function(B){this.ops.speedY.onChange(B)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(B){this.ops.moveToX.onChange(B)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(B){this.ops.moveToY.onChange(B)}},bounce:{get:function(){return this.ops.bounce.current},set:function(B){this.ops.bounce.onChange(B)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(B){this.ops.scaleX.onChange(B)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(B){this.ops.scaleY.onChange(B)}},particleColor:{get:function(){return this.ops.color.current},set:function(B){this.ops.color.onChange(B)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(B){this.ops.color.setEase(B)}},particleTint:{get:function(){return this.ops.tint.current},set:function(B){this.ops.tint.onChange(B)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(B){this.ops.alpha.onChange(B)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(B){this.ops.lifespan.onChange(B)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(B){this.ops.angle.onChange(B)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(B){this.ops.rotate.onChange(B)}},quantity:{get:function(){return this.ops.quantity.current},set:function(B){this.ops.quantity.onChange(B)}},delay:{get:function(){return this.ops.delay.current},set:function(B){this.ops.delay.onChange(B)}},hold:{get:function(){return this.ops.hold.current},set:function(B){this.ops.hold.onChange(B)}},flowCounter:{get:function(){return this.counters[0]},set:function(B){this.counters[0]=B}},frameCounter:{get:function(){return this.counters[1]},set:function(B){this.counters[1]=B}},animCounter:{get:function(){return this.counters[2]},set:function(B){this.counters[2]=B}},elapsed:{get:function(){return this.counters[3]},set:function(B){this.counters[3]=B}},stopCounter:{get:function(){return this.counters[4]},set:function(B){this.counters[4]=B}},completeFlag:{get:function(){return this.counters[5]},set:function(B){this.counters[5]=B}},zoneIndex:{get:function(){return this.counters[6]},set:function(B){this.counters[6]=B}},zoneTotal:{get:function(){return this.counters[7]},set:function(B){this.counters[7]=B}},currentFrame:{get:function(){return this.counters[8]},set:function(B){this.counters[8]=B}},currentAnim:{get:function(){return this.counters[9]},set:function(B){this.counters[9]=B}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var B,Y=this.ops;for(B=0;B<O.length;B++){var k=O[B];Y[k].destroy()}for(B=0;B<this.alive.length;B++)this.alive[B].destroy();for(B=0;B<this.dead.length;B++)this.dead[B].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});v.exports=z}),9871:((v,T,t)=>{var h=t(59996),g=t(61340),o=new g,a=new g,r=new g,e=new g,s=function(u,n,l,c){var d=o,f=a,m=r,y=e;c?(y.loadIdentity(),y.multiply(c),y.translate(n.x,n.y),y.rotate(n.rotation),y.scale(n.scaleX,n.scaleY)):y.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY);var S=u.currentContext,C=l.roundPixels,E=l.alpha,P=n.alpha,A=n.alive,F=A.length,G=n.viewBounds;if(!(!n.visible||F===0||G&&!h(G,l.worldView))){n.sortCallback&&n.depthSort(),l.addToRenderList(n);var D=n.scrollFactorX,L=n.scrollFactorY;S.save(),S.globalCompositeOperation=u.blendModes[n.blendMode];for(var b=0;b<F;b++){var I=A[b],N=I.alpha*P*E;if(!(N<=0||I.scaleX===0||I.scaleY===0)){m.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),d.copyFrom(l.matrix),d.multiplyWithOffset(y,-l.scrollX*D,-l.scrollY*L),m.e=I.x,m.f=I.y,d.multiply(m,f);var Z=I.frame,U=Z.canvasData;if(U.width>0&&U.height>0){var W=-Z.halfWidth,X=-Z.halfHeight;S.globalAlpha=N,S.save(),f.setToContext(S),C&&(W=Math.round(W),X=Math.round(X)),S.imageSmoothingEnabled=!Z.source.scaleMode,S.drawImage(Z.source.image,U.x,U.y,U.width,U.height,W,X,U.width,U.height),S.restore()}}}S.restore()}};v.exports=s}),92730:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(95540),r=t(31600);g.register("particles",function(e,s){e===void 0&&(e={});var u=o(e,"key",null),n=a(e,"config",null),l=new r(this.scene,0,0,u);return s!==void 0&&(e.add=s),h(this.scene,l,e),n&&l.setConfig(n),l})}),676:((v,T,t)=>{var h=t(39429),g=t(31600);h.register("particles",function(o,a,r,e){return o!==void 0&&typeof o=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new g(this.scene,o,a,r,e))})}),90668:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(21188),o=t(9871),v.exports={renderWebGL:g,renderCanvas:o}}),21188:((v,T,t)=>{var h=t(59996),g=t(61340),o=t(70554),a=new g,r=new g,e=new g,s=new g,u=function(n,l,c,d){var f=n.pipelines.set(l.pipeline),m=a,y=r,S=e,C=s;d?(C.loadIdentity(),C.multiply(d),C.translate(l.x,l.y),C.rotate(l.rotation),C.scale(l.scaleX,l.scaleY)):C.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var E=o.getTintAppendFloatAlpha,P=c.alpha,A=l.alpha;n.pipelines.preBatch(l);var F=l.alive,G=F.length,D=l.viewBounds;if(!(G===0||D&&!h(D,c.worldView))){l.sortCallback&&l.depthSort(),c.addToRenderList(l),m.copyFrom(c.matrix),m.multiplyWithOffset(C,-c.scrollX*l.scrollFactorX,-c.scrollY*l.scrollFactorY),n.setBlendMode(l.blendMode),l.mask&&(l.mask.preRenderWebGL(n,l,c),n.pipelines.set(l.pipeline));for(var L=l.tintFill,b,I,N=0;N<G;N++){var Z=F[N],U=Z.alpha*A*P;if(!(U<=0||Z.scaleX===0||Z.scaleY===0)){S.applyITRS(Z.x,Z.y,Z.rotation,Z.scaleX,Z.scaleY),S.e=Z.x,S.f=Z.y,m.multiply(S,y);var W=Z.frame;W.glTexture!==I&&(I=W.glTexture,b=f.setGameObject(l,W));var X=-W.halfWidth,V=-W.halfHeight,O=y.setQuad(X,V,X+W.width,V+W.height),z=E(Z.tint,U);f.shouldFlush(6)&&(f.flush(),b=f.setGameObject(l,W)),f.batchQuad(l,O[0],O[1],O[2],O[3],O[4],O[5],O[6],O[7],W.u0,W.v0,W.u1,W.v1,z,z,z,z,L,I,b)}}l.mask&&l.mask.postRenderWebGL(n,c),n.pipelines.postBatch(l)}};v.exports=u}),20286:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){a===void 0&&(a=0),r===void 0&&(r=0),e===void 0&&(e=!0),this.emitter,this.x=a,this.y=r,this.active=e},update:function(){},destroy:function(){this.emitter=null}});v.exports=g}),9774:(v=>{v.exports="complete"}),812:(v=>{v.exports="deathzone"}),30522:(v=>{v.exports="explode"}),96695:(v=>{v.exports="start"}),18677:(v=>{v.exports="stop"}),20696:((v,T,t)=>{v.exports={COMPLETE:t(9774),DEATH_ZONE:t(812),EXPLODE:t(30522),START:t(96695),STOP:t(18677)}}),18404:((v,T,t)=>{v.exports={EmitterColorOp:t(76472),EmitterOp:t(44777),Events:t(20696),GravityWell:t(24502),Particle:t(56480),ParticleBounds:t(69601),ParticleEmitter:t(31600),ParticleProcessor:t(20286),Zones:t(21024)}}),26388:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r){this.source=a,this.killOnEnter=r},willKill:function(o){var a=o.worldPosition,r=this.source.contains(a.x,a.y);return r&&this.killOnEnter||!r&&!this.killOnEnter}});v.exports=g}),19909:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,s,u,n){s===void 0&&(s=!1),u===void 0&&(u=!0),n===void 0&&(n=-1),this.source=a,this.points=[],this.quantity=r,this.stepRate=e,this.yoyo=s,this.counter=-1,this.seamless=u,this._length=0,this._direction=0,this.total=n,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var o=this.points[0],a=this.points[this.points.length-1];o.x===a.x&&o.y===a.y&&this.points.pop()}var r=this._length;return this._length=this.points.length,this._length<r&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(o){return this.source=o,this.updateSource()},getPoint:function(o){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(o.x=a.x,o.y=a.y)}});v.exports=g}),68875:((v,T,t)=>{var h=t(83419),g=t(26099),o=new h({initialize:function(r){this.source=r,this._tempVec=new g,this.total=-1},getPoint:function(a){var r=this._tempVec;this.source.getRandomPoint(r),a.x=r.x,a.y=r.y}});v.exports=o}),21024:((v,T,t)=>{v.exports={DeathZone:t(26388),EdgeZone:t(19909),RandomZone:t(68875)}}),1159:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(68287),a=new h({Extends:o,Mixins:[g.PathFollower],initialize:function(e,s,u,n,l,c){o.call(this,e,u,n,l,c),this.path=s},preUpdate:function(r,e){this.anims.update(r,e),this.pathUpdate(r)}});v.exports=a}),90145:((v,T,t)=>{var h=t(39429),g=t(1159);h.register("follower",function(o,a,r,e,s){var u=new g(this.scene,o,a,r,e,s);return this.displayList.add(u),this.updateList.add(u),u})}),33663:((v,T,t)=>{var h=t(9674),g=t(83419),o=t(48803),a=t(90664),r=t(4703),e=t(45650),s=new g({Extends:r,initialize:function(n,l,c,d,f,m,y,S){d||(d="__DEFAULT"),r.call(this,n,l,c,d,f),this.type="Plane",this.anims=new h(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(m,y,S),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(u,n,l){u===void 0&&(u=8),n===void 0&&(n=8),l===void 0&&(l=!1);var c=!1;return l&&(c=!0),this.gridWidth=u,this.gridHeight=n,this.isTiled=l,this.clear(),o({mesh:this,widthSegments:u,heightSegments:n,isOrtho:!1,tile:l,flipY:c}),this},setSizeToFrame:function(u){u===void 0&&(u=!0);var n=this.frame;if(this.setPerspective(this.width/n.width,this.height/n.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!u)return this;var l=this.gridWidth,c=this.gridHeight,d=this.vertices,f=n.u0,m=n.u1,y=n.v0,S=n.v1,C,E,P=0;if(this.isTiled)for(y=n.v1,S=n.v0,E=0;E<c;E++)for(C=0;C<l;C++)d[P++].setUVs(f,S),d[P++].setUVs(f,y),d[P++].setUVs(m,S),d[P++].setUVs(f,y),d[P++].setUVs(m,y),d[P++].setUVs(m,S);else{var A=l+1,F=c+1,G=m-f,D=S-y,L=[];for(E=0;E<F;E++)for(C=0;C<A;C++){var b=f+G*(C/l),I=y+D*(E/c);L.push(b,I)}for(E=0;E<c;E++)for(C=0;C<l;C++){var N=(C+A*E)*2,Z=(C+A*(E+1))*2,U=(C+1+A*(E+1))*2,W=(C+1+A*E)*2;d[P++].setUVs(L[N],L[N+1]),d[P++].setUVs(L[Z],L[Z+1]),d[P++].setUVs(L[W],L[W+1]),d[P++].setUVs(L[Z],L[Z+1]),d[P++].setUVs(L[U],L[U+1]),d[P++].setUVs(L[W],L[W+1])}}return this},setViewHeight:function(u){u===void 0&&(u=this.frame.height);var n=this.fov*(Math.PI/180);this.viewPosition.z=this.height/u/Math.tan(n/2),this.dirtyCache[10]=1},createCheckerboard:function(u,n,l,c,d){u===void 0&&(u=16777215),n===void 0&&(n=255),l===void 0&&(l=255),c===void 0&&(c=255),d===void 0&&(d=128);for(var f=a(u),m=a(n),y=[],S=0;S<16;S++)for(var C=0;C<16;C++)S<8&&C<8||S>7&&C>7?y.push(f.r,f.g,f.b,l):y.push(m.r,m.g,m.b,c);var E=this.scene.sys.textures.addUint8Array(e(),new Uint8Array(y),16,16);return this.removeCheckerboard(),this.setTexture(E),this.setSizeToFrame(),this.setViewHeight(d),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(u,n){return this.anims.play(u,n)},playReverse:function(u,n){return this.anims.playReverse(u,n)},playAfterDelay:function(u,n){return this.anims.playAfterDelay(u,n)},playAfterRepeat:function(u,n){return this.anims.playAfterRepeat(u,n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(u){return this.anims.stopAfterDelay(u)},stopAfterRepeat:function(u){return this.anims.stopAfterRepeat(u)},stopOnFrame:function(u){return this.anims.stopOnFrame(u)},preUpdate:function(u,n){r.prototype.preUpdate.call(this,u,n),this.anims.update(u,n)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});v.exports=s}),56015:((v,T,t)=>{var h=t(25305),g=t(13059),o=t(44603),a=t(23568),r=t(35154),e=t(33663);o.register("plane",function(s,u){s===void 0&&(s={});var n=a(s,"key",null),l=a(s,"frame",null),c=r(s,"width",8),d=r(s,"height",8),f=r(s,"tile",!1),m=new e(this.scene,0,0,n,l,c,d,f);u!==void 0&&(s.add=u);var y=r(s,"checkerboard",null);if(y){var S=r(y,"color1",16777215),C=r(y,"color2",255),E=r(y,"alpha1",255),P=r(y,"alpha2",255),A=r(y,"height",128);m.createCheckerboard(S,C,E,P,A)}return h(this.scene,m,s),g(m,s),m})}),30985:((v,T,t)=>{var h=t(33663),g=t(39429);g.register("plane",function(o,a,r,e,s,u,n){return this.displayList.add(new h(this.scene,o,a,r,e,s,u,n))})}),80321:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(30100),r=t(36060),e=t(67277),s=new h({Extends:o,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible,e],initialize:function(n,l,c,d,f,m,y){d===void 0&&(d=16777215),f===void 0&&(f=128),m===void 0&&(m=1),y===void 0&&(y=.1),o.call(this,n,"PointLight"),this.initPipeline(r.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(l,c),this.color=a(d),this.intensity=m,this.attenuation=y,this.width=f*2,this.height=f*2,this._radius=f},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this.width=u*2,this.height=u*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});v.exports=s}),39829:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(80321);g.register("pointlight",function(r,e){r===void 0&&(r={});var s=o(r,"color",16777215),u=o(r,"radius",128),n=o(r,"intensity",1),l=o(r,"attenuation",.1),c=new a(this.scene,0,0,s,u,n,l);return e!==void 0&&(r.add=e),h(this.scene,c,r),c})}),71255:((v,T,t)=>{var h=t(39429),g=t(80321);h.register("pointlight",function(o,a,r,e,s,u){return this.displayList.add(new g(this.scene,o,a,r,e,s,u))})}),67277:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(57787),v.exports={renderWebGL:g,renderCanvas:o}}),57787:((v,T,t)=>{var h=t(91296),g=function(o,a,r,e){r.addToRenderList(a);var s=o.pipelines.set(a.pipeline),u=h(a,r,e).calc,n=a.width,l=a.height,c=-a._radius,d=-a._radius,f=c+n,m=d+l,y=u.getX(0,0),S=u.getY(0,0),C=u.getX(c,d),E=u.getY(c,d),P=u.getX(c,m),A=u.getY(c,m),F=u.getX(f,m),G=u.getY(f,m),D=u.getX(f,d),L=u.getY(f,d);o.pipelines.preBatch(a),s.batchPointLight(a,r,C,E,P,A,F,G,D,L,y,S),o.pipelines.postBatch(a)};v.exports=g}),591:((v,T,t)=>{var h=t(83419),g=t(81320),o=t(88571),a=new h({Extends:o,initialize:function(e,s,u,n,l,c){s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n=32),l===void 0&&(l=32),c===void 0&&(c=!0);var d=new g(e.sys.textures,"",n,l,c);o.call(this,e,s,u,d),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(r,e){this.width=r,this.height=e,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=r,s.hitArea.height=e),this},resize:function(r,e,s){return this.texture.setSize(r,e,s),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(r){var e=this.texture;return e.key=r,e.manager.addDynamicTexture(e)&&(this._saved=!0),e},fill:function(r,e,s,u,n,l){return this.texture.fill(r,e,s,u,n,l),this},clear:function(){return this.texture.clear(),this},stamp:function(r,e,s,u,n){return this.texture.stamp(r,e,s,u,n),this},erase:function(r,e,s){return this.texture.erase(r,e,s),this},draw:function(r,e,s,u,n){return this.texture.draw(r,e,s,u,n),this},drawFrame:function(r,e,s,u,n,l){return this.texture.drawFrame(r,e,s,u,n,l),this},repeat:function(r,e,s,u,n,l,c,d,f){return this.texture.repeat(r,e,s,u,n,l,c,d,f),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(r,e,s,u,n){return this.texture.batchDraw(r,e,s,u,n),this},batchDrawFrame:function(r,e,s,u,n,l){return this.texture.batchDrawFrame(r,e,s,u,n,l),this},endDraw:function(r){return this.texture.endDraw(r),this},snapshotArea:function(r,e,s,u,n,l,c){return this.texture.snapshotArea(r,e,s,u,n,l,c),this},snapshot:function(r,e,s){return this.snapshotArea(0,0,this.width,this.height,r,e,s)},snapshotPixel:function(r,e,s){return this.snapshotArea(r,e,1,1,s,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});v.exports=a}),34495:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(591);g.register("renderTexture",function(r,e){r===void 0&&(r={});var s=o(r,"x",0),u=o(r,"y",0),n=o(r,"width",32),l=o(r,"height",32),c=new a(this.scene,s,u,n,l);return e!==void 0&&(r.add=e),h(this.scene,c,r),c})}),60505:((v,T,t)=>{var h=t(39429),g=t(591);h.register("renderTexture",function(o,a,r,e){return this.displayList.add(new g(this.scene,o,a,r,e))})}),77757:((v,T,t)=>{var h=t(9674),g=t(83419),o=t(31401),a=t(95643),r=t(36060),e=t(38745),s=t(26099),u=new g({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Flip,o.Mask,o.Pipeline,o.PostPipeline,o.Size,o.Texture,o.Transform,o.Visible,o.ScrollFactor,e],initialize:function(l,c,d,f,m,y,S,C,E){f===void 0&&(f="__DEFAULT"),y===void 0&&(y=2),S===void 0&&(S=!0),a.call(this,l,"Rope"),this.anims=new h(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=f==="__DEFAULT",this.dirty=!1,this.horizontal=S,this._flipX=!1,this._flipY=!1,this._perp=new s,this.debugCallback=null,this.debugGraphic=null,this.setTexture(f,m),this.setPosition(c,d),this.setSizeToFrame(),this.initPipeline(r.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,E),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,l){var c=this.anims.currentFrame;this.anims.update(n,l),this.anims.currentFrame!==c&&(this.updateUVs(),this.updateVertices())},play:function(n,l,c){return this.anims.play(n,l,c),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(n,l,c){return n===void 0&&(n=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(n,l,c))},setVertical:function(n,l,c){return n===void 0&&(n=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(n,l,c)):this},setTintFill:function(n){return n===void 0&&(n=!1),this.tintFill=n,this},setAlphas:function(n,l){var c=this.points.length;if(c<1)return this;var d=this.alphas;n===void 0?n=[1]:!Array.isArray(n)&&l===void 0&&(n=[n]);var f,m=0;if(l!==void 0)for(f=0;f<c;f++)m=f*2,d[m]=n,d[m+1]=l;else if(n.length===c)for(f=0;f<c;f++)m=f*2,d[m]=n[f],d[m+1]=n[f];else{var y=n[0];for(f=0;f<c;f++)m=f*2,n.length>m&&(y=n[m]),d[m]=y,n.length>m+1&&(y=n[m+1]),d[m+1]=y}return this},setColors:function(n){var l=this.points.length;if(l<1)return this;var c=this.colors;n===void 0?n=[16777215]:Array.isArray(n)||(n=[n]);var d,f=0;if(n.length===l)for(d=0;d<l;d++)f=d*2,c[f]=n[d],c[f+1]=n[d];else{var m=n[0];for(d=0;d<l;d++)f=d*2,n.length>f&&(m=n[f]),c[f]=m,n.length>f+1&&(m=n[f+1]),c[f+1]=m}return this},setPoints:function(n,l,c){if(n===void 0&&(n=2),typeof n=="number"){var d=n;d<2&&(d=2),n=[];var f,m,y;if(this.horizontal)for(y=-this.frame.halfWidth,m=this.frame.width/(d-1),f=0;f<d;f++)n.push({x:y+f*m,y:0});else for(y=-this.frame.halfHeight,m=this.frame.height/(d-1),f=0;f<d;f++)n.push({x:0,y:y+f*m})}var S=n.length,C=this.points.length;return S<1?(console.warn("Rope: Not enough points given"),this):(S===1&&(n.unshift({x:0,y:0}),S++),C!==S&&this.resizeArrays(S),this.dirty=!0,this.points=n,this.updateUVs(),l!=null&&this.setColors(l),c!=null&&this.setAlphas(c),this)},updateUVs:function(){for(var n=this.uv,l=this.points.length,c=this.frame.u0,d=this.frame.v0,f=this.frame.u1,m=this.frame.v1,y=(f-c)/(l-1),S=(m-d)/(l-1),C=0;C<l;C++){var E=C*4,P,A,F,G;this.horizontal?(this._flipX?(P=f-C*y,F=f-C*y):(P=c+C*y,F=c+C*y),this._flipY?(A=m,G=d):(A=d,G=m)):(this._flipX?(P=c,F=f):(P=f,F=c),this._flipY?(A=m-C*S,G=m-C*S):(A=d+C*S,G=d+C*S)),n[E+0]=P,n[E+1]=A,n[E+2]=F,n[E+3]=G}return this},resizeArrays:function(n){var l=this.colors,c=this.alphas;this.vertices=new Float32Array(n*4),this.uv=new Float32Array(n*4),l=new Uint32Array(n*2),c=new Float32Array(n*2);for(var d=0;d<n*2;d++)l[d]=16777215,c[d]=1;return this.colors=l,this.alphas=c,this.dirty=!0,this},updateVertices:function(){var n=this._perp,l=this.points,c=this.vertices,d=l.length;if(this.dirty=!1,!(d<1)){for(var f,m=l[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,S=0;S<d;S++){var C=l[S],E=S*4;S<d-1?f=l[S+1]:f=C,n.x=f.y-m.y,n.y=-(f.x-m.x);var P=n.length();n.x/=P,n.y/=P,n.x*=y,n.y*=y,c[E]=C.x+n.x,c[E+1]=C.y+n.y,c[E+2]=C.x-n.x,c[E+3]=C.y-n.y,m=C}return this}},setDebug:function(n,l){return this.debugGraphic=n,!n&&!l?this.debugCallback=null:l?this.debugCallback=l:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(n,l,c){var d=n.debugGraphic,f=c[0],m=c[1],y=c[2],S=c[3];d.lineBetween(f,m,y,S);for(var C=4;C<l;C+=4){var E=c[C+0],P=c[C+1],A=c[C+2],F=c[C+3];d.lineBetween(f,m,E,P),d.lineBetween(y,S,A,F),d.lineBetween(y,S,E,P),d.lineBetween(E,P,A,F),f=E,m=P,y=A,S=F}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(n){return this._flipX=n,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(n){return this._flipY=n,this.updateUVs()}}});v.exports=u}),95262:(v=>{var T=function(){};v.exports=T}),26209:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(35154),r=t(77757);g.register("rope",function(e,s){e===void 0&&(e={});var u=o(e,"key",null),n=o(e,"frame",null),l=o(e,"horizontal",!0),c=a(e,"points",void 0),d=a(e,"colors",void 0),f=a(e,"alphas",void 0),m=new r(this.scene,0,0,u,n,c,l,d,f);return s!==void 0&&(e.add=s),h(this.scene,m,e),m})}),96819:((v,T,t)=>{var h=t(77757),g=t(39429);g.register("rope",function(o,a,r,e,s,u,n,l){return this.displayList.add(new h(this.scene,o,a,r,e,s,u,n,l))})}),38745:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(20439),o=t(95262),v.exports={renderWebGL:g,renderCanvas:o}}),20439:((v,T,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,s){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline,r),n=h(r,e,s).calc,l=r.vertices,c=r.uv,d=r.colors,f=r.alphas,m=r.alpha,y=g.getTintAppendFloatAlpha,S=e.roundPixels,C=l.length,E=Math.floor(C*.5);u.flush(),a.pipelines.preBatch(r);var P=u.setGameObject(r),A=u.vertexViewF32,F=u.vertexViewU32,G=u.vertexCount*u.currentShader.vertexComponentCount-1,D=0,L=r.tintFill;r.dirty&&r.updateVertices();for(var b=r.debugCallback,I=[],N=0;N<C;N+=2){var Z=l[N+0],U=l[N+1],W=Z*n.a+U*n.c+n.e,X=Z*n.b+U*n.d+n.f;S&&(W=Math.round(W),X=Math.round(X)),A[++G]=W,A[++G]=X,A[++G]=c[N+0],A[++G]=c[N+1],A[++G]=P,A[++G]=L,F[++G]=y(d[D],e.alpha*(f[D]*m)),D++,b&&(I[N+0]=W,I[N+1]=X)}b&&b.call(r,r,C,I),u.vertexCount+=E,u.currentBatch.count=u.vertexCount-u.currentBatch.start,a.pipelines.postBatch(r)};v.exports=o}),20071:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(95540),r=t(79291),e=t(61622),s=t(25479),u=t(61340),n=t(95428),l=t(92503),c=new h({Extends:o,Mixins:[g.ComputedSize,g.Depth,g.GetBounds,g.Mask,g.Origin,g.ScrollFactor,g.Transform,g.Visible,s],initialize:function(f,m,y,S,C,E,P,A){y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=128),E===void 0&&(E=128),o.call(this,f,"Shader"),this.blendMode=-1,this.shader;var F=f.sys.renderer;this.renderer=F,this.gl=F.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=F.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=F.width,this._rendererHeight=F.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(y,S),this.setSize(C,E),this.setOrigin(.5,.5),this.setShader(m,P,A),this.renderer.on(l.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(d){return this.renderToTexture?!0:!(o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},setRenderToTexture:function(d,f){if(!this.renderToTexture){var m=this.width,y=this.height,S=this.renderer;this.glTexture=S.createTextureFromSource(null,m,y,0),this.framebuffer=S.createFramebuffer(m,y,this.glTexture,!1),this._rendererWidth=m,this._rendererHeight=y,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),d&&(this.texture=this.scene.sys.textures.addGLTexture(d,this.glTexture))}return this.shader&&(S.pipelines.clear(),this.load(),this.flush(),S.pipelines.rebind()),this},setShader:function(d,f,m){if(this.renderer.contextLost)return this._deferSetShader={key:d,textures:f,textureData:m},this;if(f===void 0&&(f=[]),typeof d=="string"){var y=this.scene.sys.cache.shader;if(!y.has(d))return console.warn("Shader missing: "+d),this;this.shader=y.get(d)}else this.shader=d;var S=this.gl,C=this.renderer;this.program&&C.deleteProgram(this.program);var E=C.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);S.uniformMatrix4fv(S.getUniformLocation(E.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),S.uniformMatrix4fv(S.getUniformLocation(E.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),S.uniform2f(S.getUniformLocation(E.webGLProgram,"uResolution"),this.width,this.height),this.program=E;var P=new Date,A={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[P.getFullYear(),P.getMonth(),P.getDate(),P.getHours()*60*60+P.getMinutes()*60+P.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=r(!0,{},this.shader.uniforms,A):this.uniforms=A;for(var F=0;F<4;F++)f[F]&&this.setSampler2D("iChannel"+F,f[F],F,m);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(d){return this.pointer=d,this},projOrtho:function(d,f,m,y){if(this.renderer.contextLost){this._deferProjOrtho={left:d,right:f,bottom:m,top:y};return}var S=-1e3,C=1e3,E=1/(d-f),P=1/(m-y),A=1/(S-C),F=this.projectionMatrix;F[0]=-2*E,F[5]=-2*P,F[10]=2*A,F[12]=(d+f)*E,F[13]=(y+m)*P,F[14]=(C+S)*A;var G=this.program,D=this.gl,L=this.renderer;L.setProgram(G),D.uniformMatrix4fv(D.getUniformLocation(G.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=f,this._rendererHeight=m},initUniforms:function(){var d=this.renderer.glFuncMap,f=this.program;this._textureCount=0;for(var m in this.uniforms){var y=this.uniforms[m],S=y.type,C=d[S];y.uniformLocation=this.renderer.createUniformLocation(f,m),S!=="sampler2D"&&(y.glMatrix=C.matrix,y.glValueLength=C.length,y.glFunc=C.func)}},setSampler2DBuffer:function(d,f,m,y,S,C){S===void 0&&(S=0),C===void 0&&(C={});var E=this.uniforms[d];return E.value=f,C.width=m,C.height=y,E.textureData=C,this._textureCount=S,this.initSampler2D(E),this},setSampler2D:function(d,f,m,y){m===void 0&&(m=0);var S=this.scene.sys.textures;if(S.exists(f)){var C=S.getFrame(f);if(C.glTexture&&C.glTexture.isRenderTexture)return this.setSampler2DBuffer(d,C.glTexture,C.width,C.height,m,y);var E=this.uniforms[d],P=C.source;E.textureKey=f,E.source=P.image,E.value=C.glTexture,P.isGLTexture&&(y||(y={}),y.width=P.width,y.height=P.height),y&&(E.textureData=y),this._textureCount=m,this.initSampler2D(E)}return this},setUniform:function(d,f){return e(this.uniforms,d,f),this},getUniform:function(d){return a(this.uniforms,d,null)},setChannel0:function(d,f){return this.setSampler2D("iChannel0",d,0,f)},setChannel1:function(d,f){return this.setSampler2D("iChannel1",d,1,f)},setChannel2:function(d,f){return this.setSampler2D("iChannel2",d,2,f)},setChannel3:function(d,f){return this.setSampler2D("iChannel3",d,3,f)},initSampler2D:function(d){if(d.value){var f=d.textureData;if(f&&!d.value.isRenderTexture){var m=this.gl,y=d.value,S=m[a(f,"magFilter","linear").toUpperCase()],C=m[a(f,"minFilter","linear").toUpperCase()],E=m[a(f,"wrapS","repeat").toUpperCase()],P=m[a(f,"wrapT","repeat").toUpperCase()],A=m[a(f,"format","rgba").toUpperCase()],F=a(f,"flipY",!1),G=a(f,"width",y.width),D=a(f,"height",y.height),L=a(f,"source",y.pixels);f.repeat&&(E=m.REPEAT,P=m.REPEAT),f.width&&(L=null),y.update(L,G,D,F,E,P,C,S,A)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var d=this.gl,f=this.uniforms,m,y,S,C,E,P=0;for(var A in f)m=f[A],S=m.glFunc,y=m.glValueLength,C=m.uniformLocation,E=m.value,E!==null&&(y===1?m.glMatrix?S.call(d,C.webGLUniformLocation,m.transpose,E):S.call(d,C.webGLUniformLocation,E):y===2?S.call(d,C.webGLUniformLocation,E.x,E.y):y===3?S.call(d,C.webGLUniformLocation,E.x,E.y,E.z):y===4?S.call(d,C.webGLUniformLocation,E.x,E.y,E.z,E.w):m.type==="sampler2D"&&(d.activeTexture(d.TEXTURE0+P),d.bindTexture(d.TEXTURE_2D,E.webGLTexture),d.uniform1i(C.webGLUniformLocation,P),P++))},load:function(d){var f=this.gl,m=this.width,y=this.height,S=this.renderer,C=this.program,E=this.viewMatrix;if(!this.renderToTexture){var P=-this._displayOriginX,A=-this._displayOriginY;E[0]=d[0],E[1]=d[1],E[4]=d[2],E[5]=d[3],E[8]=d[4],E[9]=d[5],E[12]=E[0]*P+E[4]*A,E[13]=E[1]*P+E[5]*A}f.useProgram(C.webGLProgram),f.uniformMatrix4fv(f.getUniformLocation(C.webGLProgram,"uViewMatrix"),!1,E),f.uniformMatrix4fv(f.getUniformLocation(C.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),f.uniform2f(f.getUniformLocation(C.webGLProgram,"uResolution"),this.width,this.height);var F=this.uniforms,G=F.resolution;G.value.x=m,G.value.y=y,F.time.value=S.game.loop.getDuration();var D=this.pointer;if(D){var L=F.mouse,b=D.x/m,I=1-D.y/y;L.value.x=b.toFixed(2),L.value.y=I.toFixed(2)}this.syncUniforms()},flush:function(){var d=this.width,f=this.height,m=this.program,y=this.gl,S=this.vertexBuffer,C=this.renderer,E=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(C.setFramebuffer(this.framebuffer),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT)),y.bindBuffer(y.ARRAY_BUFFER,S.webGLBuffer);var P=y.getAttribLocation(m.webGLProgram,"inPosition");P!==-1&&(y.enableVertexAttribArray(P),y.vertexAttribPointer(P,2,y.FLOAT,!1,E,0));var A=this.vertexViewF32;A[3]=f,A[4]=d,A[5]=f,A[8]=d,A[9]=f,A[10]=d;var F=6;y.bufferSubData(y.ARRAY_BUFFER,0,this.bytes.subarray(0,F*E)),y.drawArrays(y.TRIANGLES,0,F),this.renderToTexture&&C.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var d=this._deferSetShader.key,f=this._deferSetShader.textures,m=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(d,f,m)}if(this._deferProjOrtho!==null){var y=this._deferProjOrtho.left,S=this._deferProjOrtho.right,C=this._deferProjOrtho.bottom,E=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(y,S,C,E)}},preDestroy:function(){var d=this.renderer;d.off(l.RESTORE_WEBGL,this.onContextRestored,this),d.deleteProgram(this.program),d.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(d.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),n(this.uniforms,function(f){d.deleteUniformLocation(f.uniformLocation),f.uniformLocation=null})}});v.exports=c}),80464:(v=>{var T=function(){};v.exports=T}),54935:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(20071);g.register("shader",function(r,e){r===void 0&&(r={});var s=o(r,"key",null),u=o(r,"x",0),n=o(r,"y",0),l=o(r,"width",128),c=o(r,"height",128),d=new a(this.scene,s,u,n,l,c);return e!==void 0&&(r.add=e),h(this.scene,d,r),d})}),74177:((v,T,t)=>{var h=t(20071),g=t(39429);g.register("shader",function(o,a,r,e,s,u,n){return this.displayList.add(new h(this.scene,o,a,r,e,s,u,n))})}),25479:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(19257),o=t(80464),v.exports={renderWebGL:g,renderCanvas:o}}),19257:((v,T,t)=>{var h=t(91296),g=function(o,a,r,e){if(a.shader){if(r.addToRenderList(a),o.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var s=h(a,r,e).calc;(o.width!==a._rendererWidth||o.height!==a._rendererHeight)&&a.projOrtho(0,o.width,o.height,0),a.load(s.matrix),a.flush()}o.pipelines.rebind()}};v.exports=g}),10441:((v,T,t)=>{var h=t(70554),g=function(o,a,r,e,s,u){for(var n=h.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*e),l=r.pathData,c=r.pathIndexes,d=0;d<c.length;d+=3){var f=c[d]*2,m=c[d+1]*2,y=c[d+2]*2,S=l[f+0]-s,C=l[f+1]-u,E=l[m+0]-s,P=l[m+1]-u,A=l[y+0]-s,F=l[y+1]-u,G=a.getX(S,C),D=a.getY(S,C),L=a.getX(E,P),b=a.getY(E,P),I=a.getX(A,F),N=a.getY(A,F);o.batchTri(r,G,D,L,b,I,N,0,0,1,1,n,n,n,2)}};v.exports=g}),65960:(v=>{var T=function(t,h,g,o){var a=g||h.fillColor,r=o||h.fillAlpha,e=(a&16711680)>>>16,s=(a&65280)>>>8,u=a&255;t.fillStyle="rgba("+e+","+s+","+u+","+r+")"};v.exports=T}),75177:(v=>{var T=function(t,h,g,o){var a=g||h.strokeColor,r=o||h.strokeAlpha,e=(a&16711680)>>>16,s=(a&65280)>>>8,u=a&255;t.strokeStyle="rgba("+e+","+s+","+u+","+r+")",t.lineWidth=h.lineWidth};v.exports=T}),17803:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(95643),a=t(23031),r=new h({Extends:o,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible],initialize:function(s,u,n){u===void 0&&(u="Shape"),o.call(this,s,u),this.geom=n,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(e,s){return s===void 0&&(s=1),e===void 0?this.isFilled=!1:(this.fillColor=e,this.fillAlpha=s,this.isFilled=!0),this},setStrokeStyle:function(e,s,u){return u===void 0&&(u=1),e===void 0?this.isStroked=!1:(this.lineWidth=e,this.strokeColor=s,this.strokeAlpha=u,this.isStroked=!0),this},setClosePath:function(e){return this.closePath=e,this},setSize:function(e,s){return this.width=e,this.height=s,this},setDisplaySize:function(e,s){return this.displayWidth=e,this.displayHeight=s,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}}});v.exports=r}),34682:((v,T,t)=>{var h=t(70554),g=function(o,a,r,e,s){var u=o.strokeTint,n=h.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*r);u.TL=n,u.TR=n,u.BL=n,u.BR=n;var l=a.pathData,c=l.length-1,d=a.lineWidth,f=d/2,m=l[0]-e,y=l[1]-s;a.closePath||(c-=2);for(var S=2;S<c;S+=2){var C=l[S]-e,E=l[S+1]-s;o.batchLine(m,y,C,E,f,f,d,S-2,a.closePath?S===c-1:!1),m=C,y=E}};v.exports=g}),23629:((v,T,t)=>{var h=t(13609),g=t(83419),o=t(39506),a=t(94811),r=t(96503),e=t(36383),s=t(17803),u=new g({Extends:s,Mixins:[h],initialize:function(l,c,d,f,m,y,S,C,E){c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=128),m===void 0&&(m=0),y===void 0&&(y=360),S===void 0&&(S=!1),s.call(this,l,"Arc",new r(0,0,f)),this._startAngle=m,this._endAngle=y,this._anticlockwise=S,this._iterations=.01,this.setPosition(c,d);var P=this.geom.radius*2;this.setSize(P,P),C!==void 0&&this.setFillStyle(C,E),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(n){this._iterations=n,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(n){this.geom.radius=n;var l=n*2;this.setSize(l,l),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(n){this._startAngle=n,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(n){this._endAngle=n,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(n){this._anticlockwise=n,this.updateData()}},setRadius:function(n){return this.radius=n,this},setIterations:function(n){return n===void 0&&(n=.01),this.iterations=n,this},setStartAngle:function(n,l){return this._startAngle=n,l!==void 0&&(this._anticlockwise=l),this.updateData()},setEndAngle:function(n,l){return this._endAngle=n,l!==void 0&&(this._anticlockwise=l),this.updateData()},updateData:function(){var n=this._iterations,l=n,c=this.geom.radius,d=o(this._startAngle),f=o(this._endAngle),m=this._anticlockwise,y=c,S=c;f-=d,m?f<-e.PI2?f=-e.PI2:f>0&&(f=-e.PI2+f%e.PI2):f>e.PI2?f=e.PI2:f<0&&(f=e.PI2+f%e.PI2);for(var C=[y+Math.cos(d)*c,S+Math.sin(d)*c],E;l<1;)E=f*l+d,C.push(y+Math.cos(E)*c,S+Math.sin(E)*c),l+=n;return E=f+d,C.push(y+Math.cos(E)*c,S+Math.sin(E)*c),C.push(y+Math.cos(d)*c,S+Math.sin(d)*c),this.pathIndexes=a(C),this.pathData=C,this}});v.exports=u}),42542:((v,T,t)=>{var h=t(39506),g=t(65960),o=t(75177),a=t(20926),r=function(e,s,u,n){u.addToRenderList(s);var l=e.currentContext;if(a(e,l,s,u,n)){var c=s.radius;l.beginPath(),l.arc(c-s.originX*(c*2),c-s.originY*(c*2),c,h(s._startAngle),h(s._endAngle),s.anticlockwise),s.closePath&&l.closePath(),s.isFilled&&(g(l,s),l.fill()),s.isStroked&&(o(l,s),l.stroke()),l.restore()}};v.exports=r}),42563:((v,T,t)=>{var h=t(23629),g=t(39429);g.register("arc",function(o,a,r,e,s,u,n,l){return this.displayList.add(new h(this.scene,o,a,r,e,s,u,n,l))}),g.register("circle",function(o,a,r,e,s){return this.displayList.add(new h(this.scene,o,a,r,0,360,!1,e,s))})}),13609:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(41447),o=t(42542),v.exports={renderWebGL:g,renderCanvas:o}}),41447:((v,T,t)=>{var h=t(91296),g=t(10441),o=t(34682),a=function(r,e,s,u){s.addToRenderList(e);var n=r.pipelines.set(e.pipeline),l=h(e,s,u),c=n.calcMatrix.copyFrom(l.calc),d=e._displayOriginX,f=e._displayOriginY,m=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&g(n,c,e,m,d,f),e.isStroked&&o(n,e,m,d,f),r.pipelines.postBatch(e)};v.exports=a}),89:((v,T,t)=>{var h=t(83419),g=t(33141),o=t(94811),a=t(87841),r=t(17803),e=new h({Extends:r,Mixins:[g],initialize:function(u,n,l,c,d,f){n===void 0&&(n=0),l===void 0&&(l=0),r.call(this,u,"Curve",c),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(n,l),d!==void 0&&this.setFillStyle(d,f),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(s){this._smoothness=s,this.updateData()}},setSmoothness:function(s){return this._smoothness=s,this.updateData()},updateData:function(){var s=this._curveBounds,u=this._smoothness;this.geom.getBounds(s,u),this.setSize(s.width,s.height),this.updateDisplayOrigin();for(var n=[],l=this.geom.getPoints(u),c=0;c<l.length;c++)n.push(l[c].x,l[c].y);return n.push(l[0].x,l[0].y),this.pathIndexes=o(n),this.pathData=n,this}});v.exports=e}),3170:((v,T,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,s,u){s.addToRenderList(e);var n=r.currentContext;if(o(r,n,e,s,u)){var l=e._displayOriginX+e._curveBounds.x,c=e._displayOriginY+e._curveBounds.y,d=e.pathData,f=d.length-1,m=d[0]-l,y=d[1]-c;n.beginPath(),n.moveTo(m,y),e.closePath||(f-=2);for(var S=2;S<f;S+=2){var C=d[S]-l,E=d[S+1]-c;n.lineTo(C,E)}e.closePath&&n.closePath(),e.isFilled&&(h(n,e),n.fill()),e.isStroked&&(g(n,e),n.stroke()),n.restore()}};v.exports=a}),40511:((v,T,t)=>{var h=t(39429),g=t(89);h.register("curve",function(o,a,r,e,s){return this.displayList.add(new g(this.scene,o,a,r,e,s))})}),33141:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(53987),o=t(3170),v.exports={renderWebGL:g,renderCanvas:o}}),53987:((v,T,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=function(r,e,s,u){s.addToRenderList(e);var n=r.pipelines.set(e.pipeline),l=g(e,s,u),c=n.calcMatrix.copyFrom(l.calc),d=e._displayOriginX+e._curveBounds.x,f=e._displayOriginY+e._curveBounds.y,m=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&h(n,c,e,m,d,f),e.isStroked&&o(n,e,m,d,f),r.pipelines.postBatch(e)};v.exports=a}),19921:((v,T,t)=>{var h=t(83419),g=t(94811),o=t(54205),a=t(8497),r=t(17803),e=new h({Extends:r,Mixins:[o],initialize:function(u,n,l,c,d,f,m){n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=128),d===void 0&&(d=128),r.call(this,u,"Ellipse",new a(c/2,d/2,c,d)),this._smoothness=64,this.setPosition(n,l),this.width=c,this.height=d,f!==void 0&&this.setFillStyle(f,m),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(s){this._smoothness=s,this.updateData()}},setSize:function(s,u){return this.width=s,this.height=u,this.geom.setPosition(s/2,u/2),this.geom.setSize(s,u),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(s){return this._smoothness=s,this.updateData()},updateData:function(){for(var s=[],u=this.geom.getPoints(this._smoothness),n=0;n<u.length;n++)s.push(u[n].x,u[n].y);return s.push(u[0].x,u[0].y),this.pathIndexes=g(s),this.pathData=s,this}});v.exports=e}),7930:((v,T,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,s,u){s.addToRenderList(e);var n=r.currentContext;if(o(r,n,e,s,u)){var l=e._displayOriginX,c=e._displayOriginY,d=e.pathData,f=d.length-1,m=d[0]-l,y=d[1]-c;n.beginPath(),n.moveTo(m,y),e.closePath||(f-=2);for(var S=2;S<f;S+=2){var C=d[S]-l,E=d[S+1]-c;n.lineTo(C,E)}n.closePath(),e.isFilled&&(h(n,e),n.fill()),e.isStroked&&(g(n,e),n.stroke()),n.restore()}};v.exports=a}),1543:((v,T,t)=>{var h=t(19921),g=t(39429);g.register("ellipse",function(o,a,r,e,s,u){return this.displayList.add(new h(this.scene,o,a,r,e,s,u))})}),54205:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(19467),o=t(7930),v.exports={renderWebGL:g,renderCanvas:o}}),19467:((v,T,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=function(r,e,s,u){s.addToRenderList(e);var n=r.pipelines.set(e.pipeline),l=g(e,s,u),c=n.calcMatrix.copyFrom(l.calc),d=e._displayOriginX,f=e._displayOriginY,m=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&h(n,c,e,m,d,f),e.isStroked&&o(n,e,m,d,f),r.pipelines.postBatch(e)};v.exports=a}),30479:((v,T,t)=>{var h=t(83419),g=t(17803),o=t(26015),a=new h({Extends:g,Mixins:[o],initialize:function(e,s,u,n,l,c,d,f,m,y,S){s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n=128),l===void 0&&(l=128),c===void 0&&(c=32),d===void 0&&(d=32),g.call(this,e,"Grid",null),this.cellWidth=c,this.cellHeight=d,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(s,u),this.setSize(n,l),this.setFillStyle(f,m),y!==void 0&&this.setOutlineStyle(y,S),this.updateDisplayOrigin()},setFillStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showCells=!1:(this.fillColor=r,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showAltCells=!1:(this.altFillColor=r,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(r,e){return e===void 0&&(e=1),r===void 0?this.showOutline=!1:(this.outlineFillColor=r,this.outlineFillAlpha=e,this.showOutline=!0),this}});v.exports=a}),49912:((v,T,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,s,u){s.addToRenderList(e);var n=r.currentContext;if(o(r,n,e,s,u)){var l=-e._displayOriginX,c=-e._displayOriginY,d=s.alpha*e.alpha,f=e.width,m=e.height,y=e.cellWidth,S=e.cellHeight,C=Math.ceil(f/y),E=Math.ceil(m/S),P=y,A=S,F=y-(C*y-f),G=S-(E*S-m),D=e.showCells,L=e.showAltCells,b=e.showOutline,I=0,N=0,Z=0,U=0,W=0;if(b&&(P--,A--,F===y&&F--,G===S&&G--),D&&e.fillAlpha>0)for(h(n,e),N=0;N<E;N++)for(L&&(Z=N%2),I=0;I<C;I++){if(L&&Z){Z=0;continue}Z++,U=I<C-1?P:F,W=N<E-1?A:G,n.fillRect(l+I*y,c+N*S,U,W)}if(L&&e.altFillAlpha>0)for(h(n,e,e.altFillColor,e.altFillAlpha*d),N=0;N<E;N++)for(L&&(Z=N%2),I=0;I<C;I++){if(L&&!Z){Z=1;continue}Z=0,U=I<C-1?P:F,W=N<E-1?A:G,n.fillRect(l+I*y,c+N*S,U,W)}if(b&&e.outlineFillAlpha>0){for(g(n,e,e.outlineFillColor,e.outlineFillAlpha*d),I=1;I<C;I++){var X=I*y;n.beginPath(),n.moveTo(X+l,c),n.lineTo(X+l,m+c),n.stroke()}for(N=1;N<E;N++){var V=N*S;n.beginPath(),n.moveTo(l,V+c),n.lineTo(l+f,V+c),n.stroke()}}n.restore()}};v.exports=a}),34137:((v,T,t)=>{var h=t(39429),g=t(30479);h.register("grid",function(o,a,r,e,s,u,n,l,c,d){return this.displayList.add(new g(this.scene,o,a,r,e,s,u,n,l,c,d))})}),26015:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(46161),o=t(49912),v.exports={renderWebGL:g,renderCanvas:o}}),46161:((v,T,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,s){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline),n=h(r,e,s),l=u.calcMatrix.copyFrom(n.calc);l.translate(-r._displayOriginX,-r._displayOriginY);var c=e.alpha*r.alpha,d=r.width,f=r.height,m=r.cellWidth,y=r.cellHeight,S=Math.ceil(d/m),C=Math.ceil(f/y),E=m,P=y,A=m-(S*m-d),F=y-(C*y-f),G,D,L=r.showCells,b=r.showAltCells,I=r.showOutline,N=0,Z=0,U=0,W=0,X=0;if(I&&(E--,P--,A===m&&A--,F===y&&F--),a.pipelines.preBatch(r),L&&r.fillAlpha>0)for(G=u.fillTint,D=g.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*c),G.TL=D,G.TR=D,G.BL=D,G.BR=D,Z=0;Z<C;Z++)for(b&&(U=Z%2),N=0;N<S;N++){if(b&&U){U=0;continue}U++,W=N<S-1?E:A,X=Z<C-1?P:F,u.batchFillRect(N*m,Z*y,W,X)}if(b&&r.altFillAlpha>0)for(G=u.fillTint,D=g.getTintAppendFloatAlpha(r.altFillColor,r.altFillAlpha*c),G.TL=D,G.TR=D,G.BL=D,G.BR=D,Z=0;Z<C;Z++)for(b&&(U=Z%2),N=0;N<S;N++){if(b&&!U){U=1;continue}U=0,W=N<S-1?E:A,X=Z<C-1?P:F,u.batchFillRect(N*m,Z*y,W,X)}if(I&&r.outlineFillAlpha>0){var V=u.strokeTint,O=g.getTintAppendFloatAlpha(r.outlineFillColor,r.outlineFillAlpha*c);for(V.TL=O,V.TR=O,V.BL=O,V.BR=O,N=1;N<S;N++){var z=N*m;u.batchLine(z,0,z,f,r.lineWidth,r.lineWidth,1,0,!1)}for(Z=1;Z<C;Z++){var B=Z*y;u.batchLine(0,B,d,B,r.lineWidth,r.lineWidth,1,0,!1)}}a.pipelines.postBatch(r)};v.exports=o}),61475:((v,T,t)=>{var h=t(99651),g=t(83419),o=t(17803),a=new g({Extends:o,Mixins:[h],initialize:function(e,s,u,n,l,c,d,f){s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n=48),l===void 0&&(l=32),c===void 0&&(c=15658734),d===void 0&&(d=10066329),f===void 0&&(f=13421772),o.call(this,e,"IsoBox",null),this.projection=4,this.fillTop=c,this.fillLeft=d,this.fillRight=f,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(s,u),this.setSize(n,l),this.updateDisplayOrigin()},setProjection:function(r){return this.projection=r,this},setFaces:function(r,e,s){return r===void 0&&(r=!0),e===void 0&&(e=!0),s===void 0&&(s=!0),this.showTop=r,this.showLeft=e,this.showRight=s,this},setFillStyle:function(r,e,s){return this.fillTop=r,this.fillLeft=e,this.fillRight=s,this.isFilled=!0,this}});v.exports=a}),11508:((v,T,t)=>{var h=t(65960),g=t(20926),o=function(a,r,e,s){e.addToRenderList(r);var u=a.currentContext;if(g(a,u,r,e,s)&&r.isFilled){var n=r.width,l=r.height,c=n/2,d=n/r.projection;r.showTop&&(h(u,r,r.fillTop),u.beginPath(),u.moveTo(-c,-l),u.lineTo(0,-d-l),u.lineTo(c,-l),u.lineTo(c,-1),u.lineTo(0,d-1),u.lineTo(-c,-1),u.lineTo(-c,-l),u.fill()),r.showLeft&&(h(u,r,r.fillLeft),u.beginPath(),u.moveTo(-c,0),u.lineTo(0,d),u.lineTo(0,d-l),u.lineTo(-c,-l),u.lineTo(-c,0),u.fill()),r.showRight&&(h(u,r,r.fillRight),u.beginPath(),u.moveTo(c,0),u.lineTo(0,d),u.lineTo(0,d-l),u.lineTo(c,-l),u.lineTo(c,0),u.fill()),u.restore()}};v.exports=o}),3933:((v,T,t)=>{var h=t(39429),g=t(61475);h.register("isobox",function(o,a,r,e,s,u,n){return this.displayList.add(new g(this.scene,o,a,r,e,s,u,n))})}),99651:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(68149),o=t(11508),v.exports={renderWebGL:g,renderCanvas:o}}),68149:((v,T,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,s){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline),n=h(r,e,s),l=u.calcMatrix.copyFrom(n.calc),c=r.width,d=r.height,f=c/2,m=c/r.projection,y=e.alpha*r.alpha;if(r.isFilled){var S,C,E,P,A,F,G,D,L;a.pipelines.preBatch(r),r.showTop&&(S=g.getTintAppendFloatAlpha(r.fillTop,y),C=l.getX(-f,-d),E=l.getY(-f,-d),P=l.getX(0,-m-d),A=l.getY(0,-m-d),F=l.getX(f,-d),G=l.getY(f,-d),D=l.getX(0,m-d),L=l.getY(0,m-d),u.batchQuad(r,C,E,P,A,F,G,D,L,0,0,1,1,S,S,S,S,2)),r.showLeft&&(S=g.getTintAppendFloatAlpha(r.fillLeft,y),C=l.getX(-f,0),E=l.getY(-f,0),P=l.getX(0,m),A=l.getY(0,m),F=l.getX(0,m-d),G=l.getY(0,m-d),D=l.getX(-f,-d),L=l.getY(-f,-d),u.batchQuad(r,C,E,P,A,F,G,D,L,0,0,1,1,S,S,S,S,2)),r.showRight&&(S=g.getTintAppendFloatAlpha(r.fillRight,y),C=l.getX(f,0),E=l.getY(f,0),P=l.getX(0,m),A=l.getY(0,m),F=l.getX(0,m-d),G=l.getY(0,m-d),D=l.getX(f,-d),L=l.getY(f,-d),u.batchQuad(r,C,E,P,A,F,G,D,L,0,0,1,1,S,S,S,S,2)),a.pipelines.postBatch(r)}};v.exports=o}),16933:((v,T,t)=>{var h=t(83419),g=t(60561),o=t(17803),a=new h({Extends:o,Mixins:[g],initialize:function(e,s,u,n,l,c,d,f,m){s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n=48),l===void 0&&(l=32),c===void 0&&(c=!1),d===void 0&&(d=15658734),f===void 0&&(f=10066329),m===void 0&&(m=13421772),o.call(this,e,"IsoTriangle",null),this.projection=4,this.fillTop=d,this.fillLeft=f,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=c,this.isFilled=!0,this.setPosition(s,u),this.setSize(n,l),this.updateDisplayOrigin()},setProjection:function(r){return this.projection=r,this},setReversed:function(r){return this.isReversed=r,this},setFaces:function(r,e,s){return r===void 0&&(r=!0),e===void 0&&(e=!0),s===void 0&&(s=!0),this.showTop=r,this.showLeft=e,this.showRight=s,this},setFillStyle:function(r,e,s){return this.fillTop=r,this.fillLeft=e,this.fillRight=s,this.isFilled=!0,this}});v.exports=a}),79590:((v,T,t)=>{var h=t(65960),g=t(20926),o=function(a,r,e,s){e.addToRenderList(r);var u=a.currentContext;if(g(a,u,r,e,s)&&r.isFilled){var n=r.width,l=r.height,c=n/2,d=n/r.projection,f=r.isReversed;r.showTop&&f&&(h(u,r,r.fillTop),u.beginPath(),u.moveTo(-c,-l),u.lineTo(0,-d-l),u.lineTo(c,-l),u.lineTo(0,d-l),u.fill()),r.showLeft&&(h(u,r,r.fillLeft),u.beginPath(),f?(u.moveTo(-c,-l),u.lineTo(0,d),u.lineTo(0,d-l)):(u.moveTo(-c,0),u.lineTo(0,d),u.lineTo(0,d-l)),u.fill()),r.showRight&&(h(u,r,r.fillRight),u.beginPath(),f?(u.moveTo(c,-l),u.lineTo(0,d),u.lineTo(0,d-l)):(u.moveTo(c,0),u.lineTo(0,d),u.lineTo(0,d-l)),u.fill()),u.restore()}};v.exports=o}),49803:((v,T,t)=>{var h=t(39429),g=t(16933);h.register("isotriangle",function(o,a,r,e,s,u,n,l){return this.displayList.add(new g(this.scene,o,a,r,e,s,u,n,l))})}),60561:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(51503),o=t(79590),v.exports={renderWebGL:g,renderCanvas:o}}),51503:((v,T,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,s){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline),n=h(r,e,s),l=u.calcMatrix.copyFrom(n.calc),c=r.width,d=r.height,f=c/2,m=c/r.projection,y=r.isReversed,S=e.alpha*r.alpha;if(r.isFilled){a.pipelines.preBatch(r);var C,E,P,A,F,G,D;if(r.showTop&&y){C=g.getTintAppendFloatAlpha(r.fillTop,S),E=l.getX(-f,-d),P=l.getY(-f,-d),A=l.getX(0,-m-d),F=l.getY(0,-m-d),G=l.getX(f,-d),D=l.getY(f,-d);var L=l.getX(0,m-d),b=l.getY(0,m-d);u.batchQuad(r,E,P,A,F,G,D,L,b,0,0,1,1,C,C,C,C,2)}r.showLeft&&(C=g.getTintAppendFloatAlpha(r.fillLeft,S),y?(E=l.getX(-f,-d),P=l.getY(-f,-d),A=l.getX(0,m),F=l.getY(0,m),G=l.getX(0,m-d),D=l.getY(0,m-d)):(E=l.getX(-f,0),P=l.getY(-f,0),A=l.getX(0,m),F=l.getY(0,m),G=l.getX(0,m-d),D=l.getY(0,m-d)),u.batchTri(r,E,P,A,F,G,D,0,0,1,1,C,C,C,2)),r.showRight&&(C=g.getTintAppendFloatAlpha(r.fillRight,S),y?(E=l.getX(f,-d),P=l.getY(f,-d),A=l.getX(0,m),F=l.getY(0,m),G=l.getX(0,m-d),D=l.getY(0,m-d)):(E=l.getX(f,0),P=l.getY(f,0),A=l.getX(0,m),F=l.getY(0,m),G=l.getX(0,m-d),D=l.getY(0,m-d)),u.batchTri(r,E,P,A,F,G,D,0,0,1,1,C,C,C,2)),a.pipelines.postBatch(r)}};v.exports=o}),57847:((v,T,t)=>{var h=t(83419),g=t(17803),o=t(23031),a=t(36823),r=new h({Extends:g,Mixins:[a],initialize:function(s,u,n,l,c,d,f,m,y){u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=128),f===void 0&&(f=0),g.call(this,s,"Line",new o(l,c,d,f));var S=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(u,n),this.setSize(S,C),m!==void 0&&this.setStrokeStyle(1,m,y),this.updateDisplayOrigin()},setLineWidth:function(e,s){return s===void 0&&(s=e),this._startWidth=e,this._endWidth=s,this.lineWidth=e,this},setTo:function(e,s,u,n){return this.geom.setTo(e,s,u,n),this}});v.exports=r}),17440:((v,T,t)=>{var h=t(75177),g=t(20926),o=function(a,r,e,s){e.addToRenderList(r);var u=a.currentContext;if(g(a,u,r,e,s)){var n=r._displayOriginX,l=r._displayOriginY;r.isStroked&&(h(u,r),u.beginPath(),u.moveTo(r.geom.x1-n,r.geom.y1-l),u.lineTo(r.geom.x2-n,r.geom.y2-l),u.stroke()),u.restore()}};v.exports=o}),2481:((v,T,t)=>{var h=t(39429),g=t(57847);h.register("line",function(o,a,r,e,s,u,n,l){return this.displayList.add(new g(this.scene,o,a,r,e,s,u,n,l))})}),36823:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(77385),o=t(17440),v.exports={renderWebGL:g,renderCanvas:o}}),77385:((v,T,t)=>{var h=t(91296),g=t(70554),o=function(a,r,e,s){e.addToRenderList(r);var u=a.pipelines.set(r.pipeline),n=h(r,e,s);u.calcMatrix.copyFrom(n.calc);var l=r._displayOriginX,c=r._displayOriginY,d=e.alpha*r.alpha;if(a.pipelines.preBatch(r),r.isStroked){var f=u.strokeTint,m=g.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*d);f.TL=m,f.TR=m,f.BL=m,f.BR=m,u.batchLine(r.geom.x1-l,r.geom.y1-c,r.geom.x2-l,r.geom.y2-c,r._startWidth/2,r._endWidth/2,1,0,!1,n.sprite,n.camera)}a.pipelines.postBatch(r)};v.exports=o}),24949:((v,T,t)=>{var h=t(90273),g=t(83419),o=t(94811),a=t(13829),r=t(25717),e=t(17803),s=t(5469),u=new g({Extends:e,Mixins:[h],initialize:function(l,c,d,f,m,y){c===void 0&&(c=0),d===void 0&&(d=0),e.call(this,l,"Polygon",new r(f));var S=a(this.geom);this.setPosition(c,d),this.setSize(S.width,S.height),m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(n){n===void 0&&(n=1);for(var l=0;l<n;l++)s(this.geom);return this.updateData()},setTo:function(n){this.geom.setTo(n);var l=a(this.geom);return this.setSize(l.width,l.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var n=[],l=this.geom.points,c=0;c<l.length;c++)n.push(l[c].x,l[c].y);return n.push(l[0].x,l[0].y),this.pathIndexes=o(n),this.pathData=n,this}});v.exports=u}),38710:((v,T,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,s,u){s.addToRenderList(e);var n=r.currentContext;if(o(r,n,e,s,u)){var l=e._displayOriginX,c=e._displayOriginY,d=e.pathData,f=d.length-1,m=d[0]-l,y=d[1]-c;n.beginPath(),n.moveTo(m,y),e.closePath||(f-=2);for(var S=2;S<f;S+=2){var C=d[S]-l,E=d[S+1]-c;n.lineTo(C,E)}e.closePath&&n.closePath(),e.isFilled&&(h(n,e),n.fill()),e.isStroked&&(g(n,e),n.stroke()),n.restore()}};v.exports=a}),64827:((v,T,t)=>{var h=t(39429),g=t(24949);h.register("polygon",function(o,a,r,e,s){return this.displayList.add(new g(this.scene,o,a,r,e,s))})}),90273:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(73695),o=t(38710),v.exports={renderWebGL:g,renderCanvas:o}}),73695:((v,T,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=function(r,e,s,u){s.addToRenderList(e);var n=r.pipelines.set(e.pipeline),l=g(e,s,u),c=n.calcMatrix.copyFrom(l.calc),d=e._displayOriginX,f=e._displayOriginY,m=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&h(n,c,e,m,d,f),e.isStroked&&o(n,e,m,d,f),r.pipelines.postBatch(e)};v.exports=a}),74561:((v,T,t)=>{var h=t(83419),g=t(94811),o=t(87841),a=t(17803),r=t(95597),e=new h({Extends:a,Mixins:[r],initialize:function(u,n,l,c,d,f,m){n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=128),d===void 0&&(d=128),a.call(this,u,"Rectangle",new o(0,0,c,d)),this.radius=20,this.isRounded=!1,this.setPosition(n,l),this.setSize(c,d),f!==void 0&&this.setFillStyle(f,m),this.updateDisplayOrigin(),this.updateData()},setRounded:function(s){return s===void 0&&(s=16),this.radius=s,this.isRounded=s>0,this.updateRoundedData()},setSize:function(s,u){this.width=s,this.height=u,this.geom.setSize(s,u),this.updateData(),this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=s,n.hitArea.height=u),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var s=[],u=this.geom,n=this._tempLine;return u.getLineA(n),s.push(n.x1,n.y1,n.x2,n.y2),u.getLineB(n),s.push(n.x2,n.y2),u.getLineC(n),s.push(n.x2,n.y2),u.getLineD(n),s.push(n.x2,n.y2),this.pathData=s,this},updateRoundedData:function(){var s=[],u=this.width/2,n=this.height/2,l=Math.min(u,n),c=Math.min(this.radius,l),d=u,f=n,m=Math.max(1,Math.floor(c/5));return this.arcTo(s,d-u+c,f-n+c,c,Math.PI,Math.PI*1.5,m),s.push(d+u-c,f-n),this.arcTo(s,d+u-c,f-n+c,c,Math.PI*1.5,Math.PI*2,m),s.push(d+u,f+n-c),this.arcTo(s,d+u-c,f+n-c,c,0,Math.PI*.5,m),s.push(d-u+c,f+n),this.arcTo(s,d-u+c,f+n-c,c,Math.PI*.5,Math.PI,m),s.push(d-u,f-n+c),this.pathIndexes=g(s),this.pathData=s,this},arcTo:function(s,u,n,l,c,d,f){for(var m=(d-c)/f,y=0;y<=f;y++){var S=c+m*y;s.push(u+Math.cos(S)*l,n+Math.sin(S)*l)}}});v.exports=e}),48682:((v,T,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(e,s,u,n,l,c){var d=Math.min(n/2,l/2),f=Math.min(c,d);if(f===0){e.rect(s,u,n,l);return}e.moveTo(s+f,u),e.lineTo(s+n-f,u),e.arcTo(s+n,u,s+n,u+f,f),e.lineTo(s+n,u+l-f),e.arcTo(s+n,u+l,s+n-f,u+l,f),e.lineTo(s+f,u+l),e.arcTo(s,u+l,s,u+l-f,f),e.lineTo(s,u+f),e.arcTo(s,u,s+f,u,f),e.closePath()},r=function(e,s,u,n){u.addToRenderList(s);var l=e.currentContext;if(o(e,l,s,u,n)){var c=s._displayOriginX,d=s._displayOriginY;s.isFilled&&(h(l,s),s.isRounded?(l.beginPath(),a(l,-c,-d,s.width,s.height,s.radius),l.fill()):l.fillRect(-c,-d,s.width,s.height)),s.isStroked&&(g(l,s),l.beginPath(),s.isRounded?a(l,-c,-d,s.width,s.height,s.radius):l.rect(-c,-d,s.width,s.height),l.stroke()),l.restore()}};v.exports=r}),87959:((v,T,t)=>{var h=t(39429),g=t(74561);h.register("rectangle",function(o,a,r,e,s,u){return this.displayList.add(new g(this.scene,o,a,r,e,s,u))})}),95597:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(52059),o=t(48682),v.exports={renderWebGL:g,renderCanvas:o}}),52059:((v,T,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=t(70554),r=function(e,s,u,n){u.addToRenderList(s);var l=e.pipelines.set(s.pipeline),c=g(s,u,n);l.calcMatrix.copyFrom(c.calc);var d=s._displayOriginX,f=s._displayOriginY,m=u.alpha*s.alpha;if(e.pipelines.preBatch(s),s.isRounded&&s.isFilled)h(l,c.calc,s,m,d,f);else if(s.isFilled){var y=l.fillTint,S=a.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*m);y.TL=S,y.TR=S,y.BL=S,y.BR=S,l.batchFillRect(-d,-f,s.width,s.height)}s.isStroked&&o(l,s,m,d,f),e.pipelines.postBatch(s)};v.exports=r}),55911:((v,T,t)=>{var h=t(81991),g=t(83419),o=t(94811),a=t(17803),r=new g({Extends:a,Mixins:[h],initialize:function(s,u,n,l,c,d,f,m){u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=5),c===void 0&&(c=32),d===void 0&&(d=64),a.call(this,s,"Star",null),this._points=l,this._innerRadius=c,this._outerRadius=d,this.setPosition(u,n),this.setSize(d*2,d*2),f!==void 0&&this.setFillStyle(f,m),this.updateDisplayOrigin(),this.updateData()},setPoints:function(e){return this._points=e,this.updateData()},setInnerRadius:function(e){return this._innerRadius=e,this.updateData()},setOuterRadius:function(e){return this._outerRadius=e,this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this.updateData()}},updateData:function(){var e=[],s=this._points,u=this._innerRadius,n=this._outerRadius,l=Math.PI/2*3,c=Math.PI/s,d=n,f=n;e.push(d,f+-n);for(var m=0;m<s;m++)e.push(d+Math.cos(l)*n,f+Math.sin(l)*n),l+=c,e.push(d+Math.cos(l)*u,f+Math.sin(l)*u),l+=c;return e.push(d,f+-n),this.pathIndexes=o(e),this.pathData=e,this}});v.exports=r}),64272:((v,T,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,s,u){s.addToRenderList(e);var n=r.currentContext;if(o(r,n,e,s,u)){var l=e._displayOriginX,c=e._displayOriginY,d=e.pathData,f=d.length-1,m=d[0]-l,y=d[1]-c;n.beginPath(),n.moveTo(m,y),e.closePath||(f-=2);for(var S=2;S<f;S+=2){var C=d[S]-l,E=d[S+1]-c;n.lineTo(C,E)}n.closePath(),e.isFilled&&(h(n,e),n.fill()),e.isStroked&&(g(n,e),n.stroke()),n.restore()}};v.exports=a}),93697:((v,T,t)=>{var h=t(55911),g=t(39429);g.register("star",function(o,a,r,e,s,u,n){return this.displayList.add(new h(this.scene,o,a,r,e,s,u,n))})}),81991:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(57017),o=t(64272),v.exports={renderWebGL:g,renderCanvas:o}}),57017:((v,T,t)=>{var h=t(10441),g=t(91296),o=t(34682),a=function(r,e,s,u){s.addToRenderList(e);var n=r.pipelines.set(e.pipeline),l=g(e,s,u),c=n.calcMatrix.copyFrom(l.calc),d=e._displayOriginX,f=e._displayOriginY,m=s.alpha*e.alpha;r.pipelines.preBatch(e),e.isFilled&&h(n,c,e,m,d,f),e.isStroked&&o(n,e,m,d,f),r.pipelines.postBatch(e)};v.exports=a}),36931:((v,T,t)=>{var h=t(83419),g=t(17803),o=t(16483),a=t(96195),r=new h({Extends:g,Mixins:[a],initialize:function(s,u,n,l,c,d,f,m,y,S,C){u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=128),d===void 0&&(d=64),f===void 0&&(f=0),m===void 0&&(m=128),y===void 0&&(y=128),g.call(this,s,"Triangle",new o(l,c,d,f,m,y));var E=this.geom.right-this.geom.left,P=this.geom.bottom-this.geom.top;this.setPosition(u,n),this.setSize(E,P),S!==void 0&&this.setFillStyle(S,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(e,s,u,n,l,c){return this.geom.setTo(e,s,u,n,l,c),this.updateData()},updateData:function(){var e=[],s=this.geom,u=this._tempLine;return s.getLineA(u),e.push(u.x1,u.y1,u.x2,u.y2),s.getLineB(u),e.push(u.x2,u.y2),s.getLineC(u),e.push(u.x2,u.y2),this.pathData=e,this}});v.exports=r}),85172:((v,T,t)=>{var h=t(65960),g=t(75177),o=t(20926),a=function(r,e,s,u){s.addToRenderList(e);var n=r.currentContext;if(o(r,n,e,s,u)){var l=e._displayOriginX,c=e._displayOriginY,d=e.geom.x1-l,f=e.geom.y1-c,m=e.geom.x2-l,y=e.geom.y2-c,S=e.geom.x3-l,C=e.geom.y3-c;n.beginPath(),n.moveTo(d,f),n.lineTo(m,y),n.lineTo(S,C),n.closePath(),e.isFilled&&(h(n,e),n.fill()),e.isStroked&&(g(n,e),n.stroke()),n.restore()}};v.exports=a}),45245:((v,T,t)=>{var h=t(39429),g=t(36931);h.register("triangle",function(o,a,r,e,s,u,n,l,c,d){return this.displayList.add(new g(this.scene,o,a,r,e,s,u,n,l,c,d))})}),96195:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(83253),o=t(85172),v.exports={renderWebGL:g,renderCanvas:o}}),83253:((v,T,t)=>{var h=t(91296),g=t(34682),o=t(70554),a=function(r,e,s,u){s.addToRenderList(e);var n=r.pipelines.set(e.pipeline),l=h(e,s,u);n.calcMatrix.copyFrom(l.calc);var c=e._displayOriginX,d=e._displayOriginY,f=s.alpha*e.alpha;if(r.pipelines.preBatch(e),e.isFilled){var m=n.fillTint,y=o.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*f);m.TL=y,m.TR=y,m.BL=y,m.BR=y;var S=e.geom.x1-c,C=e.geom.y1-d,E=e.geom.x2-c,P=e.geom.y2-d,A=e.geom.x3-c,F=e.geom.y3-d;n.batchFillTriangle(S,C,E,P,A,F,l.sprite,l.camera)}e.isStroked&&g(n,e,f,c,d),r.pipelines.postBatch(e)};v.exports=a}),68287:((v,T,t)=>{var h=t(9674),g=t(83419),o=t(31401),a=t(95643),r=t(92751),e=new g({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,r],initialize:function(u,n,l,c,d){a.call(this,u,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(c,d),this.setPosition(n,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(s,u){this.anims.update(s,u)},play:function(s,u){return this.anims.play(s,u)},playReverse:function(s,u){return this.anims.playReverse(s,u)},playAfterDelay:function(s,u){return this.anims.playAfterDelay(s,u)},playAfterRepeat:function(s,u){return this.anims.playAfterRepeat(s,u)},chain:function(s){return this.anims.chain(s)},stop:function(){return this.anims.stop()},stopAfterDelay:function(s){return this.anims.stopAfterDelay(s)},stopAfterRepeat:function(s){return this.anims.stopAfterRepeat(s)},stopOnFrame:function(s){return this.anims.stopOnFrame(s)},toJSON:function(){return o.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});v.exports=e}),76552:(v=>{var T=function(t,h,g,o){g.addToRenderList(h),t.batchSprite(h,h.frame,g,o)};v.exports=T}),15567:((v,T,t)=>{var h=t(25305),g=t(13059),o=t(44603),a=t(23568),r=t(68287);o.register("sprite",function(e,s){e===void 0&&(e={});var u=a(e,"key",null),n=a(e,"frame",null),l=new r(this.scene,0,0,u,n);return s!==void 0&&(e.add=s),h(this.scene,l,e),g(l,e),l})}),46409:((v,T,t)=>{var h=t(39429),g=t(68287);h.register("sprite",function(o,a,r,e){return this.displayList.add(new g(this.scene,o,a,r,e))})}),92751:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(9409),o=t(76552),v.exports={renderWebGL:g,renderCanvas:o}}),9409:(v=>{var T=function(t,h,g,o){g.addToRenderList(h),h.pipeline.batchSprite(h,g,o)};v.exports=T}),14220:(v=>{var T=function(t,h,g){var o=t.canvas,a=t.context,r=t.style,e=[],s=0,u=g.length;r.maxLines>0&&r.maxLines<g.length&&(u=r.maxLines),r.syncFont(o,a);for(var n=t.letterSpacing,l=0;l<u;l++){var c=r.strokeThickness;if(n===0)c+=a.measureText(g[l]).width;else{for(var d=g[l],f=0;f<d.length;f++)c+=a.measureText(d[f]).width;d.length>1&&(c+=n*(d.length-1))}r.wordWrap&&(c-=a.measureText(" ").width),e[l]=Math.ceil(c),s=Math.max(s,e[l])}var m=h.fontSize+r.strokeThickness,y=m*u,S=t.lineSpacing;return u>1&&(y+=S*(u-1)),{width:s,height:y,lines:u,lineWidths:e,lineSpacing:S,lineHeight:m}};v.exports=T}),79557:((v,T,t)=>{var h=t(27919),g=function(o){var a=h.create(this),r=a.getContext("2d",{willReadFrequently:!0});o.syncFont(a,r);var e=r.measureText(o.testString);if("actualBoundingBoxAscent"in e){var s=e.actualBoundingBoxAscent,u=e.actualBoundingBoxDescent;return h.remove(a),{ascent:s,descent:u,fontSize:s+u}}var n=Math.ceil(e.width*o.baselineX),l=n,c=2*l;l=l*o.baselineY|0,a.width=n,a.height=c,r.fillStyle="#f00",r.fillRect(0,0,n,c),r.font=o._font,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(o.testString,0,l);var d={ascent:0,descent:0,fontSize:0},f=r.getImageData(0,0,n,c);if(!f)return d.ascent=l,d.descent=l+6,d.fontSize=d.ascent+d.descent,h.remove(a),d;var m=f.data,y=m.length,S=n*4,C,E,P=0,A=!1;for(C=0;C<l;C++){for(E=0;E<S;E+=4)if(m[P+E]!==255){A=!0;break}if(!A)P+=S;else break}for(d.ascent=l-C,P=y-S,A=!1,C=c;C>l;C--){for(E=0;E<S;E+=4)if(m[P+E]!==255){A=!0;break}if(!A)P-=S;else break}return d.descent=C-l,d.fontSize=d.ascent+d.descent,h.remove(a),d};v.exports=g}),50171:((v,T,t)=>{var h=t(40366),g=t(27919),o=t(83419),a=t(31401),r=t(95643),e=t(14220),s=t(35154),u=t(35846),n=t(61771),l=t(35762),c=t(45650),d=new o({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,n],initialize:function(m,y,S,C,E){y===void 0&&(y=0),S===void 0&&(S=0),r.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(y,S),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=g.create(this),this.context,this.style=new l(this,E),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=c(),this.texture=m.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),E&&E.padding&&this.setPadding(E.padding),E&&E.lineSpacing&&this.setLineSpacing(E.lineSpacing),E&&E.letterSpacing&&this.setLetterSpacing(E.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",h(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(f){var m=this.style;if(m.wordWrapCallback){var y=m.wordWrapCallback.call(m.wordWrapCallbackScope,f,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(f,this.context,this.style.wordWrapWidth):this.basicWordWrap(f,this.context,this.style.wordWrapWidth):f},advancedWordWrap:function(f,m,y){for(var S="",C=f.replace(/ +/gi," ").split(this.splitRegExp),E=C.length,P=0;P<E;P++){var A=C[P],F="";A=A.replace(/^ *|\s*$/gi,"");var G=A.length*this.letterSpacing,D=m.measureText(A).width+G;if(D<y){S+=A+`
`;continue}for(var L=y,b=A.split(" "),I=0;I<b.length;I++){var N=b[I],Z=N+" ",U=Z.length*this.letterSpacing,W=m.measureText(Z).width+U;if(W>L){if(I===0){for(var X=Z;X.length;){X=X.slice(0,-1);var V=X.length*this.letterSpacing;if(W=m.measureText(X).width+V,W<=L)break}if(!X.length)throw new Error("wordWrapWidth < a single character");var O=N.substr(X.length);b[I]=O,F+=X}var z=b[I].length?I:I+1,B=b.slice(z).join(" ").replace(/[ \n]*$/gi,"");C.splice(P+1,0,B),E=C.length;break}else F+=Z,L-=W}S+=F.replace(/[ \n]*$/gi,"")+`
`}return S=S.replace(/[\s|\n]*$/gi,""),S},basicWordWrap:function(f,m,y){for(var S="",C=f.split(this.splitRegExp),E=C.length-1,P=m.measureText(" ").width,A=0;A<=E;A++){for(var F=y,G=C[A].split(" "),D=G.length-1,L=0;L<=D;L++){var b=G[L],I=b.length*this.letterSpacing,N=m.measureText(b).width+I,Z=N;L<D&&(Z+=P),Z>F&&L>0&&(S+=`
`,F=y),S+=b,L<D?(S+=" ",F-=Z):F-=N}A<E&&(S+=`
`)}return S},getWrappedText:function(f){f===void 0&&(f=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(f);return m.split(this.splitRegExp)},setText:function(f){return!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f!==this._text&&(this._text=f.toString(),this.updateText()),this},appendText:function(f,m){m===void 0&&(m=!0),!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f=f.toString();var y=this._text.concat(m?`
`+f:f);return y!==this._text&&(this._text=y,this.updateText()),this},setStyle:function(f){return this.style.setStyle(f)},setFont:function(f){return this.style.setFont(f)},setFontFamily:function(f){return this.style.setFontFamily(f)},setFontSize:function(f){return this.style.setFontSize(f)},setFontStyle:function(f){return this.style.setFontStyle(f)},setFixedSize:function(f,m){return this.style.setFixedSize(f,m)},setBackgroundColor:function(f){return this.style.setBackgroundColor(f)},setFill:function(f){return this.style.setFill(f)},setColor:function(f){return this.style.setColor(f)},setStroke:function(f,m){return this.style.setStroke(f,m)},setShadow:function(f,m,y,S,C,E){return this.style.setShadow(f,m,y,S,C,E)},setShadowOffset:function(f,m){return this.style.setShadowOffset(f,m)},setShadowColor:function(f){return this.style.setShadowColor(f)},setShadowBlur:function(f){return this.style.setShadowBlur(f)},setShadowStroke:function(f){return this.style.setShadowStroke(f)},setShadowFill:function(f){return this.style.setShadowFill(f)},setWordWrapWidth:function(f,m){return this.style.setWordWrapWidth(f,m)},setWordWrapCallback:function(f,m){return this.style.setWordWrapCallback(f,m)},setAlign:function(f){return this.style.setAlign(f)},setResolution:function(f){return this.style.setResolution(f)},setLineSpacing:function(f){return this.lineSpacing=f,this.updateText()},setLetterSpacing:function(f){return this.letterSpacing=f,this.updateText()},setPadding:function(f,m,y,S){if(typeof f=="object"){var C=f,E=s(C,"x",null);E!==null?(f=E,y=E):(f=s(C,"left",0),y=s(C,"right",f));var P=s(C,"y",null);P!==null?(m=P,S=P):(m=s(C,"top",0),S=s(C,"bottom",m))}else f===void 0&&(f=0),m===void 0&&(m=f),y===void 0&&(y=f),S===void 0&&(S=m);return this.padding.left=f,this.padding.top=m,this.padding.right=y,this.padding.bottom=S,this.updateText()},setMaxLines:function(f){return this.style.setMaxLines(f)},setRTL:function(f){f===void 0&&(f=!0);var m=this.style;return m.rtl===f?this:(m.rtl=f,f?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",h(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),m.align==="left"?m.align="right":m.align==="right"&&(m.align="left"),this)},updateText:function(){var f=this.canvas,m=this.context,y=this.style,S=y.resolution,C=y.metrics;y.syncFont(f,m);var E=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(E=this.runWordWrap(this._text));var P=E.split(this.splitRegExp),A=e(this,C,P),F=this.padding,G;y.fixedWidth===0?(this.width=A.width+F.left+F.right,G=A.width):(this.width=y.fixedWidth,G=this.width-F.left-F.right,G<A.width&&(G=A.width)),y.fixedHeight===0?this.height=A.height+F.top+F.bottom:this.height=y.fixedHeight;var D=this.width,L=this.height;this.updateDisplayOrigin(),D*=S,L*=S,D=Math.max(D,1),L=Math.max(L,1),f.width!==D||f.height!==L?(f.width=D,f.height=L,this.frame.setSize(D,L),y.syncFont(f,m),y.rtl&&(m.direction="rtl")):m.clearRect(0,0,D,L),m.save(),m.scale(S,S),y.backgroundColor&&(m.fillStyle=y.backgroundColor,m.fillRect(0,0,D,L)),y.syncStyle(f,m),m.translate(F.left,F.top);for(var b,I,N=0;N<A.lines;N++){if(b=y.strokeThickness/2,I=y.strokeThickness/2+N*A.lineHeight+C.ascent,N>0&&(I+=A.lineSpacing*N),y.rtl)b=D-b-F.left-F.right;else if(y.align==="right")b+=G-A.lineWidths[N];else if(y.align==="center")b+=(G-A.lineWidths[N])/2;else if(y.align==="justify"){var Z=.85;if(A.lineWidths[N]/A.width>=Z){var U=A.width-A.lineWidths[N],W=m.measureText(" ").width,X=P[N].trim(),V=X.split(" ");U+=(P[N].length-X.length)*W;for(var O=Math.floor(U/W),z=0;O>0;)V[z]+=" ",z=(z+1)%(V.length-1||1),--O;P[N]=V.join(" ")}}this.autoRound&&(b=Math.round(b),I=Math.round(I));var B=this.letterSpacing;if(y.strokeThickness&&B===0&&(y.syncShadow(m,y.shadowStroke),m.strokeText(P[N],b,I)),y.color)if(y.syncShadow(m,y.shadowFill),B!==0)for(var Y=0,k=P[N].split(""),J=0;J<k.length;J++)y.strokeThickness&&(y.syncShadow(m,y.shadowStroke),m.strokeText(k[J],b+Y,I),y.syncShadow(m,y.shadowFill)),m.fillText(k[J],b+Y,I),Y+=m.measureText(k[J]).width+B;else m.fillText(P[N],b,I)}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0));var j=this.input;return j&&!j.customHitArea&&(j.hitArea.width=this.width,j.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(f){this.setText(f)}},toJSON:function(){var f=a.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return f.data=m,f},preDestroy:function(){u(this.canvas),g.remove(this.canvas);var f=this.texture;f&&f.destroy()}});v.exports=d}),79724:(v=>{var T=function(t,h,g,o){h.width===0||h.height===0||(g.addToRenderList(h),t.batchSprite(h,h.frame,g,o))};v.exports=T}),71259:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(50171);g.register("text",function(r,e){r===void 0&&(r={});var s=o(r,"text",""),u=o(r,"style",null),n=o(r,"padding",null);n!==null&&(u.padding=n);var l=new a(this.scene,0,0,s,u);return e!==void 0&&(r.add=e),h(this.scene,l,r),l.autoRound=o(r,"autoRound",!0),l.resolution=o(r,"resolution",1),l})}),68005:((v,T,t)=>{var h=t(50171),g=t(39429);g.register("text",function(o,a,r,e){return this.displayList.add(new h(this.scene,o,a,r,e))})}),61771:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(34397),o=t(79724),v.exports={renderWebGL:g,renderCanvas:o}}),35762:((v,T,t)=>{var h=t(83419),g=t(23568),o=t(35154),a=t(79557),r={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},e=new h({initialize:function(u,n){this.parent=u,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(n,!1,!0)},setStyle:function(s,u,n){u===void 0&&(u=!0),n===void 0&&(n=!1);for(var l in r){var c=n?r[l][1]:this[l];l==="wordWrapCallback"||l==="wordWrapCallbackScope"?this[l]=o(s,r[l][0],c):s&&l==="fontSize"&&typeof s.fontSize=="number"?this[l]=s.fontSize.toString()+"px":this[l]=g(s,r[l][0],c)}var d=o(s,"font",null);d!==null&&this.setFont(d,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var f=o(s,"fill",null);f!==null&&(this.color=f);var m=o(s,"metrics",!1);return m?this.metrics={ascent:o(m,"ascent",0),descent:o(m,"descent",0),fontSize:o(m,"fontSize",0)}:(u||!this.metrics)&&(this.metrics=a(this)),u?this.parent.updateText():this.parent},syncFont:function(s,u){u.font=this._font},syncStyle:function(s,u){u.textBaseline="alphabetic",u.fillStyle=this.color,u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.lineCap="round",u.lineJoin="round"},syncShadow:function(s,u){u?(s.shadowOffsetX=this.shadowOffsetX,s.shadowOffsetY=this.shadowOffsetY,s.shadowColor=this.shadowColor,s.shadowBlur=this.shadowBlur):(s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowColor=0,s.shadowBlur=0)},update:function(s){return s&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(s,u){u===void 0&&(u=!0);var n=s,l="",c="";if(typeof s!="string")n=o(s,"fontFamily","Courier"),l=o(s,"fontSize","16px"),c=o(s,"fontStyle","");else{var d=s.split(" "),f=0;c=d.length>2?d[f++]:"",l=d[f++]||"16px",n=d[f++]||"Courier"}return(n!==this.fontFamily||l!==this.fontSize||c!==this.fontStyle)&&(this.fontFamily=n,this.fontSize=l,this.fontStyle=c,u&&this.update(!0)),this.parent},setFontFamily:function(s){return this.fontFamily!==s&&(this.fontFamily=s,this.update(!0)),this.parent},setFontStyle:function(s){return this.fontStyle!==s&&(this.fontStyle=s,this.update(!0)),this.parent},setFontSize:function(s){return typeof s=="number"&&(s=s.toString()+"px"),this.fontSize!==s&&(this.fontSize=s,this.update(!0)),this.parent},setTestString:function(s){return this.testString=s,this.update(!0)},setFixedSize:function(s,u){return this.fixedWidth=s,this.fixedHeight=u,s&&(this.parent.width=s),u&&(this.parent.height=u),this.update(!1)},setBackgroundColor:function(s){return this.backgroundColor=s,this.update(!1)},setFill:function(s){return this.color=s,this.update(!1)},setColor:function(s){return this.color=s,this.update(!1)},setResolution:function(s){return this.resolution=s,this.update(!1)},setStroke:function(s,u){return u===void 0&&(u=this.strokeThickness),s===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==s||this.strokeThickness!==u)&&(this.stroke=s,this.strokeThickness=u,this.update(!0)),this.parent},setShadow:function(s,u,n,l,c,d){return s===void 0&&(s=0),u===void 0&&(u=0),n===void 0&&(n="#000"),l===void 0&&(l=0),c===void 0&&(c=!1),d===void 0&&(d=!0),this.shadowOffsetX=s,this.shadowOffsetY=u,this.shadowColor=n,this.shadowBlur=l,this.shadowStroke=c,this.shadowFill=d,this.update(!1)},setShadowOffset:function(s,u){return s===void 0&&(s=0),u===void 0&&(u=s),this.shadowOffsetX=s,this.shadowOffsetY=u,this.update(!1)},setShadowColor:function(s){return s===void 0&&(s="#000"),this.shadowColor=s,this.update(!1)},setShadowBlur:function(s){return s===void 0&&(s=0),this.shadowBlur=s,this.update(!1)},setShadowStroke:function(s){return this.shadowStroke=s,this.update(!1)},setShadowFill:function(s){return this.shadowFill=s,this.update(!1)},setWordWrapWidth:function(s,u){return u===void 0&&(u=!1),this.wordWrapWidth=s,this.wordWrapUseAdvanced=u,this.update(!1)},setWordWrapCallback:function(s,u){return u===void 0&&(u=null),this.wordWrapCallback=s,this.wordWrapCallbackScope=u,this.update(!1)},setAlign:function(s){return s===void 0&&(s="left"),this.align=s,this.update(!1)},setMaxLines:function(s){return s===void 0&&(s=0),this.maxLines=s,this.update(!1)},getTextMetrics:function(){var s=this.metrics;return{ascent:s.ascent,descent:s.descent,fontSize:s.fontSize}},toJSON:function(){var s={};for(var u in r)s[u]=this[u];return s.metrics=this.getTextMetrics(),s},destroy:function(){this.parent=void 0}});v.exports=e}),34397:((v,T,t)=>{var h=t(70554),g=function(o,a,r,e){if(!(a.width===0||a.height===0)){r.addToRenderList(a);var s=a.frame,u=s.width,n=s.height,l=h.getTintAppendFloatAlpha,c=o.pipelines.set(a.pipeline,a),d=c.setTexture2D(s.glTexture,a);c.batchTexture(a,s.glTexture,u,n,a.x,a.y,u/a.style.resolution,n/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,u,n,l(a.tintTopLeft,r.alpha*a._alphaTL),l(a.tintTopRight,r.alpha*a._alphaTR),l(a.tintBottomLeft,r.alpha*a._alphaBL),l(a.tintBottomRight,r.alpha*a._alphaBR),a.tintFill,0,0,r,e,!1,d)}};v.exports=g}),20839:((v,T,t)=>{var h=t(27919),g=t(83419),o=t(31401),a=t(95643),r=t(98439),e=t(68703),s=t(56295),u=t(45650),n=t(26099),l=8,c=new g({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,s],initialize:function(f,m,y,S,C,E,P){var A=f.sys.renderer;a.call(this,f,"TileSprite");var F=f.sys.textures.get(E),G=F.get(P);G.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),F=f.sys.textures.get("__MISSING"),G=F.get()),F.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),F=f.sys.textures.get("__MISSING"),G=F.get()),!S||!C?(S=S||G.width,C=C||G.height):(S=Math.floor(S),C=Math.floor(C)),this._tilePosition=new n,this._tileScale=new n(1,1),this.dirty=!1,this.renderer=A,this.canvas=h.create(this,S,C),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=F,this.displayFrame=G,this._crop=this.resetCropObject(),this._textureKey=u(),this.texture=f.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=r(G.width),this.potHeight=r(G.height),this.fillCanvas=h.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(m,y),this.setSize(S,C),this.setFrame(P),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(d,f){return this.displayTexture=this.scene.sys.textures.get(d),this.setFrame(f)},setFrame:function(d){var f=this.displayTexture.get(d);return this.potWidth=r(f.width),this.potHeight=r(f.height),this.canvas.width=0,!f.cutWidth||!f.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this.displayFrame=f,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(d,f){return d!==void 0&&(this.tilePositionX=d),f!==void 0&&(this.tilePositionY=f),this},setTileScale:function(d,f){return d===void 0&&(d=this.tileScaleX),f===void 0&&(f=d),this.tileScaleX=d,this.tileScaleY=f,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var d=this.displayFrame;if(d.source.isRenderTexture||d.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var f=this.fillContext,m=this.fillCanvas,y=this.potWidth,S=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=d.cutWidth,S=d.cutHeight),f.clearRect(0,0,y,S),m.width=y,m.height=S,f.drawImage(d.source.image,d.cutX,d.cutY,d.cutWidth,d.cutHeight,0,0,y,S),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=f.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var d=this.canvas;if((d.width!==this.width||d.height!==this.height)&&(d.width=this.width,d.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var f=this.context;this.scene.sys.game.config.antialias||e.disable(f);var m=this._tileScale.x,y=this._tileScale.y,S=this._tilePosition.x,C=this._tilePosition.y;f.clearRect(0,0,this.width,this.height),f.save(),f.scale(m,y),f.translate(-S,-C),f.fillStyle=this.fillPattern,f.fillRect(S,C,this.width/m,this.height/y),f.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),h.remove(this.canvas),h.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var d=this.texture;d&&d.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(d){this._tilePosition.x=d,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(d){this._tilePosition.y=d,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(d){this._tileScale.x=d,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(d){this._tileScale.y=d,this.dirty=!0}}});v.exports=c}),46992:(v=>{var T=function(t,h,g,o){h.updateCanvas(),g.addToRenderList(h),t.batchSprite(h,h.frame,g,o)};v.exports=T}),14167:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(20839);g.register("tileSprite",function(r,e){r===void 0&&(r={});var s=o(r,"x",0),u=o(r,"y",0),n=o(r,"width",512),l=o(r,"height",512),c=o(r,"key",""),d=o(r,"frame",""),f=new a(this.scene,s,u,n,l,c,d);return e!==void 0&&(r.add=e),h(this.scene,f,r),f})}),91681:((v,T,t)=>{var h=t(20839),g=t(39429);g.register("tileSprite",function(o,a,r,e,s,u){return this.displayList.add(new h(this.scene,o,a,r,e,s,u))})}),56295:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(18553),o=t(46992),v.exports={renderWebGL:g,renderCanvas:o}}),18553:((v,T,t)=>{var h=t(70554),g=function(o,a,r,e){a.updateCanvas();var s=a.width,u=a.height;if(!(s===0||u===0)){r.addToRenderList(a);var n=h.getTintAppendFloatAlpha,l=o.pipelines.set(a.pipeline,a),c=l.setTexture2D(a.fillPattern,a);l.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,s,u,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*s,a.originY*u,0,0,s,u,n(a.tintTopLeft,r.alpha*a._alphaTL),n(a.tintTopRight,r.alpha*a._alphaTR),n(a.tintBottomLeft,r.alpha*a._alphaBL),n(a.tintBottomRight,r.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,r,e,!1,c)}};v.exports=g}),18471:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(31401),a=t(51708),r=t(8443),e=t(95643),s=t(36383),u=t(14463),n=t(45650),l=t(10247),c=new g({Extends:e,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.TextureCrop,o.Tint,o.Transform,o.Visible,l],initialize:function(f,m,y,S){e.call(this,f,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=n(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var C=f.sys.game;this._device=C.device.video,this.setPosition(m,y),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),C.events.on(r.PAUSE,this.globalPause,this),C.events.on(r.RESUME,this.globalResume,this);var E=f.sys.sound;E&&E.on(u.GLOBAL_MUTE,this.globalMute,this),S&&this.load(S)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(d){var f=this.scene.sys.cache.video.get(d);return f?(this.cacheKey=d,this.loadHandler(f.url,f.noAudio,f.crossOrigin)):console.warn("No video in cache for key: "+d),this},changeSource:function(d,f,m,y,S){f===void 0&&(f=!0),m===void 0&&(m=!1),this.cacheKey!==d&&(this.load(d),f&&this.play(m,y,S))},getVideoKey:function(){return this.cacheKey},loadURL:function(d,f,m){f===void 0&&(f=!1);var y=this._device.getVideoURL(d);return y?(this.cacheKey="",this.loadHandler(y.url,f,m)):console.warn("No supported video format found for "+d),this},loadMediaStream:function(d,f,m){return this.loadHandler(null,f,m,d)},loadHandler:function(d,f,m,y){f||(f=!1);var S=this.video;if(S?(this.removeLoadEventHandlers(),this.stop()):(S=document.createElement("video"),S.controls=!1,S.setAttribute("playsinline","playsinline"),S.setAttribute("preload","auto"),S.setAttribute("disablePictureInPicture","true")),f?(S.muted=!0,S.defaultMuted=!0,S.setAttribute("autoplay","autoplay")):(S.muted=!1,S.defaultMuted=!1,S.removeAttribute("autoplay")),m?S.setAttribute("crossorigin",m):S.removeAttribute("crossorigin"),y)if("srcObject"in S)try{S.srcObject=y}catch(E){if(E.name!=="TypeError")throw E;S.src=URL.createObjectURL(y)}else S.src=URL.createObjectURL(y);else S.src=d;this.retry=0,this.video=S,this._playCalled=!1,S.load(),this.addLoadEventHandlers();var C=this.scene.sys.textures.get(this._key);return this.setTexture(C),this},requestVideoFrame:function(d,f){var m=this.video;if(m){var y=f.width,S=f.height,C=this.videoTexture,E=this.videoTextureSource,P=!C||E.source!==m;P?(this._codePaused=m.paused,this._codeMuted=m.muted,C?(E.source=m,E.width=y,E.height=S,C.get().setSize(y,S)):(C=this.scene.sys.textures.create(this._key,m,y,S),C.add("__BASE",0,0,0,y,S),this.setTexture(C),this.videoTexture=C,this.videoTextureSource=C.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(a.VIDEO_TEXTURE,this,C)),this.setSizeToFrame(),this.updateDisplayOrigin()):E.update(),this.isStalled=!1,this.metadata=f;var A=f.mediaTime;P&&(this._lastUpdate=A,this.emit(a.VIDEO_CREATED,this,y,S),this.frameReady||(this.frameReady=!0,this.emit(a.VIDEO_PLAY,this))),this._playingMarker?A>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.emit(a.VIDEO_LOOP,this)):(this.stop(!1),this.emit(a.VIDEO_COMPLETE,this))):A<this._lastUpdate&&this.emit(a.VIDEO_LOOP,this),this._lastUpdate=A,this._getFrame?(this.removeEventHandlers(),m.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(d,f,m){f===void 0&&(f=-1),m===void 0&&(m=s.MAX_SAFE_INTEGER);var y=this.video;return!y||this.isPlaying()?(y||console.warn("Video not loaded"),this):(d===void 0&&(d=y.loop),y.loop=d,this._markerIn=f,this._markerOut=m,this._playingMarker=f>-1&&m>f&&m<s.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=y.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var d=this.video;return!d||this.isPlaying()?(d||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=d.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var d=this.video;d&&(d.addEventListener("error",this._loadCallbackHandler),d.addEventListener("abort",this._loadCallbackHandler),d.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var d=this.video;d&&(d.removeEventListener("error",this._loadCallbackHandler),d.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var d=this.video;if(d){var f=this._callbacks;for(var m in f)d.addEventListener(m,f[m])}},removeEventHandlers:function(){var d=this.video;if(d){var f=this._callbacks;for(var m in f)d.removeEventListener(m,f[m])}},createPlayPromise:function(d){d===void 0&&(d=!0);var f=this.video,m=f.play();if(m!==void 0){var y=this.playSuccess.bind(this),S=this.playError.bind(this);if(!d){var C=this;S=function(){C.failedPlayAttempts++}}m.then(y).catch(S)}else f.addEventListener("playing",this._callbacks.legacy),d||this.failedPlayAttempts++},addMarker:function(d,f,m){return!isNaN(f)&&f>=0&&!isNaN(m)&&m>f&&(this.markers[d]=[f,m]),this},playMarker:function(d,f){var m=this.markers[d];return m&&this.play(f,m[0],m[1]),this},removeMarker:function(d){return delete this.markers[d],this},snapshot:function(d,f){return d===void 0&&(d=this.width),f===void 0&&(f=this.height),this.snapshotArea(0,0,this.width,this.height,d,f)},snapshotArea:function(d,f,m,y,S,C){d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=this.width),y===void 0&&(y=this.height),S===void 0&&(S=m),C===void 0&&(C=y);var E=this.video,P=this.snapshotTexture;return P?(P.setSize(S,C),E&&P.context.drawImage(E,d,f,m,y,0,0,S,C)):(P=this.scene.sys.textures.createCanvas(n(),S,C),this.snapshotTexture=P,E&&P.context.drawImage(E,d,f,m,y,0,0,S,C)),P.update()},saveSnapshotTexture:function(d){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,d):this.snapshotTexture=this.scene.sys.textures.createCanvas(d,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(a.VIDEO_UNLOCKED,this));var d=this.scene.sys.sound;d&&d.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(d){var f=d.name;f==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(a.VIDEO_LOCKED,this)):f==="NotSupportedError"?(this.stop(!1),this.emit(a.VIDEO_UNSUPPORTED,this,d)):(this.stop(!1),this.emit(a.VIDEO_ERROR,this,d))},legacyPlayHandler:function(){var d=this.video;d&&(this.playSuccess(),d.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(a.VIDEO_PLAYING,this)},loadErrorHandler:function(d){this.stop(!1),this.emit(a.VIDEO_ERROR,this,d)},metadataHandler:function(d){this.emit(a.VIDEO_METADATA,this,d)},setSizeToFrame:function(d){d||(d=this.frame),this.width=d.realWidth,this.height=d.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this},stalledHandler:function(d){this.isStalled=!0,this.emit(a.VIDEO_STALLED,this,d)},completeHandler:function(){this._playCalled=!1,this.emit(a.VIDEO_COMPLETE,this)},preUpdate:function(d,f){var m=this.video;!m||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=f,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(d){var f=this.video;if(f){var m=f.duration;if(m!==1/0&&!isNaN(m)){var y=m*d;this.setCurrentTime(y)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(d){var f=this.video;if(f){if(typeof d=="string"){var m=d[0],y=parseFloat(d.substr(1));m==="+"?d=f.currentTime+y:m==="-"&&(d=f.currentTime-y)}f.currentTime=d}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(a.VIDEO_SEEKED,this)},getProgress:function(){var d=this.video;if(d){var f=d.duration;if(f!==1/0&&!isNaN(f))return d.currentTime/f}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(d){d===void 0&&(d=!0),this._codeMuted=d;var f=this.video;return f&&(f.muted=this._systemMuted?!0:d),this},isMuted:function(){return this._codeMuted},globalMute:function(d,f){this._systemMuted=f;var m=this.video;m&&(m.muted=this._codeMuted?!0:f)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(d){d===void 0&&(d=!0);var f=this.video;return this._codePaused=d,f&&!f.ended&&(d?f.paused||(this.removeEventHandlers(),f.pause()):d||(this._playCalled?f.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(d){return d===void 0&&(d=1),this.video&&(this.video.volume=h(d,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(d){return this.video&&(this.video.playbackRate=d),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(d){return d===void 0&&(d=!0),this.video&&(this.video.loop=d),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(d,f){return f===void 0&&(f=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,d),this.videoTextureSource.setFlipY(f)),this._key=d,this.flipY=f,!!this.videoTexture},stop:function(d){d===void 0&&(d=!0);var f=this.video;return f&&(this.removeEventHandlers(),f.cancelVideoFrameCallback(this._rfvCallbackId),f.pause()),this.retry=0,this._playCalled=!1,d&&this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var d=this.video;if(d){for(d.parentNode&&d.parentNode.removeChild(d);d.hasChildNodes();)d.removeChild(d.firstChild);d.removeAttribute("autoplay"),d.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var d=this.scene.sys.game.events;d.off(r.PAUSE,this.globalPause,this),d.off(r.RESUME,this.globalResume,this);var f=this.scene.sys.sound;f&&f.off(u.GLOBAL_MUTE,this.globalMute,this)}});v.exports=c}),58352:(v=>{var T=function(t,h,g,o){h.videoTexture&&(g.addToRenderList(h),t.batchSprite(h,h.frame,g,o))};v.exports=T}),11511:((v,T,t)=>{var h=t(25305),g=t(44603),o=t(23568),a=t(18471);g.register("video",function(r,e){r===void 0&&(r={});var s=o(r,"key",null),u=new a(this.scene,0,0,s);return e!==void 0&&(r.add=e),h(this.scene,u,r),u})}),89025:((v,T,t)=>{var h=t(18471),g=t(39429);g.register("video",function(o,a,r){return this.displayList.add(new h(this.scene,o,a,r))})}),10247:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(29849),o=t(58352),v.exports={renderWebGL:g,renderCanvas:o}}),29849:(v=>{var T=function(t,h,g,o){h.videoTexture&&(g.addToRenderList(h),h.pipeline.batchSprite(h,g,o))};v.exports=T}),41481:((v,T,t)=>{var h=t(10312),g=t(96503),o=t(87902),a=t(83419),r=t(31401),e=t(95643),s=t(87841),u=t(37303),n=new a({Extends:e,Mixins:[r.Depth,r.GetBounds,r.Origin,r.Transform,r.ScrollFactor,r.Visible],initialize:function(c,d,f,m,y){m===void 0&&(m=1),y===void 0&&(y=m),e.call(this,c,"Zone"),this.setPosition(d,f),this.width=m,this.height=y,this.blendMode=h.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,c,d){d===void 0&&(d=!0),this.width=l,this.height=c,this.updateDisplayOrigin();var f=this.input;return d&&f&&!f.customHitArea&&(f.hitArea.width=l,f.hitArea.height=c),this},setDisplaySize:function(l,c){return this.displayWidth=l,this.displayHeight=c,this},setCircleDropZone:function(l){return this.setDropZone(new g(0,0,l),o)},setRectangleDropZone:function(l,c){return this.setDropZone(new s(0,0,l,c),u)},setDropZone:function(l,c){return this.input||this.setInteractive(l,c,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(l,c,d){d.addToRenderList(c)},renderWebGL:function(l,c,d){d.addToRenderList(c)}});v.exports=n}),95261:((v,T,t)=>{var h=t(44603),g=t(23568),o=t(41481);h.register("zone",function(a){var r=g(a,"x",0),e=g(a,"y",0),s=g(a,"width",1),u=g(a,"height",s);return new o(this.scene,r,e,s,u)})}),84175:((v,T,t)=>{var h=t(41481),g=t(39429);g.register("zone",function(o,a,r,e){return this.displayList.add(new h(this.scene,o,a,r,e))})}),95166:(v=>{var T=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0};v.exports=T}),96503:((v,T,t)=>{var h=t(83419),g=t(87902),o=t(26241),a=t(79124),r=t(23777),e=t(28176),s=new h({initialize:function(n,l,c){n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=0),this.type=r.CIRCLE,this.x=n,this.y=l,this._radius=c,this._diameter=c*2},contains:function(u,n){return g(this,u,n)},getPoint:function(u,n){return o(this,u,n)},getPoints:function(u,n,l){return a(this,u,n,l)},getRandomPoint:function(u){return e(this,u)},setTo:function(u,n,l){return this.x=u,this.y=n,this._radius=l,this._diameter=l*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(u,n){return n===void 0&&(n=u),this.x=u,this.y=n,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this._diameter=u*2}},diameter:{get:function(){return this._diameter},set:function(u){this._diameter=u,this._radius=u*.5}},left:{get:function(){return this.x-this._radius},set:function(u){this.x=u+this._radius}},right:{get:function(){return this.x+this._radius},set:function(u){this.x=u-this._radius}},top:{get:function(){return this.y-this._radius},set:function(u){this.y=u+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(u){this.y=u-this._radius}}});v.exports=s}),71562:(v=>{var T=function(t){return 2*(Math.PI*t.radius)};v.exports=T}),92110:((v,T,t)=>{var h=t(2141),g=function(o,a,r){return r===void 0&&(r=new h),r.x=o.x+o.radius*Math.cos(a),r.y=o.y+o.radius*Math.sin(a),r};v.exports=g}),42250:((v,T,t)=>{var h=t(96503),g=function(o){return new h(o.x,o.y,o.radius)};v.exports=g}),87902:(v=>{var T=function(t,h,g){if(t.radius>0&&h>=t.left&&h<=t.right&&g>=t.top&&g<=t.bottom){var o=(t.x-h)*(t.x-h),a=(t.y-g)*(t.y-g);return o+a<=t.radius*t.radius}else return!1};v.exports=T}),5698:((v,T,t)=>{var h=t(87902),g=function(o,a){return h(o,a.x,a.y)};v.exports=g}),70588:((v,T,t)=>{var h=t(87902),g=function(o,a){return h(o,a.x,a.y)&&h(o,a.right,a.y)&&h(o,a.x,a.bottom)&&h(o,a.right,a.bottom)};v.exports=g}),26394:(v=>{var T=function(t,h){return h.setTo(t.x,t.y,t.radius)};v.exports=T}),76278:(v=>{var T=function(t,h){return t.x===h.x&&t.y===h.y&&t.radius===h.radius};v.exports=T}),2074:((v,T,t)=>{var h=t(87841),g=function(o,a){return a===void 0&&(a=new h),a.x=o.left,a.y=o.top,a.width=o.diameter,a.height=o.diameter,a};v.exports=g}),26241:((v,T,t)=>{var h=t(92110),g=t(62945),o=t(36383),a=t(2141),r=function(e,s,u){u===void 0&&(u=new a);var n=g(s,0,o.PI2);return h(e,n,u)};v.exports=r}),79124:((v,T,t)=>{var h=t(71562),g=t(92110),o=t(62945),a=t(36383),r=function(e,s,u,n){n===void 0&&(n=[]),!s&&u>0&&(s=h(e)/u);for(var l=0;l<s;l++){var c=o(l/s,0,a.PI2);n.push(g(e,c))}return n};v.exports=r}),50884:(v=>{var T=function(t,h,g){return t.x+=h,t.y+=g,t};v.exports=T}),39212:(v=>{var T=function(t,h){return t.x+=h.x,t.y+=h.y,t};v.exports=T}),28176:((v,T,t)=>{var h=t(2141),g=function(o,a){a===void 0&&(a=new h);var r=2*Math.PI*Math.random(),e=Math.random()+Math.random(),s=e>1?2-e:e,u=s*Math.cos(r),n=s*Math.sin(r);return a.x=o.x+u*o.radius,a.y=o.y+n*o.radius,a};v.exports=g}),88911:((v,T,t)=>{var h=t(96503);h.Area=t(95166),h.Circumference=t(71562),h.CircumferencePoint=t(92110),h.Clone=t(42250),h.Contains=t(87902),h.ContainsPoint=t(5698),h.ContainsRect=t(70588),h.CopyFrom=t(26394),h.Equals=t(76278),h.GetBounds=t(2074),h.GetPoint=t(26241),h.GetPoints=t(79124),h.Offset=t(50884),h.OffsetPoint=t(39212),h.Random=t(28176),v.exports=h}),23777:(v=>{var T={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};v.exports=T}),78874:(v=>{var T=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};v.exports=T}),92990:(v=>{var T=function(t){var h=t.width/2,g=t.height/2,o=Math.pow(h-g,2)/Math.pow(h+g,2);return Math.PI*(h+g)*(1+3*o/(10+Math.sqrt(4-3*o)))};v.exports=T}),79522:((v,T,t)=>{var h=t(2141),g=function(o,a,r){r===void 0&&(r=new h);var e=o.width/2,s=o.height/2;return r.x=o.x+e*Math.cos(a),r.y=o.y+s*Math.sin(a),r};v.exports=g}),58102:((v,T,t)=>{var h=t(8497),g=function(o){return new h(o.x,o.y,o.width,o.height)};v.exports=g}),81154:(v=>{var T=function(t,h,g){if(t.width<=0||t.height<=0)return!1;var o=(h-t.x)/t.width,a=(g-t.y)/t.height;return o*=o,a*=a,o+a<.25};v.exports=T}),46662:((v,T,t)=>{var h=t(81154),g=function(o,a){return h(o,a.x,a.y)};v.exports=g}),1632:((v,T,t)=>{var h=t(81154),g=function(o,a){return h(o,a.x,a.y)&&h(o,a.right,a.y)&&h(o,a.x,a.bottom)&&h(o,a.right,a.bottom)};v.exports=g}),65534:(v=>{var T=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)};v.exports=T}),8497:((v,T,t)=>{var h=t(83419),g=t(81154),o=t(90549),a=t(48320),r=t(23777),e=t(24820),s=new h({initialize:function(n,l,c,d){n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),this.type=r.ELLIPSE,this.x=n,this.y=l,this.width=c,this.height=d},contains:function(u,n){return g(this,u,n)},getPoint:function(u,n){return o(this,u,n)},getPoints:function(u,n,l){return a(this,u,n,l)},getRandomPoint:function(u){return e(this,u)},setTo:function(u,n,l,c){return this.x=u,this.y=n,this.width=l,this.height=c,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(u,n){return n===void 0&&(n=u),this.x=u,this.y=n,this},setSize:function(u,n){return n===void 0&&(n=u),this.width=u,this.height=n,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(u){this.x=u+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(u){this.y=u+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});v.exports=s}),36146:(v=>{var T=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height};v.exports=T}),23694:((v,T,t)=>{var h=t(87841),g=function(o,a){return a===void 0&&(a=new h),a.x=o.left,a.y=o.top,a.width=o.width,a.height=o.height,a};v.exports=g}),90549:((v,T,t)=>{var h=t(79522),g=t(62945),o=t(36383),a=t(2141),r=function(e,s,u){u===void 0&&(u=new a);var n=g(s,0,o.PI2);return h(e,n,u)};v.exports=r}),48320:((v,T,t)=>{var h=t(92990),g=t(79522),o=t(62945),a=t(36383),r=function(e,s,u,n){n===void 0&&(n=[]),!s&&u>0&&(s=h(e)/u);for(var l=0;l<s;l++){var c=o(l/s,0,a.PI2);n.push(g(e,c))}return n};v.exports=r}),73424:(v=>{var T=function(t,h,g){return t.x+=h,t.y+=g,t};v.exports=T}),44808:(v=>{var T=function(t,h){return t.x+=h.x,t.y+=h.y,t};v.exports=T}),24820:((v,T,t)=>{var h=t(2141),g=function(o,a){a===void 0&&(a=new h);var r=Math.random()*Math.PI*2,e=Math.sqrt(Math.random());return a.x=o.x+e*Math.cos(r)*o.width/2,a.y=o.y+e*Math.sin(r)*o.height/2,a};v.exports=g}),49203:((v,T,t)=>{var h=t(8497);h.Area=t(78874),h.Circumference=t(92990),h.CircumferencePoint=t(79522),h.Clone=t(58102),h.Contains=t(81154),h.ContainsPoint=t(46662),h.ContainsRect=t(1632),h.CopyFrom=t(65534),h.Equals=t(36146),h.GetBounds=t(23694),h.GetPoint=t(90549),h.GetPoints=t(48320),h.Offset=t(73424),h.OffsetPoint=t(44808),h.Random=t(24820),v.exports=h}),55738:((v,T,t)=>{var h=t(23777),g=t(79291),o={Circle:t(88911),Ellipse:t(49203),Intersects:t(91865),Line:t(2529),Mesh:t(73090),Point:t(43711),Polygon:t(58423),Rectangle:t(93232),Triangle:t(84435)};o=g(!1,o,h),v.exports=o}),2044:((v,T,t)=>{var h=t(20339),g=function(o,a){return h(o.x,o.y,a.x,a.y)<=o.radius+a.radius};v.exports=g}),81491:(v=>{var T=function(t,h){var g=h.width/2,o=h.height/2,a=Math.abs(t.x-h.x-g),r=Math.abs(t.y-h.y-o),e=g+t.radius,s=o+t.radius;if(a>e||r>s)return!1;if(a<=g||r<=o)return!0;var u=a-g,n=r-o,l=u*u,c=n*n,d=t.radius*t.radius;return l+c<=d};v.exports=T}),63376:((v,T,t)=>{var h=t(2141),g=t(2044),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var s=a.x,u=a.y,n=a.radius,l=r.x,c=r.y,d=r.radius,f,m,y,S,C;if(u===c)C=(d*d-n*n-l*l+s*s)/(2*(s-l)),f=1,m=-2*c,y=l*l+C*C-2*l*C+c*c-d*d,S=m*m-4*f*y,S===0?e.push(new h(C,-m/(2*f))):S>0&&(e.push(new h(C,(-m+Math.sqrt(S))/(2*f))),e.push(new h(C,(-m-Math.sqrt(S))/(2*f))));else{var E=(s-l)/(u-c),P=(d*d-n*n-l*l+s*s-c*c+u*u)/(2*(u-c));f=E*E+1,m=2*u*E-2*P*E-2*s,y=s*s+u*u+P*P-n*n-2*u*P,S=m*m-4*f*y,S===0?(C=-m/(2*f),e.push(new h(C,P-C*E))):S>0&&(C=(-m+Math.sqrt(S))/(2*f),e.push(new h(C,P-C*E)),C=(-m-Math.sqrt(S))/(2*f),e.push(new h(C,P-C*E)))}}return e};v.exports=o}),97439:((v,T,t)=>{var h=t(4042),g=t(81491),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var s=r.getLineA(),u=r.getLineB(),n=r.getLineC(),l=r.getLineD();h(s,a,e),h(u,a,e),h(n,a,e),h(l,a,e)}return e};v.exports=o}),4042:((v,T,t)=>{var h=t(2141),g=t(80462),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var s=a.x1,u=a.y1,n=a.x2,l=a.y2,c=r.x,d=r.y,f=r.radius,m=n-s,y=l-u,S=s-c,C=u-d,E=m*m+y*y,P=2*(m*S+y*C),A=S*S+C*C-f*f,F=P*P-4*E*A,G,D;if(F===0){var L=-P/(2*E);G=s+L*m,D=u+L*y,L>=0&&L<=1&&e.push(new h(G,D))}else if(F>0){var b=(-P-Math.sqrt(F))/(2*E);G=s+b*m,D=u+b*y,b>=0&&b<=1&&e.push(new h(G,D));var I=(-P+Math.sqrt(F))/(2*E);G=s+I*m,D=u+I*y,I>=0&&I<=1&&e.push(new h(G,D))}}return e};v.exports=o}),36100:((v,T,t)=>{var h=t(25836),g=function(o,a,r,e){r===void 0&&(r=!1);var s=o.x1,u=o.y1,n=o.x2,l=o.y2,c=a.x1,d=a.y1,f=a.x2,m=a.y2,y=n-s,S=l-u,C=f-c,E=m-d,P=y*E-S*C;if(P===0)return null;var A,F,G;if(r){if(A=(y*(d-u)+S*(s-c))/(C*S-E*y),y!==0)F=(c+C*A-s)/y;else if(S!==0)F=(d+E*A-u)/S;else return null;if(F<0||A<0||A>1)return null;G=F}else{if(A=((c-s)*E-(d-u)*C)/P,F=((u-d)*y-(s-c)*S)/P,A<0||A>1||F<0||F>1)return null;G=A}return e===void 0&&(e=new h),e.set(s+y*G,u+S*G,G)};v.exports=g}),3073:((v,T,t)=>{var h=t(36100),g=t(23031),o=t(25836),a=new g,r=new o,e=function(s,u,n,l){n===void 0&&(n=!1),l===void 0&&(l=new o);var c=!1;l.set(),r.set();for(var d=u[u.length-1],f=0;f<u.length;f++){var m=u[f];a.setTo(d.x,d.y,m.x,m.y),d=m,h(s,a,n,r)&&(!c||r.z<l.z)&&(l.copy(r),c=!0)}return c?l:null};v.exports=e}),56362:((v,T,t)=>{var h=t(25836),g=t(61369),o=t(3073),a=new h,r=function(e,s,u,n){n===void 0&&(n=new g),Array.isArray(s)||(s=[s]);var l=!1;n.set(),a.set();for(var c=0;c<s.length;c++)o(e,s[c].points,u,a)&&(!l||a.z<n.z)&&(n.set(a.x,a.y,a.z,c),l=!0);return l?n:null};v.exports=r}),60646:((v,T,t)=>{var h=t(2141),g=t(76112),o=t(92773),a=function(r,e,s){if(s===void 0&&(s=[]),o(r,e))for(var u=e.getLineA(),n=e.getLineB(),l=e.getLineC(),c=e.getLineD(),d=[new h,new h,new h,new h],f=[g(u,r,d[0]),g(n,r,d[1]),g(l,r,d[2]),g(c,r,d[3])],m=0;m<4;m++)f[m]&&s.push(d[m]);return s};v.exports=a}),71147:((v,T,t)=>{var h=t(61369),g=t(56362),o=t(23031),a=new o;function r(u,n,l,c,d){var f=Math.cos(u),m=Math.sin(u);a.setTo(n,l,n+f,l+m);var y=g(a,c,!0);y&&d.push(new h(y.x,y.y,u,y.w))}function e(u,n){return u.z-n.z}var s=function(u,n,l){Array.isArray(l)||(l=[l]);for(var c=[],d=[],f=0;f<l.length;f++)for(var m=l[f].points,y=0;y<m.length;y++){var S=Math.atan2(m[y].y-n,m[y].x-u);d.indexOf(S)===-1&&(r(S,u,n,l,c),r(S-1e-5,u,n,l,c),r(S+1e-5,u,n,l,c),d.push(S))}return c.sort(e)};v.exports=s}),68389:((v,T,t)=>{var h=t(87841),g=t(59996),o=function(a,r,e){return e===void 0&&(e=new h),g(a,r)&&(e.x=Math.max(a.x,r.x),e.y=Math.max(a.y,r.y),e.width=Math.min(a.right,r.right)-e.x,e.height=Math.min(a.bottom,r.bottom)-e.y),e};v.exports=o}),52784:((v,T,t)=>{var h=t(60646),g=t(59996),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var s=a.getLineA(),u=a.getLineB(),n=a.getLineC(),l=a.getLineD();h(s,r,e),h(u,r,e),h(n,r,e),h(l,r,e)}return e};v.exports=o}),26341:((v,T,t)=>{var h=t(89265),g=t(60646),o=function(a,r,e){if(e===void 0&&(e=[]),h(a,r)){var s=r.getLineA(),u=r.getLineB(),n=r.getLineC();g(s,a,e),g(u,a,e),g(n,a,e)}return e};v.exports=o}),38720:((v,T,t)=>{var h=t(4042),g=t(67636),o=function(a,r,e){if(e===void 0&&(e=[]),g(a,r)){var s=a.getLineA(),u=a.getLineB(),n=a.getLineC();h(s,r,e),h(u,r,e),h(n,r,e)}return e};v.exports=o}),13882:((v,T,t)=>{var h=t(2141),g=t(2822),o=t(76112),a=function(r,e,s){if(s===void 0&&(s=[]),g(r,e))for(var u=r.getLineA(),n=r.getLineB(),l=r.getLineC(),c=[new h,new h,new h],d=[o(u,e,c[0]),o(n,e,c[1]),o(l,e,c[2])],f=0;f<3;f++)d[f]&&s.push(c[f]);return s};v.exports=a}),75636:((v,T,t)=>{var h=t(82944),g=t(13882),o=function(a,r,e){if(e===void 0&&(e=[]),h(a,r)){var s=r.getLineA(),u=r.getLineB(),n=r.getLineC();g(a,s,e),g(a,u,e),g(a,n,e)}return e};v.exports=o}),80462:((v,T,t)=>{var h=t(87902),g=t(2141),o=new g,a=function(r,e,s){if(s===void 0&&(s=o),h(e,r.x1,r.y1))return s.x=r.x1,s.y=r.y1,!0;if(h(e,r.x2,r.y2))return s.x=r.x2,s.y=r.y2,!0;var u=r.x2-r.x1,n=r.y2-r.y1,l=e.x-r.x1,c=e.y-r.y1,d=u*u+n*n,f=u,m=n;if(d>0){var y=(l*u+c*n)/d;f*=y,m*=y}s.x=r.x1+f,s.y=r.y1+m;var S=f*f+m*m;return S<=d&&f*u+m*n>=0&&h(e,s.x,s.y)};v.exports=a}),76112:(v=>{var T=function(t,h,g){var o=t.x1,a=t.y1,r=t.x2,e=t.y2,s=h.x1,u=h.y1,n=h.x2,l=h.y2;if(o===r&&a===e||s===n&&u===l)return!1;var c=(l-u)*(r-o)-(n-s)*(e-a);if(c===0)return!1;var d=((n-s)*(a-u)-(l-u)*(o-s))/c,f=((r-o)*(a-u)-(e-a)*(o-s))/c;return d<0||d>1||f<0||f>1?!1:(g&&(g.x=o+d*(r-o),g.y=a+d*(e-a)),!0)};v.exports=T}),92773:(v=>{var T=function(t,h){var g=t.x1,o=t.y1,a=t.x2,r=t.y2,e=h.x,s=h.y,u=h.right,n=h.bottom,l=0;if(g>=e&&g<=u&&o>=s&&o<=n||a>=e&&a<=u&&r>=s&&r<=n)return!0;if(g<e&&a>=e){if(l=o+(r-o)*(e-g)/(a-g),l>s&&l<=n)return!0}else if(g>u&&a<=u&&(l=o+(r-o)*(u-g)/(a-g),l>=s&&l<=n))return!0;if(o<s&&r>=s){if(l=g+(a-g)*(s-o)/(r-o),l>=e&&l<=u)return!0}else if(o>n&&r<=n&&(l=g+(a-g)*(n-o)/(r-o),l>=e&&l<=u))return!0;return!1};v.exports=T}),16204:(v=>{var T=function(t,h,g){g===void 0&&(g=1);var o=h.x1,a=h.y1,r=h.x2,e=h.y2,s=t.x,u=t.y,n=(r-o)*(r-o)+(e-a)*(e-a);if(n===0)return!1;var l=((s-o)*(r-o)+(u-a)*(e-a))/n;if(l<0)return Math.sqrt((o-s)*(o-s)+(a-u)*(a-u))<=g;if(l>=0&&l<=1){var c=((a-u)*(r-o)-(o-s)*(e-a))/n;return Math.abs(c)*Math.sqrt(n)<=g}else return Math.sqrt((r-s)*(r-s)+(e-u)*(e-u))<=g};v.exports=T}),14199:((v,T,t)=>{var h=t(16204),g=function(o,a){if(!h(o,a))return!1;var r=Math.min(a.x1,a.x2),e=Math.max(a.x1,a.x2),s=Math.min(a.y1,a.y2),u=Math.max(a.y1,a.y2);return o.x>=r&&o.x<=e&&o.y>=s&&o.y<=u};v.exports=g}),59996:(v=>{var T=function(t,h){return t.width<=0||t.height<=0||h.width<=0||h.height<=0?!1:!(t.right<h.x||t.bottom<h.y||t.x>h.right||t.y>h.bottom)};v.exports=T}),89265:((v,T,t)=>{var h=t(76112),g=t(37303),o=t(48653),a=t(77493),r=function(e,s){if(s.left>e.right||s.right<e.left||s.top>e.bottom||s.bottom<e.top)return!1;var u=s.getLineA(),n=s.getLineB(),l=s.getLineC();if(g(e,u.x1,u.y1)||g(e,u.x2,u.y2)||g(e,n.x1,n.y1)||g(e,n.x2,n.y2)||g(e,l.x1,l.y1)||g(e,l.x2,l.y2))return!0;var c=e.getLineA(),d=e.getLineB(),f=e.getLineC(),m=e.getLineD();if(h(u,c)||h(u,d)||h(u,f)||h(u,m)||h(n,c)||h(n,d)||h(n,f)||h(n,m)||h(l,c)||h(l,d)||h(l,f)||h(l,m))return!0;var y=a(e),S=o(s,y,!0);return S.length>0};v.exports=r}),84411:(v=>{var T=function(t,h,g,o,a,r){return r===void 0&&(r=0),!(h>t.right+r||g<t.left-r||o>t.bottom+r||a<t.top-r)};v.exports=T}),67636:((v,T,t)=>{var h=t(80462),g=t(10690),o=function(a,r){return a.left>r.right||a.right<r.left||a.top>r.bottom||a.bottom<r.top?!1:!!(g(a,r.x,r.y)||h(a.getLineA(),r)||h(a.getLineB(),r)||h(a.getLineC(),r))};v.exports=o}),2822:((v,T,t)=>{var h=t(76112),g=function(o,a){return!!(o.contains(a.x1,a.y1)||o.contains(a.x2,a.y2)||h(o.getLineA(),a)||h(o.getLineB(),a)||h(o.getLineC(),a))};v.exports=g}),82944:((v,T,t)=>{var h=t(48653),g=t(71694),o=t(76112),a=function(r,e){if(r.left>e.right||r.right<e.left||r.top>e.bottom||r.bottom<e.top)return!1;var s=r.getLineA(),u=r.getLineB(),n=r.getLineC(),l=e.getLineA(),c=e.getLineB(),d=e.getLineC();if(o(s,l)||o(s,c)||o(s,d)||o(u,l)||o(u,c)||o(u,d)||o(n,l)||o(n,c)||o(n,d))return!0;var f=g(r),m=h(e,f,!0);return m.length>0||(f=g(e),m=h(r,f,!0),m.length>0)};v.exports=a}),91865:((v,T,t)=>{v.exports={CircleToCircle:t(2044),CircleToRectangle:t(81491),GetCircleToCircle:t(63376),GetCircleToRectangle:t(97439),GetLineToCircle:t(4042),GetLineToLine:t(36100),GetLineToPoints:t(3073),GetLineToPolygon:t(56362),GetLineToRectangle:t(60646),GetRaysFromPointToPolygon:t(71147),GetRectangleIntersection:t(68389),GetRectangleToRectangle:t(52784),GetRectangleToTriangle:t(26341),GetTriangleToCircle:t(38720),GetTriangleToLine:t(13882),GetTriangleToTriangle:t(75636),LineToCircle:t(80462),LineToLine:t(76112),LineToRectangle:t(92773),PointToLine:t(16204),PointToLineSegment:t(14199),RectangleToRectangle:t(59996),RectangleToTriangle:t(89265),RectangleToValues:t(84411),TriangleToCircle:t(67636),TriangleToLine:t(2822),TriangleToTriangle:t(82944)}}),91938:(v=>{var T=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};v.exports=T}),84993:(v=>{var T=function(t,h,g){h===void 0&&(h=1),g===void 0&&(g=[]);var o=Math.round(t.x1),a=Math.round(t.y1),r=Math.round(t.x2),e=Math.round(t.y2),s=Math.abs(r-o),u=Math.abs(e-a),n=o<r?1:-1,l=a<e?1:-1,c=s-u;g.push({x:o,y:a});for(var d=1;!(o===r&&a===e);){var f=c<<1;f>-u&&(c-=u,o+=n),f<s&&(c+=s,a+=l),d%h===0&&g.push({x:o,y:a}),d++}return g};v.exports=T}),36469:(v=>{var T=function(t,h,g){var o=h-(t.x1+t.x2)/2,a=g-(t.y1+t.y2)/2;return t.x1+=o,t.y1+=a,t.x2+=o,t.y2+=a,t};v.exports=T}),31116:((v,T,t)=>{var h=t(23031),g=function(o){return new h(o.x1,o.y1,o.x2,o.y2)};v.exports=g}),59944:(v=>{var T=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2)};v.exports=T}),59220:(v=>{var T=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2};v.exports=T}),78177:((v,T,t)=>{var h=t(35001),g=function(o,a,r){r===void 0&&(r=a);var e=h(o),s=o.x2-o.x1,u=o.y2-o.y1;return a&&(o.x1=o.x1-s/e*a,o.y1=o.y1-u/e*a),r&&(o.x2=o.x2+s/e*r,o.y2=o.y2+u/e*r),o};v.exports=g}),26708:((v,T,t)=>{var h=t(52816),g=t(6113),o=t(2141),a=function(r,e,s,u,n){u===void 0&&(u=0),n===void 0&&(n=[]);var l=[],c=r.x1,d=r.y1,f=r.x2-c,m=r.y2-d,y=g(e,n),S,C,E=s-1;for(S=0;S<E;S++)C=y(S/E),l.push(new o(c+f*C,d+m*C));if(C=y(1),l.push(new o(c+f*C,d+m*C)),u>0){var P=l[0],A=[P];for(S=1;S<l.length-1;S++){var F=l[S];h(P,F)>=u&&(A.push(F),P=F)}var G=l[l.length-1];return h(P,G)<u&&A.pop(),A.push(G),A}else return l};v.exports=a}),32125:((v,T,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=(o.x1+o.x2)/2,a.y=(o.y1+o.y2)/2,a};v.exports=g}),99569:((v,T,t)=>{var h=t(2141),g=function(o,a,r){r===void 0&&(r=new h);var e=o.x1,s=o.y1,u=o.x2,n=o.y2,l=(u-e)*(u-e)+(n-s)*(n-s);if(l===0)return r;var c=((a.x-e)*(u-e)+(a.y-s)*(n-s))/l;return r.x=e+c*(u-e),r.y=s+c*(n-s),r};v.exports=g}),34638:((v,T,t)=>{var h=t(36383),g=t(91938),o=t(2141),a=function(r,e){e===void 0&&(e=new o);var s=g(r)-h.TAU;return e.x=Math.cos(s),e.y=Math.sin(s),e};v.exports=a}),13151:((v,T,t)=>{var h=t(2141),g=function(o,a,r){return r===void 0&&(r=new h),r.x=o.x1+(o.x2-o.x1)*a,r.y=o.y1+(o.y2-o.y1)*a,r};v.exports=g}),15258:((v,T,t)=>{var h=t(35001),g=t(2141),o=function(a,r,e,s){s===void 0&&(s=[]),!r&&e>0&&(r=h(a)/e);for(var u=a.x1,n=a.y1,l=a.x2,c=a.y2,d=0;d<r;d++){var f=d/r,m=u+(l-u)*f,y=n+(c-n)*f;s.push(new g(m,y))}return s};v.exports=o}),26408:(v=>{var T=function(t,h){var g=t.x1,o=t.y1,a=t.x2,r=t.y2,e=(a-g)*(a-g)+(r-o)*(r-o);if(e===0)return!1;var s=((o-h.y)*(a-g)-(g-h.x)*(r-o))/e;return Math.abs(s)*Math.sqrt(e)};v.exports=T}),98770:(v=>{var T=function(t){return Math.abs(t.y1-t.y2)};v.exports=T}),35001:(v=>{var T=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))};v.exports=T}),23031:((v,T,t)=>{var h=t(83419),g=t(13151),o=t(15258),a=t(23777),r=t(65822),e=t(26099),s=new h({initialize:function(n,l,c,d){n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),this.type=a.LINE,this.x1=n,this.y1=l,this.x2=c,this.y2=d},getPoint:function(u,n){return g(this,u,n)},getPoints:function(u,n,l){return o(this,u,n,l)},getRandomPoint:function(u){return r(this,u)},setTo:function(u,n,l,c){return u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=0),this.x1=u,this.y1=n,this.x2=l,this.y2=c,this},setFromObjects:function(u,n){return this.x1=u.x,this.y1=u.y,this.x2=n.x,this.y2=n.y,this},getPointA:function(u){return u===void 0&&(u=new e),u.set(this.x1,this.y1),u},getPointB:function(u){return u===void 0&&(u=new e),u.set(this.x2,this.y2),u},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(u){this.x1<=this.x2?this.x1=u:this.x2=u}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(u){this.x1>this.x2?this.x1=u:this.x2=u}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(u){this.y1<=this.y2?this.y1=u:this.y2=u}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(u){this.y1>this.y2?this.y1=u:this.y2=u}}});v.exports=s}),64795:((v,T,t)=>{var h=t(36383),g=t(15994),o=t(91938),a=function(r){var e=o(r)-h.TAU;return g(e,-Math.PI,Math.PI)};v.exports=a}),52616:((v,T,t)=>{var h=t(36383),g=t(91938),o=function(a){return Math.cos(g(a)-h.TAU)};v.exports=o}),87231:((v,T,t)=>{var h=t(36383),g=t(91938),o=function(a){return Math.sin(g(a)-h.TAU)};v.exports=o}),89662:(v=>{var T=function(t,h,g){return t.x1+=h,t.y1+=g,t.x2+=h,t.y2+=g,t};v.exports=T}),71165:(v=>{var T=function(t){return-((t.x2-t.x1)/(t.y2-t.y1))};v.exports=T}),65822:((v,T,t)=>{var h=t(2141),g=function(o,a){a===void 0&&(a=new h);var r=Math.random();return a.x=o.x1+r*(o.x2-o.x1),a.y=o.y1+r*(o.y2-o.y1),a};v.exports=g}),69777:((v,T,t)=>{var h=t(91938),g=t(64795),o=function(a,r){return 2*g(r)-Math.PI-h(a)};v.exports=o}),39706:((v,T,t)=>{var h=t(64400),g=function(o,a){var r=(o.x1+o.x2)/2,e=(o.y1+o.y2)/2;return h(o,r,e,a)};v.exports=g}),82585:((v,T,t)=>{var h=t(64400),g=function(o,a,r){return h(o,a.x,a.y,r)};v.exports=g}),64400:(v=>{var T=function(t,h,g,o){var a=Math.cos(o),r=Math.sin(o),e=t.x1-h,s=t.y1-g;return t.x1=e*a-s*r+h,t.y1=e*r+s*a+g,e=t.x2-h,s=t.y2-g,t.x2=e*a-s*r+h,t.y2=e*r+s*a+g,t};v.exports=T}),62377:(v=>{var T=function(t,h,g,o,a){return t.x1=h,t.y1=g,t.x2=h+Math.cos(o)*a,t.y2=g+Math.sin(o)*a,t};v.exports=T}),71366:(v=>{var T=function(t){return(t.y2-t.y1)/(t.x2-t.x1)};v.exports=T}),10809:(v=>{var T=function(t){return Math.abs(t.x1-t.x2)};v.exports=T}),2529:((v,T,t)=>{var h=t(23031);h.Angle=t(91938),h.BresenhamPoints=t(84993),h.CenterOn=t(36469),h.Clone=t(31116),h.CopyFrom=t(59944),h.Equals=t(59220),h.Extend=t(78177),h.GetEasedPoints=t(26708),h.GetMidPoint=t(32125),h.GetNearestPoint=t(99569),h.GetNormal=t(34638),h.GetPoint=t(13151),h.GetPoints=t(15258),h.GetShortestDistance=t(26408),h.Height=t(98770),h.Length=t(35001),h.NormalAngle=t(64795),h.NormalX=t(52616),h.NormalY=t(87231),h.Offset=t(89662),h.PerpSlope=t(71165),h.Random=t(65822),h.ReflectAngle=t(69777),h.Rotate=t(39706),h.RotateAroundPoint=t(82585),h.RotateAroundXY=t(64400),h.SetToAngle=t(62377),h.Slope=t(71366),h.Width=t(10809),v.exports=h}),83997:((v,T,t)=>{var h=t(83419),g=t(87841),o=t(26099);function a(e,s,u,n){var l=e-u,c=s-n,d=l*l+c*c;return Math.sqrt(d)}var r=new h({initialize:function(s,u,n){this.vertex1=s,this.vertex2=u,this.vertex3=n,this.bounds=new g,this._inCenter=new o},getInCenter:function(e){e===void 0&&(e=!0);var s=this.vertex1,u=this.vertex2,n=this.vertex3,l,c,d,f,m,y;e?(l=s.x,c=s.y,d=u.x,f=u.y,m=n.x,y=n.y):(l=s.vx,c=s.vy,d=u.vx,f=u.vy,m=n.vx,y=n.vy);var S=a(m,y,d,f),C=a(l,c,m,y),E=a(d,f,l,c),P=S+C+E;return this._inCenter.set((l*S+d*C+m*E)/P,(c*S+f*C+y*E)/P)},contains:function(e,s,u){var n=this.vertex1,l=this.vertex2,c=this.vertex3,d=n.vx,f=n.vy,m=l.vx,y=l.vy,S=c.vx,C=c.vy;if(u){var E=u.a,P=u.b,A=u.c,F=u.d,G=u.e,D=u.f;d=n.vx*E+n.vy*A+G,f=n.vx*P+n.vy*F+D,m=l.vx*E+l.vy*A+G,y=l.vx*P+l.vy*F+D,S=c.vx*E+c.vy*A+G,C=c.vx*P+c.vy*F+D}var L=S-d,b=C-f,I=m-d,N=y-f,Z=e-d,U=s-f,W=L*L+b*b,X=L*I+b*N,V=L*Z+b*U,O=I*I+N*N,z=I*Z+N*U,B=W*O-X*X,Y=B===0?0:1/B,k=(O*V-X*z)*Y,J=(W*z-X*V)*Y;return k>=0&&J>=0&&k+J<1},isCounterClockwise:function(e){var s=this.vertex1,u=this.vertex2,n=this.vertex3,l=(u.vx-s.vx)*(n.vy-s.vy)-(u.vy-s.vy)*(n.vx-s.vx);return e<=0?l>=0:l<0},load:function(e,s,u,n,l){return u=this.vertex1.load(e,s,u,n,l),u=this.vertex2.load(e,s,u,n,l),u=this.vertex3.load(e,s,u,n,l),u},transformCoordinatesLocal:function(e,s,u,n){return this.vertex1.transformCoordinatesLocal(e,s,u,n),this.vertex2.transformCoordinatesLocal(e,s,u,n),this.vertex3.transformCoordinatesLocal(e,s,u,n),this},updateBounds:function(){var e=this.vertex1,s=this.vertex2,u=this.vertex3,n=this.bounds;return n.x=Math.min(e.vx,s.vx,u.vx),n.y=Math.min(e.vy,s.vy,u.vy),n.width=Math.max(e.vx,s.vx,u.vx)-n.x,n.height=Math.max(e.vy,s.vy,u.vy)-n.y,this},isInView:function(e,s,u,n,l,c,d,f,m,y,S){this.update(n,l,c,d,f,m,y,S);var C=this.vertex1,E=this.vertex2,P=this.vertex3;if(C.ta<=0&&E.ta<=0&&P.ta<=0||s&&!this.isCounterClockwise(u))return!1;var A=this.bounds;A.x=Math.min(C.tx,E.tx,P.tx),A.y=Math.min(C.ty,E.ty,P.ty),A.width=Math.max(C.tx,E.tx,P.tx)-A.x,A.height=Math.max(C.ty,E.ty,P.ty)-A.y;var F=e.x+e.width,G=e.y+e.height;return A.width<=0||A.height<=0||e.width<=0||e.height<=0?!1:!(A.right<e.x||A.bottom<e.y||A.x>F||A.y>G)},scrollUV:function(e,s){return this.vertex1.scrollUV(e,s),this.vertex2.scrollUV(e,s),this.vertex3.scrollUV(e,s),this},scaleUV:function(e,s){return this.vertex1.scaleUV(e,s),this.vertex2.scaleUV(e,s),this.vertex3.scaleUV(e,s),this},setColor:function(e){return this.vertex1.color=e,this.vertex2.color=e,this.vertex3.color=e,this},update:function(e,s,u,n,l,c,d,f){return this.vertex1.update(s,u,n,l,c,d,f,e),this.vertex2.update(s,u,n,l,c,d,f,e),this.vertex3.update(s,u,n,l,c,d,f,e),this},translate:function(e,s){s===void 0&&(s=0);var u=this.vertex1,n=this.vertex2,l=this.vertex3;return u.x+=e,u.y+=s,n.x+=e,n.y+=s,l.x+=e,l.y+=s,this},x:{get:function(){return this.getInCenter().x},set:function(e){var s=this.getInCenter();this.translate(e-s.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(e){var s=this.getInCenter();this.translate(0,e-s.y)}},alpha:{get:function(){var e=this.vertex1,s=this.vertex2,u=this.vertex3;return(e.alpha+s.alpha+u.alpha)/3},set:function(e){this.vertex1.alpha=e,this.vertex2.alpha=e,this.vertex3.alpha=e}},depth:{get:function(){var e=this.vertex1,s=this.vertex2,u=this.vertex3;return(e.vz+s.vz+u.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});v.exports=r}),48803:((v,T,t)=>{var h=t(83997),g=t(95540),o=t(37867),a=t(25836),r=t(39318),e=new a,s=new a,u=new o,n=function(l){var c=g(l,"mesh"),d=g(l,"texture",null),f=g(l,"frame"),m=g(l,"width",1),y=g(l,"height",m),S=g(l,"widthSegments",1),C=g(l,"heightSegments",S),E=g(l,"x",0),P=g(l,"y",0),A=g(l,"z",0),F=g(l,"rotateX",0),G=g(l,"rotateY",0),D=g(l,"rotateZ",0),L=g(l,"zIsUp",!0),b=g(l,"isOrtho",c?c.dirtyCache[11]:!1),I=g(l,"colors",[16777215]),N=g(l,"alphas",[1]),Z=g(l,"tile",!1),U=g(l,"flipY",!1),W=g(l,"width",null),X={faces:[],verts:[]};e.set(E,P,A),s.set(F,G,D),u.fromRotationXYTranslation(s,e,L);var V;if(!d&&c)d=c.texture,f||(V=c.frame);else if(c&&typeof d=="string")d=c.scene.sys.textures.get(d);else if(!d)return X;V||(V=d.get(f)),!W&&b&&d&&c&&(m=V.width/c.height,y=V.height/c.height);var O=m/2,z=y/2,B=Math.floor(S),Y=Math.floor(C),k=B+1,J=Y+1,j=m/B,tt=y/Y,ut=[],ht=[],st,dt,lt=0,ft=1,Lt=0,Nt=1;V&&(lt=V.u0,ft=V.u1,U?(Lt=V.v1,Nt=V.v0):(Lt=V.v0,Nt=V.v1));var Vt=ft-lt,pt=Nt-Lt;for(dt=0;dt<J;dt++){var Pt=dt*tt-z;for(st=0;st<k;st++){var Dt=st*j-O;ht.push(Dt,-Pt);var Gt=lt+Vt*(st/B),Ut=Lt+pt*(dt/Y);ut.push(Gt,Ut)}}Array.isArray(I)||(I=[I]),Array.isArray(N)||(N=[N]);var Ot=0,Wt=0;for(dt=0;dt<Y;dt++)for(st=0;st<B;st++){var Zt=(st+k*dt)*2,ve=(st+k*(dt+1))*2,Te=(st+1+k*(dt+1))*2,_t=(st+1+k*dt)*2,ce=I[Wt],wt=N[Ot],Ht=new r(ht[Zt],ht[Zt+1],0,ut[Zt],ut[Zt+1],ce,wt).transformMat4(u),he=new r(ht[ve],ht[ve+1],0,ut[ve],ut[ve+1],ce,wt).transformMat4(u),me=new r(ht[_t],ht[_t+1],0,ut[_t],ut[_t+1],ce,wt).transformMat4(u),te=new r(ht[ve],ht[ve+1],0,ut[ve],ut[ve+1],ce,wt).transformMat4(u),Me=new r(ht[Te],ht[Te+1],0,ut[Te],ut[Te+1],ce,wt).transformMat4(u),be=new r(ht[_t],ht[_t+1],0,ut[_t],ut[_t+1],ce,wt).transformMat4(u);Z&&(Ht.setUVs(lt,Nt),he.setUVs(lt,Lt),me.setUVs(ft,Nt),te.setUVs(lt,Lt),Me.setUVs(ft,Lt),be.setUVs(ft,Nt)),Wt++,Wt===I.length&&(Wt=0),Ot++,Ot===N.length&&(Ot=0),X.verts.push(Ht,he,me,te,Me,be),X.faces.push(new h(Ht,he,me),new h(te,Me,be))}return c&&(c.faces=c.faces.concat(X.faces),c.vertices=c.vertices.concat(X.verts)),X};v.exports=n}),34684:((v,T,t)=>{var h=t(83997),g=t(37867),o=t(25836),a=t(39318),r=new o,e=new o,s=new g,u=function(n,l,c,d,f,m,y,S,C,E){c===void 0&&(c=1),d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=0),E===void 0&&(E=!0);var P={faces:[],verts:[]},A=n.materials;r.set(d,f,m),e.set(y,S,C),s.fromRotationXYTranslation(e,r,E);for(var F=0;F<n.models.length;F++)for(var G=n.models[F],D=G.vertices,L=G.textureCoords,b=G.faces,I=0;I<b.length;I++){var N=b[I],Z=N.vertices[0],U=N.vertices[1],W=N.vertices[2],X=D[Z.vertexIndex],V=D[U.vertexIndex],O=D[W.vertexIndex],z=Z.textureCoordsIndex,B=U.textureCoordsIndex,Y=W.textureCoordsIndex,k=z===-1?{u:0,v:1}:L[z],J=B===-1?{u:0,v:0}:L[B],j=Y===-1?{u:1,v:1}:L[Y],tt=16777215;N.material!==""&&A[N.material]&&(tt=A[N.material]);var ut=new a(X.x*c,X.y*c,X.z*c,k.u,k.v,tt).transformMat4(s),ht=new a(V.x*c,V.y*c,V.z*c,J.u,J.v,tt).transformMat4(s),st=new a(O.x*c,O.y*c,O.z*c,j.u,j.v,tt).transformMat4(s);P.verts.push(ut,ht,st),P.faces.push(new h(ut,ht,st))}return l&&(l.faces=l.faces.concat(P.faces),l.vertices=l.vertices.concat(P.verts)),P};v.exports=u}),92515:((v,T,t)=>{var h=t(83997),g=t(39318),o=function(a,r,e,s,u,n,l,c){if(s===void 0&&(s=!1),n===void 0&&(n=16777215),l===void 0&&(l=1),c===void 0&&(c=!1),a.length!==r.length&&!s){console.warn("GenerateVerts: vertices and uvs count not equal");return}var d={faces:[],vertices:[]},f,m,y,S,C,E,P,A,F,G,D,L=s?3:2,b=Array.isArray(n),I=Array.isArray(l);if(Array.isArray(e)&&e.length>0)for(f=0;f<e.length;f++){var N=e[f],Z=e[f]*2,U=e[f]*L;m=a[U],y=a[U+1],S=s?a[U+2]:0,C=r[Z],E=r[Z+1],c&&(E=1-E),P=b?n[N]:n,A=I?l[N]:l,F=0,G=0,D=0,u&&(F=u[U],G=u[U+1],D=s?u[U+2]:0),d.vertices.push(new g(m,y,S,C,E,P,A,F,G,D))}else{var W=0,X=0;for(f=0;f<a.length;f+=L)m=a[f],y=a[f+1],S=s?a[f+2]:0,C=r[W],E=r[W+1],P=b?n[X]:n,A=I?l[X]:l,F=0,G=0,D=0,u&&(F=u[f],G=u[f+1],D=s?u[f+2]:0),d.vertices.push(new g(m,y,S,C,E,P,A,F,G,D)),W+=2,X++}for(f=0;f<d.vertices.length;f+=3){var V=d.vertices[f],O=d.vertices[f+1],z=d.vertices[f+2];d.faces.push(new h(V,O,z))}return d};v.exports=o}),85048:(v=>{var T=!0,t="untitled",h="",g="";function o(m){var y=m.indexOf("#");return y>-1?m.substring(0,y):m}function a(m){return m.models.length===0&&m.models.push({faces:[],name:t,textureCoords:[],vertexNormals:[],vertices:[]}),h="",m.models[m.models.length-1]}function r(m,y){var S=m.length>=2?m[1]:t;y.models.push({faces:[],name:S,textureCoords:[],vertexNormals:[],vertices:[]}),h=""}function e(m){m.length===2&&(h=m[1])}function s(m,y){var S=m.length,C=S>=2?parseFloat(m[1]):0,E=S>=3?parseFloat(m[2]):0,P=S>=4?parseFloat(m[3]):0;a(y).vertices.push({x:C,y:E,z:P})}function u(m,y){var S=m.length,C=S>=2?parseFloat(m[1]):0,E=S>=3?parseFloat(m[2]):0,P=S>=4?parseFloat(m[3]):0;isNaN(C)&&(C=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0),T&&(E=1-E),a(y).textureCoords.push({u:C,v:E,w:P})}function n(m,y){var S=m.length,C=S>=2?parseFloat(m[1]):0,E=S>=3?parseFloat(m[2]):0,P=S>=4?parseFloat(m[3]):0;a(y).vertexNormals.push({x:C,y:E,z:P})}function l(m,y){var S=m.length-1;if(!(S<3)){for(var C={group:h,material:g,vertices:[]},E=0;E<S;E++){var P=m[E+1],A=P.split("/"),F=A.length;if(!(F<1||F>3)){var G=0,D=0,L=0;G=parseInt(A[0],10),F>1&&A[1]!==""&&(D=parseInt(A[1],10)),F>2&&(L=parseInt(A[2],10)),G!==0&&(G<0&&(G=a(y).vertices.length+1+G),D-=1,G-=1,L-=1,C.vertices.push({textureCoordsIndex:D,vertexIndex:G,vertexNormalIndex:L}))}}a(y).faces.push(C)}}function c(m,y){m.length>=2&&y.materialLibraries.push(m[1])}function d(m){m.length>=2&&(g=m[1])}var f=function(m,y){y===void 0&&(y=!0),T=y;var S={materials:{},materialLibraries:[],models:[]};h="",g="";for(var C=m.split(`
`),E=0;E<C.length;E++){var P=o(C[E]),A=P.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":r(A,S);break;case"g":e(A);break;case"v":s(A,S);break;case"vt":u(A,S);break;case"vn":n(A,S);break;case"f":l(A,S);break;case"mtllib":c(A,S);break;case"usemtl":d(A);break}}return S};v.exports=f}),61485:((v,T,t)=>{var h=t(37589),g=function(o){for(var a={},r=o.split(`
`),e="",s=0;s<r.length;s++){var u=r[s].trim();if(!(u.indexOf("#")===0||u==="")){var n=u.replace(/\s\s+/g," ").trim().split(" ");switch(n[0].toLowerCase()){case"newmtl":{e=n[1];break}case"kd":{var l=Math.floor(n[1]*255),c=n.length>=2?Math.floor(n[2]*255):l,d=n.length>=3?Math.floor(n[3]*255):l;a[e]=h(l,c,d);break}}}}return a};v.exports=g}),92570:(v=>{var T=function(t,h,g,o){var a,r;if(g===void 0&&o===void 0){var e=t.getInCenter();a=e.x,r=e.y}var s=Math.cos(h),u=Math.sin(h),n=t.vertex1,l=t.vertex2,c=t.vertex3,d=n.x-a,f=n.y-r;n.set(d*s-f*u+a,d*u+f*s+r),d=l.x-a,f=l.y-r,l.set(d*s-f*u+a,d*u+f*s+r),d=c.x-a,f=c.y-r,c.set(d*s-f*u+a,d*u+f*s+r)};v.exports=T}),39318:((v,T,t)=>{var h=t(83419),g=t(70554),o=t(25836),a=new h({Extends:o,initialize:function(e,s,u,n,l,c,d,f,m,y){c===void 0&&(c=16777215),d===void 0&&(d=1),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0),o.call(this,e,s,u),this.vx=0,this.vy=0,this.vz=0,this.nx=f,this.ny=m,this.nz=y,this.u=n,this.v=l,this.color=c,this.alpha=d,this.tx=0,this.ty=0,this.ta=0,this.tu=n,this.tv=l},setUVs:function(r,e){return this.u=r,this.v=e,this.tu=r,this.tv=e,this},scrollUV:function(r,e){return this.tu+=r,this.tv+=e,this},scaleUV:function(r,e){return this.tu=this.u*r,this.tv=this.v*e,this},transformCoordinatesLocal:function(r,e,s,u){var n=this.x,l=this.y,c=this.z,d=r.val,f=n*d[0]+l*d[4]+c*d[8]+d[12],m=n*d[1]+l*d[5]+c*d[9]+d[13],y=n*d[2]+l*d[6]+c*d[10]+d[14],S=n*d[3]+l*d[7]+c*d[11]+d[15];this.vx=f/S*e,this.vy=-(m/S)*s,u<=0?this.vz=y/S:this.vz=-(y/S)},resize:function(r,e,s,u,n,l){return this.x=r,this.y=e,this.vx=this.x*s,this.vy=-this.y*u,this.vz=0,n<.5?this.vx+=s*(.5-n):n>.5&&(this.vx-=s*(n-.5)),l<.5?this.vy+=u*(.5-l):l>.5&&(this.vy-=u*(l-.5)),this},update:function(r,e,s,u,n,l,c,d){var f=this.vx*r+this.vy*s+n,m=this.vx*e+this.vy*u+l;return c&&(f=Math.round(f),m=Math.round(m)),this.tx=f,this.ty=m,this.ta=this.alpha*d,this},load:function(r,e,s,u,n){return r[++s]=this.tx,r[++s]=this.ty,r[++s]=this.tu,r[++s]=this.tv,r[++s]=u,r[++s]=n,e[++s]=g.getTintAppendFloatAlpha(this.color,this.ta),s}});v.exports=a}),73090:((v,T,t)=>{var h={Face:t(83997),GenerateGridVerts:t(48803),GenerateObjVerts:t(34684),GenerateVerts:t(92515),ParseObj:t(85048),ParseObjMaterial:t(61485),RotateFace:t(92570),Vertex:t(39318)};v.exports=h}),96550:(v=>{var T=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))};v.exports=T}),99706:((v,T,t)=>{var h=t(2141),g=function(o){return new h(o.x,o.y)};v.exports=g}),68010:(v=>{var T=function(t,h){return h.setTo(t.x,t.y)};v.exports=T}),27814:(v=>{var T=function(t,h){return t.x===h.x&&t.y===h.y};v.exports=T}),73565:(v=>{var T=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))};v.exports=T}),87555:((v,T,t)=>{var h=t(2141),g=function(o,a){if(a===void 0&&(a=new h),!Array.isArray(o))throw new Error("GetCentroid points argument must be an array");var r=o.length;if(r<1)throw new Error("GetCentroid points array must not be empty");if(r===1)a.x=o[0].x,a.y=o[0].y;else{for(var e=0;e<r;e++)a.x+=o[e].x,a.y+=o[e].y;a.x/=r,a.y/=r}return a};v.exports=g}),28793:(v=>{var T=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)};v.exports=T}),44405:(v=>{var T=function(t){return t.x*t.x+t.y*t.y};v.exports=T}),20873:((v,T,t)=>{var h=t(87841),g=function(o,a){a===void 0&&(a=new h);for(var r=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,n=0;n<o.length;n++){var l=o[n];l.x>r&&(r=l.x),l.x<e&&(e=l.x),l.y>s&&(s=l.y),l.y<u&&(u=l.y)}return a.x=e,a.y=u,a.width=r-e,a.height=s-u,a};v.exports=g}),26152:((v,T,t)=>{var h=t(2141),g=function(o,a,r,e){return r===void 0&&(r=0),e===void 0&&(e=new h),e.x=o.x+(a.x-o.x)*r,e.y=o.y+(a.y-o.y)*r,e};v.exports=g}),55767:(v=>{var T=function(t){return t.setTo(t.y,t.x)};v.exports=T}),79432:((v,T,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.setTo(-o.x,-o.y)};v.exports=g}),2141:((v,T,t)=>{var h=t(83419),g=t(23777),o=new h({initialize:function(r,e){r===void 0&&(r=0),e===void 0&&(e=r),this.type=g.POINT,this.x=r,this.y=e},setTo:function(a,r){return a===void 0&&(a=0),r===void 0&&(r=a),this.x=a,this.y=r,this}});v.exports=o}),72930:((v,T,t)=>{var h=t(2141),g=t(44405),o=function(a,r,e){e===void 0&&(e=new h);var s=a.x*r.x+a.y*r.y,u=s/g(r);return u!==0&&(e.x=u*r.x,e.y=u*r.y),e};v.exports=o}),62880:((v,T,t)=>{var h=t(2141),g=function(o,a,r){r===void 0&&(r=new h);var e=o.x*a.x+o.y*a.y;return e!==0&&(r.x=e*a.x,r.y=e*a.y),r};v.exports=g}),15093:((v,T,t)=>{var h=t(28793),g=function(o,a){if(o.x!==0||o.y!==0){var r=h(o);o.x/=r,o.y/=r}return o.x*=a,o.y*=a,o};v.exports=g}),43711:((v,T,t)=>{var h=t(2141);h.Ceil=t(96550),h.Clone=t(99706),h.CopyFrom=t(68010),h.Equals=t(27814),h.Floor=t(73565),h.GetCentroid=t(87555),h.GetMagnitude=t(28793),h.GetMagnitudeSq=t(44405),h.GetRectangleFromPoints=t(20873),h.Interpolate=t(26152),h.Invert=t(55767),h.Negative=t(79432),h.Project=t(72930),h.ProjectUnit=t(62880),h.SetMagnitude=t(15093),v.exports=h}),12306:((v,T,t)=>{var h=t(25717),g=function(o){return new h(o.points)};v.exports=g}),63814:(v=>{var T=function(t,h,g){for(var o=!1,a=-1,r=t.points.length-1;++a<t.points.length;r=a){var e=t.points[a].x,s=t.points[a].y,u=t.points[r].x,n=t.points[r].y;(s<=g&&g<n||n<=g&&g<s)&&h<(u-e)*(g-s)/(n-s)+e&&(o=!o)}return o};v.exports=T}),99338:((v,T,t)=>{var h=t(63814),g=function(o,a){return h(o,a.x,a.y)};v.exports=g}),94811:(v=>{function T(X,V,O){O=O||2;var z=V&&V.length,B=z?V[0]*O:X.length,Y=t(X,0,B,O,!0),k=[];if(!Y||Y.next===Y.prev)return k;var J,j,tt,ut,ht,st,dt;if(z&&(Y=s(X,V,Y,O)),X.length>80*O){J=tt=X[0],j=ut=X[1];for(var lt=O;lt<B;lt+=O)ht=X[lt],st=X[lt+1],ht<J&&(J=ht),st<j&&(j=st),ht>tt&&(tt=ht),st>ut&&(ut=st);dt=Math.max(tt-J,ut-j),dt=dt!==0?32767/dt:0}return g(Y,k,O,J,j,dt,0),k}function t(X,V,O,z,B){var Y,k;if(B===W(X,V,O,z)>0)for(Y=V;Y<O;Y+=z)k=N(Y,X[Y],X[Y+1],k);else for(Y=O-z;Y>=V;Y-=z)k=N(Y,X[Y],X[Y+1],k);return k&&P(k,k.next)&&(Z(k),k=k.next),k}function h(X,V){if(!X)return X;V||(V=X);var O=X,z;do if(z=!1,!O.steiner&&(P(O,O.next)||E(O.prev,O,O.next)===0)){if(Z(O),O=V=O.prev,O===O.next)break;z=!0}else O=O.next;while(z||O!==V);return V}function g(X,V,O,z,B,Y,k){if(X){!k&&Y&&d(X,z,B,Y);for(var J=X,j,tt;X.prev!==X.next;){if(j=X.prev,tt=X.next,Y?a(X,z,B,Y):o(X)){V.push(j.i/O|0),V.push(X.i/O|0),V.push(tt.i/O|0),Z(X),X=tt.next,J=tt.next;continue}if(X=tt,X===J){k?k===1?(X=r(h(X),V,O),g(X,V,O,z,B,Y,2)):k===2&&e(X,V,O,z,B,Y):g(h(X),V,O,z,B,Y,1);break}}}}function o(X){var V=X.prev,O=X,z=X.next;if(E(V,O,z)>=0)return!1;for(var B=V.x,Y=O.x,k=z.x,J=V.y,j=O.y,tt=z.y,ut=B<Y?B<k?B:k:Y<k?Y:k,ht=J<j?J<tt?J:tt:j<tt?j:tt,st=B>Y?B>k?B:k:Y>k?Y:k,dt=J>j?J>tt?J:tt:j>tt?j:tt,lt=z.next;lt!==V;){if(lt.x>=ut&&lt.x<=st&&lt.y>=ht&&lt.y<=dt&&S(B,J,Y,j,k,tt,lt.x,lt.y)&&E(lt.prev,lt,lt.next)>=0)return!1;lt=lt.next}return!0}function a(X,V,O,z){var B=X.prev,Y=X,k=X.next;if(E(B,Y,k)>=0)return!1;for(var J=B.x,j=Y.x,tt=k.x,ut=B.y,ht=Y.y,st=k.y,dt=J<j?J<tt?J:tt:j<tt?j:tt,lt=ut<ht?ut<st?ut:st:ht<st?ht:st,ft=J>j?J>tt?J:tt:j>tt?j:tt,Lt=ut>ht?ut>st?ut:st:ht>st?ht:st,Nt=m(dt,lt,V,O,z),Vt=m(ft,Lt,V,O,z),pt=X.prevZ,Pt=X.nextZ;pt&&pt.z>=Nt&&Pt&&Pt.z<=Vt;){if(pt.x>=dt&&pt.x<=ft&&pt.y>=lt&&pt.y<=Lt&&pt!==B&&pt!==k&&S(J,ut,j,ht,tt,st,pt.x,pt.y)&&E(pt.prev,pt,pt.next)>=0||(pt=pt.prevZ,Pt.x>=dt&&Pt.x<=ft&&Pt.y>=lt&&Pt.y<=Lt&&Pt!==B&&Pt!==k&&S(J,ut,j,ht,tt,st,Pt.x,Pt.y)&&E(Pt.prev,Pt,Pt.next)>=0))return!1;Pt=Pt.nextZ}for(;pt&&pt.z>=Nt;){if(pt.x>=dt&&pt.x<=ft&&pt.y>=lt&&pt.y<=Lt&&pt!==B&&pt!==k&&S(J,ut,j,ht,tt,st,pt.x,pt.y)&&E(pt.prev,pt,pt.next)>=0)return!1;pt=pt.prevZ}for(;Pt&&Pt.z<=Vt;){if(Pt.x>=dt&&Pt.x<=ft&&Pt.y>=lt&&Pt.y<=Lt&&Pt!==B&&Pt!==k&&S(J,ut,j,ht,tt,st,Pt.x,Pt.y)&&E(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.nextZ}return!0}function r(X,V,O){var z=X;do{var B=z.prev,Y=z.next.next;!P(B,Y)&&A(B,z,z.next,Y)&&L(B,Y)&&L(Y,B)&&(V.push(B.i/O|0),V.push(z.i/O|0),V.push(Y.i/O|0),Z(z),Z(z.next),z=X=Y),z=z.next}while(z!==X);return h(z)}function e(X,V,O,z,B,Y){var k=X;do{for(var J=k.next.next;J!==k.prev;){if(k.i!==J.i&&C(k,J)){var j=I(k,J);k=h(k,k.next),j=h(j,j.next),g(k,V,O,z,B,Y,0),g(j,V,O,z,B,Y,0);return}J=J.next}k=k.next}while(k!==X)}function s(X,V,O,z){var B=[],Y,k,J,j,tt;for(Y=0,k=V.length;Y<k;Y++)J=V[Y]*z,j=Y<k-1?V[Y+1]*z:X.length,tt=t(X,J,j,z,!1),tt===tt.next&&(tt.steiner=!0),B.push(y(tt));for(B.sort(u),Y=0;Y<B.length;Y++)O=n(B[Y],O);return O}function u(X,V){return X.x-V.x}function n(X,V){var O=l(X,V);if(!O)return V;var z=I(O,X);return h(z,z.next),h(O,O.next)}function l(X,V){var O=V,z=X.x,B=X.y,Y=-1/0,k;do{if(B<=O.y&&B>=O.next.y&&O.next.y!==O.y){var J=O.x+(B-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(J<=z&&J>Y&&(Y=J,k=O.x<O.next.x?O:O.next,J===z))return k}O=O.next}while(O!==V);if(!k)return null;var j=k,tt=k.x,ut=k.y,ht=1/0,st;O=k;do z>=O.x&&O.x>=tt&&z!==O.x&&S(B<ut?z:Y,B,tt,ut,B<ut?Y:z,B,O.x,O.y)&&(st=Math.abs(B-O.y)/(z-O.x),L(O,X)&&(st<ht||st===ht&&(O.x>k.x||O.x===k.x&&c(k,O)))&&(k=O,ht=st)),O=O.next;while(O!==j);return k}function c(X,V){return E(X.prev,X,V.prev)<0&&E(V.next,X,X.next)<0}function d(X,V,O,z){var B=X;do B.z===0&&(B.z=m(B.x,B.y,V,O,z)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==X);B.prevZ.nextZ=null,B.prevZ=null,f(B)}function f(X){var V,O,z,B,Y,k,J,j,tt=1;do{for(O=X,X=null,Y=null,k=0;O;){for(k++,z=O,J=0,V=0;V<tt&&(J++,z=z.nextZ,!!z);V++);for(j=tt;J>0||j>0&&z;)J!==0&&(j===0||!z||O.z<=z.z)?(B=O,O=O.nextZ,J--):(B=z,z=z.nextZ,j--),Y?Y.nextZ=B:X=B,B.prevZ=Y,Y=B;O=z}Y.nextZ=null,tt*=2}while(k>1);return X}function m(X,V,O,z,B){return X=(X-O)*B|0,V=(V-z)*B|0,X=(X|X<<8)&16711935,X=(X|X<<4)&252645135,X=(X|X<<2)&858993459,X=(X|X<<1)&1431655765,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,X|V<<1}function y(X){var V=X,O=X;do(V.x<O.x||V.x===O.x&&V.y<O.y)&&(O=V),V=V.next;while(V!==X);return O}function S(X,V,O,z,B,Y,k,J){return(B-k)*(V-J)>=(X-k)*(Y-J)&&(X-k)*(z-J)>=(O-k)*(V-J)&&(O-k)*(Y-J)>=(B-k)*(z-J)}function C(X,V){return X.next.i!==V.i&&X.prev.i!==V.i&&!D(X,V)&&(L(X,V)&&L(V,X)&&b(X,V)&&(E(X.prev,X,V.prev)||E(X,V.prev,V))||P(X,V)&&E(X.prev,X,X.next)>0&&E(V.prev,V,V.next)>0)}function E(X,V,O){return(V.y-X.y)*(O.x-V.x)-(V.x-X.x)*(O.y-V.y)}function P(X,V){return X.x===V.x&&X.y===V.y}function A(X,V,O,z){var B=G(E(X,V,O)),Y=G(E(X,V,z)),k=G(E(O,z,X)),J=G(E(O,z,V));return!!(B!==Y&&k!==J||B===0&&F(X,O,V)||Y===0&&F(X,z,V)||k===0&&F(O,X,z)||J===0&&F(O,V,z))}function F(X,V,O){return V.x<=Math.max(X.x,O.x)&&V.x>=Math.min(X.x,O.x)&&V.y<=Math.max(X.y,O.y)&&V.y>=Math.min(X.y,O.y)}function G(X){return X>0?1:X<0?-1:0}function D(X,V){var O=X;do{if(O.i!==X.i&&O.next.i!==X.i&&O.i!==V.i&&O.next.i!==V.i&&A(O,O.next,X,V))return!0;O=O.next}while(O!==X);return!1}function L(X,V){return E(X.prev,X,X.next)<0?E(X,V,X.next)>=0&&E(X,X.prev,V)>=0:E(X,V,X.prev)<0||E(X,X.next,V)<0}function b(X,V){var O=X,z=!1,B=(X.x+V.x)/2,Y=(X.y+V.y)/2;do O.y>Y!=O.next.y>Y&&O.next.y!==O.y&&B<(O.next.x-O.x)*(Y-O.y)/(O.next.y-O.y)+O.x&&(z=!z),O=O.next;while(O!==X);return z}function I(X,V){var O=new U(X.i,X.x,X.y),z=new U(V.i,V.x,V.y),B=X.next,Y=V.prev;return X.next=V,V.prev=X,O.next=B,B.prev=O,z.next=O,O.prev=z,Y.next=z,z.prev=Y,z}function N(X,V,O,z){var B=new U(X,V,O);return z?(B.next=z.next,B.prev=z,z.next.prev=B,z.next=B):(B.prev=B,B.next=B),B}function Z(X){X.next.prev=X.prev,X.prev.next=X.next,X.prevZ&&(X.prevZ.nextZ=X.nextZ),X.nextZ&&(X.nextZ.prevZ=X.prevZ)}function U(X,V,O){this.i=X,this.x=V,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(X,V,O,z){var B=V&&V.length,Y=B?V[0]*O:X.length,k=Math.abs(W(X,0,Y,O));if(B)for(var J=0,j=V.length;J<j;J++){var tt=V[J]*O,ut=J<j-1?V[J+1]*O:X.length;k-=Math.abs(W(X,tt,ut,O))}var ht=0;for(J=0;J<z.length;J+=3){var st=z[J]*O,dt=z[J+1]*O,lt=z[J+2]*O;ht+=Math.abs((X[st]-X[lt])*(X[dt+1]-X[st+1])-(X[st]-X[dt])*(X[lt+1]-X[st+1]))}return k===0&&ht===0?0:Math.abs((ht-k)/k)};function W(X,V,O,z){for(var B=0,Y=V,k=O-z;Y<O;Y+=z)B+=(X[k]-X[Y])*(X[Y+1]+X[k+1]),k=Y;return B}T.flatten=function(X){for(var V=X[0][0].length,O={vertices:[],holes:[],dimensions:V},z=0,B=0;B<X.length;B++){for(var Y=0;Y<X[B].length;Y++)for(var k=0;k<V;k++)O.vertices.push(X[B][Y][k]);B>0&&(z+=X[B-1].length,O.holes.push(z))}return O},v.exports=T}),13829:((v,T,t)=>{var h=t(87841),g=function(o,a){a===void 0&&(a=new h);for(var r=1/0,e=1/0,s=-r,u=-e,n,l=0;l<o.points.length;l++)n=o.points[l],r=Math.min(r,n.x),e=Math.min(e,n.y),s=Math.max(s,n.x),u=Math.max(u,n.y);return a.x=r,a.y=e,a.width=s-r,a.height=u-e,a};v.exports=g}),26173:(v=>{var T=function(t,h){h===void 0&&(h=[]);for(var g=0;g<t.points.length;g++)h.push(t.points[g].x),h.push(t.points[g].y);return h};v.exports=T}),9564:((v,T,t)=>{var h=t(35001),g=t(23031),o=t(30052),a=function(r,e,s,u){u===void 0&&(u=[]);var n=r.points,l=o(r);!e&&s>0&&(e=l/s);for(var c=0;c<e;c++)for(var d=l*(c/e),f=0,m=0;m<n.length;m++){var y=n[m],S=n[(m+1)%n.length],C=new g(y.x,y.y,S.x,S.y),E=h(C);if(d<f||d>f+E){f+=E;continue}var P=C.getPoint((d-f)/E);u.push(P);break}return u};v.exports=a}),30052:((v,T,t)=>{var h=t(35001),g=t(23031),o=function(a){for(var r=a.points,e=0,s=0;s<r.length;s++){var u=r[s],n=r[(s+1)%r.length],l=new g(u.x,u.y,n.x,n.y);e+=h(l)}return e};v.exports=o}),25717:((v,T,t)=>{var h=t(83419),g=t(63814),o=t(9564),a=t(23777),r=new h({initialize:function(s){this.type=a.POLYGON,this.area=0,this.points=[],s&&this.setTo(s)},contains:function(e,s){return g(this,e,s)},setTo:function(e){if(this.area=0,this.points=[],typeof e=="string"&&(e=e.split(" ")),!Array.isArray(e))return this;for(var s,u=0;u<e.length;u++)s={x:0,y:0},typeof e[u]=="number"||typeof e[u]=="string"?(s.x=parseFloat(e[u]),s.y=parseFloat(e[u+1]),u++):Array.isArray(e[u])?(s.x=e[u][0],s.y=e[u][1]):(s.x=e[u].x,s.y=e[u].y),this.points.push(s);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var e=0,s,u,n=0;n<this.points.length-1;n++)s=this.points[n],u=this.points[n+1],e+=(u.x-s.x)*(s.y+u.y);return s=this.points[0],u=this.points[this.points.length-1],e+=(s.x-u.x)*(u.y+s.y),this.area=-e*.5,this.area},getPoints:function(e,s,u){return o(this,e,s,u)}});v.exports=r}),8133:(v=>{var T=function(t){return t.points.reverse(),t};v.exports=T}),29524:(v=>{function T(r,e){var s=r.x-e.x,u=r.y-e.y;return s*s+u*u}function t(r,e,s){var u=e.x,n=e.y,l=s.x-u,c=s.y-n;if(l!==0||c!==0){var d=((r.x-u)*l+(r.y-n)*c)/(l*l+c*c);d>1?(u=s.x,n=s.y):d>0&&(u+=l*d,n+=c*d)}return l=r.x-u,c=r.y-n,l*l+c*c}function h(r,e){for(var s=r[0],u=[s],n,l=1,c=r.length;l<c;l++)n=r[l],T(n,s)>e&&(u.push(n),s=n);return s!==n&&u.push(n),u}function g(r,e,s,u,n){for(var l=u,c,d=e+1;d<s;d++){var f=t(r[d],r[e],r[s]);f>l&&(c=d,l=f)}l>u&&(c-e>1&&g(r,e,c,u,n),n.push(r[c]),s-c>1&&g(r,c,s,u,n))}function o(r,e){var s=r.length-1,u=[r[0]];return g(r,0,s,e,u),u.push(r[s]),u}var a=function(r,e,s){e===void 0&&(e=1),s===void 0&&(s=!1);var u=r.points;if(u.length>2){var n=e*e;s||(u=h(u,n)),r.setTo(o(u,n))}return r};v.exports=a}),5469:(v=>{var T=function(h,g){return h[0]=g[0],h[1]=g[1],h},t=function(h){var g,o=[],a=h.points;for(g=0;g<a.length;g++)o.push([a[g].x,a[g].y]);var r=[];for(o.length>0&&r.push(T([0,0],o[0])),g=0;g<o.length-1;g++){var e=o[g],s=o[g+1],u=e[0],n=e[1],l=s[0],c=s[1];r.push([.85*u+.15*l,.85*n+.15*c]),r.push([.15*u+.85*l,.15*n+.85*c])}return o.length>1&&r.push(T([0,0],o[o.length-1])),h.setTo(r)};v.exports=t}),24709:(v=>{var T=function(t,h,g){for(var o=t.points,a=0;a<o.length;a++)o[a].x+=h,o[a].y+=g;return t};v.exports=T}),58423:((v,T,t)=>{var h=t(25717);h.Clone=t(12306),h.Contains=t(63814),h.ContainsPoint=t(99338),h.Earcut=t(94811),h.GetAABB=t(13829),h.GetNumberArray=t(26173),h.GetPoints=t(9564),h.Perimeter=t(30052),h.Reverse=t(8133),h.Simplify=t(29524),h.Smooth=t(5469),h.Translate=t(24709),v.exports=h}),62224:(v=>{var T=function(t){return t.width*t.height};v.exports=T}),98615:(v=>{var T=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t};v.exports=T}),31688:(v=>{var T=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};v.exports=T}),67502:(v=>{var T=function(t,h,g){return t.x=h-t.width/2,t.y=g-t.height/2,t};v.exports=T}),65085:((v,T,t)=>{var h=t(87841),g=function(o){return new h(o.x,o.y,o.width,o.height)};v.exports=g}),37303:(v=>{var T=function(t,h,g){return t.width<=0||t.height<=0?!1:t.x<=h&&t.x+t.width>=h&&t.y<=g&&t.y+t.height>=g};v.exports=T}),96553:((v,T,t)=>{var h=t(37303),g=function(o,a){return h(o,a.x,a.y)};v.exports=g}),70273:(v=>{var T=function(t,h){return h.width*h.height>t.width*t.height?!1:h.x>t.x&&h.x<t.right&&h.right>t.x&&h.right<t.right&&h.y>t.y&&h.y<t.bottom&&h.bottom>t.y&&h.bottom<t.bottom};v.exports=T}),43459:(v=>{var T=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)};v.exports=T}),77493:(v=>{var T=function(t,h){return h===void 0&&(h=[]),h.push({x:t.x,y:t.y}),h.push({x:t.right,y:t.y}),h.push({x:t.right,y:t.bottom}),h.push({x:t.x,y:t.bottom}),h};v.exports=T}),9219:(v=>{var T=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height};v.exports=T}),53751:((v,T,t)=>{var h=t(8249),g=function(o,a){var r=h(o);return r<h(a)?o.setSize(a.height*r,a.height):o.setSize(a.width,a.width/r),o.setPosition(a.centerX-o.width/2,a.centerY-o.height/2)};v.exports=g}),16088:((v,T,t)=>{var h=t(8249),g=function(o,a){var r=h(o);return r>h(a)?o.setSize(a.height*r,a.height):o.setSize(a.width,a.width/r),o.setPosition(a.centerX-o.width/2,a.centerY-o.height/2)};v.exports=g}),80774:(v=>{var T=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t};v.exports=T}),83859:(v=>{var T=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t};v.exports=T}),19217:((v,T,t)=>{var h=t(87841),g=t(36383),o=function(a,r){if(r===void 0&&(r=new h),a.length===0)return r;for(var e=Number.MAX_VALUE,s=Number.MAX_VALUE,u=g.MIN_SAFE_INTEGER,n=g.MIN_SAFE_INTEGER,l,c,d,f=0;f<a.length;f++)l=a[f],Array.isArray(l)?(c=l[0],d=l[1]):(c=l.x,d=l.y),e=Math.min(e,c),s=Math.min(s,d),u=Math.max(u,c),n=Math.max(n,d);return r.x=e,r.y=s,r.width=u-e,r.height=n-s,r};v.exports=o}),9477:((v,T,t)=>{var h=t(87841),g=function(o,a,r,e,s){return s===void 0&&(s=new h),s.setTo(Math.min(o,r),Math.min(a,e),Math.abs(o-r),Math.abs(a-e))};v.exports=g}),8249:(v=>{var T=function(t){return t.height===0?NaN:t.width/t.height};v.exports=T}),27165:((v,T,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=o.centerX,a.y=o.centerY,a};v.exports=g}),20812:((v,T,t)=>{var h=t(13019),g=t(2141),o=function(a,r,e){if(e===void 0&&(e=new g),r<=0||r>=1)return e.x=a.x,e.y=a.y,e;var s=h(a)*r;return r>.5?(s-=a.width+a.height,s<=a.width?(e.x=a.right-s,e.y=a.bottom):(e.x=a.x,e.y=a.bottom-(s-a.width))):s<=a.width?(e.x=a.x+s,e.y=a.y):(e.x=a.right,e.y=a.y+(s-a.width)),e};v.exports=o}),34819:((v,T,t)=>{var h=t(20812),g=t(13019),o=function(a,r,e,s){s===void 0&&(s=[]),!r&&e>0&&(r=g(a)/e);for(var u=0;u<r;u++){var n=u/r;s.push(h(a,n))}return s};v.exports=o}),51313:((v,T,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=o.width,a.y=o.height,a};v.exports=g}),86091:((v,T,t)=>{var h=t(67502),g=function(o,a,r){var e=o.centerX,s=o.centerY;return o.setSize(o.width+a*2,o.height+r*2),h(o,e,s)};v.exports=g}),53951:((v,T,t)=>{var h=t(87841),g=t(59996),o=function(a,r,e){return e===void 0&&(e=new h),g(a,r)?(e.x=Math.max(a.x,r.x),e.y=Math.max(a.y,r.y),e.width=Math.min(a.right,r.right)-e.x,e.height=Math.min(a.bottom,r.bottom)-e.y):e.setEmpty(),e};v.exports=o}),14649:((v,T,t)=>{var h=t(13019),g=t(2141),o=function(a,r,e,s){if(s===void 0&&(s=[]),!r&&!e)return s;r?e=Math.round(h(a)/r):r=h(a)/e;for(var u=a.x,n=a.y,l=0,c=0;c<e;c++)switch(s.push(new g(u,n)),l){case 0:u+=r,u>=a.right&&(l=1,n+=u-a.right,u=a.right);break;case 1:n+=r,n>=a.bottom&&(l=2,u-=n-a.bottom,n=a.bottom);break;case 2:u-=r,u<=a.left&&(l=3,n-=a.left-u,u=a.left);break;case 3:n-=r,n<=a.top&&(l=0,n=a.top);break}return s};v.exports=o}),33595:(v=>{var T=function(t,h){for(var g=t.x,o=t.right,a=t.y,r=t.bottom,e=0;e<h.length;e++)g=Math.min(g,h[e].x),o=Math.max(o,h[e].x),a=Math.min(a,h[e].y),r=Math.max(r,h[e].y);return t.x=g,t.y=a,t.width=o-g,t.height=r-a,t};v.exports=T}),20074:(v=>{var T=function(t,h){var g=Math.min(t.x,h.x),o=Math.max(t.right,h.right);t.x=g,t.width=o-g;var a=Math.min(t.y,h.y),r=Math.max(t.bottom,h.bottom);return t.y=a,t.height=r-a,t};v.exports=T}),92171:(v=>{var T=function(t,h,g){var o=Math.min(t.x,h),a=Math.max(t.right,h);t.x=o,t.width=a-o;var r=Math.min(t.y,g),e=Math.max(t.bottom,g);return t.y=r,t.height=e-r,t};v.exports=T}),42981:(v=>{var T=function(t,h,g){return t.x+=h,t.y+=g,t};v.exports=T}),46907:(v=>{var T=function(t,h){return t.x+=h.x,t.y+=h.y,t};v.exports=T}),60170:(v=>{var T=function(t,h){return t.x<h.right&&t.right>h.x&&t.y<h.bottom&&t.bottom>h.y};v.exports=T}),13019:(v=>{var T=function(t){return 2*(t.width+t.height)};v.exports=T}),85133:((v,T,t)=>{var h=t(2141),g=t(39506),o=function(a,r,e){e===void 0&&(e=new h),r=g(r);var s=Math.sin(r),u=Math.cos(r),n=u>0?a.width/2:a.width/-2,l=s>0?a.height/2:a.height/-2;return Math.abs(n*s)<Math.abs(l*u)?l=n*s/u:n=l*u/s,e.x=n+a.centerX,e.y=l+a.centerY,e};v.exports=o}),26597:((v,T,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=o.x+Math.random()*o.width,a.y=o.y+Math.random()*o.height,a};v.exports=g}),86470:((v,T,t)=>{var h=t(30976),g=t(70273),o=t(2141),a=function(r,e,s){if(s===void 0&&(s=new o),g(r,e))switch(h(0,3)){case 0:s.x=r.x+Math.random()*(e.right-r.x),s.y=r.y+Math.random()*(e.top-r.y);break;case 1:s.x=e.x+Math.random()*(r.right-e.x),s.y=e.bottom+Math.random()*(r.bottom-e.bottom);break;case 2:s.x=r.x+Math.random()*(e.x-r.x),s.y=e.y+Math.random()*(r.bottom-e.y);break;case 3:s.x=e.right+Math.random()*(r.right-e.right),s.y=r.y+Math.random()*(e.bottom-r.y);break}return s};v.exports=a}),87841:((v,T,t)=>{var h=t(83419),g=t(37303),o=t(20812),a=t(34819),r=t(23777),e=t(23031),s=t(26597),u=new h({initialize:function(l,c,d,f){l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),this.type=r.RECTANGLE,this.x=l,this.y=c,this.width=d,this.height=f},contains:function(n,l){return g(this,n,l)},getPoint:function(n,l){return o(this,n,l)},getPoints:function(n,l,c){return a(this,n,l,c)},getRandomPoint:function(n){return s(this,n)},setTo:function(n,l,c,d){return this.x=n,this.y=l,this.width=c,this.height=d,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(n,l){return l===void 0&&(l=n),this.x=n,this.y=l,this},setSize:function(n,l){return l===void 0&&(l=n),this.width=n,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(n){return n===void 0&&(n=new e),n.setTo(this.x,this.y,this.right,this.y),n},getLineB:function(n){return n===void 0&&(n=new e),n.setTo(this.right,this.y,this.right,this.bottom),n},getLineC:function(n){return n===void 0&&(n=new e),n.setTo(this.right,this.bottom,this.x,this.bottom),n},getLineD:function(n){return n===void 0&&(n=new e),n.setTo(this.x,this.bottom,this.x,this.y),n},left:{get:function(){return this.x},set:function(n){n>=this.right?this.width=0:this.width=this.right-n,this.x=n}},right:{get:function(){return this.x+this.width},set:function(n){n<=this.x?this.width=0:this.width=n-this.x}},top:{get:function(){return this.y},set:function(n){n>=this.bottom?this.height=0:this.height=this.bottom-n,this.y=n}},bottom:{get:function(){return this.y+this.height},set:function(n){n<=this.y?this.height=0:this.height=n-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(n){this.x=n-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(n){this.y=n-this.height/2}}});v.exports=u}),94845:(v=>{var T=function(t,h){return t.width===h.width&&t.height===h.height};v.exports=T}),31730:(v=>{var T=function(t,h,g){return g===void 0&&(g=h),t.width*=h,t.height*=g,t};v.exports=T}),36899:((v,T,t)=>{var h=t(87841),g=function(o,a,r){r===void 0&&(r=new h);var e=Math.min(o.x,a.x),s=Math.min(o.y,a.y),u=Math.max(o.right,a.right)-e,n=Math.max(o.bottom,a.bottom)-s;return r.setTo(e,s,u,n)};v.exports=g}),93232:((v,T,t)=>{var h=t(87841);h.Area=t(62224),h.Ceil=t(98615),h.CeilAll=t(31688),h.CenterOn=t(67502),h.Clone=t(65085),h.Contains=t(37303),h.ContainsPoint=t(96553),h.ContainsRect=t(70273),h.CopyFrom=t(43459),h.Decompose=t(77493),h.Equals=t(9219),h.FitInside=t(53751),h.FitOutside=t(16088),h.Floor=t(80774),h.FloorAll=t(83859),h.FromPoints=t(19217),h.FromXY=t(9477),h.GetAspectRatio=t(8249),h.GetCenter=t(27165),h.GetPoint=t(20812),h.GetPoints=t(34819),h.GetSize=t(51313),h.Inflate=t(86091),h.Intersection=t(53951),h.MarchingAnts=t(14649),h.MergePoints=t(33595),h.MergeRect=t(20074),h.MergeXY=t(92171),h.Offset=t(42981),h.OffsetPoint=t(46907),h.Overlaps=t(60170),h.Perimeter=t(13019),h.PerimeterPoint=t(85133),h.Random=t(26597),h.RandomOutside=t(86470),h.SameDimensions=t(94845),h.Scale=t(31730),h.Union=t(36899),v.exports=h}),41658:(v=>{var T=function(t){var h=t.x1,g=t.y1,o=t.x2,a=t.y2,r=t.x3,e=t.y3;return Math.abs(((r-h)*(a-g)-(o-h)*(e-g))/2)};v.exports=T}),39208:((v,T,t)=>{var h=t(16483),g=function(o,a,r){var e=r*(Math.sqrt(3)/2),s=o,u=a,n=o+r/2,l=a+e,c=o-r/2,d=a+e;return new h(s,u,n,l,c,d)};v.exports=g}),39545:((v,T,t)=>{var h=t(94811),g=t(16483),o=function(a,r,e,s,u){r===void 0&&(r=null),e===void 0&&(e=1),s===void 0&&(s=1),u===void 0&&(u=[]);for(var n=h(a,r),l,c,d,f,m,y,S,C,E,P=0;P<n.length;P+=3)l=n[P],c=n[P+1],d=n[P+2],f=a[l*2]*e,m=a[l*2+1]*s,y=a[c*2]*e,S=a[c*2+1]*s,C=a[d*2]*e,E=a[d*2+1]*s,u.push(new g(f,m,y,S,C,E));return u};v.exports=o}),90301:((v,T,t)=>{var h=t(16483),g=function(o,a,r,e){e===void 0&&(e=r);var s=o,u=a,n=o,l=a-e,c=o+r,d=a;return new h(s,u,n,l,c,d)};v.exports=g}),23707:((v,T,t)=>{var h=t(97523),g=t(13584),o=function(a,r,e,s){s===void 0&&(s=h);var u=s(a),n=r-u.x,l=e-u.y;return g(a,n,l)};v.exports=o}),97523:((v,T,t)=>{var h=t(2141),g=function(o,a){return a===void 0&&(a=new h),a.x=(o.x1+o.x2+o.x3)/3,a.y=(o.y1+o.y2+o.y3)/3,a};v.exports=g}),24951:((v,T,t)=>{var h=t(26099);function g(a,r,e,s){return a*s-r*e}var o=function(a,r){r===void 0&&(r=new h);var e=a.x3,s=a.y3,u=a.x1-e,n=a.y1-s,l=a.x2-e,c=a.y2-s,d=2*g(u,n,l,c),f=g(n,u*u+n*n,c,l*l+c*c),m=g(u,u*u+n*n,l,l*l+c*c);return r.x=e-f/d,r.y=s+m/d,r};v.exports=o}),85614:((v,T,t)=>{var h=t(96503),g=function(o,a){a===void 0&&(a=new h);var r=o.x1,e=o.y1,s=o.x2,u=o.y2,n=o.x3,l=o.y3,c=s-r,d=u-e,f=n-r,m=l-e,y=c*(r+s)+d*(e+u),S=f*(r+n)+m*(e+l),C=2*(c*(l-u)-d*(n-s)),E,P;if(Math.abs(C)<1e-6){var A=Math.min(r,s,n),F=Math.min(e,u,l);E=(Math.max(r,s,n)-A)*.5,P=(Math.max(e,u,l)-F)*.5,a.x=A+E,a.y=F+P,a.radius=Math.sqrt(E*E+P*P)}else a.x=(m*y-d*S)/C,a.y=(c*S-f*y)/C,E=a.x-r,P=a.y-e,a.radius=Math.sqrt(E*E+P*P);return a};v.exports=g}),74422:((v,T,t)=>{var h=t(16483),g=function(o){return new h(o.x1,o.y1,o.x2,o.y2,o.x3,o.y3)};v.exports=g}),10690:(v=>{var T=function(t,h,g){var o=t.x3-t.x1,a=t.y3-t.y1,r=t.x2-t.x1,e=t.y2-t.y1,s=h-t.x1,u=g-t.y1,n=o*o+a*a,l=o*r+a*e,c=o*s+a*u,d=r*r+e*e,f=r*s+e*u,m=n*d-l*l,y=m===0?0:1/m,S=(d*c-l*f)*y,C=(n*f-l*c)*y;return S>=0&&C>=0&&S+C<1};v.exports=T}),48653:(v=>{var T=function(t,h,g,o){g===void 0&&(g=!1),o===void 0&&(o=[]);for(var a=t.x3-t.x1,r=t.y3-t.y1,e=t.x2-t.x1,s=t.y2-t.y1,u=a*a+r*r,n=a*e+r*s,l=e*e+s*s,c=u*l-n*n,d=c===0?0:1/c,f,m,y,S,C,E,P=t.x1,A=t.y1,F=0;F<h.length&&(y=h[F].x-P,S=h[F].y-A,C=a*y+r*S,E=e*y+s*S,f=(l*C-n*E)*d,m=(u*E-n*C)*d,!(f>=0&&m>=0&&f+m<1&&(o.push({x:h[F].x,y:h[F].y}),g)));F++);return o};v.exports=T}),96006:((v,T,t)=>{var h=t(10690),g=function(o,a){return h(o,a.x,a.y)};v.exports=g}),71326:(v=>{var T=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)};v.exports=T}),71694:(v=>{var T=function(t,h){return h===void 0&&(h=[]),h.push({x:t.x1,y:t.y1}),h.push({x:t.x2,y:t.y2}),h.push({x:t.x3,y:t.y3}),h};v.exports=T}),33522:(v=>{var T=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2&&t.x3===h.x3&&t.y3===h.y3};v.exports=T}),20437:((v,T,t)=>{var h=t(2141),g=t(35001),o=function(a,r,e){e===void 0&&(e=new h);var s=a.getLineA(),u=a.getLineB(),n=a.getLineC();if(r<=0||r>=1)return e.x=s.x1,e.y=s.y1,e;var l=g(s),c=g(u),d=g(n),f=l+c+d,m=f*r,y=0;return m<l?(y=m/l,e.x=s.x1+(s.x2-s.x1)*y,e.y=s.y1+(s.y2-s.y1)*y):m>l+c?(m-=l+c,y=m/d,e.x=n.x1+(n.x2-n.x1)*y,e.y=n.y1+(n.y2-n.y1)*y):(m-=l,y=m/c,e.x=u.x1+(u.x2-u.x1)*y,e.y=u.y1+(u.y2-u.y1)*y),e};v.exports=o}),80672:((v,T,t)=>{var h=t(35001),g=t(2141),o=function(a,r,e,s){s===void 0&&(s=[]);var u=a.getLineA(),n=a.getLineB(),l=a.getLineC(),c=h(u),d=h(n),f=h(l),m=c+d+f;!r&&e>0&&(r=m/e);for(var y=0;y<r;y++){var S=m*(y/r),C=0,E=new g;S<c?(C=S/c,E.x=u.x1+(u.x2-u.x1)*C,E.y=u.y1+(u.y2-u.y1)*C):S>c+d?(S-=c+d,C=S/f,E.x=l.x1+(l.x2-l.x1)*C,E.y=l.y1+(l.y2-l.y1)*C):(S-=c,C=S/d,E.x=n.x1+(n.x2-n.x1)*C,E.y=n.y1+(n.y2-n.y1)*C),s.push(E)}return s};v.exports=o}),39757:((v,T,t)=>{var h=t(2141);function g(a,r,e,s){var u=a-e,n=r-s,l=u*u+n*n;return Math.sqrt(l)}var o=function(a,r){r===void 0&&(r=new h);var e=a.x1,s=a.y1,u=a.x2,n=a.y2,l=a.x3,c=a.y3,d=g(l,c,u,n),f=g(e,s,l,c),m=g(u,n,e,s),y=d+f+m;return r.x=(e*d+u*f+l*m)/y,r.y=(s*d+n*f+c*m)/y,r};v.exports=o}),13584:(v=>{var T=function(t,h,g){return t.x1+=h,t.y1+=g,t.x2+=h,t.y2+=g,t.x3+=h,t.y3+=g,t};v.exports=T}),1376:((v,T,t)=>{var h=t(35001),g=function(o){var a=o.getLineA(),r=o.getLineB(),e=o.getLineC();return h(a)+h(r)+h(e)};v.exports=g}),90260:((v,T,t)=>{var h=t(2141),g=function(o,a){a===void 0&&(a=new h);var r=o.x2-o.x1,e=o.y2-o.y1,s=o.x3-o.x1,u=o.y3-o.y1,n=Math.random(),l=Math.random();return n+l>=1&&(n=1-n,l=1-l),a.x=o.x1+(r*n+s*l),a.y=o.y1+(e*n+u*l),a};v.exports=g}),52172:((v,T,t)=>{var h=t(99614),g=t(39757),o=function(a,r){var e=g(a);return h(a,e.x,e.y,r)};v.exports=o}),49907:((v,T,t)=>{var h=t(99614),g=function(o,a,r){return h(o,a.x,a.y,r)};v.exports=g}),99614:(v=>{var T=function(t,h,g,o){var a=Math.cos(o),r=Math.sin(o),e=t.x1-h,s=t.y1-g;return t.x1=e*a-s*r+h,t.y1=e*r+s*a+g,e=t.x2-h,s=t.y2-g,t.x2=e*a-s*r+h,t.y2=e*r+s*a+g,e=t.x3-h,s=t.y3-g,t.x3=e*a-s*r+h,t.y3=e*r+s*a+g,t};v.exports=T}),16483:((v,T,t)=>{var h=t(83419),g=t(10690),o=t(20437),a=t(80672),r=t(23777),e=t(23031),s=t(90260),u=new h({initialize:function(l,c,d,f,m,y){l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=0),y===void 0&&(y=0),this.type=r.TRIANGLE,this.x1=l,this.y1=c,this.x2=d,this.y2=f,this.x3=m,this.y3=y},contains:function(n,l){return g(this,n,l)},getPoint:function(n,l){return o(this,n,l)},getPoints:function(n,l,c){return a(this,n,l,c)},getRandomPoint:function(n){return s(this,n)},setTo:function(n,l,c,d,f,m){return n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=0),m===void 0&&(m=0),this.x1=n,this.y1=l,this.x2=c,this.y2=d,this.x3=f,this.y3=m,this},getLineA:function(n){return n===void 0&&(n=new e),n.setTo(this.x1,this.y1,this.x2,this.y2),n},getLineB:function(n){return n===void 0&&(n=new e),n.setTo(this.x2,this.y2,this.x3,this.y3),n},getLineC:function(n){return n===void 0&&(n=new e),n.setTo(this.x3,this.y3,this.x1,this.y1),n},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(n){var l=0;this.x1<=this.x2&&this.x1<=this.x3?l=this.x1-n:this.x2<=this.x1&&this.x2<=this.x3?l=this.x2-n:l=this.x3-n,this.x1-=l,this.x2-=l,this.x3-=l}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(n){var l=0;this.x1>=this.x2&&this.x1>=this.x3?l=this.x1-n:this.x2>=this.x1&&this.x2>=this.x3?l=this.x2-n:l=this.x3-n,this.x1-=l,this.x2-=l,this.x3-=l}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(n){var l=0;this.y1<=this.y2&&this.y1<=this.y3?l=this.y1-n:this.y2<=this.y1&&this.y2<=this.y3?l=this.y2-n:l=this.y3-n,this.y1-=l,this.y2-=l,this.y3-=l}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(n){var l=0;this.y1>=this.y2&&this.y1>=this.y3?l=this.y1-n:this.y2>=this.y1&&this.y2>=this.y3?l=this.y2-n:l=this.y3-n,this.y1-=l,this.y2-=l,this.y3-=l}}});v.exports=u}),84435:((v,T,t)=>{var h=t(16483);h.Area=t(41658),h.BuildEquilateral=t(39208),h.BuildFromPolygon=t(39545),h.BuildRight=t(90301),h.CenterOn=t(23707),h.Centroid=t(97523),h.CircumCenter=t(24951),h.CircumCircle=t(85614),h.Clone=t(74422),h.Contains=t(10690),h.ContainsArray=t(48653),h.ContainsPoint=t(96006),h.CopyFrom=t(71326),h.Decompose=t(71694),h.Equals=t(33522),h.GetPoint=t(20437),h.GetPoints=t(80672),h.InCenter=t(39757),h.Perimeter=t(1376),h.Offset=t(13584),h.Random=t(90260),h.Rotate=t(52172),h.RotateAroundPoint=t(49907),h.RotateAroundXY=t(99614),v.exports=h}),74457:(v=>{var T=function(t,h,g){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:g,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};v.exports=T}),84409:(v=>{var T=function(t,h){return function(g,o,a,r){var e=t.getPixelAlpha(o,a,r.texture.key,r.frame.name);return e&&e>=h}};v.exports=T}),7003:((v,T,t)=>{var h=t(83419),g=t(93301),o=t(50792),a=t(8214),r=t(8443),e=t(78970),s=t(85098),u=t(42515),n=t(36210),l=t(61340),c=t(85955),d=new h({initialize:function(m,y){this.game=m,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new o,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new e(this):null,this.mouse=y.inputMouse?new s(this):null,this.touch=y.inputTouch?new n(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers;for(var S=0;S<=this.pointersTotal;S++){var C=new u(this,S);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new l,this._tempMatrix2=new l,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],m.events.once(r.BOOT,this.boot,this)},boot:function(){var f=this.game,m=f.events;this.canvas=f.canvas,this.scaleManager=f.scale,this.events.emit(a.MANAGER_BOOT),m.on(r.PRE_RENDER,this.preRender,this),m.once(r.DESTROY,this.destroy,this)},setCanvasOver:function(f){this.isOver=!0,this.events.emit(a.GAME_OVER,f)},setCanvasOut:function(f){this.isOver=!1,this.events.emit(a.GAME_OUT,f)},preRender:function(){var f=this.game.loop.now,m=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=f,this.events.emit(a.MANAGER_UPDATE);for(var S=0;S<y.length;S++){var C=y[S];if(C.sys.input&&C.sys.input.updatePoll(f,m)&&this.globalTopOnly)return}},setDefaultCursor:function(f){this.defaultCursor=f,this.canvas.style.cursor!==f&&(this.canvas.style.cursor=f)},setCursor:function(f){f.cursor&&(this.canvas.style.cursor=f.cursor)},resetCursor:function(f,m){(m||f&&f.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(f){f===void 0&&(f=1);var m=[];this.pointersTotal+f>10&&(f=10-this.pointersTotal);for(var y=0;y<f;y++){var S=this.pointers.length,C=new u(this,S);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,m.push(C)}return m},updateInputPlugins:function(f,m){var y=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var S=0;S<y.length;S++){var C=y[S];if(C.sys.input){var E=C.sys.input.update(f,m);if(E&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(f){for(var m=this.pointers,y=[],S=0;S<f.changedTouches.length;S++)for(var C=f.changedTouches[S],E=1;E<m.length;E++){var P=m[E];if(!P.active){P.touchstart(C,f),this.activePointer=P,y.push(P);break}}this.updateInputPlugins(g.TOUCH_START,y)},onTouchMove:function(f){for(var m=this.pointers,y=[],S=0;S<f.changedTouches.length;S++)for(var C=f.changedTouches[S],E=1;E<m.length;E++){var P=m[E];if(P.active&&P.identifier===C.identifier){var A=document.elementFromPoint(C.clientX,C.clientY),F=A===this.canvas;!this.isOver&&F?this.setCanvasOver(f):this.isOver&&!F&&this.setCanvasOut(f),this.isOver&&(P.touchmove(C,f),this.activePointer=P,y.push(P));break}}this.updateInputPlugins(g.TOUCH_MOVE,y)},onTouchEnd:function(f){for(var m=this.pointers,y=[],S=0;S<f.changedTouches.length;S++)for(var C=f.changedTouches[S],E=1;E<m.length;E++){var P=m[E];if(P.active&&P.identifier===C.identifier){P.touchend(C,f),y.push(P);break}}this.updateInputPlugins(g.TOUCH_END,y)},onTouchCancel:function(f){for(var m=this.pointers,y=[],S=0;S<f.changedTouches.length;S++)for(var C=f.changedTouches[S],E=1;E<m.length;E++){var P=m[E];if(P.active&&P.identifier===C.identifier){P.touchcancel(C,f),y.push(P);break}}this.updateInputPlugins(g.TOUCH_CANCEL,y)},onMouseDown:function(f){var m=this.mousePointer;m.down(f),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(f){var m=this.mousePointer;m.move(f),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(f){var m=this.mousePointer;m.up(f),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(g.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(f){var m=this.mousePointer;m.wheel(f),this.activePointer=m,this.updateInputPlugins(g.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(f){var m=this.mouse.locked;this.mousePointer.locked=m,this.events.emit(a.POINTERLOCK_CHANGE,f,m)},inputCandidate:function(f,m){var y=f.input;if(!y||!y.enabled||!f.willRender(m))return!1;var S=!0,C=f.parentContainer;if(C)do{if(!C.willRender(m)){S=!1;break}C=C.parentContainer}while(C);return S},hitTest:function(f,m,y,S){S===void 0&&(S=this._tempHitTest);var C=this._tempPoint,E=y.scrollX,P=y.scrollY;S.length=0;var A=f.x,F=f.y;y.getWorldPoint(A,F,C),f.worldX=C.x,f.worldY=C.y;for(var G={x:0,y:0},D=this._tempMatrix,L=this._tempMatrix2,b=0;b<m.length;b++){var I=m[b];if(this.inputCandidate(I,y)){var N=C.x+E*I.scrollFactorX-E,Z=C.y+P*I.scrollFactorY-P;I.parentContainer?(I.getWorldTransformMatrix(D,L),D.applyInverse(N,Z,G)):c(N,Z,I.x,I.y,I.rotation,I.scaleX,I.scaleY,G),this.pointWithinHitArea(I,G.x,G.y)&&S.push(I)}}return S},pointWithinHitArea:function(f,m,y){m+=f.displayOriginX,y+=f.displayOriginY;var S=f.input;return S&&S.hitAreaCallback(S.hitArea,m,y,f)?(S.localX=m,S.localY=y,!0):!1},pointWithinInteractiveObject:function(f,m,y){return f.hitArea?(m+=f.gameObject.displayOriginX,y+=f.gameObject.displayOriginY,f.localX=m,f.localY=y,f.hitAreaCallback(f.hitArea,m,y,f)):!1},transformPointer:function(f,m,y,S){var C=f.position,E=f.prevPosition;E.x=C.x,E.y=C.y;var P=this.scaleManager.transformX(m),A=this.scaleManager.transformY(y),F=f.smoothFactor;!S||F===0?(C.x=P,C.y=A):(C.x=P*F+E.x*(1-F),C.y=A*F+E.y*(1-F))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(r.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var f=0;f<this.pointers.length;f++)this.pointers[f].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});v.exports=d}),48205:((v,T,t)=>{var h=t(96503),g=t(87902),o=t(83419),a=t(93301),r=t(74457),e=t(84409),s=t(20339),u=t(8497),n=t(81154),l=t(8214),c=t(50792),d=t(95540),f=t(23777),m=t(89639),y=t(41212),S=t(37277),C=t(87841),E=t(37303),P=t(44594),A=t(16483),F=t(10690),G=new o({Extends:c,initialize:function(L){c.call(this),this.scene=L,this.systems=L.sys,this.settings=L.sys.settings,this.manager=L.sys.game.input,this.pluginEvents=new c,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var b={cancelled:!1};this._eventContainer={stopPropagation:function(){b.cancelled=!0}},this._eventData=b,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,L.sys.events.once(P.BOOT,this.boot,this),L.sys.events.on(P.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(P.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var D=this.systems.events;D.on(P.TRANSITION_START,this.transitionIn,this),D.on(P.TRANSITION_OUT,this.transitionOut,this),D.on(P.TRANSITION_COMPLETE,this.transitionComplete,this),D.on(P.PRE_UPDATE,this.preUpdate,this),D.once(P.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(D){this.isActive()&&this.emit(l.GAME_OVER,D.timeStamp,D)},onGameOut:function(D){this.isActive()&&this.emit(l.GAME_OUT,D.timeStamp,D)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var D=this._pendingRemoval,L=this._pendingInsertion,b=D.length,I=L.length;if(!(b===0&&I===0)){for(var N=this._list,Z=0;Z<b;Z++){var U=D[Z],W=N.indexOf(U);W>-1&&(N.splice(W,1),this.clear(U,!0))}this._pendingRemoval.length=0,this._list=N.concat(L.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(D){this.manager&&this.manager.setCursor(D)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(D,L){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,D,L),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var b,I=this.manager,N=I.pointers;for(b=0;b<N.length;b++)N[b].updateMotion();if(this._list.length===0)return!1;var Z=this.pollRate;if(Z===-1)return!1;if(Z>0)if(this._pollTimer-=L,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var U=!1;for(b=0;b<N.length;b++){var W=0,X=N[b];this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),W+=this.processOverOutEvents(X),this.getDragState(X)===2&&this.processDragThresholdEvent(X,D),W>0&&(U=!0)}return U},update:function(D,L){if(!this.isActive())return!1;for(var b=!1,I=0;I<L.length;I++){var N=0,Z=L[I];switch(this._tempZones=[],this._temp=this.hitTestPointer(Z),this.sortGameObjects(this._temp,Z),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),D){case a.MOUSE_DOWN:N+=this.processDragDownEvent(Z),N+=this.processDownEvents(Z),N+=this.processOverOutEvents(Z);break;case a.MOUSE_UP:N+=this.processDragUpEvent(Z),N+=this.processUpEvents(Z),N+=this.processOverOutEvents(Z);break;case a.TOUCH_START:N+=this.processDragDownEvent(Z),N+=this.processDownEvents(Z),N+=this.processOverEvents(Z);break;case a.TOUCH_END:case a.TOUCH_CANCEL:N+=this.processDragUpEvent(Z),N+=this.processUpEvents(Z),N+=this.processOutEvents(Z);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:N+=this.processDragMoveEvent(Z),N+=this.processMoveEvents(Z),N+=this.processOverOutEvents(Z);break;case a.MOUSE_WHEEL:N+=this.processWheelEvent(Z);break}N>0&&(b=!0)}return this._updatedThisFrame=!0,b},clear:function(D,L){L===void 0&&(L=!1),this.disable(D);var b=D.input;b&&(this.removeDebug(D),this.manager.resetCursor(b),b.gameObject=void 0,b.target=void 0,b.hitArea=void 0,b.hitAreaCallback=void 0,b.callbackContext=void 0,D.input=null),L||this.queueForRemoval(D);var I=this._draggable.indexOf(D);return I>-1&&this._draggable.splice(I,1),D},disable:function(D,L){L===void 0&&(L=!1);var b=D.input;b&&(b.enabled=!1,b.dragState=0);for(var I=this._drag,N=this._over,Z=this.manager,U=0,W;U<Z.pointers.length;U++)W=I[U].indexOf(D),W>-1&&I[U].splice(W,1),W=N[U].indexOf(D),W>-1&&N[U].splice(W,1);return L&&this.resetCursor(),this},enable:function(D,L,b,I){return I===void 0&&(I=!1),D.input?D.input.enabled=!0:this.setHitArea(D,L,b),D.input&&I&&!D.input.dropZone&&(D.input.dropZone=I),this},hitTestPointer:function(D){for(var L=this.cameras.getCamerasBelowPointer(D),b=0;b<L.length;b++){for(var I=L[b],N=this.manager.hitTest(D,this._list,I),Z=0;Z<N.length;Z++){var U=N[Z];U.input.dropZone&&this._tempZones.push(U)}if(N.length>0)return D.camera=I,N}return D.camera=L[0],[]},processDownEvents:function(D){var L=0,b=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var Z=0;Z<b.length;Z++){var U=b[Z];if(!(!U.input||!U.input.enabled)&&(L++,U.emit(l.GAMEOBJECT_POINTER_DOWN,D,U.input.localX,U.input.localY,N),I.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(l.GAMEOBJECT_DOWN,D,U,N),I.cancelled||!this.isActive())))break}return!I.cancelled&&this.isActive()&&(D.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,D,b):this.emit(l.POINTER_DOWN_OUTSIDE,D)),L},getDragState:function(D){return this._dragState[D.id]},setDragState:function(D,L){this._dragState[D.id]=L},processDragThresholdEvent:function(D,L){var b=!1,I=this.dragTimeThreshold,N=this.dragDistanceThreshold;if((N>0&&s(D.x,D.y,D.downX,D.downY)>=N||I>0&&L>=D.downTime+I)&&(b=!0),b)return this.setDragState(D,3),this.processDragStartList(D)},processDragStartList:function(D){if(this.getDragState(D)!==3)return 0;var L=this._drag[D.id];L.length>1&&(L=L.slice(0));for(var b=0;b<L.length;b++){var I=L[b],N=I.input;N.dragState=2,N.dragStartX=I.x,N.dragStartY=I.y,N.dragStartXGlobal=D.worldX,N.dragStartYGlobal=D.worldY,N.dragStartCamera=D.camera,N.dragX=N.dragStartXGlobal-N.dragStartX,N.dragY=N.dragStartYGlobal-N.dragStartY,I.emit(l.GAMEOBJECT_DRAG_START,D,N.dragX,N.dragY),this.emit(l.DRAG_START,D,I)}return this.setDragState(D,4),L.length},processDragDownEvent:function(D){var L=this._temp;if(this._draggable.length===0||L.length===0||!D.primaryDown||this.getDragState(D)!==0)return 0;this.setDragState(D,1);for(var b=[],I=0;I<L.length;I++){var N=L[I];N.input.draggable&&N.input.dragState===0&&b.push(N)}return b.length===0?(this.setDragState(D,0),0):(b.length>1&&(this.sortGameObjects(b,D),this.topOnly&&b.splice(1)),this._drag[D.id]=b,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(D,3),this.processDragStartList(D)):(this.setDragState(D,2),0))},processDragMoveEvent:function(D){if(this.getDragState(D)===2&&this.processDragThresholdEvent(D,this.manager.game.loop.now),this.getDragState(D)!==4)return 0;var L=this._tempZones,b=this._drag[D.id];b.length>1&&(b=b.slice(0));for(var I=0;I<b.length;I++){var N=b[I],Z=N.input,U=Z.target;if(U){var W=L.indexOf(U);W===0?(N.emit(l.GAMEOBJECT_DRAG_OVER,D,U),this.emit(l.DRAG_OVER,D,N,U)):W>0?(N.emit(l.GAMEOBJECT_DRAG_LEAVE,D,U),this.emit(l.DRAG_LEAVE,D,N,U),Z.target=L[0],U=Z.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,D,U),this.emit(l.DRAG_ENTER,D,N,U)):(N.emit(l.GAMEOBJECT_DRAG_LEAVE,D,U),this.emit(l.DRAG_LEAVE,D,N,U),L[0]?(Z.target=L[0],U=Z.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,D,U),this.emit(l.DRAG_ENTER,D,N,U)):Z.target=null)}else!U&&L[0]&&(Z.target=L[0],U=Z.target,N.emit(l.GAMEOBJECT_DRAG_ENTER,D,U),this.emit(l.DRAG_ENTER,D,N,U));var X,V,O=D.positionToCamera(Z.dragStartCamera);if(!N.parentContainer)X=O.x-Z.dragX,V=O.y-Z.dragY;else{var z=O.x-Z.dragStartXGlobal,B=O.y-Z.dragStartYGlobal,Y=N.getParentRotation(),k=z*Math.cos(Y)+B*Math.sin(Y),J=B*Math.cos(Y)-z*Math.sin(Y);k*=1/N.parentContainer.scaleX,J*=1/N.parentContainer.scaleY,X=k+Z.dragStartX,V=J+Z.dragStartY}N.emit(l.GAMEOBJECT_DRAG,D,X,V),this.emit(l.DRAG,D,N,X,V)}return b.length},processDragUpEvent:function(D){var L=this._drag[D.id];L.length>1&&(L=L.slice(0));for(var b=0;b<L.length;b++){var I=L[b],N=I.input;if(N&&N.dragState===2){N.dragState=0,N.dragX=N.localX-I.displayOriginX,N.dragY=N.localY-I.displayOriginY,N.dragStartCamera=null;var Z=!1,U=N.target;U&&(I.emit(l.GAMEOBJECT_DROP,D,U),this.emit(l.DROP,D,I,U),N.target=null,Z=!0),I.input&&I.input.enabled&&(I.emit(l.GAMEOBJECT_DRAG_END,D,N.dragX,N.dragY,Z),this.emit(l.DRAG_END,D,I,Z))}}return this.setDragState(D,0),L.splice(0),0},processMoveEvents:function(D){var L=0,b=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var Z=0;Z<b.length;Z++){var U=b[Z];if(!(!U.input||!U.input.enabled)&&(L++,U.emit(l.GAMEOBJECT_POINTER_MOVE,D,U.input.localX,U.input.localY,N),I.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(l.GAMEOBJECT_MOVE,D,U,N),I.cancelled||!this.isActive()||this.topOnly)))break}return!I.cancelled&&this.isActive()&&this.emit(l.POINTER_MOVE,D,b),L},processWheelEvent:function(D){var L=0,b=this._temp,I=this._eventData,N=this._eventContainer;I.cancelled=!1;for(var Z=D.deltaX,U=D.deltaY,W=D.deltaZ,X=0;X<b.length;X++){var V=b[X];if(!(!V.input||!V.input.enabled)&&(L++,V.emit(l.GAMEOBJECT_POINTER_WHEEL,D,Z,U,W,N),I.cancelled||!this.isActive()||V.input&&V.input.enabled&&(this.emit(l.GAMEOBJECT_WHEEL,D,V,Z,U,W,N),I.cancelled||!this.isActive())))break}return!I.cancelled&&this.isActive()&&this.emit(l.POINTER_WHEEL,D,b,Z,U,W),L},processOverEvents:function(D){var L=this._temp,b=0,I=L.length,N=[];if(I>0){var Z=this.manager,U=this._eventData,W=this._eventContainer;U.cancelled=!1;for(var X=0;X<I;X++){var V=L[X];if(!(!V.input||!V.input.enabled)&&(N.push(V),Z.setCursor(V.input),V.emit(l.GAMEOBJECT_POINTER_OVER,D,V.input.localX,V.input.localY,W),b++,U.cancelled||!this.isActive()||V.input&&V.input.enabled&&(this.emit(l.GAMEOBJECT_OVER,D,V,W),U.cancelled||!this.isActive())))break}!U.cancelled&&this.isActive()&&this.emit(l.POINTER_OVER,D,N)}return this._over[D.id]=N,b},processOutEvents:function(D){var L=this._over[D.id],b=0,I=L.length;if(I>0){var N=this.manager,Z=this._eventData,U=this._eventContainer;Z.cancelled=!1,this.sortGameObjects(L,D);for(var W=0;W<I;W++){var X=L[W];if(X=L[W],!(!X.input||!X.input.enabled)&&(N.resetCursor(X.input),X.emit(l.GAMEOBJECT_POINTER_OUT,D,U),b++,Z.cancelled||!this.isActive()||X.input&&X.input.enabled&&(this.emit(l.GAMEOBJECT_OUT,D,X,U),Z.cancelled||!this.isActive())))break}!Z.cancelled&&this.isActive()&&this.emit(l.POINTER_OUT,D,L),this._over[D.id]=[]}return b},processOverOutEvents:function(D){var L=this._temp,b,I,N=[],Z=[],U=[],W=this._over[D.id],X=this._drag[D.id],V=this.manager;for(b=0;b<W.length;b++)I=W[b],L.indexOf(I)===-1&&X.indexOf(I)===-1?N.push(I):U.push(I);for(b=0;b<L.length;b++)I=L[b],W.indexOf(I)===-1&&Z.push(I);var O=N.length,z=0,B=this._eventData,Y=this._eventContainer;if(B.cancelled=!1,O>0){for(this.sortGameObjects(N,D),b=0;b<O&&(I=N[b],!(!(!I.input||!I.input.enabled)&&(V.resetCursor(I.input),I.emit(l.GAMEOBJECT_POINTER_OUT,D,Y),z++,B.cancelled||!this.isActive()||I.input&&I.input.enabled&&(this.emit(l.GAMEOBJECT_OUT,D,I,Y),B.cancelled||!this.isActive()))));b++);(!B.cancelled||this.isActive())&&this.emit(l.POINTER_OUT,D,N)}if(O=Z.length,B.cancelled=!1,O>0){for(this.sortGameObjects(Z,D),b=0;b<O&&(I=Z[b],!(!(!I.input||!I.input.enabled)&&(V.setCursor(I.input),I.emit(l.GAMEOBJECT_POINTER_OVER,D,I.input.localX,I.input.localY,Y),z++,B.cancelled||!this.isActive()||I.input&&I.input.enabled&&(this.emit(l.GAMEOBJECT_OVER,D,I,Y),B.cancelled||!this.isActive()))));b++);!B.cancelled&&this.isActive()&&this.emit(l.POINTER_OVER,D,Z)}return W=U.concat(Z),this._over[D.id]=this.sortGameObjects(W,D),z},processUpEvents:function(D){var L=this._temp,b=this._eventData,I=this._eventContainer;b.cancelled=!1;for(var N=0;N<L.length;N++){var Z=L[N];if(!(!Z.input||!Z.input.enabled)&&(Z.emit(l.GAMEOBJECT_POINTER_UP,D,Z.input.localX,Z.input.localY,I),b.cancelled||!this.isActive()||Z.input&&Z.input.enabled&&(this.emit(l.GAMEOBJECT_UP,D,Z,I),b.cancelled||!this.isActive())))break}return!b.cancelled&&this.isActive()&&(D.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,D,L):this.emit(l.POINTER_UP_OUTSIDE,D)),L.length},forceDownState:function(D,L){this.forceState(D,L,l.GAMEOBJECT_POINTER_DOWN,l.GAMEOBJECT_DOWN,!1)},forceUpState:function(D,L){this.forceState(D,L,l.GAMEOBJECT_POINTER_UP,l.GAMEOBJECT_UP,!1)},forceOverState:function(D,L){this.forceState(D,L,l.GAMEOBJECT_POINTER_OVER,l.GAMEOBJECT_OVER,!0)},forceOutState:function(D,L){this.forceState(D,L,l.GAMEOBJECT_POINTER_OUT,l.GAMEOBJECT_OUT,!1)},forceState:function(D,L,b,I,N){var Z=this._eventData,U=this._eventContainer;Z.cancelled=!1,L.input&&L.input.enabled&&(L.emit(b,D,L.input.localX,L.input.localY,U),N&&this.setCursor(L.input),!Z.cancelled&&this.isActive()&&L.input&&L.input.enabled&&this.emit(I,D,L,U))},queueForInsertion:function(D){return this._pendingInsertion.indexOf(D)===-1&&this._list.indexOf(D)===-1&&this._pendingInsertion.push(D),this},queueForRemoval:function(D){return this._pendingRemoval.push(D),this},setDraggable:function(D,L){L===void 0&&(L=!0),Array.isArray(D)||(D=[D]);for(var b=0;b<D.length;b++){var I=D[b];I.input.draggable=L;var N=this._draggable.indexOf(I);L&&N===-1?this._draggable.push(I):!L&&N>-1&&this._draggable.splice(N,1)}return this},makePixelPerfect:function(D){D===void 0&&(D=1);var L=this.systems.textures;return e(L,D)},setHitArea:function(D,L,b){if(L===void 0)return this.setHitAreaFromTexture(D);Array.isArray(D)||(D=[D]);var I=!1,N=!1,Z=!1,U=!1,W=!1,X=!0;if(y(L)&&Object.keys(L).length){var V=L,O=D.some(function(J){return J.hasOwnProperty("faces")});if(!O){L=d(V,"hitArea",null),b=d(V,"hitAreaCallback",null),W=d(V,"pixelPerfect",!1);var z=d(V,"alphaTolerance",1);W&&(L={},b=this.makePixelPerfect(z))}I=d(V,"draggable",!1),N=d(V,"dropZone",!1),Z=d(V,"cursor",!1),U=d(V,"useHandCursor",!1),(!L||!b)&&(this.setHitAreaFromTexture(D),X=!1)}else typeof L=="function"&&!b&&(b=L,L={});for(var B=0;B<D.length;B++){var Y=D[B];if(W&&Y.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var k=Y.input?Y.input:r(Y,L,b);k.customHitArea=X,k.dropZone=N,k.cursor=U?"pointer":Z,Y.input=k,I&&this.setDraggable(Y),this.queueForInsertion(Y)}return this},setHitAreaCircle:function(D,L,b,I,N){N===void 0&&(N=g);var Z=new h(L,b,I);return this.setHitArea(D,Z,N)},setHitAreaEllipse:function(D,L,b,I,N,Z){Z===void 0&&(Z=n);var U=new u(L,b,I,N);return this.setHitArea(D,U,Z)},setHitAreaFromTexture:function(D,L){L===void 0&&(L=E),Array.isArray(D)||(D=[D]);for(var b=0;b<D.length;b++){var I=D[b],N=I.frame,Z=0,U=0;if(I.width?(Z=I.width,U=I.height):N&&(Z=N.realWidth,U=N.realHeight),I.type==="Container"&&(Z===0||U===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Z!==0&&U!==0&&(I.input=r(I,new C(0,0,Z,U),L),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(D,L,b,I,N,Z){Z===void 0&&(Z=E);var U=new C(L,b,I,N);return this.setHitArea(D,U,Z)},setHitAreaTriangle:function(D,L,b,I,N,Z,U,W){W===void 0&&(W=F);var X=new A(L,b,I,N,Z,U);return this.setHitArea(D,X,W)},enableDebug:function(D,L){L===void 0&&(L=65280);var b=D.input;if(!b||!b.hitArea)return this;var I=b.hitArea,N=I.type,Z=b.hitAreaDebug,U=this.systems.add,W=this.systems.updateList;Z&&(W.remove(Z),Z.destroy(),Z=null);var X=0,V=0;switch(N){case f.CIRCLE:Z=U.arc(0,0,I.radius),X=I.x-I.radius,V=I.y-I.radius;break;case f.ELLIPSE:Z=U.ellipse(0,0,I.width,I.height),X=I.x-I.width/2,V=I.y-I.height/2;break;case f.LINE:Z=U.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case f.POLYGON:Z=U.polygon(0,0,I.points);break;case f.RECTANGLE:Z=U.rectangle(0,0,I.width,I.height),X=I.x,V=I.y;break;case f.TRIANGLE:Z=U.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return Z&&(Z.isFilled=!1,Z.strokeColor=L,Z.preUpdate=function(){Z.setVisible(D.visible),Z.setStrokeStyle(1/D.scale,Z.strokeColor),Z.setDisplayOrigin(D.displayOriginX,D.displayOriginY);var O=D.x,z=D.y,B=D.rotation,Y=D.scaleX,k=D.scaleY;if(D.parentContainer){var J=D.getWorldTransformMatrix();O=J.tx,z=J.ty,B=J.rotation,Y=J.scaleX,k=J.scaleY}Z.setRotation(B),Z.setScale(Y,k),Z.setPosition(O+X*Y,z+V*k),Z.setScrollFactor(D.scrollFactorX,D.scrollFactorY),Z.setDepth(D.depth)},W.add(Z),b.hitAreaDebug=Z),this},removeDebug:function(D){var L=D.input;if(L&&L.hitAreaDebug){var b=L.hitAreaDebug;b.destroy(),L.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(D){return this.pollRate=D,this._pollTimer=0,this},setGlobalTopOnly:function(D){return this.manager.globalTopOnly=D,this},setTopOnly:function(D){return this.topOnly=D,this},sortGameObjects:function(D,L){if(D.length<2||!L.camera)return D;var b=L.camera.renderList;return D.sort(function(I,N){var Z=Math.max(b.indexOf(I),0),U=Math.max(b.indexOf(N),0);return U-Z})},sortDropZones:function(D){return D.length<2?D:(this.scene.sys.depthSort(),D.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(D,L){if(!D.parentContainer&&!L.parentContainer)return this.displayList.getIndex(L)-this.displayList.getIndex(D);if(D.parentContainer===L.parentContainer)return L.parentContainer.getIndex(L)-D.parentContainer.getIndex(D);if(D.parentContainer===L)return-1;if(L.parentContainer===D)return 1;for(var b=D.getIndexList(),I=L.getIndexList(),N=Math.min(b.length,I.length),Z=0;Z<N;Z++){var U=b[Z],W=I[Z];if(U!==W)return W-U}return I.length-b.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(D){return this.manager.addPointer(D)},setDefaultCursor:function(D){return this.manager.setDefaultCursor(D),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var D=0;D<10;D++)this._drag[D]=[],this._over[D]=[];this.removeAllListeners();var L=this.manager;L.canvas.style.cursor=L.defaultCursor;var b=this.systems.events;b.off(P.TRANSITION_START,this.transitionIn,this),b.off(P.TRANSITION_OUT,this.transitionOut,this),b.off(P.TRANSITION_COMPLETE,this.transitionComplete,this),b.off(P.PRE_UPDATE,this.preUpdate,this),L.events.off(l.GAME_OUT,this.onGameOut,this),L.events.off(l.GAME_OVER,this.onGameOver,this),b.off(P.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var D=this.manager.pointers,L=0;L<D.length;L++)D[L].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(P.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});S.register("InputPlugin",G,"input"),v.exports=G}),89639:((v,T,t)=>{var h=t(35154),g={},o={};o.register=function(a,r,e,s,u){g[a]={plugin:r,mapping:e,settingsKey:s,configKey:u}},o.getPlugin=function(a){return g[a]},o.install=function(a){var r=a.scene.sys,e=r.settings.input,s=r.game.config;for(var u in g){var n=g[u].plugin,l=g[u].mapping,c=g[u].settingsKey,d=g[u].configKey;h(e,c,s[d])&&(a[l]=new n(a))}},o.remove=function(a){g.hasOwnProperty(a)&&delete g[a]},v.exports=o}),42515:((v,T,t)=>{var h=t(31040),g=t(83419),o=t(20339),a=t(43855),r=t(47235),e=t(26099),s=t(25892),u=new g({initialize:function(l,c){this.manager=l,this.id=c,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new e,this.prevPosition=new e,this.midPoint=new e(-1,-1),this.velocity=new e,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=c===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(n){var l=n.getWorldPoint(this.x,this.y);return this.worldX=l.x,this.worldY=l.y,this},positionToCamera:function(n,l){return n.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var n=this.position.x,l=this.position.y,c=this.midPoint.x,d=this.midPoint.y;if(!(n===c&&l===d)){var f=r(this.motionFactor,c,n),m=r(this.motionFactor,d,l);a(f,n,.1)&&(f=n),a(m,l,.1)&&(m=l),this.midPoint.set(f,m);var y=n-f,S=l-m;this.velocity.set(y,S),this.angle=h(f,m,n,l),this.distance=Math.sqrt(y*y+S*S)}},up:function(n){"buttons"in n&&(this.buttons=n.buttons),this.event=n,this.button=n.button,this.upElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),n.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=n.timeStamp,this.wasTouch=!1)},down:function(n){"buttons"in n&&(this.buttons=n.buttons),this.event=n,this.button=n.button,this.downElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),n.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),s.macOS&&n.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=n.timeStamp),this.wasTouch=!1},move:function(n){"buttons"in n&&(this.buttons=n.buttons),this.event=n,this.manager.transformPointer(this,n.pageX,n.pageY,!0),this.locked&&(this.movementX=n.movementX||n.mozMovementX||n.webkitMovementX||0,this.movementY=n.movementY||n.mozMovementY||n.webkitMovementY||0),this.moveTime=n.timeStamp,this.wasTouch=!1},wheel:function(n){"buttons"in n&&(this.buttons=n.buttons),this.event=n,this.manager.transformPointer(this,n.pageX,n.pageY,!1),this.deltaX=n.deltaX,this.deltaY=n.deltaY,this.deltaZ=n.deltaZ,this.wasTouch=!1},touchstart:function(n,l){n.pointerId&&(this.pointerId=n.pointerId),this.identifier=n.identifier,this.target=n.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(n,l){this.event=l,this.manager.transformPointer(this,n.pageX,n.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(n,l){this.buttons=0,this.event=l,this.upElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(n,l){this.buttons=0,this.event=l,this.upElement=n.target,this.manager.transformPointer(this,n.pageX,n.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(n,l){n===void 0&&(n=10),l===void 0&&(l=[]);for(var c=this.prevPosition.x,d=this.prevPosition.y,f=this.position.x,m=this.position.y,y=0;y<n;y++){var S=1/n*y;l[y]={x:r(S,c,f),y:r(S,d,m)}}return l},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(n){this.position.x=n}},y:{get:function(){return this.position.y},set:function(n){this.position.y=n}},time:{get:function(){return this.event?this.event.timeStamp:0}}});v.exports=u}),93301:(v=>{var T={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};v.exports=T}),7179:(v=>{v.exports="boot"}),85375:(v=>{v.exports="destroy"}),39843:(v=>{v.exports="dragend"}),23388:(v=>{v.exports="dragenter"}),16133:(v=>{v.exports="drag"}),27829:(v=>{v.exports="dragleave"}),53904:(v=>{v.exports="dragover"}),56058:(v=>{v.exports="dragstart"}),2642:(v=>{v.exports="drop"}),88171:(v=>{v.exports="gameobjectdown"}),36147:(v=>{v.exports="dragend"}),71692:(v=>{v.exports="dragenter"}),96149:(v=>{v.exports="drag"}),81285:(v=>{v.exports="dragleave"}),74048:(v=>{v.exports="dragover"}),21322:(v=>{v.exports="dragstart"}),49378:(v=>{v.exports="drop"}),86754:(v=>{v.exports="gameobjectmove"}),86433:(v=>{v.exports="gameobjectout"}),60709:(v=>{v.exports="gameobjectover"}),24081:(v=>{v.exports="pointerdown"}),11172:(v=>{v.exports="pointermove"}),18907:(v=>{v.exports="pointerout"}),95579:(v=>{v.exports="pointerover"}),35368:(v=>{v.exports="pointerup"}),26972:(v=>{v.exports="wheel"}),47078:(v=>{v.exports="gameobjectup"}),73802:(v=>{v.exports="gameobjectwheel"}),56718:(v=>{v.exports="gameout"}),25936:(v=>{v.exports="gameover"}),27503:(v=>{v.exports="boot"}),50852:(v=>{v.exports="process"}),96438:(v=>{v.exports="update"}),59152:(v=>{v.exports="pointerlockchange"}),47777:(v=>{v.exports="pointerdown"}),27957:(v=>{v.exports="pointerdownoutside"}),19444:(v=>{v.exports="pointermove"}),54251:(v=>{v.exports="pointerout"}),18667:(v=>{v.exports="pointerover"}),27192:(v=>{v.exports="pointerup"}),24652:(v=>{v.exports="pointerupoutside"}),45132:(v=>{v.exports="wheel"}),44512:(v=>{v.exports="preupdate"}),15757:(v=>{v.exports="shutdown"}),41637:(v=>{v.exports="start"}),93802:(v=>{v.exports="update"}),8214:((v,T,t)=>{v.exports={BOOT:t(7179),DESTROY:t(85375),DRAG_END:t(39843),DRAG_ENTER:t(23388),DRAG:t(16133),DRAG_LEAVE:t(27829),DRAG_OVER:t(53904),DRAG_START:t(56058),DROP:t(2642),GAME_OUT:t(56718),GAME_OVER:t(25936),GAMEOBJECT_DOWN:t(88171),GAMEOBJECT_DRAG_END:t(36147),GAMEOBJECT_DRAG_ENTER:t(71692),GAMEOBJECT_DRAG:t(96149),GAMEOBJECT_DRAG_LEAVE:t(81285),GAMEOBJECT_DRAG_OVER:t(74048),GAMEOBJECT_DRAG_START:t(21322),GAMEOBJECT_DROP:t(49378),GAMEOBJECT_MOVE:t(86754),GAMEOBJECT_OUT:t(86433),GAMEOBJECT_OVER:t(60709),GAMEOBJECT_POINTER_DOWN:t(24081),GAMEOBJECT_POINTER_MOVE:t(11172),GAMEOBJECT_POINTER_OUT:t(18907),GAMEOBJECT_POINTER_OVER:t(95579),GAMEOBJECT_POINTER_UP:t(35368),GAMEOBJECT_POINTER_WHEEL:t(26972),GAMEOBJECT_UP:t(47078),GAMEOBJECT_WHEEL:t(73802),MANAGER_BOOT:t(27503),MANAGER_PROCESS:t(50852),MANAGER_UPDATE:t(96438),POINTER_DOWN:t(47777),POINTER_DOWN_OUTSIDE:t(27957),POINTER_MOVE:t(19444),POINTER_OUT:t(54251),POINTER_OVER:t(18667),POINTER_UP:t(27192),POINTER_UP_OUTSIDE:t(24652),POINTER_WHEEL:t(45132),POINTERLOCK_CHANGE:t(59152),PRE_UPDATE:t(44512),SHUTDOWN:t(15757),START:t(41637),UPDATE:t(93802)}}),97421:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r){this.pad=a,this.events=a.events,this.index=r,this.value=0,this.threshold=.1},update:function(o){this.value=o},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});v.exports=g}),28884:((v,T,t)=>{var h=t(83419),g=t(92734),o=new h({initialize:function(r,e){this.pad=r,this.events=r.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(a){this.value=a;var r=this.pad,e=this.index;a>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(g.BUTTON_DOWN,r,this,a),this.pad.emit(g.GAMEPAD_BUTTON_DOWN,e,a,this)):this.pressed&&(this.pressed=!1,this.events.emit(g.BUTTON_UP,r,this,a),this.pad.emit(g.GAMEPAD_BUTTON_UP,e,a,this))},destroy:function(){this.pad=null,this.events=null}});v.exports=o}),99125:((v,T,t)=>{var h=t(97421),g=t(28884),o=t(83419),a=t(50792),r=t(26099),e=new o({Extends:a,initialize:function(u,n){a.call(this),this.manager=u,this.pad=n,this.id=n.id,this.index=n.index;for(var l=[],c=0;c<n.buttons.length;c++)l.push(new g(this,c));this.buttons=l;var d=[];for(c=0;c<n.axes.length;c++)d.push(new h(this,c));this.axes=d,this.vibration=n.vibrationActuator;var f={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:f,this._LCRight=l[15]?l[15]:f,this._LCTop=l[12]?l[12]:f,this._LCBottom=l[13]?l[13]:f,this._RCLeft=l[2]?l[2]:f,this._RCRight=l[1]?l[1]:f,this._RCTop=l[3]?l[3]:f,this._RCBottom=l[0]?l[0]:f,this._FBLeftTop=l[4]?l[4]:f,this._FBLeftBottom=l[6]?l[6]:f,this._FBRightTop=l[5]?l[5]:f,this._FBRightBottom=l[7]?l[7]:f;var m={value:0};this._HAxisLeft=d[0]?d[0]:m,this._VAxisLeft=d[1]?d[1]:m,this._HAxisRight=d[2]?d[2]:m,this._VAxisRight=d[3]?d[3]:m,this.leftStick=new r,this.rightStick=new r,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(s){return this.axes[s].getValue()},setAxisThreshold:function(s){for(var u=0;u<this.axes.length;u++)this.axes[u].threshold=s},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(s){return this.buttons[s].value},isButtonDown:function(s){return this.buttons[s].pressed},update:function(s){if(!(s.timestamp<this._created)){var u,n=this.buttons,l=s.buttons,c=n.length;for(u=0;u<c;u++)n[u].update(l[u].value);var d=this.axes,f=s.axes;for(c=d.length,u=0;u<c;u++)d[u].update(f[u]);c>=2&&(this.leftStick.set(d[0].getValue(),d[1].getValue()),c>=4&&this.rightStick.set(d[2].getValue(),d[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var s;for(s=0;s<this.buttons.length;s++)this.buttons[s].destroy();for(s=0;s<this.axes.length;s++)this.axes[s].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});v.exports=e}),56654:((v,T,t)=>{var h=t(83419),g=t(50792),o=t(92734),a=t(99125),r=t(35154),e=t(89639),s=t(8214),u=new h({Extends:g,initialize:function(l){g.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(s.BOOT,this.boot,this),l.pluginEvents.on(s.START,this.start,this)},boot:function(){var n=this.scene.sys.game,l=this.settings.input,c=n.config;this.enabled=r(l,"gamepad",c.inputGamepad)&&n.device.input.gamepads,this.target=r(l,"gamepad.target",c.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var n=this,l=this.target,c=function(d){d.defaultPrevented||!n.isActive()||(n.refreshPads(),n.queue.push(d))};this.onGamepadHandler=c,l.addEventListener("gamepadconnected",c,!1),l.addEventListener("gamepaddisconnected",c,!1),this.sceneInputPlugin.pluginEvents.on(s.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(s.UPDATE,this.update);for(var n=0;n<this.gamepads.length;n++)this.gamepads[n].removeAllListeners()},disconnectAll:function(){for(var n=0;n<this.gamepads.length;n++)this.gamepads[n].pad.connected=!1},refreshPads:function(){var n=navigator.getGamepads();if(!n)this.disconnectAll();else for(var l=this.gamepads,c=0;c<n.length;c++){var d=n[c];if(d){var f=d.id,m=d.index,y=l[m];if(y)y.id!==f?(y.destroy(),l[m]=new a(this,d)):y.update(d);else{var S=new a(this,d);l[m]=S,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=S):this._pad3=S:this._pad2=S:this._pad1=S}}}},getAll:function(){for(var n=[],l=this.gamepads,c=0;c<l.length;c++)l[c]&&n.push(l[c]);return n},getPad:function(n){for(var l=this.gamepads,c=0;c<l.length;c++)if(l[c]&&l[c].index===n)return l[c]},update:function(){if(this.enabled){this.refreshPads();var n=this.queue.length;if(n!==0)for(var l=this.queue.splice(0,n),c=0;c<n;c++){var d=l[c],f=this.getPad(d.gamepad.index);d.type==="gamepadconnected"?this.emit(o.CONNECTED,f,d):d.type==="gamepaddisconnected"&&this.emit(o.DISCONNECTED,f,d)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var n=0;n<this.gamepads.length;n++)this.gamepads[n]&&this.gamepads[n].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});e.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),v.exports=u}),89651:(v=>{v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}}),65294:(v=>{v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),90089:(v=>{v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),64894:((v,T,t)=>{v.exports={DUALSHOCK_4:t(65294),SNES_USB:t(89651),XBOX_360:t(90089)}}),46008:(v=>{v.exports="down"}),7629:(v=>{v.exports="up"}),42206:(v=>{v.exports="connected"}),86544:(v=>{v.exports="disconnected"}),94784:(v=>{v.exports="down"}),14325:(v=>{v.exports="up"}),92734:((v,T,t)=>{v.exports={BUTTON_DOWN:t(46008),BUTTON_UP:t(7629),CONNECTED:t(42206),DISCONNECTED:t(86544),GAMEPAD_BUTTON_DOWN:t(94784),GAMEPAD_BUTTON_UP:t(14325)}}),48646:((v,T,t)=>{v.exports={Axis:t(97421),Button:t(28884),Events:t(92734),Gamepad:t(99125),GamepadPlugin:t(56654),Configs:t(64894)}}),14350:((v,T,t)=>{var h=t(93301),g=t(79291),o={CreatePixelPerfectHandler:t(84409),CreateInteractiveObject:t(74457),Events:t(8214),Gamepad:t(48646),InputManager:t(7003),InputPlugin:t(48205),InputPluginCache:t(89639),Keyboard:t(51442),Mouse:t(87078),Pointer:t(42515),Touch:t(95618)};o=g(!1,o,h),v.exports=o}),78970:((v,T,t)=>{var h=t(72905),g=t(83419),o=t(8443),a=t(8214),r=t(46032),e=t(29747),s=new g({initialize:function(n){this.manager=n,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=e,this.onKeyUp=e,n.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputKeyboard,this.target=u.inputKeyboardEventTarget,this.addCapture(u.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(o.POST_STEP,this.postUpdate,this)},startListeners:function(){var u=this;this.onKeyDown=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(a.MANAGER_PROCESS);var c=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!c&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}},this.onKeyUp=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(a.MANAGER_PROCESS);var c=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!c&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}};var n=this.target;n&&(n.addEventListener("keydown",this.onKeyDown,!1),n.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var u=this.target;u.removeEventListener("keydown",this.onKeyDown,!1),u.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var n=this.captures,l=0;l<u.length;l++){var c=u[l];typeof c=="string"&&(c=r[c.trim().toUpperCase()]),n.indexOf(c)===-1&&n.push(c)}this.preventDefault=n.length>0},removeCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var n=this.captures,l=0;l<u.length;l++){var c=u[l];typeof c=="string"&&(c=r[c.toUpperCase()]),h(n,c)}this.preventDefault=n.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(o.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});v.exports=s}),28846:((v,T,t)=>{var h=t(83419),g=t(50792),o=t(95922),a=t(8443),r=t(35154),e=t(8214),s=t(89639),u=t(30472),n=t(46032),l=t(87960),c=t(74600),d=t(44594),f=t(56583),m=new h({Extends:g,initialize:function(S){g.call(this),this.game=S.systems.game,this.scene=S.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=S,this.manager=S.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,S.pluginEvents.once(e.BOOT,this.boot,this),S.pluginEvents.on(e.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=r(y,"keyboard",!0);var S=r(y,"keyboard.capture",null);S&&this.addCaptures(S),this.sceneInputPlugin.pluginEvents.once(e.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(e.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(e.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(d.PAUSE,this.resetKeys,this),this.scene.sys.events.on(d.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:n.UP,down:n.DOWN,left:n.LEFT,right:n.RIGHT,space:n.SPACE,shift:n.SHIFT})},addKeys:function(y,S,C){S===void 0&&(S=!0),C===void 0&&(C=!1);var E={};if(typeof y=="string"){y=y.split(",");for(var P=0;P<y.length;P++){var A=y[P].trim();A&&(E[A]=this.addKey(A,S,C))}}else for(var F in y)E[F]=this.addKey(y[F],S,C);return E},addKey:function(y,S,C){S===void 0&&(S=!0),C===void 0&&(C=!1);var E=this.keys;if(y instanceof u){var P=E.indexOf(y);return P>-1?E[P]=y:E[y.keyCode]=y,S&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=n[y.toUpperCase()]),E[y]||(E[y]=new u(this,y),S&&this.addCapture(y),E[y].setEmitOnRepeat(C)),E[y]},removeKey:function(y,S,C){S===void 0&&(S=!1),C===void 0&&(C=!1);var E=this.keys,P;if(y instanceof u){var A=E.indexOf(y);A>-1&&(P=this.keys[A],this.keys[A]=void 0)}else typeof y=="string"&&(y=n[y.toUpperCase()]);return E[y]&&(P=E[y],E[y]=void 0),P&&(P.plugin=null,C&&this.removeCapture(P.keyCode),S&&P.destroy()),this},removeAllKeys:function(y,S){y===void 0&&(y=!1),S===void 0&&(S=!1);for(var C=this.keys,E=0;E<C.length;E++){var P=C[E];P&&(C[E]=void 0,S&&this.removeCapture(P.keyCode),y&&P.destroy())}return this},createCombo:function(y,S){return new l(this,y,S)},checkDown:function(y,S){if(S===void 0&&(S=0),this.enabled&&y.isDown){var C=f(this.time-y.timeDown,S);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,S=y.length;if(!(!this.isActive()||S===0))for(var C=this.keys,E=0;E<S;E++){var P=y[E],A=P.keyCode,F=C[A],G=!1;P.cancelled===void 0&&(P.cancelled=0,P.stopImmediatePropagation=function(){P.cancelled=1},P.stopPropagation=function(){P.cancelled=-1}),P.cancelled!==-1&&(A===this.prevCode&&P.timeStamp===this.prevTime&&P.type===this.prevType||(this.prevCode=A,this.prevTime=P.timeStamp,this.prevType=P.type,P.type==="keydown"?(F&&(G=F.isDown,F.onDown(P)),!P.cancelled&&(!F||!G)&&(c[A]&&this.emit(o.KEY_DOWN+c[A],P),P.cancelled||this.emit(o.ANY_KEY_DOWN,P))):(F&&F.onUp(P),P.cancelled||(c[A]&&this.emit(o.KEY_UP+c[A],P),P.cancelled||this.emit(o.ANY_KEY_UP,P))),P.cancelled===1&&(P.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,S=0;S<y.length;S++)y[S]&&y[S].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(e.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(d.PAUSE,this.resetKeys,this),this.scene.sys.events.off(d.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,S=0;S<y.length;S++)y[S]&&y[S].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});s.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),v.exports=m}),66970:(v=>{var T=function(t,h){return h.timeLastMatched=t.timeStamp,h.index++,h.index===h.size?!0:(h.current=h.keyCodes[h.index],!1)};v.exports=T}),87960:((v,T,t)=>{var h=t(83419),g=t(95922),o=t(95540),a=t(68769),r=t(92803),e=new h({initialize:function(u,n,l){if(l===void 0&&(l={}),n.length<2)return!1;this.manager=u,this.enabled=!0,this.keyCodes=[];for(var c=0;c<n.length;c++){var d=n[c];typeof d=="string"?this.keyCodes.push(d.toUpperCase().charCodeAt(0)):typeof d=="number"?this.keyCodes.push(d):d.hasOwnProperty("keyCode")&&this.keyCodes.push(d.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=o(l,"resetOnWrongKey",!0),this.maxKeyDelay=o(l,"maxKeyDelay",0),this.resetOnMatch=o(l,"resetOnMatch",!1),this.deleteOnMatch=o(l,"deleteOnMatch",!1);var f=this,m=function(y){if(!(f.matched||!f.enabled)){var S=a(y,f);S&&(f.manager.emit(g.COMBO_MATCH,f,y),f.resetOnMatch?r(f):f.deleteOnMatch&&f.destroy())}};this.onKeyDown=m,this.manager.on(g.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(g.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});v.exports=e}),68769:((v,T,t)=>{var h=t(66970),g=function(o,a){if(a.matched)return!0;var r=!1,e=!1;if(o.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var s=a.timeLastMatched+a.maxKeyDelay;o.timeStamp<=s&&(e=!0,r=h(o,a))}else e=!0,r=h(o,a);return!e&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),r&&(a.timeLastMatched=o.timeStamp,a.matched=!0,a.timeMatched=o.timeStamp),r};v.exports=g}),92803:(v=>{var T=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t};v.exports=T}),92612:(v=>{v.exports="keydown"}),23345:(v=>{v.exports="keyup"}),21957:(v=>{v.exports="keycombomatch"}),44743:(v=>{v.exports="down"}),3771:(v=>{v.exports="keydown-"}),46358:(v=>{v.exports="keyup-"}),75674:(v=>{v.exports="up"}),95922:((v,T,t)=>{v.exports={ANY_KEY_DOWN:t(92612),ANY_KEY_UP:t(23345),COMBO_MATCH:t(21957),DOWN:t(44743),KEY_DOWN:t(3771),KEY_UP:t(46358),UP:t(75674)}}),51442:((v,T,t)=>{v.exports={Events:t(95922),KeyboardManager:t(78970),KeyboardPlugin:t(28846),Key:t(30472),KeyCodes:t(46032),KeyCombo:t(87960),AdvanceKeyCombo:t(66970),ProcessKeyCombo:t(68769),ResetKeyCombo:t(92803),JustDown:t(90229),JustUp:t(38796),DownDuration:t(37015),UpDuration:t(41170)}}),37015:(v=>{var T=function(t,h){h===void 0&&(h=50);var g=t.plugin.game.loop.time-t.timeDown;return t.isDown&&g<h};v.exports=T}),90229:(v=>{var T=function(t){return t._justDown?(t._justDown=!1,!0):!1};v.exports=T}),38796:(v=>{var T=function(t){return t._justUp?(t._justUp=!1,!0):!1};v.exports=T}),30472:((v,T,t)=>{var h=t(83419),g=t(50792),o=t(95922),a=new h({Extends:g,initialize:function(e,s){g.call(this),this.plugin=e,this.keyCode=s,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(r){return this.emitOnRepeat=r,this},onDown:function(r){this.originalEvent=r,this.enabled&&(this.altKey=r.altKey,this.ctrlKey=r.ctrlKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.location=r.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(o.DOWN,this,r):(this.isDown=!0,this.isUp=!1,this.timeDown=r.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(o.DOWN,this,r)))},onUp:function(r){this.originalEvent=r,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=r.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(o.UP,this,r))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});v.exports=a}),46032:(v=>{var T={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};v.exports=T}),74600:((v,T,t)=>{var h=t(46032),g={};for(var o in h)g[h[o]]=o;v.exports=g}),41170:(v=>{var T=function(t,h){h===void 0&&(h=50);var g=t.plugin.game.loop.time-t.timeUp;return t.isUp&&g<h};v.exports=T}),85098:((v,T,t)=>{var h=t(83419),g=t(89357),o=t(8214),a=t(29747),r=new h({initialize:function(s){this.manager=s,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,s.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.passive=e.inputMousePassive,this.preventDefaultDown=e.inputMousePreventDefaultDown,this.preventDefaultUp=e.inputMousePreventDefaultUp,this.preventDefaultMove=e.inputMousePreventDefaultMove,this.preventDefaultWheel=e.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(g.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){g.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this.target;if(e){var s=this,u=this.manager,n=u.canvas,l=window&&window.focus&&u.game.config.autoFocus;this.onMouseMove=function(d){!d.defaultPrevented&&s.enabled&&u&&u.enabled&&(u.onMouseMove(d),s.preventDefaultMove&&d.preventDefault())},this.onMouseDown=function(d){l&&window.focus(),!d.defaultPrevented&&s.enabled&&u&&u.enabled&&(u.onMouseDown(d),s.preventDefaultDown&&d.target===n&&d.preventDefault())},this.onMouseDownWindow=function(d){d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents||!d.defaultPrevented&&s.enabled&&u&&u.enabled&&d.target!==n&&u.onMouseDown(d)},this.onMouseUp=function(d){!d.defaultPrevented&&s.enabled&&u&&u.enabled&&(u.onMouseUp(d),s.preventDefaultUp&&d.target===n&&d.preventDefault())},this.onMouseUpWindow=function(d){d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents||!d.defaultPrevented&&s.enabled&&u&&u.enabled&&d.target!==n&&u.onMouseUp(d)},this.onMouseOver=function(d){!d.defaultPrevented&&s.enabled&&u&&u.enabled&&u.setCanvasOver(d)},this.onMouseOut=function(d){!d.defaultPrevented&&s.enabled&&u&&u.enabled&&u.setCanvasOut(d)},this.onMouseWheel=function(d){!d.defaultPrevented&&s.enabled&&u&&u.enabled&&u.onMouseWheel(d),s.preventDefaultWheel&&d.target===n&&d.preventDefault()};var c={passive:!0};if(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver,c),e.addEventListener("mouseout",this.onMouseOut,c),this.preventDefaultWheel?e.addEventListener("wheel",this.onMouseWheel,{passive:!1}):e.addEventListener("wheel",this.onMouseWheel,c),window&&u.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,c),window.top.addEventListener("mouseup",this.onMouseUpWindow,c)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,c),window.addEventListener("mouseup",this.onMouseUpWindow,c),this.isTop=!1}g.pointerLock&&(this.pointerLockChange=function(d){var f=s.target;s.locked=document.pointerLockElement===f||document.mozPointerLockElement===f||document.webkitPointerLockElement===f,u.onPointerLockChange(d)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&(e=this.isTop?window.top:window,e.removeEventListener("mousedown",this.onMouseDownWindow),e.removeEventListener("mouseup",this.onMouseUpWindow)),g.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});v.exports=r}),87078:((v,T,t)=>{v.exports={MouseManager:t(85098)}}),36210:((v,T,t)=>{var h=t(83419),g=t(8214),o=t(29747),a=new h({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=o,this.onTouchStartWindow=o,this.onTouchMove=o,this.onTouchEnd=o,this.onTouchEndWindow=o,this.onTouchCancel=o,this.onTouchCancelWindow=o,this.isTop=!0,e.events.once(g.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputTouch,this.target=r.inputTouchEventTarget,this.capture=r.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},startListeners:function(){var r=this.target;if(r){var e=this,s=this.manager,u=s.canvas,n=window&&window.focus&&s.game.config.autoFocus;this.onTouchMove=function(f){!f.defaultPrevented&&e.enabled&&s&&s.enabled&&(s.onTouchMove(f),e.capture&&f.cancelable&&f.preventDefault())},this.onTouchStart=function(f){n&&window.focus(),!f.defaultPrevented&&e.enabled&&s&&s.enabled&&(s.onTouchStart(f),e.capture&&f.cancelable&&f.target===u&&f.preventDefault())},this.onTouchStartWindow=function(f){!f.defaultPrevented&&e.enabled&&s&&s.enabled&&f.target!==u&&s.onTouchStart(f)},this.onTouchEnd=function(f){!f.defaultPrevented&&e.enabled&&s&&s.enabled&&(s.onTouchEnd(f),e.capture&&f.cancelable&&f.target===u&&f.preventDefault())},this.onTouchEndWindow=function(f){!f.defaultPrevented&&e.enabled&&s&&s.enabled&&f.target!==u&&s.onTouchEnd(f)},this.onTouchCancel=function(f){!f.defaultPrevented&&e.enabled&&s&&s.enabled&&(s.onTouchCancel(f),e.capture&&f.preventDefault())},this.onTouchCancelWindow=function(f){!f.defaultPrevented&&e.enabled&&s&&s.enabled&&s.onTouchCancel(f)};var l=this.capture,c={passive:!0},d={passive:!1};if(r.addEventListener("touchstart",this.onTouchStart,l?d:c),r.addEventListener("touchmove",this.onTouchMove,l?d:c),r.addEventListener("touchend",this.onTouchEnd,l?d:c),r.addEventListener("touchcancel",this.onTouchCancel,l?d:c),window&&s.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,d),window.top.addEventListener("touchend",this.onTouchEndWindow,d),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,d)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,d),window.addEventListener("touchend",this.onTouchEndWindow,d),window.addEventListener("touchcancel",this.onTouchCancelWindow,d),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("touchstart",this.onTouchStart),r.removeEventListener("touchmove",this.onTouchMove),r.removeEventListener("touchend",this.onTouchEnd),r.removeEventListener("touchcancel",this.onTouchCancel),window&&(r=this.isTop?window.top:window,r.removeEventListener("touchstart",this.onTouchStartWindow),r.removeEventListener("touchend",this.onTouchEndWindow),r.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});v.exports=a}),95618:((v,T,t)=>{v.exports={TouchManager:t(36210)}}),41299:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(54899),a=t(95540),r=t(98356),e=t(3374),s=t(84376),u=t(92638),n=new h({initialize:function(c,d){if(this.loader=c,this.cache=a(d,"cache",!1),this.type=a(d,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=a(d,"key",!1);var f=this.key;if(c.prefix&&c.prefix!==""&&(this.key=c.prefix+f),!this.key)throw new Error("Invalid File key: "+this.key);var m=a(d,"url");m===void 0?m=c.path+f+"."+a(d,"extension",""):typeof m=="string"&&!m.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(m=c.path+m),this.url=m,this.src="",this.xhrSettings=u(a(d,"responseType",void 0)),a(d,"xhrSettings",!1)&&(this.xhrSettings=e(this.xhrSettings,a(d,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?g.FILE_POPULATED:g.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(d,"config",{}),this.multiFile,this.linkFile,this.base64=typeof m=="string"&&m.indexOf("data:")===0,this.retryAttempts=a(d,"maxRetries",c.maxRetries)},setLink:function(l){this.linkFile=l,l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===g.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=g.FILE_LOADING,this.src=r(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=s(this,this.loader.xhr)}},onLoad:function(l,c){var d=l.responseURL&&this.loader.localSchemes.some(function(y){return l.responseURL.indexOf(y)===0}),f=d&&c.target.status===0,m=!(c.target&&c.target.status!==200)||f;l.readyState===4&&l.status>=400&&l.status<=599&&(m=!1),this.state=g.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,m)},onBase64Load:function(l){this.xhrLoader=l,this.state=g.FILE_LOADED,this.percentComplete=1,this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=g.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=g.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=g.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(l){if(this.state!==g.FILE_PENDING_DESTROY){l===void 0&&(l=this.data);var c=this.key,d=this.type;this.loader.emit(o.FILE_COMPLETE,c,d,l),this.loader.emit(o.FILE_KEY_COMPLETE+d+"-"+c,c,d,l),this.loader.flagForRemoval(this),this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});n.createObjectURL=function(l,c,d){if(typeof URL=="function")l.src=URL.createObjectURL(c);else{var f=new FileReader;f.onload=function(){l.removeAttribute("crossOrigin"),l.src="data:"+(c.type||d)+";base64,"+f.result.split(",")[1]},f.onerror=l.onerror,f.readAsDataURL(c)}},n.revokeObjectURL=function(l){typeof URL=="function"&&URL.revokeObjectURL(l.src)},v.exports=n}),74099:(v=>{var T={},t={install:function(h){for(var g in T)h[g]=T[g]},register:function(h,g){T[h]=g},destroy:function(){T={}}};v.exports=t}),98356:(v=>{var T=function(t,h){return t.url?t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:h+t.url:!1};v.exports=T}),74261:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(35072),a=t(50792),r=t(54899),e=t(74099),s=t(95540),u=t(35154),n=t(41212),l=t(37277),c=t(44594),d=t(92638),f=new h({Extends:a,initialize:function(y){a.call(this);var S=y.sys.game.config,C=y.sys.settings.loader;this.scene=y,this.systems=y.sys,this.cacheManager=y.sys.cache,this.textureManager=y.sys.textures,this.sceneManager=y.sys.game.scene,e.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(s(C,"baseURL",S.loaderBaseURL)),this.setPath(s(C,"path",S.loaderPath)),this.setPrefix(s(C,"prefix",S.loaderPrefix)),this.maxParallelDownloads=s(C,"maxParallelDownloads",S.loaderMaxParallelDownloads),this.xhr=d(s(C,"responseType",S.loaderResponseType),s(C,"async",S.loaderAsync),s(C,"user",S.loaderUser),s(C,"password",S.loaderPassword),s(C,"timeout",S.loaderTimeout),s(C,"withCredentials",S.loaderWithCredentials)),this.crossOrigin=s(C,"crossOrigin",S.loaderCrossOrigin),this.imageLoadType=s(C,"imageLoadType",S.loaderImageLoadType),this.localSchemes=s(C,"localScheme",S.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new o,this.inflight=new o,this.queue=new o,this._deleteQueue=new o,this.totalFailed=0,this.totalComplete=0,this.state=g.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=s(C,"maxRetries",S.loaderMaxRetries),y.sys.events.once(c.BOOT,this.boot,this),y.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.baseURL=m,this},setPath:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.path=m,this},setPrefix:function(m){return m===void 0&&(m=""),this.prefix=m,this},setCORS:function(m){return this.crossOrigin=m,this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++){var S=m[y];this.keyExists(S)||(this.list.set(S),this.emit(r.ADD,S.key,S.type,this,S),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var y=m.hasCacheConflict();return y||this.list.iterate(function(S){if(S.type===m.type&&S.key===m.key)return y=!0,!1}),!y&&this.isLoading()&&(this.inflight.iterate(function(S){if(S.type===m.type&&S.key===m.key)return y=!0,!1}),this.queue.iterate(function(S){if(S.type===m.type&&S.key===m.key)return y=!0,!1})),y},addPack:function(m,y){if(typeof y=="string"){var S=u(m,y);S&&(m={packKey:S})}var C=0,E=this.baseURL,P=this.path,A=this.prefix;for(var F in m)if(Object.prototype.hasOwnProperty.call(m,F)){var G=m[F],D=s(G,"baseURL",E),L=s(G,"path",P),b=s(G,"prefix",A),I=s(G,"files",null),N=s(G,"defaultType","void");if(Array.isArray(I)){this.setBaseURL(D),this.setPath(L),this.setPrefix(b);for(var Z=0;Z<I.length;Z++){var U=I[Z],W=U.hasOwnProperty("type")?U.type:N;this[W]&&(this[W](U),C++)}}}return this.setBaseURL(E),this.setPath(P),this.setPrefix(A),C>0},removePack:function(m,y){var S=this.systems.anims,C=this.cacheManager,E=this.textureManager,P={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},A;if(n(m))A=m;else if(A=C.json.get(m),!A){console.warn("Asset Pack not found in JSON cache:",m);return}y&&(A={_:A[y]});for(var F in A){var G=A[F],D=s(G,"prefix",""),L=s(G,"files"),b=s(G,"defaultType");if(Array.isArray(L))for(var I=0;I<L.length;I++){var N=L[I],Z=N.hasOwnProperty("type")?N.type:b;if(!Z){console.warn("No type:",N);continue}var U=D+N.key;if(Z==="animation"&&S.remove(U),!((Z==="aseprite"||Z==="atlas"||Z==="atlasXML"||Z==="htmlTexture"||Z==="image"||Z==="multiatlas"||Z==="spritesheet"||Z==="svg"||Z==="texture"||Z==="unityAtlas")&&(E.remove(U),!P[Z]))){if(Z==="pack"){this.removePack(U,N.dataKey);continue}if(Z==="spine"){var W=C.custom.spine.get(U);if(!W)continue;var X=W.prefix===void 0?"":W.prefix;C.custom.spine.remove(U);var V=C.custom.spineTextures.get(U);if(!V)continue;C.custom.spineTextures.remove(U);for(var O=0;O<V.pages.length;O++){var z=V.pages[O],B=X+z.name,Y=U+":"+B;E.exists(Y)?E.remove(Y):E.remove(B)}}var k=P[Z];if(k!==null){if(!k){console.warn("Unknown type:",Z);continue}var J=C[k];J.remove(U)}}}}},isLoading:function(){return this.state===g.LOADER_LOADING||this.state===g.LOADER_PROCESSING},isReady:function(){return this.state===g.LOADER_IDLE||this.state===g.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(r.START,this),this.list.size===0?this.loadComplete():(this.state=g.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(r.PROGRESS,this.progress)},update:function(){this.state===g.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if((m.state===g.FILE_POPULATED||m.state===g.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=this.crossOrigin),m.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,y){this.inflight&&(this.inflight.delete(m),this.updateProgress(),y?(this.totalComplete++,this.queue.set(m),this.emit(r.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(r.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(m.state===g.FILE_ERRORED?m.multiFile&&m.multiFile.onFileFailed(m):m.state===g.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&(m.multiFile.addToCache(),m.multiFile.pendingDestroy()):(m.addToCache(),m.pendingDestroy())),this.queue.delete(m),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(r.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=g.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(r.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,y){return this.save(JSON.stringify(m),y)},save:function(m,y,S){y===void 0&&(y="file.json"),S===void 0&&(S="application/json");var C=new Blob([m],{type:S}),E=URL.createObjectURL(C),P=document.createElement("a");return P.download=y,P.textContent="Download "+y,P.href=E,P.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var m=this.systems.game.config,y=this.systems.settings.loader;this.setBaseURL(s(y,"baseURL",m.loaderBaseURL)),this.setPath(s(y,"path",m.loaderPath)),this.setPrefix(s(y,"prefix",m.loaderPrefix)),this.state=g.LOADER_IDLE},shutdown:function(){this.reset(),this.state=g.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=g.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",f,"load"),v.exports=f}),3374:((v,T,t)=>{var h=t(79291),g=t(92638),o=function(a,r){var e=a===void 0?g():h({},a);if(r)for(var s in r)r[s]!==void 0&&(e[s]=r[s]);return e};v.exports=o}),26430:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(54899),a=new h({initialize:function(e,s,u,n){var l=[];n.forEach(function(f){f&&l.push(f)}),this.loader=e,this.type=s,this.key=u;var c=this.key;e.prefix&&e.prefix!==""&&(this.key=e.prefix+c),this.multiKeyIndex=e.multiKeyIndex++,this.files=l,this.state=g.FILE_PENDING,this.complete=!1,this.pending=l.length,this.failed=0,this.config={},this.baseURL=e.baseURL,this.path=e.path,this.prefix=e.prefix;for(var d=0;d<l.length;d++)l[d].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var e=this.files.indexOf(r);e!==-1&&this.pending--},onFileFailed:function(r){var e=this.files.indexOf(r);e!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,r.type,r.key))},pendingDestroy:function(){if(this.state!==g.FILE_PENDING_DESTROY){var r=this.key,e=this.type;this.loader.emit(o.FILE_COMPLETE,r,e),this.loader.emit(o.FILE_KEY_COMPLETE+e+"-"+r,r,e),this.loader.flagForRemoval(this);for(var s=0;s<this.files.length;s++)this.files[s].pendingDestroy();this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});v.exports=a}),84376:((v,T,t)=>{var h=t(3374),g=function(o,a){var r=h(a,o.xhrSettings);if(o.base64){var e=o.url.split(";base64,").pop()||o.url.split(",").pop(),s;o.xhrSettings.responseType==="arraybuffer"?s={response:Uint8Array.from(atob(e),function(l){return l.charCodeAt(0)}).buffer}:s={responseText:atob(e)},o.onBase64Load(s);return}var u=new XMLHttpRequest;if(u.open("GET",o.src,r.async,r.user,r.password),u.responseType=o.xhrSettings.responseType,u.timeout=r.timeout,r.headers)for(var n in r.headers)u.setRequestHeader(n,r.headers[n]);return r.header&&r.headerValue&&u.setRequestHeader(r.header,r.headerValue),r.requestedWith&&u.setRequestHeader("X-Requested-With",r.requestedWith),r.overrideMimeType&&u.overrideMimeType(r.overrideMimeType),r.withCredentials&&(u.withCredentials=!0),u.onload=o.onLoad.bind(o,u),u.onerror=o.onError.bind(o,u),u.onprogress=o.onProgress.bind(o),u.ontimeout=o.onError.bind(o,u),u.send(),u};v.exports=g}),92638:(v=>{var T=function(t,h,g,o,a,r){return t===void 0&&(t=""),h===void 0&&(h=!0),g===void 0&&(g=""),o===void 0&&(o=""),a===void 0&&(a=0),r===void 0&&(r=!1),{responseType:t,async:h,user:g,password:o,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}};v.exports=T}),23906:(v=>{var T={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};v.exports=T}),42155:(v=>{v.exports="addfile"}),38991:(v=>{v.exports="complete"}),27540:(v=>{v.exports="filecomplete"}),87464:(v=>{v.exports="filecomplete-"}),94486:(v=>{v.exports="loaderror"}),13035:(v=>{v.exports="load"}),38144:(v=>{v.exports="fileprogress"}),97520:(v=>{v.exports="postprocess"}),85595:(v=>{v.exports="progress"}),55680:(v=>{v.exports="start"}),54899:((v,T,t)=>{v.exports={ADD:t(42155),COMPLETE:t(38991),FILE_COMPLETE:t(27540),FILE_KEY_COMPLETE:t(87464),FILE_LOAD_ERROR:t(94486),FILE_LOAD:t(13035),FILE_PROGRESS:t(38144),POST_PROCESS:t(97520),PROGRESS:t(85595),START:t(55680)}}),14135:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(518),a=t(54899),r=new h({Extends:o,initialize:function(s,u,n,l,c){o.call(this,s,u,n,l,c),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),o.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});g.register("animation",function(e,s,u,n){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,s,n,u));return this}),v.exports=r}),76272:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(518),s=t(26430),u=new h({Extends:s,initialize:function(l,c,d,f,m,y){var S,C;if(r(c)){var E=c;c=o(E,"key"),S=new a(l,{key:c,url:o(E,"textureURL"),extension:o(E,"textureExtension","png"),normalMap:o(E,"normalMap"),xhrSettings:o(E,"textureXhrSettings")}),C=new e(l,{key:c,url:o(E,"atlasURL"),extension:o(E,"atlasExtension","json"),xhrSettings:o(E,"atlasXhrSettings")})}else S=new a(l,c,d,m),C=new e(l,c,f,y);S.linkFile?s.call(this,l,"atlasjson",c,[S,C,S.linkFile]):s.call(this,l,"atlasjson",c,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],l=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(n.key,n.data,l.data,c),l.addToCache(),this.complete=!0}}});g.register("aseprite",function(n,l,c,d,f){var m;if(Array.isArray(n))for(var y=0;y<n.length;y++)m=new u(this,n[y]),this.addFile(m.files);else m=new u(this,n,l,c,d,f),this.addFile(m.files);return this}),v.exports=u}),38734:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(518),s=t(26430),u=new h({Extends:s,initialize:function(l,c,d,f,m,y){var S,C;if(r(c)){var E=c;c=o(E,"key"),S=new a(l,{key:c,url:o(E,"textureURL"),extension:o(E,"textureExtension","png"),normalMap:o(E,"normalMap"),xhrSettings:o(E,"textureXhrSettings")}),C=new e(l,{key:c,url:o(E,"atlasURL"),extension:o(E,"atlasExtension","json"),xhrSettings:o(E,"atlasXhrSettings")})}else S=new a(l,c,d,m),C=new e(l,c,f,y);S.linkFile?s.call(this,l,"atlasjson",c,[S,C,S.linkFile]):s.call(this,l,"atlasjson",c,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],l=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(n.key,n.data,l.data,c),this.complete=!0}}});g.register("atlas",function(n,l,c,d,f){var m;if(Array.isArray(n))for(var y=0;y<n.length;y++)m=new u(this,n[y]),this.addFile(m.files);else m=new u(this,n,l,c,d,f),this.addFile(m.files);return this}),v.exports=u}),74599:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(26430),s=t(57318),u=new h({Extends:e,initialize:function(l,c,d,f,m,y){var S,C;if(r(c)){var E=c;c=o(E,"key"),S=new a(l,{key:c,url:o(E,"textureURL"),extension:o(E,"textureExtension","png"),normalMap:o(E,"normalMap"),xhrSettings:o(E,"textureXhrSettings")}),C=new s(l,{key:c,url:o(E,"atlasURL"),extension:o(E,"atlasExtension","xml"),xhrSettings:o(E,"atlasXhrSettings")})}else S=new a(l,c,d,m),C=new s(l,c,f,y);S.linkFile?e.call(this,l,"atlasxml",c,[S,C,S.linkFile]):e.call(this,l,"atlasxml",c,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],l=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(n.key,n.data,l.data,c),this.complete=!0}}});g.register("atlasXML",function(n,l,c,d,f){var m;if(Array.isArray(n))for(var y=0;y<n.length;y++)m=new u(this,n[y]),this.addFile(m.files);else m=new u(this,n,l,c,d,f),this.addFile(m.files);return this}),v.exports=u}),21097:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(89749),s=t(41212),u=new h({Extends:o,initialize:function(l,c,d,f,m){if(s(c)){var y=c;c=r(y,"key"),f=r(y,"xhrSettings"),m=r(y,"context",m)}var S={type:"audio",cache:l.cacheManager.audio,extension:d.type,responseType:"arraybuffer",key:c,url:d.url,xhrSettings:f,config:{context:m}};o.call(this,l,S)},onProcess:function(){this.state=g.FILE_PROCESSING;var n=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(l){n.data=l,n.onProcessComplete()},function(l){console.error("Error decoding audio: "+n.key+" - ",l?l.message:null),n.onProcessError()}),this.config.context=null}});u.create=function(n,l,c,d,f){var m=n.systems.game,y=m.config.audio,S=m.device.audio;s(l)&&(c=r(l,"url",[]),d=r(l,"config",{}));var C=u.getAudioURL(m,c);return C?S.webAudio&&!y.disableWebAudio?new u(n,l,C,f,m.sound.context):new e(n,l,C,d):(console.warn('No audio URLs for "%s" can play on this device',l),null)},u.getAudioURL=function(n,l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var d=r(l[c],"url",l[c]);if(d.indexOf("blob:")===0||d.indexOf("data:")===0)return{url:d,type:""};var f=d.match(/\.([a-zA-Z0-9]+)($|\?)/);if(f=r(l[c],"type",f?f[1]:"").toLowerCase(),n.device.audio[f])return{url:d,type:f}}return null},a.register("audio",function(n,l,c,d){var f=this.systems.game,m=f.config.audio,y=f.device.audio;if(m.noAudio||!y.webAudio&&!y.audioData)return this;var S;if(Array.isArray(n))for(var C=0;C<n.length;C++)S=u.create(this,n[C]),S&&this.addFile(S);else S=u.create(this,n,l,c,d),S&&this.addFile(S);return this}),v.exports=u}),89524:((v,T,t)=>{var h=t(21097),g=t(83419),o=t(74099),a=t(95540),r=t(41212),e=t(518),s=t(26430),u=new g({Extends:s,initialize:function(l,c,d,f,m,y,S){if(r(c)){var C=c;c=a(C,"key"),d=a(C,"jsonURL"),f=a(C,"audioURL"),m=a(C,"audioConfig"),y=a(C,"audioXhrSettings"),S=a(C,"jsonXhrSettings")}var E;if(!f)E=new e(l,c,d,S),s.call(this,l,"audiosprite",c,[E]),this.config.resourceLoad=!0,this.config.audioConfig=m,this.config.audioXhrSettings=y;else{var P=h.create(l,c,f,m,y);P&&(E=new e(l,c,d,S),s.call(this,l,"audiosprite",c,[P,E]),this.config.resourceLoad=!1)}},onFileComplete:function(n){var l=this.files.indexOf(n);if(l!==-1&&(this.pending--,this.config.resourceLoad&&n.type==="json"&&n.data.hasOwnProperty("resources"))){var c=n.data.resources,d=a(this.config,"audioConfig"),f=a(this.config,"audioXhrSettings"),m=h.create(this.loader,n.key,c,d,f);m&&(this.addToMultiFile(m),this.loader.addFile(m))}},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],l=this.files[1];n.addToCache(),l.addToCache(),this.complete=!0}}});o.register("audioSprite",function(n,l,c,d,f,m){var y=this.systems.game,S=y.config.audio,C=y.device.audio;if(S&&S.noAudio||!C.webAudio&&!C.audioData)return this;var E;if(Array.isArray(n))for(var P=0;P<n.length;P++)E=new u(this,n[P]),E.files&&this.addFile(E.files);else E=new u(this,n,l,c,d,f,m),E.files&&this.addFile(E.files);return this})}),85722:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d,f){var m="bin";if(e(l)){var y=l;l=r(y,"key"),c=r(y,"url"),d=r(y,"xhrSettings"),m=r(y,"extension",m),f=r(y,"dataType",f)}var S={type:"binary",cache:n.cacheManager.binary,extension:m,responseType:"arraybuffer",key:l,url:c,xhrSettings:d,config:{dataType:f}};o.call(this,n,S)},onProcess:function(){this.state=g.FILE_PROCESSING;var u=this.config.dataType;this.data=u?new u(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(u,n,l,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new s(this,u[d]));else this.addFile(new s(this,u,n,c,l));return this}),v.exports=s}),97025:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(26430),s=t(21859),u=t(57318),n=new h({Extends:e,initialize:function(c,d,f,m,y,S){var C,E;if(r(d)){var P=d;d=o(P,"key"),C=new a(c,{key:d,url:o(P,"textureURL"),extension:o(P,"textureExtension","png"),normalMap:o(P,"normalMap"),xhrSettings:o(P,"textureXhrSettings")}),E=new u(c,{key:d,url:o(P,"fontDataURL"),extension:o(P,"fontDataExtension","xml"),xhrSettings:o(P,"fontDataXhrSettings")})}else C=new a(c,d,f,y),E=new u(c,d,m,S);C.linkFile?e.call(this,c,"bitmapfont",d,[C,E,C.linkFile]):e.call(this,c,"bitmapfont",d,[C,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],c=this.files[1];l.addToCache();var d=l.cache.get(l.key),f=s(c.data,l.cache.getFrame(l.key),0,0,d);this.loader.cacheManager.bitmapFont.add(l.key,{data:f,texture:l.key,frame:null}),this.complete=!0}}});g.register("bitmapFont",function(l,c,d,f,m){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new n(this,l[S]),this.addFile(y.files);else y=new n(this,l,c,d,f,m),this.addFile(y.files);return this}),v.exports=n}),16024:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d){var f="css";if(e(l)){var m=l;l=r(m,"key"),c=r(m,"url"),d=r(m,"xhrSettings"),f=r(m,"extension",f)}var y={type:"script",cache:!1,extension:f,responseType:"text",key:l,url:c,xhrSettings:d};o.call(this,n,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(u,n,l){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new s(this,u[c]));else this.addFile(new s(this,u,n,l));return this}),v.exports=s}),69559:((v,T,t)=>{var h=t(38734),g=t(85722),o=t(83419),a=t(74099),r=t(95540),e=t(19550),s=t(41212),u=t(518),n=t(31403),l=t(46975),c=t(59327),d=t(26430),f=t(82038),m=t(55222),y=new o({Extends:d,initialize:function(C,E,P,A){if(P.multiAtlasURL){var F=new u(C,{key:E,url:P.multiAtlasURL,xhrSettings:A,config:P});d.call(this,C,"texture",E,[F])}else{var G=P.textureURL.substr(P.textureURL.length-3);P.type||(P.type=G.toLowerCase()==="ktx"?"KTX":"PVR");var D=new g(C,{key:E,url:P.textureURL,extension:G,xhrSettings:A,config:P});if(P.atlasURL){var L=new u(C,{key:E,url:P.atlasURL,xhrSettings:A,config:P});d.call(this,C,"texture",E,[D,L])}else d.call(this,C,"texture",E,[D])}this.config=P},onFileComplete:function(S){var C=this.files.indexOf(S);if(C!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(S.type==="json"&&S.data.hasOwnProperty("textures")){var E=S.data.textures,P=this.config,A=this.loader,F=A.baseURL,G=A.path,D=A.prefix,L=r(P,"multiBaseURL",this.baseURL),b=r(P,"multiPath",this.path),I=r(P,"prefix",this.prefix),N=r(P,"textureXhrSettings");L&&A.setBaseURL(L),b&&A.setPath(b),I&&A.setPrefix(I);for(var Z=0;Z<E.length;Z++){var U=E[Z].image,W="CMA"+this.multiKeyIndex+"_"+U,X=new g(A,W,U,N);if(this.addToMultiFile(X),A.addFile(X),E[Z].normalMap){var V=new g(A,W,E[Z].normalMap,N);V.type="normalMap",X.setLink(V),this.addToMultiFile(V),A.addFile(V)}}A.setBaseURL(F),A.setPath(G),A.setPrefix(D)}}},addToCache:function(){function S(L){console.warn('Compressed Texture Invalid: "'+F.key+'". '+L)}if(this.isReadyToProcess()){var C=this.config;if(C.multiAtlasURL)this.addMultiToCache();else{var E=this.loader.systems.renderer,P=this.loader.textureManager,A,F=this.files[0],G=this.files[1];if(C.type==="PVR"?A=f(F.data):C.type==="KTX"&&(A=n(F.data),A||S("KTX file contains unsupported format.")),A&&!m(A)&&(S("Texture dimensions failed verification. Check the texture format specifications for "+C.format+" 0x"+A.internalFormat.toString(16)+"."),A=null),A&&!E.supportsCompressedTexture(C.format,A.internalFormat)&&(S("Texture format "+C.format+" with internal format "+A.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),A=null),A){A.format=E.getCompressedTextureName(C.format,A.internalFormat);var D=G&&G.data?G.data:null;P.addCompressedTexture(F.key,A,D)}}this.complete=!0}},addMultiToCache:function(){for(var S=this.config,C=this.files[0],E=[],P=[],A=[],F=this.loader.systems.renderer,G=this.loader.textureManager,D,L=1;L<this.files.length;L++){var b=this.files[L];if(b.type!=="normalMap")for(var I=b.key.indexOf("_"),N=b.key.substr(I+1),Z=b.data,U=0;U<C.data.textures.length;U++){var W=C.data.textures[U];if(W.image===N){S.type==="PVR"?D=f(Z):S.type==="KTX"&&(D=n(Z)),D&&F.supportsCompressedTexture(S.format,D.internalFormat)&&(D.format=F.getCompressedTextureName(S.format,D.internalFormat),P.push(D),E.push(W),b.linkFile&&A.push(b.linkFile.data));break}}}A.length===0&&(A=void 0),G.addAtlasJSONArray(this.key,P,E,A),this.complete=!0}});a.register("texture",function(S,C,E){var P=this.systems.renderer,A=function(G,D,L,b){var I={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(s(D)){var N=D;D=r(N,"key"),L=r(N,"url"),b=r(N,"xhrSettings")}var Z=!1;for(var U in L)if(P.supportsCompressedTexture(U)){var W=L[U];typeof W=="string"?I.textureURL=W:I=l(W,I),I.format=U.toUpperCase(),Z=!0;break}if(!Z)console.warn("No supported compressed texture format or IMG fallback",D);else if(I.format==="IMG"){var X,V;I.multiAtlasURL?(V=new c(G,D,I.multiAtlasURL,I.multiPath,I.multiBaseURL,b),X=V.files):I.atlasURL?(V=new h(G,D,I.textureURL,I.atlasURL,b),X=V.files):X=new e(G,D,I.textureURL,b),G.addFile(X)}else{var O=new y(G,D,I,b);G.addFile(O.files)}};if(Array.isArray(S))for(var F=0;F<S.length;F++)A(this,S[F]);else A(this,S,C,E);return this}),v.exports=y}),87674:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(98356),s=t(41212),u=new h({Extends:o,initialize:function(l,c,d,f,m,y){var S="ttf";if(s(c)){var C=c;c=r(C,"key"),d=r(C,"url"),f=r(C,"format","truetype"),m=r(C,"descriptors",null),y=r(C,"xhrSettings"),S=r(C,"extension",S)}else f===void 0&&(f="truetype");var E={type:"font",cache:!1,extension:S,responseType:"text",key:c,url:d,xhrSettings:y};o.call(this,l,E),this.data={format:f,descriptors:m},this.state=g.FILE_POPULATED},onProcess:function(){this.state=g.FILE_PROCESSING,this.src=e(this,this.loader.baseURL);var n,l=this.key,c="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?n=new FontFace(l,c,this.data.descriptors):n=new FontFace(l,c);var d=this;n.load().then(function(){document.fonts.add(n),document.body.classList.add("fonts-loaded"),d.onProcessComplete()}).catch(function(){console.warn("Font failed to load",c),d.onProcessComplete()})}});a.register("font",function(n,l,c,d,f){if(Array.isArray(n))for(var m=0;m<n.length;m++)this.addFile(new u(this,n[m]));else this.addFile(new u(this,n,l,c,d,f));return this}),v.exports=u}),47931:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=t(73894),u=new h({Extends:o,initialize:function(l,c,d,f,m){var y="glsl";if(e(c)){var S=c;c=r(S,"key"),d=r(S,"url"),f=r(S,"shaderType","fragment"),m=r(S,"xhrSettings"),y=r(S,"extension",y)}else f===void 0&&(f="fragment");var C={type:"glsl",cache:l.cacheManager.shader,extension:y,responseType:"text",key:c,url:d,config:{shaderType:f},xhrSettings:m};o.call(this,l,C)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var n=this.data.split(`
`),l=this.extractBlock(n,0);if(l)for(;l;){var c=this.getShaderName(l.header),d=this.getShaderType(l.header),f=this.getShaderUniforms(l.header),m=l.shader;if(this.cache.has(c)){var y=this.cache.get(c);d==="fragment"?y.fragmentSrc=m:y.vertexSrc=m,y.uniforms||(y.uniforms=f)}else d==="fragment"?this.cache.add(c,new s(c,m,"",f)):this.cache.add(c,new s(c,"",m,f));l=this.extractBlock(n,l.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new s(this.key,this.data)):this.cache.add(this.key,new s(this.key,"",this.data))},getShaderName:function(n){for(var l=0;l<n.length;l++){var c=n[l].trim();if(c.substring(0,5)==="name:")return c.substring(5).trim()}return this.key},getShaderType:function(n){for(var l=0;l<n.length;l++){var c=n[l].trim();if(c.substring(0,5)==="type:")return c.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(n){for(var l={},c=0;c<n.length;c++){var d=n[c].trim();if(d.substring(0,8)==="uniform."){var f=d.indexOf(":");if(f){var m=d.substring(8,f);try{l[m]=JSON.parse(d.substring(f+1))}catch{console.warn("Invalid uniform JSON: "+m)}}}}return l},extractBlock:function(n,l){for(var c=-1,d=-1,f=-1,m=!1,y=!1,S=[],C=[],E=l;E<n.length;E++){var P=n[E].trim();if(P==="---")if(c===-1)c=E,m=!0;else if(m)d=E,m=!1,y=!0;else{y=!1;break}else m?S.push(P):y&&(C.push(P),f=E)}return!m&&d!==-1?{header:S,shader:C.join(`
`),offset:f}:null}});a.register("glsl",function(n,l,c,d){if(Array.isArray(n))for(var f=0;f<n.length;f++)this.addFile(new u(this,n[f]));else this.addFile(new u(this,n,l,c,d));return this}),v.exports=u}),89749:((v,T,t)=>{var h=t(83419),g=t(54899),o=t(41299),a=t(95540),r=t(98356),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d){if(e(l)){var f=l;l=a(f,"key"),d=a(f,"config",d)}var m={type:"audio",cache:n.cacheManager.audio,extension:c.type,key:l,url:c.url,config:d};o.call(this,n,m),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var u=0;u<this.data.length;u++){var n=this.data[u];n.oncanplaythrough=null,n.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(u){var n=u.target;n.oncanplaythrough=null,n.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(g.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var u=this.config&&this.config.instances||1;this.filesTotal=u,this.filesLoaded=0,this.percentComplete=0;for(var n=0;n<u;n++){var l=new Audio;l.dataset||(l.dataset={}),l.dataset.name=this.key+("0"+n).slice(-2),l.dataset.used="false",this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this)),this.data.push(l)}for(n=0;n<this.data.length;n++)l=this.data[n],l.src=r(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});v.exports=s}),88470:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d){var f="html";if(e(l)){var m=l;l=r(m,"key"),c=r(m,"url"),d=r(m,"xhrSettings"),f=r(m,"extension",f)}var y={type:"text",cache:n.cacheManager.html,extension:f,responseType:"text",key:l,url:c,xhrSettings:d};o.call(this,n,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(u,n,l){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new s(this,u[c]));else this.addFile(new s(this,u,n,l));return this}),v.exports=s}),14643:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d,f,m){d===void 0&&(d=512),f===void 0&&(f=512);var y="html";if(e(l)){var S=l;l=r(S,"key"),c=r(S,"url"),m=r(S,"xhrSettings"),y=r(S,"extension",y),d=r(S,"width",d),f=r(S,"height",f)}var C={type:"html",cache:n.textureManager,extension:y,responseType:"text",key:l,url:c,xhrSettings:m,config:{width:d,height:f}};o.call(this,n,C)},onProcess:function(){this.state=g.FILE_PROCESSING;var u=this.config.width,n=this.config.height,l=[];l.push('<svg width="'+u+'px" height="'+n+'px" viewBox="0 0 '+u+" "+n+'" xmlns="http://www.w3.org/2000/svg">'),l.push('<foreignObject width="100%" height="100%">'),l.push('<body xmlns="http://www.w3.org/1999/xhtml">'),l.push(this.xhrLoader.responseText),l.push("</body>"),l.push("</foreignObject>"),l.push("</svg>");var c=[l.join(`
`)],d=this;try{var f=new window.Blob(c,{type:"image/svg+xml;charset=utf-8"})}catch{d.state=g.FILE_ERRORED,d.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){o.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(d.data),d.onProcessError()},o.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});a.register("htmlTexture",function(u,n,l,c,d){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,n,l,c,d));return this}),v.exports=s}),19550:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=t(98356),u=new h({Extends:o,initialize:function n(l,c,d,f,m){var y="png",S;if(e(c)){var C=c;c=r(C,"key"),d=r(C,"url"),S=r(C,"normalMap"),f=r(C,"xhrSettings"),y=r(C,"extension",y),m=r(C,"frameConfig")}Array.isArray(d)&&(S=d[1],d=d[0]);var E={type:"image",cache:l.textureManager,extension:y,responseType:"blob",key:c,url:d,xhrSettings:f,config:m};if(o.call(this,l,E),S){var P=new n(l,this.key,S,f,m);P.type="normalMap",this.setLink(P),l.addFile(P)}this.useImageElementLoad=l.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var n=this;this.data.onload=function(){o.revokeObjectURL(n.data),n.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(n.data),n.onProcessError()},o.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var n=this.state;this.state=g.FILE_PROCESSING,n===g.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=g.FILE_LOADING,this.src=s(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var n=this;this.data.onload=function(){n.state=g.FILE_LOADED,n.loader.nextFile(n,!0)},this.data.onerror=function(){n.loader.nextFile(n,!1)},this.data.src=this.src},addToCache:function(){var n=this.linkFile;n?n.state>=g.FILE_COMPLETE&&(n.type==="spritesheet"?n.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,n.data,this.data):this.cache.addImage(this.key,this.data,n.data)):this.cache.addImage(this.key,this.data)}});a.register("image",function(n,l,c){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new u(this,n[d]));else this.addFile(new u(this,n,l,c));return this}),v.exports=u}),518:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(35154),s=t(41212),u=new h({Extends:o,initialize:function(l,c,d,f,m){var y="json";if(s(c)){var S=c;c=r(S,"key"),d=r(S,"url"),f=r(S,"xhrSettings"),y=r(S,"extension",y),m=r(S,"dataKey",m)}var C={type:"json",cache:l.cacheManager.json,extension:y,responseType:"text",key:c,url:d,xhrSettings:f,config:m};o.call(this,l,C),s(d)&&(m?this.data=e(d,m):this.data=d,this.state=g.FILE_POPULATED)},onProcess:function(){if(this.state!==g.FILE_POPULATED){this.state=g.FILE_PROCESSING;try{var n=JSON.parse(this.xhrLoader.responseText)}catch(c){throw this.onProcessError(),c}var l=this.config;typeof l=="string"?this.data=e(n,l,n):this.data=n}this.onProcessComplete()}});a.register("json",function(n,l,c,d){if(Array.isArray(n))for(var f=0;f<n.length;f++)this.addFile(new u(this,n[f]));else this.addFile(new u(this,n,l,d,c));return this}),v.exports=u}),59327:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(518),s=t(26430),u=new h({Extends:s,initialize:function(l,c,d,f,m,y,S){if(r(c)){var C=c;c=o(C,"key"),o(C,"url",!1)?d=o(C,"url"):d=o(C,"atlasURL"),y=o(C,"xhrSettings"),f=o(C,"path"),m=o(C,"baseURL"),S=o(C,"textureXhrSettings")}var E=new e(l,c,d,y);s.call(this,l,"multiatlas",c,[E]),this.config.path=f,this.config.baseURL=m,this.config.textureXhrSettings=S},onFileComplete:function(n){var l=this.files.indexOf(n);if(l!==-1&&(this.pending--,n.type==="json"&&n.data.hasOwnProperty("textures"))){var c=n.data.textures,d=this.config,f=this.loader,m=f.baseURL,y=f.path,S=f.prefix,C=o(d,"baseURL",this.baseURL),E=o(d,"path",this.path),P=o(d,"prefix",this.prefix),A=o(d,"textureXhrSettings");f.setBaseURL(C),f.setPath(E),f.setPrefix(P);for(var F=0;F<c.length;F++){var G=c[F].image,D="MA"+this.multiKeyIndex+"_"+G,L=new a(f,D,G,A);if(this.addToMultiFile(L),f.addFile(L),c[F].normalMap){var b=new a(f,D,c[F].normalMap,A);b.type="normalMap",L.setLink(b),this.addToMultiFile(b),f.addFile(b)}}f.setBaseURL(m),f.setPath(y),f.setPrefix(S)}},addToCache:function(){if(this.isReadyToProcess()){for(var n=this.files[0],l=[],c=[],d=[],f=1;f<this.files.length;f++){var m=this.files[f];if(m.type!=="normalMap")for(var y=m.key.indexOf("_"),S=m.key.substr(y+1),C=m.data,E=0;E<n.data.textures.length;E++){var P=n.data.textures[E];if(P.image===S){c.push(C),l.push(P),m.linkFile&&d.push(m.linkFile.data);break}}}d.length===0&&(d=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,c,l,d),this.complete=!0}}});g.register("multiatlas",function(n,l,c,d,f){var m;if(Array.isArray(n))for(var y=0;y<n.length;y++)m=new u(this,n[y]),this.addFile(m.files);else m=new u(this,n,l,c,d,f),this.addFile(m.files);return this}),v.exports=u}),99297:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(41212),r=t(26430),e=t(34328),s=new h({Extends:r,initialize:function(n,l,c,d){var f="js",m=[];if(a(l)){var y=l;l=o(y,"key"),c=o(y,"url"),d=o(y,"xhrSettings"),f=o(y,"extension",f)}Array.isArray(c)||(c=[c]);for(var S=0;S<c.length;S++){var C=new e(n,{key:l+"_"+S.toString(),url:c[S],extension:f,xhrSettings:d});C.onProcess=function(){this.onProcessComplete()},m.push(C)}r.call(this,n,"scripts",l,m)},addToCache:function(){if(this.isReadyToProcess()){for(var u=0;u<this.files.length;u++){var n=this.files[u];n.data=document.createElement("script"),n.data.language="javascript",n.data.type="text/javascript",n.data.defer=!1,n.data.text=n.xhrLoader.responseText,document.head.appendChild(n.data)}this.complete=!0}}});g.register("scripts",function(u,n,l){var c;if(Array.isArray(u))for(var d=0;d<u.length;d++)c=new s(this,u[d]),this.addFile(c.files);else c=new s(this,u,n,l),this.addFile(c.files);return this}),v.exports=s}),41846:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(41212),r=t(26430),e=t(85048),s=t(61485),u=t(78776),n=new h({Extends:r,initialize:function(c,d,f,m,y,S){var C,E,P=c.cacheManager.obj;if(a(d)){var A=d;d=o(A,"key"),C=new u(c,{key:d,type:"obj",cache:P,url:o(A,"url"),extension:o(A,"extension","obj"),xhrSettings:o(A,"xhrSettings"),config:{flipUV:o(A,"flipUV",y)}}),m=o(A,"matURL"),m&&(E=new u(c,{key:d,type:"mat",cache:P,url:m,extension:o(A,"matExtension","mat"),xhrSettings:o(A,"xhrSettings")}))}else C=new u(c,{key:d,url:f,type:"obj",cache:P,extension:"obj",xhrSettings:S,config:{flipUV:y}}),m&&(E=new u(c,{key:d,url:m,type:"mat",cache:P,extension:"mat",xhrSettings:S}));r.call(this,c,"obj",d,[C,E])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],c=this.files[1],d=e(l.data,l.config.flipUV);c&&(d.materials=s(c.data)),l.cache.add(l.key,d),this.complete=!0}}});g.register("obj",function(l,c,d,f,m){var y;if(Array.isArray(l))for(var S=0;S<l.length;S++)y=new n(this,l[S]),this.addFile(y.files);else y=new n(this,l,c,d,f,m),this.addFile(y.files);return this}),v.exports=n}),58610:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(74099),a=t(518),r=new h({Extends:a,initialize:function(s,u,n,l,c){a.call(this,s,u,n,l,c),this.type="packfile"},onProcess:function(){if(this.state!==g.FILE_POPULATED&&(this.state=g.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var e={};e[this.config]=this.data,this.data=e}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});o.register("pack",function(e,s,u,n){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,s,n,u));return this}),v.exports=r}),48988:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d,f,m){var y="js";if(e(l)){var S=l;l=r(S,"key"),c=r(S,"url"),m=r(S,"xhrSettings"),y=r(S,"extension",y),d=r(S,"start"),f=r(S,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:l,url:c,xhrSettings:m,config:{start:d,mapping:f}};o.call(this,n,C),typeof c=="function"&&(this.data=c,this.state=g.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,n=this.config,l=r(n,"start",!1),c=r(n,"mapping",null);if(this.state===g.FILE_POPULATED)u.install(this.key,this.data,l,c);else{this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var d=u.install(this.key,window[this.key],l,c);(l||c)&&(this.loader.systems[c]=d,this.loader.scene[c]=d)}this.onProcessComplete()}});a.register("plugin",function(u,n,l,c,d){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,n,l,c,d));return this}),v.exports=s}),67397:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d,f){var m="svg";if(e(l)){var y=l;l=r(y,"key"),c=r(y,"url"),d=r(y,"svgConfig",{}),f=r(y,"xhrSettings"),m=r(y,"extension",m)}var S={type:"svg",cache:n.textureManager,extension:m,responseType:"text",key:l,url:c,xhrSettings:f,config:{width:r(d,"width"),height:r(d,"height"),scale:r(d,"scale")}};o.call(this,n,S)},onProcess:function(){this.state=g.FILE_PROCESSING;var u=this.xhrLoader.responseText,n=[u],l=this.config.width,c=this.config.height,d=this.config.scale;t:if(l&&c||d){var f=null,m=new DOMParser;f=m.parseFromString(u,"text/xml");var y=f.getElementsByTagName("svg")[0],S=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),E=parseFloat(y.getAttribute("height"));if(!S&&C&&E)y.setAttribute("viewBox","0  0 "+C+" "+E);else if(S&&!C&&!E){var P=y.getAttribute("viewBox").split(/\s+|,/);C=P[2],E=P[3]}if(d)if(C&&E)l=C*d,c=E*d;else break t;y.setAttribute("width",l.toString()+"px"),y.setAttribute("height",c.toString()+"px"),n=[new XMLSerializer().serializeToString(y)]}try{var A=new window.Blob(n,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var F=this,G=!1;this.data.onload=function(){G||o.revokeObjectURL(F.data),F.onProcessComplete()},this.data.onerror=function(){G?F.onProcessError():(G=!0,o.revokeObjectURL(F.data),F.data.src="data:image/svg+xml,"+encodeURIComponent(n.join("")))},o.createObjectURL(this.data,A,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});a.register("svg",function(u,n,l,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new s(this,u[d]));else this.addFile(new s(this,u,n,l,c));return this}),v.exports=s}),88423:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d){var f="js";if(e(l)){var m=l;l=r(m,"key"),c=r(m,"url"),d=r(m,"xhrSettings"),f=r(m,"extension",f)}var y={type:"text",extension:f,responseType:"text",key:l,url:c,xhrSettings:d};o.call(this,n,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),n=eval;this.loader.sceneManager.add(this.key,n(u)),this.complete=!0}});a.register("sceneFile",function(u,n,l){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new s(this,u[c]));else this.addFile(new s(this,u,n,l));return this}),v.exports=s}),56812:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d,f,m){var y="js";if(e(l)){var S=l;l=r(S,"key"),c=r(S,"url"),m=r(S,"xhrSettings"),y=r(S,"extension",y),d=r(S,"systemKey"),f=r(S,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:l,url:c,xhrSettings:m,config:{systemKey:d,sceneKey:f}};o.call(this,n,C),typeof c=="function"&&(this.data=c,this.state=g.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,n=this.config,l=this.key,c=r(n,"systemKey",l),d=r(n,"sceneKey",l);this.state===g.FILE_POPULATED?u.installScenePlugin(c,this.data,d,this.loader.scene,!0):(this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),u.installScenePlugin(c,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(u,n,l,c,d){if(Array.isArray(u))for(var f=0;f<u.length;f++)this.addFile(new s(this,u[f]));else this.addFile(new s(this,u,n,l,c,d));return this}),v.exports=s}),34328:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d,f){var m="js";if(e(l)){var y=l;l=r(y,"key"),c=r(y,"url"),d=r(y,"type","script"),f=r(y,"xhrSettings"),m=r(y,"extension",m)}else d===void 0&&(d="script");var S={type:d,cache:!1,extension:m,responseType:"text",key:l,url:c,xhrSettings:f};o.call(this,n,S)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(u,n,l,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new s(this,u[d]));else this.addFile(new s(this,u,n,l,c));return this}),v.exports=s}),85035:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(74099),a=t(19550),r=new h({Extends:a,initialize:function(s,u,n,l,c){a.call(this,s,u,n,c,l),this.type="spritesheet"},addToCache:function(){var e=this.linkFile;e?e.state>=g.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,e.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,e.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});o.register("spritesheet",function(e,s,u,n){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new r(this,e[l]));else this.addFile(new r(this,e,s,u,n));return this}),v.exports=r}),78776:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=new h({Extends:o,initialize:function(n,l,c,d){var f="text",m="txt",y=n.cacheManager.text;if(e(l)){var S=l;l=r(S,"key"),c=r(S,"url"),d=r(S,"xhrSettings"),m=r(S,"extension",m),f=r(S,"type",f),y=r(S,"cache",y)}var C={type:f,cache:y,extension:m,responseType:"text",key:l,url:c,xhrSettings:d};o.call(this,n,C)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(u,n,l){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new s(this,u[c]));else this.addFile(new s(this,u,n,l));return this}),v.exports=s}),49477:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=t(80341),u=new h({Extends:o,initialize:function(l,c,d,f){var m="csv";if(e(c)){var y=c;c=r(y,"key"),d=r(y,"url"),f=r(y,"xhrSettings"),m=r(y,"extension",m)}var S={type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:m,responseType:"text",key:c,url:d,xhrSettings:f};o.call(this,l,S),this.tilemapFormat=s.CSV},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var n={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,n)}});a.register("tilemapCSV",function(n,l,c){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new u(this,n[d]));else this.addFile(new u(this,n,l,c));return this}),v.exports=u}),40807:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(518),a=t(80341),r=new h({Extends:o,initialize:function(s,u,n,l){o.call(this,s,u,n,l),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var e={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,e)}});g.register("tilemapImpact",function(e,s,u){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new r(this,e[n]));else this.addFile(new r(this,e,s,u));return this}),v.exports=r}),56775:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(518),a=t(80341),r=new h({Extends:o,initialize:function(s,u,n,l){o.call(this,s,u,n,l),this.type="tilemapJSON",this.cache=s.cacheManager.tilemap},addToCache:function(){var e={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,e)}});g.register("tilemapTiledJSON",function(e,s,u){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new r(this,e[n]));else this.addFile(new r(this,e,s,u));return this}),v.exports=r}),25771:((v,T,t)=>{var h=t(83419),g=t(74099),o=t(95540),a=t(19550),r=t(41212),e=t(26430),s=t(78776),u=new h({Extends:e,initialize:function(l,c,d,f,m,y){var S,C;if(r(c)){var E=c;c=o(E,"key"),S=new a(l,{key:c,url:o(E,"textureURL"),extension:o(E,"textureExtension","png"),normalMap:o(E,"normalMap"),xhrSettings:o(E,"textureXhrSettings")}),C=new s(l,{key:c,url:o(E,"atlasURL"),extension:o(E,"atlasExtension","txt"),xhrSettings:o(E,"atlasXhrSettings")})}else S=new a(l,c,d,m),C=new s(l,c,f,y);S.linkFile?e.call(this,l,"unityatlas",c,[S,C,S.linkFile]):e.call(this,l,"unityatlas",c,[S,C])},addToCache:function(){if(this.isReadyToProcess()){var n=this.files[0],l=this.files[1],c=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(n.key,n.data,l.data,c),this.complete=!0}}});g.register("unityAtlas",function(n,l,c,d,f){var m;if(Array.isArray(n))for(var y=0;y<n.length;y++)m=new u(this,n[y]),this.addFile(m.files);else m=new u(this,n,l,c,d,f),this.addFile(m.files);return this}),v.exports=u}),33720:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(98356),e=t(95540),s=t(41212),u=new h({Extends:o,initialize:function(l,c,d,f){if(f===void 0&&(f=!1),s(c)){var m=c;c=e(m,"key"),d=e(m,"url",[]),f=e(m,"noAudio",!1)}var y=l.systems.game.device.video.getVideoURL(d);y||console.warn("VideoFile: No supported format for "+c);var S={type:"video",cache:l.cacheManager.video,extension:y.type,key:c,url:y.url,config:{noAudio:f}};o.call(this,l,S)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=r(this,this.loader.baseURL),this.state=g.FILE_LOADED,this.loader.nextFile(this,!0)}});a.register("video",function(n,l,c){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new u(this,n[d]));else this.addFile(new u(this,n,l,c));return this}),v.exports=u}),57318:((v,T,t)=>{var h=t(83419),g=t(23906),o=t(41299),a=t(74099),r=t(95540),e=t(41212),s=t(56836),u=new h({Extends:o,initialize:function(l,c,d,f){var m="xml";if(e(c)){var y=c;c=r(y,"key"),d=r(y,"url"),f=r(y,"xhrSettings"),m=r(y,"extension",m)}var S={type:"xml",cache:l.cacheManager.xml,extension:m,responseType:"text",key:c,url:d,xhrSettings:f};o.call(this,l,S)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=s(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});a.register("xml",function(n,l,c){if(Array.isArray(n))for(var d=0;d<n.length;d++)this.addFile(new u(this,n[d]));else this.addFile(new u(this,n,l,c));return this}),v.exports=u}),64589:((v,T,t)=>{v.exports={AnimationJSONFile:t(14135),AsepriteFile:t(76272),AtlasJSONFile:t(38734),AtlasXMLFile:t(74599),AudioFile:t(21097),AudioSpriteFile:t(89524),BinaryFile:t(85722),BitmapFontFile:t(97025),CompressedTextureFile:t(69559),CSSFile:t(16024),FontFile:t(87674),GLSLFile:t(47931),HTML5AudioFile:t(89749),HTMLFile:t(88470),HTMLTextureFile:t(14643),ImageFile:t(19550),JSONFile:t(518),MultiAtlasFile:t(59327),MultiScriptFile:t(99297),OBJFile:t(41846),PackFile:t(58610),PluginFile:t(48988),SceneFile:t(88423),ScenePluginFile:t(56812),ScriptFile:t(34328),SpriteSheetFile:t(85035),SVGFile:t(67397),TextFile:t(78776),TilemapCSVFile:t(49477),TilemapImpactFile:t(40807),TilemapJSONFile:t(56775),UnityAtlasFile:t(25771),VideoFile:t(33720),XMLFile:t(57318)}}),57777:((v,T,t)=>{var h=t(23906),g=t(79291),o={Events:t(54899),FileTypes:t(64589),File:t(41299),FileTypesManager:t(74099),GetURL:t(98356),LoaderPlugin:t(74261),MergeXHRSettings:t(3374),MultiFile:t(26430),XHRLoader:t(84376),XHRSettings:t(92638)};o=g(!1,o,h),v.exports=o}),53307:(v=>{var T=function(t){for(var h=0,g=0;g<t.length;g++)h+=+t[g];return h/t.length};v.exports=T}),85710:((v,T,t)=>{var h=t(6411),g=function(o,a){return h(o)/h(a)/h(o-a)};v.exports=g}),30976:(v=>{var T=function(t,h){return Math.floor(Math.random()*(h-t+1)+t)};v.exports=T}),87842:(v=>{var T=function(t,h,g,o,a){var r=(o-h)*.5,e=(a-g)*.5,s=t*t,u=t*s;return(2*g-2*o+r+e)*u+(-3*g+3*o-2*r-e)*s+r*t+g};v.exports=T}),26302:(v=>{var T=function(t,h,g){h===void 0&&(h=0),g===void 0&&(g=10);var o=Math.pow(g,-h);return Math.ceil(t*o)/o};v.exports=T}),45319:(v=>{var T=function(t,h,g){return Math.max(h,Math.min(g,t))};v.exports=T}),39506:((v,T,t)=>{var h=t(36383),g=function(o){return o*h.DEG_TO_RAD};v.exports=g}),61241:(v=>{var T=function(t,h){return Math.abs(t-h)};v.exports=T}),38857:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(37867),a=t(29747),r=new o,e=new g({initialize:function s(u,n,l,c){u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c=s.DefaultOrder),this._x=u,this._y=n,this._z=l,this._order=c,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(s){this._x=s,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(s){this._y=s,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(s){this._z=s,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(s){this._order=s,this.onChangeCallback(this)}},set:function(s,u,n,l){return l===void 0&&(l=this._order),this._x=s,this._y=u,this._z=n,this._order=l,this.onChangeCallback(this),this},copy:function(s){return this.set(s.x,s.y,s.z,s.order)},setFromQuaternion:function(s,u,n){return u===void 0&&(u=this._order),n===void 0&&(n=!1),r.fromQuat(s),this.setFromRotationMatrix(r,u,n)},setFromRotationMatrix:function(s,u,n){u===void 0&&(u=this._order),n===void 0&&(n=!1);var l=s.val,c=l[0],d=l[4],f=l[8],m=l[1],y=l[5],S=l[9],C=l[2],E=l[6],P=l[10],A=0,F=0,G=0,D=.99999;switch(u){case"XYZ":{F=Math.asin(h(f,-1,1)),Math.abs(f)<D?(A=Math.atan2(-S,P),G=Math.atan2(-d,c)):A=Math.atan2(E,y);break}case"YXZ":{A=Math.asin(-h(S,-1,1)),Math.abs(S)<D?(F=Math.atan2(f,P),G=Math.atan2(m,y)):F=Math.atan2(-C,c);break}case"ZXY":{A=Math.asin(h(E,-1,1)),Math.abs(E)<D?(F=Math.atan2(-C,P),G=Math.atan2(-d,y)):G=Math.atan2(m,c);break}case"ZYX":{F=Math.asin(-h(C,-1,1)),Math.abs(C)<D?(A=Math.atan2(E,P),G=Math.atan2(m,c)):G=Math.atan2(-d,y);break}case"YZX":{G=Math.asin(h(m,-1,1)),Math.abs(m)<D?(A=Math.atan2(-S,y),F=Math.atan2(-C,c)):F=Math.atan2(f,P);break}case"XZY":{G=Math.asin(-h(d,-1,1)),Math.abs(d)<D?(A=Math.atan2(E,y),F=Math.atan2(f,c)):A=Math.atan2(-S,P);break}}return this._x=A,this._y=F,this._z=G,this._order=u,n&&this.onChangeCallback(this),this}});e.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],e.DefaultOrder="XYZ",v.exports=e}),6411:(v=>{var T=function(t){if(t===0)return 1;for(var h=t;--t;)h*=t;return h};v.exports=T}),99472:(v=>{var T=function(t,h){return Math.random()*(h-t)+t};v.exports=T}),77623:(v=>{var T=function(t,h,g){h===void 0&&(h=0),g===void 0&&(g=10);var o=Math.pow(g,-h);return Math.floor(t*o)/o};v.exports=T}),62945:((v,T,t)=>{var h=t(45319),g=function(o,a,r){return o=h(o,0,1),(r-a)*o+a};v.exports=g}),38265:(v=>{var T=function(t,h){return t/h/1e3};v.exports=T}),78702:(v=>{var T=function(t){return t==parseFloat(t)?!(t%2):void 0};v.exports=T}),94883:(v=>{var T=function(t){return t===parseFloat(t)?!(t%2):void 0};v.exports=T}),28915:(v=>{var T=function(t,h,g){return(h-t)*g+t};v.exports=T}),94908:(v=>{var T=function(t,h,g){return g===void 0&&(g=0),t.clone().lerp(h,g)};v.exports=T}),94434:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a){this.val=new Float32Array(9),a?this.copy(a):this.identity()},clone:function(){return new g(this)},set:function(o){return this.copy(o)},copy:function(o){var a=this.val,r=o.val;return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],this},fromMat4:function(o){var a=o.val,r=this.val;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[4],r[4]=a[5],r[5]=a[6],r[6]=a[8],r[7]=a[9],r[8]=a[10],this},fromArray:function(o){var a=this.val;return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],this},identity:function(){var o=this.val;return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=1,o[5]=0,o[6]=0,o[7]=0,o[8]=1,this},transpose:function(){var o=this.val,a=o[1],r=o[2],e=o[5];return o[1]=o[3],o[2]=o[6],o[3]=a,o[5]=o[7],o[6]=r,o[7]=e,this},invert:function(){var o=this.val,a=o[0],r=o[1],e=o[2],s=o[3],u=o[4],n=o[5],l=o[6],c=o[7],d=o[8],f=d*u-n*c,m=-d*s+n*l,y=c*s-u*l,S=a*f+r*m+e*y;return S?(S=1/S,o[0]=f*S,o[1]=(-d*r+e*c)*S,o[2]=(n*r-e*u)*S,o[3]=m*S,o[4]=(d*a-e*l)*S,o[5]=(-n*a+e*s)*S,o[6]=y*S,o[7]=(-c*a+r*l)*S,o[8]=(u*a-r*s)*S,this):null},adjoint:function(){var o=this.val,a=o[0],r=o[1],e=o[2],s=o[3],u=o[4],n=o[5],l=o[6],c=o[7],d=o[8];return o[0]=u*d-n*c,o[1]=e*c-r*d,o[2]=r*n-e*u,o[3]=n*l-s*d,o[4]=a*d-e*l,o[5]=e*s-a*n,o[6]=s*c-u*l,o[7]=r*l-a*c,o[8]=a*u-r*s,this},determinant:function(){var o=this.val,a=o[0],r=o[1],e=o[2],s=o[3],u=o[4],n=o[5],l=o[6],c=o[7],d=o[8];return a*(d*u-n*c)+r*(-d*s+n*l)+e*(c*s-u*l)},multiply:function(o){var a=this.val,r=a[0],e=a[1],s=a[2],u=a[3],n=a[4],l=a[5],c=a[6],d=a[7],f=a[8],m=o.val,y=m[0],S=m[1],C=m[2],E=m[3],P=m[4],A=m[5],F=m[6],G=m[7],D=m[8];return a[0]=y*r+S*u+C*c,a[1]=y*e+S*n+C*d,a[2]=y*s+S*l+C*f,a[3]=E*r+P*u+A*c,a[4]=E*e+P*n+A*d,a[5]=E*s+P*l+A*f,a[6]=F*r+G*u+D*c,a[7]=F*e+G*n+D*d,a[8]=F*s+G*l+D*f,this},translate:function(o){var a=this.val,r=o.x,e=o.y;return a[6]=r*a[0]+e*a[3]+a[6],a[7]=r*a[1]+e*a[4]+a[7],a[8]=r*a[2]+e*a[5]+a[8],this},rotate:function(o){var a=this.val,r=a[0],e=a[1],s=a[2],u=a[3],n=a[4],l=a[5],c=Math.sin(o),d=Math.cos(o);return a[0]=d*r+c*u,a[1]=d*e+c*n,a[2]=d*s+c*l,a[3]=d*u-c*r,a[4]=d*n-c*e,a[5]=d*l-c*s,this},scale:function(o){var a=this.val,r=o.x,e=o.y;return a[0]=r*a[0],a[1]=r*a[1],a[2]=r*a[2],a[3]=e*a[3],a[4]=e*a[4],a[5]=e*a[5],this},fromQuat:function(o){var a=o.x,r=o.y,e=o.z,s=o.w,u=a+a,n=r+r,l=e+e,c=a*u,d=a*n,f=a*l,m=r*n,y=r*l,S=e*l,C=s*u,E=s*n,P=s*l,A=this.val;return A[0]=1-(m+S),A[3]=d+P,A[6]=f-E,A[1]=d-P,A[4]=1-(c+S),A[7]=y+C,A[2]=f+E,A[5]=y-C,A[8]=1-(c+m),this},normalFromMat4:function(o){var a=o.val,r=this.val,e=a[0],s=a[1],u=a[2],n=a[3],l=a[4],c=a[5],d=a[6],f=a[7],m=a[8],y=a[9],S=a[10],C=a[11],E=a[12],P=a[13],A=a[14],F=a[15],G=e*c-s*l,D=e*d-u*l,L=e*f-n*l,b=s*d-u*c,I=s*f-n*c,N=u*f-n*d,Z=m*P-y*E,U=m*A-S*E,W=m*F-C*E,X=y*A-S*P,V=y*F-C*P,O=S*F-C*A,z=G*O-D*V+L*X+b*W-I*U+N*Z;return z?(z=1/z,r[0]=(c*O-d*V+f*X)*z,r[1]=(d*W-l*O-f*U)*z,r[2]=(l*V-c*W+f*Z)*z,r[3]=(u*V-s*O-n*X)*z,r[4]=(e*O-u*W+n*U)*z,r[5]=(s*W-e*V-n*Z)*z,r[6]=(P*N-A*I+F*b)*z,r[7]=(A*L-E*N-F*D)*z,r[8]=(E*I-P*L+F*G)*z,this):null}});v.exports=g}),37867:((v,T,t)=>{var h=t(83419),g=t(25836),o=1e-6,a=new h({initialize:function(c){this.val=new Float32Array(16),c?this.copy(c):this.identity()},clone:function(){return new a(this)},set:function(l){return this.copy(l)},setValues:function(l,c,d,f,m,y,S,C,E,P,A,F,G,D,L,b){var I=this.val;return I[0]=l,I[1]=c,I[2]=d,I[3]=f,I[4]=m,I[5]=y,I[6]=S,I[7]=C,I[8]=E,I[9]=P,I[10]=A,I[11]=F,I[12]=G,I[13]=D,I[14]=L,I[15]=b,this},copy:function(l){var c=l.val;return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},fromArray:function(l){return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(l,c,d){var f=r.fromQuat(d),m=f.val,y=c.x,S=c.y,C=c.z;return this.setValues(m[0]*y,m[1]*y,m[2]*y,0,m[4]*S,m[5]*S,m[6]*S,0,m[8]*C,m[9]*C,m[10]*C,0,l.x,l.y,l.z,1)},xyz:function(l,c,d){this.identity();var f=this.val;return f[12]=l,f[13]=c,f[14]=d,this},scaling:function(l,c,d){this.zero();var f=this.val;return f[0]=l,f[5]=c,f[10]=d,f[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var l=this.val,c=l[1],d=l[2],f=l[3],m=l[6],y=l[7],S=l[11];return l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=c,l[6]=l[9],l[7]=l[13],l[8]=d,l[9]=m,l[11]=l[14],l[12]=f,l[13]=y,l[14]=S,this},getInverse:function(l){return this.copy(l),this.invert()},invert:function(){var l=this.val,c=l[0],d=l[1],f=l[2],m=l[3],y=l[4],S=l[5],C=l[6],E=l[7],P=l[8],A=l[9],F=l[10],G=l[11],D=l[12],L=l[13],b=l[14],I=l[15],N=c*S-d*y,Z=c*C-f*y,U=c*E-m*y,W=d*C-f*S,X=d*E-m*S,V=f*E-m*C,O=P*L-A*D,z=P*b-F*D,B=P*I-G*D,Y=A*b-F*L,k=A*I-G*L,J=F*I-G*b,j=N*J-Z*k+U*Y+W*B-X*z+V*O;return j?(j=1/j,this.setValues((S*J-C*k+E*Y)*j,(f*k-d*J-m*Y)*j,(L*V-b*X+I*W)*j,(F*X-A*V-G*W)*j,(C*B-y*J-E*z)*j,(c*J-f*B+m*z)*j,(b*U-D*V-I*Z)*j,(P*V-F*U+G*Z)*j,(y*k-S*B+E*O)*j,(d*B-c*k-m*O)*j,(D*X-L*U+I*N)*j,(A*U-P*X-G*N)*j,(S*z-y*Y-C*O)*j,(c*Y-d*z+f*O)*j,(L*Z-D*W-b*N)*j,(P*W-A*Z+F*N)*j)):this},adjoint:function(){var l=this.val,c=l[0],d=l[1],f=l[2],m=l[3],y=l[4],S=l[5],C=l[6],E=l[7],P=l[8],A=l[9],F=l[10],G=l[11],D=l[12],L=l[13],b=l[14],I=l[15];return this.setValues(S*(F*I-G*b)-A*(C*I-E*b)+L*(C*G-E*F),-(d*(F*I-G*b)-A*(f*I-m*b)+L*(f*G-m*F)),d*(C*I-E*b)-S*(f*I-m*b)+L*(f*E-m*C),-(d*(C*G-E*F)-S*(f*G-m*F)+A*(f*E-m*C)),-(y*(F*I-G*b)-P*(C*I-E*b)+D*(C*G-E*F)),c*(F*I-G*b)-P*(f*I-m*b)+D*(f*G-m*F),-(c*(C*I-E*b)-y*(f*I-m*b)+D*(f*E-m*C)),c*(C*G-E*F)-y*(f*G-m*F)+P*(f*E-m*C),y*(A*I-G*L)-P*(S*I-E*L)+D*(S*G-E*A),-(c*(A*I-G*L)-P*(d*I-m*L)+D*(d*G-m*A)),c*(S*I-E*L)-y*(d*I-m*L)+D*(d*E-m*S),-(c*(S*G-E*A)-y*(d*G-m*A)+P*(d*E-m*S)),-(y*(A*b-F*L)-P*(S*b-C*L)+D*(S*F-C*A)),c*(A*b-F*L)-P*(d*b-f*L)+D*(d*F-f*A),-(c*(S*b-C*L)-y*(d*b-f*L)+D*(d*C-f*S)),c*(S*F-C*A)-y*(d*F-f*A)+P*(d*C-f*S))},determinant:function(){var l=this.val,c=l[0],d=l[1],f=l[2],m=l[3],y=l[4],S=l[5],C=l[6],E=l[7],P=l[8],A=l[9],F=l[10],G=l[11],D=l[12],L=l[13],b=l[14],I=l[15],N=c*S-d*y,Z=c*C-f*y,U=c*E-m*y,W=d*C-f*S,X=d*E-m*S,V=f*E-m*C,O=P*L-A*D,z=P*b-F*D,B=P*I-G*D,Y=A*b-F*L,k=A*I-G*L,J=F*I-G*b;return N*J-Z*k+U*Y+W*B-X*z+V*O},multiply:function(l){var c=this.val,d=c[0],f=c[1],m=c[2],y=c[3],S=c[4],C=c[5],E=c[6],P=c[7],A=c[8],F=c[9],G=c[10],D=c[11],L=c[12],b=c[13],I=c[14],N=c[15],Z=l.val,U=Z[0],W=Z[1],X=Z[2],V=Z[3];return c[0]=U*d+W*S+X*A+V*L,c[1]=U*f+W*C+X*F+V*b,c[2]=U*m+W*E+X*G+V*I,c[3]=U*y+W*P+X*D+V*N,U=Z[4],W=Z[5],X=Z[6],V=Z[7],c[4]=U*d+W*S+X*A+V*L,c[5]=U*f+W*C+X*F+V*b,c[6]=U*m+W*E+X*G+V*I,c[7]=U*y+W*P+X*D+V*N,U=Z[8],W=Z[9],X=Z[10],V=Z[11],c[8]=U*d+W*S+X*A+V*L,c[9]=U*f+W*C+X*F+V*b,c[10]=U*m+W*E+X*G+V*I,c[11]=U*y+W*P+X*D+V*N,U=Z[12],W=Z[13],X=Z[14],V=Z[15],c[12]=U*d+W*S+X*A+V*L,c[13]=U*f+W*C+X*F+V*b,c[14]=U*m+W*E+X*G+V*I,c[15]=U*y+W*P+X*D+V*N,this},multiplyLocal:function(l){var c=this.val,d=l.val;return this.setValues(c[0]*d[0]+c[1]*d[4]+c[2]*d[8]+c[3]*d[12],c[0]*d[1]+c[1]*d[5]+c[2]*d[9]+c[3]*d[13],c[0]*d[2]+c[1]*d[6]+c[2]*d[10]+c[3]*d[14],c[0]*d[3]+c[1]*d[7]+c[2]*d[11]+c[3]*d[15],c[4]*d[0]+c[5]*d[4]+c[6]*d[8]+c[7]*d[12],c[4]*d[1]+c[5]*d[5]+c[6]*d[9]+c[7]*d[13],c[4]*d[2]+c[5]*d[6]+c[6]*d[10]+c[7]*d[14],c[4]*d[3]+c[5]*d[7]+c[6]*d[11]+c[7]*d[15],c[8]*d[0]+c[9]*d[4]+c[10]*d[8]+c[11]*d[12],c[8]*d[1]+c[9]*d[5]+c[10]*d[9]+c[11]*d[13],c[8]*d[2]+c[9]*d[6]+c[10]*d[10]+c[11]*d[14],c[8]*d[3]+c[9]*d[7]+c[10]*d[11]+c[11]*d[15],c[12]*d[0]+c[13]*d[4]+c[14]*d[8]+c[15]*d[12],c[12]*d[1]+c[13]*d[5]+c[14]*d[9]+c[15]*d[13],c[12]*d[2]+c[13]*d[6]+c[14]*d[10]+c[15]*d[14],c[12]*d[3]+c[13]*d[7]+c[14]*d[11]+c[15]*d[15])},premultiply:function(l){return this.multiplyMatrices(l,this)},multiplyMatrices:function(l,c){var d=l.val,f=c.val,m=d[0],y=d[4],S=d[8],C=d[12],E=d[1],P=d[5],A=d[9],F=d[13],G=d[2],D=d[6],L=d[10],b=d[14],I=d[3],N=d[7],Z=d[11],U=d[15],W=f[0],X=f[4],V=f[8],O=f[12],z=f[1],B=f[5],Y=f[9],k=f[13],J=f[2],j=f[6],tt=f[10],ut=f[14],ht=f[3],st=f[7],dt=f[11],lt=f[15];return this.setValues(m*W+y*z+S*J+C*ht,E*W+P*z+A*J+F*ht,G*W+D*z+L*J+b*ht,I*W+N*z+Z*J+U*ht,m*X+y*B+S*j+C*st,E*X+P*B+A*j+F*st,G*X+D*B+L*j+b*st,I*X+N*B+Z*j+U*st,m*V+y*Y+S*tt+C*dt,E*V+P*Y+A*tt+F*dt,G*V+D*Y+L*tt+b*dt,I*V+N*Y+Z*tt+U*dt,m*O+y*k+S*ut+C*lt,E*O+P*k+A*ut+F*lt,G*O+D*k+L*ut+b*lt,I*O+N*k+Z*ut+U*lt)},translate:function(l){return this.translateXYZ(l.x,l.y,l.z)},translateXYZ:function(l,c,d){var f=this.val;return f[12]=f[0]*l+f[4]*c+f[8]*d+f[12],f[13]=f[1]*l+f[5]*c+f[9]*d+f[13],f[14]=f[2]*l+f[6]*c+f[10]*d+f[14],f[15]=f[3]*l+f[7]*c+f[11]*d+f[15],this},scale:function(l){return this.scaleXYZ(l.x,l.y,l.z)},scaleXYZ:function(l,c,d){var f=this.val;return f[0]=f[0]*l,f[1]=f[1]*l,f[2]=f[2]*l,f[3]=f[3]*l,f[4]=f[4]*c,f[5]=f[5]*c,f[6]=f[6]*c,f[7]=f[7]*c,f[8]=f[8]*d,f[9]=f[9]*d,f[10]=f[10]*d,f[11]=f[11]*d,this},makeRotationAxis:function(l,c){var d=Math.cos(c),f=Math.sin(c),m=1-d,y=l.x,S=l.y,C=l.z,E=m*y,P=m*S;return this.setValues(E*y+d,E*S-f*C,E*C+f*S,0,E*S+f*C,P*S+d,P*C-f*y,0,E*C-f*S,P*C+f*y,m*C*C+d,0,0,0,0,1)},rotate:function(l,c){var d=this.val,f=c.x,m=c.y,y=c.z,S=Math.sqrt(f*f+m*m+y*y);if(Math.abs(S)<o)return this;S=1/S,f*=S,m*=S,y*=S;var C=Math.sin(l),E=Math.cos(l),P=1-E,A=d[0],F=d[1],G=d[2],D=d[3],L=d[4],b=d[5],I=d[6],N=d[7],Z=d[8],U=d[9],W=d[10],X=d[11],V=d[12],O=d[13],z=d[14],B=d[15],Y=f*f*P+E,k=m*f*P+y*C,J=y*f*P-m*C,j=f*m*P-y*C,tt=m*m*P+E,ut=y*m*P+f*C,ht=f*y*P+m*C,st=m*y*P-f*C,dt=y*y*P+E;return this.setValues(A*Y+L*k+Z*J,F*Y+b*k+U*J,G*Y+I*k+W*J,D*Y+N*k+X*J,A*j+L*tt+Z*ut,F*j+b*tt+U*ut,G*j+I*tt+W*ut,D*j+N*tt+X*ut,A*ht+L*st+Z*dt,F*ht+b*st+U*dt,G*ht+I*st+W*dt,D*ht+N*st+X*dt,V,O,z,B)},rotateX:function(l){var c=this.val,d=Math.sin(l),f=Math.cos(l),m=c[4],y=c[5],S=c[6],C=c[7],E=c[8],P=c[9],A=c[10],F=c[11];return c[4]=m*f+E*d,c[5]=y*f+P*d,c[6]=S*f+A*d,c[7]=C*f+F*d,c[8]=E*f-m*d,c[9]=P*f-y*d,c[10]=A*f-S*d,c[11]=F*f-C*d,this},rotateY:function(l){var c=this.val,d=Math.sin(l),f=Math.cos(l),m=c[0],y=c[1],S=c[2],C=c[3],E=c[8],P=c[9],A=c[10],F=c[11];return c[0]=m*f-E*d,c[1]=y*f-P*d,c[2]=S*f-A*d,c[3]=C*f-F*d,c[8]=m*d+E*f,c[9]=y*d+P*f,c[10]=S*d+A*f,c[11]=C*d+F*f,this},rotateZ:function(l){var c=this.val,d=Math.sin(l),f=Math.cos(l),m=c[0],y=c[1],S=c[2],C=c[3],E=c[4],P=c[5],A=c[6],F=c[7];return c[0]=m*f+E*d,c[1]=y*f+P*d,c[2]=S*f+A*d,c[3]=C*f+F*d,c[4]=E*f-m*d,c[5]=P*f-y*d,c[6]=A*f-S*d,c[7]=F*f-C*d,this},fromRotationTranslation:function(l,c){var d=l.x,f=l.y,m=l.z,y=l.w,S=d+d,C=f+f,E=m+m,P=d*S,A=d*C,F=d*E,G=f*C,D=f*E,L=m*E,b=y*S,I=y*C,N=y*E;return this.setValues(1-(G+L),A+N,F-I,0,A-N,1-(P+L),D+b,0,F+I,D-b,1-(P+G),0,c.x,c.y,c.z,1)},fromQuat:function(l){var c=l.x,d=l.y,f=l.z,m=l.w,y=c+c,S=d+d,C=f+f,E=c*y,P=c*S,A=c*C,F=d*S,G=d*C,D=f*C,L=m*y,b=m*S,I=m*C;return this.setValues(1-(F+D),P+I,A-b,0,P-I,1-(E+D),G+L,0,A+b,G-L,1-(E+F),0,0,0,0,1)},frustum:function(l,c,d,f,m,y){var S=1/(c-l),C=1/(f-d),E=1/(m-y);return this.setValues(m*2*S,0,0,0,0,m*2*C,0,0,(c+l)*S,(f+d)*C,(y+m)*E,-1,0,0,y*m*2*E,0)},perspective:function(l,c,d,f){var m=1/Math.tan(l/2),y=1/(d-f);return this.setValues(m/c,0,0,0,0,m,0,0,0,0,(f+d)*y,-1,0,0,2*f*d*y,0)},perspectiveLH:function(l,c,d,f){return this.setValues(2*d/l,0,0,0,0,2*d/c,0,0,0,0,-f/(d-f),1,0,0,d*f/(d-f),0)},ortho:function(l,c,d,f,m,y){var S=l-c,C=d-f,E=m-y;return S=S===0?S:1/S,C=C===0?C:1/C,E=E===0?E:1/E,this.setValues(-2*S,0,0,0,0,-2*C,0,0,0,0,2*E,0,(l+c)*S,(f+d)*C,(y+m)*E,1)},lookAtRH:function(l,c,d){var f=this.val;return n.subVectors(l,c),n.lengthSq()===0&&(n.z=1),n.normalize(),s.crossVectors(d,n),s.lengthSq()===0&&(Math.abs(d.z)===1?n.x+=1e-4:n.z+=1e-4,n.normalize(),s.crossVectors(d,n)),s.normalize(),u.crossVectors(n,s),f[0]=s.x,f[1]=s.y,f[2]=s.z,f[4]=u.x,f[5]=u.y,f[6]=u.z,f[8]=n.x,f[9]=n.y,f[10]=n.z,this},lookAt:function(l,c,d){var f=l.x,m=l.y,y=l.z,S=d.x,C=d.y,E=d.z,P=c.x,A=c.y,F=c.z;if(Math.abs(f-P)<o&&Math.abs(m-A)<o&&Math.abs(y-F)<o)return this.identity();var G=f-P,D=m-A,L=y-F,b=1/Math.sqrt(G*G+D*D+L*L);G*=b,D*=b,L*=b;var I=C*L-E*D,N=E*G-S*L,Z=S*D-C*G;b=Math.sqrt(I*I+N*N+Z*Z),b?(b=1/b,I*=b,N*=b,Z*=b):(I=0,N=0,Z=0);var U=D*Z-L*N,W=L*I-G*Z,X=G*N-D*I;return b=Math.sqrt(U*U+W*W+X*X),b?(b=1/b,U*=b,W*=b,X*=b):(U=0,W=0,X=0),this.setValues(I,U,G,0,N,W,D,0,Z,X,L,0,-(I*f+N*m+Z*y),-(U*f+W*m+X*y),-(G*f+D*m+L*y),1)},yawPitchRoll:function(l,c,d){this.zero(),r.zero(),e.zero();var f=this.val,m=r.val,y=e.val,S=Math.sin(d),C=Math.cos(d);return f[10]=1,f[15]=1,f[0]=C,f[1]=S,f[4]=-S,f[5]=C,S=Math.sin(c),C=Math.cos(c),m[0]=1,m[15]=1,m[5]=C,m[10]=C,m[9]=-S,m[6]=S,S=Math.sin(l),C=Math.cos(l),y[5]=1,y[15]=1,y[0]=C,y[2]=-S,y[8]=S,y[10]=C,this.multiplyLocal(r),this.multiplyLocal(e),this},setWorldMatrix:function(l,c,d,f,m){return this.yawPitchRoll(l.y,l.x,l.z),r.scaling(d.x,d.y,d.z),e.xyz(c.x,c.y,c.z),this.multiplyLocal(r),this.multiplyLocal(e),f&&this.multiplyLocal(f),m&&this.multiplyLocal(m),this},multiplyToMat4:function(l,c){var d=this.val,f=l.val,m=d[0],y=d[1],S=d[2],C=d[3],E=d[4],P=d[5],A=d[6],F=d[7],G=d[8],D=d[9],L=d[10],b=d[11],I=d[12],N=d[13],Z=d[14],U=d[15],W=f[0],X=f[1],V=f[2],O=f[3],z=f[4],B=f[5],Y=f[6],k=f[7],J=f[8],j=f[9],tt=f[10],ut=f[11],ht=f[12],st=f[13],dt=f[14],lt=f[15];return c.setValues(W*m+X*E+V*G+O*I,X*y+X*P+V*D+O*N,V*S+X*A+V*L+O*Z,O*C+X*F+V*b+O*U,z*m+B*E+Y*G+k*I,z*y+B*P+Y*D+k*N,z*S+B*A+Y*L+k*Z,z*C+B*F+Y*b+k*U,J*m+j*E+tt*G+ut*I,J*y+j*P+tt*D+ut*N,J*S+j*A+tt*L+ut*Z,J*C+j*F+tt*b+ut*U,ht*m+st*E+dt*G+lt*I,ht*y+st*P+dt*D+lt*N,ht*S+st*A+dt*L+lt*Z,ht*C+st*F+dt*b+lt*U)},fromRotationXYTranslation:function(l,c,d){var f=c.x,m=c.y,y=c.z,S=Math.sin(l.x),C=Math.cos(l.x),E=Math.sin(l.y),P=Math.cos(l.y),A=f,F=m,G=y,D=-S,L=0-D*E,b=0-C*E,I=D*P,N=C*P;return d||(A=P*f+E*y,F=L*f+C*m+I*y,G=b*f+S*m+N*y),this.setValues(P,L,b,0,0,C,S,0,E,I,N,0,A,F,G,1)},getMaxScaleOnAxis:function(){var l=this.val,c=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],d=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],f=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(c,d,f))}}),r=new a,e=new a,s=new g,u=new g,n=new g;v.exports=a}),86883:(v=>{var T=function(t,h,g){return Math.min(t+h,g)};v.exports=T}),50040:(v=>{var T=function(t){var h=t.length;if(h===0)return 0;t.sort(function(o,a){return o-a});var g=Math.floor(h/2);return h%2===0?(t[g]+t[g-1])/2:t[g]};v.exports=T}),37204:(v=>{var T=function(t,h,g){return Math.max(t-h,g)};v.exports=T}),65201:(v=>{var T=function(t,h,g,o){g===void 0&&(g=h+1);var a=(t-h)/(g-h);return a>1?o!==void 0?(a=(o-t)/(o-g),a<0&&(a=0)):a=1:a<0&&(a=0),a};v.exports=T}),15746:((v,T,t)=>{var h=t(83419),g=t(94434),o=t(29747),a=t(25836),r=1e-6,e=new Int8Array([1,2,0]),s=new Float32Array([0,0,0]),u=new a(1,0,0),n=new a(0,1,0),l=new a,c=new g,d=new h({initialize:function(m,y,S,C){this.onChangeCallback=o,this.set(m,y,S,C)},x:{get:function(){return this._x},set:function(f){this._x=f,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(f){this._y=f,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(f){this._z=f,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(f){this._w=f,this.onChangeCallback(this)}},copy:function(f){return this.set(f)},set:function(f,m,y,S,C){return C===void 0&&(C=!0),typeof f=="object"?(this._x=f.x||0,this._y=f.y||0,this._z=f.z||0,this._w=f.w||0):(this._x=f||0,this._y=m||0,this._z=y||0,this._w=S||0),C&&this.onChangeCallback(this),this},add:function(f){return this._x+=f.x,this._y+=f.y,this._z+=f.z,this._w+=f.w,this.onChangeCallback(this),this},subtract:function(f){return this._x-=f.x,this._y-=f.y,this._z-=f.z,this._w-=f.w,this.onChangeCallback(this),this},scale:function(f){return this._x*=f,this._y*=f,this._z*=f,this._w*=f,this.onChangeCallback(this),this},length:function(){var f=this.x,m=this.y,y=this.z,S=this.w;return Math.sqrt(f*f+m*m+y*y+S*S)},lengthSq:function(){var f=this.x,m=this.y,y=this.z,S=this.w;return f*f+m*m+y*y+S*S},normalize:function(){var f=this.x,m=this.y,y=this.z,S=this.w,C=f*f+m*m+y*y+S*S;return C>0&&(C=1/Math.sqrt(C),this._x=f*C,this._y=m*C,this._z=y*C,this._w=S*C),this.onChangeCallback(this),this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z+this.w*f.w},lerp:function(f,m){m===void 0&&(m=0);var y=this.x,S=this.y,C=this.z,E=this.w;return this.set(y+m*(f.x-y),S+m*(f.y-S),C+m*(f.z-C),E+m*(f.w-E))},rotationTo:function(f,m){var y=f.x*m.x+f.y*m.y+f.z*m.z;return y<-.999999?(l.copy(u).cross(f).length()<r&&l.copy(n).cross(f),l.normalize(),this.setAxisAngle(l,Math.PI)):y>.999999?this.set(0,0,0,1):(l.copy(f).cross(m),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+y,this.normalize())},setAxes:function(f,m,y){var S=c.val;return S[0]=m.x,S[3]=m.y,S[6]=m.z,S[1]=y.x,S[4]=y.y,S[7]=y.z,S[2]=-f.x,S[5]=-f.y,S[8]=-f.z,this.fromMat3(c).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(f,m){m=m*.5;var y=Math.sin(m);return this.set(y*f.x,y*f.y,y*f.z,Math.cos(m))},multiply:function(f){var m=this.x,y=this.y,S=this.z,C=this.w,E=f.x,P=f.y,A=f.z,F=f.w;return this.set(m*F+C*E+y*A-S*P,y*F+C*P+S*E-m*A,S*F+C*A+m*P-y*E,C*F-m*E-y*P-S*A)},slerp:function(f,m){var y=this.x,S=this.y,C=this.z,E=this.w,P=f.x,A=f.y,F=f.z,G=f.w,D=y*P+S*A+C*F+E*G;D<0&&(D=-D,P=-P,A=-A,F=-F,G=-G);var L=1-m,b=m;if(1-D>r){var I=Math.acos(D),N=Math.sin(I);L=Math.sin((1-m)*I)/N,b=Math.sin(m*I)/N}return this.set(L*y+b*P,L*S+b*A,L*C+b*F,L*E+b*G)},invert:function(){var f=this.x,m=this.y,y=this.z,S=this.w,C=f*f+m*m+y*y+S*S,E=C?1/C:0;return this.set(-f*E,-m*E,-y*E,S*E)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(f){f*=.5;var m=this.x,y=this.y,S=this.z,C=this.w,E=Math.sin(f),P=Math.cos(f);return this.set(m*P+C*E,y*P+S*E,S*P-y*E,C*P-m*E)},rotateY:function(f){f*=.5;var m=this.x,y=this.y,S=this.z,C=this.w,E=Math.sin(f),P=Math.cos(f);return this.set(m*P-S*E,y*P+C*E,S*P+m*E,C*P-y*E)},rotateZ:function(f){f*=.5;var m=this.x,y=this.y,S=this.z,C=this.w,E=Math.sin(f),P=Math.cos(f);return this.set(m*P+y*E,y*P-m*E,S*P+C*E,C*P-S*E)},calculateW:function(){var f=this.x,m=this.y,y=this.z;return this.w=-Math.sqrt(1-f*f-m*m-y*y),this},setFromEuler:function(f,m){var y=f.x/2,S=f.y/2,C=f.z/2,E=Math.cos(y),P=Math.cos(S),A=Math.cos(C),F=Math.sin(y),G=Math.sin(S),D=Math.sin(C);switch(f.order){case"XYZ":{this.set(F*P*A+E*G*D,E*G*A-F*P*D,E*P*D+F*G*A,E*P*A-F*G*D,m);break}case"YXZ":{this.set(F*P*A+E*G*D,E*G*A-F*P*D,E*P*D-F*G*A,E*P*A+F*G*D,m);break}case"ZXY":{this.set(F*P*A-E*G*D,E*G*A+F*P*D,E*P*D+F*G*A,E*P*A-F*G*D,m);break}case"ZYX":{this.set(F*P*A-E*G*D,E*G*A+F*P*D,E*P*D-F*G*A,E*P*A+F*G*D,m);break}case"YZX":{this.set(F*P*A+E*G*D,E*G*A+F*P*D,E*P*D-F*G*A,E*P*A-F*G*D,m);break}case"XZY":{this.set(F*P*A-E*G*D,E*G*A-F*P*D,E*P*D+F*G*A,E*P*A+F*G*D,m);break}}return this},setFromRotationMatrix:function(f){var m=f.val,y=m[0],S=m[4],C=m[8],E=m[1],P=m[5],A=m[9],F=m[2],G=m[6],D=m[10],L=y+P+D,b;return L>0?(b=.5/Math.sqrt(L+1),this.set((G-A)*b,(C-F)*b,(E-S)*b,.25/b)):y>P&&y>D?(b=2*Math.sqrt(1+y-P-D),this.set(.25*b,(S+E)/b,(C+F)/b,(G-A)/b)):P>D?(b=2*Math.sqrt(1+P-y-D),this.set((S+E)/b,.25*b,(A+G)/b,(C-F)/b)):(b=2*Math.sqrt(1+D-y-P),this.set((C+F)/b,(A+G)/b,.25*b,(E-S)/b)),this},fromMat3:function(f){var m=f.val,y=m[0]+m[4]+m[8],S;if(y>0)S=Math.sqrt(y+1),this.w=.5*S,S=.5/S,this._x=(m[7]-m[5])*S,this._y=(m[2]-m[6])*S,this._z=(m[3]-m[1])*S;else{var C=0;m[4]>m[0]&&(C=1),m[8]>m[C*3+C]&&(C=2);var E=e[C],P=e[E];S=Math.sqrt(m[C*3+C]-m[E*3+E]-m[P*3+P]+1),s[C]=.5*S,S=.5/S,s[E]=(m[E*3+C]+m[C*3+E])*S,s[P]=(m[P*3+C]+m[C*3+P])*S,this._x=s[0],this._y=s[1],this._z=s[2],this._w=(m[P*3+E]-m[E*3+P])*S}return this.onChangeCallback(this),this}});v.exports=d}),43396:((v,T,t)=>{var h=t(36383),g=function(o){return o*h.RAD_TO_DEG};v.exports=g}),74362:(v=>{var T=function(t,h){h===void 0&&(h=1);var g=Math.random()*2*Math.PI;return t.x=Math.cos(g)*h,t.y=Math.sin(g)*h,t};v.exports=T}),60706:(v=>{var T=function(t,h){h===void 0&&(h=1);var g=Math.random()*2*Math.PI,o=Math.random()*2-1,a=Math.sqrt(1-o*o)*h;return t.x=Math.cos(g)*a,t.y=Math.sin(g)*a,t.z=o*h,t};v.exports=T}),67421:(v=>{var T=function(t,h){return h===void 0&&(h=1),t.x=(Math.random()*2-1)*h,t.y=(Math.random()*2-1)*h,t.z=(Math.random()*2-1)*h,t.w=(Math.random()*2-1)*h,t};v.exports=T}),36305:(v=>{var T=function(t,h){var g=t.x,o=t.y;return t.x=g*Math.cos(h)-o*Math.sin(h),t.y=g*Math.sin(h)+o*Math.cos(h),t};v.exports=T}),11520:(v=>{var T=function(t,h,g,o){var a=Math.cos(o),r=Math.sin(o),e=t.x-h,s=t.y-g;return t.x=e*a-s*r+h,t.y=e*r+s*a+g,t};v.exports=T}),1163:(v=>{var T=function(t,h,g,o,a){var r=o+Math.atan2(t.y-g,t.x-h);return t.x=h+a*Math.cos(r),t.y=g+a*Math.sin(r),t};v.exports=T}),70336:(v=>{var T=function(t,h,g,o,a){return t.x=h+a*Math.cos(o),t.y=g+a*Math.sin(o),t};v.exports=T}),72678:((v,T,t)=>{var h=t(25836),g=t(37867),o=t(15746),a=new g,r=new o,e=new h,s=function(u,n,l){return r.setAxisAngle(n,l),a.fromRotationTranslation(r,e.set(0,0,0)),u.transformMat4(a)};v.exports=s}),2284:(v=>{var T=function(t){return t>0?Math.ceil(t):Math.floor(t)};v.exports=T}),41013:(v=>{var T=function(t,h,g){h===void 0&&(h=0),g===void 0&&(g=10);var o=Math.pow(g,-h);return Math.round(t*o)/o};v.exports=T}),16922:(v=>{var T=function(t,h,g,o){h===void 0&&(h=1),g===void 0&&(g=1),o===void 0&&(o=1),o*=Math.PI/t;for(var a=[],r=[],e=0;e<t;e++)g-=h*o,h+=g*o,a[e]=g,r[e]=h;return{sin:r,cos:a,length:t}};v.exports=T}),7602:(v=>{var T=function(t,h,g){return t<=h?0:t>=g?1:(t=(t-h)/(g-h),t*t*(3-2*t))};v.exports=T}),54261:(v=>{var T=function(t,h,g){return t=Math.max(0,Math.min(1,(t-h)/(g-h))),t*t*t*(t*(t*6-15)+10)};v.exports=T}),44408:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e){e===void 0&&(e=new h);var s=0,u=0,n=a*r;return o>0&&o<=n&&(o>a-1?(u=Math.floor(o/a),s=o-u*a):s=o),e.set(s,u)};v.exports=g}),85955:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s,u,n,l){l===void 0&&(l=new h);var c=Math.sin(s),d=Math.cos(s),f=d*u,m=c*u,y=-c*n,S=d*n,C=1/(f*S+y*-m);return l.x=S*C*o+-y*C*a+(e*y-r*S)*C,l.y=f*C*a+-m*C*o+(-e*f+r*m)*C,l};v.exports=g}),26099:((v,T,t)=>{var h=t(83419),g=t(43855),o=new h({initialize:function(r,e){this.x=0,this.y=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0):(e===void 0&&(e=r),this.x=r||0,this.y=e||0)},clone:function(){return new o(this.x,this.y)},copy:function(a){return this.x=a.x||0,this.y=a.y||0,this},setFromObject:function(a){return this.x=a.x||0,this.y=a.y||0,this},set:function(a,r){return r===void 0&&(r=a),this.x=a,this.y=r,this},setTo:function(a,r){return this.set(a,r)},setToPolar:function(a,r){return r==null&&(r=1),this.x=Math.cos(a)*r,this.y=Math.sin(a)*r,this},equals:function(a){return this.x===a.x&&this.y===a.y},fuzzyEquals:function(a,r){return g(this.x,a.x,r)&&g(this.y,a.y,r)},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},setAngle:function(a){return this.setToPolar(a,this.length())},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(a){var r=a.x-this.x,e=a.y-this.y;return Math.sqrt(r*r+e*e)},distanceSq:function(a){var r=a.x-this.x,e=a.y-this.y;return r*r+e*e},length:function(){var a=this.x,r=this.y;return Math.sqrt(a*a+r*r)},setLength:function(a){return this.normalize().scale(a)},lengthSq:function(){var a=this.x,r=this.y;return a*a+r*r},normalize:function(){var a=this.x,r=this.y,e=a*a+r*r;return e>0&&(e=1/Math.sqrt(e),this.x=a*e,this.y=r*e),this},normalizeRightHand:function(){var a=this.x;return this.x=this.y*-1,this.y=a,this},normalizeLeftHand:function(){var a=this.x;return this.x=this.y,this.y=a*-1,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lerp:function(a,r){r===void 0&&(r=0);var e=this.x,s=this.y;return this.x=e+r*(a.x-e),this.y=s+r*(a.y-s),this},transformMat3:function(a){var r=this.x,e=this.y,s=a.val;return this.x=s[0]*r+s[3]*e+s[6],this.y=s[1]*r+s[4]*e+s[7],this},transformMat4:function(a){var r=this.x,e=this.y,s=a.val;return this.x=s[0]*r+s[4]*e+s[12],this.y=s[1]*r+s[5]*e+s[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(a){var r=this.length();return r&&r>a&&this.scale(a/r),this},reflect:function(a){return a=a.clone().normalize(),this.subtract(a.scale(2*this.dot(a)))},mirror:function(a){return this.reflect(a).negate()},rotate:function(a){var r=Math.cos(a),e=Math.sin(a);return this.set(r*this.x-e*this.y,e*this.x+r*this.y)},project:function(a){var r=this.dot(a)/a.dot(a);return this.copy(a).scale(r)}});o.ZERO=new o,o.RIGHT=new o(1,0),o.LEFT=new o(-1,0),o.UP=new o(0,-1),o.DOWN=new o(0,1),o.ONE=new o(1,1),v.exports=o}),25836:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){this.x=0,this.y=0,this.z=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=r||0,this.z=e||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this},max:function(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this},clone:function(){return new g(this.x,this.y,this.z)},addVectors:function(o,a){return this.x=o.x+a.x,this.y=o.y+a.y,this.z=o.z+a.z,this},subVectors:function(o,a){return this.x=o.x-a.x,this.y=o.y-a.y,this.z=o.z-a.z,this},crossVectors:function(o,a){var r=o.x,e=o.y,s=o.z,u=a.x,n=a.y,l=a.z;return this.x=e*l-s*n,this.y=s*u-r*l,this.z=r*n-e*u,this},equals:function(o){return this.x===o.x&&this.y===o.y&&this.z===o.z},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z||0,this},set:function(o,a,r){return typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=a||0,this.z=r||0),this},setFromMatrixPosition:function(o){return this.fromArray(o.val,12)},setFromMatrixColumn:function(o,a){return this.fromArray(o.val,a*4)},fromArray:function(o,a){return a===void 0&&(a=0),this.x=o[a],this.y=o[a+1],this.z=o[a+2],this},add:function(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z||0,this},addScalar:function(o){return this.x+=o,this.y+=o,this.z+=o,this},addScale:function(o,a){return this.x+=o.x*a,this.y+=o.y*a,this.z+=o.z*a||0,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z||0,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z||1,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o,this.z*=o):(this.x=0,this.y=0,this.z=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(o){var a=o.x-this.x,r=o.y-this.y,e=o.z-this.z||0;return Math.sqrt(a*a+r*r+e*e)},distanceSq:function(o){var a=o.x-this.x,r=o.y-this.y,e=o.z-this.z||0;return a*a+r*r+e*e},length:function(){var o=this.x,a=this.y,r=this.z;return Math.sqrt(o*o+a*a+r*r)},lengthSq:function(){var o=this.x,a=this.y,r=this.z;return o*o+a*a+r*r},normalize:function(){var o=this.x,a=this.y,r=this.z,e=o*o+a*a+r*r;return e>0&&(e=1/Math.sqrt(e),this.x=o*e,this.y=a*e,this.z=r*e),this},dot:function(o){return this.x*o.x+this.y*o.y+this.z*o.z},cross:function(o){var a=this.x,r=this.y,e=this.z,s=o.x,u=o.y,n=o.z;return this.x=r*n-e*u,this.y=e*s-a*n,this.z=a*u-r*s,this},lerp:function(o,a){a===void 0&&(a=0);var r=this.x,e=this.y,s=this.z;return this.x=r+a*(o.x-r),this.y=e+a*(o.y-e),this.z=s+a*(o.z-s),this},applyMatrix3:function(o){var a=this.x,r=this.y,e=this.z,s=o.val;return this.x=s[0]*a+s[3]*r+s[6]*e,this.y=s[1]*a+s[4]*r+s[7]*e,this.z=s[2]*a+s[5]*r+s[8]*e,this},applyMatrix4:function(o){var a=this.x,r=this.y,e=this.z,s=o.val,u=1/(s[3]*a+s[7]*r+s[11]*e+s[15]);return this.x=(s[0]*a+s[4]*r+s[8]*e+s[12])*u,this.y=(s[1]*a+s[5]*r+s[9]*e+s[13])*u,this.z=(s[2]*a+s[6]*r+s[10]*e+s[14])*u,this},transformMat3:function(o){var a=this.x,r=this.y,e=this.z,s=o.val;return this.x=a*s[0]+r*s[3]+e*s[6],this.y=a*s[1]+r*s[4]+e*s[7],this.z=a*s[2]+r*s[5]+e*s[8],this},transformMat4:function(o){var a=this.x,r=this.y,e=this.z,s=o.val;return this.x=s[0]*a+s[4]*r+s[8]*e+s[12],this.y=s[1]*a+s[5]*r+s[9]*e+s[13],this.z=s[2]*a+s[6]*r+s[10]*e+s[14],this},transformCoordinates:function(o){var a=this.x,r=this.y,e=this.z,s=o.val,u=a*s[0]+r*s[4]+e*s[8]+s[12],n=a*s[1]+r*s[5]+e*s[9]+s[13],l=a*s[2]+r*s[6]+e*s[10]+s[14],c=a*s[3]+r*s[7]+e*s[11]+s[15];return this.x=u/c,this.y=n/c,this.z=l/c,this},transformQuat:function(o){var a=this.x,r=this.y,e=this.z,s=o.x,u=o.y,n=o.z,l=o.w,c=l*a+u*e-n*r,d=l*r+n*a-s*e,f=l*e+s*r-u*a,m=-s*a-u*r-n*e;return this.x=c*l+m*-s+d*-n-f*-u,this.y=d*l+m*-u+f*-s-c*-n,this.z=f*l+m*-n+c*-u-d*-s,this},project:function(o){var a=this.x,r=this.y,e=this.z,s=o.val,u=s[0],n=s[1],l=s[2],c=s[3],d=s[4],f=s[5],m=s[6],y=s[7],S=s[8],C=s[9],E=s[10],P=s[11],A=s[12],F=s[13],G=s[14],D=s[15],L=1/(a*c+r*y+e*P+D);return this.x=(a*u+r*d+e*S+A)*L,this.y=(a*n+r*f+e*C+F)*L,this.z=(a*l+r*m+e*E+G)*L,this},projectViewMatrix:function(o,a){return this.applyMatrix4(o).applyMatrix4(a)},unprojectViewMatrix:function(o,a){return this.applyMatrix4(o).applyMatrix4(a)},unproject:function(o,a){var r=o.x,e=o.y,s=o.z,u=o.w,n=this.x-r,l=u-this.y-1-e,c=this.z;return this.x=2*n/s-1,this.y=2*l/u-1,this.z=2*c-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});g.ZERO=new g,g.RIGHT=new g(1,0,0),g.LEFT=new g(-1,0,0),g.UP=new g(0,-1,0),g.DOWN=new g(0,1,0),g.FORWARD=new g(0,0,1),g.BACK=new g(0,0,-1),g.ONE=new g(1,1,1),v.exports=g}),61369:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,s){this.x=0,this.y=0,this.z=0,this.w=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=r||0,this.z=e||0,this.w=s||0)},clone:function(){return new g(this.x,this.y,this.z,this.w)},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z||0,this.w=o.w||0,this},equals:function(o){return this.x===o.x&&this.y===o.y&&this.z===o.z&&this.w===o.w},set:function(o,a,r,e){return typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=a||0,this.z=r||0,this.w=e||0),this},add:function(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z||0,this.w+=o.w||0,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z||0,this.w-=o.w||0,this},scale:function(o){return this.x*=o,this.y*=o,this.z*=o,this.w*=o,this},length:function(){var o=this.x,a=this.y,r=this.z,e=this.w;return Math.sqrt(o*o+a*a+r*r+e*e)},lengthSq:function(){var o=this.x,a=this.y,r=this.z,e=this.w;return o*o+a*a+r*r+e*e},normalize:function(){var o=this.x,a=this.y,r=this.z,e=this.w,s=o*o+a*a+r*r+e*e;return s>0&&(s=1/Math.sqrt(s),this.x=o*s,this.y=a*s,this.z=r*s,this.w=e*s),this},dot:function(o){return this.x*o.x+this.y*o.y+this.z*o.z+this.w*o.w},lerp:function(o,a){a===void 0&&(a=0);var r=this.x,e=this.y,s=this.z,u=this.w;return this.x=r+a*(o.x-r),this.y=e+a*(o.y-e),this.z=s+a*(o.z-s),this.w=u+a*(o.w-u),this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z||1,this.w*=o.w||1,this},divide:function(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z||1,this.w/=o.w||1,this},distance:function(o){var a=o.x-this.x,r=o.y-this.y,e=o.z-this.z||0,s=o.w-this.w||0;return Math.sqrt(a*a+r*r+e*e+s*s)},distanceSq:function(o){var a=o.x-this.x,r=o.y-this.y,e=o.z-this.z||0,s=o.w-this.w||0;return a*a+r*r+e*e+s*s},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(o){var a=this.x,r=this.y,e=this.z,s=this.w,u=o.val;return this.x=u[0]*a+u[4]*r+u[8]*e+u[12]*s,this.y=u[1]*a+u[5]*r+u[9]*e+u[13]*s,this.z=u[2]*a+u[6]*r+u[10]*e+u[14]*s,this.w=u[3]*a+u[7]*r+u[11]*e+u[15]*s,this},transformQuat:function(o){var a=this.x,r=this.y,e=this.z,s=o.x,u=o.y,n=o.z,l=o.w,c=l*a+u*e-n*r,d=l*r+n*a-s*e,f=l*e+s*r-u*a,m=-s*a-u*r-n*e;return this.x=c*l+m*-s+d*-n-f*-u,this.y=d*l+m*-u+f*-s-c*-n,this.z=f*l+m*-n+c*-u-d*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});g.prototype.sub=g.prototype.subtract,g.prototype.mul=g.prototype.multiply,g.prototype.div=g.prototype.divide,g.prototype.dist=g.prototype.distance,g.prototype.distSq=g.prototype.distanceSq,g.prototype.len=g.prototype.length,g.prototype.lenSq=g.prototype.lengthSq,v.exports=g}),60417:(v=>{var T=function(t,h,g){return Math.abs(t-h)<=g};v.exports=T}),15994:(v=>{var T=function(t,h,g){var o=g-h;return h+((t-h)%o+o)%o};v.exports=T}),31040:(v=>{var T=function(t,h,g,o){return Math.atan2(o-h,g-t)};v.exports=T}),55495:(v=>{var T=function(t,h){return Math.atan2(h.y-t.y,h.x-t.x)};v.exports=T}),128:(v=>{var T=function(t,h){return Math.atan2(h.x-t.x,h.y-t.y)};v.exports=T}),41273:(v=>{var T=function(t,h,g,o){return Math.atan2(g-t,o-h)};v.exports=T}),1432:((v,T,t)=>{var h=t(36383),g=function(o){return o>Math.PI&&(o-=h.PI2),Math.abs(((o+h.TAU)%h.PI2-h.PI2)%h.PI2)};v.exports=g}),49127:((v,T,t)=>{var h=t(12407),g=function(o,a){return h(a-o)};v.exports=g}),52285:((v,T,t)=>{var h=t(12407),g=2*Math.PI,o=function(a,r){var e=h(r-a);return e>0&&(e-=g),e};v.exports=o}),67317:((v,T,t)=>{var h=t(86554),g=function(o,a){return h(a-o)};v.exports=g}),12407:(v=>{var T=function(t){return t=t%(2*Math.PI),t>=0?t:t+2*Math.PI};v.exports=T}),53993:((v,T,t)=>{var h=t(99472),g=function(){return h(-Math.PI,Math.PI)};v.exports=g}),86564:((v,T,t)=>{var h=t(99472),g=function(){return h(-180,180)};v.exports=g}),90154:((v,T,t)=>{var h=t(12407),g=function(o){return h(o+Math.PI)};v.exports=g}),48736:((v,T,t)=>{var h=t(36383),g=function(o,a,r){return r===void 0&&(r=.05),o===a||(Math.abs(a-o)<=r||Math.abs(a-o)>=h.PI2-r?o=a:(Math.abs(a-o)>Math.PI&&(a<o?a+=h.PI2:a-=h.PI2),a>o?o+=r:a<o&&(o-=r))),o};v.exports=g}),61430:(v=>{var T=function(t,h){var g=h-t;if(g===0)return 0;var o=Math.floor((g- -180)/360);return g-o*360};v.exports=T}),86554:((v,T,t)=>{var h=t(15994),g=function(o){return h(o,-Math.PI,Math.PI)};v.exports=g}),30954:((v,T,t)=>{var h=t(15994),g=function(o){return h(o,-180,180)};v.exports=g}),25588:((v,T,t)=>{v.exports={Between:t(31040),BetweenPoints:t(55495),BetweenPointsY:t(128),BetweenY:t(41273),CounterClockwise:t(1432),GetClockwiseDistance:t(49127),GetCounterClockwiseDistance:t(52285),GetShortestDistance:t(67317),Normalize:t(12407),Random:t(53993),RandomDegrees:t(86564),Reverse:t(90154),RotateTo:t(48736),ShortestBetween:t(61430),Wrap:t(86554),WrapDegrees:t(30954)}}),36383:(v=>{var T={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};v.exports=T}),20339:(v=>{var T=function(t,h,g,o){var a=t-g,r=h-o;return Math.sqrt(a*a+r*r)};v.exports=T}),52816:(v=>{var T=function(t,h){var g=t.x-h.x,o=t.y-h.y;return Math.sqrt(g*g+o*o)};v.exports=T}),64559:(v=>{var T=function(t,h){var g=t.x-h.x,o=t.y-h.y;return g*g+o*o};v.exports=T}),82340:(v=>{var T=function(t,h,g,o){return Math.max(Math.abs(t-g),Math.abs(h-o))};v.exports=T}),14390:(v=>{var T=function(t,h,g,o,a){return a===void 0&&(a=2),Math.sqrt(Math.pow(g-t,a)+Math.pow(o-h,a))};v.exports=T}),2243:(v=>{var T=function(t,h,g,o){return Math.abs(t-g)+Math.abs(h-o)};v.exports=T}),89774:(v=>{var T=function(t,h,g,o){var a=t-g,r=h-o;return a*a+r*r};v.exports=T}),50994:((v,T,t)=>{v.exports={Between:t(20339),BetweenPoints:t(52816),BetweenPointsSquared:t(64559),Chebyshev:t(82340),Power:t(14390),Snake:t(2243),Squared:t(89774)}}),62640:((v,T,t)=>{var h=t(54178),g=t(41521),o=t(79980),a=t(85433),r=t(99140),e=t(48857),s=t(81596),u=t(59133),n=t(98516),l=t(35248),c=t(82500),d=t(49752);v.exports={Power0:s,Power1:u.Out,Power2:a.Out,Power3:n.Out,Power4:l.Out,Linear:s,Quad:u.Out,Cubic:a.Out,Quart:n.Out,Quint:l.Out,Sine:c.Out,Expo:e.Out,Circ:o.Out,Elastic:r.Out,Back:h.Out,Bounce:g.Out,Stepped:d,"Quad.easeIn":u.In,"Cubic.easeIn":a.In,"Quart.easeIn":n.In,"Quint.easeIn":l.In,"Sine.easeIn":c.In,"Expo.easeIn":e.In,"Circ.easeIn":o.In,"Elastic.easeIn":r.In,"Back.easeIn":h.In,"Bounce.easeIn":g.In,"Quad.easeOut":u.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":n.Out,"Quint.easeOut":l.Out,"Sine.easeOut":c.Out,"Expo.easeOut":e.Out,"Circ.easeOut":o.Out,"Elastic.easeOut":r.Out,"Back.easeOut":h.Out,"Bounce.easeOut":g.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":n.InOut,"Quint.easeInOut":l.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":e.InOut,"Circ.easeInOut":o.InOut,"Elastic.easeInOut":r.InOut,"Back.easeInOut":h.InOut,"Bounce.easeInOut":g.InOut}}),1639:(v=>{var T=function(t,h){return h===void 0&&(h=1.70158),t*t*((h+1)*t-h)};v.exports=T}),50099:(v=>{var T=function(t,h){h===void 0&&(h=1.70158);var g=h*1.525;return(t*=2)<1?.5*(t*t*((g+1)*t-g)):.5*((t-=2)*t*((g+1)*t+g)+2)};v.exports=T}),41286:(v=>{var T=function(t,h){return h===void 0&&(h=1.70158),--t*t*((h+1)*t+h)+1};v.exports=T}),54178:((v,T,t)=>{v.exports={In:t(1639),Out:t(41286),InOut:t(50099)}}),59590:(v=>{var T=function(t){return t=1-t,t<.36363636363636365?1-7.5625*t*t:t<.7272727272727273?1-(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?1-(7.5625*(t-=.8181818181818182)*t+.9375):1-(7.5625*(t-=.9545454545454546)*t+.984375)};v.exports=T}),41788:(v=>{var T=function(t){var h=!1;return t<.5?(t=1-t*2,h=!0):t=t*2-1,t<.36363636363636365?t=7.5625*t*t:t<.7272727272727273?t=7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?t=7.5625*(t-=.8181818181818182)*t+.9375:t=7.5625*(t-=.9545454545454546)*t+.984375,h?(1-t)*.5:t*.5+.5};v.exports=T}),69905:(v=>{var T=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375};v.exports=T}),41521:((v,T,t)=>{v.exports={In:t(59590),Out:t(69905),InOut:t(41788)}}),91861:(v=>{var T=function(t){return 1-Math.sqrt(1-t*t)};v.exports=T}),4177:(v=>{var T=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};v.exports=T}),57512:(v=>{var T=function(t){return Math.sqrt(1- --t*t)};v.exports=T}),79980:((v,T,t)=>{v.exports={In:t(91861),Out:t(57512),InOut:t(4177)}}),51150:(v=>{var T=function(t){return t*t*t};v.exports=T}),82820:(v=>{var T=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};v.exports=T}),35033:(v=>{var T=function(t){return--t*t*t+1};v.exports=T}),85433:((v,T,t)=>{v.exports={In:t(51150),Out:t(35033),InOut:t(82820)}}),69965:(v=>{var T=function(t,h,g){if(h===void 0&&(h=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var o=g/4;return h<1?h=1:o=g*Math.asin(1/h)/(2*Math.PI),-(h*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/g))};v.exports=T}),50665:(v=>{var T=function(t,h,g){if(h===void 0&&(h=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var o=g/4;return h<1?h=1:o=g*Math.asin(1/h)/(2*Math.PI),(t*=2)<1?-.5*(h*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/g)):h*Math.pow(2,-10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/g)*.5+1};v.exports=T}),7744:(v=>{var T=function(t,h,g){if(h===void 0&&(h=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var o=g/4;return h<1?h=1:o=g*Math.asin(1/h)/(2*Math.PI),h*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/g)+1};v.exports=T}),99140:((v,T,t)=>{v.exports={In:t(69965),Out:t(7744),InOut:t(50665)}}),24590:(v=>{var T=function(t){return Math.pow(2,10*(t-1))-.001};v.exports=T}),87844:(v=>{var T=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))};v.exports=T}),89433:(v=>{var T=function(t){return 1-Math.pow(2,-10*t)};v.exports=T}),48857:((v,T,t)=>{v.exports={In:t(24590),Out:t(89433),InOut:t(87844)}}),48820:((v,T,t)=>{v.exports={Back:t(54178),Bounce:t(41521),Circular:t(79980),Cubic:t(85433),Elastic:t(99140),Expo:t(48857),Linear:t(81596),Quadratic:t(59133),Quartic:t(98516),Quintic:t(35248),Sine:t(82500),Stepped:t(49752)}}),7147:(v=>{var T=function(t){return t};v.exports=T}),81596:((v,T,t)=>{v.exports=t(7147)}),34826:(v=>{var T=function(t){return t*t};v.exports=T}),20544:(v=>{var T=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};v.exports=T}),92029:(v=>{var T=function(t){return t*(2-t)};v.exports=T}),59133:((v,T,t)=>{v.exports={In:t(34826),Out:t(92029),InOut:t(20544)}}),64413:(v=>{var T=function(t){return t*t*t*t};v.exports=T}),78137:(v=>{var T=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)};v.exports=T}),45840:(v=>{var T=function(t){return 1- --t*t*t*t};v.exports=T}),98516:((v,T,t)=>{v.exports={In:t(64413),Out:t(45840),InOut:t(78137)}}),87745:(v=>{var T=function(t){return t*t*t*t*t};v.exports=T}),16509:(v=>{var T=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)};v.exports=T}),17868:(v=>{var T=function(t){return--t*t*t*t*t+1};v.exports=T}),35248:((v,T,t)=>{v.exports={In:t(87745),Out:t(17868),InOut:t(16509)}}),80461:(v=>{var T=function(t){return t===0?0:t===1?1:1-Math.cos(t*Math.PI/2)};v.exports=T}),34025:(v=>{var T=function(t){return t===0?0:t===1?1:.5*(1-Math.cos(Math.PI*t))};v.exports=T}),52768:(v=>{var T=function(t){return t===0?0:t===1?1:Math.sin(t*Math.PI/2)};v.exports=T}),82500:((v,T,t)=>{v.exports={In:t(80461),Out:t(52768),InOut:t(34025)}}),72251:(v=>{var T=function(t,h){return h===void 0&&(h=1),t<=0?0:t>=1?1:((h*t|0)+1)*(1/h)};v.exports=T}),49752:((v,T,t)=>{v.exports=t(72251)}),75698:(v=>{var T=function(t,h){return h===void 0&&(h=1e-4),Math.ceil(t-h)};v.exports=T}),43855:(v=>{var T=function(t,h,g){return g===void 0&&(g=1e-4),Math.abs(t-h)<g};v.exports=T}),25777:(v=>{var T=function(t,h){return h===void 0&&(h=1e-4),Math.floor(t+h)};v.exports=T}),5470:(v=>{var T=function(t,h,g){return g===void 0&&(g=1e-4),t>h-g};v.exports=T}),94977:(v=>{var T=function(t,h,g){return g===void 0&&(g=1e-4),t<h+g};v.exports=T}),48379:((v,T,t)=>{v.exports={Ceil:t(75698),Equal:t(43855),Floor:t(25777),GreaterThan:t(5470),LessThan:t(94977)}}),75508:((v,T,t)=>{var h=t(36383),g=t(79291),o={Angle:t(25588),Distance:t(50994),Easing:t(48820),Fuzzy:t(48379),Interpolation:t(38289),Pow2:t(49001),Snap:t(73697),RandomDataGenerator:t(28453),Average:t(53307),Bernstein:t(85710),Between:t(30976),CatmullRom:t(87842),CeilTo:t(26302),Clamp:t(45319),DegToRad:t(39506),Difference:t(61241),Euler:t(38857),Factorial:t(6411),FloatBetween:t(99472),FloorTo:t(77623),FromPercent:t(62945),GetSpeed:t(38265),IsEven:t(78702),IsEvenStrict:t(94883),Linear:t(28915),LinearXY:t(94908),MaxAdd:t(86883),Median:t(50040),MinSub:t(37204),Percent:t(65201),RadToDeg:t(43396),RandomXY:t(74362),RandomXYZ:t(60706),RandomXYZW:t(67421),Rotate:t(36305),RotateAround:t(11520),RotateAroundDistance:t(1163),RotateTo:t(70336),RoundAwayFromZero:t(2284),RoundTo:t(41013),SinCosTableGenerator:t(16922),SmootherStep:t(54261),SmoothStep:t(7602),ToXY:t(44408),TransformXY:t(85955),Within:t(60417),Wrap:t(15994),Vector2:t(26099),Vector3:t(25836),Vector4:t(61369),Matrix3:t(94434),Matrix4:t(37867),Quaternion:t(15746),RotateVec3:t(72678)};o=g(!1,o,h),v.exports=o}),89318:((v,T,t)=>{var h=t(85710),g=function(o,a){for(var r=0,e=o.length-1,s=0;s<=e;s++)r+=Math.pow(1-a,e-s)*Math.pow(a,s)*o[s]*h(e,s);return r};v.exports=g}),77259:((v,T,t)=>{var h=t(87842),g=function(o,a){var r=o.length-1,e=r*a,s=Math.floor(e);return o[0]===o[r]?(a<0&&(s=Math.floor(e=r*(1+a))),h(e-s,o[(s-1+r)%r],o[s],o[(s+1)%r],o[(s+2)%r])):a<0?o[0]-(h(-e,o[0],o[0],o[1],o[1])-o[0]):a>1?o[r]-(h(e-r,o[r],o[r],o[r-1],o[r-1])-o[r]):h(e-s,o[s?s-1:0],o[s],o[r<s+1?r:s+1],o[r<s+2?r:s+2])};v.exports=g}),36316:(v=>{function T(a,r){var e=1-a;return e*e*e*r}function t(a,r){var e=1-a;return 3*e*e*a*r}function h(a,r){return 3*(1-a)*a*a*r}function g(a,r){return a*a*a*r}var o=function(a,r,e,s,u){return T(a,r)+t(a,e)+h(a,s)+g(a,u)};v.exports=o}),28392:((v,T,t)=>{var h=t(28915),g=function(o,a){var r=o.length-1,e=r*a,s=Math.floor(e);return a<0?h(o[0],o[1],e):a>1?h(o[r],o[r-1],r-e):h(o[s],o[s+1>r?r:s+1],e-s)};v.exports=g}),32112:(v=>{function T(o,a){var r=1-o;return r*r*a}function t(o,a){return 2*(1-o)*o*a}function h(o,a){return o*o*a}var g=function(o,a,r,e){return T(o,a)+t(o,r)+h(o,e)};v.exports=g}),47235:((v,T,t)=>{var h=t(7602),g=function(o,a,r){return a+(r-a)*h(o,0,1)};v.exports=g}),50178:((v,T,t)=>{var h=t(54261),g=function(o,a,r){return a+(r-a)*h(o,0,1)};v.exports=g}),38289:((v,T,t)=>{v.exports={Bezier:t(89318),CatmullRom:t(77259),CubicBezier:t(36316),Linear:t(28392),QuadraticBezier:t(32112),SmoothStep:t(47235),SmootherStep:t(50178)}}),98439:(v=>{var T=function(t){var h=Math.log(t)/.6931471805599453;return 1<<Math.ceil(h)};v.exports=T}),50030:(v=>{var T=function(t,h){return t>0&&(t&t-1)===0&&h>0&&(h&h-1)===0};v.exports=T}),81230:(v=>{var T=function(t){return t>0&&(t&t-1)===0};v.exports=T}),49001:((v,T,t)=>{v.exports={GetNext:t(98439),IsSize:t(50030),IsValue:t(81230)}}),28453:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a){a===void 0&&(a=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],a&&this.init(a)},rnd:function(){var o=2091639*this.s0+this.c*23283064365386963e-26;return this.c=o|0,this.s0=this.s1,this.s1=this.s2,this.s2=o-this.c,this.s2},hash:function(o){var a,r=this.n;o=o.toString();for(var e=0;e<o.length;e++)r+=o.charCodeAt(e),a=.02519603282416938*r,r=a>>>0,a-=r,a*=r,r=a>>>0,a-=r,r+=a*4294967296;return this.n=r,(r>>>0)*23283064365386963e-26},init:function(o){typeof o=="string"?this.state(o):this.sow(o)},sow:function(o){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!o)for(var a=0;a<o.length&&o[a]!=null;a++){var r=o[a];this.s0-=this.hash(r),this.s0+=~~(this.s0<0),this.s1-=this.hash(r),this.s1+=~~(this.s1<0),this.s2-=this.hash(r),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(o,a){return Math.floor(this.realInRange(0,a-o+1)+o)},between:function(o,a){return Math.floor(this.realInRange(0,a-o+1)+o)},realInRange:function(o,a){return this.frac()*(a-o)+o},normal:function(){return 1-2*this.frac()},uuid:function(){var o="",a="";for(a=o="";o++<36;a+=~o%5|o*3&4?(o^15?8^this.frac()*(o^20?16:4):4).toString(16):"-");return a},pick:function(o){return o[this.integerInRange(0,o.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(o){return o[~~(Math.pow(this.frac(),2)*(o.length-.5)+.5)]},timestamp:function(o,a){return this.realInRange(o||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(o){return typeof o=="string"&&o.match(/^!rnd/)&&(o=o.split(","),this.c=parseFloat(o[1]),this.s0=parseFloat(o[2]),this.s1=parseFloat(o[3]),this.s2=parseFloat(o[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(o){for(var a=o.length-1,r=a;r>0;r--){var e=Math.floor(this.frac()*(r+1)),s=o[e];o[e]=o[r],o[r]=s}return o}});v.exports=g}),63448:(v=>{var T=function(t,h,g,o){return g===void 0&&(g=0),h===0?t:(t-=g,t=h*Math.ceil(t/h),o?(g+t)/h:g+t)};v.exports=T}),56583:(v=>{var T=function(t,h,g,o){return g===void 0&&(g=0),h===0?t:(t-=g,t=h*Math.floor(t/h),o?(g+t)/h:g+t)};v.exports=T}),77720:(v=>{var T=function(t,h,g,o){return g===void 0&&(g=0),h===0?t:(t-=g,t=h*Math.round(t/h),o?(g+t)/h:g+t)};v.exports=T}),73697:((v,T,t)=>{v.exports={Ceil:t(63448),Floor:t(56583),To:t(77720)}}),85454:((v,T,t)=>{t(63595);var h=t(8054),g=t(79291),o={Actions:t(61061),Animations:t(60421),BlendModes:t(10312),Cache:t(83388),Cameras:t(26638),Core:t(42857),Class:t(83419),Create:t(15822),Curves:t(25410),Data:t(44965),Display:t(27460),DOM:t(84902),Events:t(93055),FX:t(66064),Game:t(50127),GameObjects:t(77856),Geom:t(55738),Input:t(14350),Loader:t(57777),Math:t(75508),Physics:t(44563),Plugins:t(18922),Renderer:t(36909),Scale:t(93364),ScaleModes:t(29795),Scene:t(97482),Scenes:t(62194),Structs:t(41392),Textures:t(27458),Tilemaps:t(62501),Time:t(90291),Tweens:t(43066),Utils:t(91799)};o.Sound=t(23717),o=g(!1,o,h),v.exports=o,t.g.Phaser=o}),71289:((v,T,t)=>{var h=t(83419),g=t(92209),o=t(88571),a=new h({Extends:o,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(e,s,u,n,l){o.call(this,e,s,u,n,l),this.body=null}});v.exports=a}),86689:((v,T,t)=>{var h=t(83419),g=t(39506),o=t(20339),a=t(89774),r=t(66022),e=t(95540),s=t(46975),u=t(72441),n=t(47956),l=t(37277),c=t(44594),d=t(26099),f=t(82248),m=new h({initialize:function(S){this.scene=S,this.systems=S.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,S.sys.events.once(c.BOOT,this.boot,this),S.sys.events.on(c.START,this.start,this)},boot:function(){this.world=new f(this.scene,this.config),this.add=new r(this.world),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new f(this.scene,this.config),this.add=new r(this.world));var y=this.systems.events;e(this.config,"customUpdate",!1)||y.on(c.UPDATE,this.world.update,this.world),y.on(c.POST_UPDATE,this.world.postUpdate,this.world),y.once(c.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(c.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(c.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,S=this.systems.settings.physics,C=s(e(S,"arcade",{}),e(y,"arcade",{}));return C},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(y,S,C,E,P){return C===void 0&&(C=null),E===void 0&&(E=null),P===void 0&&(P=C),this.world.collideObjects(y,S,C,E,P,!0)},collide:function(y,S,C,E,P){return C===void 0&&(C=null),E===void 0&&(E=null),P===void 0&&(P=C),this.world.collideObjects(y,S,C,E,P,!1)},collideTiles:function(y,S,C,E,P){return this.world.collideTiles(y,S,C,E,P)},overlapTiles:function(y,S,C,E,P){return this.world.overlapTiles(y,S,C,E,P)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,S,C,E,P,A){E===void 0&&(E=60);var F=Math.atan2(C-y.y,S-y.x);return y.body.acceleration.setToPolar(F,E),P!==void 0&&A!==void 0&&y.body.maxVelocity.set(P,A),F},accelerateToObject:function(y,S,C,E,P){return this.accelerateTo(y,S.x,S.y,C,E,P)},closest:function(y,S){S||(S=this.world.bodies.entries);for(var C=Number.MAX_VALUE,E=null,P=y.x,A=y.y,F=S.length,G=0;G<F;G++){var D=S[G],L=D.body||D;if(!(y===D||y===L||y===L.gameObject||y===L.center)){var b=a(P,A,L.center.x,L.center.y);b<C&&(E=D,C=b)}}return E},furthest:function(y,S){S||(S=this.world.bodies.entries);for(var C=-1,E=null,P=y.x,A=y.y,F=S.length,G=0;G<F;G++){var D=S[G],L=D.body||D;if(!(y===D||y===L||y===L.gameObject||y===L.center)){var b=a(P,A,L.center.x,L.center.y);b>C&&(E=D,C=b)}}return E},moveTo:function(y,S,C,E,P){E===void 0&&(E=60),P===void 0&&(P=0);var A=Math.atan2(C-y.y,S-y.x);return P>0&&(E=o(y.x,y.y,S,C)/(P/1e3)),y.body.velocity.setToPolar(A,E),A},moveToObject:function(y,S,C,E){return this.moveTo(y,S.x,S.y,C,E)},velocityFromAngle:function(y,S,C){return S===void 0&&(S=60),C===void 0&&(C=new d),C.setToPolar(g(y),S)},velocityFromRotation:function(y,S,C){return S===void 0&&(S=60),C===void 0&&(C=new d),C.setToPolar(y,S)},overlapRect:function(y,S,C,E,P,A){return n(this.world,y,S,C,E,P,A)},overlapCirc:function(y,S,C,E,P){return u(this.world,y,S,C,E,P)},shutdown:function(){if(this.world){var y=this.systems.events;y.off(c.UPDATE,this.world.update,this.world),y.off(c.POST_UPDATE,this.world.postUpdate,this.world),y.off(c.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",m,"arcadePhysics"),v.exports=m}),13759:((v,T,t)=>{var h=t(83419),g=t(92209),o=t(68287),a=new h({Extends:o,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(e,s,u,n,l){o.call(this,e,s,u,n,l),this.body=null}});v.exports=a}),37742:((v,T,t)=>{var h=t(83419),g=t(78389),o=t(37747),a=t(63012),r=t(43396),e=t(87841),s=t(37303),u=t(95829),n=t(26099),l=new h({Mixins:[g],initialize:function(d,f){var m=64,y=64,S={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},C=f!==void 0;C&&f.displayWidth&&(m=f.displayWidth,y=f.displayHeight),C||(f=S),this.world=d,this.gameObject=C?f:void 0,this.isBody=!0,this.transform={x:f.x,y:f.y,rotation:f.angle,scaleX:f.scaleX,scaleY:f.scaleY,displayOriginX:f.displayOriginX,displayOriginY:f.displayOriginY},this.debugShowBody=d.defaults.debugShowBody,this.debugShowVelocity=d.defaults.debugShowVelocity,this.debugBodyColor=d.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(f.x-f.scaleX*f.displayOriginX,f.y-f.scaleY*f.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=f.angle,this.preRotation=f.angle,this.width=m,this.height=y,this.sourceWidth=m,this.sourceHeight=y,f.frame&&(this.sourceWidth=f.frame.realWidth,this.sourceHeight=f.frame.realHeight),this.halfWidth=Math.abs(m/2),this.halfHeight=Math.abs(y/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new n,this.newVelocity=new n,this.deltaMax=new n,this.acceleration=new n,this.allowDrag=!0,this.drag=new n,this.allowGravity=!0,this.gravity=new n,this.bounce=new n,this.worldBounce=null,this.customBoundsRectangle=d.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new n(1e4,1e4),this.maxSpeed=-1,this.friction=new n(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=o.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new n(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=u(!1),this.touching=u(!0),this.wasTouching=u(!0),this.blocked=u(!0),this.syncBounds=!1,this.physicsType=o.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=f.scaleX,this._sy=f.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new e,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var c=this.gameObject,d=this.transform;if(c.parentContainer){var f=c.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);d.x=f.tx,d.y=f.ty,d.rotation=r(f.rotation),d.scaleX=f.scaleX,d.scaleY=f.scaleY,d.displayOriginX=c.displayOriginX,d.displayOriginY=c.displayOriginY}else d.x=c.x,d.y=c.y,d.rotation=c.angle,d.scaleX=c.scaleX,d.scaleY=c.scaleY,d.displayOriginX=c.displayOriginX,d.displayOriginY=c.displayOriginY;var m=!1;if(this.syncBounds){var y=c.getBounds(this._bounds);this.width=y.width,this.height=y.height,m=!0}else{var S=Math.abs(d.scaleX),C=Math.abs(d.scaleY);(this._sx!==S||this._sy!==C)&&(this.width=this.sourceWidth*S,this.height=this.sourceHeight*C,this._sx=S,this._sy=C,m=!0)}m&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var c=this.transform;this.position.x=c.x+c.scaleX*(this.offset.x-c.displayOriginX),this.position.y=c.y+c.scaleY*(this.offset.y-c.displayOriginY),this.updateCenter()},resetFlags:function(c){c===void 0&&(c=!1);var d=this.wasTouching,f=this.touching,m=this.blocked;c?u(!0,d):(d.none=f.none,d.up=f.up,d.down=f.down,d.left=f.left,d.right=f.right),u(!0,f),u(!0,m),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(c,d){if(c&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var f=this.position;this.prev.x=f.x,this.prev.y=f.y,this.prevFrame.x=f.x,this.prevFrame.y=f.y}c&&this.update(d)},update:function(c){var d=this.prev,f=this.position,m=this.velocity;if(d.set(f.x,f.y),!this.moves){this._dx=f.x-d.x,this._dy=f.y-d.y;return}if(this.directControl){var y=this.autoFrame;m.set((f.x-y.x)/c,(f.y-y.y)/c),this.world.updateMotion(this,c),this._dx=f.x-y.x,this._dy=f.y-y.y}else this.world.updateMotion(this,c),this.newVelocity.set(m.x*c,m.y*c),f.add(this.newVelocity),this._dx=f.x-d.x,this._dy=f.y-d.y;var S=m.x,C=m.y;if(this.updateCenter(),this.angle=Math.atan2(C,S),this.speed=Math.sqrt(S*S+C*C),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var E=this.blocked;this.world.emit(a.WORLD_BOUNDS,this,E.up,E.down,E.left,E.right)}},postUpdate:function(){var c=this.position,d=c.x-this.prevFrame.x,f=c.y-this.prevFrame.y,m=this.gameObject;if(this.moves){var y=this.deltaMax.x,S=this.deltaMax.y;y!==0&&d!==0&&(d<0&&d<-y?d=-y:d>0&&d>y&&(d=y)),S!==0&&f!==0&&(f<0&&f<-S?f=-S:f>0&&f>S&&(f=S)),m&&(m.x+=d,m.y+=f)}d<0?this.facing=o.FACING_LEFT:d>0&&(this.facing=o.FACING_RIGHT),f<0?this.facing=o.FACING_UP:f>0&&(this.facing=o.FACING_DOWN),this.allowRotation&&m&&(m.angle+=this.deltaZ()),this._tx=d,this._ty=f,this.autoFrame.set(c.x,c.y)},setBoundsRectangle:function(c){return this.customBoundsRectangle=c||this.world.bounds,this},checkWorldBounds:function(){var c=this.position,d=this.velocity,f=this.blocked,m=this.customBoundsRectangle,y=this.world.checkCollision,S=this.worldBounce?-this.worldBounce.x:-this.bounce.x,C=this.worldBounce?-this.worldBounce.y:-this.bounce.y,E=!1;return c.x<m.x&&y.left?(c.x=m.x,d.x*=S,f.left=!0,E=!0):this.right>m.right&&y.right&&(c.x=m.right-this.width,d.x*=S,f.right=!0,E=!0),c.y<m.y&&y.up?(c.y=m.y,d.y*=C,f.up=!0,E=!0):this.bottom>m.bottom&&y.down&&(c.y=m.bottom-this.height,d.y*=C,f.down=!0,E=!0),E&&(this.blocked.none=!1,this.updateCenter()),E},setOffset:function(c,d){return d===void 0&&(d=c),this.offset.set(c,d),this},setGameObject:function(c,d){if(d===void 0&&(d=!0),!c||!c.hasTransformComponent)return this;var f=this.world;return this.gameObject&&this.gameObject.body&&(f.disable(this.gameObject),this.gameObject.body=null),c.body&&f.disable(c),this.gameObject=c,c.body=this,this.setSize(),this.enable=d,this},setSize:function(c,d,f){f===void 0&&(f=!0);var m=this.gameObject;if(m&&(!c&&m.frame&&(c=m.frame.realWidth),!d&&m.frame&&(d=m.frame.realHeight)),this.sourceWidth=c,this.sourceHeight=d,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),f&&m&&m.getCenter){var y=(m.width-c)/2,S=(m.height-d)/2;this.offset.set(y,S)}return this.isCircle=!1,this.radius=0,this},setCircle:function(c,d,f){return d===void 0&&(d=this.offset.x),f===void 0&&(f=this.offset.y),c>0?(this.isCircle=!0,this.radius=c,this.sourceWidth=c*2,this.sourceHeight=c*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(d,f),this.updateCenter()):this.isCircle=!1,this},reset:function(c,d){this.stop();var f=this.gameObject;f&&(f.setPosition(c,d),this.rotation=f.angle,this.preRotation=f.angle);var m=this.position;f&&f.getTopLeft?f.getTopLeft(m):m.set(c,d),this.prev.copy(m),this.prevFrame.copy(m),this.autoFrame.copy(m),f&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(c){return c.x=this.x,c.y=this.y,c.right=this.right,c.bottom=this.bottom,c},hitTest:function(c,d){if(!this.isCircle)return s(this,c,d);if(this.radius>0&&c>=this.left&&c<=this.right&&d>=this.top&&d<=this.bottom){var f=(this.center.x-c)*(this.center.x-c),m=(this.center.y-d)*(this.center.y-d);return f+m<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(c){var d=this.position,f=d.x+this.halfWidth,m=d.y+this.halfHeight;this.debugShowBody&&(c.lineStyle(c.defaultStrokeWidth,this.debugBodyColor),this.isCircle?c.strokeCircle(f,m,this.width/2):(this.checkCollision.up&&c.lineBetween(d.x,d.y,d.x+this.width,d.y),this.checkCollision.right&&c.lineBetween(d.x+this.width,d.y,d.x+this.width,d.y+this.height),this.checkCollision.down&&c.lineBetween(d.x,d.y+this.height,d.x+this.width,d.y+this.height),this.checkCollision.left&&c.lineBetween(d.x,d.y,d.x,d.y+this.height))),this.debugShowVelocity&&(c.lineStyle(c.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),c.lineBetween(f,m,f+this.velocity.x/2,m+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(c){return c===void 0&&(c=!0),this.directControl=c,this},setCollideWorldBounds:function(c,d,f,m){c===void 0&&(c=!0),this.collideWorldBounds=c;var y=d!==void 0,S=f!==void 0;return(y||S)&&(this.worldBounce||(this.worldBounce=new n),y&&(this.worldBounce.x=d),S&&(this.worldBounce.y=f)),m!==void 0&&(this.onWorldBounds=m),this},setVelocity:function(c,d){return this.velocity.set(c,d),c=this.velocity.x,d=this.velocity.y,this.speed=Math.sqrt(c*c+d*d),this},setVelocityX:function(c){return this.setVelocity(c,this.velocity.y)},setVelocityY:function(c){return this.setVelocity(this.velocity.x,c)},setMaxVelocity:function(c,d){return this.maxVelocity.set(c,d),this},setMaxVelocityX:function(c){return this.maxVelocity.x=c,this},setMaxVelocityY:function(c){return this.maxVelocity.y=c,this},setMaxSpeed:function(c){return this.maxSpeed=c,this},setSlideFactor:function(c,d){return this.slideFactor.set(c,d),this},setBounce:function(c,d){return this.bounce.set(c,d),this},setBounceX:function(c){return this.bounce.x=c,this},setBounceY:function(c){return this.bounce.y=c,this},setAcceleration:function(c,d){return this.acceleration.set(c,d),this},setAccelerationX:function(c){return this.acceleration.x=c,this},setAccelerationY:function(c){return this.acceleration.y=c,this},setAllowDrag:function(c){return c===void 0&&(c=!0),this.allowDrag=c,this},setAllowGravity:function(c){return c===void 0&&(c=!0),this.allowGravity=c,this},setAllowRotation:function(c){return c===void 0&&(c=!0),this.allowRotation=c,this},setDrag:function(c,d){return this.drag.set(c,d),this},setDamping:function(c){return this.useDamping=c,this},setDragX:function(c){return this.drag.x=c,this},setDragY:function(c){return this.drag.y=c,this},setGravity:function(c,d){return this.gravity.set(c,d),this},setGravityX:function(c){return this.gravity.x=c,this},setGravityY:function(c){return this.gravity.y=c,this},setFriction:function(c,d){return this.friction.set(c,d),this},setFrictionX:function(c){return this.friction.x=c,this},setFrictionY:function(c){return this.friction.y=c,this},setAngularVelocity:function(c){return this.angularVelocity=c,this},setAngularAcceleration:function(c){return this.angularAcceleration=c,this},setAngularDrag:function(c){return this.angularDrag=c,this},setMass:function(c){return this.mass=c,this},setImmovable:function(c){return c===void 0&&(c=!0),this.immovable=c,this},setEnable:function(c){return c===void 0&&(c=!0),this.enable=c,this},processX:function(c,d,f,m){this.x+=c,this.updateCenter(),d!==null&&(this.velocity.x=d*this.slideFactor.x);var y=this.blocked;f&&(y.left=!0,y.none=!1),m&&(y.right=!0,y.none=!1)},processY:function(c,d,f,m){this.y+=c,this.updateCenter(),d!==null&&(this.velocity.y=d*this.slideFactor.y);var y=this.blocked;f&&(y.up=!0,y.none=!1),m&&(y.down=!0,y.none=!1)},x:{get:function(){return this.position.x},set:function(c){this.position.x=c}},y:{get:function(){return this.position.y},set:function(c){this.position.y=c}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});v.exports=l}),79342:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,s,u,n,l){this.world=a,this.name="",this.active=!0,this.overlapOnly=r,this.object1=e,this.object2=s,this.collideCallback=u,this.processCallback=n,this.callbackContext=l},setName:function(o){return this.name=o,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});v.exports=g}),66022:((v,T,t)=>{var h=t(71289),g=t(13759),o=t(37742),a=t(83419),r=t(37747),e=t(60758),s=t(72624),u=t(71464),n=new a({initialize:function(c){this.world=c,this.scene=c.scene,this.sys=c.scene.sys},collider:function(l,c,d,f,m){return this.world.addCollider(l,c,d,f,m)},overlap:function(l,c,d,f,m){return this.world.addOverlap(l,c,d,f,m)},existing:function(l,c){var d=c?r.STATIC_BODY:r.DYNAMIC_BODY;return this.world.enableBody(l,d),l},staticImage:function(l,c,d,f){var m=new h(this.scene,l,c,d,f);return this.sys.displayList.add(m),this.world.enableBody(m,r.STATIC_BODY),m},image:function(l,c,d,f){var m=new h(this.scene,l,c,d,f);return this.sys.displayList.add(m),this.world.enableBody(m,r.DYNAMIC_BODY),m},staticSprite:function(l,c,d,f){var m=new g(this.scene,l,c,d,f);return this.sys.displayList.add(m),this.sys.updateList.add(m),this.world.enableBody(m,r.STATIC_BODY),m},sprite:function(l,c,d,f){var m=new g(this.scene,l,c,d,f);return this.sys.displayList.add(m),this.sys.updateList.add(m),this.world.enableBody(m,r.DYNAMIC_BODY),m},staticGroup:function(l,c){return this.sys.updateList.add(new u(this.world,this.world.scene,l,c))},group:function(l,c){return this.sys.updateList.add(new e(this.world,this.world.scene,l,c))},body:function(l,c,d,f){var m=new o(this.world);return m.position.set(l,c),d&&f&&m.setSize(d,f),this.world.add(m,r.DYNAMIC_BODY),m},staticBody:function(l,c,d,f){var m=new s(this.world);return m.position.set(l,c),d&&f&&m.setSize(d,f),this.world.add(m,r.STATIC_BODY),m},destroy:function(){this.world=null,this.scene=null,this.sys=null}});v.exports=n}),79599:(v=>{var T=function(t){var h=0;if(!Array.isArray(t))h=t;else for(var g=0;g<t.length;g++)h|=t[g];return h};v.exports=T}),64897:((v,T,t)=>{var h=t(37747),g=function(o,a,r,e){var s=0,u=o.deltaAbsX()+a.deltaAbsX()+e;return o._dx===0&&a._dx===0?(o.embedded=!0,a.embedded=!0):o._dx>a._dx?(s=o.right-a.x,s>u&&!r||o.checkCollision.right===!1||a.checkCollision.left===!1?s=0:(o.touching.none=!1,o.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.right=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.left=!0))):o._dx<a._dx&&(s=o.x-a.width-a.x,-s>u&&!r||o.checkCollision.left===!1||a.checkCollision.right===!1?s=0:(o.touching.none=!1,o.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.left=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.right=!0))),o.overlapX=s,a.overlapX=s,s};v.exports=g}),45170:((v,T,t)=>{var h=t(37747),g=function(o,a,r,e){var s=0,u=o.deltaAbsY()+a.deltaAbsY()+e;return o._dy===0&&a._dy===0?(o.embedded=!0,a.embedded=!0):o._dy>a._dy?(s=o.bottom-a.y,s>u&&!r||o.checkCollision.down===!1||a.checkCollision.up===!1?s=0:(o.touching.none=!1,o.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.down=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.up=!0))):o._dy<a._dy&&(s=o.y-a.bottom,-s>u&&!r||o.checkCollision.up===!1||a.checkCollision.down===!1?s=0:(o.touching.none=!1,o.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.up=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.down=!0))),o.overlapY=s,a.overlapY=s,s};v.exports=g}),60758:((v,T,t)=>{var h=t(13759),g=t(83419),o=t(78389),a=t(37747),r=t(95540),e=t(26479),s=t(41212),u=new g({Extends:e,Mixins:[o],initialize:function(l,c,d,f){if(!d&&!f)f={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(s(d))f=d,d=null,f.internalCreateCallback=this.createCallbackHandler,f.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(d)&&s(d[0])){var m=this;d.forEach(function(y){y.internalCreateCallback=m.createCallbackHandler,y.internalRemoveCallback=m.removeCallbackHandler,y.classType=r(y,"classType",h)}),f=null}else f={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=l,f&&(f.classType=r(f,"classType",h)),this.physicsType=a.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:r(f,"collideWorldBounds",!1),setBoundsRectangle:r(f,"customBoundsRectangle",null),setAccelerationX:r(f,"accelerationX",0),setAccelerationY:r(f,"accelerationY",0),setAllowDrag:r(f,"allowDrag",!0),setAllowGravity:r(f,"allowGravity",!0),setAllowRotation:r(f,"allowRotation",!0),setDamping:r(f,"useDamping",!1),setBounceX:r(f,"bounceX",0),setBounceY:r(f,"bounceY",0),setDragX:r(f,"dragX",0),setDragY:r(f,"dragY",0),setEnable:r(f,"enable",!0),setGravityX:r(f,"gravityX",0),setGravityY:r(f,"gravityY",0),setFrictionX:r(f,"frictionX",0),setFrictionY:r(f,"frictionY",0),setMaxSpeed:r(f,"maxSpeed",-1),setMaxVelocityX:r(f,"maxVelocityX",1e4),setMaxVelocityY:r(f,"maxVelocityY",1e4),setVelocityX:r(f,"velocityX",0),setVelocityY:r(f,"velocityY",0),setAngularVelocity:r(f,"angularVelocity",0),setAngularAcceleration:r(f,"angularAcceleration",0),setAngularDrag:r(f,"angularDrag",0),setMass:r(f,"mass",1),setImmovable:r(f,"immovable",!1)},e.call(this,c,d,f),this.type="PhysicsGroup"},createCallbackHandler:function(n){n.body||this.world.enableBody(n,a.DYNAMIC_BODY);var l=n.body;for(var c in this.defaults)l[c](this.defaults[c])},removeCallbackHandler:function(n){n.body&&this.world.disableBody(n)},setVelocity:function(n,l,c){c===void 0&&(c=0);for(var d=this.getChildren(),f=0;f<d.length;f++)d[f].body.velocity.set(n+f*c,l+f*c);return this},setVelocityX:function(n,l){l===void 0&&(l=0);for(var c=this.getChildren(),d=0;d<c.length;d++)c[d].body.velocity.x=n+d*l;return this},setVelocityY:function(n,l){l===void 0&&(l=0);for(var c=this.getChildren(),d=0;d<c.length;d++)c[d].body.velocity.y=n+d*l;return this}});v.exports=u}),3017:(v=>{var T,t,h,g,o,a,r,e,s,u,n,l,c,d,f,m,y,S=function(G,D,L){T=G,t=D;var b=T.velocity.x,I=t.velocity.x;return h=T.pushable,s=T._dx<0,u=T._dx>0,n=T._dx===0,f=Math.abs(T.right-t.x)<=Math.abs(t.right-T.x),r=I-b*T.bounce.x,g=t.pushable,l=t._dx<0,c=t._dx>0,d=t._dx===0,m=!f,e=b-I*t.bounce.x,y=Math.abs(L),C()},C=function(){return u&&f&&t.blocked.right?(T.processX(-y,r,!1,!0),1):s&&m&&t.blocked.left?(T.processX(y,r,!0),1):c&&m&&T.blocked.right?(t.processX(-y,e,!1,!0),2):l&&f&&T.blocked.left?(t.processX(y,e,!0),2):0},E=function(){var G=T.velocity.x,D=t.velocity.x,L=Math.sqrt(D*D*t.mass/T.mass)*(D>0?1:-1),b=Math.sqrt(G*G*T.mass/t.mass)*(G>0?1:-1),I=(L+b)*.5;return L-=I,b-=I,o=I+L*T.bounce.x,a=I+b*t.bounce.x,s&&m?P(0):l&&f?P(1):u&&f?P(2):c&&m?P(3):!1},P=function(G){if(h&&g)y*=.5,G===0||G===3?(T.processX(y,o),t.processX(-y,a)):(T.processX(-y,o),t.processX(y,a));else if(h&&!g)G===0||G===3?T.processX(y,r,!0):T.processX(-y,r,!1,!0);else if(!h&&g)G===0||G===3?t.processX(-y,e,!1,!0):t.processX(y,e,!0);else{var D=y*.5;G===0?d?(T.processX(y,0,!0),t.processX(0,null,!1,!0)):c?(T.processX(D,0,!0),t.processX(-D,0,!1,!0)):(T.processX(D,t.velocity.x,!0),t.processX(-D,null,!1,!0)):G===1?n?(T.processX(0,null,!1,!0),t.processX(y,0,!0)):u?(T.processX(-D,0,!1,!0),t.processX(D,0,!0)):(T.processX(-D,null,!1,!0),t.processX(D,T.velocity.x,!0)):G===2?d?(T.processX(-y,0,!1,!0),t.processX(0,null,!0)):l?(T.processX(-D,0,!1,!0),t.processX(D,0,!0)):(T.processX(-D,t.velocity.x,!1,!0),t.processX(D,null,!0)):G===3&&(n?(T.processX(0,null,!0),t.processX(-y,0,!1,!0)):s?(T.processX(D,0,!0),t.processX(-D,0,!1,!0)):(T.processX(D,t.velocity.y,!0),t.processX(-D,null,!1,!0)))}return!0},A=function(G){if(G===1?t.velocity.x=0:f?t.processX(y,e,!0):t.processX(-y,e,!1,!0),T.moves){var D=T.directControl?T.y-T.autoFrame.y:T.y-T.prev.y;t.y+=D*T.friction.y,t._dy=t.y-t.prev.y}},F=function(G){if(G===2?T.velocity.x=0:m?T.processX(y,r,!0):T.processX(-y,r,!1,!0),t.moves){var D=t.directControl?t.y-t.autoFrame.y:t.y-t.prev.y;T.y+=D*t.friction.y,T._dy=T.y-T.prev.y}};v.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:A,RunImmovableBody2:F}}),47962:(v=>{var T,t,h,g,o,a,r,e,s,u,n,l,c,d,f,m,y,S=function(G,D,L){T=G,t=D;var b=T.velocity.y,I=t.velocity.y;return h=T.pushable,s=T._dy<0,u=T._dy>0,n=T._dy===0,f=Math.abs(T.bottom-t.y)<=Math.abs(t.bottom-T.y),r=I-b*T.bounce.y,g=t.pushable,l=t._dy<0,c=t._dy>0,d=t._dy===0,m=!f,e=b-I*t.bounce.y,y=Math.abs(L),C()},C=function(){return u&&f&&t.blocked.down?(T.processY(-y,r,!1,!0),1):s&&m&&t.blocked.up?(T.processY(y,r,!0),1):c&&m&&T.blocked.down?(t.processY(-y,e,!1,!0),2):l&&f&&T.blocked.up?(t.processY(y,e,!0),2):0},E=function(){var G=T.velocity.y,D=t.velocity.y,L=Math.sqrt(D*D*t.mass/T.mass)*(D>0?1:-1),b=Math.sqrt(G*G*T.mass/t.mass)*(G>0?1:-1),I=(L+b)*.5;return L-=I,b-=I,o=I+L*T.bounce.y,a=I+b*t.bounce.y,s&&m?P(0):l&&f?P(1):u&&f?P(2):c&&m?P(3):!1},P=function(G){if(h&&g)y*=.5,G===0||G===3?(T.processY(y,o),t.processY(-y,a)):(T.processY(-y,o),t.processY(y,a));else if(h&&!g)G===0||G===3?T.processY(y,r,!0):T.processY(-y,r,!1,!0);else if(!h&&g)G===0||G===3?t.processY(-y,e,!1,!0):t.processY(y,e,!0);else{var D=y*.5;G===0?d?(T.processY(y,0,!0),t.processY(0,null,!1,!0)):c?(T.processY(D,0,!0),t.processY(-D,0,!1,!0)):(T.processY(D,t.velocity.y,!0),t.processY(-D,null,!1,!0)):G===1?n?(T.processY(0,null,!1,!0),t.processY(y,0,!0)):u?(T.processY(-D,0,!1,!0),t.processY(D,0,!0)):(T.processY(-D,null,!1,!0),t.processY(D,T.velocity.y,!0)):G===2?d?(T.processY(-y,0,!1,!0),t.processY(0,null,!0)):l?(T.processY(-D,0,!1,!0),t.processY(D,0,!0)):(T.processY(-D,t.velocity.y,!1,!0),t.processY(D,null,!0)):G===3&&(n?(T.processY(0,null,!0),t.processY(-y,0,!1,!0)):s?(T.processY(D,0,!0),t.processY(-D,0,!1,!0)):(T.processY(D,t.velocity.y,!0),t.processY(-D,null,!1,!0)))}return!0},A=function(G){if(G===1?t.velocity.y=0:f?t.processY(y,e,!0):t.processY(-y,e,!1,!0),T.moves){var D=T.directControl?T.x-T.autoFrame.x:T.x-T.prev.x;t.x+=D*T.friction.x,t._dx=t.x-t.prev.x}},F=function(G){if(G===2?T.velocity.y=0:m?T.processY(y,r,!0):T.processY(-y,r,!1,!0),t.moves){var D=t.directControl?t.x-t.autoFrame.x:t.x-t.prev.x;T.x+=D*t.friction.x,T._dx=T.x-T.prev.x}};v.exports={BlockCheck:C,Check:E,Set:S,Run:P,RunImmovableBody1:A,RunImmovableBody2:F}}),14087:((v,T,t)=>{var h=t(64897),g=t(3017),o=function(a,r,e,s,u){u===void 0&&(u=h(a,r,e,s));var n=a.immovable,l=r.immovable;if(e||u===0||n&&l||a.customSeparateX||r.customSeparateX)return u!==0||a.embedded&&r.embedded;var c=g.Set(a,r,u);return!n&&!l?c>0?!0:g.Check():(n?g.RunImmovableBody1(c):l&&g.RunImmovableBody2(c),!0)};v.exports=o}),89936:((v,T,t)=>{var h=t(45170),g=t(47962),o=function(a,r,e,s,u){u===void 0&&(u=h(a,r,e,s));var n=a.immovable,l=r.immovable;if(e||u===0||n&&l||a.customSeparateY||r.customSeparateY)return u!==0||a.embedded&&r.embedded;var c=g.Set(a,r,u);return!n&&!l?c>0?!0:g.Check():(n?g.RunImmovableBody1(c):l&&g.RunImmovableBody2(c),!0)};v.exports=o}),95829:(v=>{var T=function(t,h){return h===void 0&&(h={}),h.none=t,h.up=!1,h.down=!1,h.left=!1,h.right=!1,t||(h.up=!0,h.down=!0,h.left=!0,h.right=!0),h};v.exports=T}),72624:((v,T,t)=>{var h=t(87902),g=t(83419),o=t(78389),a=t(37747),r=t(37303),e=t(95829),s=t(26099),u=new g({Mixins:[o],initialize:function(l,c){var d=64,f=64,m={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},y=c!==void 0;y&&c.displayWidth&&(d=c.displayWidth,f=c.displayHeight),y||(c=m),this.world=l,this.gameObject=y?c:void 0,this.isBody=!0,this.debugShowBody=l.defaults.debugShowStaticBody,this.debugBodyColor=l.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new s,this.position=new s(c.x-d*c.originX,c.y-f*c.originY),this.width=d,this.height=f,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new s(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=s.ZERO,this.allowGravity=!1,this.gravity=s.ZERO,this.bounce=s.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=e(!1),this.touching=e(!0),this.wasTouching=e(!0),this.blocked=e(!0),this.physicsType=a.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(n,l,c){if(l===void 0&&(l=!0),c===void 0&&(c=!0),!n||!n.hasTransformComponent)return this;var d=this.world;return this.gameObject&&this.gameObject.body&&(d.disable(this.gameObject),this.gameObject.body=null),n.body&&d.disable(n),this.gameObject=n,n.body=this,this.setSize(),l&&this.updateFromGameObject(),this.enable=c,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var n=this.gameObject;return n.getTopLeft(this.position),this.width=n.displayWidth,this.height=n.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(n,l){return l===void 0&&(l=n),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n,l),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(n,l,c){c===void 0&&(c=!0);var d=this.gameObject;if(d&&d.frame&&(n||(n=d.frame.realWidth),l||(l=d.frame.realHeight)),this.world.staticTree.remove(this),this.width=n,this.height=l,this.halfWidth=Math.floor(n/2),this.halfHeight=Math.floor(l/2),c&&d&&d.getCenter){var f=d.displayWidth/2,m=d.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f-this.halfWidth,m-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(n,l,c){return l===void 0&&(l=this.offset.x),c===void 0&&(c=this.offset.y),n>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=n,this.width=n*2,this.height=n*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,c),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(n,l){var c=this.gameObject;n===void 0&&(n=c.x),l===void 0&&(l=c.y),this.world.staticTree.remove(this),c.setPosition(n,l),c.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(n){return n.x=this.x,n.y=this.y,n.right=this.right,n.bottom=this.bottom,n},hitTest:function(n,l){return this.isCircle?h(this,n,l):r(this,n,l)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(n){var l=this.position,c=l.x+this.halfWidth,d=l.y+this.halfHeight;this.debugShowBody&&(n.lineStyle(n.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?n.strokeCircle(c,d,this.width/2):n.strokeRect(l.x,l.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(n){return n<=0&&(n=.1),this.mass=n,this},x:{get:function(){return this.position.x},set:function(n){this.world.staticTree.remove(this),this.position.x=n,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(n){this.world.staticTree.remove(this),this.position.y=n,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});v.exports=u}),71464:((v,T,t)=>{var h=t(13759),g=t(83419),o=t(78389),a=t(37747),r=t(95540),e=t(26479),s=t(41212),u=new g({Extends:e,Mixins:[o],initialize:function(l,c,d,f){!d&&!f?f={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:h}:s(d)?(f=d,d=null,f.internalCreateCallback=this.createCallbackHandler,f.internalRemoveCallback=this.removeCallbackHandler,f.createMultipleCallback=this.createMultipleCallbackHandler,f.classType=r(f,"classType",h)):Array.isArray(d)&&s(d[0])?(f=d,d=null,f.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=r(m,"classType",h)})):f={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=l,this.physicsType=a.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,e.call(this,c,d,f),this.type="StaticPhysicsGroup"},createCallbackHandler:function(n){n.body||this.world.enableBody(n,a.STATIC_BODY)},removeCallbackHandler:function(n){n.body&&this.world.disableBody(n)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var n=this.children.entries,l=0;l<n.length;l++)n[l].body.reset();return this}});v.exports=u}),82248:((v,T,t)=>{var h=t(55495),g=t(37742),o=t(45319),a=t(83419),r=t(79342),e=t(37747),s=t(20339),u=t(52816),n=t(50792),l=t(63012),c=t(43855),d=t(5470),f=t(94977),m=t(64897),y=t(45170),S=t(96523),C=t(35154),E=t(36383),P=t(25774),A=t(96602),F=t(87841),G=t(59542),D=t(40012),L=t(14087),b=t(89936),I=t(35072),N=t(72624),Z=t(2483),U=t(61340),W=t(26099),X=t(15994),V=new a({Extends:n,initialize:function(z,B){n.call(this),this.scene=z,this.bodies=new I,this.staticBodies=new I,this.pendingDestroy=new I,this.colliders=new P,this.gravity=new W(C(B,"gravity.x",0),C(B,"gravity.y",0)),this.bounds=new F(C(B,"x",0),C(B,"y",0),C(B,"width",z.sys.scale.width),C(B,"height",z.sys.scale.height)),this.checkCollision={up:C(B,"checkCollision.up",!0),down:C(B,"checkCollision.down",!0),left:C(B,"checkCollision.left",!0),right:C(B,"checkCollision.right",!0)},this.fps=C(B,"fps",60),this.fixedStep=C(B,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=C(B,"timeScale",1),this.OVERLAP_BIAS=C(B,"overlapBias",4),this.TILE_BIAS=C(B,"tileBias",16),this.forceX=C(B,"forceX",!1),this.isPaused=C(B,"isPaused",!1),this._total=0,this.drawDebug=C(B,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:C(B,"debugShowBody",!0),debugShowStaticBody:C(B,"debugShowStaticBody",!0),debugShowVelocity:C(B,"debugShowVelocity",!0),bodyDebugColor:C(B,"debugBodyColor",16711935),staticBodyDebugColor:C(B,"debugStaticBodyColor",255),velocityDebugColor:C(B,"debugVelocityColor",65280)},this.maxEntries=C(B,"maxEntries",16),this.useTree=C(B,"useTree",!0),this.tree=new G(this.maxEntries),this.staticTree=new G(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(O,z){z===void 0&&(z=e.DYNAMIC_BODY),Array.isArray(O)||(O=[O]);for(var B=0;B<O.length;B++){var Y=O[B];if(Y.isParent)for(var k=Y.getChildren(),J=0;J<k.length;J++){var j=k[J];j.isParent?this.enable(j,z):this.enableBody(j,z)}else this.enableBody(Y,z)}},enableBody:function(O,z){return z===void 0&&(z=e.DYNAMIC_BODY),O.hasTransformComponent&&(O.body||(z===e.DYNAMIC_BODY?O.body=new g(this,O):z===e.STATIC_BODY&&(O.body=new N(this,O))),this.add(O.body)),O},add:function(O){return O.physicsType===e.DYNAMIC_BODY?this.bodies.set(O):O.physicsType===e.STATIC_BODY&&(this.staticBodies.set(O),this.staticTree.insert(O)),O.enable=!0,O},disable:function(O){Array.isArray(O)||(O=[O]);for(var z=0;z<O.length;z++){var B=O[z];if(B.isParent)for(var Y=B.getChildren(),k=0;k<Y.length;k++){var J=Y[k];J.isParent?this.disable(J):this.disableBody(J.body)}else this.disableBody(B.body)}},disableBody:function(O){this.remove(O),O.enable=!1},remove:function(O){O.physicsType===e.DYNAMIC_BODY?(this.tree.remove(O),this.bodies.delete(O)):O.physicsType===e.STATIC_BODY&&(this.staticBodies.delete(O),this.staticTree.remove(O))},createDebugGraphic:function(){var O=this.scene.sys.add.graphics({x:0,y:0});return O.setDepth(Number.MAX_VALUE),this.debugGraphic=O,this.drawDebug=!0,O},setBounds:function(O,z,B,Y,k,J,j,tt){return this.bounds.setTo(O,z,B,Y),k!==void 0&&this.setBoundsCollision(k,J,j,tt),this},setBoundsCollision:function(O,z,B,Y){return O===void 0&&(O=!0),z===void 0&&(z=!0),B===void 0&&(B=!0),Y===void 0&&(Y=!0),this.checkCollision.left=O,this.checkCollision.right=z,this.checkCollision.up=B,this.checkCollision.down=Y,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(O,z,B,Y,k){B===void 0&&(B=null),Y===void 0&&(Y=null),k===void 0&&(k=B);var J=new r(this,!1,O,z,B,Y,k);return this.colliders.add(J),J},addOverlap:function(O,z,B,Y,k){B===void 0&&(B=null),Y===void 0&&(Y=null),k===void 0&&(k=B);var J=new r(this,!0,O,z,B,Y,k);return this.colliders.add(J),J},removeCollider:function(O){return this.colliders.remove(O),this},setFPS:function(O){return this.fps=O,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(O,z){if(!(this.isPaused||this.bodies.size===0)){var B,Y=this._frameTime,k=this._frameTimeMS*this.timeScale;this._elapsed+=z;var J,j=this.bodies.entries,tt=this._elapsed>=k;for(this.fixedStep||(Y=z*.001,tt=!0,this._elapsed=0),B=0;B<j.length;B++)J=j[B],J.enable&&J.preUpdate(tt,Y);if(tt){this._elapsed-=k,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(j));var ut=this.colliders.update();for(B=0;B<ut.length;B++){var ht=ut[B];ht.active&&ht.update()}this.emit(l.WORLD_STEP,Y)}for(;this._elapsed>=k;)this._elapsed-=k,this.step(Y)}},step:function(O){var z,B,Y=this.bodies.entries,k=Y.length;for(z=0;z<k;z++)B=Y[z],B.enable&&B.update(O);this.useTree&&(this.tree.clear(),this.tree.load(Y));var J=this.colliders.update();for(z=0;z<J.length;z++){var j=J[z];j.active&&j.update()}this.emit(l.WORLD_STEP,O),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var O,z,B=this.bodies.entries,Y=B.length,k=this.bodies,J=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,O=0;O<Y;O++)z=B[O],z.enable&&z.postUpdate();if(this.drawDebug){var j=this.debugGraphic;for(j.clear(),O=0;O<Y;O++)z=B[O],z.willDrawDebug()&&z.drawDebug(j);for(B=J.entries,Y=B.length,O=0;O<Y;O++)z=B[O],z.willDrawDebug()&&z.drawDebug(j)}var tt=this.pendingDestroy;if(tt.size>0){var ut=this.tree,ht=this.staticTree;for(B=tt.entries,Y=B.length,O=0;O<Y;O++)z=B[O],z.physicsType===e.DYNAMIC_BODY?(ut.remove(z),k.delete(z)):z.physicsType===e.STATIC_BODY&&(ht.remove(z),J.delete(z)),z.world=void 0,z.gameObject=void 0;tt.clear()}},updateMotion:function(O,z){O.allowRotation&&this.computeAngularVelocity(O,z),this.computeVelocity(O,z)},computeAngularVelocity:function(O,z){var B=O.angularVelocity,Y=O.angularAcceleration,k=O.angularDrag,J=O.maxAngular;Y?B+=Y*z:O.allowDrag&&k&&(k*=z,d(B-k,0,.1)?B-=k:f(B+k,0,.1)?B+=k:B=0),B=o(B,-J,J);var j=B-O.angularVelocity;O.angularVelocity+=j,O.rotation+=O.angularVelocity*z},computeVelocity:function(O,z){var B=O.velocity.x,Y=O.acceleration.x,k=O.drag.x,J=O.maxVelocity.x,j=O.velocity.y,tt=O.acceleration.y,ut=O.drag.y,ht=O.maxVelocity.y,st=O.speed,dt=O.maxSpeed,lt=O.allowDrag,ft=O.useDamping;O.allowGravity&&(B+=(this.gravity.x+O.gravity.x)*z,j+=(this.gravity.y+O.gravity.y)*z),Y?B+=Y*z:lt&&k&&(ft?(k=Math.pow(k,z),B*=k,st=Math.sqrt(B*B+j*j),c(st,0,.001)&&(B=0)):(k*=z,d(B-k,0,.01)?B-=k:f(B+k,0,.01)?B+=k:B=0)),tt?j+=tt*z:lt&&ut&&(ft?(ut=Math.pow(ut,z),j*=ut,st=Math.sqrt(B*B+j*j),c(st,0,.001)&&(j=0)):(ut*=z,d(j-ut,0,.01)?j-=ut:f(j+ut,0,.01)?j+=ut:j=0)),B=o(B,-J,J),j=o(j,-ht,ht),O.velocity.set(B,j),dt>-1&&O.velocity.length()>dt&&(O.velocity.normalize().scale(dt),st=dt),O.speed=st},separate:function(O,z,B,Y,k){var J,j,tt=!1,ut=!0;if(!O.enable||!z.enable||O.checkCollision.none||z.checkCollision.none||!this.intersects(O,z)||(O.collisionMask&z.collisionCategory)===0||(z.collisionMask&O.collisionCategory)===0||B&&B.call(Y,O.gameObject||O,z.gameObject||z)===!1)return tt;if(O.isCircle||z.isCircle){var ht=this.separateCircle(O,z,k);ht.result?(tt=!0,ut=!1):(J=ht.x,j=ht.y,ut=!0)}if(ut){var st=!1,dt=!1,lt=this.OVERLAP_BIAS;k?(st=L(O,z,k,lt,J),dt=b(O,z,k,lt,j)):this.forceX||Math.abs(this.gravity.y+O.gravity.y)<Math.abs(this.gravity.x+O.gravity.x)?(st=L(O,z,k,lt,J),this.intersects(O,z)&&(dt=b(O,z,k,lt,j))):(dt=b(O,z,k,lt,j),this.intersects(O,z)&&(st=L(O,z,k,lt,J))),tt=st||dt}return tt&&(k?(O.onOverlap||z.onOverlap)&&this.emit(l.OVERLAP,O.gameObject,z.gameObject,O,z):(O.onCollide||z.onCollide)&&this.emit(l.COLLIDE,O.gameObject,z.gameObject,O,z)),tt},separateCircle:function(O,z,B){m(O,z,!1,0),y(O,z,!1,0);var Y=O.isCircle,k=z.isCircle,J=O.center,j=z.center,tt=O.immovable,ut=z.immovable,ht=O.velocity,st=z.velocity,dt=0,lt=!0;if(Y!==k){lt=!1;var ft=J.x,Lt=J.y,Nt=O.halfWidth,Vt=z.position.x,pt=z.position.y,Pt=z.right,Dt=z.bottom;k&&(ft=j.x,Lt=j.y,Nt=z.halfWidth,Vt=O.position.x,pt=O.position.y,Pt=O.right,Dt=O.bottom),Lt<pt?ft<Vt?dt=s(ft,Lt,Vt,pt)-Nt:ft>Pt&&(dt=s(ft,Lt,Pt,pt)-Nt):Lt>Dt&&(ft<Vt?dt=s(ft,Lt,Vt,Dt)-Nt:ft>Pt&&(dt=s(ft,Lt,Pt,Dt)-Nt)),dt*=-1}else dt=O.halfWidth+z.halfWidth-u(J,j);O.overlapR=dt,z.overlapR=dt;var Gt=h(J,j),Ut=(dt+E.EPSILON)*Math.cos(Gt),Ot=(dt+E.EPSILON)*Math.sin(Gt),Wt={overlap:dt,result:!1,x:Ut,y:Ot};if(B&&(!lt||lt&&dt!==0))return Wt.result=!0,Wt;if(!lt&&dt===0||tt&&ut||O.customSeparateX||z.customSeparateX)return Wt.x=void 0,Wt.y=void 0,Wt;var Zt=!O.pushable&&!z.pushable;if(lt){var ve=J.x-j.x,Te=J.y-j.y,_t=Math.sqrt(Math.pow(ve,2)+Math.pow(Te,2)),ce=(j.x-J.x)/_t||0,wt=(j.y-J.y)/_t||0,Ht=2*(ht.x*ce+ht.y*wt-st.x*ce-st.y*wt)/(O.mass+z.mass);(tt||ut||!O.pushable||!z.pushable)&&(Ht*=2),!tt&&O.pushable&&(ht.x=ht.x-Ht/O.mass*ce,ht.y=ht.y-Ht/O.mass*wt,ht.multiply(O.bounce)),!ut&&z.pushable&&(st.x=st.x+Ht/z.mass*ce,st.y=st.y+Ht/z.mass*wt,st.multiply(z.bounce)),!tt&&!ut&&(Ut*=.5,Ot*=.5),(!tt||O.pushable||Zt)&&(O.x-=Ut,O.y-=Ot,O.updateCenter()),(!ut||z.pushable||Zt)&&(z.x+=Ut,z.y+=Ot,z.updateCenter()),Wt.result=!0}else!tt&&(O.pushable||Zt)&&(O.x-=Ut,O.y-=Ot,O.updateCenter()),!ut&&(z.pushable||Zt)&&(z.x+=Ut,z.y+=Ot,z.updateCenter()),Wt.x=void 0,Wt.y=void 0;return Wt},intersects:function(O,z){return O===z?!1:!O.isCircle&&!z.isCircle?!(O.right<=z.left||O.bottom<=z.top||O.left>=z.right||O.top>=z.bottom):O.isCircle?z.isCircle?u(O.center,z.center)<=O.halfWidth+z.halfWidth:this.circleBodyIntersects(O,z):this.circleBodyIntersects(z,O)},circleBodyIntersects:function(O,z){var B=o(O.center.x,z.left,z.right),Y=o(O.center.y,z.top,z.bottom),k=(O.center.x-B)*(O.center.x-B),J=(O.center.y-Y)*(O.center.y-Y);return k+J<=O.halfWidth*O.halfWidth},overlap:function(O,z,B,Y,k){return B===void 0&&(B=null),Y===void 0&&(Y=null),k===void 0&&(k=B),this.collideObjects(O,z,B,Y,k,!0)},collide:function(O,z,B,Y,k){return B===void 0&&(B=null),Y===void 0&&(Y=null),k===void 0&&(k=B),this.collideObjects(O,z,B,Y,k,!1)},collideObjects:function(O,z,B,Y,k,J){var j,tt;O.isParent&&(O.physicsType===void 0||z===void 0||O===z)&&(O=O.children.entries),z&&z.isParent&&z.physicsType===void 0&&(z=z.children.entries);var ut=Array.isArray(O),ht=Array.isArray(z);if(this._total=0,!ut&&!ht)this.collideHandler(O,z,B,Y,k,J);else if(!ut&&ht)for(j=0;j<z.length;j++)this.collideHandler(O,z[j],B,Y,k,J);else if(ut&&!ht)if(z)for(j=0;j<O.length;j++)this.collideHandler(O[j],z,B,Y,k,J);else for(j=0;j<O.length;j++){var st=O[j];for(tt=j+1;tt<O.length;tt++)j!==tt&&this.collideHandler(st,O[tt],B,Y,k,J)}else for(j=0;j<O.length;j++)for(tt=0;tt<z.length;tt++)this.collideHandler(O[j],z[tt],B,Y,k,J);return this._total>0},collideHandler:function(O,z,B,Y,k,J){if(z===void 0&&O.isParent)return this.collideGroupVsGroup(O,O,B,Y,k,J);if(!O||!z)return!1;if(O.body||O.isBody){if(z.body||z.isBody)return this.collideSpriteVsSprite(O,z,B,Y,k,J);if(z.isParent)return this.collideSpriteVsGroup(O,z,B,Y,k,J);if(z.isTilemap)return this.collideSpriteVsTilemapLayer(O,z,B,Y,k,J)}else if(O.isParent){if(z.body||z.isBody)return this.collideSpriteVsGroup(z,O,B,Y,k,J);if(z.isParent)return this.collideGroupVsGroup(O,z,B,Y,k,J);if(z.isTilemap)return this.collideGroupVsTilemapLayer(O,z,B,Y,k,J)}else if(O.isTilemap){if(z.body||z.isBody)return this.collideSpriteVsTilemapLayer(z,O,B,Y,k,J);if(z.isParent)return this.collideGroupVsTilemapLayer(z,O,B,Y,k,J)}},canCollide:function(O,z){return O&&z&&(O.collisionMask&z.collisionCategory)!==0&&(z.collisionMask&O.collisionCategory)!==0},collideSpriteVsSprite:function(O,z,B,Y,k,J){var j=O.isBody?O:O.body,tt=z.isBody?z:z.body;return this.canCollide(j,tt)?(this.separate(j,tt,Y,k,J)&&(B&&B.call(k,O,z),this._total++),!0):!1},collideSpriteVsGroup:function(O,z,B,Y,k,J){var j=O.isBody?O:O.body;if(!(z.getLength()===0||!j||!j.enable||j.checkCollision.none||!this.canCollide(j,z))){var tt,ut,ht;if(this.useTree||z.physicsType===e.STATIC_BODY){var st=this.treeMinMax;st.minX=j.left,st.minY=j.top,st.maxX=j.right,st.maxY=j.bottom;var dt=z.physicsType===e.DYNAMIC_BODY?this.tree.search(st):this.staticTree.search(st);for(ut=dt.length,tt=0;tt<ut;tt++)ht=dt[tt],!(j===ht||!ht.enable||ht.checkCollision.none||!z.contains(ht.gameObject))&&this.separate(j,ht,Y,k,J)&&(B&&B.call(k,j.gameObject,ht.gameObject),this._total++)}else{var lt=z.getChildren(),ft=z.children.entries.indexOf(O);for(ut=lt.length,tt=0;tt<ut;tt++)ht=lt[tt].body,!(!ht||tt===ft||!ht.enable)&&this.separate(j,ht,Y,k,J)&&(B&&B.call(k,j.gameObject,ht.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(O,z,B,Y,k,J){if(!this.canCollide(O,z))return!1;var j=O.getChildren();if(j.length===0)return!1;for(var tt=!1,ut=0;ut<j.length;ut++)(j[ut].body||j[ut].isBody)&&this.collideSpriteVsTilemapLayer(j[ut],z,B,Y,k,J)&&(tt=!0);return tt},collideTiles:function(O,z,B,Y,k){return z.length===0||O.body&&!O.body.enable||O.isBody&&!O.enable?!1:this.collideSpriteVsTilesHandler(O,z,B,Y,k,!1,!1)},overlapTiles:function(O,z,B,Y,k){return z.length===0||O.body&&!O.body.enable||O.isBody&&!O.enable?!1:this.collideSpriteVsTilesHandler(O,z,B,Y,k,!0,!1)},collideSpriteVsTilemapLayer:function(O,z,B,Y,k,J){var j=O.isBody?O:O.body;if(!j.enable||j.checkCollision.none||!this.canCollide(j,z))return!1;var tt=z.layer,ut=j.x-tt.tileWidth*z.scaleX,ht=j.y-tt.tileHeight*z.scaleY,st=j.width+tt.tileWidth*z.scaleX,dt=j.height+tt.tileHeight*z.scaleY,lt=J?null:this.tileFilterOptions,ft=S(ut,ht,st,dt,lt,z.scene.cameras.main,z.layer);return ft.length===0?!1:this.collideSpriteVsTilesHandler(O,ft,B,Y,k,J,!0)},collideSpriteVsTilesHandler:function(O,z,B,Y,k,J,j){for(var tt=O.isBody?O:O.body,ut,ht={left:0,right:0,top:0,bottom:0},st,dt=!1,lt=0;lt<z.length;lt++){ut=z[lt],st=ut.tilemapLayer;var ft=st.tileToWorldXY(ut.x,ut.y);ht.left=ft.x,ht.top=ft.y,ht.right=ht.left+ut.width*st.scaleX,ht.bottom=ht.top+ut.height*st.scaleY,Z(ht,tt)&&(!Y||Y.call(k,O,ut))&&A(ut,O)&&(J||D(lt,tt,ut,ht,st,this.TILE_BIAS,j))&&(this._total++,dt=!0,B&&B.call(k,O,ut),J&&tt.onOverlap?this.emit(l.TILE_OVERLAP,O,ut,tt):tt.onCollide&&this.emit(l.TILE_COLLIDE,O,ut,tt))}return dt},collideGroupVsGroup:function(O,z,B,Y,k,J){if(!(O.getLength()===0||z.getLength()===0||!this.canCollide(O,z)))for(var j=O.getChildren(),tt=0;tt<j.length;tt++)this.collideSpriteVsGroup(j[tt],z,B,Y,k,J)},wrap:function(O,z){O.body?this.wrapObject(O,z):O.getChildren?this.wrapArray(O.getChildren(),z):Array.isArray(O)?this.wrapArray(O,z):this.wrapObject(O,z)},wrapArray:function(O,z){for(var B=0;B<O.length;B++)this.wrapObject(O[B],z)},wrapObject:function(O,z){z===void 0&&(z=0),O.x=X(O.x,this.bounds.left-z,this.bounds.right+z),O.y=X(O.y,this.bounds.top-z,this.bounds.bottom+z)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});v.exports=V}),1093:(v=>{var T={setAcceleration:function(t,h){return this.body.acceleration.set(t,h),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};v.exports=T}),59023:(v=>{var T={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};v.exports=T}),62069:(v=>{var T={setBounce:function(t,h){return this.body.bounce.set(t,h),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,h,g,o){return this.body.setCollideWorldBounds(t,h,g,o),this}};v.exports=T}),78389:((v,T,t)=>{var h=t(79599),g={setCollisionCategory:function(o){var a=this.body?this.body:this;return a.collisionCategory=o,this},willCollideWith:function(o){var a=this.body?this.body:this;return(a.collisionMask&o)!==0},addCollidesWith:function(o){var a=this.body?this.body:this;return a.collisionMask=a.collisionMask|o,this},removeCollidesWith:function(o){var a=this.body?this.body:this;return a.collisionMask=a.collisionMask&~o,this},setCollidesWith:function(o){var a=this.body?this.body:this;return a.collisionMask=h(o),this},resetCollisionCategory:function(){var o=this.body?this.body:this;return o.collisionCategory=1,o.collisionMask=2147483647,this}};v.exports=g}),87118:(v=>{var T={setDebug:function(t,h,g){return this.debugShowBody=t,this.debugShowVelocity=h,this.debugBodyColor=g,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}};v.exports=T}),52819:(v=>{var T={setDrag:function(t,h){return this.body.drag.set(t,h),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}};v.exports=T}),4074:(v=>{var T={setDirectControl:function(t){return this.body.setDirectControl(t),this},enableBody:function(t,h,g,o,a){return t&&this.body.reset(h,g),o&&(this.body.gameObject.active=!0),a&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,h){return t===void 0&&(t=!1),h===void 0&&(h=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),h&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};v.exports=T}),40831:(v=>{var T={setFriction:function(t,h){return this.body.friction.set(t,h),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};v.exports=T}),26775:(v=>{var T={setGravity:function(t,h){return this.body.gravity.set(t,h),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};v.exports=T}),9437:(v=>{var T={setImmovable:function(t){return t===void 0&&(t=!0),this.body.immovable=t,this}};v.exports=T}),30621:(v=>{var T={setMass:function(t){return this.body.mass=t,this}};v.exports=T}),72441:((v,T,t)=>{var h=t(47956),g=t(96503),o=t(2044),a=t(81491),r=function(e,s,u,n,l,c){var d=h(e,s-n,u-n,2*n,2*n,l,c);if(d.length===0)return d;for(var f=new g(s,u,n),m=new g,y=[],S=0;S<d.length;S++){var C=d[S];C.isCircle?(m.setTo(C.center.x,C.center.y,C.halfWidth),o(f,m)&&y.push(C)):a(f,C)&&y.push(C)}return y};v.exports=r}),47956:(v=>{var T=function(t,h,g,o,a,r,e){r===void 0&&(r=!0),e===void 0&&(e=!1);var s=[],u=[],n=t.treeMinMax;if(n.minX=h,n.minY=g,n.maxX=h+o,n.maxY=g+a,e&&(u=t.staticTree.search(n)),r&&t.useTree)s=t.tree.search(n);else if(r){var l=t.bodies,c={position:{x:h,y:g},left:h,top:g,right:h+o,bottom:g+a,isCircle:!1},d=t.intersects;l.iterate(function(f){d(f,c)&&s.push(f)})}return u.concat(s)};v.exports=T}),62121:(v=>{var T={setPushable:function(t){return t===void 0&&(t=!0),this.body.pushable=t,this}};v.exports=T}),29384:(v=>{var T={setOffset:function(t,h){return this.body.setOffset(t,h),this},setSize:function(t,h,g){return this.body.setSize(t,h,g),this},setBodySize:function(t,h,g){return this.body.setSize(t,h,g),this},setCircle:function(t,h,g){return this.body.setCircle(t,h,g),this}};v.exports=T}),15098:(v=>{var T={setVelocity:function(t,h){return this.body.setVelocity(t,h),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,h){return this.body.maxVelocity.set(t,h),this}};v.exports=T}),92209:((v,T,t)=>{v.exports={Acceleration:t(1093),Angular:t(59023),Bounce:t(62069),Collision:t(78389),Debug:t(87118),Drag:t(52819),Enable:t(4074),Friction:t(40831),Gravity:t(26775),Immovable:t(9437),Mass:t(30621),OverlapCirc:t(72441),OverlapRect:t(47956),Pushable:t(62121),Size:t(29384),Velocity:t(15098)}}),37747:(v=>{var T={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};v.exports=T}),20009:(v=>{v.exports="collide"}),36768:(v=>{v.exports="overlap"}),60473:(v=>{v.exports="pause"}),89954:(v=>{v.exports="resume"}),61804:(v=>{v.exports="tilecollide"}),7161:(v=>{v.exports="tileoverlap"}),34689:(v=>{v.exports="worldbounds"}),16006:(v=>{v.exports="worldstep"}),63012:((v,T,t)=>{v.exports={COLLIDE:t(20009),OVERLAP:t(36768),PAUSE:t(60473),RESUME:t(89954),TILE_COLLIDE:t(61804),TILE_OVERLAP:t(7161),WORLD_BOUNDS:t(34689),WORLD_STEP:t(16006)}}),27064:((v,T,t)=>{var h=t(37747),g=t(79291),o={ArcadePhysics:t(86689),Body:t(37742),Collider:t(79342),Components:t(92209),Events:t(63012),Factory:t(66022),GetCollidesWith:t(79599),GetOverlapX:t(64897),GetOverlapY:t(45170),SeparateX:t(14087),SeparateY:t(89936),Group:t(60758),Image:t(71289),Sprite:t(13759),StaticBody:t(72624),StaticGroup:t(71464),Tilemap:t(55173),World:t(82248)};o=g(!1,o,h),v.exports=o}),96602:(v=>{var T=function(t,h){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,h,t):t.layer.callbacks[t.index]?!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,h,t):!0};v.exports=T}),36294:(v=>{var T=function(t,h){h<0?(t.blocked.none=!1,t.blocked.left=!0):h>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=h,t.updateCenter(),t.bounce.x===0?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x};v.exports=T}),67013:(v=>{var T=function(t,h){h<0?(t.blocked.none=!1,t.blocked.up=!0):h>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=h,t.updateCenter(),t.bounce.y===0?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y};v.exports=T}),40012:((v,T,t)=>{var h=t(21329),g=t(53442),o=t(2483),a=function(r,e,s,u,n,l,c){var d=u.left,f=u.top,m=u.right,y=u.bottom,S=s.faceLeft||s.faceRight,C=s.faceTop||s.faceBottom;if(c||(S=!0,C=!0),!S&&!C)return!1;var E=0,P=0,A=0,F=1;if(e.deltaAbsX()>e.deltaAbsY()?A=-1:e.deltaAbsX()<e.deltaAbsY()&&(F=-1),e.deltaX()!==0&&e.deltaY()!==0&&S&&C&&(A=Math.min(Math.abs(e.position.x-m),Math.abs(e.right-d)),F=Math.min(Math.abs(e.position.y-y),Math.abs(e.bottom-f))),A<F){if(S&&(E=h(e,s,d,m,l,c),E!==0&&!o(u,e)))return!0;C&&(P=g(e,s,f,y,l,c))}else{if(C&&(P=g(e,s,f,y,l,c),P!==0&&!o(u,e)))return!0;S&&(E=h(e,s,d,m,l,c))}return E!==0||P!==0};v.exports=a}),21329:((v,T,t)=>{var h=t(36294),g=function(o,a,r,e,s,u){var n=0,l=a.faceLeft,c=a.faceRight,d=a.collideLeft,f=a.collideRight;return u||(l=!0,c=!0,d=!0,f=!0),o.deltaX()<0&&f&&o.checkCollision.left?c&&o.x<e&&(n=o.x-e,n<-s&&(n=0)):o.deltaX()>0&&d&&o.checkCollision.right&&l&&o.right>r&&(n=o.right-r,n>s&&(n=0)),n!==0&&(o.customSeparateX?o.overlapX=n:h(o,n)),n};v.exports=g}),53442:((v,T,t)=>{var h=t(67013),g=function(o,a,r,e,s,u){var n=0,l=a.faceTop,c=a.faceBottom,d=a.collideUp,f=a.collideDown;return u||(l=!0,c=!0,d=!0,f=!0),o.deltaY()<0&&f&&o.checkCollision.up?c&&o.y<e&&(n=o.y-e,n<-s&&(n=0)):o.deltaY()>0&&d&&o.checkCollision.down&&l&&o.bottom>r&&(n=o.bottom-r,n>s&&(n=0)),n!==0&&(o.customSeparateY?o.overlapY=n:h(o,n)),n};v.exports=g}),2483:(v=>{var T=function(t,h){return!(h.right<=t.left||h.bottom<=t.top||h.position.x>=t.right||h.position.y>=t.bottom)};v.exports=T}),55173:((v,T,t)=>{var h={ProcessTileCallbacks:t(96602),ProcessTileSeparationX:t(36294),ProcessTileSeparationY:t(67013),SeparateTile:t(40012),TileCheckX:t(21329),TileCheckY:t(53442),TileIntersectsBody:t(2483)};v.exports=h}),44563:((v,T,t)=>{v.exports={Arcade:t(27064),Matter:t(3875)}}),68174:((v,T,t)=>{var h=t(83419),g=t(26099),o=new h({initialize:function(){this.boundsCenter=new g,this.centerDiff=new g},parseBody:function(a){if(a=a.hasOwnProperty("body")?a.body:a,!a.hasOwnProperty("bounds")||!a.hasOwnProperty("centerOfMass"))return!1;var r=this.boundsCenter,e=this.centerDiff,s=a.bounds.max.x-a.bounds.min.x,u=a.bounds.max.y-a.bounds.min.y,n=s*a.centerOfMass.x,l=u*a.centerOfMass.y;return r.set(s/2,u/2),e.set(n-r.x,l-r.y),!0},getTopLeft:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.boundsCenter,u=this.centerDiff;return new g(r+s.x+u.x,e+s.y+u.y)}return!1},getTopCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.boundsCenter,u=this.centerDiff;return new g(r+u.x,e+s.y+u.y)}return!1},getTopRight:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.boundsCenter,u=this.centerDiff;return new g(r-(s.x-u.x),e+s.y+u.y)}return!1},getLeftCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.boundsCenter,u=this.centerDiff;return new g(r+s.x+u.x,e+u.y)}return!1},getCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.centerDiff;return new g(r+s.x,e+s.y)}return!1},getRightCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.boundsCenter,u=this.centerDiff;return new g(r-(s.x-u.x),e+u.y)}return!1},getBottomLeft:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.boundsCenter,u=this.centerDiff;return new g(r+s.x+u.x,e-(s.y-u.y))}return!1},getBottomCenter:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.boundsCenter,u=this.centerDiff;return new g(r+u.x,e-(s.y-u.y))}return!1},getBottomRight:function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),this.parseBody(a)){var s=this.boundsCenter,u=this.centerDiff;return new g(r-(s.x-u.x),e-(s.y-u.y))}return!1}});v.exports=o}),19933:((v,T,t)=>{var h=t(6790);h.Body=t(22562),h.Composite=t(69351),h.World=t(4372),h.Collision=t(52284),h.Detector=t(81388),h.Pairs=t(99561),h.Pair=t(4506),h.Query=t(73296),h.Resolver=t(66272),h.Constraint=t(48140),h.Common=t(53402),h.Engine=t(48413),h.Events=t(35810),h.Sleeping=t(53614),h.Plugin=t(73832),h.Bodies=t(66280),h.Composites=t(74116),h.Axes=t(66615),h.Bounds=t(15647),h.Svg=t(74058),h.Vector=t(31725),h.Vertices=t(41598),h.World.add=h.Composite.add,h.World.remove=h.Composite.remove,h.World.addComposite=h.Composite.addComposite,h.World.addBody=h.Composite.addBody,h.World.addConstraint=h.Composite.addConstraint,h.World.clear=h.Composite.clear,v.exports=h}),28137:((v,T,t)=>{var h=t(66280),g=t(83419),o=t(74116),a=t(48140),r=t(74058),e=t(75803),s=t(23181),u=t(34803),n=t(73834),l=t(19496),c=t(85791),d=t(98713),f=t(41598),m=new g({initialize:function(S){this.world=S,this.scene=S.scene,this.sys=S.scene.sys},rectangle:function(y,S,C,E,P){var A=h.rectangle(y,S,C,E,P);return this.world.add(A),A},trapezoid:function(y,S,C,E,P,A){var F=h.trapezoid(y,S,C,E,P,A);return this.world.add(F),F},circle:function(y,S,C,E,P){var A=h.circle(y,S,C,E,P);return this.world.add(A),A},polygon:function(y,S,C,E,P){var A=h.polygon(y,S,C,E,P);return this.world.add(A),A},fromVertices:function(y,S,C,E,P,A,F){typeof C=="string"&&(C=f.fromPath(C));var G=h.fromVertices(y,S,C,E,P,A,F);return this.world.add(G),G},fromPhysicsEditor:function(y,S,C,E,P){P===void 0&&(P=!0);var A=l.parseBody(y,S,C,E);return P&&!this.world.has(A)&&this.world.add(A),A},fromSVG:function(y,S,C,E,P,A){E===void 0&&(E=1),P===void 0&&(P={}),A===void 0&&(A=!0);for(var F=C.getElementsByTagName("path"),G=[],D=0;D<F.length;D++){var L=r.pathToVertices(F[D],30);E!==1&&f.scale(L,E,E),G.push(L)}var b=h.fromVertices(y,S,G,P);return A&&this.world.add(b),b},fromJSON:function(y,S,C,E,P){E===void 0&&(E={}),P===void 0&&(P=!0);var A=c.parseBody(y,S,C,E);return A&&P&&this.world.add(A),A},imageStack:function(y,S,C,E,P,A,F,G,D){F===void 0&&(F=0),G===void 0&&(G=0),D===void 0&&(D={});var L=this.world,b=this.sys.displayList;D.addToWorld=!1;var I=o.stack(C,E,P,A,F,G,function(N,Z){var U=new s(L,N,Z,y,S,D);return b.add(U),U.body});return L.add(I),I},stack:function(y,S,C,E,P,A,F){var G=o.stack(y,S,C,E,P,A,F);return this.world.add(G),G},pyramid:function(y,S,C,E,P,A,F){var G=o.pyramid(y,S,C,E,P,A,F);return this.world.add(G),G},chain:function(y,S,C,E,P,A){return o.chain(y,S,C,E,P,A)},mesh:function(y,S,C,E,P){return o.mesh(y,S,C,E,P)},newtonsCradle:function(y,S,C,E,P){var A=o.newtonsCradle(y,S,C,E,P);return this.world.add(A),A},car:function(y,S,C,E,P){var A=o.car(y,S,C,E,P);return this.world.add(A),A},softBody:function(y,S,C,E,P,A,F,G,D,L){var b=o.softBody(y,S,C,E,P,A,F,G,D,L);return this.world.add(b),b},joint:function(y,S,C,E,P){return this.constraint(y,S,C,E,P)},spring:function(y,S,C,E,P){return this.constraint(y,S,C,E,P)},constraint:function(y,S,C,E,P){E===void 0&&(E=1),P===void 0&&(P={}),P.bodyA=y.type==="body"?y:y.body,P.bodyB=S.type==="body"?S:S.body,isNaN(C)||(P.length=C),P.stiffness=E;var A=a.create(P);return this.world.add(A),A},worldConstraint:function(y,S,C,E){C===void 0&&(C=1),E===void 0&&(E={}),E.bodyB=y.type==="body"?y:y.body,isNaN(S)||(E.length=S),E.stiffness=C;var P=a.create(E);return this.world.add(P),P},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var S=new d(this.scene,this.world,y);return this.world.add(S.constraint),S},image:function(y,S,C,E,P){var A=new s(this.world,y,S,C,E,P);return this.sys.displayList.add(A),A},tileBody:function(y,S){return new n(this.world,y,S)},sprite:function(y,S,C,E,P){var A=new u(this.world,y,S,C,E,P);return this.sys.displayList.add(A),this.sys.updateList.add(A),A},gameObject:function(y,S,C){return e(this.world,y,S,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});v.exports=m}),75803:((v,T,t)=>{var h=t(31884),g=t(95540),o=t(26099);function a(e){return!!e.get&&typeof e.get=="function"||!!e.set&&typeof e.set=="function"}var r=function(e,s,u,n){u===void 0&&(u={}),n===void 0&&(n=!0);var l=s.x,c=s.y;s.body={temp:!0,position:{x:l,y:c}};var d=[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity];if(d.forEach(function(m){for(var y in m)a(m[y])?Object.defineProperty(s,y,{get:m[y].get,set:m[y].set}):Object.defineProperty(s,y,{value:m[y]})}),s.world=e,s._tempVec2=new o(l,c),u.hasOwnProperty("type")&&u.type==="body")s.setExistingBody(u,n);else{var f=g(u,"shape",null);f||(f="rectangle"),u.addToWorld=n,s.setBody(f,u)}return s};v.exports=r}),23181:((v,T,t)=>{var h=t(83419),g=t(31884),o=t(95643),a=t(95540),r=t(88571),e=t(72699),s=t(26099),u=new h({Extends:r,Mixins:[g.Bounce,g.Collision,g.Force,g.Friction,g.Gravity,g.Mass,g.Sensor,g.SetBody,g.Sleep,g.Static,g.Transform,g.Velocity,e],initialize:function(l,c,d,f,m,y){o.call(this,l.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,m),this.setSizeToFrame(),this.setOrigin(),this.world=l,this._tempVec2=new s(c,d);var S=a(y,"shape",null);S?this.setBody(S,y):this.setRectangle(this.width,this.height,y),this.setPosition(c,d),this.initPipeline(),this.initPostPipeline(!0)}});v.exports=u}),42045:((v,T,t)=>{var h=t(60461),g=t(66615),o=t(66280),a=t(22562),r=t(68174),e=t(15647),s=t(83419),u=t(52284),n=t(53402),l=t(69351),c=t(74116),d=t(48140),f=t(81388),m=t(20339),y=t(28137),S=t(95540),C=t(35154),E=t(46975),P=t(4506),A=t(99561),F=t(37277),G=t(73296),D=t(66272),L=t(44594),b=t(74058),I=t(31725),N=t(41598),Z=t(68243);n.setDecomp(t(55973));var U=new s({initialize:function(X){this.scene=X,this.systems=X.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=l,this.collision=u,this.detector=f,this.pair=P,this.pairs=A,this.query=G,this.resolver=D,this.constraint=d,this.bodies=o,this.composites=c,this.axes=g,this.bounds=e,this.svg=b,this.vector=I,this.vertices=N,this.verts=N,this._tempVec2=I.create(),D._restingThresh=C(this.config,"restingThresh",4),D._restingThreshTangent=C(this.config,"restingThreshTangent",6),D._positionDampen=C(this.config,"positionDampen",.9),D._positionWarming=C(this.config,"positionWarming",.8),D._frictionNormalMultiplier=C(this.config,"frictionNormalMultiplier",5),X.sys.events.once(L.BOOT,this.boot,this),X.sys.events.on(L.START,this.start,this)},boot:function(){this.world=new Z(this.scene,this.config),this.add=new y(this.world),this.bodyBounds=new r,this.systems.events.once(L.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new Z(this.scene,this.config),this.add=new y(this.world));var W=this.systems.events;W.on(L.UPDATE,this.world.update,this.world),W.on(L.POST_UPDATE,this.world.postUpdate,this.world),W.once(L.SHUTDOWN,this.shutdown,this)},getConfig:function(){var W=this.systems.game.config.physics,X=this.systems.settings.physics,V=E(S(X,"matter",{}),S(W,"matter",{}));return V},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(W,X){this.world.step(W,X)},containsPoint:function(W,X,V){W=this.getMatterBodies(W);var O=I.create(X,V),z=G.point(W,O);return z.length>0},intersectPoint:function(W,X,V){V=this.getMatterBodies(V);var O=I.create(W,X),z=[],B=G.point(V,O);return B.forEach(function(Y){z.indexOf(Y)===-1&&z.push(Y)}),z},intersectRect:function(W,X,V,O,z,B){z===void 0&&(z=!1),B=this.getMatterBodies(B);var Y={min:{x:W,y:X},max:{x:W+V,y:X+O}},k=[],J=G.region(B,Y,z);return J.forEach(function(j){k.indexOf(j)===-1&&k.push(j)}),k},intersectRay:function(W,X,V,O,z,B){z===void 0&&(z=1),B=this.getMatterBodies(B);for(var Y=[],k=G.ray(B,I.create(W,X),I.create(V,O),z),J=0;J<k.length;J++)Y.push(k[J].body);return Y},intersectBody:function(W,X){X=this.getMatterBodies(X);for(var V=[],O=G.collides(W,X),z=0;z<O.length;z++){var B=O[z];B.bodyA===W?V.push(B.bodyB):V.push(B.bodyA)}return V},overlap:function(W,X,V,O,z){V===void 0&&(V=null),O===void 0&&(O=null),z===void 0&&(z=V),Array.isArray(W)||(W=[W]),W=this.getMatterBodies(W),X=this.getMatterBodies(X);for(var B=!1,Y=0;Y<W.length;Y++)for(var k=W[Y],J=G.collides(k,X),j=0;j<J.length;j++){var tt=J[j],ut=tt.bodyA.id===k.id?tt.bodyB:tt.bodyA;if(!O||O.call(z,k,ut,tt)){if(B=!0,V)V.call(z,k,ut,tt);else if(!O)return!0}}return B},setCollisionCategory:function(W,X){return W=this.getMatterBodies(W),W.forEach(function(V){V.collisionFilter.category=X}),this},setCollisionGroup:function(W,X){return W=this.getMatterBodies(W),W.forEach(function(V){V.collisionFilter.group=X}),this},setCollidesWith:function(W,X){W=this.getMatterBodies(W);var V=0;if(!Array.isArray(X))V=X;else for(var O=0;O<X.length;O++)V|=X[O];return W.forEach(function(z){z.collisionFilter.mask=V}),this},getMatterBodies:function(W){if(!W)return this.world.getAllBodies();Array.isArray(W)||(W=[W]);for(var X=[],V=0;V<W.length;V++){var O=W[V].hasOwnProperty("body")?W[V].body:W[V];X.push(O)}return X},setVelocity:function(W,X,V){W=this.getMatterBodies(W);var O=this._tempVec2;return O.x=X,O.y=V,W.forEach(function(z){a.setVelocity(z,O)}),this},setVelocityX:function(W,X){W=this.getMatterBodies(W);var V=this._tempVec2;return V.x=X,W.forEach(function(O){V.y=O.velocity.y,a.setVelocity(O,V)}),this},setVelocityY:function(W,X){W=this.getMatterBodies(W);var V=this._tempVec2;return V.y=X,W.forEach(function(O){V.x=O.velocity.x,a.setVelocity(O,V)}),this},setAngularVelocity:function(W,X){return W=this.getMatterBodies(W),W.forEach(function(V){a.setAngularVelocity(V,X)}),this},applyForce:function(W,X){W=this.getMatterBodies(W);var V=this._tempVec2;return W.forEach(function(O){V.x=O.position.x,V.y=O.position.y,a.applyForce(O,V,X)}),this},applyForceFromPosition:function(W,X,V,O){W=this.getMatterBodies(W);var z=this._tempVec2;return W.forEach(function(B){O===void 0&&(O=B.angle),z.x=V*Math.cos(O),z.y=V*Math.sin(O),a.applyForce(B,X,z)}),this},applyForceFromAngle:function(W,X,V){W=this.getMatterBodies(W);var O=this._tempVec2;return W.forEach(function(z){V===void 0&&(V=z.angle),O.x=X*Math.cos(V),O.y=X*Math.sin(V),a.applyForce(z,{x:z.position.x,y:z.position.y},O)}),this},getConstraintLength:function(W){var X=W.pointA.x,V=W.pointA.y,O=W.pointB.x,z=W.pointB.y;return W.bodyA&&(X+=W.bodyA.position.x,V+=W.bodyA.position.y),W.bodyB&&(O+=W.bodyB.position.x,z+=W.bodyB.position.y),m(X,V,O,z)},alignBody:function(W,X,V,O){W=W.hasOwnProperty("body")?W.body:W;var z;switch(O){case h.TOP_LEFT:case h.LEFT_TOP:z=this.bodyBounds.getTopLeft(W,X,V);break;case h.TOP_CENTER:z=this.bodyBounds.getTopCenter(W,X,V);break;case h.TOP_RIGHT:case h.RIGHT_TOP:z=this.bodyBounds.getTopRight(W,X,V);break;case h.LEFT_CENTER:z=this.bodyBounds.getLeftCenter(W,X,V);break;case h.CENTER:z=this.bodyBounds.getCenter(W,X,V);break;case h.RIGHT_CENTER:z=this.bodyBounds.getRightCenter(W,X,V);break;case h.LEFT_BOTTOM:case h.BOTTOM_LEFT:z=this.bodyBounds.getBottomLeft(W,X,V);break;case h.BOTTOM_CENTER:z=this.bodyBounds.getBottomCenter(W,X,V);break;case h.BOTTOM_RIGHT:case h.RIGHT_BOTTOM:z=this.bodyBounds.getBottomRight(W,X,V);break}return z&&a.setPosition(W,z),this},shutdown:function(){var W=this.systems.events;this.world&&(W.off(L.UPDATE,this.world.update,this.world),W.off(L.POST_UPDATE,this.world.postUpdate,this.world)),W.off(L.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(L.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",U,"matterPhysics"),v.exports=U}),34803:((v,T,t)=>{var h=t(9674),g=t(83419),o=t(31884),a=t(95643),r=t(95540),e=t(72699),s=t(68287),u=t(26099),n=new g({Extends:s,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,e],initialize:function(c,d,f,m,y,S){a.call(this,c.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(m,y),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new u(d,f);var C=r(S,"shape",null);C?this.setBody(C,S):this.setRectangle(this.width,this.height,S),this.setPosition(d,f),this.initPipeline(),this.initPostPipeline(!0)}});v.exports=n}),73834:((v,T,t)=>{var h=t(66280),g=t(22562),o=t(83419),a=t(31884),r=t(62644),e=t(50792),s=t(95540),u=t(97022),n=t(41598),l=new o({Extends:e,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(d,f,m){e.call(this),this.tile=f,this.world=d,f.physics.matterBody&&f.physics.matterBody.destroy(),f.physics.matterBody=this;var y=s(m,"body",null),S=s(m,"addToWorld",!0);if(y)this.setBody(y,S);else{var C=f.getCollisionGroup(),E=s(C,"objects",[]);E.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}if(f.flipX||f.flipY){var P={x:f.getCenterX(),y:f.getCenterY()},A=f.flipX?-1:1,F=f.flipY?-1:1;g.scale(y,A,F,P)}},setFromTileRectangle:function(c){c===void 0&&(c={}),u(c,"isStatic")||(c.isStatic=!0),u(c,"addToWorld")||(c.addToWorld=!0);var d=this.tile.getBounds(),f=d.x+d.width/2,m=d.y+d.height/2,y=h.rectangle(f,m,d.width,d.height,c);return this.setBody(y,c.addToWorld),this},setFromTileCollision:function(c){c===void 0&&(c={}),u(c,"isStatic")||(c.isStatic=!0),u(c,"addToWorld")||(c.addToWorld=!0);for(var d=this.tile.tilemapLayer.scaleX,f=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),y=this.tile.getTop(),S=this.tile.getCollisionGroup(),C=s(S,"objects",[]),E=[],P=0;P<C.length;P++){var A=C[P],F=m+A.x*d,G=y+A.y*f,D=A.width*d,L=A.height*f,b=null;if(A.rectangle)b=h.rectangle(F+D/2,G+L/2,D,L,c);else if(A.ellipse)b=h.circle(F+D/2,G+L/2,D/2,c);else if(A.polygon||A.polyline){var I=A.polygon?A.polygon:A.polyline,N=I.map(function(X){return{x:X.x*d,y:X.y*f}}),Z=n.create(N),U=n.centre(Z);F+=U.x,G+=U.y,b=h.fromVertices(F,G,Z,c)}b&&E.push(b)}if(E.length===1)this.setBody(E[0],c.addToWorld);else if(E.length>1){var W=r(c);W.parts=E,this.setBody(g.create(W),W.addToWorld)}return this},setBody:function(c,d){return d===void 0&&(d=!0),this.body&&this.removeBody(),this.body=c,this.body.gameObject=this,d&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});v.exports=l}),19496:((v,T,t)=>{var h=t(66280),g=t(22562),o=t(53402),a=t(95540),r=t(41598),e={parseBody:function(s,u,n,l){l===void 0&&(l={});for(var c=a(n,"fixtures",[]),d=[],f=0;f<c.length;f++)for(var m=this.parseFixture(c[f]),y=0;y<m.length;y++)d.push(m[y]);var S=o.clone(n,!0);o.extend(S,l,!0),delete S.fixtures,delete S.type;var C=g.create(S);return g.setParts(C,d),g.setPosition(C,{x:s,y:u}),C},parseFixture:function(s){var u=o.extend({},!1,s);delete u.circle,delete u.vertices;var n;if(s.circle){var l=a(s.circle,"x"),c=a(s.circle,"y"),d=a(s.circle,"radius");n=[h.circle(l,c,d,u)]}else s.vertices&&(n=this.parseVertices(s.vertices,u));return n},parseVertices:function(s,u){u===void 0&&(u={});for(var n=[],l=0;l<s.length;l++)r.clockwiseSort(s[l]),n.push(g.create(o.extend({position:r.centre(s[l]),vertices:s[l]},u)));return h.flagCoincidentParts(n)}};v.exports=e}),85791:((v,T,t)=>{var h=t(66280),g=t(22562),o={parseBody:function(a,r,e,s){s===void 0&&(s={});var u,n=e.vertices;if(n.length===1)s.vertices=n[0],u=g.create(s),h.flagCoincidentParts(u.parts);else{for(var l=[],c=0;c<n.length;c++){var d=g.create({vertices:n[c]});l.push(d)}h.flagCoincidentParts(l),s.parts=l,u=g.create(s)}return u.label=e.label,g.setPosition(u,{x:a,y:r}),u}};v.exports=o}),98713:((v,T,t)=>{var h=t(15647),g=t(83419),o=t(69351),a=t(48140),r=t(81388),e=t(1121),s=t(8214),u=t(46975),n=t(53614),l=t(26099),c=t(41598),d=new g({initialize:function(m,y,S){S===void 0&&(S={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=m,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new l,this.body=null,this.part=null,this.constraint=a.create(u(S,C)),this.world.on(e.BEFORE_UPDATE,this.update,this),m.sys.input.on(s.POINTER_DOWN,this.onDown,this),m.sys.input.on(s.POINTER_UP,this.onUp,this)},onDown:function(f){this.pointer||(this.pointer=f,this.camera=f.camera)},onUp:function(f){f===this.pointer&&(this.pointer=null)},getBody:function(f){var m=this.position,y=this.constraint;this.camera.getWorldPoint(f.x,f.y,m);for(var S=o.allBodies(this.world.localWorld),C=0;C<S.length;C++){var E=S[C];if(!E.ignorePointer&&h.contains(E.bounds,m)&&r.canCollide(E.collisionFilter,y.collisionFilter)&&this.hitTestBody(E,m))return this.world.emit(e.DRAG_START,E,this.part,this),!0}return!1},hitTestBody:function(f,m){for(var y=this.constraint,S=f.parts.length,C=S>1?1:0,E=C;E<S;E++){var P=f.parts[E];if(c.contains(P.vertices,m))return y.pointA=m,y.pointB={x:m.x-f.position.x,y:m.y-f.position.y},y.bodyB=f,y.angleB=f.angle,n.set(f,!1),this.part=P,this.body=f,!0}return!1},update:function(){var f=this.pointer,m=this.body;if(!this.active||!f){m&&this.stopDrag();return}if(!f.isDown&&m){this.stopDrag();return}else if(f.isDown){if(!this.camera||!m&&!this.getBody(f))return;m=this.body;var y=this.position,S=this.constraint;this.camera.getWorldPoint(f.x,f.y,y),S.pointA.x=y.x,S.pointA.y=y.y,n.set(m,!1),this.world.emit(e.DRAG,m,this)}},stopDrag:function(){var f=this.body,m=this.constraint;m.bodyB=null,m.pointB=null,this.pointer=null,this.body=null,this.part=null,f&&this.world.emit(e.DRAG_END,f,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(e.BEFORE_UPDATE,this.update),this.scene.sys.input.off(s.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(s.POINTER_UP,this.onUp,this)}});v.exports=d}),68243:((v,T,t)=>{var h=t(66280),g=t(22562),o=t(83419),a=t(53402),r=t(69351),e=t(48413),s=t(50792),u=t(1121),n=t(95540),l=t(35154),c=t(22562),d=t(35810),f=t(73834),m=t(4372),y=t(13037),S=t(31725),C=new o({Extends:s,initialize:function(P,A){s.call(this),this.scene=P,this.engine=e.create(A),this.localWorld=this.engine.world;var F=l(A,"gravity",null);F?this.setGravity(F.x,F.y,F.scale):F===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=l(A,"enabled",!0),this.getDelta=l(A,"getDelta",this.update60Hz);var G=n(A,"runner",{}),D=n(G,"fps",!1);D&&(G.delta=1e3/n(G,"fps",60)),this.runner=y.create(G),this.autoUpdate=l(A,"autoUpdate",!0);var L=l(A,"debug",!1);if(this.drawDebug=typeof L=="object"?!0:L,this.debugGraphic,this.debugConfig={showAxes:n(L,"showAxes",!1),showAngleIndicator:n(L,"showAngleIndicator",!1),angleColor:n(L,"angleColor",15208787),showBroadphase:n(L,"showBroadphase",!1),broadphaseColor:n(L,"broadphaseColor",16757760),showBounds:n(L,"showBounds",!1),boundsColor:n(L,"boundsColor",16777215),showVelocity:n(L,"showVelocity",!1),velocityColor:n(L,"velocityColor",44783),showCollisions:n(L,"showCollisions",!1),collisionColor:n(L,"collisionColor",16094476),showSeparations:n(L,"showSeparations",!1),separationColor:n(L,"separationColor",16753920),showBody:n(L,"showBody",!0),showStaticBody:n(L,"showStaticBody",!0),showInternalEdges:n(L,"showInternalEdges",!1),renderFill:n(L,"renderFill",!1),renderLine:n(L,"renderLine",!0),fillColor:n(L,"fillColor",1075465),fillOpacity:n(L,"fillOpacity",1),lineColor:n(L,"lineColor",2678297),lineOpacity:n(L,"lineOpacity",1),lineThickness:n(L,"lineThickness",1),staticFillColor:n(L,"staticFillColor",857979),staticLineColor:n(L,"staticLineColor",1255396),showSleeping:n(L,"showSleeping",!1),staticBodySleepOpacity:n(L,"staticBodySleepOpacity",.7),sleepFillColor:n(L,"sleepFillColor",4605510),sleepLineColor:n(L,"sleepLineColor",10066585),showSensors:n(L,"showSensors",!0),sensorFillColor:n(L,"sensorFillColor",857979),sensorLineColor:n(L,"sensorLineColor",1255396),showPositions:n(L,"showPositions",!0),positionSize:n(L,"positionSize",4),positionColor:n(L,"positionColor",14697178),showJoint:n(L,"showJoint",!0),jointColor:n(L,"jointColor",14737474),jointLineOpacity:n(L,"jointLineOpacity",1),jointLineThickness:n(L,"jointLineThickness",2),pinSize:n(L,"pinSize",4),pinColor:n(L,"pinColor",4382944),springColor:n(L,"springColor",14697184),anchorColor:n(L,"anchorColor",15724527),anchorSize:n(L,"anchorSize",4),showConvexHulls:n(L,"showConvexHulls",!1),hullColor:n(L,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),n(A,"setBounds",!1)){var b=A.setBounds;if(typeof b=="boolean")this.setBounds();else{var I=n(b,"x",0),N=n(b,"y",0),Z=n(b,"width",P.sys.scale.width),U=n(b,"height",P.sys.scale.height),W=n(b,"thickness",64),X=n(b,"left",!0),V=n(b,"right",!0),O=n(b,"top",!0),z=n(b,"bottom",!0);this.setBounds(I,N,Z,U,W,X,V,O,z)}}},setCompositeRenderStyle:function(E){var P=E.bodies,A=E.constraints,F=E.composites,G,D,L;for(G=0;G<P.length;G++)D=P[G],L=D.render,this.setBodyRenderStyle(D,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity);for(G=0;G<A.length;G++)D=A[G],L=D.render,this.setConstraintRenderStyle(D,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize);for(G=0;G<F.length;G++)D=F[G],this.setCompositeRenderStyle(D);return this},setBodyRenderStyle:function(E,P,A,F,G,D){var L=E.render,b=this.debugConfig;return L?(P==null&&(P=E.isStatic?b.staticLineColor:b.lineColor),A==null&&(A=b.lineOpacity),F==null&&(F=b.lineThickness),G==null&&(G=E.isStatic?b.staticFillColor:b.fillColor),D==null&&(D=b.fillOpacity),P!==!1&&(L.lineColor=P),A!==!1&&(L.lineOpacity=A),F!==!1&&(L.lineThickness=F),G!==!1&&(L.fillColor=G),D!==!1&&(L.fillOpacity=D),this):this},setConstraintRenderStyle:function(E,P,A,F,G,D,L){var b=E.render,I=this.debugConfig;if(!b)return this;if(P==null){var N=b.type;N==="line"?P=I.jointColor:N==="pin"?P=I.pinColor:N==="spring"&&(P=I.springColor)}return A==null&&(A=I.jointLineOpacity),F==null&&(F=I.jointLineThickness),G==null&&(G=I.pinSize),D==null&&(D=I.anchorColor),L==null&&(L=I.anchorSize),P!==!1&&(b.lineColor=P),A!==!1&&(b.lineOpacity=A),F!==!1&&(b.lineThickness=F),G!==!1&&(b.pinSize=G),D!==!1&&(b.anchorColor=D),L!==!1&&(b.anchorSize=L),this},setEventsProxy:function(){var E=this,P=this.engine,A=this.localWorld;this.drawDebug&&(d.on(A,"compositeModified",function(F){E.setCompositeRenderStyle(F)}),d.on(A,"beforeAdd",function(F){for(var G=[].concat(F.object),D=0;D<G.length;D++){var L=G[D],b=L.render;L.type==="body"?E.setBodyRenderStyle(L,b.lineColor,b.lineOpacity,b.lineThickness,b.fillColor,b.fillOpacity):L.type==="composite"?E.setCompositeRenderStyle(L):L.type==="constraint"&&E.setConstraintRenderStyle(L,b.lineColor,b.lineOpacity,b.lineThickness,b.pinSize,b.anchorColor,b.anchorSize)}})),d.on(A,"beforeAdd",function(F){E.emit(u.BEFORE_ADD,F)}),d.on(A,"afterAdd",function(F){E.emit(u.AFTER_ADD,F)}),d.on(A,"beforeRemove",function(F){E.emit(u.BEFORE_REMOVE,F)}),d.on(A,"afterRemove",function(F){E.emit(u.AFTER_REMOVE,F)}),d.on(P,"beforeUpdate",function(F){E.emit(u.BEFORE_UPDATE,F)}),d.on(P,"afterUpdate",function(F){E.emit(u.AFTER_UPDATE,F)}),d.on(P,"collisionStart",function(F){var G=F.pairs,D,L;G.length>0&&G.map(function(b){D=b.bodyA,L=b.bodyB,D.gameObject&&D.gameObject.emit("collide",D,L,b),L.gameObject&&L.gameObject.emit("collide",L,D,b),d.trigger(D,"onCollide",{pair:b}),d.trigger(L,"onCollide",{pair:b}),D.onCollideCallback&&D.onCollideCallback(b),L.onCollideCallback&&L.onCollideCallback(b),D.onCollideWith[L.id]&&D.onCollideWith[L.id](L,b),L.onCollideWith[D.id]&&L.onCollideWith[D.id](D,b)}),E.emit(u.COLLISION_START,F,D,L)}),d.on(P,"collisionActive",function(F){var G=F.pairs,D,L;G.length>0&&G.map(function(b){D=b.bodyA,L=b.bodyB,D.gameObject&&D.gameObject.emit("collideActive",D,L,b),L.gameObject&&L.gameObject.emit("collideActive",L,D,b),d.trigger(D,"onCollideActive",{pair:b}),d.trigger(L,"onCollideActive",{pair:b}),D.onCollideActiveCallback&&D.onCollideActiveCallback(b),L.onCollideActiveCallback&&L.onCollideActiveCallback(b)}),E.emit(u.COLLISION_ACTIVE,F,D,L)}),d.on(P,"collisionEnd",function(F){var G=F.pairs,D,L;G.length>0&&G.map(function(b){D=b.bodyA,L=b.bodyB,D.gameObject&&D.gameObject.emit("collideEnd",D,L,b),L.gameObject&&L.gameObject.emit("collideEnd",L,D,b),d.trigger(D,"onCollideEnd",{pair:b}),d.trigger(L,"onCollideEnd",{pair:b}),D.onCollideEndCallback&&D.onCollideEndCallback(b),L.onCollideEndCallback&&L.onCollideEndCallback(b)}),E.emit(u.COLLISION_END,F,D,L)})},setBounds:function(E,P,A,F,G,D,L,b,I){return E===void 0&&(E=0),P===void 0&&(P=0),A===void 0&&(A=this.scene.sys.scale.width),F===void 0&&(F=this.scene.sys.scale.height),G===void 0&&(G=64),D===void 0&&(D=!0),L===void 0&&(L=!0),b===void 0&&(b=!0),I===void 0&&(I=!0),this.updateWall(D,"left",E-G,P-G,G,F+G*2),this.updateWall(L,"right",E+A,P-G,G,F+G*2),this.updateWall(b,"top",E,P-G,A,G),this.updateWall(I,"bottom",E,P+F,A,G),this},updateWall:function(E,P,A,F,G,D){var L=this.walls[P];E?(L&&m.remove(this.localWorld,L),A+=G/2,F+=D/2,this.walls[P]=this.create(A,F,G,D,{isStatic:!0,friction:0,frictionStatic:0})):(L&&m.remove(this.localWorld,L),this.walls[P]=null)},createDebugGraphic:function(){var E=this.scene.sys.add.graphics({x:0,y:0});return E.setDepth(Number.MAX_VALUE),this.debugGraphic=E,this.drawDebug=!0,E},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(E,P,A){return E===void 0&&(E=0),P===void 0&&(P=1),A===void 0&&(A=.001),this.localWorld.gravity.x=E,this.localWorld.gravity.y=P,this.localWorld.gravity.scale=A,this},create:function(E,P,A,F,G){var D=h.rectangle(E,P,A,F,G);return m.add(this.localWorld,D),D},add:function(E){return m.add(this.localWorld,E),this},remove:function(E,P){Array.isArray(E)||(E=[E]);for(var A=0;A<E.length;A++){var F=E[A],G=F.body?F.body:F;r.remove(this.localWorld,G,P)}return this},removeConstraint:function(E,P){return r.remove(this.localWorld,E,P),this},convertTilemapLayer:function(E,P){var A=E.layer,F=E.getTilesWithin(0,0,A.width,A.height,{isColliding:!0});return this.convertTiles(F,P),this},convertTiles:function(E,P){if(E.length===0)return this;for(var A=0;A<E.length;A++)new f(this,E[A],P);return this},nextGroup:function(E){return c.nextGroup(E)},nextCategory:function(){return c.nextCategory()},pause:function(){return this.enabled=!1,this.emit(u.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=a.now(),this.emit(u.RESUME),this},update:function(E){if(!(!this.enabled||!this.autoUpdate)){var P=this.engine,A=this.runner,F=a.now(),G=A.delta,D=0,L=E-A.timeLastTick;if((!L||!A.timeLastTick||L>Math.max(y._maxFrameDelta,A.maxFrameTime))&&(L=A.frameDelta||y._frameDeltaFallback),A.frameDeltaSmoothing){A.frameDeltaHistory.push(L),A.frameDeltaHistory=A.frameDeltaHistory.slice(-A.frameDeltaHistorySize);var b=A.frameDeltaHistory.slice(0).sort(),I=A.frameDeltaHistory.slice(b.length*y._smoothingLowerBound,b.length*y._smoothingUpperBound),N=y._mean(I);L=N||L}A.frameDeltaSnapping&&(L=1e3/Math.round(1e3/L)),A.frameDelta=L,A.timeLastTick=E,A.timeBuffer+=A.frameDelta,A.timeBuffer=a.clamp(A.timeBuffer,0,A.frameDelta+G*y._timeBufferMargin),A.lastUpdatesDeferred=0;for(var Z=A.maxUpdates||Math.ceil(A.maxFrameTime/G),U=a.now();G>0&&A.timeBuffer>=G*y._timeBufferMargin;){e.update(P,G),A.timeBuffer-=G,D+=1;var W=a.now()-F,X=a.now()-U,V=W+y._elapsedNextEstimate*X/D;if(D>=Z||V>A.maxFrameTime){A.lastUpdatesDeferred=Math.round(Math.max(0,A.timeBuffer/G-y._timeBufferMargin));break}}}},step:function(E){e.update(this.engine,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(E){var P=E.hasOwnProperty("body")?E.body:E;return r.get(this.localWorld,P.id,P.type)!==null},getAllBodies:function(){return r.allBodies(this.localWorld)},getAllConstraints:function(){return r.allConstraints(this.localWorld)},getAllComposites:function(){return r.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var E=this.debugConfig,P=this.engine,A=this.debugGraphic,F=r.allBodies(this.localWorld);this.debugGraphic.clear(),E.showBroadphase&&P.broadphase.controller&&this.renderGrid(P.broadphase,A,E.broadphaseColor,.5),E.showBounds&&this.renderBodyBounds(F,A,E.boundsColor,.5),(E.showBody||E.showStaticBody)&&this.renderBodies(F),E.showJoint&&this.renderJoints(),(E.showAxes||E.showAngleIndicator)&&this.renderBodyAxes(F,A,E.showAxes,E.angleColor,.5),E.showVelocity&&this.renderBodyVelocity(F,A,E.velocityColor,1,2),E.showSeparations&&this.renderSeparations(P.pairs.list,A,E.separationColor),E.showCollisions&&this.renderCollisions(P.pairs.list,A,E.collisionColor)}},renderGrid:function(E,P,A,F){P.lineStyle(1,A,F);for(var G=a.keys(E.buckets),D=0;D<G.length;D++){var L=G[D];if(!(E.buckets[L].length<2)){var b=L.split(/C|R/);P.strokeRect(parseInt(b[1],10)*E.bucketWidth,parseInt(b[2],10)*E.bucketHeight,E.bucketWidth,E.bucketHeight)}}return this},renderSeparations:function(E,P,A){P.lineStyle(1,A,1);for(var F=0;F<E.length;F++){var G=E[F];if(G.isActive){var D=G.collision,L=D.bodyA,b=D.bodyB,I=L.position,N=b.position,Z=D.penetration,U=!L.isStatic&&!b.isStatic?4:1;b.isStatic&&(U=0),P.lineBetween(N.x,N.y,N.x-Z.x*U,N.y-Z.y*U),U=!L.isStatic&&!b.isStatic?4:1,L.isStatic&&(U=0),P.lineBetween(I.x,I.y,I.x-Z.x*U,I.y-Z.y*U)}}return this},renderCollisions:function(E,P,A){P.lineStyle(1,A,.5),P.fillStyle(A,1);var F,G;for(F=0;F<E.length;F++)if(G=E[F],!!G.isActive)for(var D=0;D<G.contactCount;D++){var L=G.contacts[D],b=L.vertex;b&&P.fillRect(b.x-2,b.y-2,5,5)}for(F=0;F<E.length;F++)if(G=E[F],!!G.isActive){var I=G.collision,N=G.contacts;if(G.contactCount>0){var Z=N[0].vertex.x,U=N[0].vertex.y;G.contactCount===2&&(Z=(N[0].vertex.x+N[1].vertex.x)/2,U=(N[0].vertex.y+N[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic?P.lineBetween(Z-I.normal.x*8,U-I.normal.y*8,Z,U):P.lineBetween(Z+I.normal.x*8,U+I.normal.y*8,Z,U)}}return this},renderBodyBounds:function(E,P,A,F){P.lineStyle(1,A,F);for(var G=0;G<E.length;G++){var D=E[G];if(D.render.visible){var L=D.bounds;if(L)P.strokeRect(L.min.x,L.min.y,L.max.x-L.min.x,L.max.y-L.min.y);else for(var b=D.parts,I=b.length>1?1:0;I<b.length;I++){var N=b[I];P.strokeRect(N.bounds.min.x,N.bounds.min.y,N.bounds.max.x-N.bounds.min.x,N.bounds.max.y-N.bounds.min.y)}}}return this},renderBodyAxes:function(E,P,A,F,G){P.lineStyle(1,F,G);for(var D=0;D<E.length;D++){var L=E[D],b=L.parts;if(L.render.visible){var I,N,Z;if(A)for(N=b.length>1?1:0;N<b.length;N++)for(I=b[N],Z=0;Z<I.axes.length;Z++){var U=I.axes[Z];P.lineBetween(I.position.x,I.position.y,I.position.x+U.x*20,I.position.y+U.y*20)}else for(N=b.length>1?1:0;N<b.length;N++)for(I=b[N],Z=0;Z<I.axes.length;Z++)P.lineBetween(I.position.x,I.position.y,(I.vertices[0].x+I.vertices[I.vertices.length-1].x)/2,(I.vertices[0].y+I.vertices[I.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(E,P,A,F,G){P.lineStyle(G,A,F);for(var D=0;D<E.length;D++){var L=E[D];L.render.visible&&P.lineBetween(L.position.x,L.position.y,L.position.x+(L.position.x-L.positionPrev.x)*2,L.position.y+(L.position.y-L.positionPrev.y)*2)}return this},renderBodies:function(E){for(var P=this.debugGraphic,A=this.debugConfig,F=A.showBody,G=A.showStaticBody,D=A.showSleeping,L=A.showInternalEdges,b=A.showConvexHulls,I=A.renderFill,N=A.renderLine,Z=A.staticBodySleepOpacity,U=A.sleepFillColor,W=A.sleepLineColor,X=A.hullColor,V=0;V<E.length;V++){var O=E[V];if(O.render.visible&&!(!G&&O.isStatic||!F&&!O.isStatic)){var z=O.render.lineColor,B=O.render.lineOpacity,Y=O.render.lineThickness,k=O.render.fillColor,J=O.render.fillOpacity;D&&O.isSleeping&&(O.isStatic?(B*=Z,J*=Z):(z=W,k=U)),I||(k=null),N||(z=null),this.renderBody(O,P,L,z,B,Y,k,J);var j=O.parts.length;b&&j>1&&this.renderConvexHull(O,P,X,Y)}}},renderBody:function(E,P,A,F,G,D,L,b){F===void 0&&(F=null),G===void 0&&(G=null),D===void 0&&(D=1),L===void 0&&(L=null),b===void 0&&(b=null);for(var I=this.debugConfig,N=I.sensorFillColor,Z=I.sensorLineColor,U=E.parts,W=U.length,X=W>1?1:0;X<W;X++){var V=U[X],O=V.render,z=O.opacity;if(!(!O.visible||z===0||V.isSensor&&!I.showSensors)){var B=V.circleRadius;if(P.beginPath(),V.isSensor?(L!==null&&P.fillStyle(N,b*z),F!==null&&P.lineStyle(D,Z,G*z)):(L!==null&&P.fillStyle(L,b*z),F!==null&&P.lineStyle(D,F,G*z)),B)P.arc(V.position.x,V.position.y,B,0,2*Math.PI);else{var Y=V.vertices,k=Y.length;P.moveTo(Y[0].x,Y[0].y);for(var J=1;J<k;J++){var j=Y[J];if(!Y[J-1].isInternal||A?P.lineTo(j.x,j.y):P.moveTo(j.x,j.y),J<k&&j.isInternal&&!A){var tt=(J+1)%k;P.moveTo(Y[tt].x,Y[tt].y)}}P.closePath()}L!==null&&P.fillPath(),F!==null&&P.strokePath()}}if(I.showPositions&&!E.isStatic){var ut=E.position.x,ht=E.position.y,st=Math.ceil(I.positionSize/2);P.fillStyle(I.positionColor,1),P.fillRect(ut-st,ht-st,I.positionSize,I.positionSize)}return this},renderConvexHull:function(E,P,A,F){F===void 0&&(F=1);var G=E.parts,D=G.length;if(D>1){var L=E.vertices;P.lineStyle(F,A),P.beginPath(),P.moveTo(L[0].x,L[0].y);for(var b=1;b<L.length;b++)P.lineTo(L[b].x,L[b].y);P.lineTo(L[0].x,L[0].y),P.strokePath()}return this},renderJoints:function(){for(var E=this.debugGraphic,P=r.allConstraints(this.localWorld),A=0;A<P.length;A++){var F=P[A].render,G=F.lineColor,D=F.lineOpacity,L=F.lineThickness,b=F.pinSize,I=F.anchorColor,N=F.anchorSize;this.renderConstraint(P[A],E,G,D,L,b,I,N)}},renderConstraint:function(E,P,A,F,G,D,L,b){var I=E.render;if(!I.visible||!E.pointA||!E.pointB)return this;P.lineStyle(G,A,F);var N=E.bodyA,Z=E.bodyB,U,W;if(N?U=S.add(N.position,E.pointA):U=E.pointA,I.type==="pin")P.strokeCircle(U.x,U.y,D);else{if(Z?W=S.add(Z.position,E.pointB):W=E.pointB,P.beginPath(),P.moveTo(U.x,U.y),I.type==="spring")for(var X=S.sub(W,U),V=S.perp(S.normalise(X)),O=Math.ceil(a.clamp(E.length/5,12,20)),z,B=1;B<O;B+=1)z=B%2===0?1:-1,P.lineTo(U.x+X.x*(B/O)+V.x*z*4,U.y+X.y*(B/O)+V.y*z*4);P.lineTo(W.x,W.y)}return P.strokePath(),I.anchors&&b>0&&(P.fillStyle(L),P.fillCircle(U.x,U.y,b),P.fillCircle(W.x,W.y,b)),this},resetCollisionIDs:function(){return g._nextCollidingGroupId=1,g._nextNonCollidingGroupId=-1,g._nextCategory=1,this},shutdown:function(){d.off(this.engine),this.removeAllListeners(),m.clear(this.localWorld,!1),e.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});v.exports=C}),70410:(v=>{var T={setBounce:function(t){return this.body.restitution=t,this}};v.exports=T}),66968:(v=>{var T={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var h=0;if(!Array.isArray(t))h=t;else for(var g=0;g<t.length;g++)h|=t[g];return this.body.collisionFilter.mask=h,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,h){Array.isArray(t)||(t=[t]);for(var g=0;g<t.length;g++){var o=t[g].hasOwnProperty("body")?t[g].body:t[g];this.body.setOnCollideWith(o,h)}return this}};v.exports=T}),51607:((v,T,t)=>{var h=t(22562),g={applyForce:function(o){return this._tempVec2.set(this.body.position.x,this.body.position.y),h.applyForce(this.body,this._tempVec2,o),this},applyForceFrom:function(o,a){return h.applyForce(this.body,o,a),this},thrust:function(o){var a=this.body.angle;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(o){var a=this.body.angle-Math.PI/2;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(o){var a=this.body.angle+Math.PI/2;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(o){var a=this.body.angle-Math.PI;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};v.exports=g}),5436:(v=>{var T={setFriction:function(t,h,g){return this.body.friction=t,h!==void 0&&(this.body.frictionAir=h),g!==void 0&&(this.body.frictionStatic=g),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};v.exports=T}),39858:(v=>{var T={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}};v.exports=T}),37302:((v,T,t)=>{var h=t(22562),g=t(26099),o={setMass:function(a){return h.setMass(this.body,a),this},setDensity:function(a){return h.setDensity(this.body,a),this},centerOfMass:{get:function(){return new g(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};v.exports=o}),39132:(v=>{var T={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}};v.exports=T}),57772:((v,T,t)=>{var h=t(66280),g=t(22562),o=t(43855),a=t(95540),r=t(19496),e=t(85791),s=t(41598),u={setRectangle:function(n,l,c){return this.setBody({type:"rectangle",width:n,height:l},c)},setCircle:function(n,l){return this.setBody({type:"circle",radius:n},l)},setPolygon:function(n,l,c){return this.setBody({type:"polygon",sides:l,radius:n},c)},setTrapezoid:function(n,l,c,d){return this.setBody({type:"trapezoid",width:n,height:l,slope:c},d)},setExistingBody:function(n,l){l===void 0&&(l=!0),this.body&&this.world.remove(this.body,!0),this.body=n;for(var c=0;c<n.parts.length;c++)n.parts[c].gameObject=this;var d=this;if(n.destroy=function(){d.world.remove(d.body,!0),d.body.gameObject=null},l&&(this.world.has(n)&&this.world.remove(n,!0),this.world.add(n)),this._originComponent){var f=n.render.sprite.xOffset,m=n.render.sprite.yOffset,y=n.centerOfMass.x,S=n.centerOfMass.y;if(o(y,.5)&&o(S,.5))this.setOrigin(f+.5,m+.5);else{var C=n.centerOffset.x,E=n.centerOffset.y;this.setOrigin(f+C/this.displayWidth,m+E/this.displayHeight)}}return this},setBody:function(n,l){if(!n)return this;var c;typeof n=="string"&&(n={type:n});var d=a(n,"type","rectangle"),f=a(n,"x",this._tempVec2.x),m=a(n,"y",this._tempVec2.y),y=a(n,"width",this.width),S=a(n,"height",this.height);switch(d){case"rectangle":c=h.rectangle(f,m,y,S,l);break;case"circle":var C=a(n,"radius",Math.max(y,S)/2),E=a(n,"maxSides",25);c=h.circle(f,m,C,l,E);break;case"trapezoid":var P=a(n,"slope",.5);c=h.trapezoid(f,m,y,S,P,l);break;case"polygon":var A=a(n,"sides",5),F=a(n,"radius",Math.max(y,S)/2);c=h.polygon(f,m,A,F,l);break;case"fromVertices":case"fromVerts":var G=a(n,"verts",null);if(G)if(typeof G=="string"&&(G=s.fromPath(G)),this.body&&!this.body.hasOwnProperty("temp"))g.setVertices(this.body,G),c=this.body;else{var D=a(n,"flagInternal",!1),L=a(n,"removeCollinear",.01),b=a(n,"minimumArea",10);c=h.fromVertices(f,m,G,l,D,L,b)}break;case"fromPhysicsEditor":c=r.parseBody(f,m,n,l);break;case"fromPhysicsTracer":c=e.parseBody(f,m,n,l);break}return c&&this.setExistingBody(c,n.addToWorld),this}};v.exports=u}),38083:((v,T,t)=>{var h=t(1121),g=t(53614),o=t(35810),a={setToSleep:function(){return g.set(this.body,!0),this},setAwake:function(){return g.set(this.body,!1),this},setSleepThreshold:function(r){return r===void 0&&(r=60),this.body.sleepThreshold=r,this},setSleepEvents:function(r,e){return this.setSleepStartEvent(r),this.setSleepEndEvent(e),this},setSleepStartEvent:function(r){if(r){var e=this.world;o.on(this.body,"sleepStart",function(s){e.emit(h.SLEEP_START,s,this)})}else o.off(this.body,"sleepStart");return this},setSleepEndEvent:function(r){if(r){var e=this.world;o.on(this.body,"sleepEnd",function(s){e.emit(h.SLEEP_END,s,this)})}else o.off(this.body,"sleepEnd");return this}};v.exports=a}),90556:((v,T,t)=>{var h=t(22562),g={setStatic:function(o){return h.setStatic(this.body,o),this},isStatic:function(){return this.body.isStatic}};v.exports=g}),85436:((v,T,t)=>{var h=t(22562),g=t(36383),o=t(86554),a=t(30954),r=4,e={x:{get:function(){return this.body.position.x},set:function(s){this._tempVec2.set(s,this.y),h.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(s){this._tempVec2.set(this.x,s),h.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(s){this.setScale(s,s)}},scaleX:{get:function(){return this._scaleX},set:function(s){var u=1/this._scaleX,n=1/this._scaleY;this._scaleX=s,this._scaleX===0?this.renderFlags&=~r:this.renderFlags|=r,h.scale(this.body,u,n),h.scale(this.body,s,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(s){var u=1/this._scaleX,n=1/this._scaleY;this._scaleY=s,this._scaleY===0?this.renderFlags&=~r:this.renderFlags|=r,h.scale(this.body,u,n),h.scale(this.body,this._scaleX,s)}},angle:{get:function(){return a(this.body.angle*g.RAD_TO_DEG)},set:function(s){this.rotation=a(s)*g.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(s){this._rotation=o(s),h.setAngle(this.body,this._rotation)}},setPosition:function(s,u){return s===void 0&&(s=0),u===void 0&&(u=s),this._tempVec2.set(s,u),h.setPosition(this.body,this._tempVec2),this},setRotation:function(s){return s===void 0&&(s=0),this._rotation=o(s),h.setAngle(this.body,s),this},setFixedRotation:function(){return h.setInertia(this.body,1/0),this},setAngle:function(s){return s===void 0&&(s=0),this.angle=s,h.setAngle(this.body,this.rotation),this},setScale:function(s,u,n){s===void 0&&(s=1),u===void 0&&(u=s);var l=1/this._scaleX,c=1/this._scaleY;return this._scaleX=s,this._scaleY=u,h.scale(this.body,l,c,n),h.scale(this.body,s,u,n),this}};v.exports=e}),42081:((v,T,t)=>{var h=t(22562),g={setVelocityX:function(o){return this._tempVec2.set(o,this.body.velocity.y),h.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(o){return this._tempVec2.set(this.body.velocity.x,o),h.setVelocity(this.body,this._tempVec2),this},setVelocity:function(o,a){return this._tempVec2.set(o,a),h.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return h.getVelocity(this.body)},setAngularVelocity:function(o){return h.setAngularVelocity(this.body,o),this},getAngularVelocity:function(){return h.getAngularVelocity(this.body)},setAngularSpeed:function(o){return h.setAngularSpeed(this.body,o),this},getAngularSpeed:function(){return h.getAngularSpeed(this.body)}};v.exports=g}),31884:((v,T,t)=>{v.exports={Bounce:t(70410),Collision:t(66968),Force:t(51607),Friction:t(5436),Gravity:t(39858),Mass:t(37302),Sensor:t(39132),SetBody:t(57772),Sleep:t(38083),Static:t(90556),Transform:t(85436),Velocity:t(42081)}}),85608:(v=>{v.exports="afteradd"}),1213:(v=>{v.exports="afterremove"}),25968:(v=>{v.exports="afterupdate"}),67205:(v=>{v.exports="beforeadd"}),39438:(v=>{v.exports="beforeremove"}),44823:(v=>{v.exports="beforeupdate"}),92593:(v=>{v.exports="collisionactive"}),60128:(v=>{v.exports="collisionend"}),76861:(v=>{v.exports="collisionstart"}),92362:(v=>{v.exports="dragend"}),76408:(v=>{v.exports="drag"}),93971:(v=>{v.exports="dragstart"}),5656:(v=>{v.exports="pause"}),47861:(v=>{v.exports="resume"}),79099:(v=>{v.exports="sleepend"}),35906:(v=>{v.exports="sleepstart"}),1121:((v,T,t)=>{v.exports={AFTER_ADD:t(85608),AFTER_REMOVE:t(1213),AFTER_UPDATE:t(25968),BEFORE_ADD:t(67205),BEFORE_REMOVE:t(39438),BEFORE_UPDATE:t(44823),COLLISION_ACTIVE:t(92593),COLLISION_END:t(60128),COLLISION_START:t(76861),DRAG_END:t(92362),DRAG:t(76408),DRAG_START:t(93971),PAUSE:t(5656),RESUME:t(47861),SLEEP_END:t(79099),SLEEP_START:t(35906)}}),3875:((v,T,t)=>{v.exports={BodyBounds:t(68174),Components:t(31884),Events:t(1121),Factory:t(28137),MatterGameObject:t(75803),Image:t(23181),Matter:t(19933),MatterPhysics:t(42045),PolyDecomp:t(55973),Sprite:t(34803),TileBody:t(73834),PhysicsEditorParser:t(19496),PhysicsJSONParser:t(85791),PointerConstraint:t(98713),World:t(68243)}}),22562:((v,T,t)=>{var h={};v.exports=h;var g=t(41598),o=t(31725),a=t(53614),r=t(53402),e=t(15647),s=t(66615);(function(){h._timeCorrection=!0,h._inertiaScale=4,h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,h._baseDelta=16.666666666666668,h.create=function(n){var l={id:r.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:n.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!n.hasOwnProperty("position")&&n.hasOwnProperty("vertices")?n.position=g.centre(n.vertices):n.hasOwnProperty("vertices")||(l.vertices=g.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var c=r.extend(l,n);return u(c,n),c.setOnCollideWith=function(d,f){return f?this.onCollideWith[d.id]=f:delete this.onCollideWith[d.id],this},c},h.nextGroup=function(n){return n?h._nextNonCollidingGroupId--:h._nextCollidingGroupId++},h.nextCategory=function(){return h._nextCategory=h._nextCategory<<1,h._nextCategory};var u=function(n,l){if(l=l||{},h.set(n,{bounds:n.bounds||e.create(n.vertices),positionPrev:n.positionPrev||o.clone(n.position),anglePrev:n.anglePrev||n.angle,vertices:n.vertices,parts:n.parts||[n],isStatic:n.isStatic,isSleeping:n.isSleeping,parent:n.parent||n}),g.rotate(n.vertices,n.angle,n.position),s.rotate(n.axes,n.angle),e.update(n.bounds,n.vertices,n.velocity),h.set(n,{axes:l.axes||n.axes,area:l.area||n.area,mass:l.mass||n.mass,inertia:l.inertia||n.inertia}),n.parts.length===1){var c=n.bounds,d=n.centerOfMass,f=n.centerOffset,m=c.max.x-c.min.x,y=c.max.y-c.min.y;d.x=-(c.min.x-n.position.x)/m,d.y=-(c.min.y-n.position.y)/y,f.x=m*d.x,f.y=y*d.y}};h.set=function(n,l,c){var d;typeof l=="string"&&(d=l,l={},l[d]=c);for(d in l)if(Object.prototype.hasOwnProperty.call(l,d))switch(c=l[d],d){case"isStatic":h.setStatic(n,c);break;case"isSleeping":a.set(n,c);break;case"mass":h.setMass(n,c);break;case"density":h.setDensity(n,c);break;case"inertia":h.setInertia(n,c);break;case"vertices":h.setVertices(n,c);break;case"position":h.setPosition(n,c);break;case"angle":h.setAngle(n,c);break;case"velocity":h.setVelocity(n,c);break;case"angularVelocity":h.setAngularVelocity(n,c);break;case"speed":h.setSpeed(n,c);break;case"angularSpeed":h.setAngularSpeed(n,c);break;case"parts":h.setParts(n,c);break;case"centre":h.setCentre(n,c);break;default:n[d]=c}},h.setStatic=function(n,l){for(var c=0;c<n.parts.length;c++){var d=n.parts[c];l?(d.isStatic||(d._original={restitution:d.restitution,friction:d.friction,mass:d.mass,inertia:d.inertia,density:d.density,inverseMass:d.inverseMass,inverseInertia:d.inverseInertia}),d.restitution=0,d.friction=1,d.mass=d.inertia=d.density=1/0,d.inverseMass=d.inverseInertia=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.angularVelocity=0,d.speed=0,d.angularSpeed=0,d.motion=0):d._original&&(d.restitution=d._original.restitution,d.friction=d._original.friction,d.mass=d._original.mass,d.inertia=d._original.inertia,d.density=d._original.density,d.inverseMass=d._original.inverseMass,d.inverseInertia=d._original.inverseInertia,d._original=null),d.isStatic=l}},h.setMass=function(n,l){var c=n.inertia/(n.mass/6);n.inertia=c*(l/6),n.inverseInertia=1/n.inertia,n.mass=l,n.inverseMass=1/n.mass,n.density=n.mass/n.area},h.setDensity=function(n,l){h.setMass(n,l*n.area),n.density=l},h.setInertia=function(n,l){n.inertia=l,n.inverseInertia=1/n.inertia},h.setVertices=function(n,l){l[0].body===n?n.vertices=l:n.vertices=g.create(l,n),n.axes=s.fromVertices(n.vertices),n.area=g.area(n.vertices),h.setMass(n,n.density*n.area);var c=g.centre(n.vertices);g.translate(n.vertices,c,-1),h.setInertia(n,h._inertiaScale*g.inertia(n.vertices,n.mass)),g.translate(n.vertices,n.position),e.update(n.bounds,n.vertices,n.velocity)},h.setParts=function(n,l,c){var d;for(l=l.slice(0),n.parts.length=0,n.parts.push(n),n.parent=n,d=0;d<l.length;d++){var f=l[d];f!==n&&(f.parent=n,n.parts.push(f))}if(n.parts.length!==1){if(c=typeof c<"u"?c:!0,c){var m=[];for(d=0;d<l.length;d++)m=m.concat(l[d].vertices);g.clockwiseSort(m);var y=g.hull(m),S=g.centre(y);h.setVertices(n,y),g.translate(n.vertices,S)}var C=h._totalProperties(n),E=C.centre.x,P=C.centre.y,A=n.bounds,F=n.centerOfMass,G=n.centerOffset;e.update(A,n.vertices,n.velocity),F.x=-(A.min.x-E)/(A.max.x-A.min.x),F.y=-(A.min.y-P)/(A.max.y-A.min.y),G.x=E,G.y=P,n.area=C.area,n.parent=n,n.position.x=E,n.position.y=P,n.positionPrev.x=E,n.positionPrev.y=P,h.setMass(n,C.mass),h.setInertia(n,C.inertia),h.setPosition(n,C.centre)}},h.setCentre=function(n,l,c){c?(n.positionPrev.x+=l.x,n.positionPrev.y+=l.y,n.position.x+=l.x,n.position.y+=l.y):(n.positionPrev.x=l.x-(n.position.x-n.positionPrev.x),n.positionPrev.y=l.y-(n.position.y-n.positionPrev.y),n.position.x=l.x,n.position.y=l.y)},h.setPosition=function(n,l,c){var d=o.sub(l,n.position);c?(n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.velocity.x=d.x,n.velocity.y=d.y,n.speed=o.magnitude(d)):(n.positionPrev.x+=d.x,n.positionPrev.y+=d.y);for(var f=0;f<n.parts.length;f++){var m=n.parts[f];m.position.x+=d.x,m.position.y+=d.y,g.translate(m.vertices,d),e.update(m.bounds,m.vertices,n.velocity)}},h.setAngle=function(n,l,c){var d=l-n.angle;c?(n.anglePrev=n.angle,n.angularVelocity=d,n.angularSpeed=Math.abs(d)):n.anglePrev+=d;for(var f=0;f<n.parts.length;f++){var m=n.parts[f];m.angle+=d,g.rotate(m.vertices,d,n.position),s.rotate(m.axes,d),e.update(m.bounds,m.vertices,n.velocity),f>0&&o.rotateAbout(m.position,d,n.position,m.position)}},h.setVelocity=function(n,l){var c=n.deltaTime/h._baseDelta;n.positionPrev.x=n.position.x-l.x*c,n.positionPrev.y=n.position.y-l.y*c,n.velocity.x=(n.position.x-n.positionPrev.x)/c,n.velocity.y=(n.position.y-n.positionPrev.y)/c,n.speed=o.magnitude(n.velocity)},h.getVelocity=function(n){var l=h._baseDelta/n.deltaTime;return{x:(n.position.x-n.positionPrev.x)*l,y:(n.position.y-n.positionPrev.y)*l}},h.getSpeed=function(n){return o.magnitude(h.getVelocity(n))},h.setSpeed=function(n,l){h.setVelocity(n,o.mult(o.normalise(h.getVelocity(n)),l))},h.setAngularVelocity=function(n,l){var c=n.deltaTime/h._baseDelta;n.anglePrev=n.angle-l*c,n.angularVelocity=(n.angle-n.anglePrev)/c,n.angularSpeed=Math.abs(n.angularVelocity)},h.getAngularVelocity=function(n){return(n.angle-n.anglePrev)*h._baseDelta/n.deltaTime},h.getAngularSpeed=function(n){return Math.abs(h.getAngularVelocity(n))},h.setAngularSpeed=function(n,l){h.setAngularVelocity(n,r.sign(h.getAngularVelocity(n))*l)},h.translate=function(n,l,c){h.setPosition(n,o.add(n.position,l),c)},h.rotate=function(n,l,c,d){if(!c)h.setAngle(n,n.angle+l,d);else{var f=Math.cos(l),m=Math.sin(l),y=n.position.x-c.x,S=n.position.y-c.y;h.setPosition(n,{x:c.x+(y*f-S*m),y:c.y+(y*m+S*f)},d),h.setAngle(n,n.angle+l,d)}},h.scale=function(n,l,c,d){var f=0,m=0;d=d||n.position;for(var y=n.inertia===1/0,S=0;S<n.parts.length;S++){var C=n.parts[S];C.scale.x=l,C.scale.y=c,g.scale(C.vertices,l,c,d),C.axes=s.fromVertices(C.vertices),C.area=g.area(C.vertices),h.setMass(C,n.density*C.area),g.translate(C.vertices,{x:-C.position.x,y:-C.position.y}),h.setInertia(C,h._inertiaScale*g.inertia(C.vertices,C.mass)),g.translate(C.vertices,{x:C.position.x,y:C.position.y}),S>0&&(f+=C.area,m+=C.inertia),C.position.x=d.x+(C.position.x-d.x)*l,C.position.y=d.y+(C.position.y-d.y)*c,e.update(C.bounds,C.vertices,n.velocity)}n.parts.length>1&&(n.area=f,n.isStatic||(h.setMass(n,n.density*f),h.setInertia(n,m))),n.circleRadius&&(l===c?n.circleRadius*=l:n.circleRadius=null),y&&h.setInertia(n,1/0)},h.update=function(n,l){l=(typeof l<"u"?l:16.666666666666668)*n.timeScale;var c=l*l,d=h._timeCorrection?l/(n.deltaTime||l):1,f=1-n.frictionAir*(l/r._baseDelta),m=(n.position.x-n.positionPrev.x)*d,y=(n.position.y-n.positionPrev.y)*d;n.velocity.x=m*f+n.force.x/n.mass*c,n.velocity.y=y*f+n.force.y/n.mass*c,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.position.x+=n.velocity.x,n.position.y+=n.velocity.y,n.deltaTime=l,n.angularVelocity=(n.angle-n.anglePrev)*f*d+n.torque/n.inertia*c,n.anglePrev=n.angle,n.angle+=n.angularVelocity,n.speed=o.magnitude(n.velocity),n.angularSpeed=Math.abs(n.angularVelocity);for(var S=0;S<n.parts.length;S++){var C=n.parts[S];g.translate(C.vertices,n.velocity),S>0&&(C.position.x+=n.velocity.x,C.position.y+=n.velocity.y),n.angularVelocity!==0&&(g.rotate(C.vertices,n.angularVelocity,n.position),s.rotate(C.axes,n.angularVelocity),S>0&&o.rotateAbout(C.position,n.angularVelocity,n.position,C.position)),e.update(C.bounds,C.vertices,n.velocity)}},h.updateVelocities=function(n){var l=h._baseDelta/n.deltaTime,c=n.velocity;c.x=(n.position.x-n.positionPrev.x)*l,c.y=(n.position.y-n.positionPrev.y)*l,n.speed=Math.sqrt(c.x*c.x+c.y*c.y),n.angularVelocity=(n.angle-n.anglePrev)*l,n.angularSpeed=Math.abs(n.angularVelocity)},h.applyForce=function(n,l,c){var d={x:l.x-n.position.x,y:l.y-n.position.y};n.force.x+=c.x,n.force.y+=c.y,n.torque+=d.x*c.y-d.y*c.x},h._totalProperties=function(n){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},c=n.parts.length===1?0:1;c<n.parts.length;c++){var d=n.parts[c],f=d.mass!==1/0?d.mass:1;l.mass+=f,l.area+=d.area,l.inertia+=d.inertia,l.centre=o.add(l.centre,o.mult(d.position,f))}return l.centre=o.div(l.centre,l.mass),l},h.wrap=function(n,l){var c=e.wrap(n.bounds,l);return c&&h.translate(n,c),c}})()}),69351:((v,T,t)=>{var h={};v.exports=h;var g=t(35810),o=t(53402),a=t(15647),r=t(22562);(function(){h.create=function(e){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},h.setModified=function(e,s,u,n){if(g.trigger(e,"compositeModified",e),e.isModified=s,s&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),u&&e.parent&&h.setModified(e.parent,s,u,n),n)for(var l=0;l<e.composites.length;l++){var c=e.composites[l];h.setModified(c,s,u,n)}},h.add=function(e,s){var u=[].concat(s);g.trigger(e,"beforeAdd",{object:s});for(var n=0;n<u.length;n++){var l=u[n];switch(l.type){case"body":if(l.parent!==l){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}h.addBody(e,l);break;case"constraint":h.addConstraint(e,l);break;case"composite":h.addComposite(e,l);break;case"mouseConstraint":h.addConstraint(e,l.constraint);break}}return g.trigger(e,"afterAdd",{object:s}),e},h.remove=function(e,s,u){var n=[].concat(s);g.trigger(e,"beforeRemove",{object:s});for(var l=0;l<n.length;l++){var c=n[l];switch(c.type){case"body":h.removeBody(e,c,u);break;case"constraint":h.removeConstraint(e,c,u);break;case"composite":h.removeComposite(e,c,u);break;case"mouseConstraint":h.removeConstraint(e,c.constraint);break}}return g.trigger(e,"afterRemove",{object:s}),e},h.addComposite=function(e,s){return e.composites.push(s),s.parent=e,h.setModified(e,!0,!0,!1),e},h.removeComposite=function(e,s,u){var n=o.indexOf(e.composites,s);if(n!==-1){var l=h.allBodies(s);h.removeCompositeAt(e,n);for(var c=0;c<l.length;c++)l[c].sleepCounter=0}if(u)for(var c=0;c<e.composites.length;c++)h.removeComposite(e.composites[c],s,!0);return e},h.removeCompositeAt=function(e,s){return e.composites.splice(s,1),h.setModified(e,!0,!0,!1),e},h.addBody=function(e,s){return e.bodies.push(s),h.setModified(e,!0,!0,!1),e},h.removeBody=function(e,s,u){var n=o.indexOf(e.bodies,s);if(n!==-1&&(h.removeBodyAt(e,n),s.sleepCounter=0),u)for(var l=0;l<e.composites.length;l++)h.removeBody(e.composites[l],s,!0);return e},h.removeBodyAt=function(e,s){return e.bodies.splice(s,1),h.setModified(e,!0,!0,!1),e},h.addConstraint=function(e,s){return e.constraints.push(s),h.setModified(e,!0,!0,!1),e},h.removeConstraint=function(e,s,u){var n=o.indexOf(e.constraints,s);if(n!==-1&&h.removeConstraintAt(e,n),u)for(var l=0;l<e.composites.length;l++)h.removeConstraint(e.composites[l],s,!0);return e},h.removeConstraintAt=function(e,s){return e.constraints.splice(s,1),h.setModified(e,!0,!0,!1),e},h.clear=function(e,s,u){if(u)for(var n=0;n<e.composites.length;n++)h.clear(e.composites[n],s,!0);return s?e.bodies=e.bodies.filter(function(l){return l.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,h.setModified(e,!0,!0,!1),e},h.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var s=[].concat(e.bodies),u=0;u<e.composites.length;u++)s=s.concat(h.allBodies(e.composites[u]));return e.cache&&(e.cache.allBodies=s),s},h.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var s=[].concat(e.constraints),u=0;u<e.composites.length;u++)s=s.concat(h.allConstraints(e.composites[u]));return e.cache&&(e.cache.allConstraints=s),s},h.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var s=[].concat(e.composites),u=0;u<e.composites.length;u++)s=s.concat(h.allComposites(e.composites[u]));return e.cache&&(e.cache.allComposites=s),s},h.get=function(e,s,u){var n,l;switch(u){case"body":n=h.allBodies(e);break;case"constraint":n=h.allConstraints(e);break;case"composite":n=h.allComposites(e).concat(e);break}return n?(l=n.filter(function(c){return c.id.toString()===s.toString()}),l.length===0?null:l[0]):null},h.move=function(e,s,u){return h.remove(e,s),h.add(u,s),e},h.rebase=function(e){for(var s=h.allBodies(e).concat(h.allConstraints(e)).concat(h.allComposites(e)),u=0;u<s.length;u++)s[u].id=o.nextId();return e},h.translate=function(e,s,u){for(var n=u?h.allBodies(e):e.bodies,l=0;l<n.length;l++)r.translate(n[l],s);return e},h.rotate=function(e,s,u,n){for(var l=Math.cos(s),c=Math.sin(s),d=n?h.allBodies(e):e.bodies,f=0;f<d.length;f++){var m=d[f],y=m.position.x-u.x,S=m.position.y-u.y;r.setPosition(m,{x:u.x+(y*l-S*c),y:u.y+(y*c+S*l)}),r.rotate(m,s)}return e},h.scale=function(e,s,u,n,l){for(var c=l?h.allBodies(e):e.bodies,d=0;d<c.length;d++){var f=c[d],m=f.position.x-n.x,y=f.position.y-n.y;r.setPosition(f,{x:n.x+m*s,y:n.y+y*u}),r.scale(f,s,u)}return e},h.bounds=function(e){for(var s=h.allBodies(e),u=[],n=0;n<s.length;n+=1){var l=s[n];u.push(l.bounds.min,l.bounds.max)}return a.create(u)},h.wrap=function(e,s){var u=a.wrap(h.bounds(e),s);return u&&h.translate(e,u),u}})()}),4372:((v,T,t)=>{var h={};v.exports=h;var g=t(69351);(function(){h.create=g.create,h.add=g.add,h.remove=g.remove,h.clear=g.clear,h.addComposite=g.addComposite,h.addBody=g.addBody,h.addConstraint=g.addConstraint})()}),52284:((v,T,t)=>{var h={};v.exports=h;var g=t(41598),o=t(4506);(function(){var a=[],r={overlap:0,axis:null},e={overlap:0,axis:null};h.create=function(s,u){return{pair:null,collided:!1,bodyA:s,bodyB:u,parentA:s.parent,parentB:u.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},h.collides=function(s,u,n){if(h._overlapAxes(r,s.vertices,u.vertices,s.axes),r.overlap<=0||(h._overlapAxes(e,u.vertices,s.vertices,u.axes),e.overlap<=0))return null;var l=n&&n.table[o.id(s,u)],c;l?c=l.collision:(c=h.create(s,u),c.collided=!0,c.bodyA=s.id<u.id?s:u,c.bodyB=s.id<u.id?u:s,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent),s=c.bodyA,u=c.bodyB;var d;r.overlap<e.overlap?d=r:d=e;var f=c.normal,m=c.tangent,y=c.penetration,S=c.supports,C=d.overlap,E=d.axis,P=E.x,A=E.y,F=u.position.x-s.position.x,G=u.position.y-s.position.y;P*F+A*G>=0&&(P=-P,A=-A),f.x=P,f.y=A,m.x=-A,m.y=P,y.x=P*C,y.y=A*C,c.depth=C;var D=h._findSupports(s,u,f,1),L=0;if(g.contains(s.vertices,D[0])&&(S[L++]=D[0]),g.contains(s.vertices,D[1])&&(S[L++]=D[1]),L<2){var b=h._findSupports(u,s,f,-1);g.contains(u.vertices,b[0])&&(S[L++]=b[0]),L<2&&g.contains(u.vertices,b[1])&&(S[L++]=b[1])}return L===0&&(S[L++]=D[0]),c.supportCount=L,c},h._overlapAxes=function(s,u,n,l){var c=u.length,d=n.length,f=u[0].x,m=u[0].y,y=n[0].x,S=n[0].y,C=l.length,E=Number.MAX_VALUE,P=0,A,F,G,D,L,b;for(L=0;L<C;L++){var I=l[L],N=I.x,Z=I.y,U=f*N+m*Z,W=y*N+S*Z,X=U,V=W;for(b=1;b<c;b+=1)D=u[b].x*N+u[b].y*Z,D>X?X=D:D<U&&(U=D);for(b=1;b<d;b+=1)D=n[b].x*N+n[b].y*Z,D>V?V=D:D<W&&(W=D);if(F=X-W,G=V-U,A=F<G?F:G,A<E&&(E=A,P=L,A<=0))break}s.axis=l[P],s.overlap=E},h._findSupports=function(s,u,n,l){var c=u.vertices,d=c.length,f=s.position.x,m=s.position.y,y=n.x*l,S=n.y*l,C=c[0],E=C,P=y*(f-E.x)+S*(m-E.y),A,F,G;for(G=1;G<d;G+=1)E=c[G],F=y*(f-E.x)+S*(m-E.y),F<P&&(P=F,C=E);return A=c[(d+C.index-1)%d],P=y*(f-A.x)+S*(m-A.y),E=c[(C.index+1)%d],y*(f-E.x)+S*(m-E.y)<P?(a[0]=C,a[1]=E,a):(a[0]=C,a[1]=A,a)}})()}),43424:(v=>{var T={};v.exports=T,(function(){T.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}})()}),81388:((v,T,t)=>{var h={};v.exports=h;var g=t(53402),o=t(52284);(function(){h.create=function(a){var r={bodies:[],collisions:[],pairs:null};return g.extend(r,a)},h.setBodies=function(a,r){a.bodies=r.slice(0)},h.clear=function(a){a.bodies=[],a.collisions=[]},h.collisions=function(a){var r=a.pairs,e=a.bodies,s=e.length,u=h.canCollide,n=o.collides,l=a.collisions,c=0,d,f;for(e.sort(h._compareBoundsX),d=0;d<s;d++){var m=e[d],y=m.bounds,S=m.bounds.max.x,C=m.bounds.max.y,E=m.bounds.min.y,P=m.isStatic||m.isSleeping,A=m.parts.length,F=A===1;for(f=d+1;f<s;f++){var G=e[f],D=G.bounds;if(D.min.x>S)break;if(!(C<D.min.y||E>D.max.y)&&!(P&&(G.isStatic||G.isSleeping))&&u(m.collisionFilter,G.collisionFilter)){var L=G.parts.length;if(F&&L===1){var b=n(m,G,r);b&&(l[c++]=b)}else for(var I=A>1?1:0,N=L>1?1:0,Z=I;Z<A;Z++)for(var U=m.parts[Z],y=U.bounds,W=N;W<L;W++){var X=G.parts[W],D=X.bounds;if(!(y.min.x>D.max.x||y.max.x<D.min.x||y.max.y<D.min.y||y.min.y>D.max.y)){var b=n(U,X,r);b&&(l[c++]=b)}}}}}return l.length!==c&&(l.length=c),l},h.canCollide=function(a,r){return a.group===r.group&&a.group!==0?a.group>0:(a.mask&r.category)!==0&&(r.mask&a.category)!==0},h._compareBoundsX=function(a,r){return a.bounds.min.x-r.bounds.min.x}})()}),4506:((v,T,t)=>{var h={};v.exports=h;var g=t(43424);(function(){h.create=function(o,a){var r=o.bodyA,e=o.bodyB,s={id:h.id(r,e),bodyA:r,bodyB:e,collision:o,contacts:[g.create(),g.create()],contactCount:0,separation:0,isActive:!0,isSensor:r.isSensor||e.isSensor,timeCreated:a,timeUpdated:a,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return h.update(s,o,a),s},h.update=function(o,a,r){var e=a.supports,s=a.supportCount,u=o.contacts,n=a.parentA,l=a.parentB;o.isActive=!0,o.timeUpdated=r,o.collision=a,o.separation=a.depth,o.inverseMass=n.inverseMass+l.inverseMass,o.friction=n.friction<l.friction?n.friction:l.friction,o.frictionStatic=n.frictionStatic>l.frictionStatic?n.frictionStatic:l.frictionStatic,o.restitution=n.restitution>l.restitution?n.restitution:l.restitution,o.slop=n.slop>l.slop?n.slop:l.slop,o.contactCount=s,a.pair=o;var c=e[0],d=u[0],f=e[1],m=u[1];(m.vertex===c||d.vertex===f)&&(u[1]=d,u[0]=d=m,m=u[1]),d.vertex=c,m.vertex=f},h.setActive=function(o,a,r){a?(o.isActive=!0,o.timeUpdated=r):(o.isActive=!1,o.contactCount=0)},h.id=function(o,a){return o.id<a.id?o.id.toString(36)+":"+a.id.toString(36):a.id.toString(36)+":"+o.id.toString(36)}})()}),99561:((v,T,t)=>{var h={};v.exports=h;var g=t(4506),o=t(53402);(function(){h.create=function(a){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},h.update=function(a,r,e){var s=g.update,u=g.create,n=g.setActive,l=a.table,c=a.list,d=c.length,f=d,m=a.collisionStart,y=a.collisionEnd,S=a.collisionActive,C=r.length,E=0,P=0,A=0,F,G,D;for(D=0;D<C;D++)F=r[D],G=F.pair,G?(G.isActive&&(S[A++]=G),s(G,F,e)):(G=u(F,e),l[G.id]=G,m[E++]=G,c[f++]=G);for(f=0,d=c.length,D=0;D<d;D++)G=c[D],G.timeUpdated>=e?c[f++]=G:(n(G,!1,e),G.collision.bodyA.sleepCounter>0&&G.collision.bodyB.sleepCounter>0?c[f++]=G:(y[P++]=G,delete l[G.id]));c.length!==f&&(c.length=f),m.length!==E&&(m.length=E),y.length!==P&&(y.length=P),S.length!==A&&(S.length=A)},h.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()}),73296:((v,T,t)=>{var h={};v.exports=h;var g=t(31725),o=t(52284),a=t(15647),r=t(66280),e=t(41598);(function(){h.collides=function(s,u){for(var n=[],l=u.length,c=s.bounds,d=o.collides,f=a.overlaps,m=0;m<l;m++){var y=u[m],S=y.parts.length,C=S===1?0:1;if(s!==y&&f(y.bounds,c))for(var E=C;E<S;E++){var P=y.parts[E];if(f(P.bounds,c)){var A=d(P,s);if(A){n.push(A);break}}}}return n},h.ray=function(s,u,n,l){l=l||1e-100;for(var c=g.angle(u,n),d=g.magnitude(g.sub(u,n)),f=(n.x+u.x)*.5,m=(n.y+u.y)*.5,y=r.rectangle(f,m,d,l,{angle:c}),S=h.collides(y,s),C=0;C<S.length;C+=1){var E=S[C];E.body=E.bodyB=E.bodyA}return S},h.region=function(s,u,n){for(var l=[],c=0;c<s.length;c++){var d=s[c],f=a.overlaps(d.bounds,u);(f&&!n||!f&&n)&&l.push(d)}return l},h.point=function(s,u){for(var n=[],l=0;l<s.length;l++){var c=s[l];if(a.contains(c.bounds,u))for(var d=c.parts.length===1?0:1;d<c.parts.length;d++){var f=c.parts[d];if(a.contains(f.bounds,u)&&e.contains(f.vertices,u)){n.push(c);break}}}return n}})()}),66272:((v,T,t)=>{var h={};v.exports=h;var g=t(41598),o=t(53402),a=t(15647);(function(){h._restingThresh=2,h._restingThreshTangent=Math.sqrt(6),h._positionDampen=.9,h._positionWarming=.8,h._frictionNormalMultiplier=5,h._frictionMaxStatic=Number.MAX_VALUE,h.preSolvePosition=function(r){var e,s,u,n=r.length;for(e=0;e<n;e++)s=r[e],s.isActive&&(u=s.contactCount,s.collision.parentA.totalContacts+=u,s.collision.parentB.totalContacts+=u)},h.solvePosition=function(r,e,s){var u,n,l,c,d,f,m,y,S=h._positionDampen*(s||1),C=o.clamp(e/o._baseDelta,0,1),E=r.length;for(u=0;u<E;u++)n=r[u],!(!n.isActive||n.isSensor)&&(l=n.collision,c=l.parentA,d=l.parentB,f=l.normal,n.separation=l.depth+f.x*(d.positionImpulse.x-c.positionImpulse.x)+f.y*(d.positionImpulse.y-c.positionImpulse.y));for(u=0;u<E;u++)n=r[u],!(!n.isActive||n.isSensor)&&(l=n.collision,c=l.parentA,d=l.parentB,f=l.normal,y=n.separation-n.slop*C,(c.isStatic||d.isStatic)&&(y*=2),c.isStatic||c.isSleeping||(m=S/c.totalContacts,c.positionImpulse.x+=f.x*y*m,c.positionImpulse.y+=f.y*y*m),d.isStatic||d.isSleeping||(m=S/d.totalContacts,d.positionImpulse.x-=f.x*y*m,d.positionImpulse.y-=f.y*y*m))},h.postSolvePosition=function(r){for(var e=h._positionWarming,s=r.length,u=g.translate,n=a.update,l=0;l<s;l++){var c=r[l],d=c.positionImpulse,f=d.x,m=d.y,y=c.velocity;if(c.totalContacts=0,f!==0||m!==0){for(var S=0;S<c.parts.length;S++){var C=c.parts[S];u(C.vertices,d),n(C.bounds,C.vertices,y),C.position.x+=f,C.position.y+=m}c.positionPrev.x+=f,c.positionPrev.y+=m,f*y.x+m*y.y<0?(d.x=0,d.y=0):(d.x*=e,d.y*=e)}}},h.preSolveVelocity=function(r){var e=r.length,s,u;for(s=0;s<e;s++){var n=r[s];if(!(!n.isActive||n.isSensor)){var l=n.contacts,c=n.contactCount,d=n.collision,f=d.parentA,m=d.parentB,y=d.normal,S=d.tangent;for(u=0;u<c;u++){var C=l[u],E=C.vertex,P=C.normalImpulse,A=C.tangentImpulse;if(P!==0||A!==0){var F=y.x*P+S.x*A,G=y.y*P+S.y*A;f.isStatic||f.isSleeping||(f.positionPrev.x+=F*f.inverseMass,f.positionPrev.y+=G*f.inverseMass,f.anglePrev+=f.inverseInertia*((E.x-f.position.x)*G-(E.y-f.position.y)*F)),m.isStatic||m.isSleeping||(m.positionPrev.x-=F*m.inverseMass,m.positionPrev.y-=G*m.inverseMass,m.anglePrev-=m.inverseInertia*((E.x-m.position.x)*G-(E.y-m.position.y)*F))}}}}},h.solveVelocity=function(r,e){var s=e/o._baseDelta,u=s*s,n=u*s,l=-h._restingThresh*s,c=h._restingThreshTangent,d=h._frictionNormalMultiplier*s,f=h._frictionMaxStatic,m=r.length,y,S,C,E;for(C=0;C<m;C++){var P=r[C];if(!(!P.isActive||P.isSensor)){var A=P.collision,F=A.parentA,G=A.parentB,D=A.normal.x,L=A.normal.y,b=A.tangent.x,I=A.tangent.y,N=P.inverseMass,Z=P.friction*P.frictionStatic*d,U=P.contacts,W=P.contactCount,X=1/W,V=F.position.x-F.positionPrev.x,O=F.position.y-F.positionPrev.y,z=F.angle-F.anglePrev,B=G.position.x-G.positionPrev.x,Y=G.position.y-G.positionPrev.y,k=G.angle-G.anglePrev;for(E=0;E<W;E++){var J=U[E],j=J.vertex,tt=j.x-F.position.x,ut=j.y-F.position.y,ht=j.x-G.position.x,st=j.y-G.position.y,dt=V-ut*z,lt=O+tt*z,ft=B-st*k,Lt=Y+ht*k,Nt=dt-ft,Vt=lt-Lt,pt=D*Nt+L*Vt,Pt=b*Nt+I*Vt,Dt=P.separation+pt,Gt=Math.min(Dt,1);Gt=Dt<0?0:Gt;var Ut=Gt*Z;Pt<-Ut||Pt>Ut?(S=Pt>0?Pt:-Pt,y=P.friction*(Pt>0?1:-1)*n,y<-S?y=-S:y>S&&(y=S)):(y=Pt,S=f);var Ot=tt*L-ut*D,Wt=ht*L-st*D,Zt=X/(N+F.inverseInertia*Ot*Ot+G.inverseInertia*Wt*Wt),ve=(1+P.restitution)*pt*Zt;if(y*=Zt,pt<l)J.normalImpulse=0;else{var Te=J.normalImpulse;J.normalImpulse+=ve,J.normalImpulse>0&&(J.normalImpulse=0),ve=J.normalImpulse-Te}if(Pt<-c||Pt>c)J.tangentImpulse=0;else{var _t=J.tangentImpulse;J.tangentImpulse+=y,J.tangentImpulse<-S&&(J.tangentImpulse=-S),J.tangentImpulse>S&&(J.tangentImpulse=S),y=J.tangentImpulse-_t}var ce=D*ve+b*y,wt=L*ve+I*y;F.isStatic||F.isSleeping||(F.positionPrev.x+=ce*F.inverseMass,F.positionPrev.y+=wt*F.inverseMass,F.anglePrev+=(tt*wt-ut*ce)*F.inverseInertia),G.isStatic||G.isSleeping||(G.positionPrev.x-=ce*G.inverseMass,G.positionPrev.y-=wt*G.inverseMass,G.anglePrev-=(ht*wt-st*ce)*G.inverseInertia)}}}}})()}),48140:((v,T,t)=>{var h={};v.exports=h;var g=t(41598),o=t(31725),a=t(53614),r=t(15647),e=t(66615),s=t(53402);(function(){h._warming=.4,h._torqueDampen=1,h._minLength=1e-6,h.create=function(u){var n=u;n.bodyA&&!n.pointA&&(n.pointA={x:0,y:0}),n.bodyB&&!n.pointB&&(n.pointB={x:0,y:0});var l=n.bodyA?o.add(n.bodyA.position,n.pointA):n.pointA,c=n.bodyB?o.add(n.bodyB.position,n.pointB):n.pointB,d=o.magnitude(o.sub(l,c));n.length=typeof n.length<"u"?n.length:d,n.id=n.id||s.nextId(),n.label=n.label||"Constraint",n.type="constraint",n.stiffness=n.stiffness||(n.length>0?1:.7),n.damping=n.damping||0,n.angularStiffness=n.angularStiffness||0,n.angleA=n.bodyA?n.bodyA.angle:n.angleA,n.angleB=n.bodyB?n.bodyB.angle:n.angleB,n.plugin={};var f={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return n.length===0&&n.stiffness>.1?(f.type="pin",f.anchors=!1):n.stiffness<.9&&(f.type="spring"),n.render=s.extend(f,n.render),n},h.preSolveAll=function(u){for(var n=0;n<u.length;n+=1){var l=u[n],c=l.constraintImpulse;l.isStatic||c.x===0&&c.y===0&&c.angle===0||(l.position.x+=c.x,l.position.y+=c.y,l.angle+=c.angle)}},h.solveAll=function(u,n){for(var l=s.clamp(n/s._baseDelta,0,1),c=0;c<u.length;c+=1){var d=u[c],f=!d.bodyA||d.bodyA&&d.bodyA.isStatic,m=!d.bodyB||d.bodyB&&d.bodyB.isStatic;(f||m)&&h.solve(u[c],l)}for(c=0;c<u.length;c+=1)d=u[c],f=!d.bodyA||d.bodyA&&d.bodyA.isStatic,m=!d.bodyB||d.bodyB&&d.bodyB.isStatic,!f&&!m&&h.solve(u[c],l)},h.solve=function(u,n){var l=u.bodyA,c=u.bodyB,d=u.pointA,f=u.pointB;if(!(!l&&!c)){l&&!l.isStatic&&(o.rotate(d,l.angle-u.angleA,d),u.angleA=l.angle),c&&!c.isStatic&&(o.rotate(f,c.angle-u.angleB,f),u.angleB=c.angle);var m=d,y=f;if(l&&(m=o.add(l.position,d)),c&&(y=o.add(c.position,f)),!(!m||!y)){var S=o.sub(m,y),C=o.magnitude(S);C<h._minLength&&(C=h._minLength);var E=(C-u.length)/C,P=u.stiffness>=1||u.length===0,A=P?u.stiffness*n:u.stiffness*n*n,F=u.damping*n,G=o.mult(S,E*A),D=(l?l.inverseMass:0)+(c?c.inverseMass:0),L=(l?l.inverseInertia:0)+(c?c.inverseInertia:0),b=D+L,I,N,Z,U,W;if(F>0){var X=o.create();Z=o.div(S,C),W=o.sub(c&&o.sub(c.position,c.positionPrev)||X,l&&o.sub(l.position,l.positionPrev)||X),U=o.dot(Z,W)}l&&!l.isStatic&&(N=l.inverseMass/D,l.constraintImpulse.x-=G.x*N,l.constraintImpulse.y-=G.y*N,l.position.x-=G.x*N,l.position.y-=G.y*N,F>0&&(l.positionPrev.x-=F*Z.x*U*N,l.positionPrev.y-=F*Z.y*U*N),I=o.cross(d,G)/b*h._torqueDampen*l.inverseInertia*(1-u.angularStiffness),l.constraintImpulse.angle-=I,l.angle-=I),c&&!c.isStatic&&(N=c.inverseMass/D,c.constraintImpulse.x+=G.x*N,c.constraintImpulse.y+=G.y*N,c.position.x+=G.x*N,c.position.y+=G.y*N,F>0&&(c.positionPrev.x+=F*Z.x*U*N,c.positionPrev.y+=F*Z.y*U*N),I=o.cross(f,G)/b*h._torqueDampen*c.inverseInertia*(1-u.angularStiffness),c.constraintImpulse.angle+=I,c.angle+=I)}}},h.postSolveAll=function(u){for(var n=0;n<u.length;n++){var l=u[n],c=l.constraintImpulse;if(!(l.isStatic||c.x===0&&c.y===0&&c.angle===0)){a.set(l,!1);for(var d=0;d<l.parts.length;d++){var f=l.parts[d];g.translate(f.vertices,c),d>0&&(f.position.x+=c.x,f.position.y+=c.y),c.angle!==0&&(g.rotate(f.vertices,c.angle,l.position),e.rotate(f.axes,c.angle),d>0&&o.rotateAbout(f.position,c.angle,l.position,f.position)),r.update(f.bounds,f.vertices,l.velocity)}c.angle*=h._warming,c.x*=h._warming,c.y*=h._warming}}},h.pointAWorld=function(u){return{x:(u.bodyA?u.bodyA.position.x:0)+(u.pointA?u.pointA.x:0),y:(u.bodyA?u.bodyA.position.y:0)+(u.pointA?u.pointA.y:0)}},h.pointBWorld=function(u){return{x:(u.bodyB?u.bodyB.position.x:0)+(u.pointB?u.pointB.x:0),y:(u.bodyB?u.bodyB.position.y:0)+(u.pointB?u.pointB.y:0)}},h.currentLength=function(u){var n=(u.bodyA?u.bodyA.position.x:0)+(u.pointA?u.pointA.x:0),l=(u.bodyA?u.bodyA.position.y:0)+(u.pointA?u.pointA.y:0),c=(u.bodyB?u.bodyB.position.x:0)+(u.pointB?u.pointB.x:0),d=(u.bodyB?u.bodyB.position.y:0)+(u.pointB?u.pointB.y:0),f=n-c,m=l-d;return Math.sqrt(f*f+m*m)}})()}),53402:((v,T,t)=>{var h={};v.exports=h,(function(){h._baseDelta=16.666666666666668,h._nextId=0,h._seed=0,h._nowStartTime=+new Date,h._warnedOnce={},h._decomp=null,h.extend=function(o,a){var r,e;typeof a=="boolean"?(r=2,e=a):(r=1,e=!0);for(var s=r;s<arguments.length;s++){var u=arguments[s];if(u)for(var n in u)e&&u[n]&&u[n].constructor===Object&&(!o[n]||o[n].constructor===Object)?(o[n]=o[n]||{},h.extend(o[n],e,u[n])):o[n]=u[n]}return o},h.clone=function(o,a){return h.extend({},a,o)},h.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var r in o)a.push(r);return a},h.values=function(o){var a=[];if(Object.keys){for(var r=Object.keys(o),e=0;e<r.length;e++)a.push(o[r[e]]);return a}for(var s in o)a.push(o[s]);return a},h.get=function(o,a,r,e){a=a.split(".").slice(r,e);for(var s=0;s<a.length;s+=1)o=o[a[s]];return o},h.set=function(o,a,r,e,s){var u=a.split(".").slice(e,s);return h.get(o,a,0,-1)[u[u.length-1]]=r,r},h.shuffle=function(o){for(var a=o.length-1;a>0;a--){var r=Math.floor(h.random()*(a+1)),e=o[a];o[a]=o[r],o[r]=e}return o},h.choose=function(o){return o[Math.floor(h.random()*o.length)]},h.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},h.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},h.isFunction=function(o){return typeof o=="function"},h.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},h.isString=function(o){return toString.call(o)==="[object String]"},h.clamp=function(o,a,r){return o<a?a:o>r?r:o},h.sign=function(o){return o<0?-1:1},h.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-h._nowStartTime},h.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+g()*(a-o)};var g=function(){return h._seed=(h._seed*9301+49297)%233280,h._seed/233280};h.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},h.logLevel=1,h.log=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.info=function(){console&&h.logLevel>0&&h.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warn=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");h._warnedOnce[o]||(h.warn(o),h._warnedOnce[o]=!0)},h.deprecated=function(o,a,r){o[a]=h.chain(function(){h.warnOnce(" deprecated ",r)},o[a])},h.nextId=function(){return h._nextId++},h.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var r=0;r<o.length;r++)if(o[r]===a)return r;return-1},h.map=function(o,a){if(o.map)return o.map(a);for(var r=[],e=0;e<o.length;e+=1)r.push(a(o[e]));return r},h.topologicalSort=function(o){var a=[],r=[],e=[];for(var s in o)!r[s]&&!e[s]&&h._topologicalSort(s,r,e,o,a);return a},h._topologicalSort=function(o,a,r,e,s){var u=e[o]||[];r[o]=!0;for(var n=0;n<u.length;n+=1){var l=u[n];r[l]||a[l]||h._topologicalSort(l,a,r,e,s)}r[o]=!1,a[o]=!0,s.push(o)},h.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var r=arguments[a];r._chained?o.push.apply(o,r._chained):o.push(r)}var e=function(){for(var s,u=new Array(arguments.length),n=0,l=arguments.length;n<l;n++)u[n]=arguments[n];for(n=0;n<o.length;n+=1){var c=o[n].apply(s,u);typeof c<"u"&&(s=c)}return s};return e._chained=o,e},h.chainPathBefore=function(o,a,r){return h.set(o,a,h.chain(r,h.get(o,a)))},h.chainPathAfter=function(o,a,r){return h.set(o,a,h.chain(h.get(o,a),r))},h.setDecomp=function(o){h._decomp=o},h.getDecomp=function(){var o=h._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof t.g<"u"&&(o=t.g.decomp)}catch{o=null}return o}})()}),48413:((v,T,t)=>{var h={};v.exports=h;var g=t(53614),o=t(66272),a=t(81388),r=t(99561),e=t(35810),s=t(69351),u=t(48140),n=t(53402),l=t(22562);(function(){h._deltaMax=16.666666666666668,h.create=function(c){c=c||{};var d={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},f=n.extend(d,c);return f.world=c.world||s.create({label:"World"}),f.pairs=c.pairs||r.create(),f.detector=c.detector||a.create(),f.detector.pairs=f.pairs,f.grid={buckets:[]},f.world.gravity=f.gravity,f.broadphase=f.grid,f.metrics={},f},h.update=function(c,d){var f=n.now(),m=c.world,y=c.detector,S=c.pairs,C=c.timing,E=C.timestamp,P;d>h._deltaMax&&n.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",h._deltaMax.toFixed(3),"ms."),d=typeof d<"u"?d:n._baseDelta,d*=C.timeScale,C.timestamp+=d,C.lastDelta=d;var A={timestamp:C.timestamp,delta:d};e.trigger(c,"beforeUpdate",A);var F=s.allBodies(m),G=s.allConstraints(m),D=s.allComposites(m);for(m.isModified&&(a.setBodies(y,F),s.setModified(m,!1,!1,!0)),c.enableSleeping&&g.update(F,d),h._bodiesApplyGravity(F,c.gravity),h.wrap(F,D),h.attractors(F),d>0&&h._bodiesUpdate(F,d),e.trigger(c,"beforeSolve",A),u.preSolveAll(F),P=0;P<c.constraintIterations;P++)u.solveAll(G,d);u.postSolveAll(F);var L=a.collisions(y);r.update(S,L,E),c.enableSleeping&&g.afterCollisions(S.list),S.collisionStart.length>0&&e.trigger(c,"collisionStart",{pairs:S.collisionStart,timestamp:C.timestamp,delta:d});var b=n.clamp(20/c.positionIterations,0,1);for(o.preSolvePosition(S.list),P=0;P<c.positionIterations;P++)o.solvePosition(S.list,d,b);for(o.postSolvePosition(F),u.preSolveAll(F),P=0;P<c.constraintIterations;P++)u.solveAll(G,d);for(u.postSolveAll(F),o.preSolveVelocity(S.list),P=0;P<c.velocityIterations;P++)o.solveVelocity(S.list,d);return h._bodiesUpdateVelocities(F),S.collisionActive.length>0&&e.trigger(c,"collisionActive",{pairs:S.collisionActive,timestamp:C.timestamp,delta:d}),S.collisionEnd.length>0&&e.trigger(c,"collisionEnd",{pairs:S.collisionEnd,timestamp:C.timestamp,delta:d}),h._bodiesClearForces(F),e.trigger(c,"afterUpdate",A),c.timing.lastElapsed=n.now()-f,c},h.merge=function(c,d){if(n.extend(c,d),d.world){c.world=d.world,h.clear(c);for(var f=s.allBodies(c.world),m=0;m<f.length;m++){var y=f[m];g.set(y,!1),y.id=n.nextId()}}},h.clear=function(c){r.clear(c.pairs),a.clear(c.detector)},h._bodiesClearForces=function(c){for(var d=c.length,f=0;f<d;f++){var m=c[f];m.force.x=0,m.force.y=0,m.torque=0}},h._bodiesApplyGravity=function(c,d){var f=typeof d.scale<"u"?d.scale:.001,m=c.length;if(!(d.x===0&&d.y===0||f===0))for(var y=0;y<m;y++){var S=c[y];S.ignoreGravity||S.isStatic||S.isSleeping||(S.force.y+=S.mass*d.y*f,S.force.x+=S.mass*d.x*f)}},h._bodiesUpdate=function(c,d){for(var f=c.length,m=0;m<f;m++){var y=c[m];y.isStatic||y.isSleeping||l.update(y,d)}},h._bodiesUpdateVelocities=function(c){for(var d=c.length,f=0;f<d;f++)l.updateVelocities(c[f])},h.wrap=function(c,d){for(var f=0;f<c.length;f+=1){var m=c[f];m.wrapBounds!==null&&l.wrap(m,m.wrapBounds)}for(f=0;f<d.length;f+=1){var y=d[f];y.wrapBounds!==null&&s.wrap(y,y.wrapBounds)}},h.attractors=function(c){for(var d=0;d<c.length;d++){var f=c[d],m=f.attractors;if(m&&m.length>0)for(var y=0;y<c.length;y++){var S=c[y];if(d!==y)for(var C=0;C<m.length;C++){var E=m[C],P=E;n.isFunction(E)&&(P=E(f,S)),P&&l.applyForce(S,S.position,P)}}}}})()}),35810:((v,T,t)=>{var h={};v.exports=h;var g=t(53402);(function(){h.on=function(o,a,r){for(var e=a.split(" "),s,u=0;u<e.length;u++)s=e[u],o.events=o.events||{},o.events[s]=o.events[s]||[],o.events[s].push(r);return r},h.off=function(o,a,r){if(!a){o.events={};return}typeof a=="function"&&(r=a,a=g.keys(o.events).join(" "));for(var e=a.split(" "),s=0;s<e.length;s++){var u=o.events[e[s]],n=[];if(r&&u)for(var l=0;l<u.length;l++)u[l]!==r&&n.push(u[l]);o.events[e[s]]=n}},h.trigger=function(o,a,r){var e,s,u,n,l=o.events;if(l&&g.keys(l).length>0){r||(r={}),e=a.split(" ");for(var c=0;c<e.length;c++)if(s=e[c],u=l[s],u){n=g.clone(r,!1),n.name=s,n.source=o;for(var d=0;d<u.length;d++)u[d].apply(o,[n])}}}})()}),6790:((v,T,t)=>{var h={};v.exports=h;var g=t(73832),o=t(53402);(function(){h.name="matter-js",h.version="0.20.0",h.uses=[],h.used=[],h.use=function(){g.use(h,Array.prototype.slice.call(arguments))},h.before=function(a,r){return a=a.replace(/^Matter./,""),o.chainPathBefore(h,a,r)},h.after=function(a,r){return a=a.replace(/^Matter./,""),o.chainPathAfter(h,a,r)}})()}),73832:((v,T,t)=>{var h={};v.exports=h;var g=t(53402);(function(){h._registry={},h.register=function(o){if(h.isPlugin(o)||g.warn("Plugin.register:",h.toString(o),"does not implement all required fields."),o.name in h._registry){var a=h._registry[o.name],r=h.versionParse(o.version).number,e=h.versionParse(a.version).number;r>e?(g.warn("Plugin.register:",h.toString(a),"was upgraded to",h.toString(o)),h._registry[o.name]=o):r<e?g.warn("Plugin.register:",h.toString(a),"can not be downgraded to",h.toString(o)):o!==a&&g.warn("Plugin.register:",h.toString(o),"is already registered to different plugin object")}else h._registry[o.name]=o;return o},h.resolve=function(o){return h._registry[h.dependencyParse(o).name]},h.toString=function(o){return typeof o=="string"?o:(o.name||"anonymous")+"@"+(o.version||o.range||"0.0.0")},h.isPlugin=function(o){return o&&o.name&&o.version&&o.install},h.isUsed=function(o,a){return o.used.indexOf(a)>-1},h.isFor=function(o,a){var r=o.for&&h.dependencyParse(o.for);return!o.for||a.name===r.name&&h.versionSatisfies(a.version,r.range)},h.use=function(o,a){if(o.uses=(o.uses||[]).concat(a||[]),o.uses.length===0){g.warn("Plugin.use:",h.toString(o),"does not specify any dependencies to install.");return}for(var r=h.dependencies(o),e=g.topologicalSort(r),s=[],u=0;u<e.length;u+=1)if(e[u]!==o.name){var n=h.resolve(e[u]);if(!n){s.push(" "+e[u]);continue}h.isUsed(o,n.name)||(h.isFor(n,o)||(g.warn("Plugin.use:",h.toString(n),"is for",n.for,"but installed on",h.toString(o)+"."),n._warned=!0),n.install?n.install(o):(g.warn("Plugin.use:",h.toString(n),"does not specify an install function."),n._warned=!0),n._warned?(s.push(" "+h.toString(n)),delete n._warned):s.push(" "+h.toString(n)),o.used.push(n.name))}s.length>0&&!n.silent&&g.info(s.join("  "))},h.dependencies=function(o,a){var r=h.dependencyParse(o),e=r.name;if(a=a||{},!(e in a)){o=h.resolve(o)||o,a[e]=g.map(o.uses||[],function(u){h.isPlugin(u)&&h.register(u);var n=h.dependencyParse(u),l=h.resolve(u);return l&&!h.versionSatisfies(l.version,n.range)?(g.warn("Plugin.dependencies:",h.toString(l),"does not satisfy",h.toString(n),"used by",h.toString(r)+"."),l._warned=!0,o._warned=!0):l||(g.warn("Plugin.dependencies:",h.toString(u),"used by",h.toString(r),"could not be resolved."),o._warned=!0),n.name});for(var s=0;s<a[e].length;s+=1)h.dependencies(a[e][s],a);return a}},h.dependencyParse=function(o){if(g.isString(o)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return a.test(o)||g.warn("Plugin.dependencyParse:",o,"is not a valid dependency string."),{name:o.split("@")[0],range:o.split("@")[1]||"*"}}return{name:o.name,range:o.range||o.version}},h.versionParse=function(o){var a=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;a.test(o)||g.warn("Plugin.versionParse:",o,"is not a valid version or range.");var r=a.exec(o),e=Number(r[4]),s=Number(r[5]),u=Number(r[6]);return{isRange:!!(r[1]||r[2]),version:r[3],range:o,operator:r[1]||r[2]||"",major:e,minor:s,patch:u,parts:[e,s,u],prerelease:r[7],number:e*1e8+s*1e4+u}},h.versionSatisfies=function(o,a){a=a||"*";var r=h.versionParse(a),e=h.versionParse(o);if(r.isRange){if(r.operator==="*"||o==="*")return!0;if(r.operator===">")return e.number>r.number;if(r.operator===">=")return e.number>=r.number;if(r.operator==="~")return e.major===r.major&&e.minor===r.minor&&e.patch>=r.patch;if(r.operator==="^")return r.major>0?e.major===r.major&&e.number>=r.number:r.minor>0?e.minor===r.minor&&e.patch>=r.patch:e.patch===r.patch}return o===a||o==="*"}})()}),13037:((v,T,t)=>{var h={};v.exports=h;var g=t(35810),o=t(48413),a=t(53402);(function(){h._maxFrameDelta=66.66666666666667,h._frameDeltaFallback=16.666666666666668,h._timeBufferMargin=1.5,h._elapsedNextEstimate=1,h._smoothingLowerBound=.1,h._smoothingUpperBound=.9,h.create=function(e){var s={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},u=a.extend(s,e);return u.fps=0,u},h.run=function(e,s){return e.timeBuffer=h._frameDeltaFallback,(function u(n){e.frameRequestId=h._onNextFrame(e,u),n&&e.enabled&&h.tick(e,s,n)})(),e},h.tick=function(e,s,u){var n=a.now(),l=e.delta,c=0,d=u-e.timeLastTick;if((!d||!e.timeLastTick||d>Math.max(h._maxFrameDelta,e.maxFrameTime))&&(d=e.frameDelta||h._frameDeltaFallback),e.frameDeltaSmoothing){e.frameDeltaHistory.push(d),e.frameDeltaHistory=e.frameDeltaHistory.slice(-e.frameDeltaHistorySize);var f=e.frameDeltaHistory.slice(0).sort(),m=e.frameDeltaHistory.slice(f.length*h._smoothingLowerBound,f.length*h._smoothingUpperBound),y=r(m);d=y||d}e.frameDeltaSnapping&&(d=1e3/Math.round(1e3/d)),e.frameDelta=d,e.timeLastTick=u,e.timeBuffer+=e.frameDelta,e.timeBuffer=a.clamp(e.timeBuffer,0,e.frameDelta+l*h._timeBufferMargin),e.lastUpdatesDeferred=0;var S=e.maxUpdates||Math.ceil(e.maxFrameTime/l),C={timestamp:s.timing.timestamp};g.trigger(e,"beforeTick",C),g.trigger(e,"tick",C);for(var E=a.now();l>0&&e.timeBuffer>=l*h._timeBufferMargin;){g.trigger(e,"beforeUpdate",C),o.update(s,l),g.trigger(e,"afterUpdate",C),e.timeBuffer-=l,c+=1;var P=a.now()-n,A=a.now()-E,F=P+h._elapsedNextEstimate*A/c;if(c>=S||F>e.maxFrameTime){e.lastUpdatesDeferred=Math.round(Math.max(0,e.timeBuffer/l-h._timeBufferMargin));break}}s.timing.lastUpdatesPerFrame=c,g.trigger(e,"afterTick",C),e.frameDeltaHistory.length>=100&&(e.lastUpdatesDeferred&&Math.round(e.frameDelta/l)>S?a.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):e.lastUpdatesDeferred&&a.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof e.isFixed<"u"&&a.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(e.deltaMin||e.deltaMax)&&a.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),e.fps!==0&&a.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},h.stop=function(e){h._cancelNextFrame(e)},h._onNextFrame=function(e,s){if(typeof window<"u"&&window.requestAnimationFrame)e.frameRequestId=window.requestAnimationFrame(s);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId},h._cancelNextFrame=function(e){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(e.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var r=function(e){for(var s=0,u=e.length,n=0;n<u;n+=1)s+=e[n];return s/u||0};h._mean=r})()}),53614:((v,T,t)=>{var h={};v.exports=h;var g=t(22562),o=t(35810),a=t(53402);(function(){h._motionWakeThreshold=.18,h._motionSleepThreshold=.08,h._minBias=.9,h.update=function(r,e){for(var s=e/a._baseDelta,u=h._motionSleepThreshold,n=0;n<r.length;n++){var l=r[n],c=g.getSpeed(l),d=g.getAngularSpeed(l),f=c*c+d*d;if(l.force.x!==0||l.force.y!==0){h.set(l,!1);continue}var m=Math.min(l.motion,f),y=Math.max(l.motion,f);l.motion=h._minBias*m+(1-h._minBias)*y,l.sleepThreshold>0&&l.motion<u?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/s&&h.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},h.afterCollisions=function(r){for(var e=h._motionSleepThreshold,s=0;s<r.length;s++){var u=r[s];if(u.isActive){var n=u.collision,l=n.bodyA.parent,c=n.bodyB.parent;if(!(l.isSleeping&&c.isSleeping||l.isStatic||c.isStatic)&&(l.isSleeping||c.isSleeping)){var d=l.isSleeping&&!l.isStatic?l:c,f=d===l?c:l;!d.isStatic&&f.motion>e&&h.set(d,!1)}}}},h.set=function(r,e){var s=r.isSleeping;e?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,s||o.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,s&&o.trigger(r,"sleepEnd"))}})()}),66280:((v,T,t)=>{var h={};v.exports=h;var g=t(41598),o=t(53402),a=t(22562),r=t(15647),e=t(31725);(function(){h.rectangle=function(s,u,n,l,c){c=c||{};var d={label:"Rectangle Body",position:{x:s,y:u},vertices:g.fromPath("L 0 0 L "+n+" 0 L "+n+" "+l+" L 0 "+l)};if(c.chamfer){var f=c.chamfer;d.vertices=g.chamfer(d.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete c.chamfer}return a.create(o.extend({},d,c))},h.trapezoid=function(s,u,n,l,c,d){d=d||{},c>=1&&o.warn("Bodies.trapezoid: slope parameter must be < 1."),c*=.5;var f=(1-c*2)*n,m=n*c,y=m+f,S=y+m,C;c<.5?C="L 0 0 L "+m+" "+-l+" L "+y+" "+-l+" L "+S+" 0":C="L 0 0 L "+y+" "+-l+" L "+S+" 0";var E={label:"Trapezoid Body",position:{x:s,y:u},vertices:g.fromPath(C)};if(d.chamfer){var P=d.chamfer;E.vertices=g.chamfer(E.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete d.chamfer}return a.create(o.extend({},E,d))},h.circle=function(s,u,n,l,c){l=l||{};var d={label:"Circle Body",circleRadius:n};c=c||25;var f=Math.ceil(Math.max(10,Math.min(c,n)));return f%2===1&&(f+=1),h.polygon(s,u,f,n,o.extend({},d,l))},h.polygon=function(s,u,n,l,c){if(c=c||{},n<3)return h.circle(s,u,l,c);for(var d=2*Math.PI/n,f="",m=d*.5,y=0;y<n;y+=1){var S=m+y*d,C=Math.cos(S)*l,E=Math.sin(S)*l;f+="L "+C.toFixed(3)+" "+E.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:s,y:u},vertices:g.fromPath(f)};if(c.chamfer){var A=c.chamfer;P.vertices=g.chamfer(P.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete c.chamfer}return a.create(o.extend({},P,c))},h.fromVertices=function(s,u,n,l,c,d,f,m){var y=o.getDecomp(),S,C,E,P,A,F,G,D,L,b,I;for(S=!!(y&&y.quickDecomp),l=l||{},E=[],c=typeof c<"u"?c:!1,d=typeof d<"u"?d:.01,f=typeof f<"u"?f:10,m=typeof m<"u"?m:.01,o.isArray(n[0])||(n=[n]),b=0;b<n.length;b+=1)if(F=n[b],P=g.isConvex(F),A=!P,A&&!S&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),P||!S)P?F=g.clockwiseSort(F):F=g.hull(F),E.push({position:{x:s,y:u},vertices:F});else{var N=F.map(function(J){return[J.x,J.y]});y.makeCCW(N),d!==!1&&y.removeCollinearPoints(N,d),m!==!1&&y.removeDuplicatePoints&&y.removeDuplicatePoints(N,m);var Z=y.quickDecomp(N);for(G=0;G<Z.length;G++){var U=Z[G],W=U.map(function(J){return{x:J[0],y:J[1]}});f>0&&g.area(W)<f||E.push({position:g.centre(W),vertices:W})}}for(G=0;G<E.length;G++)E[G]=a.create(o.extend(E[G],l));if(c){var X=5;for(G=0;G<E.length;G++){var V=E[G];for(D=G+1;D<E.length;D++){var O=E[D];if(r.overlaps(V.bounds,O.bounds)){var z=V.vertices,B=O.vertices;for(L=0;L<V.vertices.length;L++)for(I=0;I<O.vertices.length;I++){var Y=e.magnitudeSquared(e.sub(z[(L+1)%z.length],B[I])),k=e.magnitudeSquared(e.sub(z[L],B[(I+1)%B.length]));Y<X&&k<X&&(z[L].isInternal=!0,B[I].isInternal=!0)}}}}}return E.length>1?(C=a.create(o.extend({parts:E.slice(0)},l)),a.setPosition(C,{x:s,y:u}),C):E[0]},h.flagCoincidentParts=function(s,u){u===void 0&&(u=5);for(var n=0;n<s.length;n++)for(var l=s[n],c=n+1;c<s.length;c++){var d=s[c];if(r.overlaps(l.bounds,d.bounds))for(var f=l.vertices,m=d.vertices,y=0;y<l.vertices.length;y++)for(var S=0;S<d.vertices.length;S++){var C=e.magnitudeSquared(e.sub(f[(y+1)%f.length],m[S])),E=e.magnitudeSquared(e.sub(f[y],m[(S+1)%m.length]));C<u&&E<u&&(f[y].isInternal=!0,m[S].isInternal=!0)}}return s}})()}),74116:((v,T,t)=>{var h={};v.exports=h;var g=t(69351),o=t(48140),a=t(53402),r=t(22562),e=t(66280);(function(){h.stack=function(s,u,n,l,c,d,f){for(var m=g.create({label:"Stack"}),y=s,S=u,C,E=0,P=0;P<l;P++){for(var A=0,F=0;F<n;F++){var G=f(y,S,F,P,C,E);if(G){var D=G.bounds.max.y-G.bounds.min.y,L=G.bounds.max.x-G.bounds.min.x;D>A&&(A=D),r.translate(G,{x:L*.5,y:D*.5}),y=G.bounds.max.x+c,g.addBody(m,G),C=G,E+=1}else y+=c}S+=A+d,y=s}return m},h.chain=function(s,u,n,l,c,d){for(var f=s.bodies,m=1;m<f.length;m++){var y=f[m-1],S=f[m],C=y.bounds.max.y-y.bounds.min.y,E=y.bounds.max.x-y.bounds.min.x,P=S.bounds.max.y-S.bounds.min.y,A=S.bounds.max.x-S.bounds.min.x,F={bodyA:y,pointA:{x:E*u,y:C*n},bodyB:S,pointB:{x:A*l,y:P*c}},G=a.extend(F,d);g.addConstraint(s,o.create(G))}return s.label+=" Chain",s},h.mesh=function(s,u,n,l,c){var d=s.bodies,f,m,y,S,C;for(f=0;f<n;f++){for(m=1;m<u;m++)y=d[m-1+f*u],S=d[m+f*u],g.addConstraint(s,o.create(a.extend({bodyA:y,bodyB:S},c)));if(f>0)for(m=0;m<u;m++)y=d[m+(f-1)*u],S=d[m+f*u],g.addConstraint(s,o.create(a.extend({bodyA:y,bodyB:S},c))),l&&m>0&&(C=d[m-1+(f-1)*u],g.addConstraint(s,o.create(a.extend({bodyA:C,bodyB:S},c)))),l&&m<u-1&&(C=d[m+1+(f-1)*u],g.addConstraint(s,o.create(a.extend({bodyA:C,bodyB:S},c))))}return s.label+=" Mesh",s},h.pyramid=function(s,u,n,l,c,d,f){return h.stack(s,u,n,l,c,d,function(m,y,S,C,E,P){var A=Math.min(l,Math.ceil(n/2)),F=E?E.bounds.max.x-E.bounds.min.x:0;if(!(C>A)){C=A-C;var G=C,D=n-1-C;if(!(S<G||S>D)){P===1&&r.translate(E,{x:(S+(n%2===1?1:-1))*F,y:0});var L=E?S*F:0;return f(s+L+S*c,y,S,C,E,P)}}})},h.newtonsCradle=function(s,u,n,l,c){for(var d=g.create({label:"Newtons Cradle"}),f=0;f<n;f++){var m=1.9,y=e.circle(s+f*(l*m),u+c,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=o.create({pointA:{x:s+f*(l*m),y:u},bodyB:y});g.addBody(d,y),g.addConstraint(d,S)}return d},h.car=function(s,u,n,l,c){var d=r.nextGroup(!0),f=20,m=-n*.5+f,y=n*.5-f,S=0,C=g.create({label:"Car"}),E=e.rectangle(s,u,n,l,{collisionFilter:{group:d},chamfer:{radius:l*.5},density:2e-4}),P=e.circle(s+m,u+S,c,{collisionFilter:{group:d},friction:.8}),A=e.circle(s+y,u+S,c,{collisionFilter:{group:d},friction:.8}),F=o.create({bodyB:E,pointB:{x:m,y:S},bodyA:P,stiffness:1,length:0}),G=o.create({bodyB:E,pointB:{x:y,y:S},bodyA:A,stiffness:1,length:0});return g.addBody(C,E),g.addBody(C,P),g.addBody(C,A),g.addConstraint(C,F),g.addConstraint(C,G),C},h.softBody=function(s,u,n,l,c,d,f,m,y,S){y=a.extend({inertia:1/0},y),S=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var C=h.stack(s,u,n,l,c,d,function(E,P){return e.circle(E,P,m,y)});return h.mesh(C,n,l,f,S),C.label="Soft Body",C}})()}),66615:((v,T,t)=>{var h={};v.exports=h;var g=t(31725),o=t(53402);(function(){h.fromVertices=function(a){for(var r={},e=0;e<a.length;e++){var s=(e+1)%a.length,u=g.normalise({x:a[s].y-a[e].y,y:a[e].x-a[s].x}),n=u.y===0?1/0:u.x/u.y;n=n.toFixed(3).toString(),r[n]=u}return o.values(r)},h.rotate=function(a,r){if(r!==0)for(var e=Math.cos(r),s=Math.sin(r),u=0;u<a.length;u++){var n=a[u],l;l=n.x*e-n.y*s,n.y=n.x*s+n.y*e,n.x=l}}})()}),15647:(v=>{var T={};v.exports=T,(function(){T.create=function(t){var h={min:{x:0,y:0},max:{x:0,y:0}};return t&&T.update(h,t),h},T.update=function(t,h,g){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var o=0;o<h.length;o++){var a=h[o];a.x>t.max.x&&(t.max.x=a.x),a.x<t.min.x&&(t.min.x=a.x),a.y>t.max.y&&(t.max.y=a.y),a.y<t.min.y&&(t.min.y=a.y)}g&&(g.x>0?t.max.x+=g.x:t.min.x+=g.x,g.y>0?t.max.y+=g.y:t.min.y+=g.y)},T.contains=function(t,h){return h.x>=t.min.x&&h.x<=t.max.x&&h.y>=t.min.y&&h.y<=t.max.y},T.overlaps=function(t,h){return t.min.x<=h.max.x&&t.max.x>=h.min.x&&t.max.y>=h.min.y&&t.min.y<=h.max.y},T.translate=function(t,h){t.min.x+=h.x,t.max.x+=h.x,t.min.y+=h.y,t.max.y+=h.y},T.shift=function(t,h){var g=t.max.x-t.min.x,o=t.max.y-t.min.y;t.min.x=h.x,t.max.x=h.x+g,t.min.y=h.y,t.max.y=h.y+o},T.wrap=function(t,h,g){var o=null,a=null;if(typeof h.min.x<"u"&&typeof h.max.x<"u"&&(t.min.x>h.max.x?o=h.min.x-t.max.x:t.max.x<h.min.x&&(o=h.max.x-t.min.x)),typeof h.min.y<"u"&&typeof h.max.y<"u"&&(t.min.y>h.max.y?a=h.min.y-t.max.y:t.max.y<h.min.y&&(a=h.max.y-t.min.y)),o!==null||a!==null)return{x:o||0,y:a||0}}})()}),74058:((v,T,t)=>{var h={};v.exports=h,t(15647);var g=t(53402);(function(){h.pathToVertices=function(o,a){typeof window<"u"&&!("SVGPathSeg"in window)&&g.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var r,e,s,u,n,l,c,d,f,m,y=[],S,C,E=0,P=0,A=0;a=a||15;var F=function(D,L,b){var I=b%2===1&&b>1;if(!f||D!=f.x||L!=f.y){f&&I?(S=f.x,C=f.y):(S=0,C=0);var N={x:S+D,y:C+L};(I||!f)&&(f=N),y.push(N),P=S+D,A=C+L}},G=function(D){var L=D.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":P=D.x,A=D.y;break;case"H":P=D.x;break;case"V":A=D.y;break}F(P,A,D.pathSegType)}};for(h._svgPathToAbsolute(o),s=o.getTotalLength(),l=[],r=0;r<o.pathSegList.numberOfItems;r+=1)l.push(o.pathSegList.getItem(r));for(c=l.concat();E<s;){if(m=o.getPathSegAtLength(E),n=l[m],n!=d){for(;c.length&&c[0]!=n;)G(c.shift());d=n}switch(n.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":u=o.getPointAtLength(E),F(u.x,u.y,0);break}E+=a}for(r=0,e=c.length;r<e;++r)G(c[r]);return y},h._svgPathToAbsolute=function(o){for(var a,r,e,s,u,n,l=o.pathSegList,c=0,d=0,f=l.numberOfItems,m=0;m<f;++m){var y=l.getItem(m),S=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(S))"x"in y&&(c=y.x),"y"in y&&(d=y.y);else switch("x1"in y&&(e=c+y.x1),"x2"in y&&(u=c+y.x2),"y1"in y&&(s=d+y.y1),"y2"in y&&(n=d+y.y2),"x"in y&&(c+=y.x),"y"in y&&(d+=y.y),S){case"m":l.replaceItem(o.createSVGPathSegMovetoAbs(c,d),m);break;case"l":l.replaceItem(o.createSVGPathSegLinetoAbs(c,d),m);break;case"h":l.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(c),m);break;case"v":l.replaceItem(o.createSVGPathSegLinetoVerticalAbs(d),m);break;case"c":l.replaceItem(o.createSVGPathSegCurvetoCubicAbs(c,d,e,s,u,n),m);break;case"s":l.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(c,d,u,n),m);break;case"q":l.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(c,d,e,s),m);break;case"t":l.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(c,d),m);break;case"a":l.replaceItem(o.createSVGPathSegArcAbs(c,d,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),m);break;case"z":case"Z":c=a,d=r;break}(S=="M"||S=="m")&&(a=c,r=d)}}})()}),31725:(v=>{var T={};v.exports=T,(function(){T.create=function(t,h){return{x:t||0,y:h||0}},T.clone=function(t){return{x:t.x,y:t.y}},T.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},T.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},T.rotate=function(t,h,g){var o=Math.cos(h),a=Math.sin(h);g||(g={});var r=t.x*o-t.y*a;return g.y=t.x*a+t.y*o,g.x=r,g},T.rotateAbout=function(t,h,g,o){var a=Math.cos(h),r=Math.sin(h);o||(o={});var e=g.x+((t.x-g.x)*a-(t.y-g.y)*r);return o.y=g.y+((t.x-g.x)*r+(t.y-g.y)*a),o.x=e,o},T.normalise=function(t){var h=T.magnitude(t);return h===0?{x:0,y:0}:{x:t.x/h,y:t.y/h}},T.dot=function(t,h){return t.x*h.x+t.y*h.y},T.cross=function(t,h){return t.x*h.y-t.y*h.x},T.cross3=function(t,h,g){return(h.x-t.x)*(g.y-t.y)-(h.y-t.y)*(g.x-t.x)},T.add=function(t,h,g){return g||(g={}),g.x=t.x+h.x,g.y=t.y+h.y,g},T.sub=function(t,h,g){return g||(g={}),g.x=t.x-h.x,g.y=t.y-h.y,g},T.mult=function(t,h){return{x:t.x*h,y:t.y*h}},T.div=function(t,h){return{x:t.x/h,y:t.y/h}},T.perp=function(t,h){return h=h===!0?-1:1,{x:h*-t.y,y:h*t.x}},T.neg=function(t){return{x:-t.x,y:-t.y}},T.angle=function(t,h){return Math.atan2(h.y-t.y,h.x-t.x)},T._temp=[T.create(),T.create(),T.create(),T.create(),T.create(),T.create()]})()}),41598:((v,T,t)=>{var h={};v.exports=h;var g=t(31725),o=t(53402);(function(){h.create=function(a,r){for(var e=[],s=0;s<a.length;s++){var u=a[s],n={x:u.x,y:u.y,index:s,body:r,isInternal:!1};e.push(n)}return e},h.fromPath=function(a,r){var e=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,s=[];return a.replace(e,function(u,n,l){s.push({x:parseFloat(n),y:parseFloat(l)})}),h.create(s,r)},h.centre=function(a){for(var r=h.area(a,!0),e={x:0,y:0},s,u,n,l=0;l<a.length;l++)n=(l+1)%a.length,s=g.cross(a[l],a[n]),u=g.mult(g.add(a[l],a[n]),s),e=g.add(e,u);return g.div(e,6*r)},h.mean=function(a){for(var r={x:0,y:0},e=0;e<a.length;e++)r.x+=a[e].x,r.y+=a[e].y;return g.div(r,a.length)},h.area=function(a,r){for(var e=0,s=a.length-1,u=0;u<a.length;u++)e+=(a[s].x-a[u].x)*(a[s].y+a[u].y),s=u;return r?e/2:Math.abs(e)/2},h.inertia=function(a,r){for(var e=0,s=0,u=a,n,l,c=0;c<u.length;c++)l=(c+1)%u.length,n=Math.abs(g.cross(u[l],u[c])),e+=n*(g.dot(u[l],u[l])+g.dot(u[l],u[c])+g.dot(u[c],u[c])),s+=n;return r/6*(e/s)},h.translate=function(a,r,e){e=typeof e<"u"?e:1;var s=a.length,u=r.x*e,n=r.y*e,l;for(l=0;l<s;l++)a[l].x+=u,a[l].y+=n;return a},h.rotate=function(a,r,e){if(r!==0){var s=Math.cos(r),u=Math.sin(r),n=e.x,l=e.y,c=a.length,d,f,m,y;for(y=0;y<c;y++)d=a[y],f=d.x-n,m=d.y-l,d.x=n+(f*s-m*u),d.y=l+(f*u+m*s);return a}},h.contains=function(a,r){for(var e=r.x,s=r.y,u=a.length,n=a[u-1],l,c=0;c<u;c++){if(l=a[c],(e-n.x)*(l.y-n.y)+(s-n.y)*(n.x-l.x)>0)return!1;n=l}return!0},h.scale=function(a,r,e,s){if(r===1&&e===1)return a;s=s||h.centre(a);for(var u,n,l=0;l<a.length;l++)u=a[l],n=g.sub(u,s),a[l].x=s.x+n.x*r,a[l].y=s.y+n.y*e;return a},h.chamfer=function(a,r,e,s,u){typeof r=="number"?r=[r]:r=r||[8],e=typeof e<"u"?e:-1,s=s||2,u=u||14;for(var n=[],l=0;l<a.length;l++){var c=a[l-1>=0?l-1:a.length-1],d=a[l],f=a[(l+1)%a.length],m=r[l<r.length?l:r.length-1];if(m===0){n.push(d);continue}var y=g.normalise({x:d.y-c.y,y:c.x-d.x}),S=g.normalise({x:f.y-d.y,y:d.x-f.x}),C=Math.sqrt(2*Math.pow(m,2)),E=g.mult(o.clone(y),m),P=g.normalise(g.mult(g.add(y,S),.5)),A=g.sub(d,g.mult(P,C)),F=e;e===-1&&(F=Math.pow(m,.32)*1.75),F=o.clamp(F,s,u),F%2===1&&(F+=1);for(var G=Math.acos(g.dot(y,S)),D=G/F,L=0;L<F;L++)n.push(g.add(g.rotate(E,D*L),A))}return n},h.clockwiseSort=function(a){var r=h.mean(a);return a.sort(function(e,s){return g.angle(r,e)-g.angle(r,s)}),a},h.isConvex=function(a){var r=0,e=a.length,s,u,n,l;if(e<3)return null;for(s=0;s<e;s++)if(u=(s+1)%e,n=(s+2)%e,l=(a[u].x-a[s].x)*(a[n].y-a[u].y),l-=(a[u].y-a[s].y)*(a[n].x-a[u].x),l<0?r|=1:l>0&&(r|=2),r===3)return!1;return r!==0?!0:null},h.hull=function(a){var r=[],e=[],s,u;for(a=a.slice(0),a.sort(function(n,l){var c=n.x-l.x;return c!==0?c:n.y-l.y}),u=0;u<a.length;u+=1){for(s=a[u];e.length>=2&&g.cross3(e[e.length-2],e[e.length-1],s)<=0;)e.pop();e.push(s)}for(u=a.length-1;u>=0;u-=1){for(s=a[u];r.length>=2&&g.cross3(r[r.length-2],r[r.length-1],s)<=0;)r.pop();r.push(s)}return r.pop(),e.pop(),r.concat(e)}})()}),55973:(v=>{v.exports={decomp:G,quickDecomp:I,isSimple:L,removeCollinearPoints:N,removeDuplicatePoints:Z,makeCCW:f};function T(X,V,O){O=O||0;var z=[0,0],B,Y,k,J,j,tt,ut;return B=X[1][1]-X[0][1],Y=X[0][0]-X[1][0],k=B*X[0][0]+Y*X[0][1],J=V[1][1]-V[0][1],j=V[0][0]-V[1][0],tt=J*V[0][0]+j*V[0][1],ut=B*j-J*Y,U(ut,0,O)||(z[0]=(j*k-Y*tt)/ut,z[1]=(B*tt-J*k)/ut),z}function t(X,V,O,z){var B=V[0]-X[0],Y=V[1]-X[1],k=z[0]-O[0],J=z[1]-O[1];if(k*Y-J*B===0)return!1;var j=(B*(O[1]-X[1])+Y*(X[0]-O[0]))/(k*Y-J*B),tt=(k*(X[1]-O[1])+J*(O[0]-X[0]))/(J*B-k*Y);return j>=0&&j<=1&&tt>=0&&tt<=1}function h(X,V,O){return(V[0]-X[0])*(O[1]-X[1])-(O[0]-X[0])*(V[1]-X[1])}function g(X,V,O){return h(X,V,O)>0}function o(X,V,O){return h(X,V,O)>=0}function a(X,V,O){return h(X,V,O)<0}function r(X,V,O){return h(X,V,O)<=0}var e=[],s=[];function u(X,V,O,z){if(z){var B=e,Y=s;B[0]=V[0]-X[0],B[1]=V[1]-X[1],Y[0]=O[0]-V[0],Y[1]=O[1]-V[1];var k=B[0]*Y[0]+B[1]*Y[1],J=Math.sqrt(B[0]*B[0]+B[1]*B[1]),j=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),tt=Math.acos(k/(J*j));return tt<z}else return h(X,V,O)===0}function n(X,V){var O=V[0]-X[0],z=V[1]-X[1];return O*O+z*z}function l(X,V){var O=X.length;return X[V<0?V%O+O:V%O]}function c(X){X.length=0}function d(X,V,O,z){for(var B=O;B<z;B++)X.push(V[B])}function f(X){for(var V=0,O=X,z=1;z<X.length;++z)(O[z][1]<O[V][1]||O[z][1]===O[V][1]&&O[z][0]>O[V][0])&&(V=z);return g(l(X,V-1),l(X,V),l(X,V+1))?!1:(m(X),!0)}function m(X){for(var V=[],O=X.length,z=0;z!==O;z++)V.push(X.pop());for(var z=0;z!==O;z++)X[z]=V[z]}function y(X,V){return a(l(X,V-1),l(X,V),l(X,V+1))}var S=[],C=[];function E(X,V,O){var z,B,Y=S,k=C;if(o(l(X,V+1),l(X,V),l(X,O))&&r(l(X,V-1),l(X,V),l(X,O)))return!1;B=n(l(X,V),l(X,O));for(var J=0;J!==X.length;++J)if(!((J+1)%X.length===V||J===V)&&o(l(X,V),l(X,O),l(X,J+1))&&r(l(X,V),l(X,O),l(X,J))&&(Y[0]=l(X,V),Y[1]=l(X,O),k[0]=l(X,J),k[1]=l(X,J+1),z=T(Y,k),n(l(X,V),z)<B))return!1;return!0}function P(X,V,O){for(var z=0;z!==X.length;++z)if(!(z===V||z===O||(z+1)%X.length===V||(z+1)%X.length===O)&&t(l(X,V),l(X,O),l(X,z),l(X,z+1)))return!1;return!0}function A(X,V,O,z){var B=z||[];if(c(B),V<O)for(var Y=V;Y<=O;Y++)B.push(X[Y]);else{for(var Y=0;Y<=O;Y++)B.push(X[Y]);for(var Y=V;Y<X.length;Y++)B.push(X[Y])}return B}function F(X){for(var V=[],O=[],z=[],B=[],Y=Number.MAX_VALUE,k=0;k<X.length;++k)if(y(X,k)){for(var J=0;J<X.length;++J)if(E(X,k,J)){O=F(A(X,k,J,B)),z=F(A(X,J,k,B));for(var j=0;j<z.length;j++)O.push(z[j]);O.length<Y&&(V=O,Y=O.length,V.push([l(X,k),l(X,J)]))}}return V}function G(X){var V=F(X);return V.length>0?D(X,V):[X]}function D(X,V){if(V.length===0)return[X];if(V instanceof Array&&V.length&&V[0]instanceof Array&&V[0].length===2&&V[0][0]instanceof Array){for(var O=[X],z=0;z<V.length;z++)for(var B=V[z],Y=0;Y<O.length;Y++){var k=O[Y],J=D(k,B);if(J){O.splice(Y,1),O.push(J[0],J[1]);break}}return O}else{var B=V,z=X.indexOf(B[0]),Y=X.indexOf(B[1]);return z!==-1&&Y!==-1?[A(X,z,Y),A(X,Y,z)]:!1}}function L(X){var V=X,O;for(O=0;O<V.length-1;O++)for(var z=0;z<O-1;z++)if(t(V[O],V[O+1],V[z],V[z+1]))return!1;for(O=1;O<V.length-2;O++)if(t(V[0],V[V.length-1],V[O],V[O+1]))return!1;return!0}function b(X,V,O,z,B){B=B||0;var Y=V[1]-X[1],k=X[0]-V[0],J=Y*X[0]+k*X[1],j=z[1]-O[1],tt=O[0]-z[0],ut=j*O[0]+tt*O[1],ht=Y*tt-j*k;return U(ht,0,B)?[0,0]:[(tt*J-k*ut)/ht,(Y*ut-j*J)/ht]}function I(X,V,O,z,B,Y,k){Y=Y||100,k=k||0,B=B||25,V=typeof V<"u"?V:[],O=O||[],z=z||[];var J=[0,0],j=[0,0],tt=[0,0],ut=0,ht=0,st=0,dt=0,lt=0,ft=0,Lt=0,Nt=[],Vt=[],pt=X,Pt=X;if(Pt.length<3)return V;if(k++,k>Y)return console.warn("quickDecomp: max level ("+Y+") reached."),V;for(var Dt=0;Dt<X.length;++Dt)if(y(pt,Dt)){O.push(pt[Dt]),ut=ht=Number.MAX_VALUE;for(var Gt=0;Gt<X.length;++Gt)g(l(pt,Dt-1),l(pt,Dt),l(pt,Gt))&&r(l(pt,Dt-1),l(pt,Dt),l(pt,Gt-1))&&(tt=b(l(pt,Dt-1),l(pt,Dt),l(pt,Gt),l(pt,Gt-1)),a(l(pt,Dt+1),l(pt,Dt),tt)&&(st=n(pt[Dt],tt),st<ht&&(ht=st,j=tt,ft=Gt))),g(l(pt,Dt+1),l(pt,Dt),l(pt,Gt+1))&&r(l(pt,Dt+1),l(pt,Dt),l(pt,Gt))&&(tt=b(l(pt,Dt+1),l(pt,Dt),l(pt,Gt),l(pt,Gt+1)),g(l(pt,Dt-1),l(pt,Dt),tt)&&(st=n(pt[Dt],tt),st<ut&&(ut=st,J=tt,lt=Gt)));if(ft===(lt+1)%X.length)tt[0]=(j[0]+J[0])/2,tt[1]=(j[1]+J[1])/2,z.push(tt),Dt<lt?(d(Nt,pt,Dt,lt+1),Nt.push(tt),Vt.push(tt),ft!==0&&d(Vt,pt,ft,pt.length),d(Vt,pt,0,Dt+1)):(Dt!==0&&d(Nt,pt,Dt,pt.length),d(Nt,pt,0,lt+1),Nt.push(tt),Vt.push(tt),d(Vt,pt,ft,Dt+1));else{if(ft>lt&&(lt+=X.length),dt=Number.MAX_VALUE,lt<ft)return V;for(var Gt=ft;Gt<=lt;++Gt)o(l(pt,Dt-1),l(pt,Dt),l(pt,Gt))&&r(l(pt,Dt+1),l(pt,Dt),l(pt,Gt))&&(st=n(l(pt,Dt),l(pt,Gt)),st<dt&&P(pt,Dt,Gt)&&(dt=st,Lt=Gt%X.length));Dt<Lt?(d(Nt,pt,Dt,Lt+1),Lt!==0&&d(Vt,pt,Lt,Pt.length),d(Vt,pt,0,Dt+1)):(Dt!==0&&d(Nt,pt,Dt,Pt.length),d(Nt,pt,0,Lt+1),d(Vt,pt,Lt,Dt+1))}return Nt.length<Vt.length?(I(Nt,V,O,z,B,Y,k),I(Vt,V,O,z,B,Y,k)):(I(Vt,V,O,z,B,Y,k),I(Nt,V,O,z,B,Y,k)),V}return V.push(X),V}function N(X,V){for(var O=0,z=X.length-1;X.length>3&&z>=0;--z)u(l(X,z-1),l(X,z),l(X,z+1),V)&&(X.splice(z%X.length,1),O++);return O}function Z(X,V){for(var O=X.length-1;O>=1;--O)for(var z=X[O],B=O-1;B>=0;--B)if(W(z,X[B],V)){X.splice(O,1);continue}}function U(X,V,O){return O=O||0,Math.abs(X-V)<=O}function W(X,V,O){return U(X[0],V[0],O)&&U(X[1],V[1],O)}}),52018:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a){this.pluginManager=a,this.game=a.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});v.exports=g}),42363:(v=>{var T={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};v.exports=T}),37277:(v=>{var T={},t={},h={};h.register=function(g,o,a,r){r===void 0&&(r=!1),T[g]={plugin:o,mapping:a,custom:r}},h.registerCustom=function(g,o,a,r){t[g]={plugin:o,mapping:a,data:r}},h.hasCore=function(g){return T.hasOwnProperty(g)},h.hasCustom=function(g){return t.hasOwnProperty(g)},h.getCore=function(g){return T[g]},h.getCustom=function(g){return t[g]},h.getCustomClass=function(g){return t.hasOwnProperty(g)?t[g].plugin:null},h.remove=function(g){T.hasOwnProperty(g)&&delete T[g]},h.removeCustom=function(g){t.hasOwnProperty(g)&&delete t[g]},h.destroyCorePlugins=function(){for(var g in T)T.hasOwnProperty(g)&&delete T[g]},h.destroyCustomPlugins=function(){for(var g in t)t.hasOwnProperty(g)&&delete t[g]},v.exports=h}),77332:((v,T,t)=>{var h=t(83419),g=t(8443),o=t(50792),a=t(74099),r=t(44603),e=t(39429),s=t(95540),u=t(37277),n=t(72905),l=t(8054),c=new h({Extends:o,initialize:function(f){o.call(this),this.game=f,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],f.isBooted||f.config.renderType===l.HEADLESS?this.boot():f.events.once(g.BOOT,this.boot,this)},boot:function(){var d,f,m,y,S,C,E,P=this.game.config,A=P.installGlobalPlugins;for(A=A.concat(this._pendingGlobal),d=0;d<A.length;d++)f=A[d],m=s(f,"key",null),y=s(f,"plugin",null),S=s(f,"start",!1),C=s(f,"mapping",null),E=s(f,"data",null),m&&(y?this.install(m,y,S,C,E):console.warn("Missing `plugin` for key: "+m));for(A=P.installScenePlugins,A=A.concat(this._pendingScene),d=0;d<A.length;d++)f=A[d],m=s(f,"key",null),y=s(f,"plugin",null),C=s(f,"mapping",null),m&&(y?this.installScenePlugin(m,y,C):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(g.DESTROY,this.destroy,this)},addToScene:function(d,f,m){var y,S,C,E=this.game,P=d.scene,A=d.settings.map,F=d.settings.isBooted;for(y=0;y<f.length;y++)S=f[y],E[S]?(d[S]=E[S],A.hasOwnProperty(S)&&(P[A[S]]=d[S])):S==="game"&&A.hasOwnProperty(S)&&(P[A[S]]=E);for(var G=0;G<m.length;G++)for(C=m[G],y=0;y<C.length;y++)if(S=C[y],!!u.hasCore(S)){var D=u.getCore(S),L=D.mapping,b=new D.plugin(P,this,L);d[L]=b,D.custom?P[L]=b:A.hasOwnProperty(L)&&(P[A[L]]=b),F&&b.boot()}for(C=this.plugins,y=0;y<C.length;y++){var I=C[y];I.mapping&&(P[I.mapping]=I.plugin)}},getDefaultScenePlugins:function(){var d=this.game.config.defaultPlugins;return d=d.concat(this.scenePlugins),d},installScenePlugin:function(d,f,m,y,S){if(S===void 0&&(S=!1),typeof f!="function"){console.warn("Invalid Scene Plugin: "+d);return}if(u.hasCore(d)||u.register(d,f,m,!0),this.scenePlugins.indexOf(d)===-1)this.scenePlugins.push(d);else if(!S&&u.hasCore(d)){console.warn("Scene Plugin key in use: "+d);return}if(y){var C=new f(y,this,d);y.sys[d]=C,m&&m!==""&&(y[m]=C),C.boot()}},install:function(d,f,m,y,S){if(m===void 0&&(m=!1),y===void 0&&(y=null),S===void 0&&(S=null),typeof f!="function")return console.warn("Invalid Plugin: "+d),null;if(u.hasCustom(d))return console.warn("Plugin key in use: "+d),null;if(y!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:d,plugin:f,start:m,mapping:y,data:S});else if(u.registerCustom(d,f,y,S),m)return this.start(d);return null},getIndex:function(d){for(var f=this.plugins,m=0;m<f.length;m++){var y=f[m];if(y.key===d)return m}return-1},getEntry:function(d){var f=this.getIndex(d);if(f!==-1)return this.plugins[f]},isActive:function(d){var f=this.getEntry(d);return f&&f.active},start:function(d,f){f===void 0&&(f=d);var m=this.getEntry(f);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(d,f)),m?m.plugin:null},createEntry:function(d,f){var m=u.getCustom(d);if(m){var y=new m.plugin(this);m={key:f,plugin:y,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),y.init(m.data),y.start()}return m},stop:function(d){var f=this.getEntry(d);return f&&f.active&&(f.active=!1,f.plugin.stop()),this},get:function(d,f){f===void 0&&(f=!0);var m=this.getEntry(d);if(m)return m.plugin;var y=this.getClass(d);return y&&f?(m=this.createEntry(d,d),m?m.plugin:null):y||null},getClass:function(d){return u.getCustomClass(d)},removeGlobalPlugin:function(d){var f=this.getEntry(d);f&&n(this.plugins,f),u.removeCustom(d)},removeScenePlugin:function(d){n(this.scenePlugins,d),u.remove(d)},registerGameObject:function(d,f,m){return f&&e.register(d,f),m&&r.register(d,m),this},removeGameObject:function(d,f,m){return f===void 0&&(f=!0),m===void 0&&(m=!0),f&&e.remove(d),m&&r.remove(d),this},registerFileType:function(d,f,m){a.register(d,f),m&&m.sys.load&&(m.sys.load[d]=f)},destroy:function(){for(var d=0;d<this.plugins.length;d++)this.plugins[d].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});v.exports=c}),45145:((v,T,t)=>{var h=t(52018),g=t(83419),o=t(44594),a=new g({Extends:h,initialize:function(e,s,u){h.call(this,s),this.scene=e,this.systems=e.sys,this.pluginKey=u,e.sys.events.once(o.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});v.exports=a}),18922:((v,T,t)=>{v.exports={BasePlugin:t(52018),DefaultPlugins:t(42363),PluginCache:t(37277),PluginManager:t(77332),ScenePlugin:t(45145)}}),63595:(()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(v){const T=performance.now(),t=this.getVideoPlaybackQuality(),h=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,g=(o,a)=>{const r=this.getVideoPlaybackQuality(),e=this.mozPresentedFrames||this.mozPaintedFrames||r.totalVideoFrames-r.droppedVideoFrames;if(e>h){const s=this.mozFrameDelay||r.totalFrameDelay-t.totalFrameDelay||0,u=a-o;v(a,{presentationTime:a+s*1e3,expectedDisplayTime:a+u,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+u/1e3,presentedFrames:e,processingDuration:s}),delete this._rvfcpolyfillmap[T]}else this._rvfcpolyfillmap[T]=requestAnimationFrame(s=>g(a,s))};return this._rvfcpolyfillmap[T]=requestAnimationFrame(o=>g(T,o)),T},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(v){cancelAnimationFrame(this._rvfcpolyfillmap[v]),delete this._rvfcpolyfillmap[v]})}),10312:(v=>{v.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}}),29795:(v=>{var T={DEFAULT:0,LINEAR:0,NEAREST:1};v.exports=T}),68627:((v,T,t)=>{var h=t(19715),g=t(32880),o=t(83419),a=t(8054),r=t(50792),e=t(92503),s=t(56373),u=t(97480),n=t(69442),l=t(8443),c=t(61340),d=new o({Extends:r,initialize:function(m){r.call(this);var y=m.config;this.config={clearBeforeRender:y.clearBeforeRender,backgroundColor:y.backgroundColor,antialias:y.antialias,roundPixels:y.roundPixels,transparent:y.transparent},this.game=m,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var S={alpha:y.transparent,desynchronized:y.desynchronized,willReadFrequently:!1};this.gameContext=y.context?y.context:this.gameCanvas.getContext("2d",S),this.currentContext=this.gameContext,this.antialias=y.antialias,this.blendModes=s(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){var f=this.game;f.events.once(l.BOOT,function(){var m=this.config;if(!m.transparent){var y=this.gameContext,S=this.gameCanvas;y.fillStyle=m.backgroundColor.rgba,y.fillRect(0,0,S.width,S.height)}},this),f.textures.once(n.READY,this.boot,this)},boot:function(){var f=this.game,m=f.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,f.scale.on(u.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(f,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(f,m){this.width=f,this.height=m,this.emit(e.RESIZE,f,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(f){return this.currentContext.globalCompositeOperation=f,this},setContext:function(f){return this.currentContext=f||this.gameContext,this},setAlpha:function(f){return this.currentContext.globalAlpha=f,this},preRender:function(){var f=this.gameContext,m=this.config,y=this.width,S=this.height;f.globalAlpha=1,f.globalCompositeOperation="source-over",f.setTransform(1,0,0,1,0,0),this.emit(e.PRE_RENDER_CLEAR),m.clearBeforeRender&&(f.clearRect(0,0,y,S),m.transparent||(f.fillStyle=m.backgroundColor.rgba,f.fillRect(0,0,y,S))),f.save(),this.drawCount=0,this.emit(e.PRE_RENDER)},render:function(f,m,y){var S=m.length;this.emit(e.RENDER,f,y);var C=y.x,E=y.y,P=y.width,A=y.height,F=y.renderToTexture?y.context:f.sys.context;F.save(),this.game.scene.customViewports&&(F.beginPath(),F.rect(C,E,P,A),F.clip()),y.emit(h.PRE_RENDER,y),this.currentContext=F;var G=y.mask;G&&G.preRenderCanvas(this,null,y._maskCamera),y.transparent||(F.fillStyle=y.backgroundColor.rgba,F.fillRect(C,E,P,A)),F.globalAlpha=y.alpha,F.globalCompositeOperation="source-over",this.drawCount+=S,y.renderToTexture&&y.emit(h.PRE_RENDER,y),y.matrix.copyToContext(F);for(var D=0;D<S;D++){var L=m[D];L.mask&&L.mask.preRenderCanvas(this,L,y),L.renderCanvas(this,L,y),L.mask&&L.mask.postRenderCanvas(this,L,y)}F.setTransform(1,0,0,1,0,0),F.globalCompositeOperation="source-over",F.globalAlpha=1,y.flashEffect.postRenderCanvas(F),y.fadeEffect.postRenderCanvas(F),y.dirty=!1,G&&G.postRenderCanvas(this),F.restore(),y.renderToTexture&&(y.emit(h.POST_RENDER,y),y.renderToGame&&f.sys.context.drawImage(y.canvas,C,E)),y.emit(h.POST_RENDER,y)},postRender:function(){var f=this.gameContext;f.restore(),this.emit(e.POST_RENDER);var m=this.snapshotState;m.callback&&(g(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(f,m,y,S,C,E,P,A,F){y===void 0&&(y=!1),this.snapshotArea(S,C,E,P,m,A,F);var G=this.snapshotState;return G.getPixel=y,g(f,G),G.callback=null,this},snapshot:function(f,m,y){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,f,m,y)},snapshotArea:function(f,m,y,S,C,E,P){var A=this.snapshotState;return A.callback=C,A.type=E,A.encoder=P,A.getPixel=!1,A.x=f,A.y=m,A.width=Math.min(y,this.gameCanvas.width),A.height=Math.min(S,this.gameCanvas.height),this},snapshotPixel:function(f,m,y){return this.snapshotArea(f,m,1,1,y),this.snapshotState.getPixel=!0,this},batchSprite:function(f,m,y,S){var C=y.alpha*f.alpha;if(C!==0){var E=this.currentContext,P=this._tempMatrix1,A=this._tempMatrix2,F=m.canvasData,G=F.x,D=F.y,L=m.cutWidth,b=m.cutHeight,I=m.customPivot,N=m.source.resolution,Z=f.displayOriginX,U=f.displayOriginY,W=-Z+m.x,X=-U+m.y;if(f.isCropped){var V=f._crop;(V.flipX!==f.flipX||V.flipY!==f.flipY)&&m.updateCropUVs(V,f.flipX,f.flipY),L=V.cw,b=V.ch,G=V.cx,D=V.cy,W=-Z+V.x,X=-U+V.y,f.flipX&&(W>=0?W=-(W+L):W<0&&(W=Math.abs(W)-L)),f.flipY&&(X>=0?X=-(X+b):X<0&&(X=Math.abs(X)-b))}var O=1,z=1;f.flipX&&(I||(W+=-m.realWidth+Z*2),O=-1),f.flipY&&(I||(X+=-m.realHeight+U*2),z=-1);var B=f.x,Y=f.y;if(y.roundPixels&&(B=Math.floor(B),Y=Math.floor(Y)),A.applyITRS(B,Y,f.rotation,f.scaleX*O,f.scaleY*z),P.copyFrom(y.matrix),S?(P.multiplyWithOffset(S,-y.scrollX*f.scrollFactorX,-y.scrollY*f.scrollFactorY),A.e=B,A.f=Y):(A.e-=y.scrollX*f.scrollFactorX,A.f-=y.scrollY*f.scrollFactorY),P.multiply(A),y.renderRoundPixels&&(P.e=Math.floor(P.e+.5),P.f=Math.floor(P.f+.5)),E.save(),P.setToContext(E),E.globalCompositeOperation=this.blendModes[f.blendMode],E.globalAlpha=C,E.imageSmoothingEnabled=!m.source.scaleMode,f.mask&&f.mask.preRenderCanvas(this,f,y),L>0&&b>0){var k=L/N,J=b/N;y.roundPixels&&(W=Math.floor(W+.5),X=Math.floor(X+.5),k+=.5,J+=.5),E.drawImage(m.source.image,G,D,L,b,W,X,k,J)}f.mask&&f.mask.postRenderCanvas(this,f,y),E.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});v.exports=d}),55830:((v,T,t)=>{v.exports={CanvasRenderer:t(68627),GetBlendModes:t(56373),SetTransform:t(20926)}}),56373:((v,T,t)=>{var h=t(10312),g=t(89289),o=function(){var a=[],r=g.supportNewBlendModes,e="source-over";return a[h.NORMAL]=e,a[h.ADD]="lighter",a[h.MULTIPLY]=r?"multiply":e,a[h.SCREEN]=r?"screen":e,a[h.OVERLAY]=r?"overlay":e,a[h.DARKEN]=r?"darken":e,a[h.LIGHTEN]=r?"lighten":e,a[h.COLOR_DODGE]=r?"color-dodge":e,a[h.COLOR_BURN]=r?"color-burn":e,a[h.HARD_LIGHT]=r?"hard-light":e,a[h.SOFT_LIGHT]=r?"soft-light":e,a[h.DIFFERENCE]=r?"difference":e,a[h.EXCLUSION]=r?"exclusion":e,a[h.HUE]=r?"hue":e,a[h.SATURATION]=r?"saturation":e,a[h.COLOR]=r?"color":e,a[h.LUMINOSITY]=r?"luminosity":e,a[h.ERASE]="destination-out",a[h.SOURCE_IN]="source-in",a[h.SOURCE_OUT]="source-out",a[h.SOURCE_ATOP]="source-atop",a[h.DESTINATION_OVER]="destination-over",a[h.DESTINATION_IN]="destination-in",a[h.DESTINATION_OUT]="destination-out",a[h.DESTINATION_ATOP]="destination-atop",a[h.LIGHTER]="lighter",a[h.COPY]="copy",a[h.XOR]="xor",a};v.exports=o}),20926:((v,T,t)=>{var h=t(91296),g=function(o,a,r,e,s){var u=e.alpha*r.alpha;if(u<=0)return!1;var n=h(r,e,s).calc;return a.globalCompositeOperation=o.blendModes[r.blendMode],a.globalAlpha=u,a.save(),n.setToContext(a),a.imageSmoothingEnabled=r.frame?!r.frame.source.scaleMode:o.antialias,!0};v.exports=g}),63899:(v=>{v.exports="losewebgl"}),6119:(v=>{v.exports="postrender"}),48070:(v=>{v.exports="prerender"}),15640:(v=>{v.exports="render"}),8912:(v=>{v.exports="resize"}),87124:(v=>{v.exports="restorewebgl"}),92503:((v,T,t)=>{v.exports={LOSE_WEBGL:t(63899),POST_RENDER:t(6119),PRE_RENDER:t(48070),RENDER:t(15640),RESIZE:t(8912),RESTORE_WEBGL:t(87124)}}),36909:((v,T,t)=>{v.exports={Events:t(92503),Snapshot:t(89966)},v.exports.Canvas=t(55830),v.exports.WebGL=t(4159)}),32880:((v,T,t)=>{var h=t(27919),g=t(40987),o=t(95540),a=function(r,e){var s=o(e,"callback"),u=o(e,"type","image/png"),n=o(e,"encoder",.92),l=Math.abs(Math.round(o(e,"x",0))),c=Math.abs(Math.round(o(e,"y",0))),d=Math.floor(o(e,"width",r.width)),f=Math.floor(o(e,"height",r.height)),m=o(e,"getPixel",!1);if(m){var y=r.getContext("2d",{willReadFrequently:!1}),S=y.getImageData(l,c,1,1),C=S.data;s.call(null,new g(C[0],C[1],C[2],C[3]))}else if(l!==0||c!==0||d!==r.width||f!==r.height){var E=h.createWebGL(this,d,f),P=E.getContext("2d",{willReadFrequently:!0});d>0&&f>0&&P.drawImage(r,l,c,d,f,0,0,d,f);var A=new Image;A.onerror=function(){s.call(null),h.remove(E)},A.onload=function(){s.call(null,A),h.remove(E)},A.src=E.toDataURL(u,n)}else{var F=new Image;F.onerror=function(){s.call(null)},F.onload=function(){s.call(null,F)},F.src=r.toDataURL(u,n)}};v.exports=a}),88815:((v,T,t)=>{var h=t(27919),g=t(40987),o=t(95540),a=function(r,e){var s=r,u=o(e,"callback"),n=o(e,"type","image/png"),l=o(e,"encoder",.92),c=Math.abs(Math.round(o(e,"x",0))),d=Math.abs(Math.round(o(e,"y",0))),f=o(e,"getPixel",!1),m=o(e,"isFramebuffer",!1),y=m?o(e,"bufferWidth",1):s.drawingBufferWidth,S=m?o(e,"bufferHeight",1):s.drawingBufferHeight;if(f){var C=new Uint8Array(4),E=m?d:S-d;s.readPixels(c,E,1,1,s.RGBA,s.UNSIGNED_BYTE,C),u.call(null,new g(C[0],C[1],C[2],C[3]))}else{var P=Math.floor(o(e,"width",y)),A=Math.floor(o(e,"height",S)),F=P*A*4,G=new Uint8Array(F);s.readPixels(c,S-d-A,P,A,s.RGBA,s.UNSIGNED_BYTE,G);for(var D=h.createWebGL(this,P,A),L=D.getContext("2d",{willReadFrequently:!0}),b=L.getImageData(0,0,P,A),I=b.data,N=0;N<A;N++)for(var Z=0;Z<P;Z++){var U=((A-N-1)*P+Z)*4,W=m?F-(N*P+(P-Z))*4:(N*P+Z)*4;I[W+0]=G[U+0],I[W+1]=G[U+1],I[W+2]=G[U+2],I[W+3]=G[U+3]}L.putImageData(b,0,0);var X=new Image;X.onerror=function(){u.call(null),h.remove(D)},X.onload=function(){u.call(null,X),h.remove(D)},X.src=D.toDataURL(n,l)}};v.exports=a}),89966:((v,T,t)=>{v.exports={Canvas:t(32880),WebGL:t(88815)}}),7530:((v,T,t)=>{var h=t(83419),g=t(36060),o=t(90330),a=t(82264),r=t(95540),e=t(32302),s=t(63448),u=t(31302),n=t(58918),l=t(14811),c=t(92651),d=t(96569),f=t(56527),m=t(57516),y=t(43439),S=t(81041),C=t(12385),E=t(7589),P=t(95428),A=t(72905),F=new h({initialize:function(D){this.game=D.game,this.renderer=D,this.classes=new o([[g.UTILITY_PIPELINE,E],[g.MULTI_PIPELINE,m],[g.BITMAPMASK_PIPELINE,u],[g.SINGLE_PIPELINE,C],[g.ROPE_PIPELINE,S],[g.LIGHT_PIPELINE,d],[g.POINTLIGHT_PIPELINE,y],[g.MOBILE_PIPELINE,f]]),this.postPipelineClasses=new o,this.pipelines=new o,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(G,D,L){var b=this.renderer,I=this.renderTargets;this.frameInc=Math.floor(r(G,"frameInc",32));var N=b.width,Z=b.height,U=this.game.config.disablePreFX,W=this.game.config.disablePostFX;if(W||this.postPipelineClasses.setAll([[String(l.BARREL),n.Barrel],[String(l.BLOOM),n.Bloom],[String(l.BLUR),n.Blur],[String(l.BOKEH),n.Bokeh],[String(l.CIRCLE),n.Circle],[String(l.COLOR_MATRIX),n.ColorMatrix],[String(l.DISPLACEMENT),n.Displacement],[String(l.GLOW),n.Glow],[String(l.GRADIENT),n.Gradient],[String(l.PIXELATE),n.Pixelate],[String(l.SHADOW),n.Shadow],[String(l.SHINE),n.Shine],[String(l.VIGNETTE),n.Vignette],[String(l.WIPE),n.Wipe]]),!U){this.classes.set(g.FX_PIPELINE,c);for(var X=Math.min(N,Z),V=Math.ceil(X/this.frameInc),O=1;O<V;O++){var z=O*this.frameInc;I.push(new e(b,z,z)),I.push(new e(b,z,z)),I.push(new e(b,z,z)),this.maxDimension=z}I.push(new e(b,N,Z,1,0,!0,!0)),I.push(new e(b,N,Z,1,0,!0,!0)),I.push(new e(b,N,Z,1,0,!0,!0))}var B,Y,k=this,J=this.game;if(this.classes.each(function(tt,ut){B=k.add(tt,new ut({game:J})),tt===g.UTILITY_PIPELINE&&(k.UTILITY_PIPELINE=B,k.fullFrame1=B.fullFrame1,k.fullFrame2=B.fullFrame2,k.halfFrame1=B.halfFrame1,k.halfFrame2=B.halfFrame2)}),this.MULTI_PIPELINE=this.get(g.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(g.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(g.MOBILE_PIPELINE),U||(this.FX_PIPELINE=this.get(g.FX_PIPELINE)),G)for(Y in G){var j=G[Y];B=new j(J),B.name=Y,B.isPostFX?this.postPipelineClasses.set(Y,j):this.has(Y)||(this.classes.set(Y,j),this.add(Y,B))}this.default=this.get(D),L&&!a.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(G){var D=this.get(G);return D&&(this.default=D),D},add:function(G,D){if(D.isPostFX){console.warn(G+" is a Post Pipeline. Use `addPostPipeline` instead");return}var L=this.pipelines,b=this.renderer;return L.has(G)?console.warn("Pipeline exists: "+G):(D.name=G,D.manager=this,L.set(G,D)),D.hasBooted||D.boot(),b.width!==0&&b.height!==0&&!D.isPreFX&&D.resize(b.width,b.height),D},addPostPipeline:function(G,D){this.postPipelineClasses.has(G)||this.postPipelineClasses.set(G,D)},flush:function(){this.current&&this.current.flush()},has:function(G){var D=this.pipelines;return typeof G=="string"?D.has(G):!!D.contains(G)},get:function(G){var D=this.pipelines;if(typeof G=="string")return D.get(G);if(D.contains(G))return G},getPostPipeline:function(G,D,L){var b=this.postPipelineClasses,I,N="",Z=typeof G;if(Z==="string"||Z==="number"?(I=b.get(G),N=G):Z==="function"?(b.contains(G)&&(I=G),N=G.name):Z==="object"&&(I=b.get(G.name),N=G.name),I){var U=new I(this.game,L);return U.name=N,D&&(U.gameObject=D),this.postPipelineInstances.push(U),U}},removePostPipeline:function(G){A(this.postPipelineInstances,G)},remove:function(G,D,L){D===void 0&&(D=!0),L===void 0&&(L=!0),this.pipelines.delete(G),D&&this.classes.delete(G),L&&this.postPipelineClasses.delete(G)},set:function(G,D,L){if(!G.isPostFX)return this.isCurrent(G,L)||(this.flush(),this.current&&this.current.unbind(),this.current=G,G.bind(L)),G.updateProjectionMatrix(),G.onBind(D),G},preBatch:function(G){if(G.hasPostPipeline){this.flush();for(var D=G.postPipelines,L=D.length-1;L>=0;L--){var b=D[L];b.active&&b.preBatch(G)}}},postBatch:function(G){if(G.hasPostPipeline){this.flush();for(var D=G.postPipelines,L=0;L<D.length;L++){var b=D[L];b.active&&b.postBatch(G)}}},preBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var D=G.postPipelines,L=D.length-1;L>=0;L--){var b=D[L];b.active&&b.preBatch(G)}}},postBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var D=G.postPipelines,L=0;L<D.length;L++){var b=D[L];b.active&&b.postBatch(G)}}},isCurrent:function(G,D){var L=this.renderer,b=this.current;return b&&!D&&(D=b.currentShader),!(b!==G||D.program!==L.currentProgram)},copyFrame:function(G,D,L,b,I){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(G,D,L,b,I),this},copyToGame:function(G){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(G),this},drawFrame:function(G,D,L,b){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(G,D,L,b),this},blendFrames:function(G,D,L,b,I){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(G,D,L,b,I),this},blendFramesAdditive:function(G,D,L,b,I){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(G,D,L,b,I),this},clearFrame:function(G,D){return this.UTILITY_PIPELINE.clearFrame(G,D),this},blitFrame:function(G,D,L,b,I,N){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(G,D,L,b,I,N),this},copyFrameRect:function(G,D,L,b,I,N,Z,U){return this.UTILITY_PIPELINE.copyFrameRect(G,D,L,b,I,N,Z,U),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(G){return this.UTILITY_PIPELINE.bind(G)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(G,D){D.restoreContext()}),P(this.postPipelineInstances,function(G){G.restoreContext()})},rebind:function(G){G===void 0&&this.previous&&(G=this.previous);var D=this.renderer,L=D.gl;L.disable(L.DEPTH_TEST),L.disable(L.CULL_FACE),D.hasActiveStencilMask()?L.clear(L.DEPTH_BUFFER_BIT):(L.disable(L.STENCIL_TEST),L.clear(L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)),L.viewport(0,0,D.width,D.height),D.currentProgram=null,D.setBlendMode(0,!0);var b=D.vaoExtension;b&&b.bindVertexArrayOES(null);var I=this.pipelines.entries;for(var N in I)I[N].glReset=!0;G&&(this.current=G,G.rebind())},clear:function(){var G=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,G.currentProgram=null,G.setBlendMode(0,!0);var D=G.vaoExtension;D&&D.bindVertexArrayOES(null)},getRenderTarget:function(G){var D=this.renderTargets,L=3;if(G>this.maxDimension)return this.targetIndex=D.length-L,D[this.targetIndex];var b=(s(G,this.frameInc,0,!0)-1)*L;return this.targetIndex=b,D[b]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});v.exports=F}),32302:((v,T,t)=>{var h=t(83419),g=t(92503),o=new h({initialize:function(r,e,s,u,n,l,c,d,f){u===void 0&&(u=1),n===void 0&&(n=0),l===void 0&&(l=!0),c===void 0&&(c=!1),d===void 0&&(d=!0),f===void 0&&(f=!0),this.renderer=r,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=u,this.minFilter=n,this.autoClear=l,this.autoResize=!0,this.hasDepthBuffer=d,this.forceClamp=f,this.init(e,s),c?this.renderer.on(g.RESIZE,this.resize,this):this.autoResize=!1},init:function(a,r){var e=this.renderer;this.texture=e.createTextureFromSource(null,a,r,this.minFilter,this.forceClamp),this.framebuffer=e.createFramebuffer(a,r,this.texture,this.hasDepthBuffer),this.width=a,this.height=r},setAutoResize:function(a){return a&&!this.autoResize?(this.renderer.on(g.RESIZE,this.resize,this),this.autoResize=!0):!a&&this.autoResize&&(this.renderer.off(g.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(a,r){if(this.autoResize&&this.willResize(a,r)){var e=this.renderer;e.deleteFramebuffer(this.framebuffer),e.deleteTexture(this.texture),this.texture=e.createTextureFromSource(null,a,r,this.minFilter,this.forceClamp),this.framebuffer=e.createFramebuffer(a,r,this.texture,this.hasDepthBuffer),this.width=a,this.height=r}return this},willResize:function(a,r){return typeof a!="number"||typeof r!="number"?!1:(a=Math.round(a*this.scale),r=Math.round(r*this.scale),a=Math.max(a,1),r=Math.max(r,1),a!==this.width||r!==this.height)},bind:function(a,r,e){a===void 0&&(a=!1);var s=this.renderer;if(a&&s.flush(),r&&e&&this.resize(r,e),s.pushFramebuffer(this.framebuffer,!1,!1),a&&this.adjustViewport(),this.autoClear){var u=this.renderer.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT)}s.clearStencilMask()},adjustViewport:function(){var a=this.renderer.gl;a.viewport(0,0,this.width,this.height),a.disable(a.SCISSOR_TEST)},clear:function(a,r,e,s){var u=this.renderer,n=u.gl;u.pushFramebuffer(this.framebuffer),a!==void 0&&r!==void 0&&e!==void 0&&s!==void 0?(n.enable(n.SCISSOR_TEST),n.scissor(a,r,e,s)):n.disable(n.SCISSOR_TEST),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),u.popFramebuffer(),u.resetScissor()},unbind:function(a){a===void 0&&(a=!1);var r=this.renderer;return a&&r.flush(),r.popFramebuffer()},destroy:function(){var a=this.renderer;a.off(g.RESIZE,this.resize,this),a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});v.exports=o}),70554:(v=>{v.exports={getTintFromFloats:function(T,t,h,g){var o=(T*255|0)&255,a=(t*255|0)&255,r=(h*255|0)&255,e=(g*255|0)&255;return(e<<24|o<<16|a<<8|r)>>>0},getTintAppendFloatAlpha:function(T,t){var h=(t*255|0)&255;return(h<<24|T)>>>0},getTintAppendFloatAlphaAndSwap:function(T,t){var h=(T>>16|0)&255,g=(T>>8|0)&255,o=(T|0)&255,a=(t*255|0)&255;return(a<<24|o<<16|g<<8|h)>>>0},getFloatsFromUintRGB:function(T){var t=(T>>16|0)&255,h=(T>>8|0)&255,g=(T|0)&255;return[t/255,h/255,g/255]},checkShaderMax:function(T,t){var h=Math.min(16,T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS));return!t||t===-1?h:Math.min(h,t)},parseFragmentShaderMaxTextures:function(T,t){if(!T)return"";for(var h="",g=0;g<t;g++)g>0&&(h+=`
	else `),g<t-1&&(h+="if (outTexId < "+g+".5)"),h+=`
	{`,h+=`
		texture = texture2D(uMainSampler[`+g+"], outTexCoord);",h+=`
	}`;return T=T.replace(/%count%/gi,t.toString()),T.replace(/%forloop%/gi,h)},setGlowQuality:function(T,t,h,g){return h===void 0&&(h=t.config.glowFXQuality),g===void 0&&(g=t.config.glowFXDistance),T=T.replace(/__SIZE__/gi,(1/h/g).toFixed(7)),T=T.replace(/__DIST__/gi,g.toFixed(0)+".0"),T}}}),29100:((v,T,t)=>{var h=t(83419),g=t(62644),o=t(50792),a=t(77085),r=t(95540),e=t(37867),s=t(92503),u=t(32302),n=t(70554),l=t(38683),c=new h({Extends:o,initialize:function(f){o.call(this);var m=f.game,y=m.renderer,S=y.gl;this.name=r(f,"name","WebGLPipeline"),this.game=m,this.renderer=y,this.manager,this.gl=S,this.view=m.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=r(f,"topology",S.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=r(f,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=f,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=r(f,"resizeUniform","")},boot:function(){var d,f=this.gl,m=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new e().identity());var S=this.renderTargets,C=r(m,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var E=y.width,P=y.height;if(typeof C=="number")for(d=0;d<C;d++)S.push(new u(y,E,P,1,0,!0));else if(Array.isArray(C))for(d=0;d<C.length;d++){var A=r(C[d],"scale",1),F=r(C[d],"minFilter",0),G=r(C[d],"autoClear",1),D=r(C[d],"autoResize",!1),L=r(C[d],"width",null),b=r(C[d],"height",L);L?S.push(new u(y,L,b,1,F,G,D)):S.push(new u(y,E,P,A,F,G,D))}S.length&&(this.currentRenderTarget=S[0]),this.setShadersFromConfig(m);var I=this.shaders,N=0;for(d=0;d<I.length;d++)I[d].vertexSize>N&&(N=I[d].vertexSize);var Z=r(m,"batchSize",y.config.batchSize);this.vertexCapacity=Z*6;var U=new ArrayBuffer(this.vertexCapacity*N);this.vertexData=U,this.bytes=new Uint8Array(U),this.vertexViewF32=new Float32Array(U),this.vertexViewU32=new Uint32Array(U);var W=r(m,"vertices",null);for(W?(this.vertexViewF32.set(W),this.vertexBuffer=y.createVertexBuffer(U,f.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(U.byteLength,f.DYNAMIC_DRAW),this.setVertexBuffer(),d=I.length-1;d>=0;d--)I[d].rebind();this.hasBooted=!0,y.on(s.RESIZE,this.resize,this),y.on(s.PRE_RENDER,this.onPreRender,this),y.on(s.RENDER,this.onRender,this),y.on(s.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(d,f,m){var y=this.renderer;if(d!==this.currentShader||y.currentProgram!==this.currentShader.program){this.flush();var S=this.setVertexBuffer(m);S&&!f&&(f=!0),d.bind(f,!1),this.currentShader=d}return this},getShaderByName:function(d){for(var f=this.shaders,m=0;m<f.length;m++)if(f[m].name===d)return f[m]},setShadersFromConfig:function(d){var f,m=this.shaders,y=this.renderer;for(f=0;f<m.length;f++)m[f].destroy();var S="vertShader",C="fragShader",E="attributes",P=r(d,S,null),A=n.parseFragmentShaderMaxTextures(r(d,C,null),y.maxTextures),F=r(d,E,null),G=r(d,"shaders",[]),D=G.length;if(D===0)P&&A&&(this.shaders=[new l(this,"default",P,A,g(F))]);else{var L=[];for(f=0;f<D;f++){var b=G[f],I,N,Z,U;if(typeof b=="string"?(I="default",N=P,Z=n.parseFragmentShaderMaxTextures(b,y.maxTextures),U=F):(I=r(b,"name","default"),N=r(b,S,P),Z=n.parseFragmentShaderMaxTextures(r(b,C,A),y.maxTextures),U=r(b,E,F)),I==="default"){var W=Z.split(`
`),X=W[0].trim();X.indexOf("#define SHADER_NAME")>-1&&(I=X.substring(20))}N&&Z&&L.push(new l(this,I,N,Z,g(U)))}this.shaders=L}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(d){return this.currentBatch={start:this.vertexCount,count:0,texture:[d],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=d,this.batch.push(this.currentBatch),0},addTextureToBatch:function(d){var f=this.currentBatch;f&&(f.texture.push(d),f.unit++,f.maxUnit++)},pushBatch:function(d){if(!this.currentBatch||this.forceZero&&d!==this.currentTexture)return this.createBatch(d);if(d===this.currentTexture)return this.currentUnit;var f=this.currentBatch,m=f.texture.indexOf(d);return m===-1?f.texture.length===this.renderer.maxTextures?this.createBatch(d):(f.unit++,f.maxUnit++,f.texture.push(d),this.currentUnit=f.unit,this.currentTexture=d,f.unit):(this.currentUnit=m,this.currentTexture=d,m)},setGameObject:function(d,f){return f===void 0&&(f=d.frame),this.pushBatch(f.source.glTexture)},shouldFlush:function(d){return d===void 0&&(d=0),this.vertexCount+d>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(d,f){(d!==this.width||f!==this.height)&&this.flush(),this.width=d,this.height=f;for(var m=this.renderTargets,y=0;y<m.length;y++)m[y].resize(d,f);return this.setProjectionMatrix(d,f),this.resizeUniform&&this.set2f(this.resizeUniform,d,f),this.emit(a.RESIZE,d,f,this),this.onResize(d,f),this},setProjectionMatrix:function(d,f){var m=this.projectionMatrix;if(!m)return this;this.projectionWidth=d,this.projectionHeight=f,m.ortho(0,d,f,0,-1e3,1e3);for(var y=this.shaders,S="uProjectionMatrix",C=0;C<y.length;C++){var E=y[C];E.hasUniform(S)&&(E.resetUniform(S),E.setMatrix4fv(S,!1,m.val,E))}return this},flipProjectionMatrix:function(d){d===void 0&&(d=!0);var f=this.projectionMatrix;if(!f)return this;var m=this.projectionWidth,y=this.projectionHeight;d?f.ortho(0,m,0,y,-1e3,1e3):f.ortho(0,m,y,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,f.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var d=this.renderer.projectionWidth,f=this.renderer.projectionHeight;(this.projectionWidth!==d||this.projectionHeight!==f)&&this.setProjectionMatrix(d,f)}},bind:function(d){if(d===void 0&&(d=this.currentShader),this.glReset)return this.rebind(d);var f=!1,m=this.gl;return m.getParameter(m.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(m.bindBuffer(m.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,f=!0),d.bind(f),this.currentShader=d,this.activeTextures.length=0,this.emit(a.BIND,this,d),this.onActive(d),this},rebind:function(d){this.activeBuffer=null,this.setVertexBuffer();for(var f=this.shaders,m=f.length-1;m>=0;m--){var y=f[m].rebind();(!d||y===d)&&(this.currentShader=y)}return this.activeTextures.length=0,this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var d=this.shaders,f=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,f&&this.setVertexBuffer();for(var m=0;m<d.length;m++){var y=d[m];y.syncUniforms(),f&&y.rebind()}},setVertexBuffer:function(d){if(d===void 0&&(d=this.vertexBuffer),d!==this.activeBuffer){var f=this.gl;return this.gl.bindBuffer(f.ARRAY_BUFFER,d.webGLBuffer),this.activeBuffer=d,!0}return!1},preBatch:function(d){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(d),this},postBatch:function(d){return this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(d){if(d===void 0&&(d=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,d),this.onBeforeFlush(d);var f=this.gl,m=this.vertexCount,y=this.currentShader.vertexSize,S=this.topology;if(this.active){this.setVertexBuffer(),m===this.vertexCapacity?f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.DYNAMIC_DRAW):f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,m*y));var C,E,P,A=this.batch,F=this.activeTextures;if(this.forceZero)for(F[0]||f.activeTexture(f.TEXTURE0),C=0;C<A.length;C++)E=A[C],P=E.texture[0],F[0]!==P&&(f.bindTexture(f.TEXTURE_2D,P.webGLTexture),F[0]=P),f.drawArrays(S,E.start,E.count);else for(C=0;C<A.length;C++){E=A[C];for(var G=0;G<=E.maxUnit;G++)P=E.texture[G],F[G]!==P&&(f.activeTexture(f.TEXTURE0+G),f.bindTexture(f.TEXTURE_2D,P.webGLTexture),F[G]=P);f.drawArrays(S,E.start,E.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(a.AFTER_FLUSH,this,d),this.onAfterFlush(d)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(d,f,m,y,S,C,E){var P=this.vertexViewF32,A=this.vertexViewU32,F=this.vertexCount*this.currentShader.vertexComponentCount-1;P[++F]=d,P[++F]=f,P[++F]=m,P[++F]=y,P[++F]=S,P[++F]=C,A[++F]=E,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(d,f,m,y,S,C,E,P,A,F,G,D,L,b,I,N,Z,U,W,X){X===void 0&&(X=this.currentUnit);var V=!1;this.shouldFlush(6)&&(this.flush(),V=!0),this.currentBatch||(X=this.setTexture2D(W));var O=this.vertexViewF32,z=this.vertexViewU32,B=this.vertexCount*this.currentShader.vertexComponentCount-1;return O[++B]=f,O[++B]=m,O[++B]=F,O[++B]=G,O[++B]=X,O[++B]=U,z[++B]=b,O[++B]=y,O[++B]=S,O[++B]=F,O[++B]=L,O[++B]=X,O[++B]=U,z[++B]=N,O[++B]=C,O[++B]=E,O[++B]=D,O[++B]=L,O[++B]=X,O[++B]=U,z[++B]=Z,O[++B]=f,O[++B]=m,O[++B]=F,O[++B]=G,O[++B]=X,O[++B]=U,z[++B]=b,O[++B]=C,O[++B]=E,O[++B]=D,O[++B]=L,O[++B]=X,O[++B]=U,z[++B]=Z,O[++B]=P,O[++B]=A,O[++B]=D,O[++B]=G,O[++B]=X,O[++B]=U,z[++B]=I,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(d),V},batchTri:function(d,f,m,y,S,C,E,P,A,F,G,D,L,b,I,N,Z){Z===void 0&&(Z=this.currentUnit);var U=!1;this.shouldFlush(3)&&(this.flush(),U=!0),this.currentBatch||(Z=this.setTexture2D(N));var W=this.vertexViewF32,X=this.vertexViewU32,V=this.vertexCount*this.currentShader.vertexComponentCount-1;return W[++V]=f,W[++V]=m,W[++V]=P,W[++V]=A,W[++V]=Z,W[++V]=I,X[++V]=D,W[++V]=y,W[++V]=S,W[++V]=P,W[++V]=G,W[++V]=Z,W[++V]=I,X[++V]=L,W[++V]=C,W[++V]=E,W[++V]=F,W[++V]=G,W[++V]=Z,W[++V]=I,X[++V]=b,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(d),U},drawFillRect:function(d,f,m,y,S,C,E,P){E===void 0&&(E=this.renderer.whiteTexture),P===void 0&&(P=!0),d=Math.floor(d),f=Math.floor(f);var A=Math.floor(d+m),F=Math.floor(f+y),G=this.setTexture2D(E),D=n.getTintAppendFloatAlphaAndSwap(S,C),L=0,b=0,I=1,N=1;P&&(b=1,N=0),this.batchQuad(null,d,f,d,F,A,F,A,f,L,b,I,N,D,D,D,D,0,E,G)},setTexture2D:function(d){return d===void 0&&(d=this.renderer.whiteTexture),this.pushBatch(d)},bindTexture:function(d,f){f===void 0&&(f=0);var m=this.gl;return m.activeTexture(m.TEXTURE0+f),m.bindTexture(m.TEXTURE_2D,d.webGLTexture),this},bindRenderTarget:function(d,f){return this.bindTexture(d.texture,f)},setTime:function(d,f){return this.set1f(d,this.game.loop.getDuration(),f),this},setBoolean:function(d,f,m){return m===void 0&&(m=this.currentShader),m.setBoolean(d,f),this},set1f:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set1f(d,f),this},set2f:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.set2f(d,f,m),this},set3f:function(d,f,m,y,S){return S===void 0&&(S=this.currentShader),S.set3f(d,f,m,y),this},set4f:function(d,f,m,y,S,C){return C===void 0&&(C=this.currentShader),C.set4f(d,f,m,y,S),this},set1fv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set1fv(d,f),this},set2fv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set2fv(d,f),this},set3fv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set3fv(d,f),this},set4fv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set4fv(d,f),this},set1iv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set1iv(d,f),this},set2iv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set2iv(d,f),this},set3iv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set3iv(d,f),this},set4iv:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set4iv(d,f),this},set1i:function(d,f,m){return m===void 0&&(m=this.currentShader),m.set1i(d,f),this},set2i:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.set2i(d,f,m),this},set3i:function(d,f,m,y,S){return S===void 0&&(S=this.currentShader),S.set3i(d,f,m,y),this},set4i:function(d,f,m,y,S,C){return C===void 0&&(C=this.currentShader),C.set4i(d,f,m,y,S),this},setMatrix2fv:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(d,f,m),this},setMatrix3fv:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(d,f,m),this},setMatrix4fv:function(d,f,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(d,f,m),this},destroy:function(){this.emit(a.DESTROY,this);var d,f=this.shaders;for(d=0;d<f.length;d++)f[d].destroy();var m=this.renderTargets;for(d=0;d<m.length;d++)m[d].destroy();var y=this.renderer;return y.deleteBuffer(this.vertexBuffer),y.off(s.RESIZE,this.resize,this),y.off(s.PRE_RENDER,this.onPreRender,this),y.off(s.RENDER,this.onRender,this),y.off(s.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});v.exports=c}),74797:((v,T,t)=>{var h=t(95428),g=t(72905),o=t(19715),a=t(83419),r=t(8054),e=t(50792),s=t(92503),u=t(50030),n=t(37867),l=t(29747),c=t(7530),d=t(32302),f=t(97480),m=t(69442),y=t(70554),S=t(88815),C=t(26128),E=t(1482),P=t(82751),A=t(84387),F=t(93567),G=t(57183),D=new a({Extends:e,initialize:function(b){e.call(this);var I=b.config,N={alpha:I.transparent,desynchronized:I.desynchronized,depth:!0,antialias:I.antialiasGL,premultipliedAlpha:I.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:I.failIfMajorPerformanceCaveat,powerPreference:I.powerPreference,preserveDrawingBuffer:I.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:I.clearBeforeRender,antialias:I.antialias,backgroundColor:I.backgroundColor,contextCreation:N,roundPixels:I.roundPixels,maxTextures:I.maxTextures,maxTextureSize:I.maxTextureSize,batchSize:I.batchSize,maxLights:I.maxLights,mipmapFilter:I.mipmapFilter},this.game=b,this.type=r.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=b.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=l,this.contextRestoredHandler=l,this.previousContextLostHandler=l,this.previousContextRestoredHandler=l,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(L){var b,I=this.game,N=this.canvas,Z=L.backgroundColor;if(I.config.context?b=I.config.context:b=N.getContext("webgl",L.contextCreation)||N.getContext("experimental-webgl",L.contextCreation),!b||b.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=b,this.setExtensions(),this.setContextHandlers(),I.context=b;for(var U=0;U<=27;U++)this.blendModes.push({func:[b.ONE,b.ONE_MINUS_SRC_ALPHA],equation:b.FUNC_ADD});this.blendModes[1].func=[b.ONE,b.DST_ALPHA],this.blendModes[2].func=[b.DST_COLOR,b.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[b.ONE,b.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[b.ZERO,b.ONE_MINUS_SRC_ALPHA],equation:b.FUNC_REVERSE_SUBTRACT},this.glFormats=[b.BYTE,b.SHORT,b.UNSIGNED_BYTE,b.UNSIGNED_SHORT,b.FLOAT],this.glFuncMap={mat2:{func:b.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:b.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:b.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:b.uniform1f,length:1},"1fv":{func:b.uniform1fv,length:1},"1i":{func:b.uniform1i,length:1},"1iv":{func:b.uniform1iv,length:1},"2f":{func:b.uniform2f,length:2},"2fv":{func:b.uniform2fv,length:1},"2i":{func:b.uniform2i,length:2},"2iv":{func:b.uniform2iv,length:1},"3f":{func:b.uniform3f,length:3},"3fv":{func:b.uniform3fv,length:1},"3i":{func:b.uniform3i,length:3},"3iv":{func:b.uniform3iv,length:1},"4f":{func:b.uniform4f,length:4},"4fv":{func:b.uniform4fv,length:1},"4i":{func:b.uniform4i,length:4},"4iv":{func:b.uniform4iv,length:1}},(!L.maxTextures||L.maxTextures===-1)&&(L.maxTextures=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS)),L.maxTextureSize||(L.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),b.disable(b.DEPTH_TEST),b.disable(b.CULL_FACE),b.enable(b.BLEND),b.clearColor(Z.redGL,Z.greenGL,Z.blueGL,Z.alphaGL),b.clear(b.COLOR_BUFFER_BIT);var W=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return W.indexOf(L.mipmapFilter)!==-1&&(this.mipmapFilter=b[L.mipmapFilter]),this.maxTextures=y.checkShaderMax(b,L.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new c(this),this.setBlendMode(r.BlendModes.NORMAL),this.projectionMatrix=new n().identity(),I.textures.once(m.READY,this.boot,this),this},boot:function(){var L=this.game,b=this.pipelines,I=L.scale.baseSize,N=I.width,Z=I.height;this.width=N,this.height=Z,this.isBooted=!0,this.renderTarget=new d(this,N,Z,1,0,!0,!0),this.maskTarget=new d(this,N,Z,1,0,!0,!0),this.maskSource=new d(this,N,Z,1,0,!0,!0);var U=L.config;b.boot(U.pipeline,U.defaultPipeline,U.autoMobilePipeline),this.blankTexture=L.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=L.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=L.textures.getFrame("__WHITE").glTexture;var W=this.gl;W.bindFramebuffer(W.FRAMEBUFFER,null),W.enable(W.SCISSOR_TEST),L.scale.on(f.RESIZE,this.onResize,this),this.resize(N,Z)},setExtensions:function(){var L=this.gl,b=L.getSupportedExtensions();this.supportedExtensions=b;var I="ANGLE_instanced_arrays";this.instancedArraysExtension=b.indexOf(I)>-1?L.getExtension(I):null;var N="OES_vertex_array_object";this.vaoExtension=b.indexOf(N)>-1?L.getExtension(N):null},setContextHandlers:function(L,b){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof L=="function"?this.contextLostHandler=L.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof b=="function"?this.contextRestoredHandler=b.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(L){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(s.LOSE_WEBGL,this),L.preventDefault()},dispatchContextRestored:function(L){var b=this.gl;if(b.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(r.BlendModes.NORMAL),b.disable(b.BLEND),b.disable(b.DEPTH_TEST),b.enable(b.CULL_FACE),this.compression=this.getCompressedTextures();var I=function(N){N.createResource()};h(this.glTextureWrappers,I),h(this.glBufferWrappers,I),h(this.glFramebufferWrappers,I),h(this.glProgramWrappers,I),h(this.glAttribLocationWrappers,I),h(this.glUniformLocationWrappers,I),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(s.RESTORE_WEBGL,this),L.preventDefault()},createTemporaryTextures:function(){for(var L=this.gl,b=0;b<this.maxTextures;b++){var I=L.createTexture();L.activeTexture(L.TEXTURE0+b),L.bindTexture(L.TEXTURE_2D,I),L.texImage2D(L.TEXTURE_2D,0,L.RGBA,1,1,0,L.RGBA,L.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(b)}},captureFrame:function(L,b){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(L,b,I){},stopCapture:function(){},onCapture:function(L){},onResize:function(L,b){(b.width!==this.width||b.height!==this.height)&&this.resize(b.width,b.height)},beginCapture:function(L,b){L===void 0&&(L=this.width),b===void 0&&(b=this.height),this.renderTarget.bind(!0,L,b),this.setProjectionMatrix(L,b)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(L,b){var I=this.gl;return this.width=L,this.height=b,this.setProjectionMatrix(L,b),I.viewport(0,0,L,b),this.drawingBufferHeight=I.drawingBufferHeight,I.scissor(0,I.drawingBufferHeight-b,L,b),this.defaultScissor[2]=L,this.defaultScissor[3]=b,this.emit(s.RESIZE,L,b),this},getCompressedTextures:function(){var L="WEBGL_compressed_texture_",b="WEBKIT_"+L,I="EXT_texture_compression_",N=function(U,W){var X=U.getExtension(L+W)||U.getExtension(b+W)||U.getExtension(I+W);if(X){var V={};for(var O in X)V[X[O]]=O;return V}},Z=this.gl;return{ETC:N(Z,"etc"),ETC1:N(Z,"etc1"),ATC:N(Z,"atc"),ASTC:N(Z,"astc"),BPTC:N(Z,"bptc"),RGTC:N(Z,"rgtc"),PVRTC:N(Z,"pvrtc"),S3TC:N(Z,"s3tc"),S3TCSRGB:N(Z,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(L,b){var I=this.compression[L.toUpperCase()];if(b in I)return I[b]},supportsCompressedTexture:function(L,b){var I=this.compression[L.toUpperCase()];return I?b?b in I:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(L,b){return(L!==this.projectionWidth||b!==this.projectionHeight)&&(this.projectionWidth=L,this.projectionHeight=b,this.projectionMatrix.ortho(0,L,b,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(L){return this.supportedExtensions?this.supportedExtensions.indexOf(L):!1},getExtension:function(L){return this.hasExtension(L)?(L in this.extensions||(this.extensions[L]=this.gl.getExtension(L)),this.extensions[L]):null},flush:function(){this.pipelines.flush()},pushScissor:function(L,b,I,N,Z){Z===void 0&&(Z=this.drawingBufferHeight);var U=this.scissorStack,W=[L,b,I,N];return U.push(W),this.setScissor(L,b,I,N,Z),this.currentScissor=W,W},setScissor:function(L,b,I,N,Z){Z===void 0&&(Z=this.drawingBufferHeight);var U=this.gl,W=this.currentScissor,X=I>0&&N>0;if(W&&X){var V=W[0],O=W[1],z=W[2],B=W[3];X=V!==L||O!==b||z!==I||B!==N}X&&(this.flush(),U.scissor(L,Z-b-N,I,N))},resetScissor:function(){var L=this.gl;L.enable(L.SCISSOR_TEST);var b=this.currentScissor;if(b){var I=b[0],N=b[1],Z=b[2],U=b[3];Z>0&&U>0&&L.scissor(I,this.drawingBufferHeight-N-U,Z,U)}},popScissor:function(){var L=this.scissorStack;L.pop();var b=L[L.length-1];b&&this.setScissor(b[0],b[1],b[2],b[3]),this.currentScissor=b},hasActiveStencilMask:function(){var L=this.currentMask.mask,b=this.currentCameraMask.mask;return L&&L.isStencil||b&&b.isStencil},resetViewport:function(){var L=this.gl;L.viewport(0,0,this.width,this.height),this.drawingBufferHeight=L.drawingBufferHeight},setBlendMode:function(L,b){b===void 0&&(b=!1);var I=this.gl,N=this.blendModes[L];return b||L!==r.BlendModes.SKIP_CHECK&&this.currentBlendMode!==L?(this.flush(),I.enable(I.BLEND),I.blendEquation(N.equation),N.func.length>2?I.blendFuncSeparate(N.func[0],N.func[1],N.func[2],N.func[3]):I.blendFunc(N.func[0],N.func[1]),this.currentBlendMode=L,!0):!1},addBlendMode:function(L,b){var I=this.blendModes.push({func:L,equation:b});return I-1},updateBlendMode:function(L,b,I){return this.blendModes[L]&&(this.blendModes[L].func=b,I&&(this.blendModes[L].equation=I)),this},removeBlendMode:function(L){return L>17&&this.blendModes[L]&&this.blendModes.splice(L,1),this},pushFramebuffer:function(L,b,I,N,Z){return L===this.currentFramebuffer?this:(this.fboStack.push(L),this.setFramebuffer(L,b,I,N,Z))},setFramebuffer:function(L,b,I,N,Z){if(b===void 0&&(b=!1),I===void 0&&(I=!0),N===void 0&&(N=null),Z===void 0&&(Z=!1),L===this.currentFramebuffer)return this;var U=this.gl,W=this.width,X=this.height;return L&&L.renderTexture&&I?(W=L.renderTexture.width,X=L.renderTexture.height):this.flush(),L?U.bindFramebuffer(U.FRAMEBUFFER,L.webGLFramebuffer):U.bindFramebuffer(U.FRAMEBUFFER,null),I&&U.viewport(0,0,W,X),N&&U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_2D,N.webGLTexture,0),Z&&(U.clearColor(0,0,0,0),U.clear(U.COLOR_BUFFER_BIT)),b&&(L?(this.drawingBufferHeight=X,this.pushScissor(0,0,W,X)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=L,this},popFramebuffer:function(L,b){L===void 0&&(L=!1),b===void 0&&(b=!0);var I=this.fboStack;I.pop();var N=I[I.length-1];return N||(N=null),this.setFramebuffer(N,L,b),N},restoreFramebuffer:function(L,b){L===void 0&&(L=!1),b===void 0&&(b=!0);var I=this.fboStack,N=I[I.length-1];N||(N=null),this.currentFramebuffer=null,this.setFramebuffer(N,L,b)},setProgram:function(L){return L!==this.currentProgram?(this.flush(),this.gl.useProgram(L.webGLProgram),this.currentProgram=L,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(L,b,I,N,Z){Z===void 0&&(Z=!1);var U=this.gl,W=U.NEAREST,X=U.NEAREST,V=U.CLAMP_TO_EDGE,O=null;b=L?L.width:b,I=L?L.height:I;var z=u(b,I);if(z&&!Z&&(V=U.REPEAT),N===r.ScaleModes.LINEAR&&this.config.antialias){var B=L&&L.compressed,Y=!B&&z||B&&L.mipmaps.length>1;W=this.mipmapFilter&&Y?this.mipmapFilter:U.LINEAR,X=U.LINEAR}return!L&&typeof b=="number"&&typeof I=="number"?O=this.createTexture2D(0,W,X,V,V,U.RGBA,null,b,I):O=this.createTexture2D(0,W,X,V,V,U.RGBA,L),O},createTexture2D:function(L,b,I,N,Z,U,W,X,V,O,z,B){typeof X!="number"&&(X=W?W.width:1),typeof V!="number"&&(V=W?W.height:1);var Y=new P(this.gl,L,b,I,N,Z,U,W,X,V,O,z,B);return this.glTextureWrappers.push(Y),Y},createFramebuffer:function(L,b,I,N){this.currentFramebuffer=null;var Z=new A(this.gl,L,b,I,N);return this.glFramebufferWrappers.push(Z),Z},beginBitmapMask:function(L,b){var I=this.gl;I&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==L&&(this.currentMask.mask=L,this.currentMask.camera=b))},drawBitmapMask:function(L,b,I){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),L.renderWebGL(this,L,b),this.maskSource.unbind(!0),this.maskTarget.unbind();var N=this.gl,Z=this.getCurrentStencilMask();Z?(N.enable(N.STENCIL_TEST),Z.mask.applyStencil(this,Z.camera,!0)):this.currentMask.mask=null,this.pipelines.set(I),N.activeTexture(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,this.maskTarget.texture.webGLTexture),N.activeTexture(N.TEXTURE1),N.bindTexture(N.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(L,b){var I=new E(this.gl,L,b);return this.glProgramWrappers.push(I),I},createVertexBuffer:function(L,b){var I=this.gl,N=new C(I,L,I.ARRAY_BUFFER,b);return this.glBufferWrappers.push(N),N},createAttribLocation:function(L,b){var I=new F(this.gl,L,b);return this.glAttribLocationWrappers.push(I),I},createUniformLocation:function(L,b){var I=new G(this.gl,L,b);return this.glUniformLocationWrappers.push(I),I},createIndexBuffer:function(L,b){var I=this.gl,N=new C(I,L,I.ELEMENT_ARRAY_BUFFER,b);return this.glBufferWrappers.push(N),N},deleteTexture:function(L){if(L)return g(this.glTextureWrappers,L),L.destroy(),this},deleteFramebuffer:function(L){return L?(g(this.fboStack,L),g(this.glFramebufferWrappers,L),L.destroy(),this):this},deleteProgram:function(L){return L&&(g(this.glProgramWrappers,L),L.destroy()),this},deleteAttribLocation:function(L){return L&&(g(this.glAttribLocationWrappers,L),L.destroy()),this},deleteUniformLocation:function(L){return L&&(g(this.glUniformLocationWrappers,L),L.destroy()),this},deleteBuffer:function(L){return L?(g(this.glBufferWrappers,L),L.destroy(),this):this},preRenderCamera:function(L){var b=L.x,I=L.y,N=L.width,Z=L.height,U=L.backgroundColor;if(L.emit(o.PRE_RENDER,L),this.pipelines.preBatchCamera(L),this.pushScissor(b,I,N,Z),L.mask&&(this.currentCameraMask.mask=L.mask,this.currentCameraMask.camera=L._maskCamera,L.mask.preRenderWebGL(this,L,L._maskCamera)),U.alphaGL>0){var W=this.pipelines.setMulti();W.drawFillRect(b,I,N,Z,y.getTintFromFloats(U.blueGL,U.greenGL,U.redGL,1),U.alphaGL)}},getCurrentStencilMask:function(){var L=null,b=this.maskStack,I=this.currentCameraMask;return b.length>0?L=b[b.length-1]:I.mask&&I.mask.isStencil&&(L=I),L},postRenderCamera:function(L){var b=L.flashEffect,I=L.fadeEffect;if(b.isRunning||I.isRunning||I.isComplete){var N=this.pipelines.setMulti();b.postRenderWebGL(N,y.getTintFromFloats),I.postRenderWebGL(N,y.getTintFromFloats)}L.dirty=!1,this.popScissor(),L.mask&&(this.currentCameraMask.mask=null,L.mask.postRenderWebGL(this,L._maskCamera)),this.pipelines.postBatchCamera(L),L.emit(o.POST_RENDER,L)},preRender:function(){if(!this.contextLost){var L=this.gl;if(L.bindFramebuffer(L.FRAMEBUFFER,null),this.emit(s.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var b=this.config.backgroundColor;L.clearColor(b.redGL,b.greenGL,b.blueGL,b.alphaGL),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)}L.enable(L.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&L.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(s.PRE_RENDER)}},render:function(L,b,I){if(!this.contextLost){var N=b.length;if(this.emit(s.RENDER,L,I),this.preRenderCamera(I),N===0){this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(I);return}this.currentType="";for(var Z=this.currentMask,U=0;U<N;U++){this.finalType=U===N-1;var W=b[U],X=W.mask;Z=this.currentMask,Z.mask&&Z.mask!==X&&Z.mask.postRenderWebGL(this,Z.camera),X&&Z.mask!==X&&X.preRenderWebGL(this,W,I),W.blendMode!==this.currentBlendMode&&this.setBlendMode(W.blendMode);var V=W.type;V!==this.currentType&&(this.newType=!0,this.currentType=V),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=b[U+1].type===this.currentType,W.renderWebGL(this,W,I),this.newType=!1}Z=this.currentMask,Z.mask&&Z.mask.postRenderWebGL(this,Z.camera),this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(I)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(s.POST_RENDER);var L=this.snapshotState;L.callback&&(S(this.gl,L),L.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var L=this.gl,b=this.getCurrentStencilMask();if(b){var I=b.mask;L.enable(L.STENCIL_TEST),I.invertAlpha?L.stencilFunc(L.NOTEQUAL,I.level,255):L.stencilFunc(L.EQUAL,I.level,255)}},snapshot:function(L,b,I){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,L,b,I)},snapshotArea:function(L,b,I,N,Z,U,W){var X=this.snapshotState;return X.callback=Z,X.type=U,X.encoder=W,X.getPixel=!1,X.x=L,X.y=b,X.width=I,X.height=N,this},snapshotPixel:function(L,b,I){return this.snapshotArea(L,b,1,1,I),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(L,b,I,N,Z,U,W,X,V,O,z){Z===void 0&&(Z=!1),U===void 0&&(U=0),W===void 0&&(W=0),X===void 0&&(X=b),V===void 0&&(V=I),O==="pixel"&&(Z=!0,O="image/png");var B=this.currentFramebuffer;this.snapshotArea(U,W,X,V,N,O,z);var Y=this.snapshotState;return Y.getPixel=Z,Y.isFramebuffer=!0,Y.bufferWidth=b,Y.bufferHeight=I,Y.width=Math.min(Y.width,b),Y.height=Math.min(Y.height,I),this.setFramebuffer(L),S(this.gl,Y),this.setFramebuffer(B),Y.callback=null,Y.isFramebuffer=!1,this},canvasToTexture:function(L,b,I,N){I===void 0&&(I=!1),N===void 0&&(N=!1);var Z=this.gl,U=Z.NEAREST,W=Z.NEAREST,X=L.width,V=L.height,O=Z.CLAMP_TO_EDGE,z=u(X,V);return!I&&z&&(O=Z.REPEAT),this.config.antialias&&(U=z&&this.mipmapFilter?this.mipmapFilter:Z.LINEAR,W=Z.LINEAR),b?(b.update(L,X,V,N,O,O,U,W,b.format),b):this.createTexture2D(0,U,W,O,O,Z.RGBA,L,X,V,!0,!1,N)},createCanvasTexture:function(L,b,I){return b===void 0&&(b=!1),I===void 0&&(I=!1),this.canvasToTexture(L,null,b,I)},updateCanvasTexture:function(L,b,I,N){return I===void 0&&(I=!1),N===void 0&&(N=!1),this.canvasToTexture(L,b,N,I)},videoToTexture:function(L,b,I,N){I===void 0&&(I=!1),N===void 0&&(N=!1);var Z=this.gl,U=Z.NEAREST,W=Z.NEAREST,X=L.videoWidth,V=L.videoHeight,O=Z.CLAMP_TO_EDGE,z=u(X,V);return!I&&z&&(O=Z.REPEAT),this.config.antialias&&(U=z&&this.mipmapFilter?this.mipmapFilter:Z.LINEAR,W=Z.LINEAR),b?(b.update(L,X,V,N,O,O,U,W,b.format),b):this.createTexture2D(0,U,W,O,O,Z.RGBA,L,X,V,!0,!0,N)},createVideoTexture:function(L,b,I){return b===void 0&&(b=!1),I===void 0&&(I=!1),this.videoToTexture(L,null,b,I)},updateVideoTexture:function(L,b,I,N){return I===void 0&&(I=!1),N===void 0&&(N=!1),this.videoToTexture(L,b,N,I)},createUint8ArrayTexture:function(L,b,I){var N=this.gl,Z=N.NEAREST,U=N.NEAREST,W=N.CLAMP_TO_EDGE,X=u(b,I);return X&&(W=N.REPEAT),this.createTexture2D(0,Z,U,W,W,N.RGBA,L,b,I)},setTextureFilter:function(L,b){var I=this.gl,N=b===0?I.LINEAR:I.NEAREST;I.activeTexture(I.TEXTURE0);var Z=I.getParameter(I.TEXTURE_BINDING_2D);return I.bindTexture(I.TEXTURE_2D,L.webGLTexture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,N),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,N),L.minFilter=N,L.magFilter=N,Z&&I.bindTexture(I.TEXTURE_2D,Z),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var L=function(b){b.destroy()};h(this.glAttribLocationWrappers,L),h(this.glBufferWrappers,L),h(this.glFramebufferWrappers,L),h(this.glProgramWrappers,L),h(this.glTextureWrappers,L),h(this.glUniformLocationWrappers,L),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});v.exports=D}),38683:((v,T,t)=>{var h=t(83419),g=t(95428),o=t(95540),a=t(14500),r=new h({initialize:function(s,u,n,l,c){this.pipeline=s,this.name=u,this.renderer=s.renderer,this.gl=this.renderer.gl,this.fragSrc=l,this.vertSrc=n,this.program=this.renderer.createProgram(n,l),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(c),this.createUniforms()},createAttributes:function(e){var s=0,u=0,n=[];this.vertexComponentCount=0;for(var l=0;l<e.length;l++){var c=e[l],d=c.name,f=o(c,"size",1),m=o(c,"type",a.FLOAT),y=m.enum,S=m.size,C=!!c.normalized;n.push({name:d,size:f,type:y,normalized:C,offset:u,enabled:!1,location:-1}),S===4?s+=f:s++,u+=f*S}this.vertexSize=u,this.vertexComponentCount=s,this.attributes=n},bind:function(e,s){return e===void 0&&(e=!1),s===void 0&&(s=!1),s&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){e===void 0&&(e=!1);for(var s=this.gl,u=this.renderer,n=this.vertexSize,l=this.attributes,c=this.program,d=0;d<l.length;d++){var f=l[d],m=f.size,y=f.type,S=f.offset,C=f.enabled,E=f.location,P=!!f.normalized;if(e){E!==-1&&u.deleteAttribLocation(E);var A=this.renderer.createAttribLocation(c,f.name);A.webGLAttribLocation>=0?(s.enableVertexAttribArray(A.webGLAttribLocation),s.vertexAttribPointer(A.webGLAttribLocation,m,y,P,n,S),f.enabled=!0,f.location=A):A.webGLAttribLocation!==-1&&s.disableVertexAttribArray(A.webGLAttribLocation)}else C?s.vertexAttribPointer(E.webGLAttribLocation,m,y,P,n,S):!C&&E!==-1&&E.webGLAttribLocation>-1&&(s.disableVertexAttribArray(E.webGLAttribLocation),f.location=-1)}return this},createUniforms:function(){var e=this.gl,s=this.program,u=this.uniforms,n,l,c,d=e.getProgramParameter(s.webGLProgram,e.ACTIVE_UNIFORMS);for(n=0;n<d;n++){var f=e.getActiveUniform(s.webGLProgram,n);if(f){l=f.name,c=this.renderer.createUniformLocation(s,l),c!==null&&(u[l]={name:l,location:c,setter:null,value1:null,value2:null,value3:null,value4:null});var m=l.indexOf("[");m>0&&(l=l.substr(0,m),u.hasOwnProperty(l)||(c=this.renderer.createUniformLocation(s,l),c!==null&&(u[l]={name:l,location:c,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var e=this.gl;this.renderer.setProgram(this.program);for(var s in this.uniforms){var u=this.uniforms[s];u.setter&&u.setter.call(e,u.location.webGLUniformLocation,u.value1,u.value2,u.value3,u.value4)}},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var s=this.uniforms[e];return s&&(s.value1=null,s.value2=null,s.value3=null,s.value4=null),this},setUniform1:function(e,s,u,n){var l=this.uniforms[s];return l?((n||l.value1!==u)&&(l.setter||(l.setter=e),l.value1=u,this.renderer.setProgram(this.program),e.call(this.gl,l.location.webGLUniformLocation,u),this.pipeline.currentShader=this),this):this},setUniform2:function(e,s,u,n,l){var c=this.uniforms[s];return c?((l||c.value1!==u||c.value2!==n)&&(c.setter||(c.setter=e),c.value1=u,c.value2=n,this.renderer.setProgram(this.program),e.call(this.gl,c.location.webGLUniformLocation,u,n),this.pipeline.currentShader=this),this):this},setUniform3:function(e,s,u,n,l,c){var d=this.uniforms[s];return d?((c||d.value1!==u||d.value2!==n||d.value3!==l)&&(d.setter||(d.setter=e),d.value1=u,d.value2=n,d.value3=l,this.renderer.setProgram(this.program),e.call(this.gl,d.location.webGLUniformLocation,u,n,l),this.pipeline.currentShader=this),this):this},setUniform4:function(e,s,u,n,l,c,d){var f=this.uniforms[s];return f?((d||f.value1!==u||f.value2!==n||f.value3!==l||f.value4!==c)&&(f.setter||(f.setter=e),f.value1=u,f.value2=n,f.value3=l,f.value4=c,this.renderer.setProgram(this.program),e.call(this.gl,f.location.webGLUniformLocation,u,n,l,c),this.pipeline.currentShader=this),this):this},setBoolean:function(e,s){return this.setUniform1(this.gl.uniform1i,e,Number(s))},set1f:function(e,s){return this.setUniform1(this.gl.uniform1f,e,s)},set2f:function(e,s,u){return this.setUniform2(this.gl.uniform2f,e,s,u)},set3f:function(e,s,u,n){return this.setUniform3(this.gl.uniform3f,e,s,u,n)},set4f:function(e,s,u,n,l){return this.setUniform4(this.gl.uniform4f,e,s,u,n,l)},set1fv:function(e,s){return this.setUniform1(this.gl.uniform1fv,e,s,!0)},set2fv:function(e,s){return this.setUniform1(this.gl.uniform2fv,e,s,!0)},set3fv:function(e,s){return this.setUniform1(this.gl.uniform3fv,e,s,!0)},set4fv:function(e,s){return this.setUniform1(this.gl.uniform4fv,e,s,!0)},set1iv:function(e,s){return this.setUniform1(this.gl.uniform1iv,e,s,!0)},set2iv:function(e,s){return this.setUniform1(this.gl.uniform2iv,e,s,!0)},set3iv:function(e,s){return this.setUniform1(this.gl.uniform3iv,e,s,!0)},set4iv:function(e,s){return this.setUniform1(this.gl.uniform4iv,e,s,!0)},set1i:function(e,s){return this.setUniform1(this.gl.uniform1i,e,s)},set2i:function(e,s,u){return this.setUniform2(this.gl.uniform2i,e,s,u)},set3i:function(e,s,u,n){return this.setUniform3(this.gl.uniform3i,e,s,u,n)},set4i:function(e,s,u,n,l){return this.setUniform4(this.gl.uniform4i,e,s,u,n,l)},setMatrix2fv:function(e,s,u){return this.setUniform2(this.gl.uniformMatrix2fv,e,s,u,!0)},setMatrix3fv:function(e,s,u){return this.setUniform2(this.gl.uniformMatrix3fv,e,s,u,!0)},setMatrix4fv:function(e,s,u){return this.setUniform2(this.gl.uniformMatrix4fv,e,s,u,!0)},createProgram:function(e,s){return e===void 0&&(e=this.vertSrc),s===void 0&&(s=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=e,this.fragSrc=s,this.program=this.renderer.createProgram(e,s),this.createUniforms(),this.rebind()},destroy:function(){var e=this.renderer;g(this.uniforms,function(s){e.deleteUniformLocation(s.location)}),this.uniforms=null,g(this.attributes,function(s){e.deleteAttribLocation(s.location)}),this.attributes=null,e.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});v.exports=r}),14500:(v=>{var T={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};v.exports=T}),4159:((v,T,t)=>{var h=t(14500),g=t(79291),o={PipelineManager:t(7530),Pipelines:t(96615),RenderTarget:t(32302),Utils:t(70554),WebGLPipeline:t(29100),WebGLRenderer:t(74797),WebGLShader:t(38683),Wrappers:t(9503)};o=g(!1,o,h),v.exports=o}),31302:((v,T,t)=>{var h=t(83419),g=t(95540),o=t(78908),a=t(85191),r=t(14500),e=t(29100),s=new h({Extends:e,initialize:function(n){n.fragShader=g(n,"fragShader",o),n.vertShader=g(n,"vertShader",a),n.batchSize=g(n,"batchSize",1),n.vertices=g(n,"vertices",[-1,1,-1,-7,7,1]),n.attributes=g(n,"attributes",[{name:"inPosition",size:2,type:r.FLOAT}]),e.call(this,n)},boot:function(){e.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(u,n){e.prototype.resize.call(this,u,n),this.set2f("uResolution",u,n)},beginMask:function(u,n,l){this.renderer.beginBitmapMask(u,l)},endMask:function(u,n,l){var c=this.gl,d=this.renderer,f=u.bitmapMask;f&&c&&(d.drawBitmapMask(f,n,this),l&&this.set2f("uResolution",l.width,l.height),this.set1i("uInvertMaskAlpha",u.invertAlpha),c.drawArrays(this.topology,0,3),l&&this.set2f("uResolution",this.width,this.height),c.bindTexture(c.TEXTURE_2D,null))}});v.exports=s}),92651:((v,T,t)=>{var h=t(83419),g=t(58918),o=t(14811),a=t(95540),r=t(43558),e=t(89350),s=t(70554),u=new h({Extends:r,initialize:function(l){l.shaders=[s.setGlowQuality(e.FXGlowFrag,l.game),e.FXShadowFrag,e.FXPixelateFrag,e.FXVignetteFrag,e.FXShineFrag,e.FXBlurLowFrag,e.FXBlurMedFrag,e.FXBlurHighFrag,e.FXGradientFrag,e.FXBloomFrag,e.ColorMatrixFrag,e.FXCircleFrag,e.FXBarrelFrag,e.FXDisplacementFrag,e.FXWipeFrag,e.FXBokehFrag],r.call(this,l);var c=this.game;this.glow=new g.Glow(c),this.shadow=new g.Shadow(c),this.pixelate=new g.Pixelate(c),this.vignette=new g.Vignette(c),this.shine=new g.Shine(c),this.gradient=new g.Gradient(c),this.circle=new g.Circle(c),this.barrel=new g.Barrel(c),this.wipe=new g.Wipe(c),this.bokeh=new g.Bokeh(c);var d=[];d[o.GLOW]=this.onGlow,d[o.SHADOW]=this.onShadow,d[o.PIXELATE]=this.onPixelate,d[o.VIGNETTE]=this.onVignette,d[o.SHINE]=this.onShine,d[o.BLUR]=this.onBlur,d[o.GRADIENT]=this.onGradient,d[o.BLOOM]=this.onBloom,d[o.COLOR_MATRIX]=this.onColorMatrix,d[o.CIRCLE]=this.onCircle,d[o.BARREL]=this.onBarrel,d[o.DISPLACEMENT]=this.onDisplacement,d[o.WIPE]=this.onWipe,d[o.BOKEH]=this.onBokeh,this.fxHandlers=d,this.source,this.target,this.swap},onDraw:function(n,l,c){this.source=n,this.target=l,this.swap=c;var d=n.width,f=n.height,m=this.tempSprite,y=this.fxHandlers;if(m&&m.preFX)for(var S=m.preFX.list,C=0;C<S.length;C++){var E=S[C];E.active&&y[E.type].call(this,E,d,f)}this.drawToGame(this.source)},runDraw:function(){var n=this.source,l=this.target;this.copy(n,l),this.source=l,this.target=n},onGlow:function(n,l,c){var d=this.shaders[o.GLOW];this.setShader(d),this.glow.onPreRender(n,d,l,c),this.runDraw()},onShadow:function(n){var l=this.shaders[o.SHADOW];this.setShader(l),this.shadow.onPreRender(n,l),this.runDraw()},onPixelate:function(n,l,c){var d=this.shaders[o.PIXELATE];this.setShader(d),this.pixelate.onPreRender(n,d,l,c),this.runDraw()},onVignette:function(n){var l=this.shaders[o.VIGNETTE];this.setShader(l),this.vignette.onPreRender(n,l),this.runDraw()},onShine:function(n,l,c){var d=this.shaders[o.SHINE];this.setShader(d),this.shine.onPreRender(n,d,l,c),this.runDraw()},onBlur:function(n,l,c){var d=a(n,"quality"),f=this.shaders[o.BLUR+d];this.setShader(f),this.set1i("uMainSampler",0),this.set2f("resolution",l,c),this.set1f("strength",a(n,"strength")),this.set3fv("color",a(n,"glcolor"));for(var m=a(n,"x"),y=a(n,"y"),S=a(n,"steps"),C=0;C<S;C++)this.set2f("offset",m,0),this.runDraw(),this.set2f("offset",0,y),this.runDraw()},onGradient:function(n){var l=this.shaders[o.GRADIENT];this.setShader(l),this.gradient.onPreRender(n,l),this.runDraw()},onBloom:function(n,l,c){var d=this.shaders[o.BLOOM];this.copySprite(this.source,this.swap),this.setShader(d),this.set1i("uMainSampler",0),this.set1f("strength",a(n,"blurStrength")),this.set3fv("color",a(n,"glcolor"));for(var f=2/l*a(n,"offsetX"),m=2/c*a(n,"offsetY"),y=a(n,"steps"),S=0;S<y;S++)this.set2f("offset",f,0),this.runDraw(),this.set2f("offset",0,m),this.runDraw();this.blendFrames(this.swap,this.source,this.target,a(n,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(n){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",n.getData()),this.set1f("uAlpha",n.alpha),this.runDraw()},onCircle:function(n,l,c){var d=this.shaders[o.CIRCLE];this.setShader(d),this.circle.onPreRender(n,d,l,c),this.runDraw()},onBarrel:function(n){var l=this.shaders[o.BARREL];this.setShader(l),this.barrel.onPreRender(n,l),this.runDraw()},onDisplacement:function(n){this.setShader(this.shaders[o.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.runDraw()},onWipe:function(n){var l=this.shaders[o.WIPE];this.setShader(l),this.wipe.onPreRender(n,l),this.runDraw()},onBokeh:function(n,l,c){var d=this.shaders[o.BOKEH];this.setShader(d),this.bokeh.onPreRender(n,d,l,c),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,r.prototype.destroy.call(this),this}});v.exports=u}),96569:((v,T,t)=>{var h=t(83419),g=t(95540),o=t(31063),a=t(57516),r=t(61340),e=t(26099),s=t(29100),u=new h({Extends:a,initialize:function(l){var c=g(l,"fragShader",o);l.fragShader=c.replace("%LIGHT_COUNT%",l.game.renderer.config.maxLights),a.call(this,l),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new e,this._tempMatrix=new r,this._tempMatrix2=new r},boot:function(){s.prototype.boot.call(this)},onRender:function(n,l){var c=n.sys.lights;if(this.lightsActive=!1,!(!c||!c.active)){var d=c.getLights(l),f=d.length;this.lightsActive=!0;var m,y=this.renderer,S=y.height,C=l.matrix,E=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",l.x,l.y,l.rotation,l.zoom),this.set3f("uAmbientLightColor",c.ambientColor.r,c.ambientColor.g,c.ambientColor.b),this.set1i("uLightCount",f),m=0;m<f;m++){var P=d[m].light,A=P.color,F="uLights["+m+"].";C.transformPoint(P.x,P.y,E),this.set2f(F+"position",E.x-l.scrollX*P.scrollFactorX*l.zoom,S-(E.y-l.scrollY*P.scrollFactorY*l.zoom)),this.set3f(F+"color",A.r,A.g,A.b),this.set1f(F+"intensity",P.intensity),this.set1f(F+"radius",P.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(n){if(n!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var l=this.inverseRotationMatrix;if(n){var c=-n,d=Math.cos(c),f=Math.sin(c);l[1]=f,l[3]=-f,l[0]=l[4]=d}else l[0]=l[4]=1,l[1]=l[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,l),this.currentNormalMapRotation=n}},setTexture2D:function(n,l){var c=this.renderer;n===void 0&&(n=c.whiteTexture);var d=this.getNormalMap(l);this.isNewNormalMap(n,d)&&(this.flush(),this.createBatch(n),this.addTextureToBatch(d),this.currentNormalMap=d);var f=0;if(l&&l.parentContainer){var m=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);f=m.rotationNormalized}else l&&(f=l.rotation);return this.currentBatch===null&&(this.createBatch(n),this.addTextureToBatch(d)),this.setNormalMapRotation(f),0},setGameObject:function(n,l){l===void 0&&(l=n.frame);var c=l.glTexture,d=this.getNormalMap(n);if(this.isNewNormalMap(c,d)&&(this.flush(),this.createBatch(c),this.addTextureToBatch(d),this.currentNormalMap=d),n.parentContainer){var f=n.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(f.rotationNormalized)}else this.setNormalMapRotation(n.rotation);return this.currentBatch===null&&(this.createBatch(c),this.addTextureToBatch(d)),0},isNewNormalMap:function(n,l){return this.currentTexture!==n||this.currentNormalMap!==l},getNormalMap:function(n){var l;if(n)n.displayTexture?l=n.displayTexture.dataSource[n.displayFrame.sourceIndex]:n.texture?l=n.texture.dataSource[n.frame.sourceIndex]:n.tileset&&(Array.isArray(n.tileset)?l=n.tileset[0].image.dataSource[0]:l=n.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return l?l.glTexture:this.renderer.normalTexture},batchSprite:function(n,l,c){this.lightsActive&&a.prototype.batchSprite.call(this,n,l,c)},batchTexture:function(n,l,c,d,f,m,y,S,C,E,P,A,F,G,D,L,b,I,N,Z,U,W,X,V,O,z,B,Y,k,J,j,tt){this.lightsActive&&a.prototype.batchTexture.call(this,n,l,c,d,f,m,y,S,C,E,P,A,F,G,D,L,b,I,N,Z,U,W,X,V,O,z,B,Y,k,J,j,tt)},batchTextureFrame:function(n,l,c,d,f,m,y){this.lightsActive&&a.prototype.batchTextureFrame.call(this,n,l,c,d,f,m,y)}});v.exports=u}),56527:((v,T,t)=>{var h=t(83419),g=t(95540),o=t(57516),a=t(45561),r=t(60722),e=t(14500),s=t(29100),u=new h({Extends:o,initialize:function(l){l.fragShader=g(l,"fragShader",a),l.vertShader=g(l,"vertShader",r),l.attributes=g(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),l.forceZero=!0,l.resizeUniform="uResolution",o.call(this,l)},boot:function(){s.prototype.boot.call(this);var n=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",n.width,n.height)}});v.exports=u}),57516:((v,T,t)=>{var h=t(83419),g=t(94811),o=t(95540),a=t(98840),r=t(44667),e=t(61340),s=t(70554),u=t(14500),n=t(29100),l=new h({Extends:n,initialize:function(d){var f=d.game.renderer,m=o(d,"fragShader",a);d.fragShader=s.parseFragmentShaderMaxTextures(m,f.maxTextures),d.vertShader=o(d,"vertShader",r),d.attributes=o(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),d.resizeUniform="uResolution",n.call(this,d),this._tempMatrix1=new e,this._tempMatrix2=new e,this._tempMatrix3=new e,this.calcMatrix=new e,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){n.prototype.boot.call(this);var c=this.renderer;this.set1iv("uMainSampler",c.textureIndexes),this.set2f("uResolution",c.width,c.height)},batchSprite:function(c,d,f){this.manager.set(this,c);var m=this._tempMatrix1,y=this._tempMatrix2,S=this._tempMatrix3,C=c.frame,E=C.glTexture,P=C.u0,A=C.v0,F=C.u1,G=C.v1,D=C.x,L=C.y,b=C.cutWidth,I=C.cutHeight,N=C.customPivot,Z=c.displayOriginX,U=c.displayOriginY,W=-Z+D,X=-U+L;if(c.isCropped){var V=c._crop;(V.flipX!==c.flipX||V.flipY!==c.flipY)&&C.updateCropUVs(V,c.flipX,c.flipY),P=V.u0,A=V.v0,F=V.u1,G=V.v1,b=V.width,I=V.height,D=V.x,L=V.y,W=-Z+D,X=-U+L}var O=1,z=1;c.flipX&&(N||(W+=-C.realWidth+Z*2),O=-1),c.flipY&&(N||(X+=-C.realHeight+U*2),z=-1);var B=c.x,Y=c.y;d.roundPixels&&(B=Math.floor(B),Y=Math.floor(Y)),y.applyITRS(B,Y,c.rotation,c.scaleX*O,c.scaleY*z),m.copyFrom(d.matrix),f?(m.multiplyWithOffset(f,-d.scrollX*c.scrollFactorX,-d.scrollY*c.scrollFactorY),y.e=B,y.f=Y):(y.e-=d.scrollX*c.scrollFactorX,y.f-=d.scrollY*c.scrollFactorY),m.multiply(y,S);var k=S.setQuad(W,X,W+b,X+I,d.renderRoundPixels),J=s.getTintAppendFloatAlpha,j=d.alpha,tt=J(c.tintTopLeft,j*c._alphaTL),ut=J(c.tintTopRight,j*c._alphaTR),ht=J(c.tintBottomLeft,j*c._alphaBL),st=J(c.tintBottomRight,j*c._alphaBR);this.shouldFlush(6)&&this.flush();var dt=this.setGameObject(c,C);this.manager.preBatch(c),this.batchQuad(c,k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],P,A,F,G,tt,ut,ht,st,c.tintFill,E,dt),this.manager.postBatch(c)},batchTexture:function(c,d,f,m,y,S,C,E,P,A,F,G,D,L,b,I,N,Z,U,W,X,V,O,z,B,Y,k,J,j,tt,ut,ht,st){st===void 0&&(st=!1),this.manager.set(this,c);var dt=this._tempMatrix1,lt=this._tempMatrix2,ft=this._tempMatrix3,Lt=Z/f+k,Nt=U/m+J,Vt=(Z+W)/f+k,pt=(U+X)/m+J,Pt=C,Dt=E,Gt=-I,Ut=-N;if(c.isCropped){var Ot=c._crop,Wt=Ot.width,Zt=Ot.height;Pt=Wt,Dt=Zt,C=Wt,E=Zt,Z=Ot.x,U=Ot.y;var ve=Z,Te=U;G&&(ve=W-Ot.x-Wt),D&&(Te=X-Ot.y-Zt),Lt=ve/f+k,Nt=Te/m+J,Vt=(ve+Wt)/f+k,pt=(Te+Zt)/m+J,Gt=-I+Z,Ut=-N+U}D=D^(!ut&&d.isRenderTexture?1:0),G&&(Pt*=-1,Gt+=C),D&&(Dt*=-1,Ut+=E),j.roundPixels&&(y=Math.floor(y),S=Math.floor(S)),lt.applyITRS(y,S,F,P,A),dt.copyFrom(j.matrix),tt?(dt.multiplyWithOffset(tt,-j.scrollX*L,-j.scrollY*b),lt.e=y,lt.f=S):(lt.e-=j.scrollX*L,lt.f-=j.scrollY*b),dt.multiply(lt,ft);var _t=ft.setQuad(Gt,Ut,Gt+Pt,Ut+Dt,j.renderRoundPixels);ht==null&&(ht=this.setTexture2D(d)),c&&!st&&this.manager.preBatch(c),this.batchQuad(c,_t[0],_t[1],_t[2],_t[3],_t[4],_t[5],_t[6],_t[7],Lt,Nt,Vt,pt,V,O,z,B,Y,d,ht),c&&!st&&this.manager.postBatch(c)},batchTextureFrame:function(c,d,f,m,y,S,C){this.manager.set(this);var E=this._tempMatrix1.copyFrom(S),P=this._tempMatrix2;C?E.multiply(C,P):P=E;var A=P.setQuad(d,f,d+c.width,f+c.height),F=this.setTexture2D(c.source.glTexture);m=s.getTintAppendFloatAlpha(m,y),this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],c.u0,c.v0,c.u1,c.v1,m,m,m,m,0,c.glTexture,F)},batchFillRect:function(c,d,f,m,y,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(y,C);var E=C.setQuad(c,d,c+f,d+m),P=this.fillTint;this.batchQuad(null,E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],0,0,1,1,P.TL,P.TR,P.BL,P.BR,2)},batchFillTriangle:function(c,d,f,m,y,S,C,E){this.renderer.pipelines.set(this);var P=this.calcMatrix;E&&E.multiply(C,P);var A=P.getX(c,d),F=P.getY(c,d),G=P.getX(f,m),D=P.getY(f,m),L=P.getX(y,S),b=P.getY(y,S),I=this.fillTint;this.batchTri(null,A,F,G,D,L,b,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(c,d,f,m,y,S,C,E,P){var A=this.tempTriangle;A[0].x=c,A[0].y=d,A[0].width=C,A[1].x=f,A[1].y=m,A[1].width=C,A[2].x=y,A[2].y=S,A[2].width=C,A[3].x=c,A[3].y=d,A[3].width=C,this.batchStrokePath(A,C,!1,E,P)},batchFillPath:function(c,d,f){this.renderer.pipelines.set(this);var m=this.calcMatrix;f&&f.multiply(d,m);for(var y=c.length,S=this.polygonCache,C,E,P=this.fillTint.TL,A=this.fillTint.TR,F=this.fillTint.BL,G=0;G<y;++G)E=c[G],S.push(E.x,E.y);C=g(S),y=C.length;for(var D=0;D<y;D+=3){var L=C[D+0]*2,b=C[D+1]*2,I=C[D+2]*2,N=S[L+0],Z=S[L+1],U=S[b+0],W=S[b+1],X=S[I+0],V=S[I+1],O=m.getX(N,Z),z=m.getY(N,Z),B=m.getX(U,W),Y=m.getY(U,W),k=m.getX(X,V),J=m.getY(X,V);this.batchTri(null,O,z,B,Y,k,J,0,0,1,1,P,A,F,2)}S.length=0},batchStrokePath:function(c,d,f,m,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var S=c.length-1,C=0;C<S;C++){var E=c[C],P=c[C+1];this.batchLine(E.x,E.y,P.x,P.y,E.width/2,P.width/2,d,C,!f&&C===S-1,m,y)}},batchLine:function(c,d,f,m,y,S,C,E,P,A,F){this.renderer.pipelines.set(this);var G=this.calcMatrix;F&&F.multiply(A,G);var D=f-c,L=m-d,b=Math.sqrt(D*D+L*L);if(b!==0){var I=y*(m-d)/b,N=y*(c-f)/b,Z=S*(m-d)/b,U=S*(c-f)/b,W=f-Z,X=m-U,V=c-I,O=d-N,z=f+Z,B=m+U,Y=c+I,k=d+N,J=G.getX(W,X),j=G.getY(W,X),tt=G.getX(V,O),ut=G.getY(V,O),ht=G.getX(z,B),st=G.getY(z,B),dt=G.getX(Y,k),lt=G.getY(Y,k),ft=this.strokeTint,Lt=ft.TL,Nt=ft.TR,Vt=ft.BL,pt=ft.BR;if(this.batchQuad(null,dt,lt,tt,ut,J,j,ht,st,0,0,1,1,Lt,Nt,Vt,pt,2),!(C<=2)){var Pt=this.prevQuad,Dt=this.firstQuad;E>0&&Pt[4]?this.batchQuad(null,dt,lt,tt,ut,Pt[0],Pt[1],Pt[2],Pt[3],0,0,1,1,Lt,Nt,Vt,pt,2):(Dt[0]=dt,Dt[1]=lt,Dt[2]=tt,Dt[3]=ut,Dt[4]=1),P&&Dt[4]?this.batchQuad(null,J,j,ht,st,Dt[0],Dt[1],Dt[2],Dt[3],0,0,1,1,Lt,Nt,Vt,pt,2):(Pt[0]=J,Pt[1]=j,Pt[2]=ht,Pt[3]=st,Pt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,n.prototype.destroy.call(this),this}});v.exports=l}),43439:((v,T,t)=>{var h=t(83419),g=t(95540),o=t(4127),a=t(89924),r=t(29100),e=new h({Extends:r,initialize:function(u){u.vertShader=g(u,"vertShader",a),u.fragShader=g(u,"fragShader",o),u.attributes=g(u,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),r.call(this,u)},onRender:function(s,u){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",u.zoom)},batchPointLight:function(s,u,n,l,c,d,f,m,y,S,C,E){var P=s.color,A=s.intensity,F=s.radius,G=s.attenuation,D=P.r*A,L=P.g*A,b=P.b*A,I=u.alpha*s.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(n,l,C,E,F,G,D,L,b,I),this.batchLightVert(c,d,C,E,F,G,D,L,b,I),this.batchLightVert(f,m,C,E,F,G,D,L,b,I),this.batchLightVert(n,l,C,E,F,G,D,L,b,I),this.batchLightVert(f,m,C,E,F,G,D,L,b,I),this.batchLightVert(y,S,C,E,F,G,D,L,b,I),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(s,u,n,l,c,d,f,m,y,S){var C=this.vertexViewF32,E=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++E]=s,C[++E]=u,C[++E]=n,C[++E]=l,C[++E]=c,C[++E]=d,C[++E]=f,C[++E]=m,C[++E]=y,C[++E]=S,this.vertexCount++}});v.exports=e}),84057:((v,T,t)=>{var h=t(83419),g=t(89422),o=t(95540),a=t(27681),r=t(49627),e=t(29100),s=new h({Extends:e,initialize:function(n){n.renderTarget=o(n,"renderTarget",1),n.fragShader=o(n,"fragShader",a),n.vertShader=o(n,"vertShader",r),n.attributes=o(n,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),n.batchSize=1,n.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],e.call(this,n),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new g,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){e.prototype.boot.call(this);var u=this.manager.UTILITY_PIPELINE;this.fullFrame1=u.fullFrame1,this.fullFrame2=u.fullFrame2,this.halfFrame1=u.halfFrame1,this.halfFrame2=u.halfFrame2;var n=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",n.width,n.height);for(var l=this.renderTargets,c=0;c<l.length;c++)l[c].autoResize=!0},postBatch:function(u){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(u),this},onDraw:function(u){this.bindAndDraw(u)},getController:function(u){return u!==void 0?u:this.controller?this.controller:this},copySprite:function(u,n,l){l===void 0&&(l=!1);var c=this.gl;c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.texture.webGLTexture);var d=c.getParameter(c.FRAMEBUFFER_BINDING);c.bindFramebuffer(c.FRAMEBUFFER,n.framebuffer.webGLFramebuffer),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,n.texture.webGLTexture,0),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.STATIC_DRAW),c.drawArrays(c.TRIANGLES,0,6),l&&(c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,d))},copyFrame:function(u,n,l,c,d){this.manager.copyFrame(u,n,l,c,d)},copyToGame:function(u){this.manager.copyToGame(u)},drawFrame:function(u,n,l){this.manager.drawFrame(u,n,l,this.colorMatrix)},blendFrames:function(u,n,l,c,d){this.manager.blendFrames(u,n,l,c,d)},blendFramesAdditive:function(u,n,l,c,d){this.manager.blendFramesAdditive(u,n,l,c,d)},clearFrame:function(u,n){this.manager.clearFrame(u,n)},blitFrame:function(u,n,l,c,d,f){this.manager.blitFrame(u,n,l,c,d,f)},copyFrameRect:function(u,n,l,c,d,f,m,y){this.manager.copyFrameRect(u,n,l,c,d,f,m,y)},bindAndDraw:function(u,n,l,c,d){l===void 0&&(l=!0),c===void 0&&(c=!0);var f=this.gl,m=this.renderer;this.bind(d),this.set1i("uMainSampler",0),n?(f.viewport(0,0,n.width,n.height),f.bindFramebuffer(f.FRAMEBUFFER,n.framebuffer.webGLFramebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,n.texture.webGLTexture,0),l&&(c?f.clearColor(0,0,0,0):f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT))):(m.popFramebuffer(!1,!1),m.currentFramebuffer||f.viewport(0,0,m.width,m.height)),m.restoreStencilMask(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,u.texture.webGLTexture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),n&&(f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,m.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),e.prototype.destroy.call(this),this}});v.exports=s}),43558:((v,T,t)=>{var h=t(10312),g=t(67502),o=t(83419),a=t(96293),r=t(95540),e=t(57516),s=t(27681),u=t(87841),n=t(32302),l=t(45561),c=t(60722),d=t(29100),f=new o({Extends:e,initialize:function(y){var S=r(y,"fragShader",s),C=r(y,"vertShader",c),E=r(y,"drawShader",s),P=[{name:"DrawSprite",fragShader:l,vertShader:c},{name:"CopySprite",fragShader:S,vertShader:C},{name:"DrawGame",fragShader:E,vertShader:c},{name:"ColorMatrix",fragShader:a}],A=r(y,"shaders",[]);y.shaders=P.concat(A),y.vertShader||(y.vertShader=C),y.batchSize=1,e.call(this,y),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new u,this.targetBounds=new u,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){d.prototype.boot.call(this);var m=this.shaders,y=this.renderer;this.drawSpriteShader=m[0],this.copyShader=m[1],this.gameShader=m[2],this.colorMatrixShader=m[3],this.fsTarget=new n(y,y.width,y.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var S=new ArrayBuffer(168);this.quadVertexData=S,this.quadVertexViewF32=new Float32Array(S),this.quadVertexBuffer=y.createVertexBuffer(S,this.gl.STATIC_DRAW),this.onResize(y.width,y.height),this.currentShader=this.copyShader,this.set2f("uResolution",y.width,y.height)},onResize:function(m,y){var S=this.quadVertexViewF32;S[1]=y,S[22]=y,S[14]=m,S[28]=m,S[35]=m,S[36]=y},batchQuad:function(m,y,S,C,E,P,A,F,G,D,L,b,I,N,Z,U,W,X,V){var O=Math.min(y,C,P,F),z=Math.min(S,E,A,G),B=Math.max(y,C,P,F),Y=Math.max(S,E,A,G),k=B-O,J=Y-z,j=this.spriteBounds.setTo(O,z,k,J),tt=m?m.preFX.padding:0,ut=k+tt*2,ht=J+tt*2,st=Math.abs(Math.max(ut,ht)),dt=this.manager.getRenderTarget(st),lt=this.targetBounds.setTo(0,0,dt.width,dt.height);g(lt,Math.round(j.centerX),Math.round(j.centerY)),this.tempSprite=m;var ft=this.gl,Lt=this.renderer;Lt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Lt.width,Lt.height),this.flipProjectionMatrix(!0),m&&(this.onDrawSprite(m,dt),m.preFX.onFX(this));var Nt=this.fsTarget;return this.flush(),ft.viewport(0,0,Lt.width,Lt.height),ft.bindFramebuffer(ft.FRAMEBUFFER,Nt.framebuffer.webGLFramebuffer),ft.framebufferTexture2D(ft.FRAMEBUFFER,ft.COLOR_ATTACHMENT0,ft.TEXTURE_2D,Nt.texture.webGLTexture,0),ft.clearColor(0,0,0,0),ft.clear(ft.COLOR_BUFFER_BIT),this.setTexture2D(V),this.batchVert(y,S,D,L,0,X,N),this.batchVert(C,E,D,I,0,X,U),this.batchVert(P,A,b,I,0,X,W),this.batchVert(y,S,D,L,0,X,N),this.batchVert(P,A,b,I,0,X,W),this.batchVert(F,G,b,L,0,X,Z),this.flush(),this.flipProjectionMatrix(!1),ft.activeTexture(ft.TEXTURE0),ft.bindTexture(ft.TEXTURE_2D,dt.texture.webGLTexture),ft.copyTexSubImage2D(ft.TEXTURE_2D,0,0,0,lt.x,lt.y,lt.width,lt.height),ft.bindFramebuffer(ft.FRAMEBUFFER,null),ft.bindTexture(ft.TEXTURE_2D,null),this.onBatch(m),this.currentShader=this.copyShader,this.onDraw(dt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(m,y,S,C,E,P,A){S===void 0&&(S=!0),C===void 0&&(C=!0),E===void 0&&(E=!1),A===void 0&&(A=this.copyShader);var F=this.gl,G=this.tempSprite;P&&(A=this.colorMatrixShader),this.currentShader=A;var D=this.setVertexBuffer(this.quadVertexBuffer);A.bind(D,!1);var L=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",L.width,L.height),G.preFX.onFXCopy(this),this.onCopySprite(m,y,G),P&&(this.set1fv("uColorMatrix",P.getData()),this.set1f("uAlpha",P.alpha)),F.activeTexture(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,m.texture.webGLTexture),m.height>y.height)F.viewport(0,0,m.width,m.height),this.setTargetUVs(m,y);else{var b=y.height-m.height;F.viewport(0,b,m.width,m.height),this.resetUVs()}if(F.bindFramebuffer(F.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,y.texture.webGLTexture,0),S&&(F.clearColor(0,0,0,+!C),F.clear(F.COLOR_BUFFER_BIT)),E){var I=this.renderer.currentBlendMode;this.renderer.setBlendMode(h.ERASE)}F.bufferData(F.ARRAY_BUFFER,this.quadVertexData,F.STATIC_DRAW),F.drawArrays(F.TRIANGLES,0,6),E&&this.renderer.setBlendMode(I),F.bindFramebuffer(F.FRAMEBUFFER,null)},copy:function(m,y){var S=this.gl;this.set1i("uMainSampler",0),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,m.texture.webGLTexture),S.viewport(0,0,m.width,m.height),this.setUVs(0,0,0,1,1,1,1,0),S.bindFramebuffer(S.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,y.texture.webGLTexture,0),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.quadVertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null)},blendFrames:function(m,y,S,C,E){this.manager.blendFrames(m,y,S,C,E)},blendFramesAdditive:function(m,y,S,C,E){this.manager.blendFramesAdditive(m,y,S,C,E)},drawToGame:function(m){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(m)},copyToGame:function(m){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(m)},bindAndDraw:function(m){var y=this.gl,S=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(m.texture);var C=this._tempMatrix1.loadIdentity(),E=this.targetBounds.x,P=this.targetBounds.y,A=E+m.width,F=P+m.height,G=C.getX(E,P),D=C.getX(E,F),L=C.getX(A,F),b=C.getX(A,P),I=C.getY(E,P),N=C.getY(E,F),Z=C.getY(A,F),U=C.getY(A,P),W=16777215;this.batchVert(G,I,0,0,0,0,W),this.batchVert(D,N,0,1,0,0,W),this.batchVert(L,Z,1,1,0,0,W),this.batchVert(G,I,0,0,0,0,W),this.batchVert(L,Z,1,1,0,0,W),this.batchVert(b,U,1,0,0,0,W),S.restoreFramebuffer(!1,!0),S.currentFramebuffer||y.viewport(0,0,S.width,S.height),S.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(m){this.drawToGame(m)},setUVs:function(m,y,S,C,E,P,A,F){var G=this.quadVertexViewF32;G[2]=m,G[3]=y,G[9]=S,G[10]=C,G[16]=E,G[17]=P,G[23]=m,G[24]=y,G[30]=E,G[31]=P,G[37]=A,G[38]=F},setTargetUVs:function(m,y){var S=y.height/m.height;S>.5?S=.5-(S-.5):S=.5+(.5-S),this.setUVs(0,S,0,1+S,1,1+S,1,S)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,e.prototype.destroy.call(this),this}});v.exports=f}),81041:((v,T,t)=>{var h=t(83419),g=t(95540),o=t(57516),a=new h({Extends:o,initialize:function(e){e.topology=5,e.batchSize=g(e,"batchSize",256),o.call(this,e)}});v.exports=a}),12385:((v,T,t)=>{var h=t(83419),g=t(95540),o=t(57516),a=t(45561),r=t(60722),e=t(29100),s=new h({Extends:o,initialize:function(n){n.fragShader=g(n,"fragShader",a),n.vertShader=g(n,"vertShader",r),n.forceZero=!0,o.call(this,n)},boot:function(){e.prototype.boot.call(this);var u=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",u.width,u.height)}});v.exports=s}),7589:((v,T,t)=>{var h=t(35407),g=t(10312),o=t(83419),a=t(89422),r=t(96293),e=t(36682),s=t(95540),u=t(48247),n=t(49627),l=t(29100),c=new o({Extends:l,initialize:function(f){f.renderTarget=s(f,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),f.vertShader=s(f,"vertShader",n),f.shaders=s(f,"shaders",[{name:"Copy",fragShader:e},{name:"AddBlend",fragShader:h},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:r}]),f.attributes=s(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),f.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],f.batchSize=1,l.call(this,f),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){l.prototype.boot.call(this);var d=this.shaders,f=this.renderTargets;this.copyShader=d[0],this.addShader=d[1],this.linearShader=d[2],this.colorMatrixShader=d[3],this.fullFrame1=f[0],this.fullFrame2=f[1],this.halfFrame1=f[2],this.halfFrame2=f[3]},copyFrame:function(d,f,m,y,S){m===void 0&&(m=1),y===void 0&&(y=!0),S===void 0&&(S=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,d.texture.webGLTexture),f?(C.viewport(0,0,f.width,f.height),C.bindFramebuffer(C.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,f.texture.webGLTexture,0)):C.viewport(0,0,d.width,d.height),y&&(S?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(d,f,m,y,S,C,E){m===void 0&&(m=1),y===void 0&&(y=!0),S===void 0&&(S=!0),C===void 0&&(C=!1),E===void 0&&(E=!1);var P=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,d.texture.webGLTexture),d.height>f.height)P.viewport(0,0,d.width,d.height),this.setTargetUVs(d,f);else{var A=f.height-d.height;P.viewport(0,A,d.width,d.height)}if(P.bindFramebuffer(P.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,f.texture.webGLTexture,0),y&&(S?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),C){var F=this.renderer.currentBlendMode;this.renderer.setBlendMode(g.ERASE)}E&&this.flipY(),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),C&&this.renderer.setBlendMode(F),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(d,f,m,y,S,C,E,P){E===void 0&&(E=!0),P===void 0&&(P=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,d.texture.webGLTexture,0),E&&(P?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,f.texture.webGLTexture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,m,y,S,C),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function(d){var f=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.texture.webGLTexture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6)},drawFrame:function(d,f,m,y){m===void 0&&(m=!0),y===void 0&&(y=this.colorMatrix);var S=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,d.texture.webGLTexture),f?(S.viewport(0,0,f.width,f.height),S.bindFramebuffer(S.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,f.texture.webGLTexture,0)):S.viewport(0,0,d.width,d.height),m?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFrames:function(d,f,m,y,S,C){y===void 0&&(y=1),S===void 0&&(S=!0),C===void 0&&(C=this.linearShader);var E=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,d.texture.webGLTexture),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,f.texture.webGLTexture),m?(E.bindFramebuffer(E.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,m.texture.webGLTexture,0),E.viewport(0,0,m.width,m.height)):E.viewport(0,0,d.width,d.height),S?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blendFramesAdditive:function(d,f,m,y,S){this.blendFrames(d,f,m,y,S,this.addShader)},clearFrame:function(d,f){f===void 0&&(f=!0);var m=this.gl;m.viewport(0,0,d.width,d.height),m.bindFramebuffer(m.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),f?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;m.bindFramebuffer(m.FRAMEBUFFER,y.webGLFramebuffer)},setUVs:function(d,f,m,y,S,C,E,P){var A=this.vertexViewF32;A[2]=d,A[3]=f,A[6]=m,A[7]=y,A[10]=S,A[11]=C,A[14]=d,A[15]=f,A[18]=S,A[19]=C,A[22]=E,A[23]=P},setTargetUVs:function(d,f){var m=f.height/d.height;m>.5?m=.5-(m-.5):m=.5+(.5-m),this.setUVs(0,m,0,1+m,1,1+m,1,m)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});v.exports=c}),36060:(v=>{var T={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};v.exports=T}),84817:(v=>{v.exports="pipelineafterflush"}),36712:(v=>{v.exports="pipelinebeforeflush"}),40285:(v=>{v.exports="pipelinebind"}),65918:(v=>{v.exports="pipelineboot"}),92852:(v=>{v.exports="pipelinedestroy"}),56072:(v=>{v.exports="pipelinerebind"}),57566:(v=>{v.exports="pipelineresize"}),77085:((v,T,t)=>{v.exports={AFTER_FLUSH:t(84817),BEFORE_FLUSH:t(36712),BIND:t(40285),BOOT:t(65918),DESTROY:t(92852),REBIND:t(56072),RESIZE:t(57566)}}),54812:((v,T,t)=>{var h=t(83419),g=t(99155),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.amount=1},onPreRender:function(r,e){r=this.getController(r),this.set1f("amount",r.amount,e)}});v.exports=a}),67329:((v,T,t)=>{var h=t(83419),g=t(24400),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(r){r=this.getController(r),this.set1f("strength",r.blurStrength),this.set3fv("color",r.glcolor)},onDraw:function(r){var e=this.getController(),s=this.fullFrame1,u=this.fullFrame2;this.copyFrame(r,u);for(var n=2/r.width*e.offsetX,l=2/r.height*e.offsetY,c=0;c<e.steps;c++)this.set2f("offset",n,0),this.copySprite(r,s),this.set2f("offset",0,l),this.copySprite(s,r);this.blendFrames(u,r,s,e.strength),this.copyToGame(s)}});v.exports=a}),8861:((v,T,t)=>{var h=t(83419),g=t(41514),o=t(51078),a=t(94328),r=t(84057),e=new h({Extends:r,initialize:function(u){r.call(this,{game:u,shaders:[{name:"Gaussian5",fragShader:g},{name:"Gaussian9",fragShader:o},{name:"Gaussian13",fragShader:a}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(s){var u=this.getController(),n=this.gl,l=this.fullFrame1,c=n.getParameter(n.FRAMEBUFFER_BINDING);this.bind(this.shaders[u.quality]),n.activeTexture(n.TEXTURE0),n.viewport(0,0,s.width,s.height),this.set1i("uMainSampler",0),this.set2f("resolution",s.width,s.height),this.set1f("strength",u.strength),this.set3fv("color",u.glcolor);for(var d=0;d<u.steps;d++)this.set2f("offset",u.x,0),this.copySprite(s,l),this.set2f("offset",0,u.y),this.copySprite(l,s);n.bindFramebuffer(n.FRAMEBUFFER,c),n.bindTexture(n.TEXTURE_2D,null),this.copyToGame(s)}});v.exports=e}),51051:((v,T,t)=>{var h=t(83419),g=t(90610),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(r,e,s,u){r=this.getController(r),this.set1f("radius",r.radius,e),this.set1f("amount",r.amount,e),this.set1f("contrast",r.contrast,e),this.set1f("strength",r.strength,e),this.set2f("blur",r.blurX,r.blurY,e),this.setBoolean("isTiltShift",r.isTiltShift,e),s&&u&&this.set2f("resolution",s,u,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});v.exports=a}),89428:((v,T,t)=>{var h=t(83419),g=t(91899),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(r,e,s,u){r=this.getController(r),this.set1f("scale",r.scale,e),this.set1f("feather",r.feather,e),this.set1f("thickness",r.thickness,e),this.set3fv("color",r.glcolor,e),this.set4fv("backgroundColor",r.glcolor2,e),s&&u&&this.set2f("resolution",s,u,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});v.exports=a}),88904:((v,T,t)=>{var h=t(83419),g=t(84057),o=new h({Extends:g,initialize:function(r){g.call(this,{game:r})},onDraw:function(a){var r=this.fullFrame1;this.controller?this.manager.drawFrame(a,r,!0,this.controller):this.drawFrame(a,r),this.copyToGame(r)}});v.exports=o}),63563:((v,T,t)=>{var h=t(83419),g=t(47838),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(r){var e=this.game.textures.getFrame(r);e&&(this.glTexture=e.glTexture)},onDraw:function(r){var e=this.getController(),s=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",e.x,e.y),this.bindTexture(e.glTexture,1),this.copySprite(r,s),this.copyToGame(s)}});v.exports=a}),94045:((v,T,t)=>{var h=t(83419),g=t(95540),o=t(98656),a=t(84057),r=t(70554),e=new h({Extends:a,initialize:function(u,n){var l=g(n,"quality",.1),c=g(n,"distance",10);a.call(this,{game:u,fragShader:r.setGlowQuality(o,u,l,c)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(s,u,n,l){s=this.getController(s),this.set1f("outerStrength",s.outerStrength,u),this.set1f("innerStrength",s.innerStrength,u),this.set4fv("glowColor",s.glcolor,u),this.setBoolean("knockout",s.knockout,u),n&&l&&this.set2f("resolution",n,l,u)},onDraw:function(s){this.set2f("resolution",s.width,s.height),this.bindAndDraw(s)}});v.exports=e}),74088:((v,T,t)=>{var h=t(83419),g=t(70463),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(r,e){r=this.getController(r),this.set1f("alpha",r.alpha,e),this.set1i("size",r.size,e),this.set3fv("color1",r.glcolor1,e),this.set3fv("color2",r.glcolor2,e),this.set2f("positionFrom",r.fromX,r.fromY,e),this.set2f("positionTo",r.toX,r.toY,e)}});v.exports=a}),99636:((v,T,t)=>{var h=t(83419),g=t(50831),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.amount=1},onPreRender:function(r,e,s,u){r=this.getController(r),this.set1f("amount",r.amount,e),s&&u&&this.set2f("resolution",s,u,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});v.exports=a}),34700:((v,T,t)=>{var h=t(83419),g=t(92595),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(r,e){r=this.getController(r);var s=r.samples;this.set1i("samples",s,e),this.set1f("intensity",r.intensity,e),this.set1f("decay",r.decay,e),this.set1f("power",r.power/s,e),this.set2f("lightPosition",r.x,r.y,e),this.set4fv("color",r.glcolor,e)}});v.exports=a}),91157:((v,T,t)=>{var h=t(83419),g=t(72464),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(r,e,s,u){r=this.getController(r),this.setTime("time",e),this.set1f("speed",r.speed,e),this.set1f("lineWidth",r.lineWidth,e),this.set1f("gradient",r.gradient,e),this.setBoolean("reveal",r.reveal,e),s&&u&&this.set2f("resolution",s,u,e)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});v.exports=a}),27797:((v,T,t)=>{var h=t(83419),g=t(39249),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(r,e){r=this.getController(r),this.set1f("radius",r.radius,e),this.set1f("strength",r.strength,e),this.set2f("position",r.x,r.y,e)}});v.exports=a}),67603:((v,T,t)=>{var h=t(83419),g=t(2878),o=t(84057),a=new h({Extends:o,initialize:function(e){o.call(this,{game:e,fragShader:g}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(r,e){r=this.getController(r);var s=r.progress,u=r.wipeWidth,n=r.direction,l=r.axis;this.set4f("config",s,u,n,l,e),this.setBoolean("reveal",r.reveal,e)}});v.exports=a}),58918:((v,T,t)=>{var h={Barrel:t(54812),Bloom:t(67329),Blur:t(8861),Bokeh:t(51051),Circle:t(89428),ColorMatrix:t(88904),Displacement:t(63563),Glow:t(94045),Gradient:t(74088),Pixelate:t(99636),Shadow:t(34700),Shine:t(91157),Vignette:t(27797),Wipe:t(67603)};v.exports=h}),96615:((v,T,t)=>{var h=t(36060),g=t(79291),o={FX:t(58918),BitmapMaskPipeline:t(31302),Events:t(77085),FXPipeline:t(92651),LightPipeline:t(96569),MobilePipeline:t(56527),MultiPipeline:t(57516),PointLightPipeline:t(43439),PostFXPipeline:t(84057),PreFXPipeline:t(43558),RopePipeline:t(81041),SinglePipeline:t(12385),UtilityPipeline:t(7589)};o=g(!1,o,h),v.exports=o}),35407:(v=>{v.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)}),78908:(v=>{v.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)}),85191:(v=>{v.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)}),96293:(v=>{v.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)}),36682:(v=>{v.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)}),99155:(v=>{v.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)}),24400:(v=>{v.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)}),94328:(v=>{v.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),41514:(v=>{v.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),51078:(v=>{v.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),90610:(v=>{v.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)}),91899:(v=>{v.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)}),47838:(v=>{v.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)}),98656:(v=>{v.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)}),70463:(v=>{v.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)}),50831:(v=>{v.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)}),92595:(v=>{v.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)}),72464:(v=>{v.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)}),39249:(v=>{v.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)}),2878:(v=>{v.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)}),31063:(v=>{v.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)}),48247:(v=>{v.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)}),41214:(v=>{v.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)}),39653:(v=>{v.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)}),62143:(v=>{v.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),47940:(v=>{v.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),98840:(v=>{v.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),44667:(v=>{v.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),4127:(v=>{v.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)}),89924:(v=>{v.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)}),27681:(v=>{v.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)}),49627:(v=>{v.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)}),45561:(v=>{v.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),60722:(v=>{v.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),89350:((v,T,t)=>{v.exports={AddBlendFrag:t(35407),BitmapMaskFrag:t(78908),BitmapMaskVert:t(85191),ColorMatrixFrag:t(96293),CopyFrag:t(36682),FXBarrelFrag:t(99155),FXBloomFrag:t(24400),FXBlurHighFrag:t(94328),FXBlurLowFrag:t(41514),FXBlurMedFrag:t(51078),FXBokehFrag:t(90610),FXCircleFrag:t(91899),FXDisplacementFrag:t(47838),FXGlowFrag:t(98656),FXGradientFrag:t(70463),FXPixelateFrag:t(50831),FXShadowFrag:t(92595),FXShineFrag:t(72464),FXVignetteFrag:t(39249),FXWipeFrag:t(2878),LightFrag:t(31063),LinearBlendFrag:t(48247),MeshFrag:t(41214),MeshVert:t(39653),MobileFrag:t(62143),MobileVert:t(47940),MultiFrag:t(98840),MultiVert:t(44667),PointLightFrag:t(4127),PointLightVert:t(89924),PostFXFrag:t(27681),QuadVert:t(49627),SingleFrag:t(45561),SingleVert:t(60722)}}),93567:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){this.webGLAttribLocation=-1,this.gl=a,this.program=r,this.name=e,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var o=this.gl;o.isContextLost()||(this.webGLAttribLocation=o.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});v.exports=g}),26128:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,s){this.webGLBuffer=null,this.gl=a,this.initialDataOrSize=r,this.bufferType=e,this.bufferUsage=s,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var o=this.gl;if(!o.isContextLost()){var a=this.bufferType,r=o.createBuffer();this.webGLBuffer=r,o.bindBuffer(a,this.webGLBuffer),o.bufferData(a,this.initialDataOrSize,this.bufferUsage),o.bindBuffer(a,null)}}},destroy:function(){var o=this.gl;o.isContextLost()||o.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});v.exports=g}),84387:((v,T,t)=>{var h=t(83419),g={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},o=new h({initialize:function(r,e,s,u,n){this.webGLFramebuffer=null,this.gl=r,this.width=e,this.height=s,this.renderTexture=u,this.addDepthStencilBuffer=!!n,this.createResource()},createResource:function(){var a=this.gl;if(!a.isContextLost()){var r=this.renderTexture,e=0,s=a.createFramebuffer();if(this.webGLFramebuffer=s,a.bindFramebuffer(a.FRAMEBUFFER,s),r.isRenderTexture=!0,r.isAlphaPremultiplied=!1,a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,r.webGLTexture,0),e=a.checkFramebufferStatus(a.FRAMEBUFFER),e!==a.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(g[e]||e));if(this.addDepthStencilBuffer){var u=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,u),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,u)}a.bindFramebuffer(a.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var a=this.gl;if(!a.isContextLost()){a.bindFramebuffer(a.FRAMEBUFFER,this.webGLFramebuffer);var r=a.getFramebufferAttachmentParameter(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);r!==null&&(a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),a.deleteTexture(r));var e=a.getFramebufferAttachmentParameter(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);e!==null&&a.deleteRenderbuffer(e),a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});v.exports=o}),1482:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){this.webGLProgram=null,this.gl=a,this.vertexSource=r,this.fragmentSource=e,this.createResource()},createResource:function(){var o=this.gl;if(!o.isContextLost()){var a=o.createProgram(),r=o.createShader(o.VERTEX_SHADER),e=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(r,this.vertexSource),o.shaderSource(e,this.fragmentSource),o.compileShader(r),o.compileShader(e);var s=`Shader failed:
`;if(!o.getShaderParameter(r,o.COMPILE_STATUS))throw new Error("Vertex "+s+o.getShaderInfoLog(r));if(!o.getShaderParameter(e,o.COMPILE_STATUS))throw new Error("Fragment "+s+o.getShaderInfoLog(e));if(o.attachShader(a,r),o.attachShader(a,e),o.linkProgram(a),!o.getProgramParameter(a,o.LINK_STATUS))throw new Error("Link "+s+o.getProgramInfoLog(a));o.useProgram(a),this.webGLProgram=a}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});v.exports=g}),82751:((v,T,t)=>{var h=t(83419),g=t(50030),o=new h({initialize:function(r,e,s,u,n,l,c,d,f,m,y,S,C){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=r,this.mipLevel=e,this.minFilter=s,this.magFilter=u,this.wrapT=n,this.wrapS=l,this.format=c,this.pixels=d,this.width=f,this.height=m,this.pma=y??!0,this.forceSize=!!S,this.flipY=!!C,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var a=this.gl;if(!a.isContextLost()){if(this.pixels instanceof o){this.webGLTexture=this.pixels.webGLTexture;return}var r=a.createTexture();r.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=r,this._processTexture()}},update:function(a,r,e,s,u,n,l,c,d){if(!(r===0||e===0)){this.pixels=a,this.width=r,this.height=e,this.flipY=s,this.wrapS=u,this.wrapT=n,this.minFilter=l,this.magFilter=c,this.format=d;var f=this.gl;f.isContextLost()||this._processTexture()}},_processTexture:function(){var a=this.gl;a.activeTexture(a.TEXTURE0);var r=a.getParameter(a.TEXTURE_BINDING_2D);a.bindTexture(a.TEXTURE_2D,this.webGLTexture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,this.minFilter),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,this.magFilter),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,this.wrapS),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,this.wrapT),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,this.flipY);var e=this.pixels,s=this.mipLevel,u=this.width,n=this.height,l=this.format,c=!1;if(e==null)a.texImage2D(a.TEXTURE_2D,s,l,u,n,0,l,a.UNSIGNED_BYTE,null),c=g(u,n);else if(e.compressed){u=e.width,n=e.height,c=e.generateMipmap;for(var d=0;d<e.mipmaps.length;d++)a.compressedTexImage2D(a.TEXTURE_2D,d,e.internalFormat,e.mipmaps[d].width,e.mipmaps[d].height,0,e.mipmaps[d].data)}else e instanceof Uint8Array?(a.texImage2D(a.TEXTURE_2D,s,l,u,n,0,l,a.UNSIGNED_BYTE,e),c=g(u,n)):(this.forceSize||(u=e.width,n=e.height),a.texImage2D(a.TEXTURE_2D,s,l,l,a.UNSIGNED_BYTE,e),c=g(u,n));c&&a.generateMipmap(a.TEXTURE_2D),r?a.bindTexture(a.TEXTURE_2D,r):a.bindTexture(a.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(a){this.__SPECTOR_Metadata=a,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=a)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof o||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});v.exports=o}),57183:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e){this.webGLUniformLocation=null,this.gl=a,this.program=r,this.name=e,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var o=this.gl;o.isContextLost()||(this.webGLUniformLocation=o.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});v.exports=g}),9503:((v,T,t)=>{var h={WebGLAttribLocationWrapper:t(93567),WebGLBufferWrapper:t(26128),WebGLProgramWrapper:t(1482),WebGLTextureWrapper:t(82751),WebGLFramebufferWrapper:t(84387),WebGLUniformLocationWrapper:t(57183)};v.exports=h}),76531:((v,T,t)=>{var h=t(13560),g=t(83419),o=t(45319),a=t(50792),r=t(97480),e=t(8443),s=t(57811),u=t(74403),n=t(45818),l=t(29747),c=t(87841),d=t(86555),f=t(56583),m=t(26099),y=t(38058),S=new g({Extends:a,initialize:function(E){a.call(this),this.game=E,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new d,this.gameSize=new d,this.baseSize=new d,this.displaySize=new d,this.scaleMode=h.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=h.CENTER.NO_CENTER,this.orientation=h.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(e.BOOT,this.boot,this)},boot:function(){var C=this.game;this.canvas=C.canvas,this.fullscreen=C.device.fullscreen;var E=this.scaleMode;E!==h.SCALE_MODE.RESIZE&&E!==h.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(E),E===h.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),C.events.on(e.PRE_STEP,this.step,this),C.events.once(e.READY,this.refresh,this),C.events.once(e.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(C){this.getParent(C),this.getParentBounds();var E=C.width,P=C.height,A=C.scaleMode,F=C.zoom,G=C.autoRound;if(typeof E=="string")if(E.substr(-1)!=="%")E=parseInt(E,10);else{var D=this.parentSize.width;D===0&&(D=window.innerWidth);var L=parseInt(E,10)/100;E=Math.floor(D*L)}if(typeof P=="string")if(P.substr(-1)!=="%")P=parseInt(P,10);else{var b=this.parentSize.height;b===0&&(b=window.innerHeight);var I=parseInt(P,10)/100;P=Math.floor(b*I)}this.scaleMode=A,this.autoRound=G,this.autoCenter=C.autoCenter,this.resizeInterval=C.resizeInterval,G&&(E=Math.floor(E),P=Math.floor(P)),this.gameSize.setSize(E,P),F===h.ZOOM.MAX_ZOOM&&(F=this.getMaxZoom()),this.zoom=F,F!==1&&(this._resetZoom=!0),this.baseSize.setSize(E,P),G&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),C.minWidth>0&&this.displaySize.setMin(C.minWidth*F,C.minHeight*F),C.maxWidth>0&&this.displaySize.setMax(C.maxWidth*F,C.maxHeight*F),this.displaySize.setSize(E,P),(C.snapWidth>0||C.snapHeight>0)&&this.displaySize.setSnap(C.snapWidth,C.snapHeight),this.orientation=n(E,P)},getParent:function(C){var E=C.parent;if(E!==null){if(this.parent=u(E),this.parentIsWindow=this.parent===document.body,C.expandParent&&C.scaleMode!==h.SCALE_MODE.NONE){var P=this.parent.getBoundingClientRect();(this.parentIsWindow||P.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",P=this.parent.getBoundingClientRect(),!this.parentIsWindow&&P.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}C.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=u(C.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var C=this.parentSize,E=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(E.height=s(!0));var P=E.width,A=E.height;if(C.width!==P||C.height!==A)return C.setSize(P,A),!0;if(this.canvas){var F=this.canvasBounds,G=this.canvas.getBoundingClientRect();if(G.x!==F.x||G.y!==F.y)return!0}return!1},lockOrientation:function(C){var E=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return E?E.call(screen,C):!1},setParentSize:function(C,E){return this.parentSize.setSize(C,E),this.refresh()},setGameSize:function(C,E){var P=this.autoRound;P&&(C=Math.floor(C),E=Math.floor(E));var A=this.width,F=this.height;return this.gameSize.resize(C,E),this.baseSize.resize(C,E),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(C/E),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(A,F)},resize:function(C,E){var P=this.zoom,A=this.autoRound;A&&(C=Math.floor(C),E=Math.floor(E));var F=this.width,G=this.height;this.gameSize.resize(C,E),this.baseSize.resize(C,E),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(C*P,E*P),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var D=this.canvas.style,L=C*P,b=E*P;return A&&(L=Math.floor(L),b=Math.floor(b)),(L!==C||b!==E)&&(D.width=L+"px",D.height=b+"px"),this.refresh(F,G)},setZoom:function(C){return this.zoom=C,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(C,E){return C===void 0&&(C=0),E===void 0&&(E=C),this.displaySize.setSnap(C,E),this.refresh()},refresh:function(C,E){C===void 0&&(C=this.width),E===void 0&&(E=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var P=this.game.domContainer;if(P){this.baseSize.setCSS(P);var A=this.canvas.style,F=P.style;F.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",F.marginLeft=A.marginLeft,F.marginTop=A.marginTop}return this.emit(r.RESIZE,this.gameSize,this.baseSize,this.displaySize,C,E),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var C=n(this.width,this.height);C!==this.orientation&&(this.orientation=C,this.emit(r.ORIENTATION_CHANGE,C))}},updateScale:function(){var C=this.canvas.style,E=this.gameSize.width,P=this.gameSize.height,A,F,G=this.zoom,D=this.autoRound;if(this.scaleMode===h.SCALE_MODE.NONE)this.displaySize.setSize(E*G,P*G),A=this.displaySize.width,F=this.displaySize.height,D&&(A=Math.floor(A),F=Math.floor(F)),this._resetZoom&&(C.width=A+"px",C.height=F+"px",this._resetZoom=!1);else if(this.scaleMode===h.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),A=this.displaySize.width,F=this.displaySize.height,D&&(A=Math.floor(A),F=Math.floor(F)),this.canvas.width=A,this.canvas.height=F;else if(this.scaleMode===h.SCALE_MODE.EXPAND){var L=this.game.config.width,b=this.game.config.height,I=this.parentSize.width,N=this.parentSize.height,Z=I/L,U=N/b,W,X;Z<U?(W=L,X=Z!==0?N/Z:b):(W=U!==0?I/U:L,X=b);var V=o(W,this.displaySize.minWidth,this.displaySize.maxWidth),O=o(X,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(V,O),this.gameSize.setSize(V,O),D&&(V=Math.floor(V),O=Math.floor(O)),this.canvas.width=V,this.canvas.height=O;var z=I*(V/W),B=N*(O/X);this.displaySize.setSize(z,B),A=this.displaySize.width,F=this.displaySize.height,D&&(A=Math.floor(A),F=Math.floor(F)),C.width=A+"px",C.height=F+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,F=this.displaySize.height,D&&(A=Math.floor(A),F=Math.floor(F)),C.width=A+"px",C.height=F+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var C=f(this.parentSize.width,this.gameSize.width,0,!0),E=f(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(C,E),1)},updateCenter:function(){var C=this.autoCenter;if(C!==h.CENTER.NO_CENTER){var E=this.canvas,P=E.style,A=E.getBoundingClientRect(),F=A.width,G=A.height,D=Math.floor((this.parentSize.width-F)/2),L=Math.floor((this.parentSize.height-G)/2);C===h.CENTER.CENTER_HORIZONTALLY?L=0:C===h.CENTER.CENTER_VERTICALLY&&(D=0),P.marginLeft=D+"px",P.marginTop=L+"px"}},updateBounds:function(){var C=this.canvasBounds,E=this.canvas.getBoundingClientRect();C.x=E.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),C.y=E.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),C.width=E.width,C.height=E.height},transformX:function(C){return(C-this.canvasBounds.left)*this.displayScale.x},transformY:function(C){return(C-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(C){C===void 0&&(C={navigationUI:"hide"});var E=this.fullscreen;if(!E.available){this.emit(r.FULLSCREEN_UNSUPPORTED);return}if(!E.active){var P=this.getFullscreenTarget();E.keyboard?P[E.request](Element.ALLOW_KEYBOARD_INPUT):P[E.request](C)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(r.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(C){this.removeFullscreenTarget(),this.emit(r.FULLSCREEN_FAILED,C)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var C=document.createElement("div");C.style.margin="0",C.style.padding="0",C.style.width="100%",C.style.height="100%",this.fullscreenTarget=C,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var E=this.canvas.parentNode;E.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var C=this.fullscreenTarget;if(C&&C.parentNode){var E=C.parentNode;E.insertBefore(this.canvas,C),E.removeChild(C)}}},stopFullscreen:function(){var C=this.fullscreen;if(!C.available)return this.emit(r.FULLSCREEN_UNSUPPORTED),!1;C.active&&document[C.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(r.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(C){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(C)},startListeners:function(){var C=this,E=this.domlisteners;if(E.orientationChange=function(){C.updateBounds(),C._checkOrientation=!0,C.dirty=!0,C.refresh()},E.windowResize=function(){C.updateBounds(),C.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",E.orientationChange,!1):window.addEventListener("orientationchange",E.orientationChange,!1),window.addEventListener("resize",E.windowResize,!1),this.fullscreen.available){E.fullScreenChange=function(A){return C.onFullScreenChange(A)},E.fullScreenError=function(A){return C.onFullScreenError(A)};var P=["webkit","moz",""];P.forEach(function(A){document.addEventListener(A+"fullscreenchange",E.fullScreenChange,!1),document.addEventListener(A+"fullscreenerror",E.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.addEventListener("MSFullscreenError",E.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(C,E){C instanceof y||(E=C,C=void 0),E===void 0&&(E=new c);var P=this.baseSize,A=this.parentSize,F=this.canvasBounds,G=this.displayScale,D=F.x>=0?0:-(F.x*G.x),L=F.y>=0?0:-(F.y*G.y),b;A.width>=F.width?b=P.width:b=P.width-(F.width-A.width)*G.x;var I;return A.height>=F.height?I=P.height:I=P.height-(F.height-A.height)*G.y,E.setTo(D,L,b,I),C&&(E.width/=C.zoomX,E.height/=C.zoomY,E.centerX=C.centerX+C.scrollX,E.centerY=C.centerY+C.scrollY),E},step:function(C,E){this.parent&&(this._lastCheck+=E,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var C=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",C.orientationChange,!1):window.removeEventListener("orientationchange",C.orientationChange,!1),window.removeEventListener("resize",C.windowResize,!1);var E=["webkit","moz",""];E.forEach(function(P){document.removeEventListener(P+"fullscreenchange",C.fullScreenChange,!1),document.removeEventListener(P+"fullscreenerror",C.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",C.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",C.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===h.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===h.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});v.exports=S}),64743:(v=>{v.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}}),39218:(v=>{v.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}}),81050:(v=>{v.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}}),80805:(v=>{v.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}}),13560:((v,T,t)=>{var h={CENTER:t(64743),ORIENTATION:t(39218),SCALE_MODE:t(81050),ZOOM:t(80805)};v.exports=h}),56139:(v=>{v.exports="enterfullscreen"}),2336:(v=>{v.exports="fullscreenfailed"}),47412:(v=>{v.exports="fullscreenunsupported"}),51452:(v=>{v.exports="leavefullscreen"}),20666:(v=>{v.exports="orientationchange"}),47945:(v=>{v.exports="resize"}),97480:((v,T,t)=>{v.exports={ENTER_FULLSCREEN:t(56139),FULLSCREEN_FAILED:t(2336),FULLSCREEN_UNSUPPORTED:t(47412),LEAVE_FULLSCREEN:t(51452),ORIENTATION_CHANGE:t(20666),RESIZE:t(47945)}}),93364:((v,T,t)=>{var h=t(79291),g=t(13560),o={Center:t(64743),Events:t(97480),Orientation:t(39218),ScaleManager:t(76531),ScaleModes:t(81050),Zoom:t(80805)};o=h(!1,o,g.CENTER),o=h(!1,o,g.ORIENTATION),o=h(!1,o,g.SCALE_MODE),o=h(!1,o,g.ZOOM),v.exports=o}),27397:((v,T,t)=>{var h=t(95540),g=t(35355),o=function(a){var r=a.game.config.defaultPhysicsSystem,e=h(a.settings,"physics",!1);if(!(!r&&!e)){var s=[];if(r&&s.push(g(r+"Physics")),e)for(var u in e)u=g(u.concat("Physics")),s.indexOf(u)===-1&&s.push(u);return s}};v.exports=o}),52106:((v,T,t)=>{var h=t(95540),g=function(o){var a=o.plugins.getDefaultScenePlugins(),r=h(o.settings,"plugins",!1);return Array.isArray(r)?r:a||[]};v.exports=g}),87033:(v=>{var T={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};v.exports=T}),97482:((v,T,t)=>{var h=t(83419),g=t(2368),o=new h({initialize:function(r){this.sys=new g(this,r),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});v.exports=o}),60903:((v,T,t)=>{var h=t(83419),g=t(89993),o=t(44594),a=t(8443),r=t(35154),e=t(54899),s=t(29747),u=t(97482),n=t(2368),l=new h({initialize:function(d,f){if(this.game=d,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,f){Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++)this._pending.push({key:"default",scene:f[m],autoStart:m===0,data:{}})}d.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new u),this.game.events.emit(a.SYSTEM_READY,this.systemScene,this);var c,d,f,m;for(c=0;c<this._pending.length;c++){d=this._pending[c],f=d.key,m=d.scene;var y;m instanceof u?y=this.createSceneFromInstance(f,m):typeof m=="object"?y=this.createSceneFromObject(f,m):typeof m=="function"&&(y=this.createSceneFromFunction(f,m)),f=y.sys.settings.key,this.keys[f]=y,this.scenes.push(y),this._data[f]&&(y.sys.settings.data=this._data[f].data,this._data[f].autoStart&&(d.autoStart=!0)),(d.autoStart||y.sys.settings.active)&&this._start.push(f)}for(this._pending.length=0,this._data={},this.isBooted=!0,c=0;c<this._start.length;c++)d=this._start[c],this.start(d);this._start.length=0}},processQueue:function(){var c=this._pending.length,d=this._queue.length;if(!(c===0&&d===0)){var f,m;if(c){for(f=0;f<c;f++)m=this._pending[f],this.add(m.key,m.scene,m.autoStart,m.data);for(f=0;f<this._start.length;f++)m=this._start[f],this.start(m);this._start.length=0,this._pending.length=0}for(f=0;f<this._queue.length;f++)m=this._queue[f],this[m.op](m.keyA,m.keyB,m.data);this._queue.length=0}},add:function(c,d,f,m){if(f===void 0&&(f=!1),m===void 0&&(m={}),this.isProcessing||!this.isBooted)return this._pending.push({key:c,scene:d,autoStart:f,data:m}),this.isBooted||(this._data[c]={data:m}),null;c=this.getKey(c,d);var y;return d instanceof u?y=this.createSceneFromInstance(c,d):typeof d=="object"?(d.key=c,y=this.createSceneFromObject(c,d)):typeof d=="function"&&(y=this.createSceneFromFunction(c,d)),y.sys.settings.data=m,c=y.sys.settings.key,this.keys[c]=y,this.scenes.push(y),(f||y.sys.settings.active)&&(this._pending.length?this._start.push(c):this.start(c)),y},remove:function(c){if(this.isProcessing)return this.queueOp("remove",c);var d=this.getScene(c);if(!d||d.sys.isTransitioning())return this;var f=this.scenes.indexOf(d),m=d.sys.settings.key;return f>-1&&(delete this.keys[m],this.scenes.splice(f,1),this._start.indexOf(m)>-1&&(f=this._start.indexOf(m),this._start.splice(f,1)),d.sys.destroy()),this},bootScene:function(c){var d=c.sys,f=d.settings;d.sceneUpdate=s,c.init&&(c.init.call(c,f.data),f.status=g.INIT,f.isTransition&&d.events.emit(o.TRANSITION_INIT,f.transitionFrom,f.transitionDuration));var m;d.load&&(m=d.load,m.reset()),m&&c.preload?(c.preload.call(c),f.status=g.LOADING,m.once(e.COMPLETE,this.loadComplete,this),m.start()):this.create(c)},loadComplete:function(c){this.create(c.scene)},payloadComplete:function(c){this.bootScene(c.scene)},update:function(c,d){this.processQueue(),this.isProcessing=!0;for(var f=this.scenes.length-1;f>=0;f--){var m=this.scenes[f].sys;m.settings.status>g.START&&m.settings.status<=g.RUNNING&&m.step(c,d),m.scenePlugin&&m.scenePlugin._target&&m.scenePlugin.step(c,d)}},render:function(c){for(var d=0;d<this.scenes.length;d++){var f=this.scenes[d].sys;f.settings.visible&&f.settings.status>=g.LOADING&&f.settings.status<g.SLEEPING&&f.render(c)}this.isProcessing=!1},create:function(c){var d=c.sys,f=d.settings;c.create&&(f.status=g.CREATING,c.create.call(c,f.data),f.status===g.DESTROYED)||(f.isTransition&&d.events.emit(o.TRANSITION_START,f.transitionFrom,f.transitionDuration),c.update&&(d.sceneUpdate=c.update),f.status=g.RUNNING,d.events.emit(o.CREATE,c))},createSceneFromFunction:function(c,d){var f=new d;if(f instanceof u){var m=f.sys.settings.key;if(m!==""&&(c=m),this.keys.hasOwnProperty(c))throw new Error("Cannot add Scene with duplicate key: "+c);return this.createSceneFromInstance(c,f)}else return f.sys=new n(f),f.sys.settings.key=c,f.sys.init(this.game),f},createSceneFromInstance:function(c,d){var f=d.sys.settings.key;return f===""&&(d.sys.settings.key=c),d.sys.init(this.game),d},createSceneFromObject:function(c,d){var f=new u(d),m=f.sys.settings.key;m!==""?c=m:f.sys.settings.key=c,f.sys.init(this.game);for(var y=["init","preload","create","update","render"],S=0;S<y.length;S++){var C=r(d,y[S],null);C&&(f[y[S]]=C)}if(d.hasOwnProperty("extend")){for(var E in d.extend)if(d.extend.hasOwnProperty(E)){var P=d.extend[E];E==="data"&&f.hasOwnProperty("data")&&typeof P=="object"?f.data.merge(P):E!=="sys"&&(f[E]=P)}}return f},getKey:function(c,d){if(c||(c="default"),typeof d=="function")return c;if(d instanceof u?c=d.sys.settings.key:typeof d=="object"&&d.hasOwnProperty("key")&&(c=d.key),this.keys.hasOwnProperty(c))throw new Error("Cannot add Scene with duplicate key: "+c);return c},getScenes:function(c,d){c===void 0&&(c=!0),d===void 0&&(d=!1);for(var f=[],m=this.scenes,y=0;y<m.length;y++){var S=m[y];S&&(!c||c&&S.sys.isActive())&&f.push(S)}return d?f.reverse():f},getScene:function(c){if(typeof c=="string"){if(this.keys[c])return this.keys[c]}else for(var d=0;d<this.scenes.length;d++)if(c===this.scenes[d])return c;return null},isActive:function(c){var d=this.getScene(c);return d?d.sys.isActive():null},isPaused:function(c){var d=this.getScene(c);return d?d.sys.isPaused():null},isVisible:function(c){var d=this.getScene(c);return d?d.sys.isVisible():null},isSleeping:function(c){var d=this.getScene(c);return d?d.sys.isSleeping():null},pause:function(c,d){var f=this.getScene(c);return f&&f.sys.pause(d),this},resume:function(c,d){var f=this.getScene(c);return f&&f.sys.resume(d),this},sleep:function(c,d){var f=this.getScene(c);return f&&!f.sys.isTransitioning()&&f.sys.sleep(d),this},wake:function(c,d){var f=this.getScene(c);return f&&f.sys.wake(d),this},run:function(c,d){var f=this.getScene(c);if(!f){for(var m=0;m<this._pending.length;m++)if(this._pending[m].key===c){this.queueOp("start",c,d);break}return this}f.sys.isSleeping()?f.sys.wake(d):f.sys.isPaused()?f.sys.resume(d):this.start(c,d)},start:function(c,d){if(!this.isBooted)return this._data[c]={autoStart:!0,data:d},this;var f=this.getScene(c);if(!f)return console.warn("Scene key not found: "+c),this;var m=f.sys,y=m.settings.status;if(y>=g.START&&y<=g.CREATING)return this;if(y>=g.RUNNING&&y<=g.SLEEPING)m.shutdown(),m.sceneUpdate=s,m.start(d);else{m.sceneUpdate=s,m.start(d);var S;if(m.load&&(S=m.load),S&&m.settings.hasOwnProperty("pack")&&(S.reset(),S.addPack({payload:m.settings.pack})))return m.settings.status=g.LOADING,S.once(e.COMPLETE,this.payloadComplete,this),S.start(),this}return this.bootScene(f),this},stop:function(c,d){var f=this.getScene(c);if(f&&!f.sys.isTransitioning()&&f.sys.settings.status!==g.SHUTDOWN){var m=f.sys.load;m&&(m.off(e.COMPLETE,this.loadComplete,this),m.off(e.COMPLETE,this.payloadComplete,this)),f.sys.shutdown(d)}return this},switch:function(c,d,f){var m=this.getScene(c),y=this.getScene(d);return m&&y&&m!==y&&(this.sleep(c),this.isSleeping(d)?this.wake(d,f):this.start(d,f)),this},getAt:function(c){return this.scenes[c]},getIndex:function(c){var d=this.getScene(c);return this.scenes.indexOf(d)},bringToTop:function(c){if(this.isProcessing)return this.queueOp("bringToTop",c);var d=this.getIndex(c),f=this.scenes;if(d!==-1&&d<f.length){var m=this.getScene(c);f.splice(d,1),f.push(m)}return this},sendToBack:function(c){if(this.isProcessing)return this.queueOp("sendToBack",c);var d=this.getIndex(c);if(d!==-1&&d>0){var f=this.getScene(c);this.scenes.splice(d,1),this.scenes.unshift(f)}return this},moveDown:function(c){if(this.isProcessing)return this.queueOp("moveDown",c);var d=this.getIndex(c);if(d>0){var f=d-1,m=this.getScene(c),y=this.getAt(f);this.scenes[d]=y,this.scenes[f]=m}return this},moveUp:function(c){if(this.isProcessing)return this.queueOp("moveUp",c);var d=this.getIndex(c);if(d<this.scenes.length-1){var f=d+1,m=this.getScene(c),y=this.getAt(f);this.scenes[d]=y,this.scenes[f]=m}return this},moveAbove:function(c,d){if(c===d)return this;if(this.isProcessing)return this.queueOp("moveAbove",c,d);var f=this.getIndex(c),m=this.getIndex(d);if(f!==-1&&m!==-1&&m<f){var y=this.getAt(m);this.scenes.splice(m,1),this.scenes.splice(f+(m>f),0,y)}return this},moveBelow:function(c,d){if(c===d)return this;if(this.isProcessing)return this.queueOp("moveBelow",c,d);var f=this.getIndex(c),m=this.getIndex(d);if(f!==-1&&m!==-1&&m>f){var y=this.getAt(m);this.scenes.splice(m,1),f===0?this.scenes.unshift(y):this.scenes.splice(f-(m<f),0,y)}return this},queueOp:function(c,d,f,m){return this._queue.push({op:c,keyA:d,keyB:f,data:m}),this},swapPosition:function(c,d){if(c===d)return this;if(this.isProcessing)return this.queueOp("swapPosition",c,d);var f=this.getIndex(c),m=this.getIndex(d);if(f!==m&&f!==-1&&m!==-1){var y=this.getAt(f);this.scenes[f]=this.scenes[m],this.scenes[m]=y}return this},dump:function(){for(var c=[],d=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],f=0;f<this.scenes.length;f++){var m=this.scenes[f].sys,y=m.settings.visible&&(m.settings.status===g.RUNNING||m.settings.status===g.PAUSED)?"[*] ":"[-] ";y+=m.settings.key+" ("+d[m.settings.status]+")",c.push(y)}console.log(c.join(`
`))},destroy:function(){for(var c=0;c<this.scenes.length;c++){var d=this.scenes[c].sys;d.destroy()}this.systemScene.sys.destroy(),this.update=s,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});v.exports=l}),52209:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(44594),a=t(95540),r=t(37277),e=new g({initialize:function(u){this.scene=u,this.systems=u.sys,this.settings=u.sys.settings,this.key=u.sys.settings.key,this.manager=u.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},start:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",s,u),this},restart:function(s){var u=this.key;return this.manager.queueOp("stop",u),this.manager.queueOp("start",u,s),this},transition:function(s){s===void 0&&(s={});var u=a(s,"target",!1),n=this.manager.getScene(u);if(!u||!this.checkValidTransition(n))return!1;var l=a(s,"duration",1e3);this._elapsed=0,this._target=n,this._duration=l,this._willSleep=a(s,"sleep",!1),this._willRemove=a(s,"remove",!1);var c=a(s,"onUpdate",null);c&&(this._onUpdate=c,this._onUpdateScope=a(s,"onUpdateScope",this.scene));var d=a(s,"allowInput",!1);this.settings.transitionAllowInput=d;var f=n.sys.settings;f.isTransition=!0,f.transitionFrom=this.scene,f.transitionDuration=l,f.transitionAllowInput=d,a(s,"moveAbove",!1)?this.manager.moveAbove(this.key,u):a(s,"moveBelow",!1)&&this.manager.moveBelow(this.key,u),n.sys.isSleeping()?n.sys.wake(a(s,"data")):this.manager.start(u,a(s,"data"));var m=a(s,"onStart",null),y=a(s,"onStartScope",this.scene);return m&&m.call(y,this.scene,n,l),this.systems.events.emit(o.TRANSITION_OUT,n,l),!0},checkValidTransition:function(s){return!(!s||s.sys.isActive()||s.sys.isTransitioning()||s===this.scene||this.systems.isTransitioning())},step:function(s,u){this._elapsed+=u,this.transitionProgress=h(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var s=this._target.sys,u=this._target.sys.settings;s.events.emit(o.TRANSITION_COMPLETE,this.scene),u.isTransition=!1,u.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(s,u,n,l){return this.manager.add(s,u,n,l)},launch:function(s,u){return s&&s!==this.key&&this.manager.queueOp("start",s,u),this},run:function(s,u){return s&&s!==this.key&&this.manager.queueOp("run",s,u),this},pause:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("pause",s,u),this},resume:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("resume",s,u),this},sleep:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("sleep",s,u),this},wake:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("wake",s,u),this},switch:function(s,u){return s!==this.key&&this.manager.queueOp("switch",this.key,s,u),this},stop:function(s,u){return s===void 0&&(s=this.key),this.manager.queueOp("stop",s,u),this},setActive:function(s,u,n){u===void 0&&(u=this.key);var l=this.manager.getScene(u);return l&&l.sys.setActive(s,n),this},setVisible:function(s,u){u===void 0&&(u=this.key);var n=this.manager.getScene(u);return n&&n.sys.setVisible(s),this},isSleeping:function(s){return s===void 0&&(s=this.key),this.manager.isSleeping(s)},isActive:function(s){return s===void 0&&(s=this.key),this.manager.isActive(s)},isPaused:function(s){return s===void 0&&(s=this.key),this.manager.isPaused(s)},isVisible:function(s){return s===void 0&&(s=this.key),this.manager.isVisible(s)},swapPosition:function(s,u){return u===void 0&&(u=this.key),s!==u&&this.manager.swapPosition(s,u),this},moveAbove:function(s,u){return u===void 0&&(u=this.key),s!==u&&this.manager.moveAbove(s,u),this},moveBelow:function(s,u){return u===void 0&&(u=this.key),s!==u&&this.manager.moveBelow(s,u),this},remove:function(s){return s===void 0&&(s=this.key),this.manager.remove(s),this},moveUp:function(s){return s===void 0&&(s=this.key),this.manager.moveUp(s),this},moveDown:function(s){return s===void 0&&(s=this.key),this.manager.moveDown(s),this},bringToTop:function(s){return s===void 0&&(s=this.key),this.manager.bringToTop(s),this},sendToBack:function(s){return s===void 0&&(s=this.key),this.manager.sendToBack(s),this},get:function(s){return this.manager.getScene(s)},getStatus:function(s){var u=this.manager.getScene(s);if(u)return u.sys.getStatus()},getIndex:function(s){return s===void 0&&(s=this.key),this.manager.getIndex(s)},shutdown:function(){var s=this.systems.events;s.off(o.SHUTDOWN,this.shutdown,this),s.off(o.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});r.register("ScenePlugin",e,"scenePlugin"),v.exports=e}),55681:((v,T,t)=>{var h=t(89993),g=t(35154),o=t(46975),a=t(87033),r={create:function(e){return typeof e=="string"?e={key:e}:e===void 0&&(e={}),{status:h.PENDING,key:g(e,"key",""),active:g(e,"active",!1),visible:g(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:g(e,"pack",!1),cameras:g(e,"cameras",null),map:g(e,"map",o(a,g(e,"mapAdd",{}))),physics:g(e,"physics",{}),loader:g(e,"loader",{}),plugins:g(e,"plugins",!1),input:g(e,"input",{})}}};v.exports=r}),2368:((v,T,t)=>{var h=t(83419),g=t(89993),o=t(42363),a=t(44594),r=t(27397),e=t(52106),s=t(29747),u=t(55681),n=new h({initialize:function(c,d){this.scene=c,this.game,this.renderer,this.config=d,this.settings=u.create(d),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=s},init:function(l){this.settings.status=g.INIT,this.sceneUpdate=s,this.game=l,this.renderer=l.renderer,this.canvas=l.canvas,this.context=l.context;var c=l.plugins;this.plugins=c,c.addToScene(this,o.Global,[o.CoreScene,e(this),r(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(l,c){var d=this.events;d.emit(a.PRE_UPDATE,l,c),d.emit(a.UPDATE,l,c),this.sceneUpdate.call(this.scene,l,c),d.emit(a.POST_UPDATE,l,c)},render:function(l){var c=this.displayList;c.depthSort(),this.events.emit(a.PRE_RENDER,l),this.cameras.render(l,c),this.events.emit(a.RENDER,l)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(l){var c=this.settings,d=this.getStatus();return d!==g.CREATING&&d!==g.RUNNING?console.warn("Cannot pause non-running Scene",c.key):this.settings.active&&(c.status=g.PAUSED,c.active=!1,this.events.emit(a.PAUSE,this,l)),this},resume:function(l){var c=this.events,d=this.settings;return this.settings.active||(d.status=g.RUNNING,d.active=!0,c.emit(a.RESUME,this,l)),this},sleep:function(l){var c=this.settings,d=this.getStatus();return d!==g.CREATING&&d!==g.RUNNING?console.warn("Cannot sleep non-running Scene",c.key):(c.status=g.SLEEPING,c.active=!1,c.visible=!1,this.events.emit(a.SLEEP,this,l)),this},wake:function(l){var c=this.events,d=this.settings;return d.status=g.RUNNING,d.active=!0,d.visible=!0,c.emit(a.WAKE,this,l),d.isTransition&&c.emit(a.TRANSITION_WAKE,d.transitionFrom,d.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var l=this.settings.status;return l>g.PENDING&&l<=g.RUNNING},isSleeping:function(){return this.settings.status===g.SLEEPING},isActive:function(){return this.settings.status===g.RUNNING},isPaused:function(){return this.settings.status===g.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(l){return this.settings.visible=l,this},setActive:function(l,c){return l?this.resume(c):this.pause(c)},start:function(l){var c=this.events,d=this.settings;l&&(d.data=l),d.status=g.START,d.active=!0,d.visible=!0,c.emit(a.START,this),c.emit(a.READY,this,l)},shutdown:function(l){var c=this.events,d=this.settings;c.off(a.TRANSITION_INIT),c.off(a.TRANSITION_START),c.off(a.TRANSITION_COMPLETE),c.off(a.TRANSITION_OUT),d.status=g.SHUTDOWN,d.active=!1,d.visible=!1,c.emit(a.SHUTDOWN,this,l)},destroy:function(){var l=this.events,c=this.settings;c.status=g.DESTROYED,c.active=!1,c.visible=!1,l.emit(a.DESTROY,this),l.removeAllListeners();for(var d=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],f=0;f<d.length;f++)this[d[f]]=null}});v.exports=n}),89993:(v=>{var T={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};v.exports=T}),69830:(v=>{v.exports="addedtoscene"}),7919:(v=>{v.exports="boot"}),46763:(v=>{v.exports="create"}),11763:(v=>{v.exports="destroy"}),71555:(v=>{v.exports="pause"}),36735:(v=>{v.exports="postupdate"}),3809:(v=>{v.exports="prerender"}),90716:(v=>{v.exports="preupdate"}),58262:(v=>{v.exports="ready"}),91633:(v=>{v.exports="removedfromscene"}),10319:(v=>{v.exports="render"}),87132:(v=>{v.exports="resume"}),81961:(v=>{v.exports="shutdown"}),90194:(v=>{v.exports="sleep"}),6265:(v=>{v.exports="start"}),33178:(v=>{v.exports="transitioncomplete"}),43063:(v=>{v.exports="transitioninit"}),11259:(v=>{v.exports="transitionout"}),61611:(v=>{v.exports="transitionstart"}),45209:(v=>{v.exports="transitionwake"}),22966:(v=>{v.exports="update"}),21747:(v=>{v.exports="wake"}),44594:((v,T,t)=>{v.exports={ADDED_TO_SCENE:t(69830),BOOT:t(7919),CREATE:t(46763),DESTROY:t(11763),PAUSE:t(71555),POST_UPDATE:t(36735),PRE_RENDER:t(3809),PRE_UPDATE:t(90716),READY:t(58262),REMOVED_FROM_SCENE:t(91633),RENDER:t(10319),RESUME:t(87132),SHUTDOWN:t(81961),SLEEP:t(90194),START:t(6265),TRANSITION_COMPLETE:t(33178),TRANSITION_INIT:t(43063),TRANSITION_OUT:t(11259),TRANSITION_START:t(61611),TRANSITION_WAKE:t(45209),UPDATE:t(22966),WAKE:t(21747)}}),62194:((v,T,t)=>{var h=t(89993),g=t(79291),o={Events:t(44594),GetPhysicsPlugins:t(27397),GetScenePlugins:t(52106),SceneManager:t(60903),ScenePlugin:t(52209),Settings:t(55681),Systems:t(2368)};o=g(!1,o,h),v.exports=o}),30341:((v,T,t)=>{var h=t(83419),g=t(50792),o=t(14463),a=t(79291),r=t(29747),e=new h({Extends:g,initialize:function(u,n,l){g.call(this),this.manager=u,this.key=n,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(s){return!s||!s.name||typeof s.name!="string"?!1:this.markers[s.name]?(console.error("addMarker "+s.name+" already exists in Sound"),!1):(s=a(!0,{name:"",start:0,duration:this.totalDuration-(s.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},s),this.markers[s.name]=s,!0)},updateMarker:function(s){return!s||!s.name||typeof s.name!="string"?!1:this.markers[s.name]?(this.markers[s.name]=a(!0,this.markers[s.name],s),!0):(console.warn("Audio Marker: "+s.name+" missing in Sound: "+this.key),!1)},removeMarker:function(s){var u=this.markers[s];return u?(this.markers[s]=null,u):null},play:function(s,u){if(s===void 0&&(s=""),typeof s=="object"&&(u=s,s=""),typeof s!="string")return!1;if(!s)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[s])return console.warn("Marker: "+s+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[s],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=a(this.currentConfig,u),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:r,calculateRate:function(){var s=1.0005777895065548,u=this.currentConfig.detune+this.manager.detune,n=Math.pow(s,u);this.totalRate=this.currentConfig.rate*this.manager.rate*n},destroy:function(){this.pendingRemove||(this.stop(),this.emit(o.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});v.exports=e}),85034:((v,T,t)=>{var h=t(83419),g=t(41786),o=t(50792),a=t(14463),r=t(8443),e=t(46710),s=t(58731),u=t(29747),n=t(26099),l=new h({Extends:o,initialize:function(d){o.call(this),this.game=d,this.jsonCache=d.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new n;var f=d.events;f.on(r.BLUR,this.onGameBlur,this),f.on(r.FOCUS,this.onGameFocus,this),f.on(r.PRE_STEP,this.update,this),f.once(r.DESTROY,this.destroy,this)},add:u,addAudioSprite:function(c,d){d===void 0&&(d={});var f=this.add(c,d);f.spritemap=this.jsonCache.get(c).spritemap;for(var m in f.spritemap)if(f.spritemap.hasOwnProperty(m)){var y=g(d),S=f.spritemap[m];y.loop=S.hasOwnProperty("loop")?S.loop:!1,f.addMarker({name:m,start:S.start,duration:S.end-S.start,config:y})}return f},get:function(c){return s(this.sounds,"key",c)},getAll:function(c){return c?e(this.sounds,"key",c):e(this.sounds)},getAllPlaying:function(){return e(this.sounds,"isPlaying",!0)},play:function(c,d){var f=this.add(c);return f.once(a.COMPLETE,f.destroy,f),d?d.name?(f.addMarker(d),f.play(d.name)):f.play(d):f.play()},playAudioSprite:function(c,d,f){var m=this.addAudioSprite(c);return m.once(a.COMPLETE,m.destroy,m),m.play(d,f)},remove:function(c){var d=this.sounds.indexOf(c);return d!==-1?(c.destroy(),this.sounds.splice(d,1),!0):!1},removeAll:function(){this.sounds.forEach(function(c){c.destroy()}),this.sounds.length=0},removeByKey:function(c){for(var d=0,f=this.sounds.length-1;f>=0;f--){var m=this.sounds[f];m.key===c&&(m.destroy(),this.sounds.splice(f,1),d++)}return d},pauseAll:function(){this.forEachActiveSound(function(c){c.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(c){c.resume()}),this.emit(a.RESUME_ALL,this)},setListenerPosition:u,stopAll:function(){this.forEachActiveSound(function(c){c.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(c){var d=0;return this.getAll(c).forEach(function(f){f.stop()&&d++}),d},isPlaying:function(c){var d=this.sounds,f=d.length-1,m;if(c===void 0){for(;f>=0;f--)if(m=this.sounds[f],m.isPlaying)return!0}else for(;f>=0;f--)if(m=this.sounds[f],m.key===c&&m.isPlaying)return!0;return!1},unlock:u,onBlur:u,onFocus:u,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(c,d){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var f=this.sounds.length-1;f>=0;f--)this.sounds[f].pendingRemove&&this.sounds.splice(f,1);this.sounds.forEach(function(m){m.update(c,d)})},destroy:function(){this.game.events.off(r.BLUR,this.onGameBlur,this),this.game.events.off(r.FOCUS,this.onGameFocus,this),this.game.events.off(r.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(c,d){var f=this;this.sounds.forEach(function(m,y){m&&!m.pendingRemove&&c.call(d||f,m,y,f.sounds)})},setRate:function(c){return this.rate=c,this},rate:{get:function(){return this._rate},set:function(c){this._rate=c,this.forEachActiveSound(function(d){d.calculateRate()}),this.emit(a.GLOBAL_RATE,this,c)}},setDetune:function(c){return this.detune=c,this},detune:{get:function(){return this._detune},set:function(c){this._detune=c,this.forEachActiveSound(function(d){d.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,c)}}});v.exports=l}),14747:((v,T,t)=>{var h=t(33684),g=t(25960),o=t(57490),a={create:function(r){var e=r.config.audio,s=r.device.audio;return e.noAudio||!s.webAudio&&!s.audioData?new g(r):s.webAudio&&!e.disableWebAudio?new o(r):new h(r)}};v.exports=a}),19723:(v=>{v.exports="complete"}),98882:(v=>{v.exports="decodedall"}),57506:(v=>{v.exports="decoded"}),73146:(v=>{v.exports="destroy"}),11305:(v=>{v.exports="detune"}),40577:(v=>{v.exports="detune"}),30333:(v=>{v.exports="mute"}),20394:(v=>{v.exports="rate"}),21802:(v=>{v.exports="volume"}),1299:(v=>{v.exports="looped"}),99190:(v=>{v.exports="loop"}),97125:(v=>{v.exports="mute"}),89259:(v=>{v.exports="pan"}),79986:(v=>{v.exports="pauseall"}),17586:(v=>{v.exports="pause"}),19618:(v=>{v.exports="play"}),42306:(v=>{v.exports="rate"}),10387:(v=>{v.exports="resumeall"}),48959:(v=>{v.exports="resume"}),9960:(v=>{v.exports="seek"}),19180:(v=>{v.exports="stopall"}),98328:(v=>{v.exports="stop"}),50401:(v=>{v.exports="unlocked"}),52498:(v=>{v.exports="volume"}),14463:((v,T,t)=>{v.exports={COMPLETE:t(19723),DECODED:t(57506),DECODED_ALL:t(98882),DESTROY:t(73146),DETUNE:t(11305),GLOBAL_DETUNE:t(40577),GLOBAL_MUTE:t(30333),GLOBAL_RATE:t(20394),GLOBAL_VOLUME:t(21802),LOOP:t(99190),LOOPED:t(1299),MUTE:t(97125),PAN:t(89259),PAUSE_ALL:t(79986),PAUSE:t(17586),PLAY:t(19618),RATE:t(42306),RESUME_ALL:t(10387),RESUME:t(48959),SEEK:t(9960),STOP_ALL:t(19180),STOP:t(98328),UNLOCKED:t(50401),VOLUME:t(52498)}}),64895:((v,T,t)=>{var h=t(30341),g=t(83419),o=t(14463),a=t(45319),r=new g({Extends:h,initialize:function(s,u,n){if(n===void 0&&(n={}),this.tags=s.game.cache.audio.get(u),!this.tags)throw new Error('No cached audio asset with key "'+u);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,h.call(this,s,u,n)},play:function(e,s){return this.manager.isLocked(this,"play",[e,s])||!h.prototype.play.call(this,e,s)||!this.pickAndPlayAudioTag()?!1:(this.emit(o.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!h.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(o.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!h.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(o.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!h.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(o.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var e=this.currentConfig.seek,s=this.currentConfig.delay,u=(this.currentMarker?this.currentMarker.start:0)+e;return this.previousTime=u,this.audio.currentTime=u,this.applyConfig(),s===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+s*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var e=0;e<this.tags.length;e++){var s=this.tags[e];if(s.dataset.used==="false")return s.dataset.used="true",this.audio=s,!0}if(!this.manager.override)return!1;var u=[];this.manager.forEachActiveSound(function(l){l.key===this.key&&l.audio&&u.push(l)},this),u.sort(function(l,c){return l.loop===c.loop?c.seek/c.duration-l.seek/l.duration:l.loop?1:-1});var n=u[0];return this.audio=n.audio,n.reset(),n.audio=null,n.startTime=0,n.previousTime=0,!0},playCatchPromise:function(){var e=this.audio.play();e&&e.catch(function(s){console.warn(s)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){h.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(e){if(this.isPlaying){if(this.startTime>0){this.startTime<e-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var s=this.currentMarker?this.currentMarker.start:0,u=s+this.duration,n=this.audio.currentTime;if(this.currentConfig.loop)n>=u-this.manager.loopEndOffset?(this.audio.currentTime=s+Math.max(0,n-u),n=this.audio.currentTime):n<s&&(this.audio.currentTime+=s,n=this.audio.currentTime),n<this.previousTime&&this.emit(o.LOOPED,this);else if(n>=u){this.reset(),this.stopAndReleaseAudioTag(),this.emit(o.COMPLETE,this);return}this.previousTime=n}},destroy:function(){h.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){h.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e,!this.manager.isLocked(this,"mute",e)&&(this.updateMute(),this.emit(o.MUTE,this,e))}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e,!this.manager.isLocked(this,"volume",e)&&(this.updateVolume(),this.emit(o.VOLUME,this,e))}},setVolume:function(e){return this.volume=e,this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,!this.manager.isLocked(this,o.RATE,e)&&(this.calculateRate(),this.emit(o.RATE,this,e))}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,!this.manager.isLocked(this,o.DETUNE,e)&&(this.calculateRate(),this.emit(o.DETUNE,this,e))}},setDetune:function(e){return this.detune=e,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.isLocked(this,"seek",e)||this.startTime>0||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.isPlaying?(this.previousTime=e,this.audio.currentTime=e):this.isPaused&&(this.currentConfig.seek=e),this.emit(o.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,!this.manager.isLocked(this,"loop",e)&&(this.audio&&(this.audio.loop=e),this.emit(o.LOOP,this,e))}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.currentConfig.pan},set:function(e){this.currentConfig.pan=e,this.emit(o.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});v.exports=r}),33684:((v,T,t)=>{var h=t(85034),g=t(83419),o=t(14463),a=t(64895),r=new g({Extends:h,initialize:function(s){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,h.call(this,s)},add:function(e,s){var u=new a(this,e,s);return this.sounds.push(u),u},unlock:function(){this.locked=!1;var e=this;if(this.game.cache.audio.entries.each(function(l,c){for(var d=0;d<c.length;d++)if(c[d].dataset.locked==="true")return e.locked=!0,!1;return!0}),!!this.locked){var s=!1,u=function(){s=!0},n=function(){if(s){s=!1;return}document.body.removeEventListener("touchmove",u),document.body.removeEventListener("touchend",n);var l=[];if(e.game.cache.audio.entries.each(function(d,f){for(var m=0;m<f.length;m++){var y=f[m];y.dataset.locked==="true"&&l.push(y)}return!0}),l.length!==0){var c=l[l.length-1];c.oncanplaythrough=function(){c.oncanplaythrough=null,l.forEach(function(d){d.dataset.locked="false"}),e.unlocked=!0},l.forEach(function(d){d.load()})}};this.once(o.UNLOCKED,function(){for(this.forEachActiveSound(function(c){c.currentMarker===null&&c.duration===0&&(c.duration=c.tags[0].duration),c.totalDuration=c.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",n,!1)}},onBlur:function(){this.forEachActiveSound(function(e){e.isPlaying&&(this.onBlurPausedSounds.push(e),e.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){h.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(e,s,u){return e.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:e,prop:s,value:u}),!0):!1},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this._mute},set:function(e){this._mute=e,this.forEachActiveSound(function(s){s.updateMute()}),this.emit(o.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this._volume},set:function(e){this._volume=e,this.forEachActiveSound(function(s){s.updateVolume()}),this.emit(o.GLOBAL_VOLUME,this,e)}}});v.exports=r}),23717:((v,T,t)=>{v.exports={SoundManagerCreator:t(14747),Events:t(14463),BaseSound:t(30341),BaseSoundManager:t(85034),WebAudioSound:t(71741),WebAudioSoundManager:t(57490),HTML5AudioSound:t(64895),HTML5AudioSoundManager:t(33684),NoAudioSound:t(4603),NoAudioSoundManager:t(25960)}}),4603:((v,T,t)=>{var h=t(30341),g=t(83419),o=t(50792),a=t(79291),r=t(29747),e=function(){return!1},s=function(){return null},u=function(){return this},n=new g({Extends:o,initialize:function(c,d,f){f===void 0&&(f={}),o.call(this),this.manager=c,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},f),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:e,updateMarker:e,removeMarker:s,play:e,pause:e,resume:e,stop:e,setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u,setPan:u,applyConfig:s,resetConfig:s,update:r,calculateRate:s,destroy:function(){h.prototype.destroy.call(this)}});v.exports=n}),25960:((v,T,t)=>{var h=t(85034),g=t(83419),o=t(50792),a=t(4603),r=t(29747),e=new g({Extends:o,initialize:function(u){o.call(this),this.game=u,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(s,u){var n=new a(this,s,u);return this.sounds.push(n),n},addAudioSprite:function(s,u){var n=this.add(s,u);return n.spritemap={},n},get:function(s){return h.prototype.get.call(this,s)},getAll:function(s){return h.prototype.getAll.call(this,s)},play:function(s,u){return!1},playAudioSprite:function(s,u,n){return!1},remove:function(s){return h.prototype.remove.call(this,s)},removeAll:function(){return h.prototype.removeAll.call(this)},removeByKey:function(s){return h.prototype.removeByKey.call(this,s)},stopByKey:function(s){return h.prototype.stopByKey.call(this,s)},onBlur:r,onFocus:r,onGameBlur:r,onGameFocus:r,pauseAll:r,resumeAll:r,stopAll:r,update:r,setRate:r,setDetune:r,setMute:r,setVolume:r,unlock:r,forEachActiveSound:function(s,u){h.prototype.forEachActiveSound.call(this,s,u)},destroy:function(){h.prototype.destroy.call(this)}});v.exports=e}),71741:((v,T,t)=>{var h=t(30341),g=t(83419),o=t(14463),a=t(95540),r=new g({Extends:h,initialize:function(s,u,n){if(n===void 0&&(n={}),this.audioBuffer=s.game.cache.audio.get(u),!this.audioBuffer)throw new Error('Audio key "'+u+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=s.context.createGain(),this.volumeNode=s.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),s.context.createPanner&&(this.spatialNode=s.context.createPanner(),this.volumeNode.connect(this.spatialNode)),s.context.createStereoPanner?(this.pannerNode=s.context.createStereoPanner(),s.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(s.destination)):s.context.createPanner?this.spatialNode.connect(s.destination):this.volumeNode.connect(s.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,h.call(this,s,u,n)},play:function(e,s){return h.prototype.play.call(this,e,s)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(o.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!h.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(o.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!h.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(o.RESUME,this),!0)},stop:function(){return h.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(o.STOP,this),!0):!1},createAndStartBufferSource:function(){var e=this.currentConfig.seek,s=this.currentConfig.delay,u=this.manager.context.currentTime+s,n=(this.currentMarker?this.currentMarker.start:0)+e,l=this.duration-e;this.playTime=u-e,this.startTime=u,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,u),Math.max(0,n),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),s=this.currentMarker?this.currentMarker.start:0,u=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,s),Math.max(0,u))},createBufferSource:function(){var e=this,s=this.manager.context.createBufferSource();return s.buffer=this.audioBuffer,s.connect(this.muteNode),s.onended=function(u){var n=u.target;(n===e.source||n===e.loopSource)&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},s},stopAndRemoveBufferSource:function(){if(this.source){var e=this.source;this.source=null,e.stop(),e.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var e=this.currentConfig.source;if(e&&this.manager.context.createPanner){var s=this.spatialNode;s.panningModel=a(e,"panningModel","equalpower"),s.distanceModel=a(e,"distanceModel","inverse"),s.orientationX.value=a(e,"orientationX",0),s.orientationY.value=a(e,"orientationY",0),s.orientationZ.value=a(e,"orientationZ",-1),s.refDistance=a(e,"refDistance",1),s.maxDistance=a(e,"maxDistance",1e4),s.rolloffFactor=a(e,"rolloffFactor",1),s.coneInnerAngle=a(e,"coneInnerAngle",360),s.coneOuterAngle=a(e,"coneOuterAngle",0),s.coneOuterGain=a(e,"coneOuterGain",0),this.spatialSource=a(e,"follow",null),this.spatialSource||(s.positionX.value=a(e,"x",0),s.positionY.value=a(e,"y",0),s.positionZ.value=a(e,"z",0))}h.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(e){this.spatialNode&&(this.spatialNode.positionX.value=e)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(e){this.spatialNode&&(this.spatialNode.positionY.value=e)}},update:function(){if(this.isPlaying&&this.spatialSource){var e=a(this.spatialSource,"x",null),s=a(this.spatialSource,"y",null);e&&e!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=e),s&&s!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=s)}this.hasEnded?(h.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(o.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(o.LOOPED,this))},destroy:function(){this.pendingRemove||(h.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){h.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,s=0;s<this.rateUpdates.length;s++){var u=0;s<this.rateUpdates.length-1?u=this.rateUpdates[s+1].time:u=this.manager.context.currentTime-this.playTime,e+=(u-this.rateUpdates[s].time)*this.rateUpdates[s].rate}return e},getLoopTime:function(){for(var e=0,s=0;s<this.rateUpdates.length-1;s++)e+=(this.rateUpdates[s+1].time-this.rateUpdates[s].time)*this.rateUpdates[s].rate;var u=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+u.time+(this.duration-e)/u.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(o.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(o.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(o.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(o.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(o.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(o.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(o.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});v.exports=r}),57490:((v,T,t)=>{var h=t(53134),g=t(85034),o=t(83419),a=t(14463),r=t(8443),e=t(71741),s=t(95540),u=new o({Extends:g,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",g.call(this,l),this.locked&&(l.isBooted?this.unlock():l.events.once(r.BOOT,this.unlock,this)),l.events.on(r.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var n=this.context;window.setTimeout(function(){n&&(n.suspend(),n.resume())},100)},createAudioContext:function(n){var l=n.config.audio;if(l.context)return l.context.resume(),l.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(n){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=n,this.masterMuteNode=n.createGain(),this.masterVolumeNode=n.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(n.destination),this.destination=this.masterMuteNode,this},add:function(n,l){var c=new e(this,n,l);return this.sounds.push(c),c},decodeAudio:function(n,l){var c;Array.isArray(n)?c=n:c=[{key:n,data:l}];for(var d=this.game.cache.audio,f=c.length,m=0;m<c.length;m++){var y=c[m],S=y.key,C=y.data;typeof C=="string"&&(C=h(C));var E=function(A,F){d.add(A,F),this.emit(a.DECODED,A),f--,f===0&&this.emit(a.DECODED_ALL)}.bind(this,S),P=function(A,F){console.error("Error decoding audio: "+A+" - ",F?F.message:""),f--,f===0&&this.emit(a.DECODED_ALL)}.bind(this,S);this.context.decodeAudioData(C,E,P)}},setListenerPosition:function(n,l){return n===void 0&&(n=this.game.scale.width/2),l===void 0&&(l=this.game.scale.height/2),this.listenerPosition.set(n,l),this},unlock:function(){var n=this,l=document.body,c=function d(){if(n.context&&l){var f=l.removeEventListener.bind(l);n.context.resume().then(function(){f("touchstart",d),f("touchend",d),f("mousedown",d),f("mouseup",d),f("keydown",d),n.unlocked=!0},function(){f("touchstart",d),f("touchend",d),f("mousedown",d),f("mouseup",d),f("keydown",d)})}};l&&(l.addEventListener("touchstart",c,!1),l.addEventListener("touchend",c,!1),l.addEventListener("mousedown",c,!1),l.addEventListener("mouseup",c,!1),l.addEventListener("keydown",c,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var n=this.context;n&&!this.locked&&(n.state==="suspended"||n.state==="interrupted")&&n.resume()},update:function(n,l){var c=this.context.listener,d=s(this.listenerPosition,"x",null),f=s(this.listenerPosition,"y",null);if(c&&c.positionX!==void 0)d&&d!==this._spatialx&&(this._spatialx=c.positionX.value=d),f&&f!==this._spatialy&&(this._spatialy=c.positionY.value=f);else if(c){d&&d!==this._spatialx&&(this._spatialx=d),f&&f!==this._spatialy&&(this._spatialy=f);var m=s(c,"z",0);c.setPosition(this._spatialx||0,this._spatialy||0,m)}g.prototype.update.call(this,n,l),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var n=this;this.context.close().then(function(){n.context=null})}this.game.events.off(r.VISIBLE,this.onGameVisible,this),g.prototype.destroy.call(this)},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(n){this.masterMuteNode.gain.setValueAtTime(n?0:1,0),this.emit(a.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(n){this.masterVolumeNode.gain.setValueAtTime(n,0),this.emit(a.GLOBAL_VOLUME,this,n)}}});v.exports=u}),73162:((v,T,t)=>{var h=t(37105),g=t(83419),o=t(29747),a=t(19186),r=new g({initialize:function(s){this.parent=s,this.list=[],this.position=0,this.addCallback=o,this.removeCallback=o,this._sortKey=""},add:function(e,s){return s?h.Add(this.list,e):h.Add(this.list,e,0,this.addCallback,this)},addAt:function(e,s,u){return u?h.AddAt(this.list,e,s):h.AddAt(this.list,e,s,0,this.addCallback,this)},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,s){return e?(s===void 0&&(s=function(u,n){return u[e]-n[e]}),a(this.list,s),this):this},getByName:function(e){return h.GetFirst(this.list,"name",e)},getRandom:function(e,s){return h.GetRandom(this.list,e,s)},getFirst:function(e,s,u,n){return h.GetFirst(this.list,e,s,u,n)},getAll:function(e,s,u,n){return h.GetAll(this.list,e,s,u,n)},count:function(e,s){return h.CountAllMatching(this.list,e,s)},swap:function(e,s){h.Swap(this.list,e,s)},moveTo:function(e,s){return h.MoveTo(this.list,e,s)},moveAbove:function(e,s){return h.MoveAbove(this.list,e,s)},moveBelow:function(e,s){return h.MoveBelow(this.list,e,s)},remove:function(e,s){return s?h.Remove(this.list,e):h.Remove(this.list,e,this.removeCallback,this)},removeAt:function(e,s){return s?h.RemoveAt(this.list,e):h.RemoveAt(this.list,e,this.removeCallback,this)},removeBetween:function(e,s,u){return u?h.RemoveBetween(this.list,e,s):h.RemoveBetween(this.list,e,s,this.removeCallback,this)},removeAll:function(e){for(var s=this.list.length;s--;)this.remove(this.list[s],e);return this},bringToTop:function(e){return h.BringToTop(this.list,e)},sendToBack:function(e){return h.SendToBack(this.list,e)},moveUp:function(e){return h.MoveUp(this.list,e),e},moveDown:function(e){return h.MoveDown(this.list,e),e},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(e,s){return h.Replace(this.list,e,s)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,s,u,n){return h.SetAll(this.list,e,s,u,n),this},each:function(e,s){for(var u=[null],n=2;n<arguments.length;n++)u.push(arguments[n]);for(n=0;n<this.list.length;n++)u[0]=this.list[n],e.apply(s,u)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});v.exports=r}),90330:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a){this.entries={},this.size=0,this.setAll(a)},setAll:function(o){if(Array.isArray(o))for(var a=0;a<o.length;a++)this.set(o[a][0],o[a][1]);return this},set:function(o,a){return this.has(o)||this.size++,this.entries[o]=a,this},get:function(o){if(this.has(o))return this.entries[o]},getArray:function(){var o=[],a=this.entries;for(var r in a)o.push(a[r]);return o},has:function(o){return this.entries.hasOwnProperty(o)},delete:function(o){return this.has(o)&&(delete this.entries[o],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(o){delete this.entries[o]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var o=[],a=this.entries;for(var r in a)o.push(a[r]);return o},dump:function(){var o=this.entries;console.group("Map");for(var a in o)console.log(a,o[a]);console.groupEnd()},each:function(o){var a=this.entries;for(var r in a)if(o(r,a[r])===!1)break;return this},contains:function(o){var a=this.entries;for(var r in a)if(a[r]===o)return!0;return!1},merge:function(o,a){a===void 0&&(a=!1);var r=this.entries,e=o.entries;for(var s in e)r.hasOwnProperty(s)&&a?r[s]=e[s]:this.set(s,e[s]);return this}});v.exports=g}),25774:((v,T,t)=>{var h=t(83419),g=t(50792),o=t(82348),a=new h({Extends:g,initialize:function(){g.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(r){return this._active.indexOf(r)>-1},isPending:function(r){return this._toProcess>0&&this._pending.indexOf(r)>-1},isDestroying:function(r){return this._destroy.indexOf(r)>-1},add:function(r){return this.checkQueue&&this.isActive(r)&&!this.isDestroying(r)||this.isPending(r)||(this._pending.push(r),this._toProcess++),r},remove:function(r){if(this.isPending(r)){var e=this._pending,s=e.indexOf(r);s!==-1&&e.splice(s,1)}else this.isActive(r)&&(this._destroy.push(r),this._toProcess++);return r},removeAll:function(){for(var r=this._active,e=this._destroy,s=r.length;s--;)e.push(r[s]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var r=this._destroy,e=this._active,s,u;for(s=0;s<r.length;s++){u=r[s];var n=e.indexOf(u);n!==-1&&(e.splice(n,1),this.emit(o.PROCESS_QUEUE_REMOVE,u))}for(r.length=0,r=this._pending,s=0;s<r.length;s++)u=r[s],(!this.checkQueue||this.checkQueue&&e.indexOf(u)===-1)&&(e.push(u),this.emit(o.PROCESS_QUEUE_ADD,u));return r.length=0,this._toProcess=0,e},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});v.exports=a}),59542:((v,T,t)=>{var h=t(43886);function g(C){if(!(this instanceof g))return new g(C);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}g.prototype={all:function(){return this._all(this.data,[])},search:function(C){var E=this.data,P=[],A=this.toBBox;if(!m(C,E))return P;for(var F=[],G,D,L,b;E;){for(G=0,D=E.children.length;G<D;G++)L=E.children[G],b=E.leaf?A(L):L,m(C,b)&&(E.leaf?P.push(L):f(C,b)?this._all(L,P):F.push(L));E=F.pop()}return P},collides:function(C){var E=this.data,P=this.toBBox;if(!m(C,E))return!1;for(var A=[],F,G,D,L;E;){for(F=0,G=E.children.length;F<G;F++)if(D=E.children[F],L=E.leaf?P(D):D,m(C,L)){if(E.leaf||f(C,L))return!0;A.push(D)}E=A.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var E=0,P=C.length;E<P;E++)this.insert(C[E]);return this}var A=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=A;else if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var F=this.data;this.data=A,A=F}this._insert(A,this.data.height-A.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,E){if(!C)return this;for(var P=this.data,A=this.toBBox(C),F=[],G=[],D,L,b,I;P||F.length;){if(P||(P=F.pop(),L=F[F.length-1],D=G.pop(),I=!0),P.leaf&&(b=o(C,P.children,E),b!==-1))return P.children.splice(b,1),F.push(P),this._condense(F),this;!I&&!P.leaf&&f(P,A)?(F.push(P),G.push(D),D=0,L=P,P=P.children[0]):L?(D++,P=L.children[D],I=!1):P=null}return this},toBBox:function(C){return C},compareMinX:s,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,E){for(var P=[];C;)C.leaf?E.push.apply(E,C.children):P.push.apply(P,C.children),C=P.pop();return E},_build:function(C,E,P,A){var F=P-E+1,G=this._maxEntries,D;if(F<=G)return D=y(C.slice(E,P+1)),a(D,this.toBBox),D;A||(A=Math.ceil(Math.log(F)/Math.log(G)),G=Math.ceil(F/Math.pow(G,A-1))),D=y([]),D.leaf=!1,D.height=A;var L=Math.ceil(F/G),b=L*Math.ceil(Math.sqrt(G)),I,N,Z,U;for(S(C,E,P,b,this.compareMinX),I=E;I<=P;I+=b)for(Z=Math.min(I+b-1,P),S(C,I,Z,L,this.compareMinY),N=I;N<=Z;N+=L)U=Math.min(N+L-1,Z),D.children.push(this._build(C,N,U,A-1));return a(D,this.toBBox),D},_chooseSubtree:function(C,E,P,A){for(var F,G,D,L,b,I,N,Z;A.push(E),!(E.leaf||A.length-1===P);){for(N=Z=1/0,F=0,G=E.children.length;F<G;F++)D=E.children[F],b=n(D),I=c(C,D)-b,I<Z?(Z=I,N=b<N?b:N,L=D):I===Z&&b<N&&(N=b,L=D);E=L||E.children[0]}return E},_insert:function(C,E,P){var A=this.toBBox,F=P?C:A(C),G=[],D=this._chooseSubtree(F,this.data,E,G);for(D.children.push(C),e(D,F);E>=0&&G[E].children.length>this._maxEntries;)this._split(G,E),E--;this._adjustParentBBoxes(F,G,E)},_split:function(C,E){var P=C[E],A=P.children.length,F=this._minEntries;this._chooseSplitAxis(P,F,A);var G=this._chooseSplitIndex(P,F,A),D=y(P.children.splice(G,P.children.length-G));D.height=P.height,D.leaf=P.leaf,a(P,this.toBBox),a(D,this.toBBox),E?C[E-1].children.push(D):this._splitRoot(P,D)},_splitRoot:function(C,E){this.data=y([C,E]),this.data.height=C.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(C,E,P){var A,F,G,D,L,b,I,N;for(b=I=1/0,A=E;A<=P-E;A++)F=r(C,0,A,this.toBBox),G=r(C,A,P,this.toBBox),D=d(F,G),L=n(F)+n(G),D<b?(b=D,N=A,I=L<I?L:I):D===b&&L<I&&(I=L,N=A);return N},_chooseSplitAxis:function(C,E,P){var A=C.leaf?this.compareMinX:s,F=C.leaf?this.compareMinY:u,G=this._allDistMargin(C,E,P,A),D=this._allDistMargin(C,E,P,F);G<D&&C.children.sort(A)},_allDistMargin:function(C,E,P,A){C.children.sort(A);var F=this.toBBox,G=r(C,0,E,F),D=r(C,P-E,P,F),L=l(G)+l(D),b,I;for(b=E;b<P-E;b++)I=C.children[b],e(G,C.leaf?F(I):I),L+=l(G);for(b=P-E-1;b>=E;b--)I=C.children[b],e(D,C.leaf?F(I):I),L+=l(D);return L},_adjustParentBBoxes:function(C,E,P){for(var A=P;A>=0;A--)e(E[A],C)},_condense:function(C){for(var E=C.length-1,P;E>=0;E--)C[E].children.length===0?E>0?(P=C[E-1].children,P.splice(P.indexOf(C[E]),1)):this.clear():a(C[E],this.toBBox)},compareMinX:function(C,E){return C.left-E.left},compareMinY:function(C,E){return C.top-E.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function o(C,E,P){if(!P)return E.indexOf(C);for(var A=0;A<E.length;A++)if(P(C,E[A]))return A;return-1}function a(C,E){r(C,0,C.children.length,E,C)}function r(C,E,P,A,F){F||(F=y(null)),F.minX=1/0,F.minY=1/0,F.maxX=-1/0,F.maxY=-1/0;for(var G=E,D;G<P;G++)D=C.children[G],e(F,C.leaf?A(D):D);return F}function e(C,E){return C.minX=Math.min(C.minX,E.minX),C.minY=Math.min(C.minY,E.minY),C.maxX=Math.max(C.maxX,E.maxX),C.maxY=Math.max(C.maxY,E.maxY),C}function s(C,E){return C.minX-E.minX}function u(C,E){return C.minY-E.minY}function n(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function l(C){return C.maxX-C.minX+(C.maxY-C.minY)}function c(C,E){return(Math.max(E.maxX,C.maxX)-Math.min(E.minX,C.minX))*(Math.max(E.maxY,C.maxY)-Math.min(E.minY,C.minY))}function d(C,E){var P=Math.max(C.minX,E.minX),A=Math.max(C.minY,E.minY),F=Math.min(C.maxX,E.maxX),G=Math.min(C.maxY,E.maxY);return Math.max(0,F-P)*Math.max(0,G-A)}function f(C,E){return C.minX<=E.minX&&C.minY<=E.minY&&E.maxX<=C.maxX&&E.maxY<=C.maxY}function m(C,E){return E.minX<=C.maxX&&E.minY<=C.maxY&&E.maxX>=C.minX&&E.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S(C,E,P,A,F){for(var G=[E,P],D;G.length;)P=G.pop(),E=G.pop(),!(P-E<=A)&&(D=E+Math.ceil((P-E)/A/2)*A,h(C,D,E,P,F),G.push(E,D,D,P))}v.exports=g}),35072:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a){if(this.entries=[],Array.isArray(a))for(var r=0;r<a.length;r++)this.set(a[r])},set:function(o){return this.entries.indexOf(o)===-1&&this.entries.push(o),this},get:function(o,a){for(var r=0;r<this.entries.length;r++){var e=this.entries[r];if(e[o]===a)return e}},getArray:function(){return this.entries.slice(0)},delete:function(o){var a=this.entries.indexOf(o);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var o=0;o<this.entries.length;o++){var a=this.entries[o];console.log(a)}console.groupEnd()},each:function(o,a){var r,e=this.entries.slice(),s=e.length;if(a)for(r=0;r<s&&o.call(a,e[r],r)!==!1;r++);else for(r=0;r<s&&o(e[r],r)!==!1;r++);return this},iterate:function(o,a){var r,e=this.entries.length;if(a)for(r=0;r<e&&o.call(a,this.entries[r],r)!==!1;r++);else for(r=0;r<e&&o(this.entries[r],r)!==!1;r++);return this},iterateLocal:function(o){var a,r=[];for(a=1;a<arguments.length;a++)r.push(arguments[a]);var e=this.entries.length;for(a=0;a<e;a++){var s=this.entries[a];s[o].apply(s,r)}return this},clear:function(){return this.entries.length=0,this},contains:function(o){return this.entries.indexOf(o)>-1},union:function(o){var a=new g;return o.entries.forEach(function(r){a.set(r)}),this.entries.forEach(function(r){a.set(r)}),a},intersect:function(o){var a=new g;return this.entries.forEach(function(r){o.contains(r)&&a.set(r)}),a},difference:function(o){var a=new g;return this.entries.forEach(function(r){o.contains(r)||a.set(r)}),a},size:{get:function(){return this.entries.length},set:function(o){return o<this.entries.length?this.entries.length=o:this.entries.length}}});v.exports=g}),86555:((v,T,t)=>{var h=t(45319),g=t(83419),o=t(56583),a=t(26099),r=new g({initialize:function(s,u,n,l){s===void 0&&(s=0),u===void 0&&(u=s),n===void 0&&(n=0),l===void 0&&(l=null),this._width=s,this._height=u,this._parent=l,this.aspectMode=n,this.aspectRatio=u===0?1:s/u,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(e){return e===void 0&&(e=0),this.aspectMode=e,this.setSize(this._width,this._height)},setSnap:function(e,s){return e===void 0&&(e=0),s===void 0&&(s=e),this.snapTo.set(e,s),this.setSize(this._width,this._height)},setParent:function(e){return this._parent=e,this.setSize(this._width,this._height)},setMin:function(e,s){return e===void 0&&(e=0),s===void 0&&(s=e),this.minWidth=h(e,0,this.maxWidth),this.minHeight=h(s,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(e,s){return e===void 0&&(e=Number.MAX_VALUE),s===void 0&&(s=e),this.maxWidth=h(e,this.minWidth,Number.MAX_VALUE),this.maxHeight=h(s,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(e,s){switch(e===void 0&&(e=0),s===void 0&&(s=e),this.aspectMode){case r.NONE:this._width=this.getNewWidth(o(e,this.snapTo.x)),this._height=this.getNewHeight(o(s,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case r.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(o(e,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case r.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(o(s,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case r.FIT:this.constrain(e,s,!0);break;case r.ENVELOP:this.constrain(e,s,!1);break}return this},setAspectRatio:function(e){return this.aspectRatio=e,this.setSize(this._width,this._height)},resize:function(e,s){return this._width=this.getNewWidth(o(e,this.snapTo.x)),this._height=this.getNewHeight(o(s,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(e,s){return s===void 0&&(s=!0),e=h(e,this.minWidth,this.maxWidth),s&&this._parent&&e>this._parent.width&&(e=Math.max(this.minWidth,this._parent.width)),e},getNewHeight:function(e,s){return s===void 0&&(s=!0),e=h(e,this.minHeight,this.maxHeight),s&&this._parent&&e>this._parent.height&&(e=Math.max(this.minHeight,this._parent.height)),e},constrain:function(e,s,u){e===void 0&&(e=0),s===void 0&&(s=e),u===void 0&&(u=!0),e=this.getNewWidth(e),s=this.getNewHeight(s);var n=this.snapTo,l=s===0?1:e/s;return u&&this.aspectRatio>l||!u&&this.aspectRatio<l?(e=o(e,n.x),s=e/this.aspectRatio,n.y>0&&(s=o(s,n.y),e=s*this.aspectRatio)):(u&&this.aspectRatio<l||!u&&this.aspectRatio>l)&&(s=o(s,n.y),e=s*this.aspectRatio,n.x>0&&(e=o(e,n.x),s=e*(1/this.aspectRatio))),this._width=e,this._height=s,this},fitTo:function(e,s){return this.constrain(e,s,!0)},envelop:function(e,s){return this.constrain(e,s,!1)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){e&&e.style&&(e.style.width=this._width+"px",e.style.height=this._height+"px")},copy:function(e){return e.setAspectMode(this.aspectMode),e.aspectRatio=this.aspectRatio,e.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});r.NONE=0,r.WIDTH_CONTROLS_HEIGHT=1,r.HEIGHT_CONTROLS_WIDTH=2,r.FIT=3,r.ENVELOP=4,v.exports=r}),15238:(v=>{v.exports="add"}),56187:(v=>{v.exports="remove"}),82348:((v,T,t)=>{v.exports={PROCESS_QUEUE_ADD:t(15238),PROCESS_QUEUE_REMOVE:t(56187)}}),41392:((v,T,t)=>{v.exports={Events:t(82348),List:t(73162),Map:t(90330),ProcessQueue:t(25774),RTree:t(59542),Set:t(35072),Size:t(86555)}}),57382:((v,T,t)=>{var h=t(83419),g=t(45319),o=t(40987),a=t(8054),r=t(50030),e=t(79237),s=new h({Extends:e,initialize:function(n,l,c,d,f){e.call(this,n,l,c,d,f),this.add("__BASE",0,0,0,d,f),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=d,this.height=f,this.imageData=this.context.getImageData(0,0,d,f),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(u,n,l,c){return c===void 0&&(c=!0),this.context.drawImage(l,u,n),c&&this.update(),this},drawFrame:function(u,n,l,c,d){l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=!0);var f=this.manager.getFrame(u,n);if(f){var m=f.canvasData,y=f.cutWidth,S=f.cutHeight,C=f.source.resolution;this.context.drawImage(f.source.image,m.x,m.y,y,S,l,c,y/C,S/C),d&&this.update()}return this},setPixel:function(u,n,l,c,d,f){f===void 0&&(f=255),u=Math.abs(Math.floor(u)),n=Math.abs(Math.floor(n));var m=this.getIndex(u,n);if(m>-1){var y=this.context.getImageData(u,n,1,1);y.data[0]=l,y.data[1]=c,y.data[2]=d,y.data[3]=f,this.context.putImageData(y,u,n)}return this},putData:function(u,n,l,c,d,f,m){return c===void 0&&(c=0),d===void 0&&(d=0),f===void 0&&(f=u.width),m===void 0&&(m=u.height),this.context.putImageData(u,n,l,c,d,f,m),this},getData:function(u,n,l,c){u=g(Math.floor(u),0,this.width-1),n=g(Math.floor(n),0,this.height-1),l=g(l,1,this.width-u),c=g(c,1,this.height-n);var d=this.context.getImageData(u,n,l,c);return d},getPixel:function(u,n,l){l||(l=new o);var c=this.getIndex(u,n);if(c>-1){var d=this.data,f=d[c+0],m=d[c+1],y=d[c+2],S=d[c+3];l.setTo(f,m,y,S)}return l},getPixels:function(u,n,l,c){u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=this.width),c===void 0&&(c=l),u=Math.abs(Math.round(u)),n=Math.abs(Math.round(n));for(var d=g(u,0,this.width),f=g(u+l,0,this.width),m=g(n,0,this.height),y=g(n+c,0,this.height),S=new o,C=[],E=m;E<y;E++){for(var P=[],A=d;A<f;A++)S=this.getPixel(A,E,S),P.push({x:A,y:E,color:S.color,alpha:S.alphaGL});C.push(P)}return C},getIndex:function(u,n){return u=Math.abs(Math.round(u)),n=Math.abs(Math.round(n)),u<this.width&&n<this.height?(u+n*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(u,n,l,c,d){return u===void 0&&(u=0),n===void 0&&(n=0),l===void 0&&(l=this.width),c===void 0&&(c=this.height),d===void 0&&(d=!0),this.context.clearRect(u,n,l,c),d&&this.update(),this},setSize:function(u,n){return n===void 0&&(n=u),(u!==this.width||n!==this.height)&&(this.canvas.width=u,this.canvas.height=n,this._source.width=u,this._source.height=n,this._source.isPowerOf2=r(u,n),this.frames.__BASE.setSize(u,n,0,0),this.width=u,this.height=n,this.refresh()),this},destroy:function(){e.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});v.exports=s}),81320:((v,T,t)=>{var h=t(10312),g=t(38058),o=t(27919),a=t(83419),r=t(8054),e=t(4327),s=t(95540),u=t(36060),n=t(32302),l=t(79237),c=t(70554),d=new a({Extends:l,initialize:function(m,y,S,C,E){S===void 0&&(S=256),C===void 0&&(C=256),E===void 0&&(E=!0),this.type="DynamicTexture";var P=m.game.renderer,A=P&&P.type===r.CANVAS,F=A?o.create2D(this,S,C):[this];l.call(this,m,y,F,S,C),this.add("__BASE",0,0,0,S,C),this.renderer=P,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=A?F:null,this.context=A?F.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new g(0,0,S,C).setScene(m.game.scene.systemScene,!1),this.renderTarget=A?null:new n(P,S,C,1,0,!1,!1,!0,!1),this.pipeline=A?null:P.pipelines.get(u.SINGLE_PIPELINE),this.setSize(S,C,E)},setSize:function(f,m,y){m===void 0&&(m=f),y===void 0&&(y=!0),y&&(f=Math.floor(f),m=Math.floor(m),f%2!==0&&f++,m%2!==0&&m++);var S=this.get(),C=S.source;if(f!==this.width||m!==this.height){this.canvas&&(this.canvas.width=f,this.canvas.height=m);var E=this.renderTarget;E&&(E.willResize(f,m)&&E.resize(f,m),E.texture!==C.glTexture&&this.renderer.deleteTexture(C.glTexture),this.setFromRenderTarget()),this.camera.setSize(f,m),C.width=f,C.height=m,S.setSize(f,m),this.width=f,this.height=m}else{var P=this.getSourceImage();S.cutX+f>P.width&&(f=P.width-S.cutX),S.cutY+m>P.height&&(m=P.height-S.cutY),S.setSize(f,m,S.cutX,S.cutY)}return this},setFromRenderTarget:function(){var f=this.get(),m=f.source,y=this.renderTarget;return m.isRenderTexture=!0,m.isGLTexture=!0,m.glTexture=y.texture,this},setIsSpriteTexture:function(f){return this.isSpriteTexture=f,this},fill:function(f,m,y,S,C,E){var P=this.camera,A=this.renderer;m===void 0&&(m=1),y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=this.width),E===void 0&&(E=this.height);var F=f>>16&255,G=f>>8&255,D=f&255,L=this.renderTarget;if(P.preRender(),L){L.bind(!0);var b=this.pipeline.manager.set(this.pipeline),I=A.width/L.width,N=A.height/L.height,Z=L.height-(S+E);b.drawFillRect(y*I,Z*N,C*I,E*N,c.getTintFromFloats(D/255,G/255,F/255,1),m),L.unbind(!0)}else{var U=this.context;A.setContext(U),U.globalCompositeOperation="source-over",U.fillStyle="rgba("+F+","+G+","+D+","+m+")",U.fillRect(y,S,C,E),A.setContext()}return this.dirty=!0,this},clear:function(f,m,y,S){if(this.dirty){var C=this.context,E=this.renderTarget;E?E.clear(f,m,y,S):C&&(f!==void 0&&m!==void 0&&y!==void 0&&S!==void 0?C.clearRect(f,m,y,S):(C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,this.width,this.height),C.restore())),this.dirty=!1}return this},stamp:function(f,m,y,S,C){y===void 0&&(y=0),S===void 0&&(S=0);var E=s(C,"alpha",1),P=s(C,"tint",16777215),A=s(C,"angle",0),F=s(C,"rotation",0),G=s(C,"scale",1),D=s(C,"scaleX",G),L=s(C,"scaleY",G),b=s(C,"originX",.5),I=s(C,"originY",.5),N=s(C,"blendMode",0),Z=s(C,"erase",!1),U=s(C,"skipBatch",!1),W=this.manager.resetStamp(E,P);return W.setAngle(0),A!==0?W.setAngle(A):F!==0&&W.setRotation(F),W.setScale(D,L),W.setTexture(f,m),W.setOrigin(b,I),W.setBlendMode(N),Z&&(this._eraseMode=!0),U?this.batchGameObject(W,y,S):this.draw(W,y,S),Z&&(this._eraseMode=!1),this},erase:function(f,m,y){return this._eraseMode=!0,this.draw(f,m,y),this._eraseMode=!1,this},draw:function(f,m,y,S,C){return this.beginDraw(),this.batchDraw(f,m,y,S,C),this.endDraw(),this},drawFrame:function(f,m,y,S,C,E){return this.beginDraw(),this.batchDrawFrame(f,m,y,S,C,E),this.endDraw(),this},repeat:function(f,m,y,S,C,E,P,A,F){if(y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=this.width),E===void 0&&(E=this.height),P===void 0&&(P=1),A===void 0&&(A=16777215),F===void 0&&(F=!1),f instanceof e?m=f:m=this.manager.getFrame(f,m),!m)return this;var G=this.manager.resetStamp(P,A);G.setFrame(m),G.setOrigin(0);var D=m.width,L=m.height;C=Math.floor(C),E=Math.floor(E);var b=Math.ceil(C/D),I=Math.ceil(E/L),N=b*D-C,Z=I*L-E;N>0&&(N=D-N),Z>0&&(Z=L-Z),y<0&&(b+=Math.ceil(Math.abs(y)/D)),S<0&&(I+=Math.ceil(Math.abs(S)/L));var U=y,W=S,X=!1,V=this.manager.stampCrop.setTo(0,0,D,L);F||this.beginDraw();for(var O=0;O<I;O++){if(W+L<0){W+=L;continue}for(var z=0;z<b;z++){if(X=!1,U+D<0){U+=D;continue}else U<0&&(X=!0,V.width=D+U,V.x=D-V.width);W<0&&(X=!0,V.height=L+W,V.y=L-V.height),N>0&&z===b-1&&(X=!0,V.width=N),Z>0&&O===I-1&&(X=!0,V.height=Z),X&&G.setCrop(V),this.batchGameObject(G,U,W),G.isCropped=!1,V.setTo(0,0,D,L),U+=D}U=y,W+=L}return F||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var f=this.camera,m=this.renderer,y=this.renderTarget;f.preRender(),y?m.beginCapture(y.width,y.height):m.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(f,m,y,S,C){return Array.isArray(f)||(f=[f]),this.batchList(f,m,y,S,C),this},batchDrawFrame:function(f,m,y,S,C,E){y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=1),E===void 0&&(E=16777215);var P=this.manager.getFrame(f,m);return P&&(this.renderTarget?this.pipeline.batchTextureFrame(P,y,S,E,C,this.camera.matrix,null):this.batchTextureFrame(P,y,S,C,E)),this},endDraw:function(f){if(f===void 0&&(f=this._eraseMode),this.isDrawing){var m=this.renderer,y=this.renderTarget;if(y){var S=m.endCapture(),C=m.pipelines.setUtility();C.blitFrame(S,y,1,!1,!1,f,this.isSpriteTexture),m.resetScissor(),m.resetViewport()}else m.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(f,m,y,S,C){var E=f.length;if(E!==0)for(var P=0;P<E;P++){var A=f[P];!A||A===this||(A.renderWebGL||A.renderCanvas?this.batchGameObject(A,m,y):A.isParent||A.list?this.batchGroup(A.getChildren(),m,y):typeof A=="string"?this.batchTextureFrameKey(A,null,m,y,S,C):A instanceof e?this.batchTextureFrame(A,m,y,S,C):Array.isArray(A)&&this.batchList(A,m,y,S,C))}},batchGroup:function(f,m,y){m===void 0&&(m=0),y===void 0&&(y=0);for(var S=0;S<f.length;S++){var C=f[S];C.willRender(this.camera)&&this.batchGameObject(C,C.x+m,C.y+y)}},batchGameObject:function(f,m,y){m===void 0&&(m=f.x),y===void 0&&(y=f.y);var S=f.x,C=f.y,E=this.camera,P=this.renderer,A=this._eraseMode,F=f.mask;if(f.setPosition(m,y),this.canvas){if(A){var G=f.blendMode;f.blendMode=h.ERASE}F&&F.preRenderCanvas(P,f,E),f.renderCanvas(P,f,E,null),F&&F.postRenderCanvas(P,f,E),A&&(f.blendMode=G)}else P&&(F&&F.preRenderWebGL(P,f,E),A||P.setBlendMode(f.blendMode),f.renderWebGL(P,f,E),F&&F.postRenderWebGL(P,E,this.renderTarget));f.setPosition(S,C)},batchTextureFrameKey:function(f,m,y,S,C,E){var P=this.manager.getFrame(f,m);P&&this.batchTextureFrame(P,y,S,C,E)},batchTextureFrame:function(f,m,y,S,C){m===void 0&&(m=0),y===void 0&&(y=0),S===void 0&&(S=1),C===void 0&&(C=16777215);var E=this.camera.matrix,P=this.renderTarget;if(P)this.pipeline.batchTextureFrame(f,m,y,C,S,E,null);else{var A=this.context,F=f.canvasData,G=f.source.image;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=S,E.setToContext(A),F.width>0&&F.height>0&&A.drawImage(G,F.x,F.y,F.width,F.height,m,y,F.width,F.height),A.restore()}},snapshotArea:function(f,m,y,S,C,E,P){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,C,!1,f,m,y,S,E,P):this.renderer.snapshotCanvas(this.canvas,C,!1,f,m,y,S,E,P),this},snapshot:function(f,m,y){return this.snapshotArea(0,0,this.width,this.height,f,m,y)},snapshotPixel:function(f,m,y){return this.snapshotArea(f,m,1,1,y,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(f,m,y,S){var C=this.manager.resetStamp();C.setTexture(this),C.setOrigin(0),C.renderWebGL(f,C,y,S)},renderCanvas:function(){},destroy:function(){var f=this.manager.stamp;f&&f.texture===this&&this.manager.resetStamp(),l.prototype.destroy.call(this),o.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});v.exports=d}),4327:((v,T,t)=>{var h=t(83419),g=t(45319),o=t(79291),a=new h({initialize:function(e,s,u,n,l,c,d){this.texture=e,this.name=s,this.source=e.source[u],this.sourceIndex=u,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(c,d,n,l)},setCutPosition:function(r,e){return r===void 0&&(r=0),e===void 0&&(e=0),this.cutX=r,this.cutY=e,this.updateUVs()},setCutSize:function(r,e){return this.cutWidth=r,this.cutHeight=e,this.updateUVs()},setSize:function(r,e,s,u){s===void 0&&(s=0),u===void 0&&(u=0),this.setCutPosition(s,u),this.setCutSize(r,e),this.width=r,this.height=e,this.halfWidth=Math.floor(r*.5),this.halfHeight=Math.floor(e*.5),this.centerX=Math.floor(r/2),this.centerY=Math.floor(e/2);var n=this.data,l=n.cut;l.x=s,l.y=u,l.w=r,l.h=e,l.r=s+r,l.b=u+e,n.sourceSize.w=r,n.sourceSize.h=e,n.spriteSourceSize.w=r,n.spriteSourceSize.h=e,n.radius=.5*Math.sqrt(r*r+e*e);var c=n.drawImage;return c.x=s,c.y=u,c.width=r,c.height=e,this.updateUVs()},setTrim:function(r,e,s,u,n,l){var c=this.data,d=c.spriteSourceSize;return c.trim=!0,c.sourceSize.w=r,c.sourceSize.h=e,d.x=s,d.y=u,d.w=n,d.h=l,d.r=s+n,d.b=u+l,this.x=s,this.y=u,this.width=n,this.height=l,this.halfWidth=n*.5,this.halfHeight=l*.5,this.centerX=Math.floor(n/2),this.centerY=Math.floor(l/2),this.updateUVs()},setScale9:function(r,e,s,u){var n=this.data;return n.scale9=!0,n.is3Slice=e===0&&u===this.height,n.scale9Borders.x=r,n.scale9Borders.y=e,n.scale9Borders.w=s,n.scale9Borders.h=u,this},setCropUVs:function(r,e,s,u,n,l,c){var d=this.cutX,f=this.cutY,m=this.cutWidth,y=this.cutHeight,S=this.realWidth,C=this.realHeight;e=g(e,0,S),s=g(s,0,C),u=g(u,0,S-e),n=g(n,0,C-s);var E=d+e,P=f+s,A=u,F=n,G=this.data;if(G.trim){var D=G.spriteSourceSize;u=g(u,0,D.x+m-e),n=g(n,0,D.y+y-s);var L=e+u,b=s+n,I=!(D.r<e||D.b<s||D.x>L||D.y>b);if(I){var N=Math.max(D.x,e),Z=Math.max(D.y,s),U=Math.min(D.r,L)-N,W=Math.min(D.b,b)-Z;A=U,F=W,l?E=d+(m-(N-D.x)-U):E=d+(N-D.x),c?P=f+(y-(Z-D.y)-W):P=f+(Z-D.y),e=N,s=Z,u=U,n=W}else E=0,P=0,A=0,F=0}else l&&(E=d+(m-e-u)),c&&(P=f+(y-s-n));var X=this.source.width,V=this.source.height;return r.u0=Math.max(0,E/X),r.v0=Math.max(0,P/V),r.u1=Math.min(1,(E+A)/X),r.v1=Math.min(1,(P+F)/V),r.x=e,r.y=s,r.cx=E,r.cy=P,r.cw=A,r.ch=F,r.width=u,r.height=n,r.flipX=l,r.flipY=c,r},updateCropUVs:function(r,e,s){return this.setCropUVs(r,r.x,r.y,r.width,r.height,e,s)},setUVs:function(r,e,s,u,n,l){var c=this.data.drawImage;return c.width=r,c.height=e,this.u0=s,this.v0=u,this.u1=n,this.v1=l,this},updateUVs:function(){var r=this.cutX,e=this.cutY,s=this.cutWidth,u=this.cutHeight,n=this.data.drawImage;n.width=s,n.height=u;var l=this.source.width,c=this.source.height;return this.u0=r/l,this.v0=e/c,this.u1=(r+s)/l,this.v1=(e+u)/c,this},updateUVsInverted:function(){var r=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/r,this.v0=this.cutY/e,this.u1=this.cutX/r,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var r=new a(this.texture,this.name,this.sourceIndex);return r.cutX=this.cutX,r.cutY=this.cutY,r.cutWidth=this.cutWidth,r.cutHeight=this.cutHeight,r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r.halfWidth=this.halfWidth,r.halfHeight=this.halfHeight,r.centerX=this.centerX,r.centerY=this.centerY,r.rotated=this.rotated,r.data=o(!0,r.data,this.data),r.updateUVs(),r},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});v.exports=a}),79237:((v,T,t)=>{var h=t(83419),g=t(4327),o=t(11876),a='Texture "%s" has no frame "%s"',r=new h({initialize:function(s,u,n,l,c){Array.isArray(n)||(n=[n]),this.manager=s,this.key=u,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var d=0;d<n.length;d++)this.source.push(new o(this,n[d],l,c))},add:function(e,s,u,n,l,c){if(this.has(e))return null;var d=new g(this,e,s,u,n,l,c);return this.frames[e]=d,this.firstFrame==="__BASE"&&(this.firstFrame=e),this.frameTotal++,d},remove:function(e){if(this.has(e)){var s=this.get(e);return s.destroy(),delete this.frames[e],!0}return!1},has:function(e){return this.frames.hasOwnProperty(e)},get:function(e){e||(e=this.firstFrame);var s=this.frames[e];return s||(console.warn(a,this.key,e),s=this.frames[this.firstFrame]),s},getTextureSourceIndex:function(e){for(var s=0;s<this.source.length;s++)if(this.source[s]===e)return s;return-1},getFramesFromTextureSource:function(e,s){s===void 0&&(s=!1);var u=[];for(var n in this.frames)if(!(n==="__BASE"&&!s)){var l=this.frames[n];l.sourceIndex===e&&u.push(l)}return u},getFrameBounds:function(e){e===void 0&&(e=0);for(var s=this.getFramesFromTextureSource(e,!0),u=s[0],n=u.cutX,l=u.cutY,c=u.cutX+u.cutWidth,d=u.cutY+u.cutHeight,f=1;f<s.length;f++){var m=s[f];m.cutX<n&&(n=m.cutX),m.cutY<l&&(l=m.cutY),m.cutX+m.cutWidth>c&&(c=m.cutX+m.cutWidth),m.cutY+m.cutHeight>d&&(d=m.cutY+m.cutHeight)}return{x:n,y:l,width:c-n,height:d-l}},getFrameNames:function(e){e===void 0&&(e=!1);var s=Object.keys(this.frames);if(!e){var u=s.indexOf("__BASE");u!==-1&&s.splice(u,1)}return s},getSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var s=this.frames[e];return s?s.source.image:(console.warn(a,this.key,e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var s=this.frames[e],u;return s?u=s.sourceIndex:(console.warn(a,this.key,e),u=this.frames.__BASE.sourceIndex),this.dataSource[u].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++){var u=this.source[s];this.dataSource.push(new o(this,e[s],u.width,u.height))}},setFilter:function(e){var s;for(s=0;s<this.source.length;s++)this.source[s].setFilter(e);for(s=0;s<this.dataSource.length;s++)this.dataSource[s].setFilter(e)},destroy:function(){var e,s=this.source,u=this.dataSource;for(e=0;e<s.length;e++)s[e]&&s[e].destroy();for(e=0;e<u.length;e++)u[e]&&u[e].destroy();for(var n in this.frames){var l=this.frames[n];l&&l.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});v.exports=r}),17130:((v,T,t)=>{var h=t(27919),g=t(57382),o=t(83419),a=t(40987),r=t(8054),e=t(81320),s=t(50792),u=t(69442),n=t(4327),l=t(8443),c=t(99584),d=t(35154),f=t(88571),m=t(41212),y=t(61309),S=t(87841),C=t(79237),E=new o({Extends:s,initialize:function(A){s.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=h.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new S,this.silentWarnings=!1,A.events.once(l.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(u.LOAD,this.updatePending,this),this.on(u.ERROR,this.updatePending,this);var P=this.game.config;P.defaultImage!==null&&this.addBase64("__DEFAULT",P.defaultImage),P.missingImage!==null&&this.addBase64("__MISSING",P.missingImage),P.whiteImage!==null&&this.addBase64("__WHITE",P.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(l.DESTROY,this.destroy,this),this.game.events.once(l.SYSTEM_READY,function(A){this.stamp=new f(A).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(u.LOAD),this.off(u.ERROR),this.emit(u.READY))},checkKey:function(P){return!P||typeof P!="string"||this.exists(P)?(this.silentWarnings||console.error("Texture key already in use: "+P),!1):!0},remove:function(P){if(typeof P=="string")if(this.exists(P))P=this.get(P);else return this.silentWarnings||console.warn("No texture found matching key: "+P),this;var A=P.key;return this.list.hasOwnProperty(A)&&(P.destroy(),this.emit(u.REMOVE,A),this.emit(u.REMOVE_KEY+A)),this},removeKey:function(P){return this.list.hasOwnProperty(P)&&delete this.list[P],this},addBase64:function(P,A){if(this.checkKey(P)){var F=this,G=new Image;G.onerror=function(){F.emit(u.ERROR,P)},G.onload=function(){var D=F.create(P,G);D&&(y.Image(D,0),F.emit(u.ADD,P,D),F.emit(u.ADD_KEY+P,D),F.emit(u.LOAD,P,D))},G.src=A}return this},getBase64:function(P,A,F,G){F===void 0&&(F="image/png"),G===void 0&&(G=.92);var D="",L=this.getFrame(P,A);if(L&&(L.source.isRenderTexture||L.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(L){var b=L.canvasData,I=h.create2D(this,b.width,b.height),N=I.getContext("2d",{willReadFrequently:!0});b.width>0&&b.height>0&&N.drawImage(L.source.image,b.x,b.y,b.width,b.height,0,0,b.width,b.height),D=I.toDataURL(F,G),h.remove(I)}return D},addImage:function(P,A,F){var G=null;return this.checkKey(P)&&(G=this.create(P,A),y.Image(G,0),F&&G.setDataSource(F),this.emit(u.ADD,P,G),this.emit(u.ADD_KEY+P,G)),G},addGLTexture:function(P,A){var F=null;if(this.checkKey(P)){var G=A.width,D=A.height;F=this.create(P,A,G,D),F.add("__BASE",0,0,0,G,D),this.emit(u.ADD,P,F),this.emit(u.ADD_KEY+P,F)}return F},addCompressedTexture:function(P,A,F){var G=null;if(this.checkKey(P)){if(G=this.create(P,A),G.add("__BASE",0,0,0,A.width,A.height),F){var D=function(b,I,N){Array.isArray(N.textures)||Array.isArray(N.frames)?y.JSONArray(b,I,N):y.JSONHash(b,I,N)};if(Array.isArray(F))for(var L=0;L<F.length;L++)D(G,L,F[L]);else D(G,0,F)}this.emit(u.ADD,P,G),this.emit(u.ADD_KEY+P,G)}return G},addRenderTexture:function(P,A){var F=null;return this.checkKey(P)&&(F=this.create(P,A),F.add("__BASE",0,0,0,A.width,A.height),this.emit(u.ADD,P,F),this.emit(u.ADD_KEY+P,F)),F},generate:function(P,A){if(this.checkKey(P)){var F=h.create(this,1,1);return A.canvas=F,c(A),this.addCanvas(P,F)}else return null},createCanvas:function(P,A,F){if(A===void 0&&(A=256),F===void 0&&(F=256),this.checkKey(P)){var G=h.create(this,A,F,r.CANVAS,!0);return this.addCanvas(P,G)}return null},addCanvas:function(P,A,F){F===void 0&&(F=!1);var G=null;return F?G=new g(this,P,A,A.width,A.height):this.checkKey(P)&&(G=new g(this,P,A,A.width,A.height),this.list[P]=G,this.emit(u.ADD,P,G),this.emit(u.ADD_KEY+P,G)),G},addDynamicTexture:function(P,A,F){var G=null;return typeof P=="string"&&!this.exists(P)?G=new e(this,P,A,F):(G=P,P=G.key),this.checkKey(P)?(this.list[P]=G,this.emit(u.ADD,P,G),this.emit(u.ADD_KEY+P,G)):G=null,G},addAtlas:function(P,A,F,G){return Array.isArray(F.textures)||Array.isArray(F.frames)?this.addAtlasJSONArray(P,A,F,G):this.addAtlasJSONHash(P,A,F,G)},addAtlasJSONArray:function(P,A,F,G){var D=null;if(A instanceof C?(P=A.key,D=A):this.checkKey(P)&&(D=this.create(P,A)),D){if(Array.isArray(F))for(var L=F.length===1,b=0;b<D.source.length;b++){var I=L?F[0]:F[b];y.JSONArray(D,b,I)}else y.JSONArray(D,0,F);G&&D.setDataSource(G),this.emit(u.ADD,P,D),this.emit(u.ADD_KEY+P,D)}return D},addAtlasJSONHash:function(P,A,F,G){var D=null;if(A instanceof C?(P=A.key,D=A):this.checkKey(P)&&(D=this.create(P,A)),D){if(Array.isArray(F))for(var L=0;L<F.length;L++)y.JSONHash(D,L,F[L]);else y.JSONHash(D,0,F);G&&D.setDataSource(G),this.emit(u.ADD,P,D),this.emit(u.ADD_KEY+P,D)}return D},addAtlasXML:function(P,A,F,G){var D=null;return A instanceof C?(P=A.key,D=A):this.checkKey(P)&&(D=this.create(P,A)),D&&(y.AtlasXML(D,0,F),G&&D.setDataSource(G),this.emit(u.ADD,P,D),this.emit(u.ADD_KEY+P,D)),D},addUnityAtlas:function(P,A,F,G){var D=null;return A instanceof C?(P=A.key,D=A):this.checkKey(P)&&(D=this.create(P,A)),D&&(y.UnityYAML(D,0,F),G&&D.setDataSource(G),this.emit(u.ADD,P,D),this.emit(u.ADD_KEY+P,D)),D},addSpriteSheet:function(P,A,F,G){var D=null;if(A instanceof C?(P=A.key,D=A):this.checkKey(P)&&(D=this.create(P,A)),D){var L=D.source[0].width,b=D.source[0].height;y.SpriteSheet(D,0,0,0,L,b,F),G&&D.setDataSource(G),this.emit(u.ADD,P,D),this.emit(u.ADD_KEY+P,D)}return D},addSpriteSheetFromAtlas:function(P,A){if(!this.checkKey(P))return null;var F=d(A,"atlas",null),G=d(A,"frame",null);if(!(!F||!G)){var D=this.get(F),L=D.get(G);if(L){var b=L.source.image;b||(b=L.source.glTexture);var I=this.create(P,b);return L.trimmed?y.SpriteSheetFromAtlas(I,L,A):y.SpriteSheet(I,0,L.cutX,L.cutY,L.cutWidth,L.cutHeight,A),this.emit(u.ADD,P,I),this.emit(u.ADD_KEY+P,I),I}}},addUint8Array:function(P,A,F,G){if(!this.checkKey(P)||A.length/4!==F*G)return null;var D=this.create(P,A,F,G);return D.add("__BASE",0,0,0,F,G),this.emit(u.ADD,P,D),this.emit(u.ADD_KEY+P,D),D},create:function(P,A,F,G){var D=null;return this.checkKey(P)&&(D=new C(this,P,A,F,G),this.list[P]=D),D},exists:function(P){return this.list.hasOwnProperty(P)},get:function(P){return P===void 0&&(P="__DEFAULT"),this.list[P]?this.list[P]:P instanceof C?P:P instanceof n?P.texture:this.list.__MISSING},cloneFrame:function(P,A){if(this.list[P])return this.list[P].get(A).clone()},getFrame:function(P,A){if(this.list[P])return this.list[P].get(A)},parseFrame:function(P){if(P){if(typeof P=="string")return this.getFrame(P);if(Array.isArray(P)&&P.length===2)return this.getFrame(P[0],P[1]);if(m(P))return this.getFrame(P.key,P.frame);if(P instanceof C)return P.get();if(P instanceof n)return P}else return},getTextureKeys:function(){var P=[];for(var A in this.list)A!=="__DEFAULT"&&A!=="__MISSING"&&A!=="__WHITE"&&A!=="__NORMAL"&&P.push(A);return P},getPixel:function(P,A,F,G){var D=this.getFrame(F,G);if(D){P-=D.x,A-=D.y;var L=D.data.cut;if(P+=L.x,A+=L.y,P>=L.x&&P<L.r&&A>=L.y&&A<L.b){var b=this._tempContext;b.clearRect(0,0,1,1),b.drawImage(D.source.image,P,A,1,1,0,0,1,1);var I=b.getImageData(0,0,1,1);return new a(I.data[0],I.data[1],I.data[2],I.data[3])}}return null},getPixelAlpha:function(P,A,F,G){var D=this.getFrame(F,G);if(D){P-=D.x,A-=D.y;var L=D.data.cut;if(P+=L.x,A+=L.y,P>=L.x&&P<L.r&&A>=L.y&&A<L.b){var b=this._tempContext;b.clearRect(0,0,1,1),b.drawImage(D.source.image,P,A,1,1,0,0,1,1);var I=b.getImageData(0,0,1,1);return I.data[3]}}return null},setTexture:function(P,A,F){return this.list[A]&&(P.texture=this.list[A],P.frame=P.texture.get(F)),P},renameTexture:function(P,A){var F=this.get(P);return F&&P!==A?(F.key=A,this.list[A]=F,delete this.list[P],!0):!1},each:function(P,A){for(var F=[null],G=1;G<arguments.length;G++)F.push(arguments[G]);for(var D in this.list)F[0]=this.list[D],P.apply(A,F)},resetStamp:function(P,A){P===void 0&&(P=1),A===void 0&&(A=16777215);var F=this.stamp;return F.setCrop(),F.setPosition(0),F.setAngle(0),F.setScale(1),F.setAlpha(P),F.setTint(A),F.setTexture("__WHITE"),F},destroy:function(){for(var P in this.list)this.list[P].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,h.remove(this._tempCanvas)}});v.exports=E}),11876:((v,T,t)=>{var h=t(27919),g=t(83419),o=t(50030),a=t(29795),r=t(82751),e=new g({initialize:function(u,n,l,c,d){d===void 0&&(d=!1);var f=u.manager.game;this.renderer=f.renderer,this.texture=u,this.source=n,this.image=n.compressed?null:n,this.compressionAlgorithm=n.compressed?n.format:null,this.resolution=1,this.width=l||n.naturalWidth||n.videoWidth||n.width||0,this.height=c||n.naturalHeight||n.videoHeight||n.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=n instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&n instanceof HTMLVideoElement,this.isRenderTexture=n.type==="RenderTexture"||n.type==="DynamicTexture",this.isGLTexture=n instanceof r,this.isPowerOf2=o(this.width,this.height),this.glTexture=null,this.flipY=d,this.init(f)},init:function(s){var u=this.renderer;if(u){var n=this.source;if(u.gl){var l=this.image,c=this.flipY,d=this.width,f=this.height,m=this.scaleMode;this.isCanvas?this.glTexture=u.createCanvasTexture(l,!1,c):this.isVideo?this.glTexture=u.createVideoTexture(l,!1,c):this.isRenderTexture?this.glTexture=u.createTextureFromSource(null,d,f,m):this.isGLTexture?this.glTexture=n:this.compressionAlgorithm?this.glTexture=u.createTextureFromSource(n,void 0,void 0,m):n instanceof Uint8Array?this.glTexture=u.createUint8ArrayTexture(n,d,f,m):this.glTexture=u.createTextureFromSource(l,d,f,m)}else this.isRenderTexture&&(this.image=n.canvas)}s.config.antialias||this.setFilter(1)},setFilter:function(s){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,s),this.scaleMode=s},setFlipY:function(s){return s===void 0&&(s=!0),s===this.flipY?this:(this.flipY=s,this.update(),this)},update:function(){var s=this.renderer,u=this.image,n=this.flipY,l=s.gl;l&&this.isCanvas?s.updateCanvasTexture(u,this.glTexture,n):l&&this.isVideo&&s.updateVideoTexture(u,this.glTexture,n)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&h.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});v.exports=e}),19673:(v=>{var T={LINEAR:0,NEAREST:1};v.exports=T}),44538:(v=>{v.exports="addtexture"}),63486:(v=>{v.exports="addtexture-"}),94851:(v=>{v.exports="onerror"}),29099:(v=>{v.exports="onload"}),8678:(v=>{v.exports="ready"}),86415:(v=>{v.exports="removetexture"}),30879:(v=>{v.exports="removetexture-"}),69442:((v,T,t)=>{v.exports={ADD:t(44538),ADD_KEY:t(63486),ERROR:t(94851),LOAD:t(29099),READY:t(8678),REMOVE:t(86415),REMOVE_KEY:t(30879)}}),27458:((v,T,t)=>{var h=t(79291),g=t(19673),o={CanvasTexture:t(57382),DynamicTexture:t(81320),Events:t(69442),FilterMode:g,Frame:t(4327),Parsers:t(61309),Texture:t(79237),TextureManager:t(17130),TextureSource:t(11876)};o=h(!1,o,g),v.exports=o}),89905:(v=>{var T=function(t,h,g){if(!g.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=t.source[h];t.add("__BASE",h,0,0,o.width,o.height);for(var a=g.getElementsByTagName("SubTexture"),r,e=0;e<a.length;e++){var s=a[e].attributes,u=s.name.value,n=parseInt(s.x.value,10),l=parseInt(s.y.value,10),c=parseInt(s.width.value,10),d=parseInt(s.height.value,10);if(r=t.add(u,h,n,l,c,d),s.frameX){var f=Math.abs(parseInt(s.frameX.value,10)),m=Math.abs(parseInt(s.frameY.value,10)),y=parseInt(s.frameWidth.value,10),S=parseInt(s.frameHeight.value,10);r.setTrim(c,d,f,m,y,S)}}return t};v.exports=T}),72893:(v=>{var T=function(t,h){var g=t.source[h];return t.add("__BASE",h,0,0,g.width,g.height),t};v.exports=T}),4832:(v=>{var T=function(t,h){var g=t.source[h];return t.add("__BASE",h,0,0,g.width,g.height),t};v.exports=T}),78566:((v,T,t)=>{var h=t(41786),g=function(o,a,r){if(!r.frames&&!r.textures){console.warn("Invalid Texture Atlas JSON Array");return}var e=o.source[a];o.add("__BASE",a,0,0,e.width,e.height);for(var s=Array.isArray(r.textures)?r.textures[a].frames:r.frames,u,n=0;n<s.length;n++){var l=s[n];if(u=o.add(l.filename,a,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!u){console.warn("Invalid atlas json, frame already exists: "+l.filename);continue}l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var c=l.anchor||l.pivot;c&&(u.customPivot=!0,u.pivotX=c.x,u.pivotY=c.y),l.scale9Borders&&u.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),u.customData=h(l)}for(var d in r)d!=="frames"&&(Array.isArray(r[d])?o.customData[d]=r[d].slice(0):o.customData[d]=r[d]);return o};v.exports=g}),39711:((v,T,t)=>{var h=t(41786),g=function(o,a,r){if(!r.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var e=o.source[a];o.add("__BASE",a,0,0,e.width,e.height);var s=r.frames,u;for(var n in s)if(s.hasOwnProperty(n)){var l=s[n];if(u=o.add(n,a,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!u){console.warn("Invalid atlas json, frame already exists: "+n);continue}l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var c=l.anchor||l.pivot;c&&(u.customPivot=!0,u.pivotX=c.x,u.pivotY=c.y),l.scale9Borders&&u.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),u.customData=h(l)}for(var d in r)d!=="frames"&&(Array.isArray(r[d])?o.customData[d]=r[d].slice(0):o.customData[d]=r[d]);return o};v.exports=g}),31403:(v=>{var T=function(t){var h=[171,75,84,88,32,49,49,187,13,10,26,10],g,o=new Uint8Array(t,0,12);for(g=0;g<o.length;g++)if(o[g]!==h[g]){console.warn("KTXParser - Invalid file format");return}var a=Uint32Array.BYTES_PER_ELEMENT,r=new DataView(t,12,13*a),e=r.getUint32(0,!0)===67305985,s=r.getUint32(1*a,e);if(s!==0){console.warn("KTXParser - Only compressed formats supported");return}var u=r.getUint32(4*a,e),n=r.getUint32(6*a,e),l=r.getUint32(7*a,e),c=Math.max(1,r.getUint32(11*a,e)),d=r.getUint32(12*a,e),f=new Array(c),m=64+d,y=n,S=l;for(g=0;g<c;g++){var C=new Int32Array(t,m,1)[0];m+=4,f[g]={data:new Uint8Array(t,m,C),width:y,height:S},y=Math.max(1,y>>1),S=Math.max(1,S>>1),m+=C}return{mipmaps:f,width:n,height:l,internalFormat:u,compressed:!0,generateMipmap:!1}};v.exports=T}),82038:(v=>{function T(A,F,G,D,L,b,I){return I===void 0&&(I=16),Math.floor((A+G)/L)*Math.floor((F+D)/b)*I}function t(A,F){return A=Math.max(A,16),F=Math.max(F,8),A*F/4}function h(A,F){return A=Math.max(A,8),F=Math.max(F,8),A*F/2}function g(A,F){return Math.ceil(A/4)*Math.ceil(F/4)*16}function o(A,F){return T(A,F,3,3,4,4,8)}function a(A,F){return T(A,F,3,3,4,4)}function r(A,F){return T(A,F,4,3,5,4)}function e(A,F){return T(A,F,4,4,5,5)}function s(A,F){return T(A,F,5,4,6,5)}function u(A,F){return T(A,F,5,5,6,6)}function n(A,F){return T(A,F,7,4,8,5)}function l(A,F){return T(A,F,7,5,8,6)}function c(A,F){return T(A,F,7,7,8,8)}function d(A,F){return T(A,F,9,4,10,5)}function f(A,F){return T(A,F,9,5,10,6)}function m(A,F){return T(A,F,9,7,10,8)}function y(A,F){return T(A,F,9,9,10,10)}function S(A,F){return T(A,F,11,9,12,10)}function C(A,F){return T(A,F,11,11,12,12)}var E={0:{sizeFunc:t,glFormat:[35841]},1:{sizeFunc:t,glFormat:[35843]},2:{sizeFunc:h,glFormat:[35840]},3:{sizeFunc:h,glFormat:[35842]},6:{sizeFunc:o,glFormat:[36196]},7:{sizeFunc:o,glFormat:[33776,35916]},8:{sizeFunc:a,glFormat:[33777,35917]},9:{sizeFunc:a,glFormat:[33778,35918]},11:{sizeFunc:a,glFormat:[33779,35919]},14:{sizeFunc:g,glFormat:[36494,36495]},15:{sizeFunc:g,glFormat:[36492,36493]},22:{sizeFunc:o,glFormat:[37492,37493]},23:{sizeFunc:a,glFormat:[37496,37497]},24:{sizeFunc:o,glFormat:[37494,37495]},25:{sizeFunc:o,glFormat:[37488]},26:{sizeFunc:a,glFormat:[37490]},27:{sizeFunc:a,glFormat:[37808,37840]},28:{sizeFunc:r,glFormat:[37809,37841]},29:{sizeFunc:e,glFormat:[37810,37842]},30:{sizeFunc:s,glFormat:[37811,37843]},31:{sizeFunc:u,glFormat:[37812,37844]},32:{sizeFunc:n,glFormat:[37813,37845]},33:{sizeFunc:l,glFormat:[37814,37846]},34:{sizeFunc:c,glFormat:[37815,37847]},35:{sizeFunc:d,glFormat:[37816,37848]},36:{sizeFunc:f,glFormat:[37817,37849]},37:{sizeFunc:m,glFormat:[37818,37850]},38:{sizeFunc:y,glFormat:[37819,37851]},39:{sizeFunc:S,glFormat:[37820,37852]},40:{sizeFunc:C,glFormat:[37821,37853]}},P=function(A){for(var F=new Uint32Array(A,0,13),G=F[0],D=G===55727696,L=D?F[2]:F[3],b=F[4],I=E[L].glFormat[b],N=E[L].sizeFunc,Z=F[11],U=F[7],W=F[6],X=52+F[12],V=new Uint8Array(A,X),O=new Array(Z),z=0,B=U,Y=W,k=0;k<Z;k++){var J=N(B,Y);O[k]={data:new Uint8Array(V.buffer,V.byteOffset+z,J),width:B,height:Y},B=Math.max(1,B>>1),Y=Math.max(1,Y>>1),z+=J}return{mipmaps:O,width:U,height:W,internalFormat:I,compressed:!0,generateMipmap:!1}};v.exports=P}),75549:((v,T,t)=>{var h=t(95540),g=function(o,a,r,e,s,u,n){var l=h(n,"frameWidth",null),c=h(n,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var d=o.source[a];o.add("__BASE",a,0,0,d.width,d.height);var f=h(n,"startFrame",0),m=h(n,"endFrame",-1),y=h(n,"margin",0),S=h(n,"spacing",0),C=Math.floor((s-y+S)/(l+S)),E=Math.floor((u-y+S)/(c+S)),P=C*E;P===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",o.key),(f>P||f<-P)&&(f=0),f<0&&(f=P+f),(m===-1||m>P||m<f)&&(m=P);for(var A=y,F=y,G=0,D=0,L=0,b=0;b<P;b++){G=0,D=0;var I=A+l,N=F+c;I>s&&(G=I-s),N>u&&(D=N-u),b>=f&&b<=m&&(o.add(L,a,r+A,e+F,l-G,c-D),L++),A+=l+S,A+l>s&&(A=y,F+=c+S)}return o};v.exports=g}),47534:((v,T,t)=>{var h=t(95540),g=function(o,a,r){var e=h(r,"frameWidth",null),s=h(r,"frameHeight",e);if(!e)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var u=o.source[0];o.add("__BASE",0,0,0,u.width,u.height),h(r,"startFrame",0),h(r,"endFrame",-1);for(var n=h(r,"margin",0),l=h(r,"spacing",0),c=a.cutX,d=a.cutY,f=a.cutWidth,m=a.cutHeight,y=a.realWidth,S=a.realHeight,C=Math.floor((y-n+l)/(e+l)),E=Math.floor((S-n+l)/(s+l)),P=a.x,A=e-P,F=e-(y-f-P),G=a.y,D=s-G,L=s-(S-m-G),b,I=n,N=n,Z=0,U=0,W=0;W<E;W++){for(var X=W===0,V=W===E-1,O=0;O<C;O++){var z=O===0,B=O===C-1;if(b=o.add(Z,U,c+I,d+N,e,s),z||X||B||V){var Y=z?P:0,k=X?G:0,J=0,j=0;z&&(J+=e-A),B&&(J+=e-F),X&&(j+=s-D),V&&(j+=s-L);var tt=e-J,ut=s-j;b.cutWidth=tt,b.cutHeight=ut,b.setTrim(e,s,Y,k,tt,ut)}I+=l,z?I+=A:B?I+=F:I+=e,Z++}I=n,N+=l,X?N+=D:V?N+=L:N+=s}return o};v.exports=g}),86147:(v=>{var T=0,t=function(g,o,a,r){var e=T-r.y-r.height;g.add(a,o,r.x,e,r.width,r.height)},h=function(g,o,a){var r=g.source[o];g.add("__BASE",o,0,0,r.width,r.height),T=r.height;for(var e=a.split(`
`),s=/^[ ]*(- )*(\w+)+[: ]+(.*)/,u="",n="",l={x:0,y:0,width:0,height:0},c=0;c<e.length;c++){var d=e[c].match(s);if(d){var f=d[1]==="- ",m=d[2],y=d[3];if(f&&(n!==u&&(t(g,o,n,l),u=n),l={x:0,y:0,width:0,height:0}),m==="name"){n=y;continue}switch(m){case"x":case"y":case"width":case"height":l[m]=parseInt(y,10);break}}}return n!==u&&t(g,o,n,l),g};v.exports=h}),55222:((v,T,t)=>{var h=t(50030),g=function(u){for(var n=u.mipmaps,l=1;l<n.length;l++){var c=n[l].width,d=n[l].height;if(!h(c,d))return console.warn("Mip level "+l+" is not a power-of-two size: "+c+"x"+d),!1}var f=s[u.internalFormat];return f?f(u):(console.warn("No format checker found for internal format "+u.internalFormat+". Assuming valid."),!0)};function o(u){for(var n=u.mipmaps,l=0;l<n.length;l++){var c=n[l].width,d=n[l].height;if((c<<l)%4!==0||(d<<l)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+l+" is "+c+"x"+d),!1}return!0}function a(){return!0}function r(u){var n=u.mipmaps,l=n[0];return h(l.width,l.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+l.width+"x"+l.height),!1)}function e(u){var n=u.mipmaps,l=n[0];return l.width%4!==0||l.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+l.width+"x"+l.height+" pixels"),!1):!0}var s={37488:a,37489:a,37490:a,37491:a,37492:a,37493:a,37494:a,37495:a,37496:a,37497:a,36196:a,37808:a,37809:a,37810:a,37811:a,37812:a,37813:a,37814:a,37815:a,37816:a,37817:a,37818:a,37819:a,37820:a,37821:a,37840:a,37841:a,37842:a,37843:a,37844:a,37845:a,37846:a,37847:a,37848:a,37849:a,37850:a,37851:a,37852:a,37853:a,36492:o,36493:o,36494:o,36495:o,36283:o,36284:o,36285:o,36286:o,35840:r,35841:r,35842:r,35843:r,33776:o,33777:o,33778:o,33779:o,35916:e,35917:e,35918:e,35919:e};v.exports=g}),61309:((v,T,t)=>{v.exports={AtlasXML:t(89905),Canvas:t(72893),Image:t(4832),JSONArray:t(78566),JSONHash:t(39711),KTXParser:t(31403),PVRParser:t(82038),SpriteSheet:t(75549),SpriteSheetFromAtlas:t(47534),UnityYAML:t(86147)}}),80341:(v=>{v.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}),16536:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a,r,e,s,u,n,l){(e===void 0||e<=0)&&(e=32),(s===void 0||s<=0)&&(s=32),u===void 0&&(u=0),n===void 0&&(n=0),this.name=a,this.firstgid=r|0,this.imageWidth=e|0,this.imageHeight=s|0,this.imageMargin=u|0,this.imageSpacing=n|0,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(o){return o>=this.firstgid&&o<this.firstgid+this.total},addImage:function(o,a,r,e){return this.images.push({gid:o,image:a,width:r,height:e}),this.total++,this}});v.exports=g}),27462:((v,T,t)=>{var h=t(83419),g=new h({initialize:function(a){if(this.gids=[],a!==void 0)for(var r=0;r<a.length;++r)for(var e=a[r],s=0;s<e.total;++s)this.gids[e.firstgid+s]=e;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(o){this.gids=o?this._gids:void 0}},getTypeIncludingTile:function(o){if(o.type!==void 0&&o.type!=="")return o.type;if(!(!this.gids||o.gid===void 0)){var a=this.gids[o.gid];if(a){var r=a.getTileData(o.gid);if(r)return r.type}}},setTextureAndFrame:function(o,a,r,e){if(a===null&&this.gids&&e.gid!==void 0){var s=this.gids[e.gid];s&&(a===null&&s.image!==void 0&&(a=s.image.key),r===null&&(r=e.gid-s.firstgid),o.scene.textures.getFrame(a,r)||(a=null,r=null))}o.setTexture(a,r)},setPropertiesFromTiledObject:function(o,a){if(this.gids!==void 0&&a.gid!==void 0){var r=this.gids[a.gid];r!==void 0&&this.setFromJSON(o,r.getTileProperties(a.gid))}this.setFromJSON(o,a.properties)},setFromJSON:function(o,a){if(a){if(Array.isArray(a)){for(var r=0;r<a.length;r++){var e=a[r];o[e.name]!==void 0?o[e.name]=e.value:o.setData(e.name,e.value)}return}for(var s in a)o[s]!==void 0?o[s]=a[s]:o.setData(s,a[s])}}});v.exports=g}),31989:((v,T,t)=>{var h=t(80341),g=t(87010),o=t(46177),a=t(49075),r=function(e,s,u,n,l,c,d,f){u===void 0&&(u=32),n===void 0&&(n=32),l===void 0&&(l=10),c===void 0&&(c=10),f===void 0&&(f=!1);var m=null;if(Array.isArray(d)){var y=s!==void 0?s:"map";m=o(y,h.ARRAY_2D,d,u,n,f)}else if(s!==void 0){var S=e.cache.tilemap.get(s);S?m=o(s,S.format,S.data,u,n,f):console.warn("No map data found for key "+s)}return m===null&&(m=new g({tileWidth:u,tileHeight:n,width:l,height:c})),new a(e,m)};v.exports=r}),23029:((v,T,t)=>{var h=t(83419),g=t(31401),o=t(91907),a=t(62644),r=t(93232),e=new h({Mixins:[g.AlphaSingle,g.Flip,g.Visible],initialize:function(u,n,l,c,d,f,m,y){this.layer=u,this.index=n,this.x=l,this.y=c,this.width=d,this.height=f,this.right,this.bottom,this.baseWidth=m!==void 0?m:d,this.baseHeight=y!==void 0?y:f,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(s,u){return!(s<this.pixelX||u<this.pixelY||s>this.right||u>this.bottom)},copy:function(s){return this.index=s.index,this.alpha=s.alpha,this.properties=a(s.properties),this.visible=s.visible,this.setFlip(s.flipX,s.flipY),this.tint=s.tint,this.rotation=s.rotation,this.collideUp=s.collideUp,this.collideDown=s.collideDown,this.collideLeft=s.collideLeft,this.collideRight=s.collideRight,this.collisionCallback=s.collisionCallback,this.collisionCallbackContext=s.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(s){var u=this.tilemapLayer;if(u){var n=u.tileToWorldXY(this.x,this.y,void 0,s);return n.x}return this.x*this.baseWidth},getRight:function(s){var u=this.tilemapLayer;return u?this.getLeft(s)+this.width*u.scaleX:this.getLeft(s)+this.width},getTop:function(s){var u=this.tilemapLayer;if(u){var n=u.tileToWorldXY(this.x,this.y,void 0,s);return n.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(s){var u=this.tilemapLayer;return u?this.getTop(s)+this.height*u.scaleY:this.getTop(s)+this.height},getBounds:function(s,u){return u===void 0&&(u=new r),u.x=this.getLeft(s),u.y=this.getTop(s),u.width=this.getRight(s)-u.x,u.height=this.getBottom(s)-u.y,u},getCenterX:function(s){return(this.getLeft(s)+this.getRight(s))/2},getCenterY:function(s){return(this.getTop(s)+this.getBottom(s))/2},intersects:function(s,u,n,l){return!(n<=this.pixelX||l<=this.pixelY||s>=this.right||u>=this.bottom)},isInteresting:function(s,u){return s&&u?this.canCollide||this.hasInterestingFace:s?this.collides:u?this.hasInterestingFace:!1},resetCollision:function(s){if(s===void 0&&(s=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,s){var u=this.tilemapLayer;u&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(s,u,n,l,c){if(u===void 0&&(u=s),n===void 0&&(n=s),l===void 0&&(l=s),c===void 0&&(c=!0),this.collideLeft=s,this.collideRight=u,this.collideUp=n,this.collideDown=l,this.faceLeft=s,this.faceRight=u,this.faceTop=n,this.faceBottom=l,c){var d=this.tilemapLayer;d&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(s,u){return s===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=s,this.collisionCallbackContext=u),this},setSize:function(s,u,n,l){return s!==void 0&&(this.width=s),u!==void 0&&(this.height=u),n!==void 0&&(this.baseWidth=n),l!==void 0&&(this.baseHeight=l),this.updatePixelXY(),this},updatePixelXY:function(){var s=this.layer.orientation;if(s===o.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(s===o.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(s===o.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(s===o.HEXAGONAL){var u=this.layer.staggerAxis,n=this.layer.staggerIndex,l=this.layer.hexSideLength,c,d;u==="y"?(d=(this.baseHeight-l)/2+l,n==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*d):u==="x"&&(c=(this.baseWidth-l)/2+l,this.pixelX=this.x*c,n==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var s=this.layer.tilemapLayer;if(s){var u=s.gidMap[this.index];if(u)return u}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var s=this.tilemapLayer;return s?s.tilemap:null}}});v.exports=e}),49075:((v,T,t)=>{var h=t(84101),g=t(83419),o=t(39506),a=t(80341),r=t(95540),e=t(14977),s=t(27462),u=t(91907),n=t(36305),l=t(19133),c=t(68287),d=t(23029),f=t(81086),m=t(20442),y=t(33629),S=new g({initialize:function(E,P){this.scene=E,this.tileWidth=P.tileWidth,this.tileHeight=P.tileHeight,this.width=P.width,this.height=P.height,this.orientation=P.orientation,this.renderOrder=P.renderOrder,this.format=P.format,this.version=P.version,this.properties=P.properties,this.widthInPixels=P.widthInPixels,this.heightInPixels=P.heightInPixels,this.imageCollections=P.imageCollections,this.images=P.images,this.layers=P.layers,this.tiles=P.tiles,this.tilesets=P.tilesets,this.objects=P.objects,this.currentLayerIndex=0,this.hexSideLength=P.hexSideLength;var A=this.orientation;this._convert={WorldToTileXY:f.GetWorldToTileXYFunction(A),WorldToTileX:f.GetWorldToTileXFunction(A),WorldToTileY:f.GetWorldToTileYFunction(A),TileToWorldXY:f.GetTileToWorldXYFunction(A),TileToWorldX:f.GetTileToWorldXFunction(A),TileToWorldY:f.GetTileToWorldYFunction(A),GetTileCorners:f.GetTileCornersFunction(A)}},setRenderOrder:function(C){var E=["right-down","left-down","right-up","left-up"];return typeof C=="number"&&(C=E[C]),E.indexOf(C)>-1&&(this.renderOrder=C),this},addTilesetImage:function(C,E,P,A,F,G,D,L){if(C===void 0)return null;E==null&&(E=C);var b=this.scene.sys.textures;if(!b.exists(E))return console.warn('Texture key "%s" not found',E),null;var I=b.get(E),N=this.getTilesetIndex(C);if(N===null&&this.format===a.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',C,this.tilesets),null;var Z=this.tilesets[N];return Z?((P||A)&&Z.setTileSize(P,A),(F||G)&&Z.setSpacing(F,G),Z.setImage(I),Z):(P===void 0&&(P=this.tileWidth),A===void 0&&(A=this.tileHeight),F===void 0&&(F=0),G===void 0&&(G=0),D===void 0&&(D=0),L===void 0&&(L={x:0,y:0}),Z=new y(C,D,P,A,F,G,void 0,void 0,L),Z.setImage(I),this.tilesets.push(Z),this.tiles=h(this),Z)},copy:function(C,E,P,A,F,G,D,L){return L=this.getLayer(L),L!==null?(f.Copy(C,E,P,A,F,G,D,L),this):null},createBlankLayer:function(C,E,P,A,F,G,D,L){P===void 0&&(P=0),A===void 0&&(A=0),F===void 0&&(F=this.width),G===void 0&&(G=this.height),D===void 0&&(D=this.tileWidth),L===void 0&&(L=this.tileHeight);var b=this.getLayerIndex(C);if(b!==null)return console.warn("Invalid Tilemap Layer ID: "+C),null;for(var I=new e({name:C,tileWidth:D,tileHeight:L,width:F,height:G,orientation:this.orientation,hexSideLength:this.hexSideLength}),N,Z=0;Z<G;Z++){N=[];for(var U=0;U<F;U++)N.push(new d(I,-1,U,Z,D,L,this.tileWidth,this.tileHeight));I.data.push(N)}this.layers.push(I),this.currentLayerIndex=this.layers.length-1;var W=new m(this.scene,this,this.currentLayerIndex,E,P,A);return W.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(W),W},createLayer:function(C,E,P,A){var F=this.getLayerIndex(C);if(F===null)return console.warn("Invalid Tilemap Layer ID: "+C),typeof C=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var G=this.layers[F];if(G.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+C),null;this.currentLayerIndex=F,P===void 0&&(P=G.x),A===void 0&&(A=G.y);var D=new m(this.scene,this,F,E,P,A);return D.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(D),D},createFromObjects:function(C,E,P){P===void 0&&(P=!0);var A=[],F=this.getObjectLayer(C);if(!F)return console.warn("createFromObjects: Invalid objectLayerName given: "+C),A;var G=new s(P?this.tilesets:void 0);Array.isArray(E)||(E=[E]);for(var D=F.objects,L=0;L<E.length;L++){var b=E[L],I=r(b,"id",null),N=r(b,"gid",null),Z=r(b,"name",null),U=r(b,"type",null);G.enabled=!r(b,"ignoreTileset",null);for(var W,X=[],V=0;V<D.length;V++)W=D[V],(I===null&&N===null&&Z===null&&U===null||I!==null&&W.id===I||N!==null&&W.gid===N||Z!==null&&W.name===Z||U!==null&&G.getTypeIncludingTile(W)===U)&&X.push(W);for(var O=r(b,"classType",c),z=r(b,"scene",this.scene),B=r(b,"container",null),Y=r(b,"key",null),k=r(b,"frame",null),J=0;J<X.length;J++){W=X[J];var j=new O(z);if(j.setName(W.name),j.setPosition(W.x,W.y),G.setTextureAndFrame(j,Y,k,W),W.width&&(j.displayWidth=W.width),W.height&&(j.displayHeight=W.height),this.orientation===u.ISOMETRIC){var tt=this.tileWidth/this.tileHeight,ut={x:j.x-j.y,y:(j.x+j.y)/tt};j.x=ut.x,j.y=ut.y}var ht={x:j.originX*W.width,y:(j.originY-(W.gid?1:0))*W.height};if(W.rotation){var st=o(W.rotation);n(ht,st),j.rotation=st}j.x+=ht.x,j.y+=ht.y,(W.flippedHorizontal!==void 0||W.flippedVertical!==void 0)&&j.setFlip(W.flippedHorizontal,W.flippedVertical),W.visible||(j.visible=!1),G.setPropertiesFromTiledObject(j,W),B?B.add(j):z.add.existing(j),A.push(j)}}return A},createFromTiles:function(C,E,P,A,F,G){return G=this.getLayer(G),G===null?null:f.CreateFromTiles(C,E,P,A,F,G)},fill:function(C,E,P,A,F,G,D){return G===void 0&&(G=!0),D=this.getLayer(D),D===null?null:(f.Fill(C,E,P,A,F,G,D),this)},filterObjects:function(C,E,P){if(typeof C=="string"){var A=C;if(C=this.getObjectLayer(C),!C)return console.warn("No object layer found with the name: "+A),null}return C.objects.filter(E,P)},filterTiles:function(C,E,P,A,F,G,D,L){return L=this.getLayer(L),L===null?null:f.FilterTiles(C,E,P,A,F,G,D,L)},findByIndex:function(C,E,P,A){return A=this.getLayer(A),A===null?null:f.FindByIndex(C,E,P,A)},findObject:function(C,E,P){if(typeof C=="string"){var A=C;if(C=this.getObjectLayer(C),!C)return console.warn("No object layer found with the name: "+A),null}return C.objects.find(E,P)||null},findTile:function(C,E,P,A,F,G,D,L){return L=this.getLayer(L),L===null?null:f.FindTile(C,E,P,A,F,G,D,L)},forEachTile:function(C,E,P,A,F,G,D,L){return L=this.getLayer(L),L===null?null:(f.ForEachTile(C,E,P,A,F,G,D,L),this)},getImageIndex:function(C){return this.getIndex(this.images,C)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(C){return C.name})},getIndex:function(C,E){for(var P=0;P<C.length;P++)if(C[P].name===E)return P;return null},getLayer:function(C){var E=this.getLayerIndex(C);return E!==null?this.layers[E]:null},getObjectLayer:function(C){var E=this.getIndex(this.objects,C);return E!==null?this.objects[E]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(C){return C.name})},getLayerIndex:function(C){return C===void 0?this.currentLayerIndex:typeof C=="string"?this.getLayerIndexByName(C):typeof C=="number"&&C<this.layers.length?C:C instanceof m&&C.tilemap===this?C.layerIndex:null},getLayerIndexByName:function(C){return this.getIndex(this.layers,C)},getTileAt:function(C,E,P,A){return A=this.getLayer(A),A===null?null:f.GetTileAt(C,E,P,A)},getTileAtWorldXY:function(C,E,P,A,F){return F=this.getLayer(F),F===null?null:f.GetTileAtWorldXY(C,E,P,A,F)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(C){return C.name})},getTilesWithin:function(C,E,P,A,F,G){return G=this.getLayer(G),G===null?null:f.GetTilesWithin(C,E,P,A,F,G)},getTilesWithinShape:function(C,E,P,A){return A=this.getLayer(A),A===null?null:f.GetTilesWithinShape(C,E,P,A)},getTilesWithinWorldXY:function(C,E,P,A,F,G,D){return D=this.getLayer(D),D===null?null:f.GetTilesWithinWorldXY(C,E,P,A,F,G,D)},getTileset:function(C){var E=this.getIndex(this.tilesets,C);return E!==null?this.tilesets[E]:null},getTilesetIndex:function(C){return this.getIndex(this.tilesets,C)},hasTileAt:function(C,E,P){return P=this.getLayer(P),P===null?null:f.HasTileAt(C,E,P)},hasTileAtWorldXY:function(C,E,P,A){return A=this.getLayer(A),A===null?null:f.HasTileAtWorldXY(C,E,P,A)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(C){this.setLayer(C)}},putTileAt:function(C,E,P,A,F){return A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:f.PutTileAt(C,E,P,A,F)},putTileAtWorldXY:function(C,E,P,A,F,G){return A===void 0&&(A=!0),G=this.getLayer(G),G===null?null:f.PutTileAtWorldXY(C,E,P,A,F,G)},putTilesAt:function(C,E,P,A,F){return A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:(f.PutTilesAt(C,E,P,A,F),this)},randomize:function(C,E,P,A,F,G){return G=this.getLayer(G),G===null?null:(f.Randomize(C,E,P,A,F,G),this)},calculateFacesAt:function(C,E,P){return P=this.getLayer(P),P===null?null:(f.CalculateFacesAt(C,E,P),this)},calculateFacesWithin:function(C,E,P,A,F){return F=this.getLayer(F),F===null?null:(f.CalculateFacesWithin(C,E,P,A,F),this)},removeLayer:function(C){var E=this.getLayerIndex(C);if(E!==null){l(this.layers,E);for(var P=E;P<this.layers.length;P++)this.layers[P].tilemapLayer&&this.layers[P].tilemapLayer.layerIndex--;return this.currentLayerIndex===E&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(C){var E=this.getLayerIndex(C);return E!==null?(C=this.layers[E],C.tilemapLayer.destroy(),l(this.layers,E),this.currentLayerIndex===E&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var C=this.layers,E=0;E<C.length;E++)C[E].tilemapLayer&&C[E].tilemapLayer.destroy(!1);return C.length=0,this.currentLayerIndex=0,this},removeTile:function(C,E,P){E===void 0&&(E=-1),P===void 0&&(P=!0);var A=[];Array.isArray(C)||(C=[C]);for(var F=0;F<C.length;F++){var G=C[F];A.push(this.removeTileAt(G.x,G.y,!0,P,G.tilemapLayer)),E>-1&&this.putTileAt(E,G.x,G.y,P,G.tilemapLayer)}return A},removeTileAt:function(C,E,P,A,F){return P===void 0&&(P=!0),A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:f.RemoveTileAt(C,E,P,A,F)},removeTileAtWorldXY:function(C,E,P,A,F,G){return P===void 0&&(P=!0),A===void 0&&(A=!0),G=this.getLayer(G),G===null?null:f.RemoveTileAtWorldXY(C,E,P,A,F,G)},renderDebug:function(C,E,P){return P=this.getLayer(P),P===null?null:(this.orientation===u.ORTHOGONAL&&f.RenderDebug(C,E,P),this)},renderDebugFull:function(C,E){for(var P=this.layers,A=0;A<P.length;A++)f.RenderDebug(C,E,P[A]);return this},replaceByIndex:function(C,E,P,A,F,G,D){return D=this.getLayer(D),D===null?null:(f.ReplaceByIndex(C,E,P,A,F,G,D),this)},setCollision:function(C,E,P,A,F){return E===void 0&&(E=!0),P===void 0&&(P=!0),F===void 0&&(F=!0),A=this.getLayer(A),A===null?null:(f.SetCollision(C,E,P,A,F),this)},setCollisionBetween:function(C,E,P,A,F){return P===void 0&&(P=!0),A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:(f.SetCollisionBetween(C,E,P,A,F),this)},setCollisionByProperty:function(C,E,P,A){return E===void 0&&(E=!0),P===void 0&&(P=!0),A=this.getLayer(A),A===null?null:(f.SetCollisionByProperty(C,E,P,A),this)},setCollisionByExclusion:function(C,E,P,A){return E===void 0&&(E=!0),P===void 0&&(P=!0),A=this.getLayer(A),A===null?null:(f.SetCollisionByExclusion(C,E,P,A),this)},setCollisionFromCollisionGroup:function(C,E,P){return C===void 0&&(C=!0),E===void 0&&(E=!0),P=this.getLayer(P),P===null?null:(f.SetCollisionFromCollisionGroup(C,E,P),this)},setTileIndexCallback:function(C,E,P,A){return A=this.getLayer(A),A===null?null:(f.SetTileIndexCallback(C,E,P,A),this)},setTileLocationCallback:function(C,E,P,A,F,G,D){return D=this.getLayer(D),D===null?null:(f.SetTileLocationCallback(C,E,P,A,F,G,D),this)},setLayer:function(C){var E=this.getLayerIndex(C);return E!==null&&(this.currentLayerIndex=E),this},setBaseTileSize:function(C,E){this.tileWidth=C,this.tileHeight=E,this.widthInPixels=this.width*C,this.heightInPixels=this.height*E;for(var P=0;P<this.layers.length;P++){this.layers[P].baseTileWidth=C,this.layers[P].baseTileHeight=E;for(var A=this.layers[P].data,F=this.layers[P].width,G=this.layers[P].height,D=0;D<G;D++)for(var L=0;L<F;L++){var b=A[D][L];b!==null&&b.setSize(void 0,void 0,C,E)}}return this},setLayerTileSize:function(C,E,P){if(P=this.getLayer(P),P===null)return this;P.tileWidth=C,P.tileHeight=E;for(var A=P.data,F=P.width,G=P.height,D=0;D<G;D++)for(var L=0;L<F;L++){var b=A[D][L];b!==null&&b.setSize(C,E)}return this},shuffle:function(C,E,P,A,F){return F=this.getLayer(F),F===null?null:(f.Shuffle(C,E,P,A,F),this)},swapByIndex:function(C,E,P,A,F,G,D){return D=this.getLayer(D),D===null?null:(f.SwapByIndex(C,E,P,A,F,G,D),this)},tileToWorldX:function(C,E,P){return P=this.getLayer(P),P===null?null:this._convert.TileToWorldX(C,E,P)},tileToWorldY:function(C,E,P){return P=this.getLayer(P),P===null?null:this._convert.TileToWorldY(C,E,P)},tileToWorldXY:function(C,E,P,A,F){return F=this.getLayer(F),F===null?null:this._convert.TileToWorldXY(C,E,P,A,F)},getTileCorners:function(C,E,P,A){return A=this.getLayer(A),A===null?null:this._convert.GetTileCorners(C,E,P,A)},weightedRandomize:function(C,E,P,A,F,G){return G=this.getLayer(G),G===null?null:(f.WeightedRandomize(E,P,A,F,C,G),this)},worldToTileX:function(C,E,P,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileX(C,E,P,A)},worldToTileY:function(C,E,P,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileY(C,E,P,A)},worldToTileXY:function(C,E,P,A,F,G){return G=this.getLayer(G),G===null?null:this._convert.WorldToTileXY(C,E,P,A,F,G)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});v.exports=S}),45939:((v,T,t)=>{var h=t(44603),g=t(31989);h.register("tilemap",function(o){var a=o!==void 0?o:{};return g(this.scene,a.key,a.tileWidth,a.tileHeight,a.width,a.height,a.data,a.insertNull)})}),46029:((v,T,t)=>{var h=t(39429),g=t(31989);h.register("tilemap",function(o,a,r,e,s,u,n){return o===null&&(o=void 0),a===null&&(a=void 0),r===null&&(r=void 0),e===null&&(e=void 0),s===null&&(s=void 0),g(this.scene,o,a,r,e,s,u,n)})}),20442:((v,T,t)=>{var h=t(83419),g=t(78389),o=t(31401),a=t(95643),r=t(81086),e=t(19218),s=t(26099),u=new h({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.Transform,o.Visible,o.ScrollFactor,g,e],initialize:function(l,c,d,f,m,y){a.call(this,l,"TilemapLayer"),this.isTilemap=!0,this.tilemap=c,this.layerIndex=d,this.layer=c.layers[d],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=r.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new s,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(f),this.setAlpha(this.layer.alpha),this.setPosition(m,y),this.setOrigin(0,0),this.setSize(c.tileWidth*this.layer.width,c.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(n){var l=[],c=[],d=this.tilemap;Array.isArray(n)||(n=[n]);for(var f=0;f<n.length;f++){var m=n[f];if(typeof m=="string"&&(m=d.getTileset(m)),m){c.push(m);for(var y=m.firstgid,S=0;S<m.total;S++)l[y+S]=m}}this.gidMap=l,this.tileset=c},setRenderOrder:function(n){var l=["right-down","left-down","right-up","left-up"];return typeof n=="string"&&(n=l.indexOf(n)),n>=0&&n<4&&(this._renderOrder=n),this},calculateFacesAt:function(n,l){return r.CalculateFacesAt(n,l,this.layer),this},calculateFacesWithin:function(n,l,c,d){return r.CalculateFacesWithin(n,l,c,d,this.layer),this},createFromTiles:function(n,l,c,d,f){return r.CreateFromTiles(n,l,c,d,f,this.layer)},cull:function(n){return this.cullCallback(this.layer,n,this.culledTiles,this._renderOrder)},copy:function(n,l,c,d,f,m,y){return r.Copy(n,l,c,d,f,m,y,this.layer),this},fill:function(n,l,c,d,f,m){return r.Fill(n,l,c,d,f,m,this.layer),this},filterTiles:function(n,l,c,d,f,m,y){return r.FilterTiles(n,l,c,d,f,m,y,this.layer)},findByIndex:function(n,l,c){return r.FindByIndex(n,l,c,this.layer)},findTile:function(n,l,c,d,f,m,y){return r.FindTile(n,l,c,d,f,m,y,this.layer)},forEachTile:function(n,l,c,d,f,m,y){return r.ForEachTile(n,l,c,d,f,m,y,this.layer),this},setTint:function(n,l,c,d,f,m){n===void 0&&(n=16777215);var y=function(S){S.tint=n,S.tintFill=!1};return this.forEachTile(y,this,l,c,d,f,m)},setTintFill:function(n,l,c,d,f,m){n===void 0&&(n=16777215);var y=function(S){S.tint=n,S.tintFill=!0};return this.forEachTile(y,this,l,c,d,f,m)},getTileAt:function(n,l,c){return r.GetTileAt(n,l,c,this.layer)},getTileAtWorldXY:function(n,l,c,d){return r.GetTileAtWorldXY(n,l,c,d,this.layer)},getIsoTileAtWorldXY:function(n,l,c,d,f){c===void 0&&(c=!0);var m=this.tempVec;return r.IsometricWorldToTileXY(n,l,!0,m,f,this.layer,c),this.getTileAt(m.x,m.y,d)},getTilesWithin:function(n,l,c,d,f){return r.GetTilesWithin(n,l,c,d,f,this.layer)},getTilesWithinShape:function(n,l,c){return r.GetTilesWithinShape(n,l,c,this.layer)},getTilesWithinWorldXY:function(n,l,c,d,f,m){return r.GetTilesWithinWorldXY(n,l,c,d,f,m,this.layer)},hasTileAt:function(n,l){return r.HasTileAt(n,l,this.layer)},hasTileAtWorldXY:function(n,l,c){return r.HasTileAtWorldXY(n,l,c,this.layer)},putTileAt:function(n,l,c,d){return r.PutTileAt(n,l,c,d,this.layer)},putTileAtWorldXY:function(n,l,c,d,f){return r.PutTileAtWorldXY(n,l,c,d,f,this.layer)},putTilesAt:function(n,l,c,d){return r.PutTilesAt(n,l,c,d,this.layer),this},randomize:function(n,l,c,d,f){return r.Randomize(n,l,c,d,f,this.layer),this},removeTileAt:function(n,l,c,d){return r.RemoveTileAt(n,l,c,d,this.layer)},removeTileAtWorldXY:function(n,l,c,d,f){return r.RemoveTileAtWorldXY(n,l,c,d,f,this.layer)},renderDebug:function(n,l){return r.RenderDebug(n,l,this.layer),this},replaceByIndex:function(n,l,c,d,f,m){return r.ReplaceByIndex(n,l,c,d,f,m,this.layer),this},setSkipCull:function(n){return n===void 0&&(n=!0),this.skipCull=n,this},setCullPadding:function(n,l){return n===void 0&&(n=1),l===void 0&&(l=1),this.cullPaddingX=n,this.cullPaddingY=l,this},setCollision:function(n,l,c,d){return r.SetCollision(n,l,c,this.layer,d),this},setCollisionBetween:function(n,l,c,d){return r.SetCollisionBetween(n,l,c,d,this.layer),this},setCollisionByProperty:function(n,l,c){return r.SetCollisionByProperty(n,l,c,this.layer),this},setCollisionByExclusion:function(n,l,c){return r.SetCollisionByExclusion(n,l,c,this.layer),this},setCollisionFromCollisionGroup:function(n,l){return r.SetCollisionFromCollisionGroup(n,l,this.layer),this},setTileIndexCallback:function(n,l,c){return r.SetTileIndexCallback(n,l,c,this.layer),this},setTileLocationCallback:function(n,l,c,d,f,m){return r.SetTileLocationCallback(n,l,c,d,f,m,this.layer),this},shuffle:function(n,l,c,d){return r.Shuffle(n,l,c,d,this.layer),this},swapByIndex:function(n,l,c,d,f,m){return r.SwapByIndex(n,l,c,d,f,m,this.layer),this},tileToWorldX:function(n,l){return this.tilemap.tileToWorldX(n,l,this)},tileToWorldY:function(n,l){return this.tilemap.tileToWorldY(n,l,this)},tileToWorldXY:function(n,l,c,d){return this.tilemap.tileToWorldXY(n,l,c,d,this)},getTileCorners:function(n,l,c){return this.tilemap.getTileCorners(n,l,c,this)},weightedRandomize:function(n,l,c,d,f){return r.WeightedRandomize(l,c,d,f,n,this.layer),this},worldToTileX:function(n,l,c){return this.tilemap.worldToTileX(n,l,c,this)},worldToTileY:function(n,l,c){return this.tilemap.worldToTileY(n,l,c,this)},worldToTileXY:function(n,l,c,d,f){return this.tilemap.worldToTileXY(n,l,c,d,f,this)},destroy:function(n){n===void 0&&(n=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),n&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],a.prototype.destroy.call(this))}});v.exports=u}),16153:((v,T,t)=>{var h=t(61340),g=new h,o=new h,a=new h,r=function(e,s,u,n){var l=s.cull(u),c=l.length,d=u.alpha*s.alpha;if(!(c===0||d<=0)){var f=g,m=o,y=a;m.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),f.copyFrom(u.matrix);var S=e.currentContext,C=s.gidMap;S.save(),n?(f.multiplyWithOffset(n,-u.scrollX*s.scrollFactorX,-u.scrollY*s.scrollFactorY),m.e=s.x,m.f=s.y,f.multiply(m,y),y.copyToContext(S)):(m.e-=u.scrollX*s.scrollFactorX,m.f-=u.scrollY*s.scrollFactorY,m.copyToContext(S)),(!e.antialias||s.scaleX>1||s.scaleY>1)&&(S.imageSmoothingEnabled=!1);for(var E=0;E<c;E++){var P=l[E],A=C[P.index];if(A){var F=A.image.getSourceImage(),G=A.getTileTextureCoordinates(P.index),D=A.tileWidth,L=A.tileHeight;if(!(G===null||D===0||L===0)){var b=D*.5,I=L*.5;G.x+=A.tileOffset.x,G.y+=A.tileOffset.y,S.save(),S.translate(P.pixelX+b,P.pixelY+I),P.rotation!==0&&S.rotate(P.rotation),(P.flipX||P.flipY)&&S.scale(P.flipX?-1:1,P.flipY?-1:1),S.globalAlpha=d*P.alpha,S.drawImage(F,G.x,G.y,D,L,-b,-I,D,L),S.restore()}}}S.restore()}};v.exports=r}),19218:((v,T,t)=>{var h=t(29747),g=h,o=h;g=t(99558),o=t(16153),v.exports={renderWebGL:g,renderCanvas:o}}),99558:((v,T,t)=>{var h=t(70554),g=function(o,a,r){var e=a.cull(r),s=e.length,u=r.alpha*a.alpha;if(!(s===0||u<=0)){var n=a.gidMap,l=o.pipelines.set(a.pipeline,a),c=h.getTintAppendFloatAlpha,d=a.scrollFactorX,f=a.scrollFactorY,m=a.x,y=a.y,S=a.scaleX,C=a.scaleY;o.pipelines.preBatch(a);for(var E=0;E<s;E++){var P=e[E],A=n[P.index];if(A){var F=A.getTileTextureCoordinates(P.index),G=A.tileWidth,D=A.tileHeight;if(!(!F||G===0||D===0)){var L=G*.5,b=D*.5,I=A.glTexture,N=l.setTexture2D(I,a),Z=G,U=D,W=F.x,X=F.y,V=A.tileOffset.x,O=A.tileOffset.y,z=c(P.tint,u*P.alpha);l.batchTexture(a,I,I.width,I.height,m+P.pixelX*S+(L*S-V),y+P.pixelY*C+(b*C-O),G,D,S,C,P.rotation,P.flipX,P.flipY,d,f,L,b,W,X,Z,U,z,z,z,z,P.tintFill,0,0,r,null,!0,N,!0)}}}o.pipelines.postBatch(a)}};v.exports=g}),33629:((v,T,t)=>{var h=t(83419),g=t(26099),o=new h({initialize:function(r,e,s,u,n,l,c,d,f){(s===void 0||s<=0)&&(s=32),(u===void 0||u<=0)&&(u=32),n===void 0&&(n=0),l===void 0&&(l=0),c===void 0&&(c={}),d===void 0&&(d={}),this.name=r,this.firstgid=e,this.tileWidth=s,this.tileHeight=u,this.tileMargin=n,this.tileSpacing=l,this.tileProperties=c,this.tileData=d,this.tileOffset=new g,f!==void 0&&this.tileOffset.set(f.x,f.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(a){return this.containsTileIndex(a)?this.tileProperties[a-this.firstgid]:null},getTileData:function(a){return this.containsTileIndex(a)?this.tileData[a-this.firstgid]:null},getTileCollisionGroup:function(a){var r=this.getTileData(a);return r&&r.objectgroup?r.objectgroup:null},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},getTileTextureCoordinates:function(a){return this.containsTileIndex(a)?this.texCoordinates[a-this.firstgid]:null},setImage:function(a){this.image=a;var r=a.get(),e=a.getFrameBounds();return this.glTexture=r.source.glTexture,r.width>e.width||r.height>e.height?this.updateTileData(r.width,r.height):this.updateTileData(e.width,e.height,e.x,e.y),this},setTileSize:function(a,r){return a!==void 0&&(this.tileWidth=a),r!==void 0&&(this.tileHeight=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(a,r){return a!==void 0&&(this.tileMargin=a),r!==void 0&&(this.tileSpacing=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(a,r,e,s){e===void 0&&(e=0),s===void 0&&(s=0);var u=(r-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(a-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(u%1!==0||n%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),u=Math.floor(u),n=Math.floor(n),this.rows=u,this.columns=n,this.total=u*n,this.texCoordinates.length=0;for(var l=this.tileMargin+e,c=this.tileMargin+s,d=0;d<this.rows;d++){for(var f=0;f<this.columns;f++)this.texCoordinates.push({x:l,y:c}),l+=this.tileWidth+this.tileSpacing;l=this.tileMargin+e,c+=this.tileHeight+this.tileSpacing}return this}});v.exports=o}),72023:((v,T,t)=>{var h=t(7423),g=function(o,a,r){var e=h(o,a,!0,r),s=h(o,a-1,!0,r),u=h(o,a+1,!0,r),n=h(o-1,a,!0,r),l=h(o+1,a,!0,r),c=e&&e.collides;return c&&(e.faceTop=!0,e.faceBottom=!0,e.faceLeft=!0,e.faceRight=!0),s&&s.collides&&(c&&(e.faceTop=!1),s.faceBottom=!c),u&&u.collides&&(c&&(e.faceBottom=!1),u.faceTop=!c),n&&n.collides&&(c&&(e.faceLeft=!1),n.faceRight=!c),l&&l.collides&&(c&&(e.faceRight=!1),l.faceLeft=!c),e&&!e.collides&&e.resetFaces(),e};v.exports=g}),42573:((v,T,t)=>{var h=t(7423),g=t(7386),o=function(a,r,e,s,u){for(var n=null,l=null,c=null,d=null,f=g(a,r,e,s,null,u),m=0;m<f.length;m++){var y=f[m];y&&(y.collides?(n=h(y.x,y.y-1,!0,u),l=h(y.x,y.y+1,!0,u),c=h(y.x-1,y.y,!0,u),d=h(y.x+1,y.y,!0,u),y.faceTop=!(n&&n.collides),y.faceBottom=!(l&&l.collides),y.faceLeft=!(c&&c.collides),y.faceRight=!(d&&d.collides)):y.resetFaces())}};v.exports=o}),33528:((v,T,t)=>{var h=t(26099),g=new h,o=function(a,r,e,s){var u=e.tilemapLayer,n=u.cullPaddingX,l=u.cullPaddingY,c=u.tilemap.tileToWorldXY(a,r,g,s,u);return c.x>s.worldView.x+u.scaleX*e.tileWidth*(-n-.5)&&c.x<s.worldView.right+u.scaleX*e.tileWidth*(n-.5)&&c.y>s.worldView.y+u.scaleY*e.tileHeight*(-l-1)&&c.y<s.worldView.bottom+u.scaleY*e.tileHeight*(l-.5)};v.exports=o}),1785:((v,T,t)=>{var h=t(42573),g=t(7386),o=t(62991),a=t(23029),r=function(e,s,u,n,l,c,d,f){d===void 0&&(d=!0);var m=g(e,s,u,n,null,f),y=[];m.forEach(function(G){var D=new a(G.layer,G.index,G.x,G.y,G.width,G.height,G.baseWidth,G.baseHeight);D.copy(G),y.push(D)});for(var S=l-e,C=c-s,E=0;E<y.length;E++){var P=y[E],A=P.x+S,F=P.y+C;o(A,F,f)&&f.data[F][A]&&(P.x=A,P.y=F,P.updatePixelXY(),f.data[F][A]=P)}d&&h(l-1,c-1,u+2,n+2,f),m.length=0,y.length=0};v.exports=r}),78419:((v,T,t)=>{var h=t(62644),g=t(7386),o=t(27987),a=function(r,e,s,u,n,l){s||(s={}),Array.isArray(r)||(r=[r]);var c=l.tilemapLayer;u||(u=c.scene),n||(n=u.cameras.main);var d=l.width,f=l.height,m=g(0,0,d,f,null,l),y=[],S,C=function(F,G,D){for(var L=0;L<D.length;L++){var b=D[L];F.hasOwnProperty(b)||(F[b]=G[b])}};for(S=0;S<m.length;S++){var E=m[S],P=h(s);if(r.indexOf(E.index)!==-1){var A=c.tileToWorldXY(E.x,E.y,void 0,n,l);P.x=A.x,P.y=A.y,C(P,E,["rotation","flipX","flipY","alpha","visible","tint"]),P.hasOwnProperty("origin")||(P.x+=E.width*.5,P.y+=E.height*.5),P.hasOwnProperty("useSpriteSheet")&&(P.key=E.tileset.image,P.frame=E.index-E.tileset.firstgid),y.push(u.make.sprite(P))}}if(Array.isArray(e))for(S=0;S<r.length;S++)o(r[S],e[S],0,0,d,f,l);else if(e!==null)for(S=0;S<r.length;S++)o(r[S],e,0,0,d,f,l);return y};v.exports=a}),19545:((v,T,t)=>{var h=t(87841),g=t(63448),o=t(56583),a=new h,r=function(e,s){var u=e.tilemapLayer.tilemap,n=e.tilemapLayer,l=Math.floor(u.tileWidth*n.scaleX),c=Math.floor(u.tileHeight*n.scaleY),d=o(s.worldView.x-n.x,l,0,!0)-n.cullPaddingX,f=g(s.worldView.right-n.x,l,0,!0)+n.cullPaddingX,m=o(s.worldView.y-n.y,c,0,!0)-n.cullPaddingY,y=g(s.worldView.bottom-n.y,c,0,!0)+n.cullPaddingY;return a.setTo(d,m,f-d,y-m)};v.exports=r}),30003:((v,T,t)=>{var h=t(19545),g=t(32483),o=function(a,r,e,s){e===void 0&&(e=[]),s===void 0&&(s=0),e.length=0;var u=a.tilemapLayer,n=h(a,r);return(u.skipCull||u.scrollFactorX!==1||u.scrollFactorY!==1)&&(n.left=0,n.right=a.width,n.top=0,n.bottom=a.height),g(a,n,s,e),e};v.exports=o}),35137:((v,T,t)=>{var h=t(7386),g=t(42573),o=t(20576),a=function(r,e,s,u,n,l,c){for(var d=c.collideIndexes.indexOf(r)!==-1,f=h(e,s,u,n,null,c),m=0;m<f.length;m++)f[m].index=r,o(f[m],d);l&&g(e-1,s-1,u+2,n+2,c)};v.exports=a}),40253:((v,T,t)=>{var h=t(7386),g=function(o,a,r,e,s,u,n,l){var c=h(r,e,s,u,n,l);return c.filter(o,a)};v.exports=g}),52692:(v=>{var T=function(t,h,g,o){h===void 0&&(h=0),g===void 0&&(g=!1);var a=0,r,e,s;if(g){for(e=o.height-1;e>=0;e--)for(r=o.width-1;r>=0;r--)if(s=o.data[e][r],s&&s.index===t){if(a===h)return s;a+=1}}else for(e=0;e<o.height;e++)for(r=0;r<o.width;r++)if(s=o.data[e][r],s&&s.index===t){if(a===h)return s;a+=1}return null};v.exports=T}),66151:((v,T,t)=>{var h=t(7386),g=function(o,a,r,e,s,u,n,l){var c=h(r,e,s,u,n,l);return c.find(o,a)||null};v.exports=g}),97560:((v,T,t)=>{var h=t(7386),g=function(o,a,r,e,s,u,n,l){var c=h(r,e,s,u,n,l);c.forEach(o,a)};v.exports=g}),43305:((v,T,t)=>{var h=t(91907),g=t(30003),o=t(9474),a=t(14018),r=t(29747),e=t(54503),s=function(u){return u===h.ORTHOGONAL?g:u===h.HEXAGONAL?o:u===h.STAGGERED?e:u===h.ISOMETRIC?a:r};v.exports=s}),7423:((v,T,t)=>{var h=t(62991),g=function(o,a,r,e){if(h(o,a,e)){var s=e.data[a][o]||null;return s?s.index===-1?r?s:null:s:null}else return null};v.exports=g}),60540:((v,T,t)=>{var h=t(7423),g=t(26099),o=new g,a=function(r,e,s,u,n){return n.tilemapLayer.worldToTileXY(r,e,!0,o,u),h(o.x,o.y,s,n)};v.exports=a}),55826:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e){var s=e.baseTileWidth,u=e.baseTileHeight,n=e.tilemapLayer,l=0,c=0;n&&(r||(r=n.scene.cameras.main),l=n.x+r.scrollX*(1-n.scrollFactorX),c=n.y+r.scrollY*(1-n.scrollFactorY),s*=n.scaleX,u*=n.scaleY);var d=l+o*s,f=c+a*u;return[new h(d,f),new h(d+s,f),new h(d+s,f+u),new h(d,f+u)]};v.exports=g}),11758:((v,T,t)=>{var h=t(91907),g=t(27229),o=t(29747),a=t(55826),r=function(e){return e===h.ORTHOGONAL?a:e===h.ISOMETRIC?o:e===h.HEXAGONAL?g:(e===h.STAGGERED,o)};v.exports=r}),39167:((v,T,t)=>{var h=t(91907),g=t(29747),o=t(97281),a=function(r){return r===h.ORTHOGONAL?o:g};v.exports=a}),62e3:((v,T,t)=>{var h=t(91907),g=t(19951),o=t(14127),a=t(29747),r=t(97202),e=t(70326),s=function(u){return u===h.ORTHOGONAL?e:u===h.ISOMETRIC?o:u===h.HEXAGONAL?g:u===h.STAGGERED?r:a};v.exports=s}),5984:((v,T,t)=>{var h=t(91907),g=t(29747),o=t(28054),a=t(29650),r=function(e){return e===h.ORTHOGONAL?a:e===h.STAGGERED?o:g};v.exports=r}),7386:((v,T,t)=>{var h=t(95540),g=function(o,a,r,e,s,u){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=u.width),e===void 0&&(e=u.height),s||(s={});var n=h(s,"isNotEmpty",!1),l=h(s,"isColliding",!1),c=h(s,"hasInterestingFace",!1);o<0&&(r+=o,o=0),a<0&&(e+=a,a=0),o+r>u.width&&(r=Math.max(u.width-o,0)),a+e>u.height&&(e=Math.max(u.height-a,0));for(var d=[],f=a;f<a+e;f++)for(var m=o;m<o+r;m++){var y=u.data[f][m];if(y!==null){if(n&&y.index===-1||l&&!y.collides||c&&!y.hasInterestingFace)continue;d.push(y)}}return d};v.exports=g}),91141:((v,T,t)=>{var h=t(55738),g=t(7386),o=t(91865),a=t(29747),r=t(26099),e=t(91907),s=function(d,f){return o.RectangleToTriangle(f,d)},u=new r,n=new r,l=new r,c=function(d,f,m,y){if(y.orientation!==e.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(d===void 0)return[];var S=a;d instanceof h.Circle?S=o.CircleToRectangle:d instanceof h.Rectangle?S=o.RectangleToRectangle:d instanceof h.Triangle?S=s:d instanceof h.Line&&(S=o.LineToRectangle),y.tilemapLayer.worldToTileXY(d.left,d.top,!0,n,m);var C=n.x,E=n.y;y.tilemapLayer.worldToTileXY(d.right,d.bottom,!1,l,m);var P=Math.ceil(l.x),A=Math.ceil(l.y),F=Math.max(P-C,1),G=Math.max(A-E,1),D=g(C,E,F,G,f,y),L=y.tileWidth,b=y.tileHeight;y.tilemapLayer&&(L*=y.tilemapLayer.scaleX,b*=y.tilemapLayer.scaleY);for(var I=[],N=new h.Rectangle(0,0,L,b),Z=0;Z<D.length;Z++){var U=D[Z];y.tilemapLayer.tileToWorldXY(U.x,U.y,u,m),N.x=u.x,N.y=u.y,S(d,N)&&I.push(U)}return I};v.exports=c}),96523:((v,T,t)=>{var h=t(7386),g=t(26099),o=new g,a=new g,r=function(e,s,u,n,l,c,d){var f=d.tilemapLayer.tilemap._convert.WorldToTileXY;f(e,s,!0,o,c,d);var m=o.x,y=o.y;f(e+u,s+n,!1,a,c,d);var S=Math.ceil(a.x),C=Math.ceil(a.y);return h(m,y,S-m,C-y,l,d)};v.exports=r}),96113:((v,T,t)=>{var h=t(91907),g=t(20242),o=t(10095),a=function(r){return r===h.ORTHOGONAL?o:g};v.exports=a}),16926:((v,T,t)=>{var h=t(91907),g=t(86625),o=t(96897),a=t(29747),r=t(15108),e=t(85896),s=function(u){return u===h.ORTHOGONAL?e:u===h.ISOMETRIC?o:u===h.HEXAGONAL?g:u===h.STAGGERED?r:a};v.exports=s}),55762:((v,T,t)=>{var h=t(91907),g=t(20242),o=t(51900),a=t(63288),r=function(e){return e===h.ORTHOGONAL?a:e===h.STAGGERED?o:g};v.exports=r}),45091:((v,T,t)=>{var h=t(62991),g=function(o,a,r){if(h(o,a,r)){var e=r.data[a][o];return e!==null&&e.index>-1}else return!1};v.exports=g}),24152:((v,T,t)=>{var h=t(45091),g=t(26099),o=new g,a=function(r,e,s,u){u.tilemapLayer.worldToTileXY(r,e,!0,o,s);var n=o.x,l=o.y;return h(n,l,u)};v.exports=a}),90454:((v,T,t)=>{var h=t(63448),g=t(56583),o=function(a,r){var e=a.tilemapLayer.tilemap,s=a.tilemapLayer,u=Math.floor(e.tileWidth*s.scaleX),n=Math.floor(e.tileHeight*s.scaleY),l=a.hexSideLength,c,d,f,m;if(a.staggerAxis==="y"){var y=(n-l)/2+l;c=g(r.worldView.x-s.x,u,0,!0)-s.cullPaddingX,d=h(r.worldView.right-s.x,u,0,!0)+s.cullPaddingX,f=g(r.worldView.y-s.y,y,0,!0)-s.cullPaddingY,m=h(r.worldView.bottom-s.y,y,0,!0)+s.cullPaddingY}else{var S=(u-l)/2+l;c=g(r.worldView.x-s.x,S,0,!0)-s.cullPaddingX,d=h(r.worldView.right-s.x,S,0,!0)+s.cullPaddingX,f=g(r.worldView.y-s.y,n,0,!0)-s.cullPaddingY,m=h(r.worldView.bottom-s.y,n,0,!0)+s.cullPaddingY}return{left:c,right:d,top:f,bottom:m}};v.exports=o}),9474:((v,T,t)=>{var h=t(90454),g=t(32483),o=function(a,r,e,s){e===void 0&&(e=[]),s===void 0&&(s=0),e.length=0;var u=a.tilemapLayer,n=h(a,r);return u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1&&(n.left=0,n.right=a.width,n.top=0,n.bottom=a.height),g(a,n,s,e),e};v.exports=o}),27229:((v,T,t)=>{var h=t(19951),g=t(26099),o=new g,a=function(r,e,s,u){var n=u.baseTileWidth,l=u.baseTileHeight,c=u.tilemapLayer;c&&(n*=c.scaleX,l*=c.scaleY);var d=h(r,e,o,s,u),f=[],m=.5773502691896257,y,S;u.staggerAxis==="y"?(y=m*n,S=l/2):(y=n/2,S=m*l);for(var C=0;C<6;C++){var E=2*Math.PI*(.5-C)/6;f.push(new g(d.x+y*Math.cos(E),d.y+S*Math.sin(E)))}return f};v.exports=a}),19951:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s){r||(r=new h);var u=s.baseTileWidth,n=s.baseTileHeight,l=s.tilemapLayer,c=0,d=0;l&&(e||(e=l.scene.cameras.main),c=l.x+e.scrollX*(1-l.scrollFactorX),d=l.y+e.scrollY*(1-l.scrollFactorY),u*=l.scaleX,n*=l.scaleY);var f=u/2,m=n/2,y,S,C=s.staggerAxis,E=s.staggerIndex;return C==="y"?(y=c+u*o+u,S=d+1.5*a*m+m,a%2===0&&(E==="odd"?y-=f:y+=f)):C==="x"&&E==="odd"&&(y=c+1.5*o*f+f,S=d+n*o+n,o%2===0&&(E==="odd"?S-=m:S+=m)),r.set(y,S)};v.exports=g}),86625:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s,u){e||(e=new h);var n=u.baseTileWidth,l=u.baseTileHeight,c=u.tilemapLayer;c&&(s||(s=c.scene.cameras.main),o=o-(c.x+s.scrollX*(1-c.scrollFactorX)),a=a-(c.y+s.scrollY*(1-c.scrollFactorY)),n*=c.scaleX,l*=c.scaleY);var d=.5773502691896257,f=-.3333333333333333,m=0,y=.6666666666666666,S=n/2,C=l/2,E,P,A,F,G;u.staggerAxis==="y"?(E=(o-S)/(d*n),P=(a-C)/C,A=d*E+f*P,F=m*E+y*P):(E=(o-S)/S,P=(a-C)/(d*l),A=f*E+d*P,F=y*E+m*P),G=-A-F;var D=Math.round(A),L=Math.round(F),b=Math.round(G),I=Math.abs(D-A),N=Math.abs(L-F),Z=Math.abs(b-G);I>N&&I>Z?D=-L-b:N>Z&&(L=-D-b);var U,W=L;return u.staggerIndex==="odd"?U=W%2===0?L/2+D:L/2+D-.5:U=W%2===0?L/2+D:L/2+D+.5,e.set(U,W)};v.exports=g}),62991:(v=>{var T=function(t,h,g){return t>=0&&t<g.width&&h>=0&&h<g.height};v.exports=T}),14018:((v,T,t)=>{var h=t(33528),g=function(o,a,r,e){r===void 0&&(r=[]),e===void 0&&(e=0),r.length=0;var s=o.tilemapLayer,u=o.data,n=o.width,l=o.height,c=s.skipCull,d=0,f=n,m=0,y=l,S,C,E;if(e===0)for(C=m;C<y;C++)for(S=d;S<f;S++)E=u[C][S],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!c&&!h(S,C,o,a)||r.push(E));else if(e===1)for(C=m;C<y;C++)for(S=f;S>=d;S--)E=u[C][S],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!c&&!h(S,C,o,a)||r.push(E));else if(e===2)for(C=y;C>=m;C--)for(S=d;S<f;S++)E=u[C][S],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!c&&!h(S,C,o,a)||r.push(E));else if(e===3)for(C=y;C>=m;C--)for(S=f;S>=d;S--)E=u[C][S],!(!E||E.index===-1||!E.visible||E.alpha===0)&&(!c&&!h(S,C,o,a)||r.push(E));return s.tilesDrawn=r.length,s.tilesTotal=n*l,r};v.exports=g}),14127:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s){r||(r=new h);var u=s.baseTileWidth,n=s.baseTileHeight,l=s.tilemapLayer,c=0,d=0;l&&(e||(e=l.scene.cameras.main),c=l.x+e.scrollX*(1-l.scrollFactorX),u*=l.scaleX,d=l.y+e.scrollY*(1-l.scrollFactorY),n*=l.scaleY);var f=c+(o-a)*(u/2),m=d+(o+a)*(n/2);return r.set(f,m)};v.exports=g}),96897:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s,u,n){e||(e=new h);var l=u.baseTileWidth,c=u.baseTileHeight,d=u.tilemapLayer;d&&(s||(s=d.scene.cameras.main),a=a-(d.y+s.scrollY*(1-d.scrollFactorY)),c*=d.scaleY,o=o-(d.x+s.scrollX*(1-d.scrollFactorX)),l*=d.scaleX);var f=l/2,m=c/2;o=o-f,n||(a=a-c);var y=.5*(o/f+a/m),S=.5*(-o/f+a/m);return r&&(y=Math.floor(y),S=Math.floor(S)),e.set(y,S)};v.exports=g}),71558:((v,T,t)=>{var h=t(23029),g=t(62991),o=t(72023),a=t(20576),r=function(e,s,u,n,l){if(n===void 0&&(n=!0),!g(s,u,l))return null;var c,d=l.data[u][s],f=d&&d.collides;e instanceof h?(l.data[u][s]===null&&(l.data[u][s]=new h(l,e.index,s,u,l.tileWidth,l.tileHeight)),l.data[u][s].copy(e)):(c=e,l.data[u][s]===null?l.data[u][s]=new h(l,c,s,u,l.tileWidth,l.tileHeight):l.data[u][s].index=c);var m=l.data[u][s],y=l.collideIndexes.indexOf(m.index)!==-1;if(c=e instanceof h?e.index:e,c===-1)m.width=l.tileWidth,m.height=l.tileHeight;else{var S=l.tilemapLayer.tilemap,C=S.tiles,E=C[c][2],P=S.tilesets[E];m.width=P.tileWidth,m.height=P.tileHeight}return a(m,y),n&&f!==m.collides&&o(s,u,l),m};v.exports=r}),26303:((v,T,t)=>{var h=t(71558),g=t(26099),o=new g,a=function(r,e,s,u,n,l){return l.tilemapLayer.worldToTileXY(e,s,!0,o,n,l),h(r,o.x,o.y,u,l)};v.exports=a}),14051:((v,T,t)=>{var h=t(42573),g=t(71558),o=function(a,r,e,s,u){if(s===void 0&&(s=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var n=a.length,l=a[0].length,c=0;c<n;c++)for(var d=0;d<l;d++){var f=a[c][d];g(f,r+d,e+c,!1,u)}s&&h(r-1,e-1,l+2,n+2,u)};v.exports=o}),77389:((v,T,t)=>{var h=t(7386),g=t(26546),o=function(a,r,e,s,u,n){var l,c=h(a,r,e,s,{},n);if(!u)for(u=[],l=0;l<c.length;l++)u.indexOf(c[l].index)===-1&&u.push(c[l].index);for(l=0;l<c.length;l++)c[l].index=g(u)};v.exports=o}),63557:((v,T,t)=>{var h=t(23029),g=t(62991),o=t(72023),a=function(r,e,s,u,n){if(s===void 0&&(s=!0),u===void 0&&(u=!0),!g(r,e,n))return null;var l=n.data[e][r];if(l)n.data[e][r]=s?null:new h(n,-1,r,e,n.tileWidth,n.tileHeight);else return null;return u&&l&&l.collides&&o(r,e,n),l};v.exports=a}),94178:((v,T,t)=>{var h=t(63557),g=t(26099),o=new g,a=function(r,e,s,u,n,l){return l.tilemapLayer.worldToTileXY(r,e,!0,o,n,l),h(o.x,o.y,s,u,l)};v.exports=a}),15533:((v,T,t)=>{var h=t(7386),g=t(3956),o=new g(105,210,231,150),a=new g(243,134,48,200),r=new g(40,39,37,150),e=function(s,u,n){u===void 0&&(u={});var l=u.tileColor!==void 0?u.tileColor:o,c=u.collidingTileColor!==void 0?u.collidingTileColor:a,d=u.faceColor!==void 0?u.faceColor:r,f=h(0,0,n.width,n.height,null,n);s.translateCanvas(n.tilemapLayer.x,n.tilemapLayer.y),s.scaleCanvas(n.tilemapLayer.scaleX,n.tilemapLayer.scaleY);for(var m=0;m<f.length;m++){var y=f[m],S=y.tileset?y.tileset.tileOffset:{x:0,y:0},C=y.width,E=y.height,P=y.pixelX-S.x,A=y.pixelY-S.y,F=y.collides?c:l;F!==null&&(s.fillStyle(F.color,F.alpha/255),s.fillRect(P,A,C,E)),P+=1,A+=1,C-=2,E-=2,d!==null&&(s.lineStyle(1,d.color,d.alpha/255),y.faceTop&&s.lineBetween(P,A,P+C,A),y.faceRight&&s.lineBetween(P+C,A,P+C,A+E),y.faceBottom&&s.lineBetween(P,A+E,P+C,A+E),y.faceLeft&&s.lineBetween(P,A,P,A+E))}};v.exports=e}),27987:((v,T,t)=>{var h=t(7386),g=function(o,a,r,e,s,u,n){for(var l=h(r,e,s,u,null,n),c=0;c<l.length;c++)l[c]&&l[c].index===o&&(l[c].index=a)};v.exports=g}),32483:(v=>{var T=function(t,h,g,o){var a=t.data,r=t.width,e=t.height,s=t.tilemapLayer,u=Math.max(0,h.left),n=Math.min(r,h.right),l=Math.max(0,h.top),c=Math.min(e,h.bottom),d,f,m;if(g===0)for(f=l;f<c;f++)for(d=u;a[f]&&d<n;d++)m=a[f][d],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(g===1)for(f=l;f<c;f++)for(d=n;a[f]&&d>=u;d--)m=a[f][d],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(g===2)for(f=c;f>=l;f--)for(d=u;a[f]&&d<n;d++)m=a[f][d],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);else if(g===3)for(f=c;f>=l;f--)for(d=n;a[f]&&d>=u;d--)m=a[f][d],!(!m||m.index===-1||!m.visible||m.alpha===0)&&o.push(m);return s.tilesDrawn=o.length,s.tilesTotal=r*e,o};v.exports=T}),57068:((v,T,t)=>{var h=t(20576),g=t(42573),o=t(9589),a=function(r,e,s,u,n){e===void 0&&(e=!0),s===void 0&&(s=!0),n===void 0&&(n=!0),Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++)o(r[l],e,u);if(n)for(var c=0;c<u.height;c++)for(var d=0;d<u.width;d++){var f=u.data[c][d];f&&r.indexOf(f.index)!==-1&&h(f,e)}s&&g(0,0,u.width,u.height,u)};v.exports=a}),37266:((v,T,t)=>{var h=t(20576),g=t(42573),o=t(9589),a=function(r,e,s,u,n,l){if(s===void 0&&(s=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),!(r>e)){for(var c=r;c<=e;c++)o(c,s,n);if(l)for(var d=0;d<n.height;d++)for(var f=0;f<n.width;f++){var m=n.data[d][f];m&&m.index>=r&&m.index<=e&&h(m,s)}u&&g(0,0,n.width,n.height,n)}};v.exports=a}),75661:((v,T,t)=>{var h=t(20576),g=t(42573),o=t(9589),a=function(r,e,s,u){e===void 0&&(e=!0),s===void 0&&(s=!0),Array.isArray(r)||(r=[r]);for(var n=0;n<u.height;n++)for(var l=0;l<u.width;l++){var c=u.data[n][l];c&&r.indexOf(c.index)===-1&&(h(c,e),o(c.index,e,u))}s&&g(0,0,u.width,u.height,u)};v.exports=a}),64740:((v,T,t)=>{var h=t(20576),g=t(42573),o=t(97022),a=function(r,e,s,u){e===void 0&&(e=!0),s===void 0&&(s=!0);for(var n=0;n<u.height;n++)for(var l=0;l<u.width;l++){var c=u.data[n][l];if(c){for(var d in r)if(o(c.properties,d)){var f=r[d];Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++)c.properties[d]===f[m]&&h(c,e)}}}s&&g(0,0,u.width,u.height,u)};v.exports=a}),63307:((v,T,t)=>{var h=t(20576),g=t(42573),o=function(a,r,e){a===void 0&&(a=!0),r===void 0&&(r=!0);for(var s=0;s<e.height;s++)for(var u=0;u<e.width;u++){var n=e.data[s][u];if(n){var l=n.getCollisionGroup();l&&l.objects&&l.objects.length>0&&h(n,a)}}r&&g(0,0,e.width,e.height,e)};v.exports=o}),9589:(v=>{var T=function(t,h,g){var o=g.collideIndexes.indexOf(t);h&&o===-1?g.collideIndexes.push(t):!h&&o!==-1&&g.collideIndexes.splice(o,1)};v.exports=T}),20576:(v=>{var T=function(t,h){h?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)};v.exports=T}),79583:(v=>{var T=function(t,h,g,o){if(typeof t=="number")o.callbacks[t]=h!==null?{callback:h,callbackContext:g}:void 0;else for(var a=0,r=t.length;a<r;a++)o.callbacks[t[a]]=h!==null?{callback:h,callbackContext:g}:void 0};v.exports=T}),93254:((v,T,t)=>{var h=t(7386),g=function(o,a,r,e,s,u,n){for(var l=h(o,a,r,e,null,n),c=0;c<l.length;c++)l[c].setCollisionCallback(s,u)};v.exports=g}),32903:((v,T,t)=>{var h=t(7386),g=t(33680),o=function(a,r,e,s,u){var n=h(a,r,e,s,null,u),l=n.map(function(d){return d.index});g(l);for(var c=0;c<n.length;c++)n[c].index=l[c]};v.exports=o}),61325:((v,T,t)=>{var h=t(63448),g=t(56583),o=function(a,r){var e=a.tilemapLayer.tilemap,s=a.tilemapLayer,u=Math.floor(e.tileWidth*s.scaleX),n=Math.floor(e.tileHeight*s.scaleY),l=g(r.worldView.x-s.x,u,0,!0)-s.cullPaddingX,c=h(r.worldView.right-s.x,u,0,!0)+s.cullPaddingX,d=g(r.worldView.y-s.y,n/2,0,!0)-s.cullPaddingY,f=h(r.worldView.bottom-s.y,n/2,0,!0)+s.cullPaddingY;return{left:l,right:c,top:d,bottom:f}};v.exports=o}),54503:((v,T,t)=>{var h=t(61325),g=t(32483),o=function(a,r,e,s){e===void 0&&(e=[]),s===void 0&&(s=0),e.length=0;var u=a.tilemapLayer,n=h(a,r);return u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1&&(n.left=0,n.right=a.width,n.top=0,n.bottom=a.height),g(a,n,s,e),e};v.exports=o}),97202:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s){r||(r=new h);var u=s.baseTileWidth,n=s.baseTileHeight,l=s.tilemapLayer,c=0,d=0;l&&(e||(e=l.scene.cameras.main),c=l.x+e.scrollX*(1-l.scrollFactorX),u*=l.scaleX,d=l.y+e.scrollY*(1-l.scrollFactorY),n*=l.scaleY);var f=c+o*u+a%2*(u/2),m=d+a*(n/2);return r.set(f,m)};v.exports=g}),28054:(v=>{var T=function(t,h,g){var o=g.baseTileHeight,a=g.tilemapLayer,r=0;return a&&(h===void 0&&(h=a.scene.cameras.main),r=a.y+h.scrollY*(1-a.scrollFactorY),o*=a.scaleY),r+t*(o/2)+o};v.exports=T}),15108:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s,u){e||(e=new h);var n=u.baseTileWidth,l=u.baseTileHeight,c=u.tilemapLayer;c&&(s||(s=c.scene.cameras.main),a=a-(c.y+s.scrollY*(1-c.scrollFactorY)),l*=c.scaleY,o=o-(c.x+s.scrollX*(1-c.scrollFactorX)),n*=c.scaleX);var d=r?Math.floor(a/(l/2)):a/(l/2),f=r?Math.floor((o+d%2*.5*n)/n):(o+d%2*.5*n)/n;return e.set(f,d)};v.exports=g}),51900:(v=>{var T=function(t,h,g,o){var a=o.baseTileHeight,r=o.tilemapLayer;return r&&(g||(g=r.scene.cameras.main),t=t-(r.y+g.scrollY*(1-r.scrollFactorY)),a*=r.scaleY),h?Math.floor(t/(a/2)):t/(a/2)};v.exports=T}),86560:((v,T,t)=>{var h=t(7386),g=function(o,a,r,e,s,u,n){for(var l=h(r,e,s,u,null,n),c=0;c<l.length;c++)l[c]&&(l[c].index===o?l[c].index=a:l[c].index===a&&(l[c].index=o))};v.exports=g}),97281:(v=>{var T=function(t,h,g){var o=g.baseTileWidth,a=g.tilemapLayer,r=0;return a&&(h||(h=a.scene.cameras.main),r=a.x+h.scrollX*(1-a.scrollFactorX),o*=a.scaleX),r+t*o};v.exports=T}),70326:((v,T,t)=>{var h=t(97281),g=t(29650),o=t(26099),a=function(r,e,s,u,n){return s||(s=new o(0,0)),s.x=h(r,u,n),s.y=g(e,u,n),s};v.exports=a}),29650:(v=>{var T=function(t,h,g){var o=g.baseTileHeight,a=g.tilemapLayer,r=0;return a&&(h||(h=a.scene.cameras.main),r=a.y+h.scrollY*(1-a.scrollFactorY),o*=a.scaleY),r+t*o};v.exports=T}),77366:((v,T,t)=>{var h=t(7386),g=t(75508),o=function(a,r,e,s,u,n){if(u){var l,c=h(a,r,e,s,null,n),d=0;for(l=0;l<u.length;l++)d+=u[l].weight;if(!(d<=0))for(l=0;l<c.length;l++){for(var f=g.RND.frac()*d,m=0,y=-1,S=0;S<u.length;S++)if(m+=u[S].weight,f<=m){var C=u[S].index;y=Array.isArray(C)?C[Math.floor(g.RND.frac()*C.length)]:C;break}c[l].index=y}}};v.exports=o}),10095:((v,T,t)=>{var h=t(85896),g=t(26099),o=new g,a=function(r,e,s,u){return h(r,0,e,o,s,u),o.x};v.exports=a}),85896:((v,T,t)=>{var h=t(26099),g=function(o,a,r,e,s,u){r===void 0&&(r=!0),e||(e=new h);var n=u.baseTileWidth,l=u.baseTileHeight,c=u.tilemapLayer;c&&(s||(s=c.scene.cameras.main),o=o-(c.x+s.scrollX*(1-c.scrollFactorX)),a=a-(c.y+s.scrollY*(1-c.scrollFactorY)),n*=c.scaleX,l*=c.scaleY);var d=o/n,f=a/l;return r&&(d=Math.floor(d),f=Math.floor(f)),e.set(d,f)};v.exports=g}),63288:((v,T,t)=>{var h=t(85896),g=t(26099),o=new g,a=function(r,e,s,u){return h(0,r,e,o,s,u),o.y};v.exports=a}),81086:((v,T,t)=>{v.exports={CalculateFacesAt:t(72023),CalculateFacesWithin:t(42573),CheckIsoBounds:t(33528),Copy:t(1785),CreateFromTiles:t(78419),CullBounds:t(19545),CullTiles:t(30003),Fill:t(35137),FilterTiles:t(40253),FindByIndex:t(52692),FindTile:t(66151),ForEachTile:t(97560),GetCullTilesFunction:t(43305),GetTileAt:t(7423),GetTileAtWorldXY:t(60540),GetTileCorners:t(55826),GetTileCornersFunction:t(11758),GetTilesWithin:t(7386),GetTilesWithinShape:t(91141),GetTilesWithinWorldXY:t(96523),GetTileToWorldXFunction:t(39167),GetTileToWorldXYFunction:t(62e3),GetTileToWorldYFunction:t(5984),GetWorldToTileXFunction:t(96113),GetWorldToTileXYFunction:t(16926),GetWorldToTileYFunction:t(55762),HasTileAt:t(45091),HasTileAtWorldXY:t(24152),HexagonalCullBounds:t(90454),HexagonalCullTiles:t(9474),HexagonalGetTileCorners:t(27229),HexagonalTileToWorldXY:t(19951),HexagonalWorldToTileXY:t(86625),IsInLayerBounds:t(62991),IsometricCullTiles:t(14018),IsometricTileToWorldXY:t(14127),IsometricWorldToTileXY:t(96897),PutTileAt:t(71558),PutTileAtWorldXY:t(26303),PutTilesAt:t(14051),Randomize:t(77389),RemoveTileAt:t(63557),RemoveTileAtWorldXY:t(94178),RenderDebug:t(15533),ReplaceByIndex:t(27987),RunCull:t(32483),SetCollision:t(57068),SetCollisionBetween:t(37266),SetCollisionByExclusion:t(75661),SetCollisionByProperty:t(64740),SetCollisionFromCollisionGroup:t(63307),SetLayerCollisionIndex:t(9589),SetTileCollision:t(20576),SetTileIndexCallback:t(79583),SetTileLocationCallback:t(93254),Shuffle:t(32903),StaggeredCullBounds:t(61325),StaggeredCullTiles:t(54503),StaggeredTileToWorldXY:t(97202),StaggeredTileToWorldY:t(28054),StaggeredWorldToTileXY:t(15108),StaggeredWorldToTileY:t(51900),SwapByIndex:t(86560),TileToWorldX:t(97281),TileToWorldXY:t(70326),TileToWorldY:t(29650),WeightedRandomize:t(77366),WorldToTileX:t(10095),WorldToTileXY:t(85896),WorldToTileY:t(63288)}}),91907:(v=>{v.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}}),21829:((v,T,t)=>{var h={ORIENTATION:t(91907)};v.exports=h}),62501:((v,T,t)=>{var h=t(79291),g=t(21829),o={Components:t(81086),Parsers:t(57442),Formats:t(80341),ImageCollection:t(16536),ParseToTilemap:t(31989),Tile:t(23029),Tilemap:t(49075),TilemapCreator:t(45939),TilemapFactory:t(46029),Tileset:t(33629),TilemapLayer:t(20442),Orientation:t(91907),LayerData:t(14977),MapData:t(87010),ObjectLayer:t(48700)};o=h(!1,o,g.ORIENTATION),v.exports=o}),14977:((v,T,t)=>{var h=t(83419),g=t(91907),o=t(95540),a=new h({initialize:function(e){e===void 0&&(e={}),this.name=o(e,"name","layer"),this.id=o(e,"id",0),this.x=o(e,"x",0),this.y=o(e,"y",0),this.width=o(e,"width",0),this.height=o(e,"height",0),this.tileWidth=o(e,"tileWidth",0),this.tileHeight=o(e,"tileHeight",0),this.baseTileWidth=o(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=o(e,"baseTileHeight",this.tileHeight),this.orientation=o(e,"orientation",g.ORTHOGONAL),this.widthInPixels=o(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=o(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=o(e,"alpha",1),this.visible=o(e,"visible",!0),this.properties=o(e,"properties",[]),this.indexes=o(e,"indexes",[]),this.collideIndexes=o(e,"collideIndexes",[]),this.callbacks=o(e,"callbacks",[]),this.bodies=o(e,"bodies",[]),this.data=o(e,"data",[]),this.tilemapLayer=o(e,"tilemapLayer",null),this.hexSideLength=o(e,"hexSideLength",0),this.staggerAxis=o(e,"staggerAxis","y"),this.staggerIndex=o(e,"staggerIndex","odd")}});v.exports=a}),87010:((v,T,t)=>{var h=t(83419),g=t(91907),o=t(95540),a=new h({initialize:function(e){e===void 0&&(e={}),this.name=o(e,"name","map"),this.width=o(e,"width",0),this.height=o(e,"height",0),this.infinite=o(e,"infinite",!1),this.tileWidth=o(e,"tileWidth",0),this.tileHeight=o(e,"tileHeight",0),this.widthInPixels=o(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=o(e,"heightInPixels",this.height*this.tileHeight),this.format=o(e,"format",null),this.orientation=o(e,"orientation",g.ORTHOGONAL),this.renderOrder=o(e,"renderOrder","right-down"),this.version=o(e,"version","1"),this.properties=o(e,"properties",{}),this.layers=o(e,"layers",[]),this.images=o(e,"images",[]),this.objects=o(e,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=o(e,"collision",{}),this.tilesets=o(e,"tilesets",[]),this.imageCollections=o(e,"imageCollections",[]),this.tiles=o(e,"tiles",[]),this.hexSideLength=o(e,"hexSideLength",0),this.staggerAxis=o(e,"staggerAxis","y"),this.staggerIndex=o(e,"staggerIndex","odd")}});v.exports=a}),48700:((v,T,t)=>{var h=t(83419),g=t(95540),o=new h({initialize:function(r){r===void 0&&(r={}),this.name=g(r,"name","object layer"),this.id=g(r,"id",0),this.opacity=g(r,"opacity",1),this.properties=g(r,"properties",{}),this.propertyTypes=g(r,"propertytypes",{}),this.type=g(r,"type","objectgroup"),this.visible=g(r,"visible",!0),this.objects=g(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});v.exports=o}),6641:((v,T,t)=>{var h=t(91907),g=function(o){return o=o.toLowerCase(),o==="isometric"?h.ISOMETRIC:o==="staggered"?h.STAGGERED:o==="hexagonal"?h.HEXAGONAL:h.ORTHOGONAL};v.exports=g}),46177:((v,T,t)=>{var h=t(80341),g=t(2342),o=t(82593),a=t(46594),r=t(87021),e=function(s,u,n,l,c,d){var f;switch(u){case h.ARRAY_2D:f=g(s,n,l,c,d);break;case h.CSV:f=o(s,n,l,c,d);break;case h.TILED_JSON:f=a(s,n,d);break;case h.WELTMEISTER:f=r(s,n,d);break;default:console.warn("Unrecognized tilemap data format: "+u),f=null}return f};v.exports=e}),2342:((v,T,t)=>{var h=t(80341),g=t(14977),o=t(87010),a=t(23029),r=function(e,s,u,n,l){for(var c=new g({tileWidth:u,tileHeight:n}),d=new o({name:e,tileWidth:u,tileHeight:n,format:h.ARRAY_2D,layers:[c]}),f=[],m=s.length,y=0,S=0;S<s.length;S++){f[S]=[];for(var C=s[S],E=0;E<C.length;E++){var P=parseInt(C[E],10);isNaN(P)||P===-1?f[S][E]=l?null:new a(c,-1,E,S,u,n):f[S][E]=new a(c,P,E,S,u,n)}y===0&&(y=C.length)}return d.width=c.width=y,d.height=c.height=m,d.widthInPixels=c.widthInPixels=y*u,d.heightInPixels=c.heightInPixels=m*n,c.data=f,d};v.exports=r}),82593:((v,T,t)=>{var h=t(80341),g=t(2342),o=function(a,r,e,s,u){var n=r.trim().split(`
`).map(function(c){return c.split(",")}),l=g(a,n,e,s,u);return l.format=h.CSV,l};v.exports=o}),6656:((v,T,t)=>{var h=t(14977),g=t(23029),o=function(a,r){for(var e=[],s=0;s<a.layer.length;s++){for(var u=a.layer[s],n=new h({name:u.name,width:u.width,height:u.height,tileWidth:u.tilesize,tileHeight:u.tilesize,visible:u.visible===1}),l=[],c=[],d=0;d<u.data.length;d++){for(var f=0;f<u.data[d].length;f++){var m=u.data[d][f]-1,y;m>-1?y=new g(n,m,f,d,u.tilesize,u.tilesize):y=r?null:new g(n,-1,f,d,u.tilesize,u.tilesize),l.push(y)}c.push(l),l=[]}n.data=c,e.push(n)}return e};v.exports=o}),96483:((v,T,t)=>{var h=t(33629),g=function(o){for(var a=[],r=[],e=0;e<o.layer.length;e++){var s=o.layer[e],u=s.tilesetName;u!==""&&r.indexOf(u)===-1&&(r.push(u),a.push(new h(u,0,s.tilesize,s.tilesize,0,0)))}return a};v.exports=g}),87021:((v,T,t)=>{var h=t(80341),g=t(87010),o=t(6656),a=t(96483),r=function(e,s,u){if(s.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var n=0,l=0,c=0;c<s.layer.length;c++)s.layer[c].width>n&&(n=s.layer[c].width),s.layer[c].height>l&&(l=s.layer[c].height);var d=new g({width:n,height:l,name:e,tileWidth:s.layer[0].tilesize,tileHeight:s.layer[0].tilesize,format:h.WELTMEISTER});return d.layers=o(s,u),d.tilesets=a(s),d};v.exports=r}),52833:((v,T,t)=>{v.exports={ParseTileLayers:t(6656),ParseTilesets:t(96483),ParseWeltmeister:t(87021)}}),57442:((v,T,t)=>{v.exports={FromOrientationString:t(6641),Parse:t(46177),Parse2DArray:t(2342),ParseCSV:t(82593),Impact:t(52833),Tiled:t(96761)}}),51233:((v,T,t)=>{var h=t(79291),g=function(o){for(var a,r,e,s,u,n=0;n<o.layers.length;n++){a=o.layers[n],s=null;for(var l=0;l<a.data.length;l++){u=a.data[l];for(var c=0;c<u.length;c++)r=u[c],!(r===null||r.index<0)&&(e=o.tiles[r.index][2],s=o.tilesets[e],r.width=s.tileWidth,r.height=s.tileHeight,s.tileProperties&&s.tileProperties[r.index-s.firstgid]&&(r.properties=h(r.properties,s.tileProperties[r.index-s.firstgid])))}}};v.exports=g}),41868:(v=>{var T=function(t){for(var h=window.atob(t),g=h.length,o=new Array(g/4),a=0;a<g;a+=4)o[a/4]=(h.charCodeAt(a)|h.charCodeAt(a+1)<<8|h.charCodeAt(a+2)<<16|h.charCodeAt(a+3)<<24)>>>0;return o};v.exports=T}),84101:((v,T,t)=>{var h=t(33629),g=function(o){var a,r,e=[];for(a=0;a<o.imageCollections.length;a++)for(var s=o.imageCollections[a],u=s.images,n=0;n<u.length;n++){var l=u[n],c={x:0,y:l.height-o.tileHeight};r=new h(l.image,l.gid,l.width,l.height,0,0,void 0,void 0,c),r.updateTileData(l.width,l.height),o.tilesets.push(r)}for(a=0;a<o.tilesets.length;a++){r=o.tilesets[a];for(var d=r.tileMargin,f=r.tileMargin,m=0,y=0,S=0,C=r.firstgid;C<r.firstgid+r.total&&(e[C]=[d,f,a],d+=r.tileWidth+r.tileSpacing,m++,!(m===r.total||(y++,y===r.columns&&(d=r.tileMargin,f+=r.tileHeight+r.tileSpacing,y=0,S++,S===r.rows))));C++);}return e};v.exports=g}),79677:((v,T,t)=>{var h=t(95540),g=function(o,a,r){if(!a)return{i:0,layers:o.layers,name:"",opacity:1,visible:!0,x:0,y:0};var e=a.x+h(a,"startx",0)*o.tilewidth+h(a,"offsetx",0),s=a.y+h(a,"starty",0)*o.tileheight+h(a,"offsety",0);return{i:0,layers:a.layers,name:r.name+a.name+"/",opacity:r.opacity*a.opacity,visible:r.visible&&a.visible,x:r.x+e,y:r.y+s}};v.exports=g}),29920:(v=>{var T=2147483648,t=1073741824,h=536870912,g=function(o){var a=!!(o&T),r=!!(o&t),e=!!(o&h);o=o&536870911;var s=0,u=!1;return a&&r&&e?(s=Math.PI/2,u=!0):a&&r&&!e?(s=Math.PI,u=!1):a&&!r&&e?(s=Math.PI/2,u=!1):a&&!r&&!e?(s=0,u=!0):!a&&r&&e?(s=3*Math.PI/2,u=!1):!a&&r&&!e?(s=Math.PI,u=!0):!a&&!r&&e?(s=3*Math.PI/2,u=!0):!a&&!r&&!e&&(s=0,u=!1),{gid:o,flippedHorizontal:a,flippedVertical:r,flippedAntiDiagonal:e,rotation:s,flipped:u}};v.exports=g}),12635:((v,T,t)=>{var h=t(95540),g=t(79677),o=function(a){for(var r=[],e=[],s=g(a);s.i<s.layers.length||e.length>0;){if(s.i>=s.layers.length){if(e.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=e.pop();continue}var u=s.layers[s.i];if(s.i++,u.type!=="imagelayer"){if(u.type==="group"){var n=g(a,u,s);e.push(s),s=n}continue}var l=h(u,"offsetx",0)+h(u,"startx",0),c=h(u,"offsety",0)+h(u,"starty",0);r.push({name:s.name+u.name,image:u.image,x:s.x+l+u.x,y:s.y+c+u.y,alpha:s.opacity*u.opacity,visible:s.visible&&u.visible,properties:h(u,"properties",{})})}return r};v.exports=o}),46594:((v,T,t)=>{var h=t(51233),g=t(84101),o=t(91907),a=t(62644),r=t(80341),e=t(6641),s=t(87010),u=t(12635),n=t(22611),l=t(28200),c=t(24619),d=function(f,m,y){var S=a(m),C=new s({width:S.width,height:S.height,name:f,tileWidth:S.tilewidth,tileHeight:S.tileheight,orientation:e(S.orientation),format:r.TILED_JSON,version:S.version,properties:S.properties,renderOrder:S.renderorder,infinite:S.infinite});if(C.orientation===o.HEXAGONAL)if(C.hexSideLength=S.hexsidelength,C.staggerAxis=S.staggeraxis,C.staggerIndex=S.staggerindex,C.staggerAxis==="y"){var E=(C.tileHeight-C.hexSideLength)/2;C.widthInPixels=C.tileWidth*(C.width+.5),C.heightInPixels=C.height*(C.hexSideLength+E)+E}else{var P=(C.tileWidth-C.hexSideLength)/2;C.widthInPixels=C.width*(C.hexSideLength+P)+P,C.heightInPixels=C.tileHeight*(C.height+.5)}C.layers=l(S,y),C.images=u(S);var A=c(S);return C.tilesets=A.tilesets,C.imageCollections=A.imageCollections,C.objects=n(S),C.tiles=g(C),h(C),C};v.exports=d}),52205:((v,T,t)=>{var h=t(18254),g=t(29920),o=function(e){return{x:e.x,y:e.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"],r=function(e,s,u){s===void 0&&(s=0),u===void 0&&(u=0);var n=h(e,a);if(n.x+=s,n.y+=u,e.gid){var l=g(e.gid);n.gid=l.gid,n.flippedHorizontal=l.flippedHorizontal,n.flippedVertical=l.flippedVertical,n.flippedAntiDiagonal=l.flippedAntiDiagonal}else e.polyline?n.polyline=e.polyline.map(o):e.polygon?n.polygon=e.polygon.map(o):e.ellipse?n.ellipse=e.ellipse:e.text?n.text=e.text:e.point?n.point=!0:n.rectangle=!0;return n};v.exports=r}),22611:((v,T,t)=>{var h=t(95540),g=t(52205),o=t(48700),a=t(79677),r=function(e){for(var s=[],u=[],n=a(e);n.i<n.layers.length||u.length>0;){if(n.i>=n.layers.length){if(u.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=u.pop();continue}var l=n.layers[n.i];if(n.i++,l.opacity*=n.opacity,l.visible=n.visible&&l.visible,l.type!=="objectgroup"){if(l.type==="group"){var c=a(e,l,n);u.push(n),n=c}continue}l.name=n.name+l.name;for(var d=n.x+h(l,"startx",0)+h(l,"offsetx",0),f=n.y+h(l,"starty",0)+h(l,"offsety",0),m=[],y=0;y<l.objects.length;y++){var S=g(l.objects[y],d,f);m.push(S)}var C=new o(l);C.objects=m,s.push(C)}return s};v.exports=r}),28200:((v,T,t)=>{var h=t(41868),g=t(91907),o=t(79677),a=t(6641),r=t(95540),e=t(14977),s=t(29920),u=t(23029),n=function(l,c){for(var d=r(l,"infinite",!1),f=[],m=[],y=o(l);y.i<y.layers.length||m.length>0;){if(y.i>=y.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=m.pop();continue}var S=y.layers[y.i];if(y.i++,S.type!=="tilelayer"){if(S.type==="group"){var C=o(l,S,y);m.push(y),y=C}continue}if(S.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+S.name+"'");continue}else if(S.encoding&&S.encoding==="base64"){if(S.chunks)for(var E=0;E<S.chunks.length;E++)S.chunks[E].data=h(S.chunks[E].data);S.data&&(S.data=h(S.data)),delete S.encoding}var P,A,F,G,D,L,b=[],I=0;if(d){var N=r(S,"startx",0)+S.x,Z=r(S,"starty",0)+S.y;P=new e({name:y.name+S.name,id:S.id,x:y.x+r(S,"offsetx",0)+N*l.tilewidth,y:y.y+r(S,"offsety",0)+Z*l.tileheight,width:S.width,height:S.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:y.opacity*S.opacity,visible:y.visible&&S.visible,properties:r(S,"properties",[]),orientation:a(l.orientation)}),P.orientation===g.HEXAGONAL&&(P.hexSideLength=l.hexsidelength,P.staggerAxis=l.staggeraxis,P.staggerIndex=l.staggerindex,P.staggerAxis==="y"?(D=(P.tileHeight-P.hexSideLength)/2,P.widthInPixels=P.tileWidth*(P.width+.5),P.heightInPixels=P.height*(P.hexSideLength+D)+D):(L=(P.tileWidth-P.hexSideLength)/2,P.widthInPixels=P.width*(P.hexSideLength+L)+L,P.heightInPixels=P.tileHeight*(P.height+.5)));for(var U=0;U<S.height;U++){b[U]=[null];for(var W=0;W<S.width;W++)b[U][W]=null}for(U=0,ut=S.chunks.length;U<ut;U++)for(var X=S.chunks[U],V=X.x-N,O=X.y-Z,z=0,B=0,Y=X.data.length;B<Y;B++){var k=I+V,J=z+O;A=s(X.data[B]),A.gid>0?(F=new u(P,A.gid,k,J,l.tilewidth,l.tileheight),F.rotation=A.rotation,F.flipX=A.flipped,b[J][k]=F):(G=c?null:new u(P,-1,k,J,l.tilewidth,l.tileheight),b[J][k]=G),I++,I===X.width&&(z++,I=0)}}else{P=new e({name:y.name+S.name,id:S.id,x:y.x+r(S,"offsetx",0)+S.x,y:y.y+r(S,"offsety",0)+S.y,width:S.width,height:S.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:y.opacity*S.opacity,visible:y.visible&&S.visible,properties:r(S,"properties",[]),orientation:a(l.orientation)}),P.orientation===g.HEXAGONAL&&(P.hexSideLength=l.hexsidelength,P.staggerAxis=l.staggeraxis,P.staggerIndex=l.staggerindex,P.staggerAxis==="y"?(D=(P.tileHeight-P.hexSideLength)/2,P.widthInPixels=P.tileWidth*(P.width+.5),P.heightInPixels=P.height*(P.hexSideLength+D)+D):(L=(P.tileWidth-P.hexSideLength)/2,P.widthInPixels=P.width*(P.hexSideLength+L)+L,P.heightInPixels=P.tileHeight*(P.height+.5)));for(var j=[],tt=0,ut=S.data.length;tt<ut;tt++)A=s(S.data[tt]),A.gid>0?(F=new u(P,A.gid,I,b.length,l.tilewidth,l.tileheight),F.rotation=A.rotation,F.flipX=A.flipped,j.push(F)):(G=c?null:new u(P,-1,I,b.length,l.tilewidth,l.tileheight),j.push(G)),I++,I===S.width&&(b.push(j),I=0,j=[])}P.data=b,f.push(P)}return f};v.exports=n}),24619:((v,T,t)=>{var h=t(33629),g=t(16536),o=t(52205),a=t(57880),r=function(e){for(var s=[],u=[],n=null,l,c=0;c<e.tilesets.length;c++){var d=e.tilesets[c];if(d.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(d.image){var f=new h(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing,void 0,void 0,d.tileoffset);if(e.version>1){var m=void 0,y=void 0;if(Array.isArray(d.tiles)){m=m||{},y=y||{};for(var S=0;S<d.tiles.length;S++){var C=d.tiles[S];if(C.properties){var E={};C.properties.forEach(function(U){E[U.name]=U.value}),y[C.id]=E}if(C.objectgroup&&((m[C.id]||(m[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var P=C.objectgroup.objects.map(function(U){return o(U)});m[C.id].objectgroup.objects=P}C.animation&&((m[C.id]||(m[C.id]={})).animation=C.animation),C.type&&((m[C.id]||(m[C.id]={})).type=C.type)}}Array.isArray(d.wangsets)&&(m=m||{},y=y||{},a(d.wangsets,m)),m&&(f.tileData=m,f.tileProperties=y)}else if(d.tileproperties&&(f.tileProperties=d.tileproperties),d.tiles){f.tileData=d.tiles;for(l in f.tileData){var A=f.tileData[l].objectgroup;if(A&&A.objects){var F=A.objects.map(function(U){return o(U)});f.tileData[l].objectgroup.objects=F}}}f.updateTileData(d.imagewidth,d.imageheight),s.push(f)}else{var G=new g(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing,d.properties),D=0;for(S=0;S<d.tiles.length;S++){C=d.tiles[S];var L=C.image,b=parseInt(C.id,10),I=d.firstgid+b,N=C.imagewidth,Z=C.imageheight;G.addImage(I,L,N,Z),D=Math.max(b,D)}G.maxId=D,u.push(G)}n&&(n.lastgid=d.firstgid-1),n=d}return{tilesets:s,imageCollections:u}};v.exports=r}),57880:(v=>{var T=function(t,h){for(var g=0;g<t.length;g++){var o=t[g],a=g;if(o.name&&o.name!==""&&(a=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var r={},e={},s,u,n;if(Array.isArray(o.edgecolors))for(s=0;s<o.edgecolors.length;s++)n=1+s,u=o.edgecolors[s],u.name!==""&&(r[n]=u.name);if(Array.isArray(o.cornercolors))for(s=0;s<o.cornercolors.length;s++)n=1+s,u=o.cornercolors[s],u.name!==""&&(e[n]=u.name);if(Array.isArray(o.colors))for(s=0;s<o.colors.length;s++)u=o.colors[s],n=1+s,u.name!==""&&(r[n]=e[n]=u.name);for(var l=[r,e,r,e,r,e,r,e],c=0;c<o.wangtiles.length;c++){var d=o.wangtiles[c],f=h[d.tileid]||(h[d.tileid]={});f=f.wangid||(f.wangid={});for(var m=[],y=0;y<Math.min(l.length,d.wangid.length);y++){if(u=d.wangid[y],u===0){m.push(void 0);continue}var S=l[y][u];if(S!==void 0){m.push(S);continue}m.push(u)}f[a]=m}}}};v.exports=T}),96761:((v,T,t)=>{v.exports={AssignTileProperties:t(51233),Base64Decode:t(41868),BuildTilesetIndex:t(84101),CreateGroupLayer:t(79677),ParseGID:t(29920),ParseImageLayers:t(12635),ParseJSONTiled:t(46594),ParseObject:t(52205),ParseObjectLayers:t(22611),ParseTileLayers:t(28200),ParseTilesets:t(24619)}}),33385:((v,T,t)=>{var h=t(83419),g=t(37277),o=t(44594),a=t(94880),r=t(72905),e=new h({initialize:function(u){this.scene=u,this.systems=u.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var s=this.systems.events;s.on(o.PRE_UPDATE,this.preUpdate,this),s.on(o.UPDATE,this.update,this),s.once(o.SHUTDOWN,this.shutdown,this)},addEvent:function(s){var u;if(s instanceof a){if(u=s,this.removeEvent(u),u.elapsed=u.startAt,u.hasDispatched=!1,u.repeatCount=u.repeat===-1||u.loop?999999999999:u.repeat,u.delay<=0&&u.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else u=new a(s);return this._pendingInsertion.push(u),u},delayedCall:function(s,u,n,l){return this.addEvent({delay:s,callback:u,args:n,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(s){Array.isArray(s)||(s=[s]);for(var u=0;u<s.length;u++){var n=s[u];r(this._pendingRemoval,n),r(this._pendingInsertion,n),r(this._active,n)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var s=this._pendingRemoval.length,u=this._pendingInsertion.length;if(!(s===0&&u===0)){var n,l;for(n=0;n<s;n++){l=this._pendingRemoval[n];var c=this._active.indexOf(l);c>-1&&this._active.splice(c,1),l.destroy()}for(n=0;n<u;n++)l=this._pendingInsertion[n],this._active.push(l);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(s,u){if(this.now=s,!this.paused){u*=this.timeScale;for(var n=0;n<this._active.length;n++){var l=this._active[n];if(!l.paused&&(l.elapsed+=u*l.timeScale,l.elapsed>=l.delay)){var c=l.elapsed-l.delay;if(l.elapsed=l.delay,!l.hasDispatched&&l.callback&&(l.hasDispatched=!0,l.callback.apply(l.callbackScope,l.args)),l.repeatCount>0){if(l.repeatCount--,c>=l.delay)for(;c>=l.delay&&l.repeatCount>0;)l.callback&&l.callback.apply(l.callbackScope,l.args),c-=l.delay,l.repeatCount--;l.elapsed=c,l.hasDispatched=!1}else l.hasDispatched&&this._pendingRemoval.push(l)}}}},shutdown:function(){var s;for(s=0;s<this._pendingInsertion.length;s++)this._pendingInsertion[s].destroy();for(s=0;s<this._active.length;s++)this._active[s].destroy();for(s=0;s<this._pendingRemoval.length;s++)this._pendingRemoval[s].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var u=this.systems.events;u.off(o.PRE_UPDATE,this.preUpdate,this),u.off(o.UPDATE,this.update,this),u.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});g.register("Clock",e,"time"),v.exports=e}),96120:((v,T,t)=>{var h=t(83419),g=t(50792),o=t(39429),a=t(95540),r=t(44594),e=t(89809),s=new h({Extends:g,initialize:function(n,l){g.call(this),this.scene=n,this.systems=n.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var c=this.systems.events;c.on(r.PRE_UPDATE,this.preUpdate,this),c.on(r.UPDATE,this.update,this),c.once(r.SHUTDOWN,this.destroy,this),l&&this.add(l)},preUpdate:function(u,n){this.paused||(this.elapsed+=n*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var u,n=this.events,l=!1,c=this.systems,d;for(u=0;u<n.length;u++){var f=n[u];if(!f.complete&&f.time<=this.elapsed){if(f.complete=!0,this.totalComplete++,d=f.target?f.target:this,f.if&&!f.if.call(d,f))continue;if(f.once&&(l=!0),f.set&&f.target)for(var m in f.set)f.target[m]=f.set[m];this.iteration&&f.repeat++,f.loop&&f.repeat&&f.loop.call(d),f.tween&&(f.tweenInstance=c.tweens.add(f.tween)),f.sound&&(typeof f.sound=="string"?c.sound.play(f.sound):c.sound.play(f.sound.key,f.sound.config)),f.event&&this.emit(f.event,d),f.run&&f.run.call(d),f.stop&&this.stop()}}if(l)for(u=0;u<n.length;u++)n[u].complete&&n[u].once&&(n.splice(u,1),u--);this.totalComplete>=n.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(e.COMPLETE,this)}},play:function(u){return u===void 0&&(u=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,u&&this.reset(),this},pause:function(){this.paused=!0;for(var u=this.events,n=0;n<u.length;n++){var l=u[n];l.tweenInstance&&(l.tweenInstance.paused=!0)}return this},repeat:function(u){return(u===void 0||u===!0)&&(u=-1),u===!1&&(u=0),this.loop=u,this},resume:function(){this.paused=!1;for(var u=this.events,n=0;n<u.length;n++){var l=u[n];l.tweenInstance&&(l.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(u){u===void 0&&(u=!1),this.elapsed=0,u||(this.iteration=0);for(var n=this.events,l=0;l<n.length;l++){var c=n[l];c.complete=!1,u||(c.repeat=0),c.tweenInstance&&c.tweenInstance.stop()}return this.play(!1)},add:function(u){Array.isArray(u)||(u=[u]);var n=this.events,l=0;n.length>0&&(l=n[n.length-1].time);for(var c=0;c<u.length;c++){var d=u[c],f=a(d,"at",0),m=a(d,"in",null);m!==null&&(f=this.elapsed+m);var y=a(d,"from",null);y!==null&&(f=l+y),n.push({complete:!1,time:f,repeat:0,if:a(d,"if",null),run:a(d,"run",null),loop:a(d,"loop",null),event:a(d,"event",null),target:a(d,"target",null),set:a(d,"set",null),tween:a(d,"tween",null),sound:a(d,"sound",null),once:a(d,"once",!1),stop:a(d,"stop",!1)}),l=f}return this.complete=!1,this},clear:function(){for(var u=this.events,n=0;n<u.length;n++){var l=u[n];l.tweenInstance&&l.tweenInstance.stop()}return u=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var u=Math.min(this.totalComplete,this.events.length);return u/this.events.length},destroy:function(){var u=this.systems.events;u.off(r.PRE_UPDATE,this.preUpdate,this),u.off(r.UPDATE,this.update,this),u.off(r.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});o.register("timeline",function(u){return new s(this.scene,u)}),v.exports=s}),94880:((v,T,t)=>{var h=t(83419),g=t(95540),o=new h({initialize:function(r){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(r)},reset:function(a){if(this.delay=g(a,"delay",0),this.repeat=g(a,"repeat",0),this.loop=g(a,"loop",!1),this.callback=g(a,"callback",void 0),this.callbackScope=g(a,"callbackScope",this),this.args=g(a,"args",[]),this.timeScale=g(a,"timeScale",1),this.startAt=g(a,"startAt",0),this.paused=g(a,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var a=this.delay+this.delay*this.repeat,r=this.elapsed+this.delay*(this.repeat-this.repeatCount);return r/a}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(a){a===void 0&&(a=!1),this.elapsed=this.delay,this.hasDispatched=!a,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});v.exports=o}),35945:(v=>{v.exports="complete"}),89809:((v,T,t)=>{v.exports={COMPLETE:t(35945)}}),90291:((v,T,t)=>{v.exports={Clock:t(33385),Events:t(89809),Timeline:t(96120),TimerEvent:t(94880)}}),40382:((v,T,t)=>{var h=t(72905),g=t(83419),o=t(43491),a=t(88032),r=t(37277),e=t(44594),s=t(93109),u=t(86081),n=t(8357),l=t(43960),c=t(26012),d=new g({initialize:function(m){this.scene=m,this.events=m.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(e.BOOT,this.boot,this),this.events.on(e.START,this.start,this)},boot:function(){this.events.once(e.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(e.UPDATE,this.update,this),this.events.once(e.SHUTDOWN,this.shutdown,this)},create:function(f){Array.isArray(f)||(f=[f]);for(var m=[],y=0;y<f.length;y++){var S=f[y];S instanceof u||S instanceof l?m.push(S):Array.isArray(S.tweens)?m.push(c(this,S)):m.push(n(this,S))}return m.length===1?m[0]:m},add:function(f){var m=f,y=this.tweens;return m instanceof u||m instanceof l||(Array.isArray(m.tweens)?m=c(this,m):m=n(this,m)),y.push(m.reset()),m},addMultiple:function(f){for(var m,y=[],S=this.tweens,C=0;C<f.length;C++)m=f[C],m instanceof u||m instanceof l||(Array.isArray(m.tweens)?m=c(this,m):m=n(this,m)),S.push(m.reset()),y.push(m);return y},chain:function(f){var m=c(this,f);return this.tweens.push(m.init()),m},getChainedTweens:function(f){return f.getChainedTweens()},has:function(f){return this.tweens.indexOf(f)>-1},existing:function(f){return this.has(f)||this.tweens.push(f.reset()),this},addCounter:function(f){var m=a(this,f);return this.tweens.push(m.reset()),m},stagger:function(f,m){return s(f,m)},setLagSmooth:function(f,m){return f===void 0&&(f=1/1e-8),m===void 0&&(m=0),this.maxLag=f,this.lagSkip=Math.min(m,this.maxLag),this},setFps:function(f){return f===void 0&&(f=240),this.gap=1e3/f,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(f){var m=Date.now()-this.prevTime;m>this.maxLag&&(this.startTime+=m-this.lagSkip),this.prevTime+=m;var y=this.prevTime-this.startTime,S=y-this.nextTime,C=y-this.time*1e3;return S>0||f?(y/=1e3,this.time=y,this.nextTime+=S+(S>=this.gap?4:this.gap-S)):C=0,C},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(f){f===void 0&&(f=!1);var m=this.getDelta(f);if(!(m<=0)){this.processing=!0;var y,S,C=[],E=this.tweens;for(y=0;y<E.length;y++)S=E[y],S.update(m)&&C.push(S);var P=C.length;if(P&&E.length>0){for(y=0;y<P;y++){S=C[y];var A=E.indexOf(S);A>-1&&(S.isPendingRemove()||S.isDestroyed())&&(E.splice(A,1),S.destroy())}C.length=0}this.processing=!1}},remove:function(f){return this.processing?f.setPendingRemoveState():(h(this.tweens,f),f.setRemovedState()),this},reset:function(f){return this.existing(f),f.seek(),f.setActiveState(),this},makeActive:function(f){return this.existing(f),f.setActiveState(),this},each:function(f,m){var y,S=[null];for(y=1;y<arguments.length;y++)S.push(arguments[y]);return this.tweens.forEach(function(C){S[0]=C,f.apply(m,S)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(f){var m=[],y=this.tweens;Array.isArray(f)?f=o(f):f=[f];for(var S=f.length,C=0;C<y.length;C++)for(var E=y[C],P=0;P<S;P++)!E.isDestroyed()&&E.hasTarget(f[P])&&m.push(E);return m},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(f){return this.timeScale=f,this},isTweening:function(f){for(var m=this.tweens,y,S=0;S<m.length;S++)if(y=m[S],y.isPlaying()&&y.hasTarget(f))return!0;return!1},killAll:function(){for(var f=this.processing?this.getTweens():this.tweens,m=0;m<f.length;m++)f[m].destroy();return this.processing||(f.length=0),this},killTweensOf:function(f){for(var m=this.getTweensOf(f),y=0;y<m.length;y++)m[y].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(e.UPDATE,this.update,this),this.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(e.START,this.start,this),this.scene=null,this.events=null}});r.register("TweenManager",d,"tweens"),v.exports=d}),57355:(v=>{var T=function(t,h,g){return t&&t.hasOwnProperty(h)?t[h]:g};v.exports=T}),6113:((v,T,t)=>{var h=t(62640),g=t(35355),o=function(a,r){var e=h.Power0;if(typeof a=="string")if(h.hasOwnProperty(a))e=h[a];else{var s="";if(a.indexOf(".")){s=a.substring(a.indexOf(".")+1);var u=s.toLowerCase();u==="in"?s="easeIn":u==="out"?s="easeOut":u==="inout"&&(s="easeInOut")}a=g(a.substring(0,a.indexOf(".")+1)+s),h.hasOwnProperty(a)&&(e=h[a])}else typeof a=="function"&&(e=a);if(!r)return e;var n=r.slice(0);return n.unshift(0),function(l){return n[0]=l,e.apply(this,n)}};v.exports=o}),91389:((v,T,t)=>{var h=t(89318),g=t(77259),o=t(28392),a={bezier:h,catmull:g,catmullrom:g,linear:o},r=function(e){if(e===null)return null;var s=a.linear;return typeof e=="string"?a.hasOwnProperty(e)&&(s=a[e]):typeof e=="function"&&(s=e),s};v.exports=r}),55292:(v=>{var T=function(t,h,g){var o;if(t.hasOwnProperty(h)){var a=typeof t[h];a==="function"?o=function(r,e,s,u,n,l){return t[h](r,e,s,u,n,l)}:o=function(){return t[h]}}else typeof g=="function"?o=g:o=function(){return g};return o};v.exports=T}),82985:((v,T,t)=>{var h=t(81076),g=function(o){var a,r=[];if(o.hasOwnProperty("props"))for(a in o.props)a.substring(0,1)!=="_"&&r.push({key:a,value:o.props[a]});else for(a in o)h.indexOf(a)===-1&&a.substring(0,1)!=="_"&&r.push({key:a,value:o[a]});return r};v.exports=g}),62329:((v,T,t)=>{var h=t(35154),g=function(o){var a=h(o,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a};v.exports=g}),17777:((v,T,t)=>{var h=t(30976),g=t(99472);function o(u){return!!u.getActive&&typeof u.getActive=="function"}function a(u){return!!u.getStart&&typeof u.getStart=="function"}function r(u){return!!u.getEnd&&typeof u.getEnd=="function"}function e(u){return a(u)||r(u)||o(u)}var s=function(u,n){var l,c=function(U,W,X){return X},d=function(U,W,X){return X},f=null,m=typeof n;if(m==="number")c=function(){return n};else if(Array.isArray(n))d=function(){return n[0]},c=function(){return n[n.length-1]};else if(m==="string"){var y=n.toLowerCase(),S=y.substring(0,6)==="random",C=y.substring(0,3)==="int";if(S||C){var E=y.indexOf("("),P=y.indexOf(")"),A=y.indexOf(",");if(E&&P&&A){var F=parseFloat(y.substring(E+1,A)),G=parseFloat(y.substring(A+1,P));S?c=function(){return g(F,G)}:c=function(){return h(F,G)}}else throw new Error("invalid random() format")}else{y=y[0];var D=parseFloat(n.substr(2));switch(y){case"+":c=function(U,W,X){return X+D};break;case"-":c=function(U,W,X){return X-D};break;case"*":c=function(U,W,X){return X*D};break;case"/":c=function(U,W,X){return X/D};break;default:c=function(){return parseFloat(n)}}}}else if(m==="function")c=n;else if(m==="object")if(e(n))o(n)&&(f=n.getActive),r(n)&&(c=n.getEnd),a(n)&&(d=n.getStart);else if(n.hasOwnProperty("value"))l=s(u,n.value);else{var L=n.hasOwnProperty("to"),b=n.hasOwnProperty("from"),I=n.hasOwnProperty("start");if(L&&(b||I)){if(l=s(u,n.to),I){var N=s(u,n.start);l.getActive=N.getEnd}if(b){var Z=s(u,n.from);l.getStart=Z.getEnd}}}return l||(l={getActive:f,getEnd:c,getStart:d}),l};v.exports=s}),88032:((v,T,t)=>{var h=t(70402),g=t(69902),o=t(23568),a=t(57355),r=t(6113),e=t(95540),s=t(55292),u=t(35154),n=t(17777),l=t(269),c=t(86081),d=function(f,m,y){if(m instanceof c)return m.parent=f,m;y===void 0?y=g:y=l(g,y);var S=e(m,"from",0),C=e(m,"to",1),E=[{value:S}],P=e(m,"delay",y.delay),A=e(m,"easeParams",y.easeParams),F=e(m,"ease",y.ease),G=n("value",C),D=new c(f,E),L=D.add(0,"value",G.getEnd,G.getStart,G.getActive,r(e(m,"ease",F),e(m,"easeParams",A)),s(m,"delay",P),e(m,"duration",y.duration),a(m,"yoyo",y.yoyo),e(m,"hold",y.hold),e(m,"repeat",y.repeat),e(m,"repeatDelay",y.repeatDelay),!1,!1);L.start=S,L.current=S,D.completeDelay=o(m,"completeDelay",0),D.loop=Math.round(o(m,"loop",0)),D.loopDelay=Math.round(o(m,"loopDelay",0)),D.paused=a(m,"paused",!1),D.persist=a(m,"persist",!1),D.isNumberTween=!0,D.callbackScope=u(m,"callbackScope",D);for(var b=h.TYPES,I=0;I<b.length;I++){var N=b[I],Z=u(m,N,!1);if(Z){var U=u(m,N+"Params",[]);D.setCallback(N,Z,U)}}return D};v.exports=d}),93109:((v,T,t)=>{var h=t(6113),g=t(35154),o=t(36383),a=function(r,e){e===void 0&&(e={});var s,u=g(e,"start",0),n=g(e,"ease",null),l=g(e,"grid",null),c=g(e,"from",0),d=c==="first",f=c==="center",m=c==="last",y=typeof c=="number",S=Array.isArray(r),C=parseFloat(S?r[0]:r),E=S?parseFloat(r[1]):0,P=Math.max(C,E);if(S&&(u+=C),l){var A=l[0],F=l[1],G=0,D=0,L=0,b=0,I=[];m?(G=A-1,D=F-1):y?(G=c%A,D=Math.floor(c/A)):f&&(G=(A-1)/2,D=(F-1)/2);for(var N=o.MIN_SAFE_INTEGER,Z=0;Z<F;Z++){I[Z]=[];for(var U=0;U<A;U++){L=G-U,b=D-Z;var W=Math.sqrt(L*L+b*b);W>N&&(N=W),I[Z][U]=W}}}var X=n?h(n):null;return l?s=function(V,O,z,B){var Y=0,k=B%A,J=Math.floor(B/A);k>=0&&k<A&&J>=0&&J<F&&(Y=I[J][k]);var j;if(S){var tt=E-C;X?j=Y/N*tt*X(Y/N):j=Y/N*tt}else X?j=Y*C*X(Y/N):j=Y*C;return j+u}:s=function(V,O,z,B,Y){Y--;var k;d?k=B:f?k=Math.abs(Y/2-B):m?k=Y-B:y&&(k=Math.abs(c-B));var J;if(S){var j;f?j=(E-C)/Y*(k*2):j=(E-C)/Y*k,X?J=j*X(k/Y):J=j}else X?J=Y*P*X(k/Y):J=k*C;return J+u},s};v.exports=a}),8357:((v,T,t)=>{var h=t(70402),g=t(69902),o=t(23568),a=t(57355),r=t(6113),e=t(95540),s=t(91389),u=t(55292),n=t(82985),l=t(62329),c=t(35154),d=t(17777),f=t(269),m=t(86081),y=function(S,C,E){if(C instanceof m)return C.parent=S,C;E===void 0?E=g:E=f(g,E);var P=l(C);!P&&E.targets&&(P=E.targets);for(var A=n(C),F=e(C,"delay",E.delay),G=e(C,"duration",E.duration),D=e(C,"easeParams",E.easeParams),L=e(C,"ease",E.ease),b=e(C,"hold",E.hold),I=e(C,"repeat",E.repeat),N=e(C,"repeatDelay",E.repeatDelay),Z=a(C,"yoyo",E.yoyo),U=a(C,"flipX",E.flipX),W=a(C,"flipY",E.flipY),X=e(C,"interpolation",E.interpolation),V=function(st,dt,lt,ft){if(lt==="texture"){var Lt=ft,Nt=void 0;Array.isArray(ft)?(Lt=ft[0],Nt=ft[1]):ft.hasOwnProperty("value")?(Lt=ft.value,Array.isArray(ft.value)?(Lt=ft.value[0],Nt=ft.value[1]):typeof ft.value=="string"&&(Lt=ft.value)):typeof ft=="string"&&(Lt=ft),st.addFrame(dt,Lt,Nt,u(ft,"delay",F),e(ft,"duration",G),e(ft,"hold",b),e(ft,"repeat",I),e(ft,"repeatDelay",N),a(ft,"flipX",U),a(ft,"flipY",W))}else{var Vt=d(lt,ft),pt=s(e(ft,"interpolation",X));st.add(dt,lt,Vt.getEnd,Vt.getStart,Vt.getActive,r(e(ft,"ease",L),e(ft,"easeParams",D)),u(ft,"delay",F),e(ft,"duration",G),a(ft,"yoyo",Z),e(ft,"hold",b),e(ft,"repeat",I),e(ft,"repeatDelay",N),a(ft,"flipX",U),a(ft,"flipY",W),pt,pt?ft:null)}},O=new m(S,P),z=0;z<A.length;z++)for(var B=A[z].key,Y=A[z].value,k=0;k<P.length;k++)B==="scale"&&!P[k].hasOwnProperty("scale")?(V(O,k,"scaleX",Y),V(O,k,"scaleY",Y)):V(O,k,B,Y);O.completeDelay=o(C,"completeDelay",0),O.loop=Math.round(o(C,"loop",0)),O.loopDelay=Math.round(o(C,"loopDelay",0)),O.paused=a(C,"paused",!1),O.persist=a(C,"persist",!1),O.callbackScope=e(C,"callbackScope",O);for(var J=h.TYPES,j=0;j<J.length;j++){var tt=J[j],ut=c(C,tt,!1);if(ut){var ht=c(C,tt+"Params",[]);O.setCallback(tt,ut,ht)}}return O};v.exports=y}),26012:((v,T,t)=>{var h=t(70402),g=t(23568),o=t(57355),a=t(62329),r=t(35154),e=t(8357),s=t(43960),u=function(n,l){if(l instanceof s)return l.parent=n,l;var c=new s(n);c.startDelay=r(l,"delay",0),c.completeDelay=g(l,"completeDelay",0),c.loop=Math.round(g(l,"loop",r(l,"repeat",0))),c.loopDelay=Math.round(g(l,"loopDelay",r(l,"repeatDelay",0))),c.paused=o(l,"paused",!1),c.persist=o(l,"persist",!1),c.callbackScope=r(l,"callbackScope",c);var d,f=h.TYPES;for(d=0;d<f.length;d++){var m=f[d],y=r(l,m,!1);if(y){var S=r(l,m+"Params",[]);c.setCallback(m,y,S)}}var C=r(l,"tweens",null);if(Array.isArray(C)){var E=[],P=a(l),A=void 0;for(P&&(A={targets:P}),d=0;d<C.length;d++)E.push(e(c,C[d],A));c.add(E)}return c};v.exports=u}),30231:((v,T,t)=>{v.exports={GetBoolean:t(57355),GetEaseFunction:t(6113),GetInterpolationFunction:t(91389),GetNewValue:t(55292),GetProps:t(82985),GetTargets:t(62329),GetValueOp:t(17777),NumberTweenBuilder:t(88032),StaggerBuilder:t(93109),TweenBuilder:t(8357)}}),73685:(v=>{v.exports="active"}),98540:(v=>{v.exports="complete"}),67233:(v=>{v.exports="loop"}),2859:(v=>{v.exports="pause"}),98336:(v=>{v.exports="repeat"}),25764:(v=>{v.exports="resume"}),32193:(v=>{v.exports="start"}),84371:(v=>{v.exports="stop"}),70766:(v=>{v.exports="update"}),55659:(v=>{v.exports="yoyo"}),842:((v,T,t)=>{v.exports={TWEEN_ACTIVE:t(73685),TWEEN_COMPLETE:t(98540),TWEEN_LOOP:t(67233),TWEEN_PAUSE:t(2859),TWEEN_RESUME:t(25764),TWEEN_REPEAT:t(98336),TWEEN_START:t(32193),TWEEN_STOP:t(84371),TWEEN_UPDATE:t(70766),TWEEN_YOYO:t(55659)}}),43066:((v,T,t)=>{var h={States:t(86353),Builders:t(30231),Events:t(842),TweenManager:t(40382),Tween:t(86081),TweenData:t(48177),TweenFrameData:t(42220),BaseTween:t(70402),TweenChain:t(43960)};v.exports=h}),70402:((v,T,t)=>{var h=t(83419),g=t(50792),o=t(842),a=t(86353),r=new h({Extends:g,initialize:function(s){g.call(this),this.parent=s,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(o.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(o.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(o.TWEEN_COMPLETE,"onComplete")},complete:function(e){return e===void 0&&(e=0),e?(this.setCompleteDelayState(),this.countdown=e):this.onCompleteHandler(),this},completeAfterLoop:function(e){return e===void 0&&(e=0),this.loopCounter>e&&(this.loopCounter=e),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(o.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(e){this.countdown-=e,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(e){return this.countdown-=e,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(o.TWEEN_START,"onStart"),e=0),e},updateCompleteDelay:function(e){this.countdown-=e,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(e,s,u){return u===void 0&&(u=[]),this.callbacks.hasOwnProperty(e)&&(this.callbacks[e]={func:s,params:u}),this},setPendingState:function(){this.state=a.PENDING},setActiveState:function(){this.state=a.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=a.LOOP_DELAY},setCompleteDelayState:function(){this.state=a.COMPLETE_DELAY},setStartDelayState:function(){this.state=a.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=a.PENDING_REMOVE},setRemovedState:function(){this.state=a.REMOVED},setFinishedState:function(){this.state=a.FINISHED},setDestroyedState:function(){this.state=a.DESTROYED},isPending:function(){return this.state===a.PENDING},isActive:function(){return this.state===a.ACTIVE},isLoopDelayed:function(){return this.state===a.LOOP_DELAY},isCompleteDelayed:function(){return this.state===a.COMPLETE_DELAY},isStartDelayed:function(){return this.state===a.START_DELAY},isPendingRemove:function(){return this.state===a.PENDING_REMOVE},isRemoved:function(){return this.state===a.REMOVED},isFinished:function(){return this.state===a.FINISHED},isDestroyed:function(){return this.state===a.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(e){e.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});r.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],v.exports=r}),95042:((v,T,t)=>{var h=t(83419),g=t(842),o=t(86353),a=new h({initialize:function(e,s,u,n,l,c,d,f,m,y){this.tween=e,this.targetIndex=s,this.duration=n<=0?.01:n,this.totalDuration=0,this.delay=0,this.getDelay=u,this.yoyo=l,this.hold=c,this.repeat=d,this.repeatDelay=f,this.repeatCounter=0,this.flipX=m,this.flipY=y,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(r){r===void 0&&(r=this.current),this.tween.targets[this.targetIndex][this.key]=r},setCreatedState:function(){this.state=o.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=o.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=o.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=o.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=o.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=o.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=o.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=o.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===o.CREATED},isDelayed:function(){return this.state===o.DELAY},isPendingRender:function(){return this.state===o.PENDING_RENDER},isPlayingForward:function(){return this.state===o.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===o.PLAYING_BACKWARD},isHolding:function(){return this.state===o.HOLD_DELAY},isRepeating:function(){return this.state===o.REPEAT_DELAY},isComplete:function(){return this.state===o.COMPLETE},setStateFromEnd:function(r){this.yoyo?this.onRepeat(r,!0,!0):this.repeatCounter>0?this.onRepeat(r,!0,!1):this.setCompleteState()},setStateFromStart:function(r){this.repeatCounter>0?this.onRepeat(r,!1):this.setCompleteState()},reset:function(){var r=this.tween,e=r.totalTargets,s=this.targetIndex,u=r.targets[s],n=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(u,n,0,s,e,r),this.repeatCounter=this.repeat===-1?o.MAX:this.repeat,this.setPendingRenderState();var l=this.duration+this.hold;this.yoyo&&(l+=this.duration);var c=l+this.repeatDelay;this.totalDuration=this.delay+l,this.repeat===-1?(this.totalDuration+=c*o.MAX,r.isInfinite=!0):this.repeat>0&&(this.totalDuration+=c*this.repeat),this.totalDuration>r.duration&&(r.duration=this.totalDuration),this.delay<r.startDelay&&(r.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(r,e,s){var u=this.tween,n=u.totalTargets,l=this.targetIndex,c=u.targets[l],d=this.key,f=d!=="texture";if(this.elapsed=r,this.progress=r/this.duration,this.flipX&&c.toggleFlipX(),this.flipY&&c.toggleFlipY(),f&&(e||s)&&(this.start=this.getStartValue(c,d,this.start,l,n,u)),s){this.setPlayingBackwardState(),this.dispatchEvent(g.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,f&&(this.end=this.getEndValue(c,d,this.start,l,n,u)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-r,f&&(this.current=this.start,c[d]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(g.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});v.exports=a}),69902:(v=>{var T={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};v.exports=T}),81076:(v=>{v.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]}),86081:((v,T,t)=>{var h=t(70402),g=t(83419),o=t(842),a=t(44603),r=t(39429),e=t(36383),s=t(86353),u=t(48177),n=t(42220),l=new g({Extends:h,initialize:function(d,f){h.call(this,d),this.targets=f,this.totalTargets=f.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(c,d,f,m,y,S,C,E,P,A,F,G,D,L,b,I){var N=new u(this,c,d,f,m,y,S,C,E,P,A,F,G,D,L,b,I);return this.totalData=this.data.push(N),N},addFrame:function(c,d,f,m,y,S,C,E,P,A){var F=new n(this,c,d,f,m,y,S,C,E,P,A);return this.totalData=this.data.push(F),F},getValue:function(c){c===void 0&&(c=0);var d=null;return this.data&&(d=this.data[c].current),d},hasTarget:function(c){return this.targets&&this.targets.indexOf(c)!==-1},updateTo:function(c,d,f){if(f===void 0&&(f=!1),c!=="texture")for(var m=0;m<this.totalData;m++){var y=this.data[m];y.key===c&&(y.isPlayingForward()||y.isPlayingBackward())&&(y.end=d,f&&(y.start=y.current))}return this},restart:function(){switch(this.state){case s.REMOVED:case s.FINISHED:this.seek(),this.parent.makeActive(this);break;case s.PENDING:case s.PENDING_REMOVE:this.parent.reset(this);break;case s.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,h.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(c,d,f){if(c===void 0&&(c=0),d===void 0&&(d=16.6),f===void 0&&(f=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;f||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive");var m=this.paused;if(this.paused=!1,c>0){for(var y=Math.floor(c/d),S=c-y*d,C=0;C<y;C++)this.update(d);S>0&&this.update(S)}return this.paused=m,this.isSeeking=!1,this},initTweenData:function(c){c===void 0&&(c=!1),this.duration=0,this.startDelay=e.MAX_SAFE_INTEGER;for(var d=this.data,f=0;f<this.totalData;f++)d[f].reset(c);this.duration=Math.max(this.duration,.01);var m=this.duration,y=this.completeDelay,S=this.loopCounter,C=this.loopDelay;S>0?this.totalDuration=m+y+(m+C)*S:this.totalDuration=m+y},reset:function(c){return c===void 0&&(c=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=s.MAX),c||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive")),this},update:function(c){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(c*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(c),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(c),!1;this.hasStarted||(this.startDelay-=c,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(o.TWEEN_START,"onStart"),c=0));var d=!1;if(this.isActive())for(var f=this.data,m=0;m<this.totalData;m++)f[m].update(c)&&(d=!0);this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),d||this.nextState();var y=this.isPendingRemove();return y&&this.persist&&(this.setFinishedState(),y=!1),y},forward:function(c){return this.update(c),this},rewind:function(c){return this.update(-c),this},dispatchEvent:function(c,d){if(!this.isSeeking){if(this.emit(c,this,this.targets),!this.callbacks)return;var f=this.callbacks[d];f&&f.func.apply(this.callbackScope,[this,this.targets].concat(f.params))}},destroy:function(){h.prototype.destroy.call(this),this.targets=null}});r.register("tween",function(c){return this.scene.sys.tweens.add(c)}),a.register("tween",function(c){return this.scene.sys.tweens.create(c)}),v.exports=l}),43960:((v,T,t)=>{var h=t(72905),g=t(70402),o=t(83419),a=t(842),r=t(44603),e=t(39429),s=t(86353),u=new o({Extends:g,initialize:function(l){g.call(this,l),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?s.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(n){var l=this.parent.create(n);Array.isArray(l)||(l=[l]);for(var c=this.data,d=0;d<l.length;d++){var f=l[d];f.parent=this,c.push(f.reset())}return this.totalData=c.length,this},remove:function(n){return h(this.data,n),n.setRemovedState(),n===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(n){for(var l=this.data,c=0;c<this.totalData;c++)if(l[c].hasTarget(n))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(n){return n.seek(),n.setActiveState(),this},makeActive:function(n){return n.reset(),n.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var n=this.data,l=this.totalData,c=0;c<l;c++)n[c].reset(!1);this.setCurrentTween(0)},update:function(n){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(n*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(n),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(n),!1;this.hasStarted||(this.startDelay-=n,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(a.TWEEN_START,"onStart"),n=0));var l=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(n)&&this.nextTween()&&this.nextState(),l=this.isPendingRemove(),l&&this.persist&&(this.setFinishedState(),l=!1)),l},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(n){this.currentIndex=n,this.currentTween=this.data[n],this.currentTween.setActiveState()},dispatchEvent:function(n,l){this.emit(n,this);var c=this.callbacks[l];c&&c.func.apply(this.callbackScope,[this].concat(c.params))},destroy:function(){g.prototype.destroy.call(this),this.currentTween=null}});e.register("tweenchain",function(n){return this.scene.sys.tweens.chain(n)}),r.register("tweenchain",function(n){return this.scene.sys.tweens.create(n)}),v.exports=u}),48177:((v,T,t)=>{var h=t(95042),g=t(45319),o=t(83419),a=t(842),r=new o({Extends:h,initialize:function(s,u,n,l,c,d,f,m,y,S,C,E,P,A,F,G,D){h.call(this,s,u,m,y,S,C,E,P,A,F),this.key=n,this.getActiveValue=d,this.getEndValue=l,this.getStartValue=c,this.ease=f,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=G,this.interpolationData=D},reset:function(e){h.prototype.reset.call(this);var s=this.tween.targets[this.targetIndex],u=this.key;e&&(s[u]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(s[u]=this.getActiveValue(s,u,0))},update:function(e){var s=this.tween,u=s.totalTargets,n=this.targetIndex,l=s.targets[n],c=this.key;if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(l,c,l[c],n,u,s),this.end=this.getEndValue(l,c,this.start,n,u,s),this.current=this.start,l[c]=this.start,this.setPlayingForwardState(),!0;var d=this.isPlayingForward(),f=this.isPlayingBackward();if(d||f){var m=this.elapsed,y=this.duration,S=0,C=!1;m+=e,m>=y?(S=m-y,m=y,C=!0):m<0&&(m=0);var E=g(m/y,0,1);this.elapsed=m,this.progress=E,this.previous=this.current,d||(E=1-E);var P=this.ease(E);this.interpolation?this.current=this.interpolation(this.interpolationData,P):this.current=this.start+(this.end-this.start)*P,l[c]=this.current,C&&(d?(s.isNumberTween&&(this.current=this.end,l[c]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(S)):(s.isNumberTween&&(this.current=this.start,l[c]=this.current),this.setStateFromStart(S))),this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,s){var u=this.tween;if(!u.isSeeking){var n=u.targets[this.targetIndex],l=this.key,c=this.current,d=this.previous;u.emit(e,u,l,n,c,d);var f=u.callbacks[s];f&&f.func.apply(u.callbackScope,[u,n,l,c,d].concat(f.params))}},destroy:function(){h.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});v.exports=r}),42220:((v,T,t)=>{var h=t(95042),g=t(45319),o=t(83419),a=t(842),r=new o({Extends:h,initialize:function(s,u,n,l,c,d,f,m,y,S,C){h.call(this,s,u,c,d,!1,f,m,y,S,C),this.key="texture",this.startTexture=null,this.endTexture=n,this.startFrame=null,this.endFrame=l,this.yoyo=m!==0},reset:function(e){h.prototype.reset.call(this);var s=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=s.texture.key,this.startFrame=s.frame.name),e&&s.setTexture(this.startTexture,this.startFrame)},update:function(e){var s=this.tween,u=this.targetIndex,n=s.targets[u];if(!n)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&n.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var l=this.isPlayingForward(),c=this.isPlayingBackward();if(l||c){var d=this.elapsed,f=this.duration,m=0,y=!1;d+=e,d>=f?(m=d-f,d=f,y=!0):d<0&&(d=0);var S=g(d/f,0,1);this.elapsed=d,this.progress=S,y&&(l?(n.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(m)):(n.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(m))),this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,s){var u=this.tween;if(!u.isSeeking){var n=u.targets[this.targetIndex],l=this.key;u.emit(e,u,l,n);var c=u.callbacks[s];c&&c.func.apply(u.callbackScope,[u,n,l].concat(c.params))}},destroy:function(){h.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});v.exports=r}),86353:(v=>{var T={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};v.exports=T}),83419:(v=>{function T(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}function t(r,e,s){var u=s?r[e]:Object.getOwnPropertyDescriptor(r,e);return!s&&u.value&&typeof u.value=="object"&&(u=u.value),u&&T(u)?(typeof u.enumerable>"u"&&(u.enumerable=!0),typeof u.configurable>"u"&&(u.configurable=!0),u):!1}function h(r,e){var s=Object.getOwnPropertyDescriptor(r,e);return s?(s.value&&typeof s.value=="object"&&(s=s.value),s.configurable===!1):!1}function g(r,e,s,u){for(var n in e)if(e.hasOwnProperty(n)){var l=t(e,n,s);if(l!==!1){var c=u||r;if(h(c.prototype,n)){if(a.ignoreFinals)continue;throw new Error("cannot override final property '"+n+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,n,l)}else r.prototype[n]=e[n]}}function o(r,e){if(e){Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++)g(r,e[s].prototype||e[s])}}function a(r){r||(r={});var e,s;if(r.initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");e=r.initialize,delete r.initialize}else if(r.Extends){var u=r.Extends;e=function(){u.apply(this,arguments)}}else e=function(){};r.Extends?(e.prototype=Object.create(r.Extends.prototype),e.prototype.constructor=e,s=r.Extends,delete r.Extends):e.prototype.constructor=e;var n=null;return r.Mixins&&(n=r.Mixins,delete r.Mixins),o(e,n),g(e,r,!0,s),e}a.extend=g,a.mixin=o,a.ignoreFinals=!1,v.exports=a}),29747:(v=>{var T=function(){};v.exports=T}),20242:(v=>{var T=function(){return null};v.exports=T}),71146:(v=>{var T=function(t,h,g,o,a){if(a===void 0&&(a=t),g>0){var r=g-t.length;if(r<=0)return null}if(!Array.isArray(h))return t.indexOf(h)===-1?(t.push(h),o&&o.call(a,h),h):null;for(var e=h.length-1;e>=0;)t.indexOf(h[e])!==-1&&h.splice(e,1),e--;if(e=h.length,e===0)return null;g>0&&e>r&&(h.splice(r),e=r);for(var s=0;s<e;s++){var u=h[s];t.push(u),o&&o.call(a,u)}return h};v.exports=T}),51067:(v=>{var T=function(t,h,g,o,a,r){if(g===void 0&&(g=0),r===void 0&&(r=t),o>0){var e=o-t.length;if(e<=0)return null}if(!Array.isArray(h))return t.indexOf(h)===-1?(t.splice(g,0,h),a&&a.call(r,h),h):null;for(var s=h.length-1;s>=0;)t.indexOf(h[s])!==-1&&h.pop(),s--;if(s=h.length,s===0)return null;o>0&&s>e&&(h.splice(e),s=e);for(var u=s-1;u>=0;u--){var n=h[u];t.splice(g,0,n),a&&a.call(r,n)}return h};v.exports=T}),66905:(v=>{var T=function(t,h){var g=t.indexOf(h);return g!==-1&&g<t.length&&(t.splice(g,1),t.push(h)),h};v.exports=T}),21612:((v,T,t)=>{var h=t(82011),g=function(o,a,r,e,s){e===void 0&&(e=0),s===void 0&&(s=o.length);var u=0;if(h(o,e,s))for(var n=e;n<s;n++){var l=o[n];l[a]===r&&u++}return u};v.exports=g}),95428:(v=>{var T=function(t,h,g){var o,a=[null];for(o=3;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<t.length;o++)a[0]=t[o],h.apply(g,a);return t};v.exports=T}),36914:((v,T,t)=>{var h=t(82011),g=function(o,a,r,e,s){if(e===void 0&&(e=0),s===void 0&&(s=o.length),h(o,e,s)){var u,n=[null];for(u=5;u<arguments.length;u++)n.push(arguments[u]);for(u=e;u<s;u++)n[0]=o[u],a.apply(r,n)}return o};v.exports=g}),81957:(v=>{var T=function(t,h,g){if(h.length){if(h.length===1)return h[0]}else return NaN;var o=1,a,r;if(g){if(t<h[0][g])return h[0];for(;h[o][g]<t;)o++}else for(;h[o]<t;)o++;return o>h.length&&(o=h.length),g?(a=h[o-1][g],r=h[o][g],r-t<=t-a?h[o]:h[o-1]):(a=h[o-1],r=h[o],r-t<=t-a?r:a)};v.exports=T}),43491:(v=>{var T=function(t,h){h===void 0&&(h=[]);for(var g=0;g<t.length;g++)Array.isArray(t[g])?T(t[g],h):h.push(t[g]);return h};v.exports=T}),46710:((v,T,t)=>{var h=t(82011),g=function(o,a,r,e,s){e===void 0&&(e=0),s===void 0&&(s=o.length);var u=[];if(h(o,e,s))for(var n=e;n<s;n++){var l=o[n];(!a||a&&r===void 0&&l.hasOwnProperty(a)||a&&r!==void 0&&l[a]===r)&&u.push(l)}return u};v.exports=g}),58731:((v,T,t)=>{var h=t(82011),g=function(o,a,r,e,s){if(e===void 0&&(e=0),s===void 0&&(s=o.length),e!==-1){if(h(o,e,s))for(var u=e;u<s;u++){var n=o[u];if(!a||a&&r===void 0&&n.hasOwnProperty(a)||a&&r!==void 0&&n[a]===r)return n}}else if(h(o,0,s))for(var u=s;u>=0;u--){var n=o[u];if(!a||a&&r===void 0&&n.hasOwnProperty(a)||a&&r!==void 0&&n[a]===r)return n}return null};v.exports=g}),26546:(v=>{var T=function(t,h,g){h===void 0&&(h=0),g===void 0&&(g=t.length);var o=h+Math.floor(Math.random()*g);return t[o]===void 0?null:t[o]};v.exports=T}),85835:(v=>{var T=function(t,h,g){if(h===g)return t;var o=t.indexOf(h),a=t.indexOf(g);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o>a||(t.splice(o,1),a=t.indexOf(g),t.splice(a+1,0,h)),t};v.exports=T}),83371:(v=>{var T=function(t,h,g){if(h===g)return t;var o=t.indexOf(h),a=t.indexOf(g);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o<a||(t.splice(o,1),a===0?t.unshift(h):t.splice(a,0,h)),t};v.exports=T}),70864:(v=>{var T=function(t,h){var g=t.indexOf(h);if(g>0){var o=t[g-1],a=t.indexOf(o);t[g]=o,t[a]=h}return t};v.exports=T}),69693:(v=>{var T=function(t,h,g){var o=t.indexOf(h);if(o===-1||g<0||g>=t.length)throw new Error("Supplied index out of bounds");return o!==g&&(t.splice(o,1),t.splice(g,0,h)),h};v.exports=T}),40853:(v=>{var T=function(t,h){var g=t.indexOf(h);if(g!==-1&&g<t.length-1){var o=t[g+1],a=t.indexOf(o);t[g]=o,t[a]=h}return t};v.exports=T}),20283:(v=>{var T=function(t,h,g,o){var a=[],r,e=!1;if((g||o)&&(e=!0,g||(g=""),o||(o="")),h<t)for(r=t;r>=h;r--)e?a.push(g+r.toString()+o):a.push(r);else for(r=t;r<=h;r++)e?a.push(g+r.toString()+o):a.push(r);return a};v.exports=T}),593:((v,T,t)=>{var h=t(2284),g=function(o,a,r){o===void 0&&(o=0),a===void 0&&(a=null),r===void 0&&(r=1),a===null&&(a=o,o=0);for(var e=[],s=Math.max(h((a-o)/(r||1)),0),u=0;u<s;u++)e.push(o),o+=r;return e};v.exports=g}),43886:(v=>{function T(g,o,a){var r=g[o];g[o]=g[a],g[a]=r}function t(g,o){return g<o?-1:g>o?1:0}var h=function(g,o,a,r,e){for(a===void 0&&(a=0),r===void 0&&(r=g.length-1),e===void 0&&(e=t);r>a;){if(r-a>600){var s=r-a+1,u=o-a+1,n=Math.log(s),l=.5*Math.exp(2*n/3),c=.5*Math.sqrt(n*l*(s-l)/s)*(u-s/2<0?-1:1),d=Math.max(a,Math.floor(o-u*l/s+c)),f=Math.min(r,Math.floor(o+(s-u)*l/s+c));h(g,o,d,f,e)}var m=g[o],y=a,S=r;for(T(g,a,o),e(g[r],m)>0&&T(g,a,r);y<S;){for(T(g,y,S),y++,S--;e(g[y],m)<0;)y++;for(;e(g[S],m)>0;)S--}e(g[a],m)===0?T(g,a,S):(S++,T(g,S,r)),S<=o&&(a=S+1),o<=S&&(r=S-1)}};v.exports=h}),88492:((v,T,t)=>{var h=t(35154),g=t(33680),o=function(r,e,s){for(var u=[],n=0;n<r.length;n++)for(var l=0;l<e.length;l++)for(var c=0;c<s;c++)u.push({a:r[n],b:e[l]});return u},a=function(r,e,s){var u=h(s,"max",0),n=h(s,"qty",1),l=h(s,"random",!1),c=h(s,"randomB",!1),d=h(s,"repeat",0),f=h(s,"yoyo",!1),m=[];if(c&&g(e),d===-1)if(u===0)d=0;else{var y=r.length*e.length*n;f&&(y*=2),d=Math.ceil(u/y)}for(var S=0;S<=d;S++){var C=o(r,e,n);l&&g(C),m=m.concat(C),f&&(C.reverse(),m=m.concat(C))}return u&&m.splice(u),m};v.exports=a}),72905:((v,T,t)=>{var h=t(19133),g=function(o,a,r,e){e===void 0&&(e=o);var s;if(!Array.isArray(a))return s=o.indexOf(a),s!==-1?(h(o,s),r&&r.call(e,a),a):null;for(var u=a.length-1,n=[];u>=0;){var l=a[u];s=o.indexOf(l),s!==-1&&(h(o,s),n.push(l),r&&r.call(e,l)),u--}return n};v.exports=g}),60248:((v,T,t)=>{var h=t(19133),g=function(o,a,r,e){if(e===void 0&&(e=o),a<0||a>o.length-1)throw new Error("Index out of bounds");var s=h(o,a);return r&&r.call(e,s),s};v.exports=g}),81409:((v,T,t)=>{var h=t(82011),g=function(o,a,r,e,s){if(a===void 0&&(a=0),r===void 0&&(r=o.length),s===void 0&&(s=o),h(o,a,r)){var u=r-a,n=o.splice(a,u);if(e)for(var l=0;l<n.length;l++){var c=n[l];e.call(s,c)}return n}else return[]};v.exports=g}),31856:((v,T,t)=>{var h=t(19133),g=function(o,a,r){a===void 0&&(a=0),r===void 0&&(r=o.length);var e=a+Math.floor(Math.random()*r);return h(o,e)};v.exports=g}),42169:(v=>{var T=function(t,h,g){var o=t.indexOf(h),a=t.indexOf(g);return o!==-1&&a===-1?(t[o]=g,!0):!1};v.exports=T}),86003:(v=>{var T=function(t,h){h===void 0&&(h=1);for(var g=null,o=0;o<h;o++)g=t.shift(),t.push(g);return g};v.exports=T}),49498:(v=>{var T=function(t,h){h===void 0&&(h=1);for(var g=null,o=0;o<h;o++)g=t.pop(),t.unshift(g);return g};v.exports=T}),82011:(v=>{var T=function(t,h,g,o){var a=t.length;if(h<0||h>=a||h>=g||g>a){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};v.exports=T}),89545:(v=>{var T=function(t,h){var g=t.indexOf(h);return g!==-1&&g>0&&(t.splice(g,1),t.unshift(h)),h};v.exports=T}),17810:((v,T,t)=>{var h=t(82011),g=function(o,a,r,e,s){if(e===void 0&&(e=0),s===void 0&&(s=o.length),h(o,e,s))for(var u=e;u<s;u++){var n=o[u];n.hasOwnProperty(a)&&(n[a]=r)}return o};v.exports=g}),33680:(v=>{var T=function(t){for(var h=t.length-1;h>0;h--){var g=Math.floor(Math.random()*(h+1)),o=t[h];t[h]=t[g],t[g]=o}return t};v.exports=T}),90126:(v=>{var T=function(t){var h=/\D/g;return t.sort(function(g,o){return parseInt(g.replace(h,""),10)-parseInt(o.replace(h,""),10)}),t};v.exports=T}),19133:(v=>{var T=function(t,h){if(!(h>=t.length)){for(var g=t.length-1,o=t[h],a=h;a<g;a++)t[a]=t[a+1];return t.length=g,o}};v.exports=T}),19186:((v,T,t)=>{var h=t(82264);function g(e,s){return String(e).localeCompare(s)}function o(e,s){var u=e.length;if(u<=1)return e;for(var n=new Array(u),l=1;l<u;l*=2){a(e,s,l,n);var c=e;e=n,n=c}return e}function a(e,s,u,n){var l=e.length,c=0,d=u*2,f,m,y,S,C;for(f=0;f<l;f+=d)for(m=f+u,y=m+u,m>l&&(m=l),y>l&&(y=l),S=f,C=m;;)if(S<m&&C<y)s(e[S],e[C])<=0?n[c++]=e[S++]:n[c++]=e[C++];else if(S<m)n[c++]=e[S++];else if(C<y)n[c++]=e[C++];else break}var r=function(e,s){if(s===void 0&&(s=g),!e||e.length<2)return e;if(h.features.stableSort)return e.sort(s);var u=o(e,s);return u!==e&&a(u,null,e.length,e),e};v.exports=r}),25630:(v=>{var T=function(t,h,g){if(h===g)return t;var o=t.indexOf(h),a=t.indexOf(g);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return t[o]=g,t[a]=h,t};v.exports=T}),37105:((v,T,t)=>{v.exports={Matrix:t(54915),Add:t(71146),AddAt:t(51067),BringToTop:t(66905),CountAllMatching:t(21612),Each:t(95428),EachInRange:t(36914),FindClosestInSorted:t(81957),Flatten:t(43491),GetAll:t(46710),GetFirst:t(58731),GetRandom:t(26546),MoveDown:t(70864),MoveTo:t(69693),MoveUp:t(40853),MoveAbove:t(85835),MoveBelow:t(83371),NumberArray:t(20283),NumberArrayStep:t(593),QuickSelect:t(43886),Range:t(88492),Remove:t(72905),RemoveAt:t(60248),RemoveBetween:t(81409),RemoveRandomElement:t(31856),Replace:t(42169),RotateLeft:t(86003),RotateRight:t(49498),SafeRange:t(82011),SendToBack:t(89545),SetAll:t(17810),Shuffle:t(33680),SortByDigits:t(90126),SpliceOne:t(19133),StableSort:t(19186),Swap:t(25630)}}),86922:(v=>{var T=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var h=t[0].length,g=1;g<t.length;g++)if(t[g].length!==h)return!1;return!0};v.exports=T}),63362:((v,T,t)=>{var h=t(41836),g=t(86922),o=function(a){var r="";if(!g(a))return r;for(var e=0;e<a.length;e++){for(var s=0;s<a[e].length;s++){var u=a[e][s].toString();u!=="undefined"?r+=h(u,2):r+="?",s<a[e].length-1&&(r+=" |")}if(e<a.length-1){r+=`
`;for(var n=0;n<a[e].length;n++)r+="---",n<a[e].length-1&&(r+="+");r+=`
`}}return r};v.exports=o}),92598:(v=>{var T=function(t){return t.reverse()};v.exports=T}),21224:(v=>{var T=function(t){for(var h=0;h<t.length;h++)t[h].reverse();return t};v.exports=T}),98717:((v,T,t)=>{var h=t(37829),g=function(o){return h(o,180)};v.exports=g}),44657:((v,T,t)=>{var h=t(37829),g=function(o,a){a===void 0&&(a=1);for(var r=0;r<a;r++)o=h(o,90);return o};v.exports=g}),37829:((v,T,t)=>{var h=t(86922),g=t(2429),o=function(a,r){if(r===void 0&&(r=90),!h(a))return null;if(typeof r!="string"&&(r=(r%360+360)%360),r===90||r===-270||r==="rotateLeft")a=g(a),a.reverse();else if(r===-90||r===270||r==="rotateRight")a.reverse(),a=g(a);else if(Math.abs(r)===180||r==="rotate180"){for(var e=0;e<a.length;e++)a[e].reverse();a.reverse()}return a};v.exports=o}),92632:((v,T,t)=>{var h=t(37829),g=function(o,a){a===void 0&&(a=1);for(var r=0;r<a;r++)o=h(o,-90);return o};v.exports=g}),69512:((v,T,t)=>{var h=t(86003),g=t(49498),o=function(a,r,e){if(r===void 0&&(r=0),e===void 0&&(e=0),e!==0&&(e<0?h(a,Math.abs(e)):g(a,e)),r!==0)for(var s=0;s<a.length;s++){var u=a[s];r<0?h(u,Math.abs(r)):g(u,r)}return a};v.exports=o}),2429:(v=>{var T=function(t){for(var h=t.length,g=t[0].length,o=new Array(g),a=0;a<g;a++){o[a]=new Array(h);for(var r=h-1;r>-1;r--)o[a][r]=t[r][a]}return o};v.exports=T}),54915:((v,T,t)=>{v.exports={CheckMatrix:t(86922),MatrixToString:t(63362),ReverseColumns:t(92598),ReverseRows:t(21224),Rotate180:t(98717),RotateLeft:t(44657),RotateMatrix:t(37829),RotateRight:t(92632),Translate:t(69512),TransposeMatrix:t(2429)}}),71334:(v=>{var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(h,g){for(var o=new Uint8Array(h),a=o.length,r=g?"data:"+g+";base64,":"",e=0;e<a;e+=3)r+=T[o[e]>>2],r+=T[(o[e]&3)<<4|o[e+1]>>4],r+=T[(o[e+1]&15)<<2|o[e+2]>>6],r+=T[o[e+2]&63];return a%3===2?r=r.substring(0,r.length-1)+"=":a%3===1&&(r=r.substring(0,r.length-2)+"=="),r};v.exports=t}),53134:(v=>{for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),h=0;h<T.length;h++)t[T.charCodeAt(h)]=h;var g=function(o){o=o.substr(o.indexOf(",")+1);var a=o.length,r=a*.75,e=0,s,u,n,l;o[a-1]==="="&&(r--,o[a-2]==="="&&r--);for(var c=new ArrayBuffer(r),d=new Uint8Array(c),f=0;f<a;f+=4)s=t[o.charCodeAt(f)],u=t[o.charCodeAt(f+1)],n=t[o.charCodeAt(f+2)],l=t[o.charCodeAt(f+3)],d[e++]=s<<2|u>>4,d[e++]=(u&15)<<4|n>>2,d[e++]=(n&3)<<6|l&63;return c};v.exports=g}),65839:((v,T,t)=>{v.exports={ArrayBufferToBase64:t(71334),Base64ToArrayBuffer:t(53134)}}),91799:((v,T,t)=>{v.exports={Array:t(37105),Base64:t(65839),Objects:t(1183),String:t(31749),NOOP:t(29747),NULL:t(20242)}}),41786:(v=>{var T=function(t){var h={};for(var g in t)Array.isArray(t[g])?h[g]=t[g].slice(0):h[g]=t[g];return h};v.exports=T}),62644:(v=>{var T=function(t){var h,g,o;if(typeof t!="object"||t===null)return t;h=Array.isArray(t)?[]:{};for(o in t)g=t[o],h[o]=T(g);return h};v.exports=T}),79291:((v,T,t)=>{var h=t(41212),g=function(){var o,a,r,e,s,u,n=arguments[0]||{},l=1,c=arguments.length,d=!1;for(typeof n=="boolean"&&(d=n,n=arguments[1]||{},l=2),c===l&&(n=this,--l);l<c;l++)if((o=arguments[l])!=null)for(a in o)r=n[a],e=o[a],n!==e&&(d&&e&&(h(e)||(s=Array.isArray(e)))?(s?(s=!1,u=r&&Array.isArray(r)?r:[]):u=r&&h(r)?r:{},n[a]=g(d,u,e)):e!==void 0&&(n[a]=e));return n};v.exports=g}),23568:((v,T,t)=>{var h=t(75508),g=t(35154),o=function(a,r,e){var s=g(a,r,null);if(s===null)return e;if(Array.isArray(s))return h.RND.pick(s);if(typeof s=="object"){if(s.hasOwnProperty("randInt"))return h.RND.integerInRange(s.randInt[0],s.randInt[1]);if(s.hasOwnProperty("randFloat"))return h.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if(typeof s=="function")return s(r);return s};v.exports=o}),95540:(v=>{var T=function(t,h,g){var o=typeof t;return!t||o==="number"||o==="string"?g:t.hasOwnProperty(h)&&t[h]!==void 0?t[h]:g};v.exports=T}),82840:((v,T,t)=>{var h=t(35154),g=t(45319),o=function(a,r,e,s,u){u===void 0&&(u=e);var n=h(a,r,u);return g(n,e,s)};v.exports=o}),35154:(v=>{var T=function(t,h,g,o){if(!t&&!o||typeof t=="number")return g;if(t&&t.hasOwnProperty(h))return t[h];if(o&&o.hasOwnProperty(h))return o[h];if(h.indexOf(".")!==-1){for(var a=h.split("."),r=t,e=o,s=g,u=g,n=!0,l=!0,c=0;c<a.length;c++)r&&r.hasOwnProperty(a[c])?(s=r[a[c]],r=r[a[c]]):n=!1,e&&e.hasOwnProperty(a[c])?(u=e[a[c]],e=e[a[c]]):l=!1;return n?s:l?u:g}else return g};v.exports=T}),69036:(v=>{var T=function(t,h){for(var g=0;g<h.length;g++)if(!t.hasOwnProperty(h[g]))return!1;return!0};v.exports=T}),1985:(v=>{var T=function(t,h){for(var g=0;g<h.length;g++)if(t.hasOwnProperty(h[g]))return!0;return!1};v.exports=T}),97022:(v=>{var T=function(t,h){return t.hasOwnProperty(h)};v.exports=T}),41212:(v=>{var T=function(t){if(!t||typeof t!="object"||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};v.exports=T}),46975:((v,T,t)=>{var h=t(41786),g=function(o,a){var r=h(o);for(var e in a)r.hasOwnProperty(e)||(r[e]=a[e]);return r};v.exports=g}),269:((v,T,t)=>{var h=t(41786),g=function(o,a){var r=h(o);for(var e in a)r.hasOwnProperty(e)&&(r[e]=a[e]);return r};v.exports=g}),18254:((v,T,t)=>{var h=t(97022),g=function(o,a){for(var r={},e=0;e<a.length;e++){var s=a[e];h(o,s)&&(r[s]=o[s])}return r};v.exports=g}),61622:(v=>{var T=function(t,h,g){if(!t||typeof t=="number")return!1;if(t.hasOwnProperty(h))return t[h]=g,!0;if(h.indexOf(".")!==-1){for(var o=h.split("."),a=t,r=t,e=0;e<o.length;e++)if(a.hasOwnProperty(o[e]))r=a,a=a[o[e]];else return!1;return r[o[o.length-1]]=g,!0}return!1};v.exports=T}),1183:((v,T,t)=>{v.exports={Clone:t(41786),DeepCopy:t(62644),Extend:t(79291),GetAdvancedValue:t(23568),GetFastValue:t(95540),GetMinMaxValue:t(82840),GetValue:t(35154),HasAll:t(69036),HasAny:t(1985),HasValue:t(97022),IsPlainObject:t(41212),Merge:t(46975),MergeRight:t(269),Pick:t(18254),SetValue:t(61622)}}),27902:(v=>{var T=function(t,h){return t.replace(/%([0-9]+)/g,function(g,o){return h[Number(o)-1]})};v.exports=T}),41836:(v=>{var T=function(t,h,g,o){h===void 0&&(h=0),g===void 0&&(g=" "),o===void 0&&(o=3),t=t.toString();var a=0;if(h+1>=t.length)switch(o){case 1:t=new Array(h+1-t.length).join(g)+t;break;case 3:var r=Math.ceil((a=h-t.length)/2),e=a-r;t=new Array(e+1).join(g)+t+new Array(r+1).join(g);break;default:t=t+new Array(h+1-t.length).join(g);break}return t};v.exports=T}),33628:(v=>{var T=function(t,h){return h===0?t.slice(1):t.slice(0,h)+t.slice(h+1)};v.exports=T}),27671:(v=>{var T=function(t){return t.split("").reverse().join("")};v.exports=T}),45650:(v=>{var T=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var h=Math.random()*16|0,g=t==="x"?h:h&3|8;return g.toString(16)})};v.exports=T}),35355:(v=>{var T=function(t){return t&&t[0].toUpperCase()+t.slice(1)};v.exports=T}),31749:((v,T,t)=>{v.exports={Format:t(27902),Pad:t(41836),RemoveAt:t(33628),Reverse:t(27671),UppercaseFirst:t(35355),UUID:t(45650)}})},M={};function R(v){var T=M[v];if(T!==void 0)return T.exports;var t=M[v]={exports:{}};return x[v](t,t.exports,R),t.exports}R.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var w=R(85454);return w})())})(Sr)),Sr.exports}var QM=jM();const cs=kM(QM),Kt={WIDTH:800,HEIGHT:600,TILE_SIZE:40,DELTA_CAP:33.33},Us={GRASS:0,PATH:1,BARN:2,WATER:3,ENTRY:4},St={UI_TEXT:"#ffffff",UI_PANEL_BORDER:6044190,UI_BUTTON:4881454,UI_BUTTON_HOVER:6200890,UI_BUTTON_DISABLED:5592405,UI_GOLD_TEXT:"#ffdd44",UI_RED_TEXT:"#ff4444",UI_GREEN_TEXT:"#44ff44",MENU_BG:1718798,GAMEOVER_BG:3804686,LEVELCOMPLETE_BG:932378,GRASS_LIGHT:6137906,GRASS_DARK:4885544,PATH_COLOR:12886874,BARN_COLOR:13382451,BARN_ROOF:9118242,WATER_COLOR:4491468,ENTRY_COLOR:14531430,HEALTH_BG:3355443,HEALTH_HIGH:4508740,HEALTH_MED:13421636,HEALTH_LOW:13386820,RANGE_FILL:4500223,RANGE_ALPHA:.15,RANGE_STROKE:4500223,RANGE_STROKE_ALPHA:.4,VALID_PLACEMENT:4521796,INVALID_PLACEMENT:16729156,PLACEMENT_ALPHA:.4,BUTTON:4500036,BUTTON_HOVER:6736998},It={CHICKEN:{key:"chicken",name:"Chicken",hp:30,speed:100,reward:5,size:10,color:16768256},PIG:{key:"pig",name:"Pig",hp:80,speed:60,reward:15,size:14,color:16755404},COW:{key:"cow",name:"Cow",hp:200,speed:35,reward:30,size:18,color:16777215},GOAT:{key:"goat",name:"Goat",hp:90,speed:65,reward:20,size:13,color:11184810,canJump:!0,jumpChance:.15,jumpDistance:2},BULL:{key:"bull",name:"Bull",hp:600,speed:25,reward:100,size:22,color:8921634}},Fr={SCARECROW:{key:"scarecrow",name:"Scarecrow",cost:50,damage:8,range:100,fireRate:800,projectileSpeed:250,color:9136404,projectileColor:13412932,projectileSize:4,upgradeCostMultiplier:1.5,upgradeDamageMultiplier:1.4,upgradeRangeMultiplier:1.15,maxLevel:3,description:"Throws hay bales"},PITCHFORK:{key:"pitchfork",name:"Pitchfork",cost:100,damage:25,range:150,fireRate:1400,projectileSpeed:350,color:8947848,projectileColor:11184810,projectileSize:5,upgradeCostMultiplier:1.5,upgradeDamageMultiplier:1.4,upgradeRangeMultiplier:1.1,maxLevel:3,description:"Long range fork"},CORN_CANNON:{key:"corn_cannon",name:"Corn Cannon",cost:150,damage:40,range:90,fireRate:1800,projectileSpeed:200,color:14535680,projectileColor:16772676,projectileSize:6,splash:!0,splashRadius:50,upgradeCostMultiplier:1.6,upgradeDamageMultiplier:1.5,upgradeRangeMultiplier:1.1,maxLevel:3,description:"Area splash damage"},SPRINKLER:{key:"sprinkler",name:"Sprinkler",cost:75,damage:4,range:110,fireRate:600,projectileSpeed:200,color:4491519,projectileColor:6728447,projectileSize:3,slowEffect:!0,slowAmount:.5,slowDuration:2e3,upgradeCostMultiplier:1.4,upgradeDamageMultiplier:1.3,upgradeRangeMultiplier:1.15,maxLevel:3,description:"Slows enemies"},TRACTOR:{key:"tractor",name:"Tractor",cost:300,damage:35,range:130,fireRate:500,projectileSpeed:400,color:4500036,projectileColor:8965256,projectileSize:5,upgradeCostMultiplier:1.8,upgradeDamageMultiplier:1.5,upgradeRangeMultiplier:1.1,maxLevel:3,description:"Fast and powerful"}},$M=["SCARECROW","PITCHFORK","CORN_CANNON","SPRINKLER","TRACTOR"],ns={WIDTH:24,HEIGHT:3,OFFSET_Y:-16,HIGH_THRESHOLD:.6,MED_THRESHOLD:.3},ci={FADE_DURATION:400,SCORE_POP_SCALE:1.3,SCORE_POP_DURATION:150},wa=[200,250,300,350,400],Ga=[20,20,25,25,30],bu={LIFETIME:5e3,HIT_DISTANCE:15},bt={TOP_BAR_HEIGHT:36,TOP_BAR_BG:2956046,TOP_BAR_ALPHA:.9,PANEL_WIDTH:800,PANEL_HEIGHT:70,PANEL_Y:530,FONT_FAMILY:"monospace",FONT_SIZE_SMALL:"12px",FONT_SIZE_MEDIUM:"16px",FONT_SIZE_LARGE:"24px",FONT_SIZE_TITLE:"48px"},ba={NORMAL:1,FAST:2},ri={ENEMY_DEATH:{COUNT:12,MIN_SPEED:40,MAX_SPEED:120,MIN_SIZE:2,MAX_SIZE:5,DURATION:500,GRAVITY:80},CORN_EARNED:{FLOAT_DISTANCE:40,DURATION:800,FONT_SIZE:"14px",COLOR:"#ffdd44"},PROJECTILE_SPLASH:{RING_COUNT:10,MIN_SPEED:30,MAX_SPEED:80,SIZE:3,DURATION:350,COLOR:16772676},TOWER_PLACED:{COUNT:8,MIN_SPEED:20,MAX_SPEED:60,SIZE:3,DURATION:400,COLOR:12886874},BARN_HIT:{COUNT:10,MIN_SPEED:30,MAX_SPEED:90,SIZE:4,DURATION:500,COLOR:16724787},MENU_FIREFLIES:{COUNT:20,MIN_SIZE:1,MAX_SIZE:3,COLOR:16772744,MIN_DURATION:2e3,MAX_DURATION:4e3,DRIFT:60},GAMEOVER_EMBERS:{COUNT:25,MIN_SIZE:2,MAX_SIZE:4,COLORS:[16729122,16737843,13382417,16746564],MIN_DURATION:3e3,MAX_DURATION:5e3},LEVELCOMPLETE_CONFETTI:{COUNT:40,COLORS:[16768256,4521796,16729343,4513279,16746564,16729156],MIN_SIZE:3,MAX_SIZE:6,MIN_DURATION:2e3,MAX_DURATION:4e3},LEVELCOMPLETE_STARBURST:{COUNT:16,MIN_SPEED:80,MAX_SPEED:200,SIZE:5,DURATION:700,COLOR:16768256},TRAIL:{INTERVAL:50,SIZE:2,DURATION:200,ALPHA:.5}},Et={BARN_HIT_SHAKE:{DURATION:200,INTENSITY:.008},BARN_HIT_FLASH:{DURATION:250,R:255,G:50,B:50},WAVE_START_ZOOM:{SCALE:1.02,DURATION:300,EASE:"Sine.easeInOut"},LEVEL_COMPLETE_FLASH:{DURATION:400,R:255,G:255,B:255},TITLE_BOUNCE:{FROM_SCALE:0,TO_SCALE:1,DURATION:600,EASE:"Back.easeOut"},BUTTON_HOVER_SCALE:1.05,BUTTON_HOVER_DURATION:100,TOWER_RECOIL:{SCALE:1.15,DURATION:100},ENEMY_DAMAGE_FLASH:{TINT:16711680,DURATION:120},ENEMY_SLOW_TINT:4491519,SPEED_TOGGLE_ROTATION:{ANGLE:360,DURATION:300},GAMEOVER_TITLE_SHAKE:{OFFSET:4,DURATION:60,REPEATS:4,DELAY:200},STATS_FADE_IN:{DURATION:400,STAGGER_DELAY:150},STATS_SLIDE_IN:{OFFSET_X:-200,DURATION:400,STAGGER_DELAY:150,EASE:"Back.easeOut"},CORN_FLASH_COLOR:"#ffffff",CORN_FLASH_DURATION:100,LIVES_SHAKE:{OFFSET:4,DURATION:50,REPEATS:3},TOWER_GLOW:{COLOR:16768324,PULSE_DURATION:1200,MIN_ALPHA:.05,MAX_ALPHA:.2},TEXT_SHADOW_COLOR:"#000000",TEXT_SHADOW_BLUR:4,TEXT_STROKE_THICKNESS:2,TEXT_STROKE_COLOR:"#000000"},qM={chicken:[16768256,16772676,15649792],pig:[16755404,16746666,16764125],cow:[16777215,14540253,15658734],goat:[11184810,10066329,12303291],bull:[8921634,11154227,6689041]};function lr(i,p,x,M,R=2){if(i.textures.exists(M))return;const w=p.length,v=p[0].length,T=document.createElement("canvas");T.width=v*R,T.height=w*R;const t=T.getContext("2d");for(let h=0;h<w;h++)for(let g=0;g<v;g++){const o=p[h][g];if(o===0||x[o]==null)continue;const a=x[o],r=a>>16&255,e=a>>8&255,s=a&255;t.fillStyle=`rgb(${r},${e},${s})`,t.fillRect(g*R,h*R,R,R)}i.textures.addCanvas(M,T)}function _M(i,p,x,M,R=2){if(i.textures.exists(M))return;const w=p[0].length,v=p[0][0].length,T=v*R,t=w*R,h=document.createElement("canvas");h.width=T*p.length,h.height=t;const g=h.getContext("2d");p.forEach((a,r)=>{const e=r*T;for(let s=0;s<w;s++)for(let u=0;u<v;u++){const n=a[s][u];if(n===0||x[n]==null)continue;const l=x[n],c=l>>16&255,d=l>>8&255,f=l&255;g.fillStyle=`rgb(${c},${d},${f})`,g.fillRect(e+u*R,s*R,R,R)}});const o=i.textures.addCanvas(M,h);for(let a=0;a<p.length;a++)o.add(a,0,a*T,0,T,t)}const Ee={0:null,1:1710618,2:4008735,3:9136404,4:12886874,5:16768256,6:16746496,7:16755404,8:16777215,9:3355443,10:11184810,11:8921634,12:13382451,13:4500036,14:6137906,15:4491519,16:8965375,17:6702114,18:16764040,19:13395592,20:14526976,21:4885544,22:16711680,23:13421772},t3=[[0,0,0,0,12,12,0,0,0,0,0,0],[0,0,0,1,5,5,1,0,0,0,0,0],[0,0,1,5,5,5,5,1,0,0,0,0],[0,0,1,5,9,5,5,1,6,6,0,0],[0,0,1,5,5,5,5,5,1,6,0,0],[0,0,1,5,5,5,5,5,1,0,0,0],[0,0,0,1,5,5,5,1,0,0,0,0],[0,0,0,1,5,5,5,1,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,0,0],[0,0,0,0,6,0,6,0,0,0,0,0],[0,0,0,0,6,0,6,0,0,0,0,0]],e3=[[0,0,0,0,12,12,0,0,0,0,0,0],[0,0,0,1,5,5,1,0,0,0,0,0],[0,0,1,5,5,5,5,1,0,0,0,0],[0,0,1,5,9,5,5,1,6,6,0,0],[0,0,1,5,5,5,5,5,1,6,0,0],[0,0,1,5,5,5,5,5,1,0,0,0],[0,0,0,1,5,5,5,1,0,0,0,0],[0,0,0,1,5,5,5,1,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,1,0,0,0,1,0,0,0,0],[0,0,0,6,0,0,0,6,0,0,0,0],[0,0,0,6,0,0,0,6,0,0,0,0]],i3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,1,7,7,7,7,7,7,1,0,0,0,0],[0,0,0,1,7,7,9,7,7,7,7,7,1,0,0,0],[0,0,0,1,7,7,7,7,7,7,7,7,1,19,19,0],[0,0,1,7,7,7,7,7,7,7,7,7,1,19,1,19],[0,0,1,7,7,7,7,7,7,7,7,7,7,1,1,0],[0,0,1,7,7,7,7,7,7,7,7,7,7,1,0,0],[0,0,1,7,7,7,7,7,7,7,7,7,1,0,0,0],[0,0,0,1,7,7,7,7,7,7,7,7,1,0,0,0],[0,7,0,0,1,7,7,7,7,7,7,1,0,0,0,0],[7,0,7,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,7,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],s3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,1,7,7,7,7,7,7,1,0,0,0,0],[0,0,0,1,7,7,9,7,7,7,7,7,1,0,0,0],[0,0,0,1,7,7,7,7,7,7,7,7,1,19,19,0],[0,0,1,7,7,7,7,7,7,7,7,7,1,19,1,19],[0,0,1,7,7,7,7,7,7,7,7,7,7,1,1,0],[0,0,1,7,7,7,7,7,7,7,7,7,7,1,0,0],[0,0,1,7,7,7,7,7,7,7,7,7,1,0,0,0],[0,0,0,1,7,7,7,7,7,7,7,7,1,0,0,0],[0,7,0,0,1,7,7,7,7,7,7,1,0,0,0,0],[7,0,7,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,7,0,0,1,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],n3=[[0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,1,4,4,1,0,0,0,0,0,0,0,0],[0,0,0,1,8,8,8,8,1,0,0,0,0,0,0,0],[0,0,0,1,8,9,8,8,1,0,0,0,0,0,0,0],[0,0,1,8,8,8,8,8,8,1,0,0,0,0,0,0],[0,1,8,8,8,9,9,8,8,8,1,1,1,1,0,0],[0,1,8,8,9,9,9,8,8,8,8,8,8,8,1,0],[0,1,8,8,8,9,8,8,8,8,8,8,8,8,1,0],[0,1,8,8,8,8,8,8,9,9,8,8,8,8,1,0],[0,0,1,8,8,8,8,8,9,8,8,8,7,8,1,0],[0,0,0,1,8,8,8,8,8,8,8,8,7,1,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],r3=[[0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,1,4,4,1,0,0,0,0,0,0,0,0],[0,0,0,1,8,8,8,8,1,0,0,0,0,0,0,0],[0,0,0,1,8,9,8,8,1,0,0,0,0,0,0,0],[0,0,1,8,8,8,8,8,8,1,0,0,0,0,0,0],[0,1,8,8,8,9,9,8,8,8,1,1,1,1,0,0],[0,1,8,8,9,9,9,8,8,8,8,8,8,8,1,0],[0,1,8,8,8,9,8,8,8,8,8,8,8,8,1,0],[0,1,8,8,8,8,8,8,9,9,8,8,8,8,1,0],[0,0,1,8,8,8,8,8,9,8,8,8,7,8,1,0],[0,0,0,1,8,8,8,8,8,8,8,8,7,1,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],a3=[[0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0],[0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,1,10,10,9,10,1,0,0,0,0,0,0,0,0],[0,0,1,10,10,10,10,1,0,0,0,0,0,0,0,0],[0,0,1,10,10,10,10,1,1,1,1,1,0,0,0,0],[0,0,0,1,10,10,10,10,10,10,10,10,1,0,0,0],[0,0,0,1,10,10,10,10,10,10,10,10,1,0,0,0],[0,0,0,1,10,10,10,10,10,10,10,10,1,0,0,0],[0,0,0,0,1,10,10,10,10,10,10,1,0,0,0,0],[0,10,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,10,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,10,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],o3=[[0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0],[0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,1,10,10,9,10,1,0,0,0,0,0,0,0,0],[0,0,1,10,10,10,10,1,0,0,0,0,0,0,0,0],[0,0,1,10,10,10,10,1,1,1,1,1,0,0,0,0],[0,0,0,1,10,10,10,10,10,10,10,10,1,0,0,0],[0,0,0,1,10,10,10,10,10,10,10,10,1,0,0,0],[0,0,0,1,10,10,10,10,10,10,10,10,1,0,0,0],[0,0,0,0,1,10,10,10,10,10,10,1,0,0,0,0],[0,10,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,10,0,0,1,0,0,0,0,0,1,0,0,0,0,0],[0,10,0,0,1,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],h3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,23,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0,0],[0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0],[0,23,0,1,1,1,1,1,0,23,0,0,0,0,0,0,0,0,0,0],[0,0,1,11,11,11,11,11,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,22,11,11,11,22,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,11,11,11,11,11,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,11,20,11,1,0,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,1,20,20,20,1,11,11,11,11,11,11,11,11,11,1,0,0],[0,0,0,0,1,1,1,11,11,11,11,11,11,11,11,11,11,1,0,0],[0,0,0,0,1,11,11,11,11,11,11,11,11,11,11,11,11,1,0,0],[0,0,0,0,1,11,11,11,11,11,11,11,11,11,11,11,11,1,0,0],[0,0,0,0,1,11,11,11,11,11,11,11,11,11,11,11,1,0,0,0],[0,0,0,0,0,1,11,11,11,11,11,11,11,11,11,1,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],u3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,23,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0,0],[0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,0,0,0],[0,23,0,1,1,1,1,1,0,23,0,0,0,0,0,0,0,0,0,0],[0,0,1,11,11,11,11,11,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,22,11,11,11,22,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,11,11,11,11,11,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,11,20,11,1,0,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,1,20,20,20,1,11,11,11,11,11,11,11,11,11,1,0,0],[0,0,0,0,1,1,1,11,11,11,11,11,11,11,11,11,11,1,0,0],[0,0,0,0,1,11,11,11,11,11,11,11,11,11,11,11,11,1,0,0],[0,0,0,0,1,11,11,11,11,11,11,11,11,11,11,11,11,1,0,0],[0,0,0,0,1,11,11,11,11,11,11,11,11,11,11,11,1,0,0,0],[0,0,0,0,0,1,11,11,11,11,11,11,11,11,11,1,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Iu={chicken:{frames:[t3,e3],palette:Ee,scale:2,animRate:6},pig:{frames:[i3,s3],palette:Ee,scale:2,animRate:5},cow:{frames:[n3,r3],palette:Ee,scale:2,animRate:4},goat:{frames:[a3,o3],palette:Ee,scale:2,animRate:5},bull:{frames:[h3,u3],palette:Ee,scale:2,animRate:3}},l3=[[0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0],[0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0],[0,0,0,0,1,4,4,4,4,4,1,0,0,0,0,0],[0,0,0,0,1,18,9,18,9,18,1,0,0,0,0,0],[0,0,0,0,1,18,18,18,18,18,1,0,0,0,0,0],[0,0,0,0,0,1,18,6,18,1,0,0,0,0,0,0],[0,4,4,0,0,0,1,1,1,0,0,0,4,4,0,0],[4,0,0,4,1,3,3,3,3,3,1,4,0,0,4,0],[0,0,0,0,1,3,9,3,9,3,1,0,0,0,0,0],[0,0,0,0,1,3,3,3,3,3,1,0,0,0,0,0],[0,0,0,0,1,3,3,3,3,3,1,0,0,0,0,0],[0,0,0,0,0,1,3,3,3,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,17,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,17,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],f3=[[0,0,0,0,10,0,10,0,10,0,0,0,0,0,0,0],[0,0,0,0,10,0,10,0,10,0,0,0,0,0,0,0],[0,0,0,0,10,0,10,0,10,0,0,0,0,0,0,0],[0,0,0,0,1,10,1,10,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,10,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,17,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,10,10,10,1,0,0,0,0,0,0,0],[0,0,0,1,10,10,10,10,10,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0]],d3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,1,5,5,5,5,5,5,1,0,0,0,0],[0,0,0,1,5,5,5,5,5,5,5,5,1,0,0,0],[0,0,0,1,5,5,5,1,1,5,5,5,1,0,0,0],[0,0,0,1,20,20,20,20,20,20,20,20,1,0,0,0],[0,0,0,1,5,5,5,5,5,5,5,5,1,0,0,0],[0,0,0,1,5,6,5,6,5,6,5,6,1,0,0,0],[0,0,0,1,5,5,6,5,6,5,6,5,1,0,0,0],[0,0,0,1,5,6,5,6,5,6,5,6,1,0,0,0],[0,0,0,1,20,20,20,20,20,20,20,20,1,0,0,0],[0,0,0,1,5,5,5,5,5,5,5,5,1,0,0,0],[0,0,0,0,1,5,5,5,5,5,5,1,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,1,2,2,2,2,2,2,1,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0]],c3=[[0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,15,15,15,15,15,15,15,0,0,0,0,0],[0,16,0,0,15,15,15,1,15,15,15,0,0,16,0,0],[0,0,0,0,15,15,15,15,15,15,15,0,0,0,0,0],[0,0,0,0,0,1,15,15,15,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,16,0,0,0,10,0,0,0,16,0,0,0,0],[0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,10,10,10,1,0,0,0,0,0,0],[0,0,0,0,1,10,10,10,10,10,1,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0]],p3=[[0,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0],[0,0,0,1,1,1,1,1,0,0,0,0,9,0,0,0],[0,0,1,16,16,16,16,16,1,0,0,1,1,1,0,0],[0,0,1,16,16,16,16,16,1,0,1,13,13,13,1,0],[0,0,0,1,1,1,1,1,1,1,13,13,13,13,1,0],[0,0,0,0,0,0,1,13,13,13,13,13,13,13,1,0],[0,0,0,0,0,0,1,13,13,13,13,13,13,13,1,0],[0,0,0,0,0,0,1,13,13,13,13,13,13,13,1,0],[0,0,0,0,0,0,1,13,13,13,13,13,13,13,1,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,9,9,9,1,0,1,9,9,9,1,0],[0,0,0,1,9,9,10,9,9,1,9,9,10,9,9,1],[0,0,0,1,9,9,9,9,9,1,9,9,9,9,9,1],[0,0,0,0,1,9,9,9,1,0,1,9,9,9,1,0],[0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0]],v3={scarecrow:{pixels:l3,palette:Ee,scale:2},pitchfork:{pixels:f3,palette:Ee,scale:2},corn_cannon:{pixels:d3,palette:Ee,scale:2},sprinkler:{pixels:c3,palette:Ee,scale:2},tractor:{pixels:p3,palette:Ee,scale:2}},m3=[[0,0,1,1,1,1,0,0],[0,1,4,4,3,4,1,0],[1,4,4,3,3,4,4,1],[1,4,3,3,3,3,4,1],[1,4,3,3,3,3,4,1],[1,4,4,3,3,4,4,1],[0,1,4,4,3,4,1,0],[0,0,1,1,1,1,0,0]],g3=[[0,0,0,0,0,0,10,10],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,10,10],[17,17,17,17,10,10,10,1],[17,2,2,17,10,10,10,1],[0,0,0,0,0,0,10,10],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,10,10]],x3=[[0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0],[0,14,14,1,5,5,1,0],[14,14,1,5,6,5,5,1],[14,14,1,5,5,6,5,1],[0,14,14,1,5,5,1,0],[0,0,0,1,1,1,0,0],[0,0,0,0,0,0,0,0]],y3=[[0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,15,1,0,0,0],[0,1,8,15,15,1,0,0],[0,1,15,15,15,15,1,0],[0,1,15,15,15,15,1,0],[0,0,1,15,15,1,0,0],[0,0,0,1,1,0,0,0]],T3=[[0,0,0,13,0,0,0,0],[0,0,13,13,13,0,0,0],[0,13,1,13,1,13,0,0],[13,13,13,1,13,13,13,0],[0,13,13,1,13,13,0,0],[0,13,1,13,1,13,0,0],[0,0,13,13,13,0,0,0],[0,0,0,13,0,0,0,0]],C3={scarecrow:{pixels:m3,palette:Ee,scale:2},pitchfork:{pixels:g3,palette:Ee,scale:2},corn_cannon:{pixels:x3,palette:Ee,scale:2},sprinkler:{pixels:y3,palette:Ee,scale:2},tractor:{pixels:T3,palette:Ee,scale:2}},S3=[[14,14,14,14,14,14,21,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,21,14,14],[14,14,21,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,21,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,21,14],[14,14,14,14,21,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,21,14,14,14,14],[14,21,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,21,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,21],[14,14,14,21,14,14,14,14,14,14,14,14,14,21,14,14],[14,14,14,14,14,14,14,21,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,21,14,14,14,14,14],[14,21,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,21,14,14,14,14,14,14,14,14,21,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]],M3=[[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,21,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,21,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,21,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,21,14,14,14,14,21,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,21,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,21,14,14,14,14,14,14,14,14,21,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,21,14],[14,14,14,14,14,21,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,21,14,14,14,14,14,14],[14,14,21,14,14,14,14,14,14,14,14,14,21,14,14,14]],E3=[[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,21,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,21,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,5,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,5,5,5,14,14,14,14,14,14,21,14,14],[14,14,14,14,14,5,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,21,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,21],[14,14,21,14,14,14,14,14,14,21,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,21,14,14,14,14,14,14,14,14]],P3=[[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,2,4,4,4,4],[4,4,2,2,4,4,4,4,4,4,4,2,4,4,4,4],[4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,2,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,2,2,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,2,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]],A3=[[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,2,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,2,4,4,4,4,4,4,4,4,4,4,2,4,4],[4,2,2,4,4,4,4,4,4,4,4,4,2,2,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,2,4,4,4,4,4],[4,4,4,4,4,2,4,4,4,2,2,4,4,4,4,4],[4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]],R3=[[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,16,16,16,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,16,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,16,16,16,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,16,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,16,16,16,16,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,16,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]],F3=[[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,6,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,6,6,4,4,4,4,4,4],[4,4,4,6,6,6,6,6,6,6,6,4,4,4,4,4],[4,4,4,6,6,6,6,6,6,6,6,6,4,4,4,4],[4,4,4,6,6,6,6,6,6,6,6,6,6,4,4,4],[4,4,4,6,6,6,6,6,6,6,6,6,6,6,4,4],[4,4,4,6,6,6,6,6,6,6,6,6,6,4,4,4],[4,4,4,6,6,6,6,6,6,6,6,6,4,4,4,4],[4,4,4,6,6,6,6,6,6,6,6,4,4,4,4,4],[4,4,4,4,4,4,4,4,6,6,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,6,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]],L3=[[0,0,0,0,1,1,1,1,0,0,0,0],[0,0,0,1,4,4,4,4,1,0,0,0],[0,0,1,4,4,4,4,4,4,1,0,0],[0,1,4,4,4,4,4,4,4,4,1,0],[0,1,3,3,3,3,3,3,3,3,1,0],[1,4,4,4,4,4,4,4,4,4,4,1],[1,4,4,4,4,4,4,4,4,4,4,1],[1,3,3,3,3,3,3,3,3,3,3,1],[1,4,4,4,4,4,4,4,4,4,4,1],[0,1,1,1,1,1,1,1,1,1,1,0]],D3=[[0,0,1,1,0,0],[0,0,1,17,1,0],[0,0,1,17,1,0],[1,3,3,3,3,1],[1,3,3,3,3,1],[0,0,1,17,1,0],[0,0,1,17,1,0],[0,0,1,17,1,0],[0,0,1,17,1,0],[0,0,1,17,1,0],[0,0,1,17,1,0],[0,0,1,2,1,0]],w3=[[14,14,14,14,14,14,14,14],[14,14,5,14,14,14,14,14],[14,5,5,5,14,14,12,14],[14,14,5,14,14,12,12,12],[14,14,21,14,14,14,12,14],[14,14,14,14,14,14,21,14],[14,14,14,15,14,14,14,14],[14,14,15,15,15,14,14,14]],G3=[[0,0,1,1,1,1,0,0],[0,1,10,10,10,10,1,0],[1,10,10,23,10,10,10,1],[1,10,10,10,10,10,10,1],[0,1,9,9,9,9,1,0],[0,0,1,1,1,1,0,0]],b3={grass1:{pixels:S3,palette:Ee,scale:2.5},grass2:{pixels:M3,palette:Ee,scale:2.5},grass3:{pixels:E3,palette:Ee,scale:2.5},path1:{pixels:P3,palette:Ee,scale:2.5},path2:{pixels:A3,palette:Ee,scale:2.5},water:{pixels:R3,palette:Ee,scale:2.5},entry:{pixels:F3,palette:Ee,scale:2.5}},I3={hayStack:{pixels:L3,palette:Ee,scale:2},fencePost:{pixels:D3,palette:Ee,scale:2},flowerPatch:{pixels:w3,palette:Ee,scale:2},rock:{pixels:G3,palette:Ee,scale:2}};class O3 extends cs.Scene{constructor(){super("BootScene")}create(){for(const[p,x]of Object.entries(Iu))_M(this,x.frames,x.palette,`enemy-${p}`,x.scale);for(const[p,x]of Object.entries(v3))lr(this,x.pixels,x.palette,`tower-${p}`,x.scale);for(const[p,x]of Object.entries(C3))lr(this,x.pixels,x.palette,`proj-${p}`,x.scale);for(const[p,x]of Object.entries(b3))lr(this,x.pixels,x.palette,`tile-${p}`,x.scale);for(const[p,x]of Object.entries(I3))lr(this,x.pixels,x.palette,`deco-${p}`,x.scale);for(const[p,x]of Object.entries(Iu)){const M=`enemy-${p}`;if(!this.anims.exists(`${M}-walk`)){const R=[];for(let w=0;w<x.frames.length;w++)R.push({key:M,frame:w});this.anims.create({key:`${M}-walk`,frames:R,frameRate:x.animRate,repeat:-1})}}this.scene.start("MenuScene")}}const mt={GAME_START:"game:start",GAME_OVER:"game:over",GAME_RESTART:"game:restart",LEVEL_SELECT:"level:select",LEVEL_COMPLETE:"level:complete",WAVE_START:"wave:start",WAVE_COMPLETE:"wave:complete",WAVE_ALL_COMPLETE:"wave:allComplete",WAVE_UPDATED:"wave:updated",CORN_CHANGED:"corn:changed",CORN_EARNED:"corn:earned",CORN_SPENT:"corn:spent",LIVES_CHANGED:"lives:changed",BARN_HIT:"barn:hit",ENEMY_SPAWNED:"enemy:spawned",ENEMY_DIED:"enemy:died",ENEMY_REACHED_BARN:"enemy:reachedBarn",ENEMY_DAMAGED:"enemy:damaged",ENEMY_SLOWED:"enemy:slowed",TOWER_SELECTED:"tower:selected",TOWER_DESELECTED:"tower:deselected",TOWER_PLACED:"tower:placed",TOWER_UPGRADED:"tower:upgraded",TOWER_SOLD:"tower:sold",TOWER_FIRED:"tower:fired",PROJECTILE_HIT:"projectile:hit",PROJECTILE_SPLASH:"projectile:splash",UI_TOWER_PANEL_SELECT:"ui:towerPanelSelect",UI_SPEED_CHANGE:"ui:speedChange",UI_TOWER_INFO:"ui:towerInfo",UI_TOWER_INFO_HIDE:"ui:towerInfoHide",PARTICLES_EMIT:"particles:emit",AUDIO_INIT:"audio:init",MUSIC_MENU:"music:menu",MUSIC_GAMEPLAY:"music:gameplay",MUSIC_GAMEOVER:"music:gameover",MUSIC_LEVELCOMPLETE:"music:levelcomplete",MUSIC_STOP:"music:stop"};class B3{constructor(){this.listeners={}}on(p,x){return this.listeners[p]||(this.listeners[p]=[]),this.listeners[p].push(x),this}off(p,x){return this.listeners[p]?(this.listeners[p]=this.listeners[p].filter(M=>M!==x),this):this}emit(p,x){return this.listeners[p]?(this.listeners[p].forEach(M=>{try{M(x)}catch(R){console.error(`EventBus error in ${p}:`,R)}}),this):this}removeAll(){return this.listeners={},this}}const gt=new B3;class X3{constructor(){this.levelsUnlocked=1,this.reset()}reset(){this.currentLevel=0,this.corn=wa[0],this.lives=Ga[0],this.currentWave=0,this.totalWaves=0,this.waveInProgress=!1,this.enemiesAlive=0,this.enemiesToSpawn=0,this.started=!1,this.gameOver=!1,this.levelComplete=!1,this.gameSpeed=1,this.towersPlaced=[],this.selectedTowerType=null,this.selectedPlacedTower=null}setLevel(p){this.currentLevel=p,this.corn=wa[p]||wa[0],this.lives=Ga[p]||Ga[0],this.currentWave=0,this.waveInProgress=!1,this.enemiesAlive=0,this.enemiesToSpawn=0,this.started=!1,this.gameOver=!1,this.levelComplete=!1,this.gameSpeed=1,this.towersPlaced=[],this.selectedTowerType=null,this.selectedPlacedTower=null}addCorn(p){this.corn+=p}spendCorn(p){return this.corn>=p?(this.corn-=p,!0):!1}loseLife(p=1){return this.lives=Math.max(0,this.lives-p),this.lives<=0}unlockNextLevel(){this.currentLevel+1>=this.levelsUnlocked&&(this.levelsUnlocked=Math.min(this.currentLevel+2,5))}}const Tt=new X3,fr=Kt.TILE_SIZE;function at(i,p){return{x:i*fr+fr/2,y:p*fr+fr/2}}const N3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[4,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],V3=[at(0,2),at(1,2),at(2,2),at(3,2),at(4,2),at(5,2),at(6,2),at(7,2),at(8,2),at(9,2),at(9,3),at(9,4),at(9,5),at(10,5),at(11,5),at(12,5),at(13,5),at(14,5),at(15,5),at(16,5),at(17,5),at(17,6),at(17,7),at(17,8),at(16,8),at(15,8),at(14,8),at(13,8),at(12,8),at(11,8),at(10,8),at(9,8),at(8,8),at(7,8),at(6,8),at(5,8),at(4,8),at(3,8),at(2,8),at(2,9),at(2,10),at(2,11),at(3,11),at(4,11),at(5,11),at(6,11),at(7,11),at(8,11),at(9,11),at(10,11),at(11,11),at(12,11),at(13,11),at(14,11),at(15,11)],z3=[[{type:It.CHICKEN,count:6,spawnDelay:600}],[{type:It.CHICKEN,count:10,spawnDelay:500}],[{type:It.CHICKEN,count:6,spawnDelay:500},{type:It.PIG,count:3,spawnDelay:800}],[{type:It.PIG,count:5,spawnDelay:700},{type:It.CHICKEN,count:8,spawnDelay:400}],[{type:It.CHICKEN,count:10,spawnDelay:400},{type:It.PIG,count:6,spawnDelay:600}]],W3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[4,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Z3=[at(0,3),at(1,3),at(2,3),at(3,3),at(4,3),at(4,4),at(4,5),at(5,5),at(6,5),at(7,5),at(8,5),at(9,5),at(10,5),at(10,6),at(10,7),at(11,7),at(12,7),at(13,7),at(14,7),at(14,8),at(14,9),at(15,9),at(16,9),at(17,9),at(17,10),at(17,11)],Y3=[[{type:It.CHICKEN,count:8,spawnDelay:500}],[{type:It.CHICKEN,count:6,spawnDelay:500},{type:It.PIG,count:3,spawnDelay:800}],[{type:It.PIG,count:6,spawnDelay:700}],[{type:It.CHICKEN,count:10,spawnDelay:400},{type:It.COW,count:2,spawnDelay:1200}],[{type:It.PIG,count:5,spawnDelay:600},{type:It.COW,count:3,spawnDelay:1e3}],[{type:It.CHICKEN,count:12,spawnDelay:350},{type:It.PIG,count:5,spawnDelay:600}],[{type:It.COW,count:5,spawnDelay:900},{type:It.CHICKEN,count:8,spawnDelay:400}]],U3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[4,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,2,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],[4,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],H3=[at(0,1),at(1,1),at(2,1),at(3,1),at(4,1),at(5,1),at(6,1),at(7,1),at(7,2),at(7,3),at(7,4),at(8,4),at(9,4),at(10,4),at(10,5),at(10,6),at(10,7),at(11,7),at(12,7),at(13,7),at(14,7),at(15,7),at(16,7),at(17,7)],K3=[at(0,13),at(1,13),at(2,13),at(3,13),at(4,13),at(5,13),at(6,13),at(7,13),at(7,12),at(7,11),at(7,10),at(8,10),at(9,10),at(10,10),at(10,9),at(10,8),at(10,7),at(11,7),at(12,7),at(13,7),at(14,7),at(15,7),at(16,7),at(17,7)],k3=[[{type:It.CHICKEN,count:8,spawnDelay:500}],[{type:It.PIG,count:4,spawnDelay:700},{type:It.CHICKEN,count:6,spawnDelay:500}],[{type:It.COW,count:3,spawnDelay:1e3}],[{type:It.GOAT,count:4,spawnDelay:700},{type:It.CHICKEN,count:8,spawnDelay:400}],[{type:It.PIG,count:6,spawnDelay:600},{type:It.GOAT,count:3,spawnDelay:700}],[{type:It.COW,count:4,spawnDelay:900},{type:It.CHICKEN,count:10,spawnDelay:350}],[{type:It.GOAT,count:6,spawnDelay:600},{type:It.PIG,count:6,spawnDelay:600}],[{type:It.COW,count:5,spawnDelay:800},{type:It.GOAT,count:4,spawnDelay:700},{type:It.CHICKEN,count:12,spawnDelay:300}]],J3=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],j3=[at(1,1),at(2,1),at(3,1),at(4,1),at(5,1),at(6,1),at(7,1),at(8,1),at(9,1),at(10,1),at(11,1),at(12,1),at(13,1),at(14,1),at(15,1),at(16,1),at(17,1),at(17,2),at(17,3),at(16,3),at(15,3),at(14,3),at(13,3),at(12,3),at(11,3),at(10,3),at(9,3),at(8,3),at(7,3),at(6,3),at(5,3),at(4,3),at(3,3),at(2,3),at(2,4),at(2,5),at(3,5),at(4,5),at(5,5),at(6,5),at(7,5),at(8,5),at(9,5),at(10,5),at(11,5),at(12,5),at(13,5),at(14,5),at(15,5),at(16,5),at(17,5),at(17,6),at(17,7),at(16,7),at(15,7),at(14,7),at(13,7),at(12,7),at(11,7),at(10,7),at(9,7),at(8,7),at(7,7),at(6,7),at(5,7),at(4,7),at(3,7),at(2,7),at(2,8),at(2,9),at(3,9),at(4,9),at(5,9),at(6,9),at(7,9),at(8,9),at(9,9),at(10,9),at(11,9),at(12,9),at(13,9),at(14,9),at(15,9),at(16,9),at(17,9),at(17,10),at(17,11),at(17,12)],Q3=[[{type:It.CHICKEN,count:10,spawnDelay:400}],[{type:It.PIG,count:6,spawnDelay:600},{type:It.CHICKEN,count:8,spawnDelay:400}],[{type:It.COW,count:4,spawnDelay:900},{type:It.GOAT,count:3,spawnDelay:700}],[{type:It.CHICKEN,count:15,spawnDelay:300}],[{type:It.PIG,count:8,spawnDelay:500},{type:It.COW,count:3,spawnDelay:900}],[{type:It.GOAT,count:6,spawnDelay:600},{type:It.CHICKEN,count:10,spawnDelay:350}],[{type:It.COW,count:6,spawnDelay:800},{type:It.PIG,count:6,spawnDelay:600}],[{type:It.CHICKEN,count:20,spawnDelay:250},{type:It.GOAT,count:5,spawnDelay:600}],[{type:It.COW,count:5,spawnDelay:800},{type:It.PIG,count:8,spawnDelay:500},{type:It.GOAT,count:4,spawnDelay:700}],[{type:It.COW,count:8,spawnDelay:700},{type:It.CHICKEN,count:15,spawnDelay:300},{type:It.GOAT,count:6,spawnDelay:600}]],$3=[[0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],q3=[at(9,0),at(9,1),at(9,2),at(9,3),at(9,4),at(9,5),at(9,6),at(9,7),at(9,8),at(9,9)],_3=[at(0,6),at(1,6),at(2,6),at(3,6),at(4,6),at(5,6),at(6,6),at(7,6),at(8,6),at(9,6),at(9,7),at(9,8),at(9,9)],tE=[at(19,6),at(18,6),at(17,6),at(16,6),at(15,6),at(14,6),at(13,6),at(12,6),at(11,6),at(10,6),at(9,6),at(9,7),at(9,8),at(9,9)],eE=[[{type:It.CHICKEN,count:10,spawnDelay:400}],[{type:It.PIG,count:6,spawnDelay:600},{type:It.CHICKEN,count:8,spawnDelay:400}],[{type:It.COW,count:4,spawnDelay:900},{type:It.GOAT,count:4,spawnDelay:700}],[{type:It.CHICKEN,count:15,spawnDelay:300},{type:It.PIG,count:5,spawnDelay:600}],[{type:It.GOAT,count:8,spawnDelay:500},{type:It.COW,count:4,spawnDelay:800}],[{type:It.PIG,count:10,spawnDelay:450},{type:It.CHICKEN,count:12,spawnDelay:350}],[{type:It.COW,count:6,spawnDelay:700},{type:It.GOAT,count:6,spawnDelay:600}],[{type:It.CHICKEN,count:20,spawnDelay:250},{type:It.PIG,count:8,spawnDelay:450}],[{type:It.COW,count:8,spawnDelay:600},{type:It.GOAT,count:6,spawnDelay:500},{type:It.CHICKEN,count:15,spawnDelay:300}],[{type:It.COW,count:6,spawnDelay:600},{type:It.PIG,count:10,spawnDelay:400},{type:It.GOAT,count:8,spawnDelay:500}],[{type:It.COW,count:10,spawnDelay:500},{type:It.CHICKEN,count:20,spawnDelay:200},{type:It.GOAT,count:8,spawnDelay:400}],[{type:It.BULL,count:2,spawnDelay:2e3},{type:It.COW,count:6,spawnDelay:700},{type:It.GOAT,count:6,spawnDelay:600}]],_e=[{name:"The Front Yard",grid:N3,paths:[V3],waves:z3},{name:"The Cornfield",grid:W3,paths:[Z3],waves:Y3},{name:"The Pasture",grid:U3,paths:[H3,K3],waves:k3},{name:"The Farm Road",grid:J3,paths:[j3],waves:Q3},{name:"The Siege",grid:$3,paths:[q3,_3,tE],waves:eE}];class iE{constructor(){this.currentLevel=null,this.grid=null,this.paths=null,this.waves=null}loadLevel(p){const x=_e[p];return x?(this.currentLevel=x,this.grid=x.grid,this.paths=x.paths,this.waves=x.waves,x):null}getTile(p,x){return!this.grid||x<0||x>=this.grid.length||p<0||p>=this.grid[0].length?-1:this.grid[x][p]}canPlaceTower(p,x){return this.getTile(p,x)===Us.GRASS}pixelToGrid(p,x){return{col:Math.floor(p/Kt.TILE_SIZE),row:Math.floor(x/Kt.TILE_SIZE)}}gridToPixel(p,x){return{x:p*Kt.TILE_SIZE+Kt.TILE_SIZE/2,y:x*Kt.TILE_SIZE+Kt.TILE_SIZE/2}}getRandomPath(){if(!this.paths||this.paths.length===0)return[];const p=Math.floor(Math.random()*this.paths.length);return this.paths[p]}getLevelCount(){return _e.length}getLevelName(p){return _e[p]?_e[p].name:"Unknown"}}class sE extends cs.Scene{constructor(){super("MenuScene")}create(){const p=Kt.WIDTH/2;this.cameras.main.setBackgroundColor(St.MENU_BG);const x=this.add.graphics();x.fillGradientStyle(928264,928264,2972186,2972186,1),x.fillRect(0,0,Kt.WIDTH,Kt.HEIGHT),this.input.once("pointerdown",()=>{gt.emit(mt.AUDIO_INIT),this.time.delayedCall(200,()=>{gt.emit(mt.MUSIC_MENU)})}),this.createFireflies();const M=this.add.text(p,80,"BARN DEFENSE",{fontSize:bt.FONT_SIZE_TITLE,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:4,shadow:{offsetX:2,offsetY:2,color:Et.TEXT_SHADOW_COLOR,blur:Et.TEXT_SHADOW_BLUR,fill:!0}}).setOrigin(.5);M.setScale(Et.TITLE_BOUNCE.FROM_SCALE),this.tweens.add({targets:M,scaleX:Et.TITLE_BOUNCE.TO_SCALE,scaleY:Et.TITLE_BOUNCE.TO_SCALE,duration:Et.TITLE_BOUNCE.DURATION,ease:Et.TITLE_BOUNCE.EASE});const R=this.add.text(p,130,"Defend your barn from the farm animals!",{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_GOLD_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5);R.setAlpha(0),this.tweens.add({targets:R,alpha:1,duration:400,delay:300}),this.drawDecorativeBarn(p,200),this.add.text(p,280,"SELECT LEVEL",{fontSize:bt.FONT_SIZE_LARGE,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}).setOrigin(.5);const w=340,v=80,T=p-(_e.length-1)*v/2;for(let t=0;t<_e.length;t++){const h=T+t*v,g=t<Tt.levelsUnlocked,o=this.add.rectangle(h,w,64,64,g?St.BUTTON:St.UI_BUTTON_DISABLED,.9);o.setStrokeStyle(2,g?St.BUTTON_HOVER:6710886);const a=this.add.text(h,w-8,String(t+1),{fontSize:bt.FONT_SIZE_LARGE,fontFamily:bt.FONT_FAMILY,color:g?St.UI_TEXT:"#666666",fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5),r=this.add.text(h,w+14,_e[t].name.split(" ").slice(1).join(" "),{fontSize:"9px",fontFamily:bt.FONT_FAMILY,color:g?St.UI_GOLD_TEXT:"#555555"}).setOrigin(.5);g&&(o.setInteractive({useHandCursor:!0}),o.on("pointerover",()=>{o.setFillStyle(St.BUTTON_HOVER,1),this.tweens.add({targets:[o,a,r],scaleX:Et.BUTTON_HOVER_SCALE,scaleY:Et.BUTTON_HOVER_SCALE,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),o.on("pointerout",()=>{o.setFillStyle(St.BUTTON,.9),this.tweens.add({targets:[o,a,r],scaleX:1,scaleY:1,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),o.on("pointerdown",()=>{this.startLevel(t)}))}this.add.text(p,440,"Click towers to place them on grass tiles",{fontSize:bt.FONT_SIZE_SMALL,fontFamily:bt.FONT_FAMILY,color:"#aaaaaa",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5),this.add.text(p,460,"Stop animals from reaching the barn!",{fontSize:bt.FONT_SIZE_SMALL,fontFamily:bt.FONT_FAMILY,color:"#aaaaaa",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5),this.add.text(Kt.WIDTH-10,Kt.HEIGHT-10,"v1.0",{fontSize:"10px",fontFamily:bt.FONT_FAMILY,color:"#555555"}).setOrigin(1),this.cameras.main.fadeIn(ci.FADE_DURATION)}createFireflies(){const p=ri.MENU_FIREFLIES;for(let x=0;x<p.COUNT;x++){const M=Math.random()*Kt.WIDTH,R=Math.random()*Kt.HEIGHT,w=p.MIN_SIZE+Math.random()*(p.MAX_SIZE-p.MIN_SIZE),v=this.add.circle(M,R,w,p.COLOR,.4+Math.random()*.4);v.setDepth(1);const T=p.MIN_DURATION+Math.random()*(p.MAX_DURATION-p.MIN_DURATION),t=(Math.random()-.5)*p.DRIFT*2,h=(Math.random()-.5)*p.DRIFT*2;this.tweens.add({targets:v,x:M+t,y:R+h,alpha:{from:.2,to:.8},duration:T,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:Math.random()*2e3})}}drawDecorativeBarn(p,x){const M=this.add.circle(p,x,50,16772744,.1);M.setDepth(2),this.tweens.add({targets:M,alpha:{from:.05,to:.18},scaleX:{from:1,to:1.15},scaleY:{from:1,to:1.15},duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});const R=this.add.graphics();R.setDepth(3);const w=60,v=50;R.fillStyle(St.BARN_COLOR,1),R.fillRect(p-w/2,x-v/4,w,v*.75),R.fillStyle(St.BARN_ROOF,1),R.fillTriangle(p-w/2-5,x-v/4,p,x-v/2-10,p+w/2+5,x-v/4),R.fillStyle(6697762,1),R.fillRect(p-8,x+v*.15,16,v*.35),R.fillStyle(16772744,.7),R.fillRect(p-w/2+6,x-v/8,10,10),R.fillRect(p+w/2-16,x-v/8,10,10)}startLevel(p){gt.emit(mt.MUSIC_STOP),Tt.setLevel(p),gt.emit(mt.LEVEL_SELECT,{level:p}),gt.emit(mt.GAME_START),this.cameras.main.fadeOut(ci.FADE_DURATION,0,0,0,(x,M)=>{M===1&&(this.scene.start("GameScene"),this.scene.launch("UIScene"))})}}function nE(i){return function(){let p=i+=1831565813;return p=Math.imul(p^p>>>15,p|1),p^=p+Math.imul(p^p>>>7,p|61),((p^p>>>14)>>>0)/4294967296}}class rE{constructor(p,x){this.scene=p,this.mapSystem=x}renderMap(){const p=this.mapSystem.grid;if(!p)return;const x=Kt.TILE_SIZE,M=nE(42),R=["tile-grass1","tile-grass2","tile-grass3"],w=["tile-path1","tile-path2"],v=["deco-hayStack","deco-fencePost","deco-flowerPatch","deco-rock"];for(let T=0;T<p.length;T++)for(let t=0;t<p[T].length;t++){const h=p[T][t],g=t*x+x/2,o=T*x+x/2;switch(h){case Us.GRASS:{const a=Math.floor(M()*R.length),r=R[a];if(this.scene.textures.exists(r))this.scene.add.image(g,o,r);else{const e=this.scene.add.graphics(),s=(T+t)%2===0;e.fillStyle(s?St.GRASS_LIGHT:St.GRASS_DARK,1),e.fillRect(t*x,T*x,x,x)}if(M()<.08){const e=Math.floor(M()*v.length),s=v[e];this.scene.textures.exists(s)&&this.scene.add.image(g,o,s).setAlpha(.5)}break}case Us.PATH:{const a=Math.floor(M()*w.length),r=w[a];if(this.scene.textures.exists(r))this.scene.add.image(g,o,r);else{const e=this.scene.add.graphics();e.fillStyle(St.PATH_COLOR,1),e.fillRect(t*x,T*x,x,x)}break}case Us.BARN:this.drawBarn(t*x,T*x,x);break;case Us.WATER:{const a="tile-water";if(this.scene.textures.exists(a))this.scene.add.image(g,o,a);else{const r=this.scene.add.graphics();r.fillStyle(St.WATER_COLOR,1),r.fillRect(t*x,T*x,x,x)}break}case Us.ENTRY:{const a="tile-entry";if(this.scene.textures.exists(a))this.scene.add.image(g,o,a);else{const r=this.scene.add.graphics();r.fillStyle(St.ENTRY_COLOR,1),r.fillRect(t*x,T*x,x,x)}break}}}this.drawPathMarkers()}drawBarn(p,x,M){const R=this.scene.add.graphics();R.fillStyle(St.BARN_COLOR,1),R.fillRect(p+2,x+M*.3,M-4,M*.7-2),R.fillStyle(St.BARN_ROOF,1),R.fillTriangle(p,x+M*.3,p+M/2,x+2,p+M,x+M*.3),R.fillStyle(6697762,1),R.fillRect(p+M/2-5,x+M*.5,10,M*.5-2),R.lineStyle(1,4465169,1),R.lineBetween(p+M/2-4,x+M*.52,p+M/2+4,x+M-4),R.lineBetween(p+M/2+4,x+M*.52,p+M/2-4,x+M-4)}drawPathMarkers(){const p=this.mapSystem.paths;if(!p)return;const x=this.scene.add.graphics();x.fillStyle(8943428,.3);for(const M of p)for(let R=0;R<M.length;R+=3)x.fillCircle(M[R].x,M[R].y,2)}destroy(){}}class aE{constructor(p,x,M){this.scene=p,this.config=x,this.path=M,this.waypointIndex=0,this.hp=x.hp,this.maxHp=x.hp,this.speed=x.speed,this.baseSpeed=x.speed,this.reward=x.reward,this.alive=!0,this.reachedEnd=!1,this.slowTimer=0,this.slowAmount=1;const R=M[0];this.x=R.x,this.y=R.y,this.container=p.add.container(this.x,this.y);const w=`enemy-${x.key}`;this.bodySprite=p.add.sprite(0,0,w),this.bodySprite.play(`${w}-walk`),this.container.add(this.bodySprite),this.healthBg=p.add.rectangle(0,ns.OFFSET_Y,ns.WIDTH,ns.HEIGHT,St.HEALTH_BG),this.container.add(this.healthBg),this.healthFill=p.add.rectangle(0,ns.OFFSET_Y,ns.WIDTH,ns.HEIGHT,St.HEALTH_HIGH),this.container.add(this.healthFill),this.waypointIndex=1}update(p){if(!this.alive||this.reachedEnd)return;const x=Tt.gameSpeed;this.slowTimer>0&&(this.slowTimer-=p*x,this.slowTimer<=0&&(this.slowAmount=1,this.slowTimer=0));const M=this.baseSpeed*this.slowAmount*x;if(this.waypointIndex>=this.path.length){this.reachEnd();return}const R=this.path[this.waypointIndex],w=R.x-this.x,v=R.y-this.y,T=Math.sqrt(w*w+v*v);if(T<2){if(this.x=R.x,this.y=R.y,this.config.canJump&&Math.random()<this.config.jumpChance&&(this.waypointIndex=Math.min(this.waypointIndex+this.config.jumpDistance,this.path.length-1)),this.waypointIndex++,this.waypointIndex>=this.path.length){this.reachEnd();return}}else{const t=M*p/1e3,h=w/T*t,g=v/T*t;this.x+=h,this.y+=g,this.bodySprite&&this.bodySprite.setFlipX(w<0)}this.container.setPosition(this.x,this.y)}takeDamage(p){this.alive&&(this.hp-=p,this.updateHealthBar(),gt.emit(mt.ENEMY_DAMAGED,{enemy:this,damage:p}),this.hp<=0&&this.die())}applySlow(p,x){this.slowAmount=Math.min(this.slowAmount,p),this.slowTimer=Math.max(this.slowTimer,x),gt.emit(mt.ENEMY_SLOWED,{enemy:this})}updateHealthBar(){const p=Math.max(0,this.hp/this.maxHp);this.healthFill.setScale(p,1),this.healthFill.setX(-24*(1-p)/2);let x=St.HEALTH_HIGH;p<ns.MED_THRESHOLD?x=St.HEALTH_LOW:p<ns.HIGH_THRESHOLD&&(x=St.HEALTH_MED),this.healthFill.setFillStyle(x)}die(){this.alive&&(this.alive=!1,gt.emit(mt.ENEMY_DIED,{enemy:this,reward:this.reward,x:this.x,y:this.y}),this.scene.tweens.add({targets:this.container,scaleX:0,scaleY:0,alpha:0,duration:200,onComplete:()=>{this.destroy()}}))}reachEnd(){!this.alive||this.reachedEnd||(this.reachedEnd=!0,this.alive=!1,gt.emit(mt.ENEMY_REACHED_BARN,{enemy:this}),this.scene.tweens.add({targets:this.container,alpha:0,duration:150,onComplete:()=>{this.destroy()}}))}destroy(){this.container&&(this.container.destroy(),this.container=null)}getPosition(){return{x:this.x,y:this.y}}isAlive(){return this.alive&&!this.reachedEnd}}class oE{constructor(p,x){this.scene=p,this.mapSystem=x,this.enemies=[],this.spawnQueue=[],this.spawnTimer=0,this.waveActive=!1,this.allWavesComplete=!1,x.waves&&(Tt.totalWaves=x.waves.length),this.onWaveStart=()=>this.startNextWave(),gt.on(mt.WAVE_START,this.onWaveStart),this.onEnemyReachedBarn=({enemy:M})=>{Tt.enemiesAlive--;const R=Tt.loseLife(1);gt.emit(mt.LIVES_CHANGED,{lives:Tt.lives}),gt.emit(mt.BARN_HIT,{lives:Tt.lives}),R&&(Tt.gameOver=!0,gt.emit(mt.GAME_OVER,{level:Tt.currentLevel})),this.checkWaveComplete()},gt.on(mt.ENEMY_REACHED_BARN,this.onEnemyReachedBarn),this.onEnemyDied=({reward:M})=>{Tt.enemiesAlive--,Tt.addCorn(M),gt.emit(mt.CORN_CHANGED,{corn:Tt.corn}),gt.emit(mt.CORN_EARNED,{amount:M}),this.checkWaveComplete()},gt.on(mt.ENEMY_DIED,this.onEnemyDied)}startNextWave(){if(this.waveActive||this.allWavesComplete||Tt.currentWave>=Tt.totalWaves)return;this.waveActive=!0,Tt.waveInProgress=!0;const p=this.mapSystem.waves[Tt.currentWave];this.buildSpawnQueue(p),Tt.currentWave++,gt.emit(mt.WAVE_UPDATED,{current:Tt.currentWave,total:Tt.totalWaves})}buildSpawnQueue(p){this.spawnQueue=[];let x=0;for(const M of p)for(let R=0;R<M.count;R++)this.spawnQueue.push({type:M.type,delay:M.spawnDelay}),x++;Tt.enemiesToSpawn=x,Tt.enemiesAlive+=x,this.spawnTimer=0}update(p){if(this.spawnQueue.length>0){this.spawnTimer+=p*Tt.gameSpeed;const x=this.spawnQueue[0];this.spawnTimer>=x.delay&&(this.spawnTimer-=x.delay,this.spawnQueue.shift(),this.spawnEnemy(x.type),Tt.enemiesToSpawn--)}for(const x of this.enemies)x.isAlive()&&x.update(p);this.enemies=this.enemies.filter(x=>x.isAlive())}spawnEnemy(p){const x=this.mapSystem.getRandomPath(),M=new aE(this.scene,p,x);this.enemies.push(M),gt.emit(mt.ENEMY_SPAWNED,{enemy:M})}checkWaveComplete(){this.waveActive&&Tt.enemiesAlive<=0&&this.spawnQueue.length===0&&(this.waveActive=!1,Tt.waveInProgress=!1,gt.emit(mt.WAVE_COMPLETE,{wave:Tt.currentWave,total:Tt.totalWaves}),Tt.currentWave>=Tt.totalWaves&&(this.allWavesComplete=!0,Tt.levelComplete=!0,gt.emit(mt.WAVE_ALL_COMPLETE),gt.emit(mt.LEVEL_COMPLETE,{level:Tt.currentLevel})))}getAliveEnemies(){return this.enemies.filter(p=>p.isAlive())}destroy(){gt.off(mt.WAVE_START,this.onWaveStart),gt.off(mt.ENEMY_REACHED_BARN,this.onEnemyReachedBarn),gt.off(mt.ENEMY_DIED,this.onEnemyDied);for(const p of this.enemies)p.destroy();this.enemies=[],this.spawnQueue=[]}}class hE{constructor(p,x,M,R){this.scene=p,this.towerTypeKey=x,this.config=Fr[x],this.col=M,this.row=R,this.level=1,this.damage=this.config.damage,this.range=this.config.range,this.fireRate=this.config.fireRate,this.x=M*Kt.TILE_SIZE+Kt.TILE_SIZE/2,this.y=R*Kt.TILE_SIZE+Kt.TILE_SIZE/2,this.lastFired=0,this.target=null,this.container=p.add.container(this.x,this.y);const w=`tower-${this.config.key}`;this.bodyImage=p.add.image(0,0,w),this.container.add(this.bodyImage),this.levelText=p.add.text(Kt.TILE_SIZE/2-6,-40/2+1,"1",{fontSize:"10px",fontFamily:"monospace",color:"#ffffff",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}),this.container.add(this.levelText),this.rangeCircle=p.add.circle(0,0,this.range,St.RANGE_FILL,St.RANGE_ALPHA),this.rangeCircle.setStrokeStyle(1,St.RANGE_STROKE,St.RANGE_STROKE_ALPHA),this.rangeCircle.setVisible(!1),this.container.add(this.rangeCircle),this.container.sendToBack(this.rangeCircle);const v=p.add.rectangle(0,0,Kt.TILE_SIZE,Kt.TILE_SIZE,16777215,0);v.setInteractive({useHandCursor:!0}),this.container.add(v),v.on("pointerdown",T=>{Tt.selectedTowerType||(this.select(),T.event.stopPropagation())}),this.hitArea=v}select(){gt.emit(mt.TOWER_SELECTED,{tower:this}),Tt.selectedPlacedTower=this,this.showRange(!0)}deselect(){Tt.selectedPlacedTower=null,this.showRange(!1)}showRange(p){this.rangeCircle.setVisible(p)}update(p,x){if(!x||x.length===0)return null;const M=this.fireRate/Tt.gameSpeed;if(p-this.lastFired<M)return null;let R=null,w=1/0;for(const v of x){if(!v.isAlive())continue;const T=v.x-this.x,t=v.y-this.y,h=Math.sqrt(T*T+t*t);h<=this.range&&h<w&&(R=v,w=h)}return R?(this.lastFired=p,this.target=R,gt.emit(mt.TOWER_FIRED,{tower:this,target:R,x:this.x,y:this.y}),{fromX:this.x,fromY:this.y,target:R,damage:this.damage,speed:this.config.projectileSpeed,color:this.config.projectileColor,size:this.config.projectileSize,splash:this.config.splash||!1,splashRadius:this.config.splashRadius||0,slowEffect:this.config.slowEffect||!1,slowAmount:this.config.slowAmount||1,slowDuration:this.config.slowDuration||0,towerTypeKey:this.config.key}):null}getUpgradeCost(){return this.level>=this.config.maxLevel?-1:Math.floor(this.config.cost*this.config.upgradeCostMultiplier*this.level)}getSellValue(){let p=this.config.cost;for(let x=1;x<this.level;x++)p+=Math.floor(this.config.cost*this.config.upgradeCostMultiplier*x);return Math.floor(p*.6)}upgrade(){if(this.level>=this.config.maxLevel)return!1;const p=this.getUpgradeCost();return Tt.spendCorn(p)?(this.level++,this.damage=Math.floor(this.config.damage*Math.pow(this.config.upgradeDamageMultiplier,this.level-1)),this.range=Math.floor(this.config.range*Math.pow(this.config.upgradeRangeMultiplier,this.level-1)),this.levelText.setText(String(this.level)),this.rangeCircle.setRadius(this.range),gt.emit(mt.TOWER_UPGRADED,{tower:this}),gt.emit(mt.CORN_CHANGED,{corn:Tt.corn}),!0):!1}sell(){const p=this.getSellValue();return Tt.addCorn(p),gt.emit(mt.CORN_CHANGED,{corn:Tt.corn}),gt.emit(mt.TOWER_SOLD,{tower:this,value:p}),this.destroy(),p}destroy(){this.container&&(this.container.destroy(),this.container=null)}}class uE{constructor(p,x){this.scene=p,this.x=x.fromX,this.y=x.fromY,this.target=x.target,this.damage=x.damage,this.speed=x.speed,this.splash=x.splash,this.splashRadius=x.splashRadius,this.slowEffect=x.slowEffect,this.slowAmount=x.slowAmount,this.slowDuration=x.slowDuration,this.alive=!0,this.lifetime=bu.LIFETIME,this.targetX=this.target.x,this.targetY=this.target.y,this.trailTimer=0;const M=x.towerTypeKey?`proj-${x.towerTypeKey}`:null;M&&p.textures.exists(M)?this.graphic=p.add.image(this.x,this.y,M):this.graphic=p.add.circle(this.x,this.y,x.size,x.color)}update(p,x){if(!this.alive)return;const M=Tt.gameSpeed;this.target&&this.target.isAlive()&&(this.targetX=this.target.x,this.targetY=this.target.y);const R=this.targetX-this.x,w=this.targetY-this.y,v=Math.sqrt(R*R+w*w);if(v<bu.HIT_DISTANCE){this.hit(x);return}const T=this.speed*M*p/1e3;if(this.x+=R/v*T,this.y+=w/v*T,this.graphic.setPosition(this.x,this.y),this.graphic.setRotation&&this.graphic.setRotation(Math.atan2(w,R)),this.trailTimer+=p,this.trailTimer>=ri.TRAIL.INTERVAL){this.trailTimer=0;const t=this.scene.add.circle(this.x,this.y,ri.TRAIL.SIZE,16777215,ri.TRAIL.ALPHA);t.setDepth(50),this.scene.tweens.add({targets:t,alpha:0,scaleX:.3,scaleY:.3,duration:ri.TRAIL.DURATION,onComplete:()=>t.destroy()})}this.lifetime-=p*M,this.lifetime<=0&&this.destroy()}hit(p){if(this.alive){if(this.alive=!1,this.target&&this.target.isAlive()&&(this.target.takeDamage(this.damage),this.slowEffect&&this.target.applySlow(this.slowAmount,this.slowDuration)),this.splash&&this.splashRadius>0&&p){for(const x of p){if(!x.isAlive()||x===this.target)continue;const M=x.x-this.x,R=x.y-this.y,w=Math.sqrt(M*M+R*R);if(w<=this.splashRadius){const v=1-w/this.splashRadius*.5;x.takeDamage(Math.floor(this.damage*v)),this.slowEffect&&x.applySlow(this.slowAmount,this.slowDuration)}}gt.emit(mt.PROJECTILE_SPLASH,{x:this.x,y:this.y,radius:this.splashRadius})}gt.emit(mt.PROJECTILE_HIT,{x:this.x,y:this.y}),this.destroy()}}destroy(){this.alive=!1,this.graphic&&(this.graphic.destroy(),this.graphic=null)}isAlive(){return this.alive}}class lE{constructor(p,x){this.scene=p,this.mapSystem=x,this.towers=[],this.projectiles=[],this.towerGrid={},this.ghostGraphic=null,this.ghostRange=null,this.onTowerPanelSelect=({towerType:M})=>{Tt.selectedPlacedTower&&Tt.selectedPlacedTower.deselect(),Tt.selectedTowerType=M,this.showGhost(!0)},gt.on(mt.UI_TOWER_PANEL_SELECT,this.onTowerPanelSelect),this.onTowerDeselected=()=>{Tt.selectedTowerType=null,Tt.selectedPlacedTower=null,this.showGhost(!1)},gt.on(mt.TOWER_DESELECTED,this.onTowerDeselected),this.setupInput()}setupInput(){this.scene.input.on("pointermove",p=>{Tt.selectedTowerType&&this.updateGhostPosition(p.x,p.y)}),this.scene.input.on("pointerdown",p=>{if(p.rightButtonDown()){this.cancelSelection();return}Tt.selectedTowerType?this.tryPlaceTower(p.x,p.y):Tt.selectedPlacedTower}),this.scene.input.keyboard.on("keydown-ESC",()=>{this.cancelSelection()})}cancelSelection(){Tt.selectedPlacedTower&&Tt.selectedPlacedTower.deselect(),Tt.selectedTowerType=null,Tt.selectedPlacedTower=null,this.showGhost(!1),gt.emit(mt.TOWER_DESELECTED),gt.emit(mt.UI_TOWER_INFO_HIDE)}showGhost(p){if(!p){this.ghostGraphic&&(this.ghostGraphic.destroy(),this.ghostGraphic=null),this.ghostRange&&(this.ghostRange.destroy(),this.ghostRange=null);return}if(!Tt.selectedTowerType)return;const x=Fr[Tt.selectedTowerType];x&&(this.ghostGraphic||(this.ghostGraphic=this.scene.add.rectangle(0,0,Kt.TILE_SIZE-2,Kt.TILE_SIZE-2,St.VALID_PLACEMENT,St.PLACEMENT_ALPHA)),this.ghostRange?this.ghostRange.setRadius(x.range):(this.ghostRange=this.scene.add.circle(0,0,x.range,St.RANGE_FILL,St.RANGE_ALPHA),this.ghostRange.setStrokeStyle(1,St.RANGE_STROKE,St.RANGE_STROKE_ALPHA)))}updateGhostPosition(p,x){const{col:M,row:R}=this.mapSystem.pixelToGrid(p,x),{x:w,y:v}=this.mapSystem.gridToPixel(M,R);if(this.ghostGraphic){this.ghostGraphic.setPosition(w,v);const T=this.canPlaceTower(M,R);this.ghostGraphic.setFillStyle(T?St.VALID_PLACEMENT:St.INVALID_PLACEMENT,St.PLACEMENT_ALPHA)}this.ghostRange&&this.ghostRange.setPosition(w,v)}canPlaceTower(p,x){if(!this.mapSystem.canPlaceTower(p,x))return!1;const M=`${p},${x}`;return!this.towerGrid[M]}tryPlaceTower(p,x){const{col:M,row:R}=this.mapSystem.pixelToGrid(p,x);if(!this.canPlaceTower(M,R))return;const w=Tt.selectedTowerType,v=Fr[w];if(!v||Tt.corn<v.cost)return;Tt.spendCorn(v.cost),gt.emit(mt.CORN_CHANGED,{corn:Tt.corn}),gt.emit(mt.CORN_SPENT,{amount:v.cost});const T=new hE(this.scene,w,M,R);this.towers.push(T),this.towerGrid[`${M},${R}`]=T,Tt.towersPlaced.push(T),gt.emit(mt.TOWER_PLACED,{tower:T,towerType:w,col:M,row:R})}update(p,x,M){for(const R of this.towers){const w=R.update(p,M);if(w){const v=new uE(this.scene,w);this.projectiles.push(v)}}for(const R of this.projectiles)R.isAlive()&&R.update(x,M);this.projectiles=this.projectiles.filter(R=>R.isAlive())}removeTower(p){const x=`${p.col},${p.row}`;delete this.towerGrid[x],this.towers=this.towers.filter(M=>M!==p),Tt.towersPlaced=Tt.towersPlaced.filter(M=>M!==p)}destroy(){gt.off(mt.UI_TOWER_PANEL_SELECT,this.onTowerPanelSelect),gt.off(mt.TOWER_DESELECTED,this.onTowerDeselected);for(const p of this.towers)p.destroy();for(const p of this.projectiles)p.destroy();this.towers=[],this.projectiles=[],this.towerGrid={},this.ghostGraphic&&(this.ghostGraphic.destroy(),this.ghostGraphic=null),this.ghostRange&&(this.ghostRange.destroy(),this.ghostRange=null)}}class fE{constructor(){gt.emit(mt.CORN_CHANGED,{corn:Tt.corn}),gt.emit(mt.LIVES_CHANGED,{lives:Tt.lives})}destroy(){}}class dE{constructor(p){this.scene=p,this.particles=[],this.onEnemyDied=({enemy:x,reward:M,x:R,y:w})=>{this.emitEnemyDeath(R,w,x.config.key),this.emitCornEarned(R,w,M)},gt.on(mt.ENEMY_DIED,this.onEnemyDied),this.onProjectileSplash=({x,y:M,radius:R})=>{this.emitSplashRing(x,M,R)},gt.on(mt.PROJECTILE_SPLASH,this.onProjectileSplash),this.onProjectileHit=({x,y:M})=>{this.emitHitSpark(x,M)},gt.on(mt.PROJECTILE_HIT,this.onProjectileHit),this.onTowerPlaced=({col:x,row:M})=>{const R=x*Kt.TILE_SIZE+Kt.TILE_SIZE/2,w=M*Kt.TILE_SIZE+Kt.TILE_SIZE/2;this.emitDustPuff(R,w)},gt.on(mt.TOWER_PLACED,this.onTowerPlaced),this.onBarnHit=()=>{this.emitBarnHit(Kt.WIDTH-80,Kt.HEIGHT/2)},gt.on(mt.BARN_HIT,this.onBarnHit),this.onTowerFired=({tower:x})=>{this.emitTowerRecoil(x)},gt.on(mt.TOWER_FIRED,this.onTowerFired),this.onEnemyDamaged=({enemy:x})=>{this.emitDamageFlash(x)},gt.on(mt.ENEMY_DAMAGED,this.onEnemyDamaged),this.onEnemySlowed=({enemy:x})=>{this.emitSlowTint(x)},gt.on(mt.ENEMY_SLOWED,this.onEnemySlowed),this.onWaveStart=()=>{this.emitWaveStartZoom()},gt.on(mt.WAVE_START,this.onWaveStart)}emitEnemyDeath(p,x,M){const R=ri.ENEMY_DEATH,w=qM[M]||[16777215,14540253];for(let v=0;v<R.COUNT;v++){const T=w[Math.floor(Math.random()*w.length)],t=R.MIN_SIZE+Math.random()*(R.MAX_SIZE-R.MIN_SIZE),h=Math.random()*Math.PI*2,g=R.MIN_SPEED+Math.random()*(R.MAX_SPEED-R.MIN_SPEED),o=Math.cos(h)*g,a=Math.sin(h)*g,r=this.scene.add.circle(p,x,t,T);r.setDepth(100),this.scene.tweens.add({targets:r,x:p+o*(R.DURATION/1e3),y:x+a*(R.DURATION/1e3)+R.GRAVITY*(R.DURATION/1e3),alpha:0,scaleX:.2,scaleY:.2,duration:R.DURATION,ease:"Quad.easeOut",onComplete:()=>r.destroy()})}}emitCornEarned(p,x,M){const R=ri.CORN_EARNED,w=this.scene.add.text(p,x-10,`+${M}`,{fontSize:R.FONT_SIZE,fontFamily:"monospace",color:R.COLOR,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}).setOrigin(.5).setDepth(110);this.scene.tweens.add({targets:w,y:x-10-R.FLOAT_DISTANCE,alpha:0,duration:R.DURATION,ease:"Quad.easeOut",onComplete:()=>w.destroy()})}emitSplashRing(p,x,M){const R=ri.PROJECTILE_SPLASH,w=this.scene.add.circle(p,x,5,R.COLOR,.4);w.setStrokeStyle(2,R.COLOR,.6),w.setDepth(90),this.scene.tweens.add({targets:w,scaleX:M/5,scaleY:M/5,alpha:0,duration:R.DURATION,ease:"Quad.easeOut",onComplete:()=>w.destroy()});for(let v=0;v<R.RING_COUNT;v++){const T=v/R.RING_COUNT*Math.PI*2,t=R.MIN_SPEED+Math.random()*(R.MAX_SPEED-R.MIN_SPEED),h=Math.cos(T)*t,g=Math.sin(T)*t,o=this.scene.add.circle(p,x,R.SIZE,R.COLOR);o.setDepth(91),this.scene.tweens.add({targets:o,x:p+h*(R.DURATION/1e3),y:x+g*(R.DURATION/1e3),alpha:0,scaleX:.3,scaleY:.3,duration:R.DURATION,ease:"Quad.easeOut",onComplete:()=>o.destroy()})}}emitHitSpark(p,x){for(let M=0;M<4;M++){const R=Math.random()*Math.PI*2,w=30+Math.random()*50,v=this.scene.add.circle(p,x,2,16777215);v.setDepth(90),this.scene.tweens.add({targets:v,x:p+Math.cos(R)*w*.3,y:x+Math.sin(R)*w*.3,alpha:0,duration:200,ease:"Quad.easeOut",onComplete:()=>v.destroy()})}}emitDustPuff(p,x){const M=ri.TOWER_PLACED;for(let R=0;R<M.COUNT;R++){const w=Math.random()*Math.PI*2,v=M.MIN_SPEED+Math.random()*(M.MAX_SPEED-M.MIN_SPEED),T=Math.cos(w)*v,t=Math.sin(w)*v,h=this.scene.add.circle(p,x+8,M.SIZE,M.COLOR,.7);h.setDepth(80),this.scene.tweens.add({targets:h,x:p+T*(M.DURATION/1e3),y:x+8+t*(M.DURATION/1e3)-15,alpha:0,scaleX:1.5,scaleY:1.5,duration:M.DURATION,ease:"Quad.easeOut",onComplete:()=>h.destroy()})}}emitBarnHit(p,x){const M=ri.BARN_HIT;for(let R=0;R<M.COUNT;R++){const w=Math.random()*Math.PI*2,v=M.MIN_SPEED+Math.random()*(M.MAX_SPEED-M.MIN_SPEED),T=p+(Math.random()-.5)*40,t=x+(Math.random()-.5)*40,h=this.scene.add.circle(T,t,M.SIZE,M.COLOR,.8);h.setDepth(100),this.scene.tweens.add({targets:h,x:T+Math.cos(w)*v*(M.DURATION/1e3),y:t+Math.sin(w)*v*(M.DURATION/1e3),alpha:0,duration:M.DURATION,ease:"Quad.easeOut",onComplete:()=>h.destroy()})}}emitTowerRecoil(p){if(!p.container)return;const x=Et.TOWER_RECOIL;this.scene.tweens.add({targets:p.container,scaleX:x.SCALE,scaleY:x.SCALE,duration:x.DURATION,yoyo:!0,ease:"Quad.easeOut"})}emitDamageFlash(p){if(!p.bodySprite)return;const x=Et.ENEMY_DAMAGE_FLASH;p.bodySprite.setTint(x.TINT),this.scene.time.delayedCall(x.DURATION,()=>{p.bodySprite&&p.alive&&(p.slowTimer>0?p.bodySprite.setTint(Et.ENEMY_SLOW_TINT):p.bodySprite.clearTint())})}emitSlowTint(p){p.bodySprite&&(p.bodySprite.setTint(Et.ENEMY_SLOW_TINT),this.scene.time.delayedCall(p.slowTimer||2e3,()=>{p.bodySprite&&p.alive&&p.slowTimer<=0&&p.bodySprite.clearTint()}))}emitWaveStartZoom(){const p=Et.WAVE_START_ZOOM,x=this.scene.cameras.main;this.scene.tweens.add({targets:x,zoom:p.SCALE,duration:p.DURATION/2,yoyo:!0,ease:p.EASE})}destroy(){gt.off(mt.ENEMY_DIED,this.onEnemyDied),gt.off(mt.PROJECTILE_SPLASH,this.onProjectileSplash),gt.off(mt.PROJECTILE_HIT,this.onProjectileHit),gt.off(mt.TOWER_PLACED,this.onTowerPlaced),gt.off(mt.BARN_HIT,this.onBarnHit),gt.off(mt.TOWER_FIRED,this.onTowerFired),gt.off(mt.ENEMY_DAMAGED,this.onEnemyDamaged),gt.off(mt.ENEMY_SLOWED,this.onEnemySlowed),gt.off(mt.WAVE_START,this.onWaveStart)}}class cE extends cs.Scene{constructor(){super("GameScene")}create(){this.mapSystem=new iE,this.mapSystem.loadLevel(Tt.currentLevel),this.pathSystem=new rE(this,this.mapSystem),this.pathSystem.renderMap(),this.waveSystem=new oE(this,this.mapSystem),this.towerSystem=new lE(this,this.mapSystem),this.economySystem=new fE,this.particleSystem=new dE(this),Tt.started=!0,this.onGameOver=()=>{this.time.delayedCall(1e3,()=>{this.scene.stop("UIScene"),this.scene.start("GameOverScene")})},gt.on(mt.GAME_OVER,this.onGameOver),this.onLevelComplete=()=>{this.time.delayedCall(1500,()=>{this.scene.stop("UIScene"),this.scene.start("LevelCompleteScene")})},gt.on(mt.LEVEL_COMPLETE,this.onLevelComplete),this.onTowerSold=({tower:p})=>{this.towerSystem.removeTower(p)},gt.on(mt.TOWER_SOLD,this.onTowerSold),this.cameras.main.fadeIn(ci.FADE_DURATION),gt.emit(mt.MUSIC_GAMEPLAY),this.onBarnHit=()=>{this.cameras.main.flash(Et.BARN_HIT_FLASH.DURATION,Et.BARN_HIT_FLASH.R,Et.BARN_HIT_FLASH.G,Et.BARN_HIT_FLASH.B),this.cameras.main.shake(Et.BARN_HIT_SHAKE.DURATION,Et.BARN_HIT_SHAKE.INTENSITY)},gt.on(mt.BARN_HIT,this.onBarnHit)}update(p,x){if(Tt.gameOver||Tt.levelComplete)return;const M=Math.min(x,Kt.DELTA_CAP);this.waveSystem.update(M);const R=this.waveSystem.getAliveEnemies();this.towerSystem.update(p,M,R)}shutdown(){gt.emit(mt.MUSIC_STOP),gt.off(mt.GAME_OVER,this.onGameOver),gt.off(mt.LEVEL_COMPLETE,this.onLevelComplete),gt.off(mt.TOWER_SOLD,this.onTowerSold),gt.off(mt.BARN_HIT,this.onBarnHit),this.waveSystem&&this.waveSystem.destroy(),this.towerSystem&&this.towerSystem.destroy(),this.economySystem&&this.economySystem.destroy(),this.pathSystem&&this.pathSystem.destroy(),this.particleSystem&&this.particleSystem.destroy()}}class pE{constructor(p){this.scene=p,this.buttons=[],this.selectedType=null,this.infoContainer=null,this.upgradeBtn=null,this.sellBtn=null,this.create(),this.onCornChanged=()=>this.updateAffordability(),gt.on(mt.CORN_CHANGED,this.onCornChanged),this.onTowerSelected=({tower:x})=>this.showTowerInfo(x),gt.on(mt.TOWER_SELECTED,this.onTowerSelected),this.onTowerDeselected=()=>this.hideTowerInfo(),gt.on(mt.TOWER_DESELECTED,this.onTowerDeselected),this.onTowerInfoHide=()=>this.hideTowerInfo(),gt.on(mt.UI_TOWER_INFO_HIDE,this.onTowerInfoHide),this.onTowerSold=()=>this.hideTowerInfo(),gt.on(mt.TOWER_SOLD,this.onTowerSold),this.onTowerUpgraded=({tower:x})=>this.showTowerInfo(x),gt.on(mt.TOWER_UPGRADED,this.onTowerUpgraded)}create(){this.panelBg=this.scene.add.rectangle(Kt.WIDTH/2,bt.PANEL_Y+bt.PANEL_HEIGHT/2,bt.PANEL_WIDTH,bt.PANEL_HEIGHT,bt.TOP_BAR_BG,bt.TOP_BAR_ALPHA),this.panelBg.setStrokeStyle(2,St.UI_PANEL_BORDER);const p=60,x=140;$M.forEach((M,R)=>{const w=Fr[M],v=p+R*x,T=bt.PANEL_Y+bt.PANEL_HEIGHT/2,t=Et.TOWER_GLOW,h=this.scene.add.rectangle(v,T,134,56,t.COLOR,0);h.setDepth(0);const g=this.scene.add.rectangle(v,T,130,52,St.UI_BUTTON,.8);g.setStrokeStyle(1,St.UI_PANEL_BORDER),g.setInteractive({useHandCursor:!0});const o=this.scene.add.rectangle(v-45,T,24,24,w.color),a=this.scene.add.text(v-28,T-14,w.name,{fontSize:bt.FONT_SIZE_SMALL,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}),r=this.scene.add.text(v-28,T+2,`${w.cost} corn`,{fontSize:bt.FONT_SIZE_SMALL,fontFamily:bt.FONT_FAMILY,color:St.UI_GOLD_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1});g.on("pointerover",()=>{g.setFillStyle(St.UI_BUTTON_HOVER,.9)}),g.on("pointerout",()=>{this.selectedType===M?g.setFillStyle(St.UI_BUTTON_HOVER,.9):g.setFillStyle(St.UI_BUTTON,.8)}),g.on("pointerdown",s=>{s.event.stopPropagation(),this.selectTowerType(M)});const e=this.scene.tweens.add({targets:h,alpha:{from:t.MIN_ALPHA,to:t.MAX_ALPHA},duration:t.PULSE_DURATION,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",paused:!0});this.buttons.push({typeKey:M,config:w,btn:g,icon:o,nameText:a,costText:r,glow:h,glowTween:e})}),this.createInfoPanel()}createInfoPanel(){this.infoContainer=this.scene.add.container(Kt.WIDTH/2,Kt.HEIGHT/2),this.infoContainer.setVisible(!1);const p=this.scene.add.rectangle(0,0,220,140,bt.TOP_BAR_BG,.95);p.setStrokeStyle(2,St.UI_PANEL_BORDER),this.infoContainer.add(p),this.infoTitle=this.scene.add.text(-100,-60,"",{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}),this.infoContainer.add(this.infoTitle),this.infoStats=this.scene.add.text(-100,-35,"",{fontSize:bt.FONT_SIZE_SMALL,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,lineSpacing:4,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}),this.infoContainer.add(this.infoStats),this.upgradeBtn=this.scene.add.rectangle(-30,45,100,28,St.UI_BUTTON,.9),this.upgradeBtn.setInteractive({useHandCursor:!0}),this.infoContainer.add(this.upgradeBtn),this.upgradeBtnText=this.scene.add.text(-30,45,"Upgrade",{fontSize:bt.FONT_SIZE_SMALL,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5),this.infoContainer.add(this.upgradeBtnText),this.upgradeBtn.on("pointerdown",x=>{x.event.stopPropagation(),Tt.selectedPlacedTower&&Tt.selectedPlacedTower.upgrade()}),this.sellBtn=this.scene.add.rectangle(70,45,70,28,11154227,.9),this.sellBtn.setInteractive({useHandCursor:!0}),this.infoContainer.add(this.sellBtn),this.sellBtnText=this.scene.add.text(70,45,"Sell",{fontSize:bt.FONT_SIZE_SMALL,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5),this.infoContainer.add(this.sellBtnText),this.sellBtn.on("pointerdown",x=>{x.event.stopPropagation(),Tt.selectedPlacedTower&&(Tt.selectedPlacedTower.sell(),gt.emit(mt.TOWER_DESELECTED))})}selectTowerType(p){Tt.selectedPlacedTower&&Tt.selectedPlacedTower.deselect(),this.hideTowerInfo(),this.selectedType===p?(this.selectedType=null,Tt.selectedTowerType=null,gt.emit(mt.TOWER_DESELECTED)):(this.selectedType=p,gt.emit(mt.UI_TOWER_PANEL_SELECT,{towerType:p})),this.updateButtonStates()}updateButtonStates(){for(const p of this.buttons)p.typeKey===this.selectedType?(p.btn.setFillStyle(St.UI_BUTTON_HOVER,.9),p.btn.setStrokeStyle(2,16776960)):(p.btn.setFillStyle(St.UI_BUTTON,.8),p.btn.setStrokeStyle(1,St.UI_PANEL_BORDER))}updateAffordability(){for(const p of this.buttons){const x=Tt.corn>=p.config.cost;p.btn.setAlpha(x?1:.5),p.costText.setColor(x?St.UI_GOLD_TEXT:St.UI_RED_TEXT),p.glow&&p.glowTween&&(x?p.glowTween.isPlaying()||p.glowTween.resume():(p.glowTween.pause(),p.glow.setAlpha(0)))}}showTowerInfo(p){this.hideTowerInfo(),this.selectedType=null,this.updateButtonStates(),this.infoContainer.setPosition(p.x,Math.max(p.y-100,100)),this.infoContainer.setVisible(!0),this.infoTitle.setText(`${p.config.name} Lv.${p.level}`);const x=[`Damage: ${p.damage}`,`Range: ${p.range}`,`Fire Rate: ${p.fireRate}ms`];p.config.splash&&x.push(`Splash: ${p.config.splashRadius}px`),p.config.slowEffect&&x.push(`Slow: ${Math.round((1-p.config.slowAmount)*100)}%`),this.infoStats.setText(x.join(`
`));const M=p.getUpgradeCost();if(M<0)this.upgradeBtnText.setText("MAX"),this.upgradeBtn.setFillStyle(St.UI_BUTTON_DISABLED,.7);else{this.upgradeBtnText.setText(`Up: ${M}`);const R=Tt.corn>=M;this.upgradeBtn.setFillStyle(R?St.UI_BUTTON:St.UI_BUTTON_DISABLED,.9)}this.sellBtnText.setText(`Sell: ${p.getSellValue()}`)}hideTowerInfo(){this.infoContainer&&this.infoContainer.setVisible(!1)}destroy(){gt.off(mt.CORN_CHANGED,this.onCornChanged),gt.off(mt.TOWER_SELECTED,this.onTowerSelected),gt.off(mt.TOWER_DESELECTED,this.onTowerDeselected),gt.off(mt.UI_TOWER_INFO_HIDE,this.onTowerInfoHide),gt.off(mt.TOWER_SOLD,this.onTowerSold),gt.off(mt.TOWER_UPGRADED,this.onTowerUpgraded)}}class vE{constructor(p){this.scene=p,this.create(),this.onWaveUpdated=({current:x,total:M})=>{this.scene.tweens.add({targets:this.waveText,scaleX:1.3,scaleY:1.3,duration:100,yoyo:!0,ease:"Quad.easeOut",onYoyo:()=>{this.waveText.setText(`Wave ${x}/${M}`)}}),this.updateStartButton()},gt.on(mt.WAVE_UPDATED,this.onWaveUpdated),this.onWaveComplete=()=>{this.updateStartButton()},gt.on(mt.WAVE_COMPLETE,this.onWaveComplete),this.onAllWavesComplete=()=>{this.startBtn.setVisible(!1),this.startBtnText.setVisible(!1),this.waveText.setText("All Waves Cleared!"),this.waveText.setColor(St.UI_GREEN_TEXT)},gt.on(mt.WAVE_ALL_COMPLETE,this.onAllWavesComplete),this.onGameOver=()=>{this.startBtn.setVisible(!1),this.startBtnText.setVisible(!1)},gt.on(mt.GAME_OVER,this.onGameOver)}create(){this.waveText=this.scene.add.text(Kt.WIDTH/2,10,`Wave 0/${Tt.totalWaves}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}).setOrigin(.5,0),this.startBtn=this.scene.add.rectangle(Kt.WIDTH/2,bt.PANEL_Y-22,140,28,St.BUTTON,.9),this.startBtn.setStrokeStyle(1,St.BUTTON_HOVER),this.startBtn.setInteractive({useHandCursor:!0}),this.startBtnText=this.scene.add.text(Kt.WIDTH/2,bt.PANEL_Y-22,"Start Wave",{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}).setOrigin(.5),this.startBtn.on("pointerover",()=>{this.startBtn.setFillStyle(St.BUTTON_HOVER,1)}),this.startBtn.on("pointerout",()=>{this.startBtn.setFillStyle(St.BUTTON,.9)}),this.startBtn.on("pointerdown",p=>{p.event.stopPropagation(),!Tt.waveInProgress&&!Tt.gameOver&&!Tt.levelComplete&&gt.emit(mt.WAVE_START)}),this.updateStartButton()}updateStartButton(){const p=!Tt.waveInProgress&&!Tt.gameOver&&!Tt.levelComplete&&Tt.currentWave<Tt.totalWaves;this.startBtn.setVisible(p),this.startBtnText.setVisible(p),p&&this.startBtnText.setText(`Start Wave ${Tt.currentWave+1}`)}destroy(){gt.off(mt.WAVE_UPDATED,this.onWaveUpdated),gt.off(mt.WAVE_COMPLETE,this.onWaveComplete),gt.off(mt.WAVE_ALL_COMPLETE,this.onAllWavesComplete),gt.off(mt.GAME_OVER,this.onGameOver)}}class mE extends cs.Scene{constructor(){super("UIScene")}create(){this.add.rectangle(Kt.WIDTH/2,bt.TOP_BAR_HEIGHT/2,Kt.WIDTH,bt.TOP_BAR_HEIGHT,bt.TOP_BAR_BG,bt.TOP_BAR_ALPHA);const p=_e[Tt.currentLevel]?_e[Tt.currentLevel].name:"Unknown";this.levelText=this.add.text(10,10,`Level ${Tt.currentLevel+1}: ${p}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_GOLD_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}),this.cornText=this.add.text(Kt.WIDTH-200,10,`Corn: ${Tt.corn}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_GOLD_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}),this.cornBaseX=Kt.WIDTH-200,this.livesText=this.add.text(Kt.WIDTH-80,10,`Lives: ${Tt.lives}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}),this.livesBaseX=Kt.WIDTH-80,this.speedBtn=this.add.rectangle(Kt.WIDTH-40,bt.PANEL_Y-22,60,24,St.UI_BUTTON,.8),this.speedBtn.setInteractive({useHandCursor:!0}),this.speedBtnText=this.add.text(Kt.WIDTH-40,bt.PANEL_Y-22,"1x",{fontSize:bt.FONT_SIZE_SMALL,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5),this.speedBtn.on("pointerdown",x=>{x.event.stopPropagation(),this.toggleSpeed()}),this.towerPanel=new pE(this),this.waveIndicator=new vE(this),this.onCornChanged=({corn:x})=>{this.cornText.setText(`Corn: ${x}`),this.cornText.setColor(Et.CORN_FLASH_COLOR),this.time.delayedCall(Et.CORN_FLASH_DURATION,()=>{this.cornText&&this.cornText.setColor(St.UI_GOLD_TEXT)}),this.tweens.add({targets:this.cornText,scaleX:ci.SCORE_POP_SCALE,scaleY:ci.SCORE_POP_SCALE,duration:ci.SCORE_POP_DURATION,yoyo:!0,ease:"Quad.easeOut"})},gt.on(mt.CORN_CHANGED,this.onCornChanged),this.onLivesChanged=({lives:x})=>{this.livesText.setText(`Lives: ${x}`),this.livesText.setColor(St.UI_RED_TEXT),this.time.delayedCall(300,()=>{this.livesText&&this.livesText.setColor(x<=5?St.UI_RED_TEXT:St.UI_TEXT)});const M=Et.LIVES_SHAKE;this.tweens.add({targets:this.livesText,x:{from:this.livesBaseX-M.OFFSET,to:this.livesBaseX+M.OFFSET},duration:M.DURATION,yoyo:!0,repeat:M.REPEATS,ease:"Sine.easeInOut",onComplete:()=>{this.livesText&&this.livesText.setX(this.livesBaseX)}})},gt.on(mt.LIVES_CHANGED,this.onLivesChanged),this.events.on("shutdown",()=>{gt.off(mt.CORN_CHANGED,this.onCornChanged),gt.off(mt.LIVES_CHANGED,this.onLivesChanged),this.towerPanel&&this.towerPanel.destroy(),this.waveIndicator&&this.waveIndicator.destroy()})}toggleSpeed(){Tt.gameSpeed===ba.NORMAL?(Tt.gameSpeed=ba.FAST,this.speedBtnText.setText("2x"),this.speedBtn.setFillStyle(St.UI_BUTTON_HOVER,.9)):(Tt.gameSpeed=ba.NORMAL,this.speedBtnText.setText("1x"),this.speedBtn.setFillStyle(St.UI_BUTTON,.8));const p=Et.SPEED_TOGGLE_ROTATION;this.tweens.add({targets:this.speedBtnText,angle:{from:0,to:p.ANGLE},duration:p.DURATION,ease:"Quad.easeOut"}),gt.emit(mt.UI_SPEED_CHANGE,{speed:Tt.gameSpeed})}}class gE extends cs.Scene{constructor(){super("GameOverScene")}create(){const p=Kt.WIDTH/2,x=Kt.HEIGHT/2;gt.emit(mt.MUSIC_GAMEOVER),this.cameras.main.setBackgroundColor(St.GAMEOVER_BG);const M=this.add.graphics();M.fillGradientStyle(3804686,3804686,1705221,1705221,1),M.fillRect(0,0,Kt.WIDTH,Kt.HEIGHT),this.createEmbers();const R=this.add.text(p,x-120,"GAME OVER",{fontSize:bt.FONT_SIZE_TITLE,fontFamily:bt.FONT_FAMILY,color:St.UI_RED_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:4,shadow:{offsetX:2,offsetY:2,color:Et.TEXT_SHADOW_COLOR,blur:Et.TEXT_SHADOW_BLUR,fill:!0}}).setOrigin(.5),w=Et.GAMEOVER_TITLE_SHAKE;this.time.delayedCall(w.DELAY,()=>{this.tweens.add({targets:R,x:{from:p-w.OFFSET,to:p+w.OFFSET},duration:w.DURATION,yoyo:!0,repeat:w.REPEATS,ease:"Sine.easeInOut",onComplete:()=>R.setX(p)})});const v=Et.STATS_FADE_IN,T=[],t=this.add.text(p,x-60,"The barn has been overrun!",{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5).setAlpha(0);T.push(t);const h=_e[Tt.currentLevel]?_e[Tt.currentLevel].name:"Unknown",g=this.add.text(p,x-20,`Level: ${Tt.currentLevel+1} - ${h}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_GOLD_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5).setAlpha(0);T.push(g);const o=this.add.text(p,x+10,`Wave reached: ${Tt.currentWave}/${Tt.totalWaves}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5).setAlpha(0);T.push(o);const a=this.add.text(p,x+40,`Towers placed: ${Tt.towersPlaced.length}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5).setAlpha(0);T.push(a),T.forEach((n,l)=>{this.tweens.add({targets:n,alpha:1,duration:v.DURATION,delay:v.STAGGER_DELAY*(l+1),ease:"Quad.easeOut"})});const r=this.add.rectangle(p-80,x+110,140,44,St.BUTTON,.9);r.setStrokeStyle(2,St.BUTTON_HOVER),r.setInteractive({useHandCursor:!0});const e=this.add.text(p-80,x+110,"RETRY",{fontSize:bt.FONT_SIZE_LARGE,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}).setOrigin(.5);r.on("pointerover",()=>{r.setFillStyle(St.BUTTON_HOVER,1),this.tweens.add({targets:[r,e],scaleX:Et.BUTTON_HOVER_SCALE,scaleY:Et.BUTTON_HOVER_SCALE,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),r.on("pointerout",()=>{r.setFillStyle(St.BUTTON,.9),this.tweens.add({targets:[r,e],scaleX:1,scaleY:1,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),r.on("pointerdown",()=>this.retryLevel());const s=this.add.rectangle(p+80,x+110,140,44,5592405,.9);s.setStrokeStyle(2,7829367),s.setInteractive({useHandCursor:!0});const u=this.add.text(p+80,x+110,"MENU",{fontSize:bt.FONT_SIZE_LARGE,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}).setOrigin(.5);s.on("pointerover",()=>{s.setFillStyle(7829367,1),this.tweens.add({targets:[s,u],scaleX:Et.BUTTON_HOVER_SCALE,scaleY:Et.BUTTON_HOVER_SCALE,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),s.on("pointerout",()=>{s.setFillStyle(5592405,.9),this.tweens.add({targets:[s,u],scaleX:1,scaleY:1,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),s.on("pointerdown",()=>this.goToMenu()),this.cameras.main.fadeIn(ci.FADE_DURATION)}createEmbers(){const p=ri.GAMEOVER_EMBERS;for(let x=0;x<p.COUNT;x++){const M=Math.random()*Kt.WIDTH,R=-20-Math.random()*100,w=p.MIN_SIZE+Math.random()*(p.MAX_SIZE-p.MIN_SIZE),v=p.COLORS[Math.floor(Math.random()*p.COLORS.length)],T=p.MIN_DURATION+Math.random()*(p.MAX_DURATION-p.MIN_DURATION),t=this.add.circle(M,R,w,v,.6);t.setDepth(1),this.tweens.add({targets:t,y:Kt.HEIGHT+20,x:M+(Math.random()-.5)*100,alpha:0,duration:T,delay:Math.random()*2e3,repeat:-1,onRepeat:()=>{t.setPosition(Math.random()*Kt.WIDTH,-20),t.setAlpha(.6)},ease:"Sine.easeIn"})}}retryLevel(){gt.emit(mt.MUSIC_STOP),gt.emit(mt.GAME_RESTART);const p=Tt.currentLevel;Tt.setLevel(p),this.cameras.main.fadeOut(ci.FADE_DURATION,0,0,0,(x,M)=>{M===1&&(this.scene.start("GameScene"),this.scene.launch("UIScene"))})}goToMenu(){gt.emit(mt.MUSIC_STOP),gt.emit(mt.GAME_RESTART),this.cameras.main.fadeOut(ci.FADE_DURATION,0,0,0,(p,x)=>{x===1&&this.scene.start("MenuScene")})}}class xE extends cs.Scene{constructor(){super("LevelCompleteScene")}create(){const p=Kt.WIDTH/2,x=Kt.HEIGHT/2;gt.emit(mt.MUSIC_LEVELCOMPLETE),this.cameras.main.setBackgroundColor(St.LEVELCOMPLETE_BG);const M=this.add.graphics();M.fillGradientStyle(932378,932378,1727018,1727018,1),M.fillRect(0,0,Kt.WIDTH,Kt.HEIGHT),Tt.unlockNextLevel(),this.cameras.main.flash(Et.LEVEL_COMPLETE_FLASH.DURATION,Et.LEVEL_COMPLETE_FLASH.R,Et.LEVEL_COMPLETE_FLASH.G,Et.LEVEL_COMPLETE_FLASH.B);const R=this.add.text(p,x-120,"LEVEL COMPLETE!",{fontSize:bt.FONT_SIZE_TITLE,fontFamily:bt.FONT_FAMILY,color:St.UI_GREEN_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:4,shadow:{offsetX:2,offsetY:2,color:Et.TEXT_SHADOW_COLOR,blur:Et.TEXT_SHADOW_BLUR,fill:!0}}).setOrigin(.5);this.tweens.add({targets:R,scaleX:1.1,scaleY:1.1,duration:600,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.createStarBurst(p,x-120);const w=_e[Tt.currentLevel]?_e[Tt.currentLevel].name:"Unknown",v=Et.STATS_SLIDE_IN,T=[],t=this.add.text(p,x-60,`${w} - Defended!`,{fontSize:bt.FONT_SIZE_LARGE,fontFamily:bt.FONT_FAMILY,color:St.UI_GOLD_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5);T.push(t);const h=this.add.text(p,x-20,`Waves survived: ${Tt.currentWave}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5);T.push(h);const g=this.add.text(p,x+10,`Corn remaining: ${Tt.corn}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_GOLD_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5);T.push(g);const o=this.add.text(p,x+40,`Lives remaining: ${Tt.lives}`,{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,stroke:Et.TEXT_STROKE_COLOR,strokeThickness:1}).setOrigin(.5);T.push(o),T.forEach((u,n)=>{const l=u.x;u.setX(l+v.OFFSET_X),u.setAlpha(0),this.tweens.add({targets:u,x:l,alpha:1,duration:v.DURATION,delay:v.STAGGER_DELAY*(n+1),ease:v.EASE})});const a=Tt.currentLevel+1<_e.length;if(a){const u=this.add.rectangle(p-80,x+110,150,44,St.BUTTON,.9);u.setStrokeStyle(2,St.BUTTON_HOVER),u.setInteractive({useHandCursor:!0});const n=this.add.text(p-80,x+110,"NEXT LEVEL",{fontSize:bt.FONT_SIZE_MEDIUM,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}).setOrigin(.5);u.on("pointerover",()=>{u.setFillStyle(St.BUTTON_HOVER,1),this.tweens.add({targets:[u,n],scaleX:Et.BUTTON_HOVER_SCALE,scaleY:Et.BUTTON_HOVER_SCALE,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),u.on("pointerout",()=>{u.setFillStyle(St.BUTTON,.9),this.tweens.add({targets:[u,n],scaleX:1,scaleY:1,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),u.on("pointerdown",()=>this.nextLevel())}const r=a?p+80:p,e=this.add.rectangle(r,x+110,140,44,5592405,.9);e.setStrokeStyle(2,7829367),e.setInteractive({useHandCursor:!0});const s=this.add.text(r,x+110,"MENU",{fontSize:bt.FONT_SIZE_LARGE,fontFamily:bt.FONT_FAMILY,color:St.UI_TEXT,fontStyle:"bold",stroke:Et.TEXT_STROKE_COLOR,strokeThickness:Et.TEXT_STROKE_THICKNESS}).setOrigin(.5);e.on("pointerover",()=>{e.setFillStyle(7829367,1),this.tweens.add({targets:[e,s],scaleX:Et.BUTTON_HOVER_SCALE,scaleY:Et.BUTTON_HOVER_SCALE,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),e.on("pointerout",()=>{e.setFillStyle(5592405,.9),this.tweens.add({targets:[e,s],scaleX:1,scaleY:1,duration:Et.BUTTON_HOVER_DURATION,ease:"Quad.easeOut"})}),e.on("pointerdown",()=>this.goToMenu()),this.createCelebration(),this.cameras.main.fadeIn(ci.FADE_DURATION)}createStarBurst(p,x){const M=ri.LEVELCOMPLETE_STARBURST;for(let R=0;R<M.COUNT;R++){const w=R/M.COUNT*Math.PI*2,v=M.MIN_SPEED+Math.random()*(M.MAX_SPEED-M.MIN_SPEED),T=Math.cos(w)*v,t=Math.sin(w)*v,h=this.add.circle(p,x,M.SIZE,M.COLOR,.9);h.setDepth(10),this.tweens.add({targets:h,x:p+T*(M.DURATION/1e3),y:x+t*(M.DURATION/1e3),alpha:0,scaleX:.2,scaleY:.2,duration:M.DURATION,ease:"Quad.easeOut",onComplete:()=>h.destroy()})}}createCelebration(){const p=ri.LEVELCOMPLETE_CONFETTI;for(let x=0;x<p.COUNT;x++){const M=Math.random()*Kt.WIDTH,R=-20-Math.random()*200,w=p.COLORS[Math.floor(Math.random()*p.COLORS.length)],v=p.MIN_SIZE+Math.random()*(p.MAX_SIZE-p.MIN_SIZE),T=p.MIN_DURATION+Math.random()*(p.MAX_DURATION-p.MIN_DURATION),t=x%2===0?this.add.circle(M,R,v,w):this.add.rectangle(M,R,v*2,v,w);t.setDepth(5),this.tweens.add({targets:t,y:Kt.HEIGHT+20,x:M+(Math.random()-.5)*200,angle:(Math.random()-.5)*720,alpha:0,duration:T,delay:Math.random()*1500,repeat:-1,onRepeat:()=>{t.setPosition(Math.random()*Kt.WIDTH,-20),t.setAlpha(1),t.setAngle(0)},ease:"Sine.easeIn"})}}nextLevel(){gt.emit(mt.MUSIC_STOP);const p=Tt.currentLevel+1;Tt.setLevel(p),gt.emit(mt.LEVEL_SELECT,{level:p}),gt.emit(mt.GAME_START),this.cameras.main.fadeOut(ci.FADE_DURATION,0,0,0,(x,M)=>{M===1&&(this.scene.start("GameScene"),this.scene.launch("UIScene"))})}goToMenu(){gt.emit(mt.MUSIC_STOP),gt.emit(mt.GAME_RESTART),this.cameras.main.fadeOut(ci.FADE_DURATION,0,0,0,(p,x)=>{x===1&&this.scene.start("MenuScene")})}}const yE={type:cs.AUTO,width:Kt.WIDTH,height:Kt.HEIGHT,parent:"game-container",backgroundColor:1718798,scene:[O3,sE,cE,mE,gE,xE]},Xo="strudel.log";let TE=1e3,Ou,Bu;function Kn(i,p="cyclist"){Ve(`[${p}] error: ${i.message}`)}function Ve(i,p,x={}){let M=performance.now();Ou===i&&M-Bu<TE||(Ou=i,Bu=M,console.log(`%c${i}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(Xo,{detail:{message:i,type:p,data:x}})))}Ve.key=Xo;typeof BigInt>"u"&&(BigInt=function(i){if(isNaN(i))throw new Error("");return i});const Qt=BigInt(0),ne=BigInt(1),bn=BigInt(2),eo=BigInt(5),qe=BigInt(10),CE=2e3,Bt={s:ne,n:Qt,d:ne};function ki(i,p){try{i=BigInt(i)}catch{throw as()}return i*p}function Ti(i){return typeof i=="bigint"?i:Math.floor(i)}function Fe(i,p){if(p===Qt)throw No();const x=Object.create(Pe.prototype);x.s=i<Qt?-ne:ne,i=i<Qt?-i:i;const M=xs(i,p);return x.n=i/M,x.d=p/M,x}function Ws(i){const p={};let x=i,M=bn,R=eo-ne;for(;R<=x;){for(;x%M===Qt;)x/=M,p[M]=(p[M]||Qt)+ne;R+=ne+bn*M++}return x!==i?x>1&&(p[x]=(p[x]||Qt)+ne):p[i]=(p[i]||Qt)+ne,p}const Be=function(i,p){let x=Qt,M=ne,R=ne;if(i!=null)if(p!==void 0){if(typeof i=="bigint")x=i;else{if(isNaN(i))throw as();if(i%1!==0)throw Xu();x=BigInt(i)}if(typeof p=="bigint")M=p;else{if(isNaN(p))throw as();if(p%1!==0)throw Xu();M=BigInt(p)}R=x*M}else if(typeof i=="object"){if("d"in i&&"n"in i)x=BigInt(i.n),M=BigInt(i.d),"s"in i&&(x*=BigInt(i.s));else if(0 in i)x=BigInt(i[0]),1 in i&&(M=BigInt(i[1]));else if(typeof i=="bigint")x=i;else throw as();R=x*M}else if(typeof i=="number"){if(isNaN(i))throw as();if(i<0&&(R=-ne,i=-i),i%1===0)x=BigInt(i);else if(i>0){let w=1,v=0,T=1,t=1,h=1,g=1e7;for(i>=1&&(w=10**Math.floor(1+Math.log10(i)),i/=w);T<=g&&h<=g;){let o=(v+t)/(T+h);if(i===o){T+h<=g?(x=v+t,M=T+h):h>T?(x=t,M=h):(x=v,M=T);break}else i>o?(v+=t,T+=h):(t+=v,h+=T),T>g?(x=t,M=h):(x=v,M=T)}x=BigInt(x)*BigInt(w),M=BigInt(M)}}else if(typeof i=="string"){let w=0,v=Qt,T=Qt,t=Qt,h=ne,g=ne,o=i.replace(/_/g,"").match(/\d+|./g);if(o===null)throw as();if(o[w]==="-"?(R=-ne,w++):o[w]==="+"&&w++,o.length===w+1?T=ki(o[w++],R):o[w+1]==="."||o[w]==="."?(o[w]!=="."&&(v=ki(o[w++],R)),w++,(w+1===o.length||o[w+1]==="("&&o[w+3]===")"||o[w+1]==="'"&&o[w+3]==="'")&&(T=ki(o[w],R),h=qe**BigInt(o[w].length),w++),(o[w]==="("&&o[w+2]===")"||o[w]==="'"&&o[w+2]==="'")&&(t=ki(o[w+1],R),g=qe**BigInt(o[w+1].length)-ne,w+=3)):o[w+1]==="/"||o[w+1]===":"?(T=ki(o[w],R),h=ki(o[w+2],ne),w+=3):o[w+3]==="/"&&o[w+1]===" "&&(v=ki(o[w],R),T=ki(o[w+2],R),h=ki(o[w+4],ne),w+=5),o.length<=w)M=h*g,R=x=t+M*v+g*T;else throw as()}else if(typeof i=="bigint")x=i,R=i,M=ne;else throw as();if(M===Qt)throw No();Bt.s=R<Qt?-ne:ne,Bt.n=x<Qt?-x:x,Bt.d=M<Qt?-M:M};function SE(i,p,x){let M=ne;for(;p>Qt;i=i*i%x,p>>=ne)p&ne&&(M=M*i%x);return M}function ME(i,p){for(;p%bn===Qt;p/=bn);for(;p%eo===Qt;p/=eo);if(p===ne)return Qt;let x=qe%p,M=1;for(;x!==ne;M++)if(x=x*qe%p,M>CE)return Qt;return BigInt(M)}function EE(i,p,x){let M=ne,R=SE(qe,x,p);for(let w=0;w<300;w++){if(M===R)return BigInt(w);M=M*qe%p,R=R*qe%p}return 0}function xs(i,p){if(!i)return p;if(!p)return i;for(;;){if(i%=p,!i)return p;if(p%=i,!p)return i}}function Pe(i,p){if(Be(i,p),this instanceof Pe)i=xs(Bt.d,Bt.n),this.s=Bt.s,this.n=Bt.n/i,this.d=Bt.d/i;else return Fe(Bt.s*Bt.n,Bt.d)}var No=function(){return new Error("Division by Zero")},as=function(){return new Error("Invalid argument")},Xu=function(){return new Error("Parameters must be integer")};Pe.prototype={s:ne,n:Qt,d:ne,abs:function(){return Fe(this.n,this.d)},neg:function(){return Fe(-this.s*this.n,this.d)},add:function(i,p){return Be(i,p),Fe(this.s*this.n*Bt.d+Bt.s*this.d*Bt.n,this.d*Bt.d)},sub:function(i,p){return Be(i,p),Fe(this.s*this.n*Bt.d-Bt.s*this.d*Bt.n,this.d*Bt.d)},mul:function(i,p){return Be(i,p),Fe(this.s*Bt.s*this.n*Bt.n,this.d*Bt.d)},div:function(i,p){return Be(i,p),Fe(this.s*Bt.s*this.n*Bt.d,this.d*Bt.n)},clone:function(){return Fe(this.s*this.n,this.d)},mod:function(i,p){if(i===void 0)return Fe(this.s*this.n%this.d,ne);if(Be(i,p),Qt===Bt.n*this.d)throw No();return Fe(this.s*(Bt.d*this.n)%(Bt.n*this.d),Bt.d*this.d)},gcd:function(i,p){return Be(i,p),Fe(xs(Bt.n,this.n)*xs(Bt.d,this.d),Bt.d*this.d)},lcm:function(i,p){return Be(i,p),Bt.n===Qt&&this.n===Qt?Fe(Qt,ne):Fe(Bt.n*this.n,xs(Bt.n,this.n)*xs(Bt.d,this.d))},inverse:function(){return Fe(this.s*this.d,this.n)},pow:function(i,p){if(Be(i,p),Bt.d===ne)return Bt.s<Qt?Fe((this.s*this.d)**Bt.n,this.n**Bt.n):Fe((this.s*this.n)**Bt.n,this.d**Bt.n);if(this.s<Qt)return null;let x=Ws(this.n),M=Ws(this.d),R=ne,w=ne;for(let v in x)if(v!=="1"){if(v==="0"){R=Qt;break}if(x[v]*=Bt.n,x[v]%Bt.d===Qt)x[v]/=Bt.d;else return null;R*=BigInt(v)**x[v]}for(let v in M)if(v!=="1"){if(M[v]*=Bt.n,M[v]%Bt.d===Qt)M[v]/=Bt.d;else return null;w*=BigInt(v)**M[v]}return Bt.s<Qt?Fe(w,R):Fe(R,w)},log:function(i,p){if(Be(i,p),this.s<=Qt||Bt.s<=Qt)return null;const x={},M=Ws(Bt.n),R=Ws(Bt.d),w=Ws(this.n),v=Ws(this.d);for(const h in R)M[h]=(M[h]||Qt)-R[h];for(const h in v)w[h]=(w[h]||Qt)-v[h];for(const h in M)h!=="1"&&(x[h]=!0);for(const h in w)h!=="1"&&(x[h]=!0);let T=null,t=null;for(const h in x){const g=M[h]||Qt,o=w[h]||Qt;if(g===Qt){if(o!==Qt)return null;continue}let a=o,r=g;const e=xs(a,r);if(a/=e,r/=e,T===null&&t===null)T=a,t=r;else if(a*t!==T*r)return null}return T!==null&&t!==null?Fe(T,t):null},equals:function(i,p){return Be(i,p),this.s*this.n*Bt.d===Bt.s*Bt.n*this.d},lt:function(i,p){return Be(i,p),this.s*this.n*Bt.d<Bt.s*Bt.n*this.d},lte:function(i,p){return Be(i,p),this.s*this.n*Bt.d<=Bt.s*Bt.n*this.d},gt:function(i,p){return Be(i,p),this.s*this.n*Bt.d>Bt.s*Bt.n*this.d},gte:function(i,p){return Be(i,p),this.s*this.n*Bt.d>=Bt.s*Bt.n*this.d},compare:function(i,p){Be(i,p);let x=this.s*this.n*Bt.d-Bt.s*Bt.n*this.d;return(Qt<x)-(x<Qt)},ceil:function(i){return i=qe**BigInt(i||0),Fe(Ti(this.s*i*this.n/this.d)+(i*this.n%this.d>Qt&&this.s>=Qt?ne:Qt),i)},floor:function(i){return i=qe**BigInt(i||0),Fe(Ti(this.s*i*this.n/this.d)-(i*this.n%this.d>Qt&&this.s<Qt?ne:Qt),i)},round:function(i){return i=qe**BigInt(i||0),Fe(Ti(this.s*i*this.n/this.d)+this.s*((this.s>=Qt?ne:Qt)+bn*(i*this.n%this.d)>this.d?ne:Qt),i)},roundTo:function(i,p){Be(i,p);const x=this.n*Bt.d,M=this.d*Bt.n,R=x%M;let w=Ti(x/M);return R+R>=M&&w++,Fe(this.s*w*Bt.n,Bt.d)},divisible:function(i,p){return Be(i,p),!(!(Bt.n*this.d)||this.n*Bt.d%(Bt.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(i){let p=this.n,x=this.d;i=i||15;let M=ME(p,x),R=EE(p,x,M),w=this.s<Qt?"-":"";if(w+=Ti(p/x),p%=x,p*=qe,p&&(w+="."),M){for(let v=R;v--;)w+=Ti(p/x),p%=x,p*=qe;w+="(";for(let v=M;v--;)w+=Ti(p/x),p%=x,p*=qe;w+=")"}else for(let v=i;p&&v--;)w+=Ti(p/x),p%=x,p*=qe;return w},toFraction:function(i){let p=this.n,x=this.d,M=this.s<Qt?"-":"";if(x===ne)M+=p;else{let R=Ti(p/x);i&&R>Qt&&(M+=R,M+=" ",p%=x),M+=p,M+="/",M+=x}return M},toLatex:function(i){let p=this.n,x=this.d,M=this.s<Qt?"-":"";if(x===ne)M+=p;else{let R=Ti(p/x);i&&R>Qt&&(M+=R,p%=x),M+="\\frac{",M+=p,M+="}{",M+=x,M+="}"}return M},toContinued:function(){let i=this.n,p=this.d,x=[];do{x.push(Ti(i/p));let M=i%p;i=p,p=M}while(i!==ne);return x},simplify:function(i){const p=BigInt(1/(i||.001)|0),x=this.abs(),M=x.toContinued();for(let R=1;R<M.length;R++){let w=Fe(M[R-1],ne);for(let T=R-2;T>=0;T--)w=w.inverse().add(M[T]);let v=w.sub(x);if(v.n*p<v.d)return w.mul(this.s)}return this}};const PE=i=>/^[a-gA-G][#bsf]*[0-9]*$/.test(i),Ls=i=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(i),xf=i=>{if(typeof i!="string")return[];const[p,x="",M]=i.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return p?[p,x,M?Number(M):void 0]:[]},AE={c:0,d:2,e:4,f:5,g:7,a:9,b:11},RE={"#":1,b:-1,s:1,f:-1},Vo=i=>i?.split("").reduce((p,x)=>p+RE[x],0)||0,Ii=(i,p=3)=>{const[x,M,R=p]=xf(i);if(!x)throw new Error('not a note: "'+i+'"');const w=AE[x.toLowerCase()],v=Vo(M);return(Number(R)+1)*12+w+v},js=i=>Math.pow(2,(i-69)/12)*440,zo=i=>12*Math.log(i/440)/Math.LN2+69,FE=(i,p)=>{if(typeof i!="object")throw new Error("valueToMidi: expected object value");let{freq:x,note:M}=i;if(typeof x=="number")return zo(x);if(typeof M=="string")return Ii(M);if(typeof M=="number")return M;if(!p)throw new Error("valueToMidi: expected freq or note to be set");return p},LE=(i,p)=>(i-p)*1e3,yf=i=>js(typeof i=="number"?i:Ii(i)),DE=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],wE=i=>{const p=Math.floor(i/12)-1;return DE[i%12]+p},pi=(i,p)=>(i%p+p)%p,Tf=i=>i.reduce((p,x)=>p+x)/i.length;function Cf(i,p=0){return isNaN(Number(i))?(Ve(`"${i}" is not a number, falling back to ${p}`,"warning"),p):i}const GE=(i,p)=>pi(Math.round(Cf(i??0,0)),p),bE=i=>{let{value:p,context:x}=i,M=p;if(typeof M=="object"&&!Array.isArray(M)&&(M=M.note||M.n||M.value,M===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(p)}`);if(typeof M=="number"&&x.type!=="frequency")M=js(i.value);else if(typeof M=="number"&&x.type==="frequency")M=i.value;else if(typeof M!="string"||!Ls(M))throw new Error("not a note: "+JSON.stringify(M));return M},Sf=i=>{let{value:p,context:x}=i;if(typeof p=="object")return p.freq?p.freq:yf(p.note||p.n||p.value);if(typeof p=="number"&&x.type!=="frequency")p=js(i.value);else if(typeof p=="string"&&Ls(p))p=js(Ii(i.value));else if(typeof p!="number")throw new Error("not a note or frequency: "+p);return p},Mf=(i,p)=>i.slice(p).concat(i.slice(0,p)),Ef=(...i)=>i.reduce((p,x)=>(...M)=>p(x(...M)),p=>p),IE=(...i)=>Ef(...i.reverse()),Ds=i=>i.filter(p=>p!=null),ji=i=>[].concat(...i),Hs=i=>i,OE=(i,p)=>i,kn=(i,p)=>Array.from({length:p-i+1},(x,M)=>M+i);function re(i,p,x=i.length){const M=function R(...w){if(w.length>=x)return i.apply(this,w);{const v=function(...T){return R.apply(this,w.concat(T))};return p&&p(v,w),v}};return p&&p(M,[]),M}function Wo(i){const p=Number(i);if(!isNaN(p))return p;if(Ls(i))return Ii(i);throw new Error(`cannot parse as numeral: "${i}"`)}function Zo(i,p){return(...x)=>i(...x.map(p))}function ii(i){return Zo(i,Wo)}function Pf(i){const p=Number(i);if(!isNaN(p))return p;const x={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[i];if(typeof x<"u")return x;throw new Error(`cannot parse as fractional: "${i}"`)}const BE=i=>Zo(i,Pf),Yo=function(i,p){return[p.slice(0,i),p.slice(i)]},Zr=(i,p,x)=>p.map((M,R)=>i(M,x[R])),Af=function(i){const p=[];for(let x=0;x<i.length-1;++x)p.push([i[x],i[x+1]]);return p},Yr=(i,p,x)=>Math.min(Math.max(i,p),x),XE=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],NE=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],VE=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],zE=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],WE=["I","Ro","Ha","Ni","Ho","He","To"],ZE=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],YE=(i,p="letters")=>{const x=(p==="solfeggio"?XE:p==="indian"?NE:p==="german"?VE:p==="byzantine"?zE:p==="japanese"?WE:ZE)[i%12],M=Math.floor(i/12)-1;return x+M};function UE(i){var p={};return i.filter(function(x){return p.hasOwn(x)?!1:p[x]=!0})}function HE(i){return i.sort().filter(function(p,x,M){return!x||p!=M[x-1]})}function Rf(i){return i.sort((p,x)=>p.compare(x)).filter(function(p,x,M){return!x||p.ne(M[x-1])})}function Ff(i){const p=new TextEncoder().encode(i);return btoa(String.fromCharCode(...p))}function Lf(i){const p=new Uint8Array(atob(i).split("").map(x=>x.charCodeAt(0)));return new TextDecoder().decode(p)}function KE(i){return encodeURIComponent(Ff(i))}function kE(i){return Lf(decodeURIComponent(i))}function Df(i,p){return Array.isArray(i)?i.map(p):Object.fromEntries(Object.entries(i).map(([x,M],R)=>[x,p(M,x,R)]))}function io(i,p){return i/p}class wf{constructor({getTargetClockTime:p=jE,weight:x=16,offsetDelta:M=.005,checkAfterTime:R=2,resetAfterTime:w=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=p,this.weight=x,this.offsetDelta=M,this.checkAfterTime=R,this.resetAfterTime=w,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(p){const x=this.getTargetClockTime(),M=x-this.timeAtPrevOffsetSample,R=x-p;if(M>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=R),this.prevOffsetTimes.push(R),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||M>this.checkAfterTime){this.timeAtPrevOffsetSample=x;const w=Tf(this.prevOffsetTimes);Math.abs(w-this.offsetTime)>this.offsetDelta&&(this.offsetTime=w)}return this.offsetTime}calculateTimestamp(p,x){return this.calculateOffset(p)+x}}function JE(){return performance.now()*.001}function jE(){return Date.now()*.001}const Gf=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let xn;function bf(){if(xn==null){if(typeof window>"u")return;xn={},window.addEventListener("keydown",i=>{xn[i.key]=!0}),window.addEventListener("keyup",i=>{xn[i.key]=!1})}return{...xn}}function Uo(i,p=!1){return typeof i=="object"?p?JSON.stringify(i).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(i):i}Pe.prototype.sam=function(){return this.floor()};Pe.prototype.nextSam=function(){return this.sam().add(1)};Pe.prototype.wholeCycle=function(){return new Ge(this.sam(),this.nextSam())};Pe.prototype.cyclePos=function(){return this.sub(this.sam())};Pe.prototype.lt=function(i){return this.compare(i)<0};Pe.prototype.gt=function(i){return this.compare(i)>0};Pe.prototype.lte=function(i){return this.compare(i)<=0};Pe.prototype.gte=function(i){return this.compare(i)>=0};Pe.prototype.eq=function(i){return this.compare(i)==0};Pe.prototype.ne=function(i){return this.compare(i)!=0};Pe.prototype.max=function(i){return this.gt(i)?this:i};Pe.prototype.maximum=function(...i){return i=i.map(p=>new Pe(p)),i.reduce((p,x)=>x.max(p),this)};Pe.prototype.min=function(i){return this.lt(i)?this:i};Pe.prototype.mulmaybe=function(i){return i!==void 0?this.mul(i):void 0};Pe.prototype.divmaybe=function(i){return i!==void 0?this.div(i):void 0};Pe.prototype.addmaybe=function(i){return i!==void 0?this.add(i):void 0};Pe.prototype.submaybe=function(i){return i!==void 0?this.sub(i):void 0};Pe.prototype.show=function(){return this.s*this.n+"/"+this.d};Pe.prototype.or=function(i){return this.eq(0)?i:this};const Ft=i=>Pe(i),QE=(...i)=>{if(i=Ds(i),i.length!==0)return i.reduce((p,x)=>p.gcd(x),Ft(1))},Ei=(...i)=>{if(i=Ds(i),i.length===0)return;const p=i.pop();return i.reduce((x,M)=>x===void 0||M===void 0?void 0:x.lcm(M),p)},$E=i=>i instanceof Pe;Ft._original=Pe;class Ge{constructor(p,x){this.begin=Ft(p),this.end=Ft(x)}get spanCycles(){const p=[];var x=this.begin;const M=this.end,R=M.sam();if(x.equals(M))return[new Ge(x,M)];for(;M.gt(x);){if(x.sam().equals(R)){p.push(new Ge(x,this.end));break}const w=x.nextSam();p.push(new Ge(x,w)),x=w}return p}get duration(){return this.end.sub(this.begin)}cycleArc(){const p=this.begin.cyclePos(),x=p.add(this.duration);return new Ge(p,x)}withTime(p){return new Ge(p(this.begin),p(this.end))}withEnd(p){return new Ge(this.begin,p(this.end))}withCycle(p){const x=this.begin.sam(),M=x.add(p(this.begin.sub(x))),R=x.add(p(this.end.sub(x)));return new Ge(M,R)}intersection(p){const x=this.begin.max(p.begin),M=this.end.min(p.end);if(!x.gt(M)&&!(x.equals(M)&&(x.equals(this.end)&&this.begin.lt(this.end)||x.equals(p.end)&&p.begin.lt(p.end))))return new Ge(x,M)}intersection_e(p){const x=this.intersection(p);if(x==null)throw"TimeSpans do not intersect";return x}midpoint(){return this.begin.add(this.duration.div(Ft(2)))}equals(p){return this.begin.equals(p.begin)&&this.end.equals(p.end)}show(){return this.begin.show()+"  "+this.end.show()}}class Ae{constructor(p,x,M,R={},w=!1){this.whole=p,this.part=x,this.value=M,this.context=R,this.stateful=w,w&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let p;return typeof this.value?.duration=="number"?p=Ft(this.value.duration):p=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?p.mul(this.value.clip):p}get endClipped(){return this.whole.begin.add(this.duration)}isActive(p){return this.whole.begin<=p&&this.endClipped>=p}isInPast(p){return p>this.endClipped}isInNearPast(p,x){return x-p<=this.endClipped}isInFuture(p){return p<this.whole.begin}isInNearFuture(p,x){return x<this.whole.begin&&x>this.whole.begin-p}isWithinTime(p,x){return this.whole.begin<=x&&this.endClipped>=p}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(p){const x=this.whole?p(this.whole):void 0;return new Ae(x,p(this.part),this.value,this.context)}withValue(p){return new Ae(this.whole,this.part,p(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(p){return this.context.tags?.includes(p)}resolveState(p){if(this.stateful&&this.hasOnset()){console.log("stateful");const x=this.value,[M,R]=x(p);return[M,new Ae(this.whole,this.part,R,this.context,!1)]}return[p,this]}spanEquals(p){return this.whole==null&&p.whole==null||this.whole.equals(p.whole)}equals(p){return this.spanEquals(p)&&this.part.equals(p.part)&&this.value===p.value}show(p=!1){const x=typeof this.value=="object"?p?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var M="";if(this.whole==null)M="~"+this.part.show;else{var R=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(M=this.whole.begin.show()+"  "),R||(M+="("),M+=this.part.show(),R||(M+=")"),this.whole.end.equals(this.part.end)||(M+="  "+this.whole.end.show())}return"[ "+M+" | "+x+" ]"}showWhole(p=!1){return`${this.whole==null?"~":this.whole.show()}: ${Uo(this.value,p)}`}combineContext(p){const x=this;return{...x.context,...p.context,locations:(x.context.locations||[]).concat(p.context.locations||[])}}setContext(p){return new Ae(this.whole,this.part,this.value,p)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class Qs{constructor(p,x={}){this.span=p,this.controls=x}setSpan(p){return new Qs(p,this.controls)}withSpan(p){return this.setSpan(p(this.span))}setControls(p){return new Qs(this.span,{...this.controls,...p})}}function qE(i,p,x){if(p?.value!==void 0&&Object.keys(p).length===1)return Ve("[warn]: Can't do arithmetic on control pattern."),i;const M=Object.keys(i).filter(R=>Object.keys(p).includes(R));return Object.assign({},i,p,Object.fromEntries(M.map(R=>[R,x(i[R],p[R])])))}re((i,p)=>i*p);re((i,p)=>p.map(i));function If(i,p=60){let x=0,M=Ft(0),R=[""],w="";for(;R[0].length<p;){const v=i.queryArc(x,x+1),T=v.filter(g=>g.hasOnset()).map(g=>g.duration),t=QE(...T),h=t.inverse();R=R.map(g=>g+"|"),w+="|";for(let g=0;g<h;g++){const[o,a]=[M,M.add(t)],r=v.filter(s=>s.whole.begin.lte(o)&&s.whole.end.gte(a)),e=r.length-R.length;e>0&&(R=R.concat(Array(e).fill(w))),R=R.map((s,u)=>{const n=r[u];if(n){const l=n.whole.begin.eq(o)?""+n.value:"-";return s+l}return s+"."}),w+=".",M=M.add(t)}x++}return R.join(`
`)}const Ho={},Lr=async(...i)=>{const p=await Promise.allSettled(i),x=p.filter(M=>M.status==="fulfilled").map(M=>M.value);return p.forEach((M,R)=>{M.status==="rejected"&&console.warn(`evalScope: module with index ${R} could not be loaded:`,M.reason)}),x.forEach(M=>{Object.entries(M).forEach(([R,w])=>{globalThis[R]=w,Ho[R]=w})}),x};function _E(i,p={}){const{wrapExpression:x=!0,wrapAsync:M=!0}=p;x&&(i=`{${i}}`),M&&(i=`(async ()=>${i})()`);const R=`"use strict";return (${i})`;return Function(R)()}const Of=async(i,p,x)=>{let M={};if(p){const R=p(i,x);i=R.output,M=R}return{mode:"javascript",pattern:await _E(i,{wrapExpression:!!p}),meta:M}};let so,ai=!0;const t5=function(i){ai=!!i},Bf=i=>so=i;let Mt=class Xe{constructor(p,x=void 0){this.query=p,this._Pattern=!0,this._steps=x}get _steps(){return this.__steps}set _steps(p){this.__steps=p===void 0?void 0:Ft(p)}setSteps(p){return this._steps=p,this}withSteps(p){return ai?new Xe(this.query,this._steps===void 0?void 0:p(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(p){const x=new Xe(M=>this.query(M).map(R=>R.withValue(p)));return x._steps=this._steps,x}withState(p){return new Xe(x=>this.query(p(x)))}fmap(p){return this.withValue(p)}appWhole(p,x){const M=this,R=function(w){const v=M.query(w),T=x.query(w),t=function(h,g){const o=h.part.intersection(g.part);if(o!=null)return new Ae(p(h.whole,g.whole),o,h.value(g.value),g.combineContext(h))};return ji(v.map(h=>Ds(T.map(g=>t(h,g)))))};return new Xe(R)}appBoth(p){const x=this,M=function(w,v){if(!(w==null||v==null))return w.intersection_e(v)},R=x.appWhole(M,p);return ai&&(R._steps=Ei(p._steps,x._steps)),R}appLeft(p){const x=this,M=function(w){const v=[];for(const T of x.query(w)){const t=p.query(w.setSpan(T.wholeOrPart()));for(const h of t){const g=T.whole,o=T.part.intersection(h.part);if(o){const a=T.value(h.value),r=h.combineContext(T),e=new Ae(g,o,a,r);v.push(e)}}}return v},R=new Xe(M);return R._steps=this._steps,R}appRight(p){const x=this,M=function(w){const v=[];for(const T of p.query(w)){const t=x.query(w.setSpan(T.wholeOrPart()));for(const h of t){const g=T.whole,o=h.part.intersection(T.part);if(o){const a=h.value(T.value),r=T.combineContext(h),e=new Ae(g,o,a,r);v.push(e)}}}return v},R=new Xe(M);return R._steps=p._steps,R}bindWhole(p,x){const M=this,R=function(w){const v=function(t,h){return new Ae(p(t.whole,h.whole),h.part,h.value,Object.assign({},t.context,h.context,{locations:(t.context.locations||[]).concat(h.context.locations||[])}))},T=function(t){return x(t.value).query(w.setSpan(t.part)).map(h=>v(t,h))};return ji(M.query(w).map(t=>T(t)))};return new Xe(R)}bind(p){const x=function(M,R){if(!(M==null||R==null))return M.intersection_e(R)};return this.bindWhole(x,p)}join(){return this.bind(Hs)}outerBind(p){return this.bindWhole(x=>x,p).setSteps(this._steps)}outerJoin(){return this.outerBind(Hs)}innerBind(p){return this.bindWhole((x,M)=>M,p)}innerJoin(){return this.innerBind(Hs)}resetJoin(p=!1){const x=this;return new Xe(M=>x.discreteOnly().query(M).map(R=>R.value.late(p?R.whole.begin:R.whole.begin.cyclePos()).query(M).map(w=>new Ae(w.whole?w.whole.intersection(R.whole):void 0,w.part.intersection(R.part),w.value).setContext(R.combineContext(w))).filter(w=>w.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const p=this;function x(M){const R=p.discreteOnly().query(M);function w(v){const T=v.value._focusSpan(v.wholeOrPart()).query(M.setSpan(v.part));function t(h,g){let o;if(g.whole&&h.whole&&(o=g.whole.intersection(h.whole),!o))return;const a=g.part.intersection(h.part);if(!a)return;const r=g.combineContext(h);return new Ae(o,a,g.value,r)}return T.map(h=>t(v,h))}return ji(R.map(w)).filter(v=>v)}return new Xe(x)}squeezeBind(p){return this.fmap(p).squeezeJoin()}polyJoin=function(){const p=this;return p.fmap(x=>x.extend(p._steps.div(x._steps))).outerJoin()};polyBind(p){return this.fmap(p).polyJoin()}queryArc(p,x,M={}){try{return this.query(new Qs(new Ge(p,x),M))}catch(R){return Kn(R,"query"),[]}}splitQueries(){const p=this,x=M=>ji(M.span.spanCycles.map(R=>p.query(M.setSpan(R))));return new Xe(x)}withQuerySpan(p){return new Xe(x=>this.query(x.withSpan(p)))}withQuerySpanMaybe(p){const x=this;return new Xe(M=>{const R=M.withSpan(p);return R.span?x.query(R):[]})}withQueryTime(p){return new Xe(x=>this.query(x.withSpan(M=>M.withTime(p))))}withHapSpan(p){return new Xe(x=>this.query(x).map(M=>M.withSpan(p)))}withHapTime(p){return this.withHapSpan(x=>x.withTime(p))}withHaps(p){const x=new Xe(M=>p(this.query(M),M));return x._steps=this._steps,x}withHap(p){return this.withHaps(x=>x.map(p))}setContext(p){return this.withHap(x=>x.setContext(p))}withContext(p){const x=this.withHap(M=>M.setContext(p(M.context)));return this.__pure!==void 0&&(x.__pure=this.__pure,x.__pure_loc=this.__pure_loc),x}stripContext(){return this.withHap(p=>p.setContext({}))}withLoc(p,x){const M={start:p,end:x},R=this.withContext(w=>{const v=(w.locations||[]).concat([M]);return{...w,locations:v}});return this.__pure&&(R.__pure=this.__pure,R.__pure_loc=M),R}filterHaps(p){return new Xe(x=>this.query(x).filter(p))}filterValues(p){return new Xe(x=>this.query(x).filter(M=>p(M.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(p=>p!=null)}onsetsOnly(){return this.filterHaps(p=>p.hasOnset())}discreteOnly(){return this.filterHaps(p=>p.whole)}defragmentHaps(){return this.discreteOnly().withHaps(p=>{const x=[];for(var M=0;M<p.length;++M){for(var R=!0,w=p[M];R;){const t=JSON.stringify(p[M].value);for(var v=!1,T=M+1;T<p.length;T++){const h=p[T];if(w.whole.equals(h.whole)){if(w.part.begin.eq(h.part.end)){if(t===JSON.stringify(h.value)){w=new Ae(w.whole,new Ge(h.part.begin,w.part.end),w.value),p.splice(T,1),v=!0;break}}else if(h.part.begin.eq(w.part.end)&&t==JSON.stringify(h.value)){w=new Ae(w.whole,new Ge(w.part.begin,h.part.end),w.value),p.splice(T,1),v=!0;break}}}R=v}x.push(w)}return x})}firstCycle(p=!1){var x=this;return p||(x=x.stripContext()),x.query(new Qs(new Ge(Ft(0),Ft(1))))}get firstCycleValues(){return this.firstCycle().map(p=>p.value)}get showFirstCycle(){return this.firstCycle().map(p=>`${p.value}: ${p.whole.begin.toFraction()} - ${p.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(p=>p.sort((x,M)=>x.part.begin.sub(M.part.begin).or(x.part.end.sub(M.part.end)).or(x.whole.begin.sub(M.whole.begin).or(x.whole.end.sub(M.whole.end)))))}asNumber(){return this.fmap(Wo)}_opIn(p,x){return this.fmap(x).appLeft(Rt(p))}_opOut(p,x){return this.fmap(x).appRight(Rt(p))}_opMix(p,x){return this.fmap(x).appBoth(Rt(p))}_opSqueeze(p,x){const M=Rt(p);return this.fmap(R=>M.fmap(w=>x(R)(w))).squeezeJoin()}_opSqueezeOut(p,x){const M=this;return Rt(p).fmap(R=>M.fmap(w=>x(w)(R))).squeezeJoin()}_opReset(p,x){return Rt(p).fmap(M=>this.fmap(R=>x(R)(M))).resetJoin()}_opRestart(p,x){return Rt(p).fmap(M=>this.fmap(R=>x(R)(M))).restartJoin()}_opPoly(p,x){const M=Rt(p);return this.fmap(R=>M.fmap(w=>x(w)(R))).polyJoin()}layer(...p){return ye(...p.map(x=>x(this)))}superimpose(...p){return this.stack(...p.map(x=>x(this)))}stack(...p){return ye(this,...p)}sequence(...p){return Fi(this,...p)}seq(...p){return Fi(this,...p)}cat(...p){return In(this,...p)}fastcat(...p){return Ke(this,...p)}slowcat(...p){return ps(this,...p)}onTrigger(p,x=!0){return this.withHap(M=>M.setContext({...M.context,onTrigger:(...R)=>{M.context.onTrigger?.(...R),p(...R)},dominantTrigger:M.context.dominantTrigger||x}))}log(p=M=>`[hap] ${M.showWhole(!0)}`,x=M=>({hap:M})){return this.onTrigger((...M)=>{Ve(p(...M),void 0,x(...M))},!1)}logValues(p=x=>`[hap] ${Uo(x,!0)}`){return this.log(x=>p(x.value))}drawLine(){return console.log(If(this)),this}unjoin(p,x=Hs){return p.withHap(M=>M.withValue(R=>R?x(this.ribbon(M.whole.begin,M.whole.duration)):this))}into(p,x){return this.unjoin(p,x).innerJoin()}};function e5(i,p){let x=[];return p.forEach(M=>{const R=x.findIndex(([w])=>i(M,w));R===-1?x.push([M]):x[R].push(M)}),x}const i5=(i,p)=>i.spanEquals(p);Mt.prototype.collect=function(){return this.withHaps(i=>e5(i5,i).map(p=>new Ae(p[0].whole,p[0].part,p,{})))};const s5=ct("arpWith",(i,p)=>p.collect().fmap(x=>Rt(i(x))).innerJoin().withHap(x=>new Ae(x.whole,x.part,x.value.value,x.combineContext(x.value)))),n5=ct("arp",(i,p)=>p.arpWith(x=>Rt(i).fmap(M=>x[M%x.length])),!1);function dr(i){return!Array.isArray(i)&&typeof i=="object"&&!$E(i)}function r5(i,p,x){return dr(i)||dr(p)?(dr(i)||(i={value:i}),dr(p)||(p={value:p}),qE(i,p,x)):x(i,p)}(function(){const i={set:[(x,M)=>M],keep:[x=>x],keepif:[(x,M)=>M?x:void 0],add:[ii((x,M)=>x+M)],sub:[ii((x,M)=>x-M)],mul:[ii((x,M)=>x*M)],div:[ii((x,M)=>x/M)],mod:[ii(pi)],pow:[ii(Math.pow)],log2:[ii(Math.log2)],band:[ii((x,M)=>x&M)],bor:[ii((x,M)=>x|M)],bxor:[ii((x,M)=>x^M)],blshift:[ii((x,M)=>x<<M)],brshift:[ii((x,M)=>x>>M)],lt:[(x,M)=>x<M],gt:[(x,M)=>x>M],lte:[(x,M)=>x<=M],gte:[(x,M)=>x>=M],eq:[(x,M)=>x==M],eqt:[(x,M)=>x===M],ne:[(x,M)=>x!=M],net:[(x,M)=>x!==M],and:[(x,M)=>x&&M],or:[(x,M)=>x||M],func:[(x,M)=>M(x)]},p=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[x,[M,R]]of Object.entries(i)){Mt.prototype["_"+x]=function(w){return this.fmap(v=>M(v,w))},Object.defineProperty(Mt.prototype,x,{get:function(){const w=this,v=(...T)=>w[x].in(...T);for(const T of p)v[T.toLowerCase()]=function(...t){var h=w;t=Fi(t),R&&(h=R(h),t=R(t));var g;return x==="keepif"?(g=h["_op"+T](t,o=>a=>M(o,a)),g=g.removeUndefineds()):g=h["_op"+T](t,o=>a=>r5(o,a,M)),g};return v.squeezein=v.squeeze,v}});for(const w of p)Mt.prototype[w.toLowerCase()]=function(...v){return this.set[w.toLowerCase()](v)}}Mt.prototype.struct=function(...x){return this.keepif.out(...x)},Mt.prototype.structAll=function(...x){return this.keep.out(...x)},Mt.prototype.mask=function(...x){return this.keepif.in(...x)},Mt.prototype.maskAll=function(...x){return this.keep.in(...x)},Mt.prototype.reset=function(...x){return this.keepif.reset(...x)},Mt.prototype.resetAll=function(...x){return this.keep.reset(...x)},Mt.prototype.restart=function(...x){return this.keepif.restart(...x)},Mt.prototype.restartAll=function(...x){return this.keep.restart(...x)}})();const a5=ye,o5=ye,h5=Ur,sn=i=>new Mt(()=>[],i),xe=sn(1),Ri=sn(0);function Se(i){function p(M){return M.span.spanCycles.map(R=>new Ae(Ft(R.begin).wholeCycle(),R,i))}const x=new Mt(p,1);return x.__pure=i,x}function Ko(i){return i instanceof Mt||i?._Pattern}function Rt(i){return Ko(i)?i:so&&typeof i=="string"?so(i):Se(i)}function Xf(i){let p=Se([]);for(const x of i)p=p.bind(M=>x.fmap(R=>M.concat([R])));return p}function ye(...i){i=i.map(M=>Array.isArray(M)?Fi(...M):Rt(M));const p=M=>ji(i.map(R=>R.query(M))),x=new Mt(p);return ai&&(x._steps=Ei(...i.map(M=>M._steps))),x}function ko(i,p){if(p=p.map(w=>Array.isArray(w)?Fi(...w):Rt(w)),p.length===0)return xe;if(p.length===1)return p[0];const[x,...M]=p.map(w=>w._steps),R=ai?x.maximum(...M):void 0;return ye(...i(R,p))}function Nf(...i){return ko((p,x)=>x.map(M=>M._steps.eq(p)?M:ti(M,sn(p.sub(M._steps)))),i)}function Vf(...i){return ko((p,x)=>x.map(M=>M._steps.eq(p)?M:ti(sn(p.sub(M._steps)),M)),i)}function zf(...i){return ko((p,x)=>x.map(M=>{if(M._steps.eq(p))return M;const R=sn(p.sub(M._steps).div(2));return ti(R,M,R)}),i)}function u5(i,...p){const[x,...M]=p.map(v=>v._steps),R=x.maximum(...M),w={centre:zf,left:Nf,right:Vf,expand:ye,repeat:(...v)=>Ur(...v).steps(R)};return i.inhabit(w).fmap(v=>v(...p)).innerJoin().setSteps(R)}function ps(...i){if(i=i.map(M=>Array.isArray(M)?Ke(...M):Rt(M)),i.length==1)return i[0];const p=function(M){const R=M.span,w=pi(R.begin.sam(),i.length),v=i[w];if(!v)return[];const T=R.begin.floor().sub(R.begin.div(i.length).floor());return v.withHapTime(t=>t.add(T)).query(M.setSpan(R.withTime(t=>t.sub(T))))},x=ai?Ei(...i.map(M=>M._steps)):void 0;return new Mt(p).splitQueries().setSteps(x)}function Jo(...i){i=i.map(Rt);const p=function(x){const M=Math.floor(x.span.begin)%i.length;return i[M]?.query(x)||[]};return new Mt(p).splitQueries()}function In(...i){return ps(...i)}function l5(...i){const p=i.reduce((x,[M])=>x+M,0);return i=i.map(([x,M])=>[x,M.fast(x)]),ti(...i).slow(p)}function f5(...i){let p=Ft(0);for(let x of i)x.length==2&&x.unshift(p),p=x[1];return ye(...i.map(([x,M,R])=>Se(Rt(R)).compress(Ft(x).div(p),Ft(M).div(p)))).slow(p).innerJoin()}function Ke(...i){let p=ps(...i);return i.length>1&&(p=p._fast(i.length),p._steps=i.length),i.length==1&&i[0].__steps_source&&(i._steps=i[0]._steps),p}function Fi(...i){return Ke(...i)}function Wf(...i){return Ke(...i)}function no(i){return Array.isArray(i)?i.length==0?[xe,0]:i.length==1?no(i[0]):[Ke(...i.map(p=>no(p)[0])),i.length]:[Rt(i),1]}const d5=re((i,p)=>Rt(p).mask(i)),c5=re((i,p)=>Rt(p).struct(i)),p5=re((i,p)=>Rt(p).superimpose(...i)),v5=re((i,p)=>Rt(p).withValue(i)),m5=re((i,p)=>Rt(p).bind(i)),g5=re((i,p)=>Rt(p).innerBind(i)),x5=re((i,p)=>Rt(p).outerBind(i)),y5=re((i,p)=>Rt(p).squeezeBind(i)),T5=re((i,p)=>Rt(p).stepBind(i)),C5=re((i,p)=>Rt(p).polyBind(i)),S5=re((i,p)=>Rt(p).set(i)),M5=re((i,p)=>Rt(p).keep(i)),E5=re((i,p)=>Rt(p).keepif(i)),P5=re((i,p)=>Rt(p).add(i)),A5=re((i,p)=>Rt(p).sub(i)),R5=re((i,p)=>Rt(p).mul(i)),F5=re((i,p)=>Rt(p).div(i)),L5=re((i,p)=>Rt(p).mod(i)),D5=re((i,p)=>Rt(p).pow(i)),w5=re((i,p)=>Rt(p).band(i)),G5=re((i,p)=>Rt(p).bor(i)),b5=re((i,p)=>Rt(p).bxor(i)),I5=re((i,p)=>Rt(p).blshift(i)),O5=re((i,p)=>Rt(p).brshift(i)),B5=re((i,p)=>Rt(p).lt(i)),X5=re((i,p)=>Rt(p).gt(i)),N5=re((i,p)=>Rt(p).lte(i)),V5=re((i,p)=>Rt(p).gte(i)),z5=re((i,p)=>Rt(p).eq(i)),W5=re((i,p)=>Rt(p).eqt(i)),Z5=re((i,p)=>Rt(p).ne(i)),Y5=re((i,p)=>Rt(p).net(i)),U5=re((i,p)=>Rt(p).and(i)),H5=re((i,p)=>Rt(p).or(i)),K5=re((i,p)=>Rt(p).func(i));function ct(i,p,x=!0,M=!1,R=w=>w.innerJoin()){if(Array.isArray(i)){const t={};for(const h of i)t[h]=ct(h,p,x,M,R);return t}const w=p.length;var v;x?v=function(...t){t=t.map(Rt);const h=t[t.length-1];let g;if(w===1)g=p(h);else{const o=t.slice(0,-1);if(o.every(a=>a.__pure!=null)){const a=o.map(e=>e.__pure),r=o.filter(e=>e.__pure_loc).map(e=>e.__pure_loc);g=p(...a,h),g=g.withContext(e=>{const s=(e.locations||[]).concat(r);return{...e,locations:s}})}else{const[a,...r]=o;let e=(...s)=>p(...s,h);e=re(e,null,w-1),g=R(r.reduce((s,u)=>s.appLeft(u),a.fmap(e)))}}return M&&(g._steps=h._steps),g}:v=function(...t){t=t.map(Rt);const h=p(...t);return M&&(h._steps=t[t.length-1]._steps),h},Mt.prototype[i]=function(...t){if(w===2&&t.length!==1)t=[Fi(...t)];else if(w!==t.length+1)throw new Error(`.${i}() expects ${w-1} inputs but got ${t.length}.`);return t=t.map(Rt),v(...t,this)},w>1&&(Mt.prototype["_"+i]=function(...t){const h=p(...t,this);return M&&h.setSteps(this._steps),h});const T=re(v,null,w);return Ho[i]=T,T}function nn(i,p,x=!0,M=!1,R=w=>w.stepJoin()){return ct(i,p,x,M,R)}const k5=ct("round",function(i){return i.asNumber().fmap(p=>Math.round(p))}),J5=ct("floor",function(i){return i.asNumber().fmap(p=>Math.floor(p))}),j5=ct("ceil",function(i){return i.asNumber().fmap(p=>Math.ceil(p))}),Q5=ct("toBipolar",function(i){return i.fmap(p=>p*2-1)}),$5=ct("fromBipolar",function(i){return i.fmap(p=>(p+1)/2)}),q5=ct("range",function(i,p,x){return x.mul(p-i).add(i)}),_5=ct("rangex",function(i,p,x){return x._range(Math.log(i),Math.log(p)).fmap(Math.exp)}),t4=ct("range2",function(i,p,x){return x.fromBipolar()._range(i,p)}),e4=ct("ratio",i=>i.fmap(p=>Array.isArray(p)?p.slice(1).reduce((x,M)=>x/M,p[0]):p)),i4=ct("compress",function(i,p,x){return i=Ft(i),p=Ft(p),i.gt(p)||i.gt(1)||p.gt(1)||i.lt(0)||p.lt(0)?xe:x._fastGap(Ft(1).div(p.sub(i)))._late(i)}),{compressSpan:s4,compressspan:n4}=ct(["compressSpan","compressspan"],function(i,p){return p._compress(i.begin,i.end)}),{fastGap:r4,fastgap:a4}=ct(["fastGap","fastgap"],function(i,p){const x=function(R){const w=R.begin.sam(),v=R.begin.sub(w).mul(i).min(1),T=R.end.sub(w).mul(i).min(1);if(!(v>=1))return new Ge(w.add(v),w.add(T))},M=function(R){const w=R.part.begin,v=R.part.end,T=w.sam(),t=w.sub(T).div(i).min(1),h=v.sub(T).div(i).min(1),g=new Ge(T.add(t),T.add(h)),o=R.whole?new Ge(g.begin.sub(w.sub(R.whole.begin).div(i)),g.end.add(R.whole.end.sub(v).div(i))):void 0;return new Ae(o,g,R.value,R.context)};return p.withQuerySpanMaybe(x).withHap(M).splitQueries()}),o4=ct("focus",function(i,p,x){return i=Ft(i),p=Ft(p),x._early(i.sam())._fast(Ft(1).div(p.sub(i)))._late(i)}),{focusSpan:h4,focusspan:u4}=ct(["focusSpan","focusspan"],function(i,p){return p._focus(i.begin,i.end)}),l4=ct("ply",function(i,p){const x=p.fmap(M=>Se(M)._fast(i)).squeezeJoin();return ai&&(x._steps=Ft(i).mulmaybe(p._steps)),x}),{fast:f4,density:TO}=ct(["fast","density"],function(i,p){return i===0?xe:(i=Ft(i),p.withQueryTime(x=>x.mul(i)).withHapTime(x=>x.div(i)).setSteps(p._steps))},!0,!0),d4=ct("hurry",function(i,p){return p._fast(i).mul(Se({speed:i}))}),{slow:c4,sparsity:p4}=ct(["slow","sparsity"],function(i,p){return i===0?xe:p._fast(Ft(1).div(i))}),v4=ct("inside",function(i,p,x){return p(x._slow(i))._fast(i)}),m4=ct("outside",function(i,p,x){return p(x._fast(i))._slow(i)}),g4=ct("lastOf",function(i,p,x){const M=Array(i-1).fill(x);return M.push(p(x)),Jo(...M)}),{firstOf:x4,every:y4}=ct(["firstOf","every"],function(i,p,x){const M=Array(i-1).fill(x);return M.unshift(p(x)),Jo(...M)}),T4=ct("apply",function(i,p){return i(p)}),C4=ct("cpm",function(i,p){return p._fast(i/60/1)}),S4=ct("early",function(i,p){return i=Ft(i),p.withQueryTime(x=>x.add(i)).withHapTime(x=>x.sub(i))},!0,!0),Zf=ct("late",function(i,p){return i=Ft(i),p._early(Ft(0).sub(i))},!0,!0),M4=ct("zoom",function(i,p,x){if(p=Ft(p),i=Ft(i),i.gte(p))return Ri;const M=p.sub(i),R=ai?x._steps?.mulmaybe(M):void 0;return x.withQuerySpan(w=>w.withCycle(v=>v.mul(M).add(i))).withHapSpan(w=>w.withCycle(v=>v.sub(i).div(M))).splitQueries().setSteps(R)}),{zoomArc:E4,zoomarc:P4}=ct(["zoomArc","zoomarc"],function(i,p){return p.zoom(i.begin,i.end)}),A4=ct("bite",(i,p,x)=>p.fmap(M=>R=>{const w=Ft(M).div(R).mod(1),v=w.add(Ft(1).div(R));return x.zoom(w,v)}).appLeft(i).squeezeJoin(),!1),R4=ct("linger",function(i,p){return i==0?xe:i<0?p._zoom(i.add(1),1)._slow(i):p._zoom(0,i)._slow(i)},!0,!0),{segment:F4,seg:L4}=ct(["segment","seg"],function(i,p){return p.struct(Se(!0)._fast(i)).setSteps(i)}),D4=ct("swingBy",(i,p,x)=>x.inside(p,Zf(Wf(0,i/2)))),w4=ct("swing",(i,p)=>p.swingBy(1/3,i)),{invert:G4,inv:b4}=ct(["invert","inv"],function(i){return i.fmap(p=>!p)},!0,!0),I4=ct("when",function(i,p,x){return i?p(x):x}),O4=ct("off",function(i,p,x){return ye(x,p(x.late(i)))}),B4=ct("brak",function(i){return i.when(ps(!1,!0),p=>Ke(p,xe)._late(.25))}),Yf=ct("rev",function(i){const p=function(x){const M=x.span,R=M.begin.sam(),w=M.begin.nextSam(),v=function(T){const t=T.withTime(g=>R.add(w.sub(g))),h=t.begin;return t.begin=t.end,t.end=h,t};return i.query(x.setSpan(v(M))).map(T=>T.withSpan(v))};return new Mt(p).splitQueries()},!1,!0),X4=ct("revv",function(i){const p=x=>new Ge(Ft(0).sub(x.end),Ft(0).sub(x.begin));return i.withQuerySpan(p).withHapSpan(p)}),N4=ct("pressBy",function(i,p){return p.fmap(x=>Se(x).compress(i,1)).squeezeJoin()}),V4=ct("press",function(i){return i._pressBy(.5)});Mt.prototype.hush=function(){return xe};const z4=ct("palindrome",function(i){return i.lastOf(2,Yf)},!0,!0),{juxBy:W4,juxby:Z4}=ct(["juxBy","juxby"],function(i,p,x){i/=2;const M=function(v,T,t){return T in v?v[T]:t},R=x.withValue(v=>Object.assign({},v,{pan:M(v,"pan",.5)-i})),w=p(x.withValue(v=>Object.assign({},v,{pan:M(v,"pan",.5)+i})));return ye(R,w).setSteps(ai?Ei(R._steps,w._steps):void 0)}),Y4=ct("jux",function(i,p){return p._juxBy(1,i,p)}),{echoWith:U4,echowith:H4,stutWith:K4,stutwith:k4}=ct(["echoWith","echowith","stutWith","stutwith"],function(i,p,x,M){return ye(...kn(0,i-1).map(R=>x(M.late(Ft(p).mul(R)),R)))}),J4=ct("echo",function(i,p,x,M){return M._echoWith(i,p,(R,w)=>R.gain(Math.pow(x,w)))}),j4=ct("stut",function(i,p,x,M){return M._echoWith(i,x,(R,w)=>R.gain(Math.pow(p,w)))}),Uf=ct("applyN",function(i,p,x){let M=x;for(let R=0;R<i;R++)M=p(M);return M}),Q4=ct(["plyWith","plywith"],function(i,p,x){const M=x.fmap(R=>In(...kn(0,i-1).map(w=>Uf(w,p,R)))._fast(i)).squeezeJoin();return ai&&(M._steps=Ft(i).mulmaybe(x._steps)),M}),$4=ct(["plyForEach","plyforeach"],function(i,p,x){const M=x.fmap(R=>In(In(Se(R),...kn(1,i-1).map(w=>p(Se(R),w))))._fast(i)).squeezeJoin();return ai&&(M._steps=Ft(i).mulmaybe(x._steps)),M}),jo=function(i,p,x=!1){return i=Ft(i),ps(...kn(0,i.sub(1)).map(M=>x?p.late(Ft(M).div(i)):p.early(Ft(M).div(i))))},q4=ct("iter",function(i,p){return jo(i,p,!1)},!0,!0),{iterBack:_4,iterback:t9}=ct(["iterBack","iterback"],function(i,p){return jo(i,p,!0)},!0,!0),{repeatCycles:e9}=ct("repeatCycles",function(i,p){return new Mt(function(x){const M=x.span.begin.sam(),R=M.div(i).sam(),w=M.sub(R);return x=x.withSpan(v=>v.withTime(T=>T.sub(w))),p.query(x).map(v=>v.withSpan(T=>T.withTime(t=>t.add(w))))}).splitQueries()},!0,!0),Qo=function(i,p,x,M=!1,R=!1){const w=Array(i-1).fill(!1);w.unshift(!0);const v=jo(i,Fi(...w),!M);return R||(x=x.repeatCycles(i)),x.when(v,p)},{chunk:i9,slowchunk:s9,slowChunk:n9}=ct(["chunk","slowchunk","slowChunk"],function(i,p,x){return Qo(i,p,x,!1,!1)},!0,!0),{chunkBack:r9,chunkback:a9}=ct(["chunkBack","chunkback"],function(i,p,x){return Qo(i,p,x,!0)},!0,!0),{fastchunk:o9,fastChunk:h9}=ct(["fastchunk","fastChunk"],function(i,p,x){return Qo(i,p,x,!1,!0)},!0,!0),{chunkinto:u9,chunkInto:l9}=ct(["chunkinto","chunkInto"],function(i,p,x){return x.into(Ke(!0,...Array(i-1).fill(!1))._iterback(i),p)}),{chunkbackinto:f9,chunkBackInto:d9}=ct(["chunkbackinto","chunkBackInto"],function(i,p,x){return x.into(Ke(!0,...Array(i-1).fill(!1))._iter(i)._early(1),p)}),c9=ct("bypass",function(i,p){return i=!!parseInt(i),i?xe:p},!0,!0),{ribbon:p9,rib:v9}=ct(["ribbon","rib"],(i,p,x)=>x.early(i).restart(Se(1).slow(p))),m9=ct("hsla",(i,p,x,M,R)=>R.color(`hsla(${i}turn,${p*100}%,${x*100}%,${M})`)),g9=ct("hsl",(i,p,x,M)=>M.color(`hsl(${i}turn,${p*100}%,${x*100}%)`));Mt.prototype.tag=function(i){return this.withContext(p=>({...p,tags:(p.tags||[]).concat([i])}))};const x9=ct("filter",(i,p)=>p.withHaps(x=>x.filter(i))),y9=ct("filterWhen",(i,p)=>p.filter(x=>i(x.whole.begin))),T9=ct("within",(i,p,x,M)=>ye(x(M.filterWhen(R=>R.cyclePos()>=i&&R.cyclePos()<=p)),M.filterWhen(R=>R.cyclePos()<i||R.cyclePos()>p)));Mt.prototype.stepJoin=function(){const i=this,p=ti(...ro(ao(i.queryArc(0,1))))._steps,x=function(M){const R=i.early(M.span.begin.sam()).query(M.setSpan(new Ge(Ft(0),Ft(1))));return ti(...ro(ao(R))).query(M)};return new Mt(x,p)};Mt.prototype.stepBind=function(i){return this.fmap(i).stepJoin()};function ro(i){const p=i.filter((w,v)=>v.hasSteps).reduce((w,v)=>w.add(v),Ft(0)),x=Ds(i.map((w,v)=>v._steps)).reduce((w,v)=>w.add(v),Ft(0)),M=p.eq(0)?void 0:x.div(p);function R(w,v){return v._steps===void 0?[w.mulmaybe(M),v]:[v._steps,v]}return i.map(w=>R(...w))}function ao(i){const p=ji(i.map(M=>[M.part.begin,M.part.end])),x=Rf([Ft(0),Ft(1),...p]);return Af(x).map(M=>[M[1].sub(M[0]),ye(...Hf(new Ge(...M),i).map(R=>R.value.withHap(w=>w.setContext(w.combineContext(R)))))])}function Hf(i,p){return Ds(p.map(x=>Kf(i,x)))}function Kf(i,p){const x=i.intersection(p.part);if(x!=null)return new Ae(p.whole,x,p.value,p.context)}const kf=ct("pace",function(i,p){return p._steps===void 0?p:p._steps.eq(Ft(0))?Ri:p._fast(Ft(i).div(p._steps)).setSteps(i)});function Jf(i,...p){const x=p.map(R=>no(R));if(x.length==0)return xe;i==0&&(i=x[0][1]);const M=[];for(const R of x)R[1]!=0&&(i==R[1]?M.push(R[0]):M.push(R[0]._fast(Ft(i).div(Ft(R[1])))));return ye(...M)}function Ur(...i){if(Array.isArray(i[0]))return Jf(0,...i);if(i=i.filter(M=>M.hasSteps),i.length==0)return xe;const p=Ei(...i.map(M=>M._steps));if(p.eq(Ft(0)))return Ri;const x=ye(...i.map(M=>M.pace(p)));return x._steps=p,x}function ti(...i){if(i.length===0)return Ri;const p=v=>Array.isArray(v)?v:[v._steps??1,v];if(i=i.map(p),i.find(v=>v[0]===void 0)){const v=i.map(t=>t[0]).filter(t=>t!==void 0);if(v.length===0)return Ke(...i.map(t=>t[1]));if(v.length===i.length)return Ri;const T=v.reduce((t,h)=>t.add(h),Ft(0)).div(v.length);for(let t of i)t[0]===void 0&&(t[0]=T)}if(i.length==1)return Rt(i[0][1]).withSteps(v=>i[0][0]);const x=i.map(v=>v[0]).reduce((v,T)=>v.add(T),Ft(0));let M=Ft(0);const R=[];for(const[v,T]of i){if(Ft(v).eq(0))continue;const t=M.add(v);R.push(Rt(T)._compress(M.div(x),t.div(x))),M=t}const w=ye(...R);return w._steps=x,w}function jf(...i){i=i.map(R=>Array.isArray(R)?R.map(Rt):[Rt(R)]);const p=Ei(...i.map(R=>Ft(R.length)));let x=[];for(let R=0;R<p;++R)x.push(...i.map(w=>w.length==0?xe:w[R%w.length]));x=x.filter(R=>R.hasSteps&&R._steps>0);const M=x.reduce((R,w)=>R.add(w._steps),Ft(0));return x=ti(...x),x._steps=M,x}const Qf=nn("take",function(i,p){if(!p.hasSteps||p._steps.lte(0)||(i=Ft(i),i.eq(0)))return Ri;const x=i<0;x&&(i=i.abs());const M=i.div(p._steps);return M.lte(0)?Ri:M.gte(1)?p:x?p.zoom(Ft(1).sub(M),1):p.zoom(0,M)}),$f=nn("drop",function(i,p){return p.hasSteps?(i=Ft(i),i.lt(0)?p.take(p._steps.add(i)):p.take(Ft(0).sub(p._steps.sub(i)))):Ri}),qf=nn("extend",function(i,p){return p.fast(i).expand(i)}),C9=nn("replicate",function(i,p){return p.repeatCycles(i).fast(i).expand(i)}),_f=nn("expand",function(i,p){return p.withSteps(x=>x.mul(Ft(i)))}),td=nn("contract",function(i,p){return p.withSteps(x=>x.div(Ft(i)))});Mt.prototype.shrinklist=function(i){const p=this;if(!p.hasSteps)return[p];let[x,M]=Array.isArray(i)?i:[i,p._steps];if(x=Ft(x),M===0||x===0)return[p];const R=x>0,w=[];if(R){const v=Ft(1).div(p._steps).mul(x);for(let T=0;T<M;++T){const t=v.mul(T);if(t.gt(1))break;w.push([t,1])}}else{x=Ft(0).sub(x);const v=Ft(1).div(p._steps).mul(x);for(let T=0;T<M;++T){const t=Ft(1).sub(v.mul(T));if(t.lt(0))break;w.push([Ft(0),t])}}return w.map(v=>p.zoom(...v))};const ed=(i,p)=>p.shrinklist(i),id=ct("shrink",function(i,p){if(!p.hasSteps)return Ri;const x=p.shrinklist(i),M=ti(...x);return M._steps=x.reduce((R,w)=>R.add(w._steps),Ft(0)),M},!0,!1,i=>i.stepJoin()),S9=ct("grow",function(i,p){if(!p.hasSteps)return Ri;const x=p.shrinklist(Ft(0).sub(i));x.reverse();const M=ti(...x);return M._steps=x.reduce((R,w)=>R.add(w._steps),Ft(0)),M},!0,!1,i=>i.stepJoin()),sd=function(i,...p){return i.tour(...p)};Mt.prototype.tour=function(...i){return ti(...[].concat(...i.map((p,x)=>[...i.slice(0,i.length-x),this,...i.slice(i.length-x)]),this,...i))};const nd=function(...i){i=i.filter(M=>M.hasSteps);const p=ps(...i.map(M=>M._slow(M._steps))),x=Ei(...i.map(M=>M._steps));return p._fast(x).setSteps(x)},M9=ti,$o=ti,E9=ti,P9=jf,A9=Ur;Mt.prototype.s_polymeter=Mt.prototype.polymeter;const R9=id;Mt.prototype.s_taper=Mt.prototype.shrink;const F9=ed;Mt.prototype.s_taperlist=Mt.prototype.shrinklist;const L9=Qf;Mt.prototype.s_add=Mt.prototype.take;const D9=$f;Mt.prototype.s_sub=Mt.prototype.drop;const w9=_f;Mt.prototype.s_expand=Mt.prototype.expand;const G9=qf;Mt.prototype.s_extend=Mt.prototype.extend;const b9=td;Mt.prototype.s_contract=Mt.prototype.contract;const I9=sd;Mt.prototype.s_tour=Mt.prototype.tour;const O9=nd;Mt.prototype.s_zip=Mt.prototype.zip;const B9=kf;Mt.prototype.steps=Mt.prototype.pace;const X9=ct("chop",function(i,p){const x=Array.from({length:i},(w,v)=>v).map(w=>({begin:w/i,end:(w+1)/i})),M=function(w,v){if("begin"in w&&"end"in w&&w.begin!==void 0&&w.end!==void 0){const T=w.end-w.begin;v={begin:w.begin+v.begin*T,end:w.begin+v.end*T}}return Object.assign({},w,v)},R=function(w){return Fi(x.map(v=>M(w,v)))};return p.squeezeBind(R).setSteps(ai?Ft(i).mulmaybe(p._steps):void 0)}),N9=ct("striate",function(i,p){const x=Array.from({length:i},(R,w)=>w).map(R=>({begin:R/i,end:(R+1)/i})),M=ps(...x);return p.set(M)._fast(i).setSteps(ai?Ft(i).mulmaybe(p._steps):void 0)}),rd=function(i,p,x=.5){return p.speed(1/i*x).unit("c").slow(i)},ad=ct("slice",function(i,p,x){return i.innerBind(M=>p.outerBind(R=>x.outerBind(w=>{w=w instanceof Object?w:{s:w};const v=Array.isArray(M)?M[R]:R/M,T=Array.isArray(M)?M[R+1]:(R+1)/M;return Se({begin:v,end:T,_slices:M,...w})}))).setSteps(p._steps)},!1);Mt.prototype.onTriggerTime=function(i){return this.onTrigger((p,x,M,R)=>{const w=R-x;window.setTimeout(()=>{i(p)},w*1e3)},!1)};const V9=ct("splice",function(i,p,x){const M=ad(i,p,x);return new Mt(R=>{const w=R.controls._cps||1;return M.query(R).map(v=>v.withValue(T=>({speed:w/T._slices/v.whole.duration*(T.speed||1),unit:"c",...T})))}).setSteps(p._steps)},!1),{loopAt:z9,loopat:W9}=ct(["loopAt","loopat"],function(i,p){const x=p._steps?p._steps.div(i):void 0;return new Mt(M=>rd(i,p,M.controls._cps).query(M),x)}),Z9=ct("fit",i=>i.withHaps((p,x)=>p.map(M=>M.withValue(R=>{const w=("end"in R?R.end:1)-("begin"in R?R.begin:0);return{...R,speed:(x.controls._cps||1)/M.whole.duration*w,unit:"c"}})))),{loopAtCps:Y9,loopatcps:U9}=ct(["loopAtCps","loopatcps"],function(i,p,x){return rd(i,x,p)}),H9=i=>Se(1).withValue(()=>Rt(i())).innerJoin();let Nu=i=>i<.5?1:1-(i-.5)/.5,od=(i,p,x)=>{p=Rt(p),i=Rt(i),x=Rt(x);let M=p.fmap(w=>({gain:Nu(w)})),R=p.fmap(w=>({gain:Nu(1-w)}));return ye(i.mul(M),x.mul(R))};Mt.prototype.xfade=function(i,p){return od(this,i,p)};const K9=i=>(p,x,M)=>{p=Ft(p).mod(x),x=Ft(x);const R=p.div(x),w=p.add(1).div(x);return i(M.fmap(v=>Se(v)._compress(R,w)))},{beat:k9}=ct(["beat"],K9(i=>i.innerJoin())),qo=(i,p,x)=>{x=Ft(x);const M=Ft(1).div(i.length),R=T=>{const t=[];for(const[h,g]of T.entries())g&&t.push([Ft(h).div(T.length),g]);return t},w=Zr(([T,t],[h,g])=>{const o=x.mul(h-T).add(T),a=o.add(M);return new Ge(o,a)},R(i),R(p));function v(T){const t=T.span.begin.sam(),h=T.span.cycleArc(),g=[];for(const o of w){const a=o.intersection(h);a!==void 0&&g.push(new Ae(o.withTime(r=>r.add(t)),a.withTime(r=>r.add(t)),!0))}return g}return new Mt(v).splitQueries()},J9=(i,p,x)=>(i=Rt(i),p=Rt(p),x=Rt(x),i.innerBind(M=>p.innerBind(R=>x.innerBind(w=>qo(M,R,w))))),vs=function(i){const p=function(x,M){const R=Rt(x).fmap(w=>Array.isArray(w)?[...w,i]:[w,1,i]);return M?M.distort(R):Se({}).distort(R)};return Mt.prototype[i]=function(x){return p(x,this)},p},j9=vs("soft"),Q9=vs("hard"),$9=vs("cubic"),q9=vs("diode"),_9=vs("asym"),tP=vs("fold"),eP=vs("sinefold"),iP=vs("chebyshev"),_o=i=>{let p=Se(re((...x)=>x,null,i.length));for(const x of i)p=p.appBoth(Rt(x));return p},Hr=i=>Array.isArray(i)?_o(i):Rt(i);Mt.prototype.partials=function(i){return this.withValue(p=>x=>({...p,partials:x})).appLeft(Hr(i))};const sP=i=>Hr(i).as("partials");Mt.prototype.phases=function(i){return this.withValue(p=>x=>({...p,phases:x})).appLeft(Hr(i))};const nP=i=>Hr(i).as("phases");Mt.prototype.FX=function(...i){return i=i.map(Rt),this.withValue(p=>x=>{const M=p.FX??[];return{...p,FX:M.concat(x)}}).appLeft(_o(i))};const rP=i=>{let p=Se(re((...x)=>x,null,i.length));for(const x of i)p=p.appLeft(x);return p};Mt.prototype.worklet=function(i,...p){return p=p.map(Rt),this.outerBind(x=>rP(p).withValue(M=>{const R=x.workletInputs??[];return{...x,workletSrc:i,workletInputs:R.concat(M)}}))};const aP=(...i)=>Se({}).worklet(...i);function Kr(i){let p=Array.isArray(i);i=p?i:[i];const x=i[0],M=w=>{let v;if(typeof w=="object"&&w.value!==void 0&&(v={...w},w=w.value,delete v.value),p&&Array.isArray(w)){const T=v||{};return w.forEach((t,h)=>{h<i.length&&(T[i[h]]=t)}),T}else return v?(v[x]=w,v):{[x]:w}},R=function(w,v){return v?typeof w>"u"?v.fmap(M):v.set(Rt(w).withValue(M)):Rt(w).withValue(M)};return Mt.prototype[x]=function(w){return R(w,this)},R}const On=new Map;function hd(i){return On.has(i)}function nt(i,...p){const x=Array.isArray(i)?i[0]:i;let M={};return M[x]=Kr(i),On.set(x,x),p.forEach(R=>{M[R]=M[x],On.set(R,x),Mt.prototype[R]=Mt.prototype[x]}),M}function zi(i,p,...x){i=Array.isArray(i)?i:[i];let M={};for(let R=1;R<=p;R++){let w=[...x],v=[...i];if(R===1){const t=w.map(g=>`${g}1`),h=v.map(g=>`${g}1`);w=w.concat(t).concat(h)}else w=w.map(t=>`${t}${R}`),v=v.map(t=>`${t}${R}`);const T=nt(v,...w);M={...M,...T}}return M}const{s:th,sound:ud}=nt(["s","n","gain"],"sound"),{wt:ld,wavetablePosition:fd}=nt("wt","wavetablePosition"),{wtenv:dd}=nt("wtenv"),{wtattack:cd,wtatt:pd}=nt("wtattack","wtatt"),{wtdecay:vd,wtdec:md}=nt("wtdecay","wtdec"),{wtsustain:gd,wtsus:xd}=nt("wtsustain","wtsus"),{wtrelease:yd,wtrel:Td}=nt("wtrelease","wtrel"),{wtrate:Cd}=nt("wtrate"),{wtsync:Sd}=nt("wtsync"),{wtdepth:Md}=nt("wtdepth"),{wtshape:Ed}=nt("wtshape"),{wtdc:Pd}=nt("wtdc"),{wtskew:Ad}=nt("wtskew"),{warp:Rd,wavetableWarp:Fd}=nt("warp","wavetableWarp"),{warpattack:Ld,warpatt:Dd}=nt("warpattack","warpatt"),{warpdecay:wd,warpdec:Gd}=nt("warpdecay","warpdec"),{warpsustain:bd,warpsus:Id}=nt("warpsustain","warpsus"),{warprelease:Od,warprel:Bd}=nt("warprelease","warprel"),{warprate:Xd}=nt("warprate"),{warpdepth:Nd}=nt("warpdepth"),{warpshape:Vd}=nt("warpshape"),{warpdc:zd}=nt("warpdc"),{warpskew:Wd}=nt("warpskew"),{warpmode:Zd,wavetableWarpMode:Yd}=nt("warpmode","wavetableWarpMode"),{wtphaserand:Ud,wavetablePhaseRand:Hd}=nt("wtphaserand","wavetablePhaseRand"),{warpenv:Kd}=nt("warpenv"),{warpsync:kd}=nt("warpsync"),{source:Jd,src:jd}=nt("source","src"),{n:Qd}=nt("n"),{note:Ne}=nt(["note","n"]),{accelerate:$d}=nt("accelerate"),{velocity:qd,vel:_d}=nt("velocity","vel"),{gain:tc}=nt("gain"),{postgain:ec}=nt("postgain"),{amp:ic}=nt("amp"),{attack:sc,att:nc}=nt("attack","att"),{fmh:rc,fmh1:ac,fmh2:oc,fmh3:hc,fmh4:uc,fmh5:lc,fmh6:fc,fmh7:dc,fmh8:cc}=zi(["fmh","fmi"],8,"fmh"),{fmi:pc,fmi1:vc,fmi2:mc,fmi3:gc,fmi4:xc,fmi5:yc,fmi6:Tc,fmi7:Cc,fmi8:Sc,fm:Mc,fm1:Ec,fm2:Pc,fm3:Ac,fm4:Rc,fm5:Fc,fm6:Lc,fm7:Dc,fm8:wc}=zi(["fmi","fmh"],8,"fm"),{fmenv:Gc,fmenv1:bc,fmenv2:Ic,fmenv3:Oc,fmenv4:Bc,fmenv5:Xc,fmenv6:Nc,fmenv7:Vc,fmenv8:zc}=zi("fmenv",8),{fmattack:Wc,fmattack1:Zc,fmattack2:Yc,fmattack3:Uc,fmattack4:Hc,fmattack5:Kc,fmattack6:kc,fmattack7:Jc,fmattack8:jc,fmatt:Qc,fmatt1:$c,fmatt2:qc,fmatt3:_c,fmatt4:t0,fmatt5:e0,fmatt6:i0,fmatt7:s0,fmatt8:n0}=zi("fmattack",8,"fmatt"),{fmwave:r0,fmwave1:a0,fmwave2:o0,fmwave3:h0,fmwave4:u0,fmwave5:l0,fmwave6:f0,fmwave7:d0,fmwave8:c0}=zi("fmwave",8),{fmdecay:p0,fmdecay1:v0,fmdecay2:m0,fmdecay3:g0,fmdecay4:x0,fmdecay5:y0,fmdecay6:T0,fmdecay7:C0,fmdecay8:S0,fmdec:M0,fmdec1:E0,fmdec2:P0,fmdec3:A0,fmdec4:R0,fmdec5:F0,fmdec6:L0,fmdec7:D0,fmdec8:w0}=zi("fmdecay",8,"fmdec"),{fmsustain:G0,fmsustain1:b0,fmsustain2:I0,fmsustain3:O0,fmsustain4:B0,fmsustain5:X0,fmsustain6:N0,fmsustain7:V0,fmsustain8:z0,fmsus:W0,fmsus1:Z0,fmsus2:Y0,fmsus3:U0,fmsus4:H0,fmsus5:K0,fmsus6:k0,fmsus7:J0,fmsus8:j0}=zi("fmsustain",8,"fmsus"),{fmrelease:Q0,fmrelease1:$0,fmrelease2:q0,fmrelease3:_0,fmrelease4:tp,fmrelease5:ep,fmrelease6:ip,fmrelease7:sp,fmrelease8:np,fmrel:rp,fmrel1:ap,fmrel2:op,fmrel3:hp,fmrel4:up,fmrel5:lp,fmrel6:fp,fmrel7:dp,fmrel8:cp}=zi("fmrelease",8,"fmrel");for(let i=0;i<=8;i++)for(let p=0;p<=8;p++)nt(`fmi${i}${p}`,`fm${i}${p}`);const{bank:pp}=nt("bank"),{chorus:vp}=nt("chorus"),{analyze:mp}=nt("analyze"),{fft:gp}=nt("fft"),{decay:xp,dec:yp}=nt("decay","dec"),{sustain:Tp,sus:Cp}=nt("sustain","sus"),{release:Sp,rel:Mp}=nt("release","rel"),{hold:Ep}=nt("hold"),{bandf:Pp,bpf:Ap,bp:Rp}=nt(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:Fp,bpq:Lp}=nt("bandq","bpq"),{begin:Dp}=nt("begin"),{end:wp}=nt("end"),{loop:Gp}=nt("loop"),{loopBegin:bp,loopb:Ip}=nt("loopBegin","loopb"),{loopEnd:Op,loope:Bp}=nt("loopEnd","loope"),{crush:Xp}=nt("crush"),{coarse:Np}=nt("coarse"),{tremolo:Vp,trem:zp}=nt(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync:Wp}=nt(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth:Zp}=nt("tremolodepth","tremdepth"),{tremoloskew:Yp}=nt("tremoloskew","tremskew"),{tremolophase:Up}=nt("tremolophase","tremphase"),{tremoloshape:Hp}=nt("tremoloshape","tremshape"),{drive:Kp}=nt("drive"),{duck:kp}=nt("duckorbit","duck"),{duckdepth:Jp}=nt("duckdepth"),{duckonset:jp}=nt("duckonset","duckons"),{duckattack:Qp}=nt("duckattack","duckatt"),{byteBeatExpression:$p,bbexpr:qp}=nt("byteBeatExpression","bbexpr"),{byteBeatStartTime:_p,bbst:tv}=nt("byteBeatStartTime","bbst"),{channels:ev,ch:iv}=nt("channels","ch"),{pw:sv}=nt(["pw","pwrate","pwsweep"]),{pwrate:nv}=nt("pwrate"),{pwsweep:rv}=nt("pwsweep"),{phaserrate:av,ph:ov,phaser:hv}=nt(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:uv,phs:lv}=nt("phasersweep","phs"),{phasercenter:fv,phc:dv}=nt("phasercenter","phc"),{phaserdepth:cv,phd:pv,phasdp:vv}=nt("phaserdepth","phd","phasdp"),{channel:mv}=nt("channel"),{cut:gv}=nt("cut"),{cutoff:xv,ctf:yv,lpf:Tv,lp:Cv}=nt(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:Sv,lpe:Mv}=nt("lpenv","lpe"),{hpenv:Ev,hpe:Pv}=nt("hpenv","hpe"),{bpenv:Av,bpe:Rv}=nt("bpenv","bpe"),{lpattack:Fv,lpa:Lv}=nt("lpattack","lpa"),{hpattack:Dv,hpa:wv}=nt("hpattack","hpa"),{bpattack:Gv,bpa:bv}=nt("bpattack","bpa"),{lpdecay:Iv,lpd:Ov}=nt("lpdecay","lpd"),{hpdecay:Bv,hpd:Xv}=nt("hpdecay","hpd"),{bpdecay:Nv,bpd:Vv}=nt("bpdecay","bpd"),{lpsustain:zv,lps:Wv}=nt("lpsustain","lps"),{hpsustain:Zv,hps:Yv}=nt("hpsustain","hps"),{bpsustain:Uv,bps:Hv}=nt("bpsustain","bps"),{lprelease:Kv,lpr:kv}=nt("lprelease","lpr"),{hprelease:Jv,hpr:jv}=nt("hprelease","hpr"),{bprelease:Qv,bpr:$v}=nt("bprelease","bpr"),{ftype:qv}=nt("ftype"),{fanchor:_v}=nt("fanchor"),{lprate:tm}=nt("lprate"),{lpsync:em}=nt("lpsync"),{lpdepth:im}=nt("lpdepth"),{lpdepthfrequency:sm,lpdepthfreq:nm}=nt("lpdepthfrequency","lpdepthfreq"),{lpshape:rm}=nt("lpshape"),{lpdc:am}=nt("lpdc"),{lpskew:om}=nt("lpskew"),{bprate:hm}=nt("bprate"),{bpsync:um}=nt("bpsync"),{bpdepth:lm}=nt("bpdepth"),{bpdepthfrequency:fm,bpdepthfreq:dm}=nt("bpdepthfrequency","bpdepthfreq"),{bpshape:cm}=nt("bpshape"),{bpdc:pm}=nt("bpdc"),{bpskew:vm}=nt("bpskew"),{hprate:mm}=nt("hprate"),{hpsync:gm}=nt("hpsync"),{hpdepth:xm}=nt("hpdepth"),{hpdepthfrequency:ym,hpdepthfreq:Tm}=nt("hpdepthfrequency","hpdepthfreq"),{hpshape:Cm}=nt("hpshape"),{hpdc:Sm}=nt("hpdc"),{hpskew:Mm}=nt("hpskew"),{vib:Em,vibrato:Pm,v:Am}=nt(["vib","vibmod"],"vibrato","v"),{noise:Rm}=nt("noise"),{vibmod:Fm,vmod:Lm}=nt(["vibmod","vib"],"vmod"),{hcutoff:Dm,hpf:wm,hp:Gm}=nt(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:bm,hpq:Im}=nt("hresonance","hpq"),{resonance:Om,lpq:Bm}=nt("resonance","lpq"),{djf:Xm}=nt("djf"),{delay:Nm}=nt(["delay","delaytime","delayfeedback"]),{delayfeedback:Vm,delayfb:zm,dfb:Wm}=nt("delayfeedback","delayfb","dfb"),{delayspeed:Zm}=nt("delayspeed"),{delaytime:Ym,delayt:Um,dt:Hm}=nt("delaytime","delayt","dt"),{delaysync:Km}=nt("delaysync"),{lock:km}=nt("lock"),{detune:Jm,det:jm}=nt("detune","det"),{unison:Qm}=nt("unison"),{spread:$m}=nt("spread"),{dry:qm}=nt("dry"),{fadeTime:_m,fadeOutTime:t1}=nt("fadeTime","fadeOutTime"),{fadeInTime:e1}=nt("fadeInTime"),{freq:i1}=nt("freq"),{pattack:s1,patt:n1}=nt("pattack","patt"),{pdecay:r1,pdec:a1}=nt("pdecay","pdec"),{psustain:o1,psus:h1}=nt("psustain","psus"),{prelease:u1,prel:l1}=nt("prelease","prel"),{penv:f1}=nt("penv"),{pcurve:d1}=nt("pcurve"),{panchor:c1}=nt("panchor"),{gate:p1,gat:v1}=nt("gate","gat"),{leslie:m1}=nt("leslie"),{lrate:g1}=nt("lrate"),{lsize:x1}=nt("lsize"),{activeLabel:y1}=nt("activeLabel"),{label:T1}=nt(["label","activeLabel"]),{degree:C1}=nt("degree"),{mtranspose:S1}=nt("mtranspose"),{ctranspose:M1}=nt("ctranspose"),{harmonic:E1}=nt("harmonic"),{stepsPerOctave:P1}=nt("stepsPerOctave"),{octaveR:A1}=nt("octaveR"),{nudge:R1}=nt("nudge"),{octave:F1,oct:L1}=nt("octave","oct"),{orbit:D1}=nt("orbit","o"),{bus:w1}=nt("bus"),{busgain:G1,bgain:b1}=nt("busgain","bgain"),{overgain:I1}=nt("overgain"),{overshape:O1}=nt("overshape"),{pan:B1}=nt("pan"),{panspan:X1}=nt("panspan"),{pansplay:N1}=nt("pansplay"),{panwidth:V1}=nt("panwidth"),{panorient:z1}=nt("panorient"),{slide:W1}=nt("slide"),{semitone:Z1}=nt("semitone"),{voice:Y1}=nt("voice"),{chord:U1}=nt("chord"),{dictionary:H1,dict:K1}=nt("dictionary","dict"),{anchor:k1}=nt("anchor"),{offset:J1}=nt("offset"),{octaves:j1}=nt("octaves"),{mode:Q1}=nt(["mode","anchor"]),{room:$1}=nt(["room","size"]),{roomlp:q1,rlp:_1}=nt("roomlp","rlp"),{roomdim:tg,rdim:eg}=nt("roomdim","rdim"),{roomfade:ig,rfade:sg}=nt("roomfade","rfade"),{ir:ng,iresponse:rg}=nt(["ir","i"],"iresponse"),{irspeed:ag}=nt("irspeed"),{irbegin:og}=nt("irbegin"),{roomsize:hg,size:ug,sz:lg,rsize:fg}=nt("roomsize","size","sz","rsize"),{shape:dg}=nt(["shape","shapevol"]),{distort:cg,dist:pg}=nt(["distort","distortvol","distorttype"],"dist"),{distortvol:vg}=nt("distortvol","distvol"),{distorttype:mg}=nt("distorttype","disttype"),{compressor:gg}=nt(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:xg}=nt("compressorKnee"),{compressorRatio:yg}=nt("compressorRatio"),{compressorAttack:Tg}=nt("compressorAttack"),{compressorRelease:Cg}=nt("compressorRelease"),{speed:eh}=nt("speed"),{stretch:Sg}=nt("stretch"),{unit:Mg}=nt("unit"),{squiz:Eg}=nt("squiz"),{vowel:Pg}=nt("vowel"),{waveloss:Ag}=nt("waveloss"),{density:oP}=nt("density"),{expression:Rg}=nt("expression"),{sustainpedal:Fg}=nt("sustainpedal"),{fshift:Lg}=nt("fshift"),{fshiftnote:Dg}=nt("fshiftnote"),{fshiftphase:wg}=nt("fshiftphase"),{triode:Gg}=nt("triode"),{krush:bg}=nt("krush"),{kcutoff:Ig}=nt("kcutoff"),{octer:Og}=nt("octer"),{octersub:Bg}=nt("octersub"),{octersubsub:Xg}=nt("octersubsub"),{ring:Ng}=nt("ring"),{ringf:Vg}=nt("ringf"),{ringdf:zg}=nt("ringdf"),{freeze:Wg}=nt("freeze"),{xsdelay:Zg}=nt("xsdelay"),{tsdelay:Yg}=nt("tsdelay"),{real:Ug}=nt("real"),{imag:Hg}=nt("imag"),{enhance:Kg}=nt("enhance"),{comb:kg}=nt("comb"),{smear:Jg}=nt("smear"),{scram:jg}=nt("scram"),{binshift:Qg}=nt("binshift"),{hbrick:$g}=nt("hbrick"),{lbrick:qg}=nt("lbrick"),{frameRate:_g}=nt("frameRate"),{frames:tx}=nt("frames"),{hours:ex}=nt("hours"),{minutes:ix}=nt("minutes"),{seconds:sx}=nt("seconds"),{songPtr:nx}=nt("songPtr"),{uid:rx}=nt("uid"),{val:ax}=nt("val"),{cps:ox}=nt("cps"),{clip:hx,legato:ux}=nt("clip","legato"),{duration:lx,dur:fx}=nt("duration","dur"),{zrand:dx}=nt("zrand"),{curve:cx}=nt("curve"),{deltaSlide:px}=nt("deltaSlide"),{pitchJump:vx}=nt("pitchJump"),{pitchJumpTime:mx}=nt("pitchJumpTime"),{znoise:gx}=nt("znoise"),{zmod:xx}=nt("zmod"),{zcrush:yx}=nt("zcrush"),{zdelay:Tx}=nt("zdelay"),{zzfx:Cx}=nt("zzfx"),{color:Sx,colour:Mx}=nt(["color","colour"]);let ih=(...i)=>i.reduce((p,x)=>Object.assign(p,{[x]:Kr(x)}),{});const Ex=ct("adsr",(i,p)=>{i=Array.isArray(i)?i:[i];const[x,M,R,w]=i;return p.set({attack:x,decay:M,sustain:R,release:w})}),Px=ct("ad",(i,p)=>{i=Array.isArray(i)?i:[i];const[x,M=x]=i;return p.attack(x).decay(M)}),Ax=ct("ds",(i,p)=>{i=Array.isArray(i)?i:[i];const[x,M=0]=i;return p.set({decay:x,sustain:M})}),Rx=ct("ar",(i,p)=>{i=Array.isArray(i)?i:[i];const[x,M=x]=i;return p.set({attack:x,release:M})}),{midichan:Fx}=nt("midichan"),{midimap:Lx}=nt("midimap"),{midiport:Dx}=nt("midiport"),{midicmd:wx}=nt("midicmd"),Gx=ct("control",(i,p)=>{if(!Array.isArray(i))throw new Error("control expects an array of [ccn, ccv]");const[x,M]=i;return p.ccn(x).ccv(M)}),{ccn:bx}=nt("ccn"),{ccv:Ix}=nt("ccv"),{ctlNum:Ox}=nt("ctlNum"),{nrpnn:Bx}=nt("nrpnn"),{nrpv:Xx}=nt("nrpv"),{progNum:Nx}=nt("progNum"),Vx=ct("sysex",(i,p)=>{if(!Array.isArray(i))throw new Error("sysex expects an array of [id, data]");const[x,M]=i;return p.sysexid(x).sysexdata(M)}),{sysexid:zx}=nt("sysexid"),{sysexdata:Wx}=nt("sysexdata"),{midibend:Zx}=nt("midibend"),{miditouch:Yx}=nt("miditouch"),{polyTouch:Ux}=nt("polyTouch"),{oschost:Hx}=nt("oschost"),{oscport:Kx}=nt("oscport"),Bn=i=>On.has(i)?On.get(i):i,kx=ct("as",(i,p)=>(i=Array.isArray(i)?i:[i],p.fmap(x=>{x=Array.isArray(x)?x:[x];const M=[];for(let R=0;R<i.length;++R)x[R]!==void 0&&M.push([Bn(i[R]),x[R]]);return Object.fromEntries(M)}))),Jx=ct("scrub",(i,p)=>i.outerBind(x=>{Array.isArray(x)||(x=[x]);const[M,R=1]=x;return p.begin(M).mul(eh(R)).clip(1)}),!1),oo=new Map,hP=(i,p,...x)=>{const M=oo.get(i)??new Map,R=new Set([p,...x]);for(const w of R)M.set(String(w).toLowerCase(),p);oo.set(i,M)},sh=(i,p=[])=>{for(const[x,...M]of p)hP(i,x,...M)},uP=(i,p)=>{const x=oo.get(i);return x?x.get(String(p).toLowerCase())??p:p};sh("lfo",[["control","c"],["subControl","sc"],["rate","r"],["depth","dep","dr"],["depthabs","da"],["dcoffset","dc"],["shape","sh"],["skew","sk"],["curve","cu"],["sync","s"],["fxi"]]);sh("env",[["control","c"],["subControl","sc"],["attack","att","a"],["decay","dec","d"],["sustain","sus","s"],["release","rel","r"],["depth","dep","dr"],["depthabs","da"],["acurve","ac"],["dcurve","dc"],["rcurve","rc"],["fxi"]]);sh("bmod",[["bus","b"],["control","c"],["subControl","sc"],["depth","dep","dr"],["depthabs","da"],["dc"],["fxi"]]);Mt.prototype.modulate=function(i,p,x){p={control:void 0,...p};const M=["lfo","env","bmod"];if(!M.includes(i))return Ve(`[core] Modulation type ${i} not found. Please use one of 'lfo', 'env', 'bmod'`),this;let R=this,w;R=R.fmap(v=>T=>({v,id:T})).appLeft(Rt(x));for(const[v,T]of Object.entries(p)){const t=uP(i,v),h=Rt(T);R=R.fmap(({v:g,id:o})=>a=>{if(w===void 0){let e=Bn(Object.keys(g).at(-1));M.includes(e)&&(e=`${e}_${[...g[e].__ids].at(-1)}`),w=e}g[i]??={__ids:new Set};const r=g[i];return o??=r.__ids.size,r[o]??={control:w},r.__ids.add(o),a===void 0?{v:g,id:o}:(t==="control"||t==="subControl"?r[o][t]=Bn(a):r[o][t]=a,{v:g,id:o})}).appLeft(h)}return R.fmap(({v})=>v)};Mt.prototype.lfo=function(i,p){return this.modulate("lfo",i,p)};const jx=i=>Se({}).lfo(i);Mt.prototype.env=function(i,p){return this.modulate("env",i,p)};const Qx=i=>Se({}).env(i);Mt.prototype.bmod=function(i,p){return this.modulate("bmod",i,p)};const $x=i=>Se({}).bmod(i),{transient:qx}=nt(["transient","transsustain"]),{FXrelease:_x,FXrel:ty,FXr:ey,fxr:iy}=nt("FXrelease","FXrel","FXr","fxr"),lP=Object.freeze(Object.defineProperty({__proto__:null,FXr:ey,FXrel:ty,FXrelease:_x,accelerate:$d,activeLabel:y1,ad:Px,adsr:Ex,amp:ic,analyze:mp,anchor:k1,ar:Rx,as:kx,att:nc,attack:sc,bandf:Pp,bandq:Fp,bank:pp,bbexpr:qp,bbst:tv,begin:Dp,bgain:b1,binshift:Qg,bmod:$x,bp:Rp,bpa:bv,bpattack:Gv,bpd:Vv,bpdc:pm,bpdecay:Nv,bpdepth:lm,bpdepthfreq:dm,bpdepthfrequency:fm,bpe:Rv,bpenv:Av,bpf:Ap,bpq:Lp,bpr:$v,bprate:hm,bprelease:Qv,bps:Hv,bpshape:cm,bpskew:vm,bpsustain:Uv,bpsync:um,bus:w1,busgain:G1,byteBeatExpression:$p,byteBeatStartTime:_p,ccn:bx,ccv:Ix,ch:iv,channel:mv,channels:ev,chord:U1,chorus:vp,clip:hx,coarse:Np,color:Sx,colour:Mx,comb:kg,compressor:gg,compressorAttack:Tg,compressorKnee:xg,compressorRatio:yg,compressorRelease:Cg,control:Gx,cps:ox,createParam:Kr,createParams:ih,crush:Xp,ctf:yv,ctlNum:Ox,ctranspose:M1,curve:cx,cut:gv,cutoff:xv,dec:yp,decay:xp,degree:C1,delay:Nm,delayfb:zm,delayfeedback:Vm,delayspeed:Zm,delaysync:Km,delayt:Um,delaytime:Ym,deltaSlide:px,density:oP,det:jm,detune:Jm,dfb:Wm,dict:K1,dictionary:H1,dist:pg,distort:cg,distorttype:mg,distortvol:vg,djf:Xm,drive:Kp,dry:qm,ds:Ax,dt:Hm,duck:kp,duckattack:Qp,duckdepth:Jp,duckonset:jp,dur:fx,duration:lx,end:wp,enhance:Kg,env:Qx,expression:Rg,fadeInTime:e1,fadeOutTime:t1,fadeTime:_m,fanchor:_v,fft:gp,fm:Mc,fm1:Ec,fm2:Pc,fm3:Ac,fm4:Rc,fm5:Fc,fm6:Lc,fm7:Dc,fm8:wc,fmatt:Qc,fmatt1:$c,fmatt2:qc,fmatt3:_c,fmatt4:t0,fmatt5:e0,fmatt6:i0,fmatt7:s0,fmatt8:n0,fmattack:Wc,fmattack1:Zc,fmattack2:Yc,fmattack3:Uc,fmattack4:Hc,fmattack5:Kc,fmattack6:kc,fmattack7:Jc,fmattack8:jc,fmdec:M0,fmdec1:E0,fmdec2:P0,fmdec3:A0,fmdec4:R0,fmdec5:F0,fmdec6:L0,fmdec7:D0,fmdec8:w0,fmdecay:p0,fmdecay1:v0,fmdecay2:m0,fmdecay3:g0,fmdecay4:x0,fmdecay5:y0,fmdecay6:T0,fmdecay7:C0,fmdecay8:S0,fmenv:Gc,fmenv1:bc,fmenv2:Ic,fmenv3:Oc,fmenv4:Bc,fmenv5:Xc,fmenv6:Nc,fmenv7:Vc,fmenv8:zc,fmh:rc,fmh1:ac,fmh2:oc,fmh3:hc,fmh4:uc,fmh5:lc,fmh6:fc,fmh7:dc,fmh8:cc,fmi:pc,fmi1:vc,fmi2:mc,fmi3:gc,fmi4:xc,fmi5:yc,fmi6:Tc,fmi7:Cc,fmi8:Sc,fmrel:rp,fmrel1:ap,fmrel2:op,fmrel3:hp,fmrel4:up,fmrel5:lp,fmrel6:fp,fmrel7:dp,fmrel8:cp,fmrelease:Q0,fmrelease1:$0,fmrelease2:q0,fmrelease3:_0,fmrelease4:tp,fmrelease5:ep,fmrelease6:ip,fmrelease7:sp,fmrelease8:np,fmsus:W0,fmsus1:Z0,fmsus2:Y0,fmsus3:U0,fmsus4:H0,fmsus5:K0,fmsus6:k0,fmsus7:J0,fmsus8:j0,fmsustain:G0,fmsustain1:b0,fmsustain2:I0,fmsustain3:O0,fmsustain4:B0,fmsustain5:X0,fmsustain6:N0,fmsustain7:V0,fmsustain8:z0,fmwave:r0,fmwave1:a0,fmwave2:o0,fmwave3:h0,fmwave4:u0,fmwave5:l0,fmwave6:f0,fmwave7:d0,fmwave8:c0,frameRate:_g,frames:tx,freeze:Wg,freq:i1,fshift:Lg,fshiftnote:Dg,fshiftphase:wg,ftype:qv,fxr:iy,gain:tc,gat:v1,gate:p1,getControlName:Bn,harmonic:E1,hbrick:$g,hcutoff:Dm,hold:Ep,hours:ex,hp:Gm,hpa:wv,hpattack:Dv,hpd:Xv,hpdc:Sm,hpdecay:Bv,hpdepth:xm,hpdepthfreq:Tm,hpdepthfrequency:ym,hpe:Pv,hpenv:Ev,hpf:wm,hpq:Im,hpr:jv,hprate:mm,hprelease:Jv,hps:Yv,hpshape:Cm,hpskew:Mm,hpsustain:Zv,hpsync:gm,hresonance:bm,imag:Hg,ir:ng,irbegin:og,iresponse:rg,irspeed:ag,isControlName:hd,kcutoff:Ig,krush:bg,label:T1,lbrick:qg,legato:ux,leslie:m1,lfo:jx,lock:km,loop:Gp,loopBegin:bp,loopEnd:Op,loopb:Ip,loope:Bp,lp:Cv,lpa:Lv,lpattack:Fv,lpd:Ov,lpdc:am,lpdecay:Iv,lpdepth:im,lpdepthfreq:nm,lpdepthfrequency:sm,lpe:Mv,lpenv:Sv,lpf:Tv,lpq:Bm,lpr:kv,lprate:tm,lprelease:Kv,lps:Wv,lpshape:rm,lpskew:om,lpsustain:zv,lpsync:em,lrate:g1,lsize:x1,midibend:Zx,midichan:Fx,midicmd:wx,midimap:Lx,midiport:Dx,miditouch:Yx,minutes:ix,mode:Q1,mtranspose:S1,n:Qd,noise:Rm,note:Ne,nrpnn:Bx,nrpv:Xx,nudge:R1,oct:L1,octave:F1,octaveR:A1,octaves:j1,octer:Og,octersub:Bg,octersubsub:Xg,offset:J1,orbit:D1,oschost:Hx,oscport:Kx,overgain:I1,overshape:O1,pan:B1,panchor:c1,panorient:z1,panspan:X1,pansplay:N1,panwidth:V1,patt:n1,pattack:s1,pcurve:d1,pdec:a1,pdecay:r1,penv:f1,ph:ov,phasdp:vv,phaser:hv,phasercenter:fv,phaserdepth:cv,phaserrate:av,phasersweep:uv,phc:dv,phd:pv,phs:lv,pitchJump:vx,pitchJumpTime:mx,polyTouch:Ux,postgain:ec,prel:l1,prelease:u1,progNum:Nx,psus:h1,psustain:o1,pw:sv,pwrate:nv,pwsweep:rv,rdim:eg,real:Ug,registerControl:nt,registerMultiControl:zi,rel:Mp,release:Sp,resonance:Om,rfade:sg,ring:Ng,ringdf:zg,ringf:Vg,rlp:_1,room:$1,roomdim:tg,roomfade:ig,roomlp:q1,roomsize:hg,rsize:fg,s:th,scram:jg,scrub:Jx,seconds:sx,semitone:Z1,shape:dg,size:ug,slide:W1,smear:Jg,songPtr:nx,sound:ud,source:Jd,speed:eh,spread:$m,squiz:Eg,src:jd,stepsPerOctave:P1,stretch:Sg,sus:Cp,sustain:Tp,sustainpedal:Fg,sysex:Vx,sysexdata:Wx,sysexid:zx,sz:lg,transient:qx,trem:zp,tremolo:Vp,tremolodepth:Zp,tremolophase:Up,tremoloshape:Hp,tremoloskew:Yp,tremolosync:Wp,triode:Gg,tsdelay:Yg,uid:rx,unison:Qm,unit:Mg,v:Am,val:ax,vel:_d,velocity:qd,vib:Em,vibmod:Fm,vibrato:Pm,vmod:Lm,voice:Y1,vowel:Pg,warp:Rd,warpatt:Dd,warpattack:Ld,warpdc:zd,warpdec:Gd,warpdecay:wd,warpdepth:Nd,warpenv:Kd,warpmode:Zd,warprate:Xd,warprel:Bd,warprelease:Od,warpshape:Vd,warpskew:Wd,warpsus:Id,warpsustain:bd,warpsync:kd,waveloss:Ag,wavetablePhaseRand:Hd,wavetablePosition:fd,wavetableWarp:Fd,wavetableWarpMode:Yd,wt:ld,wtatt:pd,wtattack:cd,wtdc:Pd,wtdec:md,wtdecay:vd,wtdepth:Md,wtenv:dd,wtphaserand:Ud,wtrate:Cd,wtrel:Td,wtrelease:yd,wtshape:Ed,wtskew:Ad,wtsus:xd,wtsustain:gd,wtsync:Sd,xsdelay:Zg,zcrush:yx,zdelay:Tx,zmod:xx,znoise:gx,zrand:dx,zzfx:Cx},Symbol.toStringTag,{value:"Module"})),fP=function(i,p){const[x,M]=i,[R,w]=p,[v,T]=Yo(M,R);return[[M,x-M],[Zr((t,h)=>t.concat(h),v,w),T]]},dP=function(i,p){const[x,M]=i,[R,w]=p,[v,T]=Yo(x,w);return[[x,M-x],[Zr((t,h)=>t.concat(h),R,v),T]]},sy=function(i,p){const[x,M]=i;return Math.min(x,M)<=1?[i,p]:sy(...x>M?fP(i,p):dP(i,p))},nh=function(i,p){const x=i<0,M=Math.abs(i),R=p-M,w=Array(M).fill([1]),v=Array(R).fill([0]),T=sy([M,R],[w,v]),t=ji(T[1][0]).concat(ji(T[1][1]));return x?t.map(h=>1-h):t},kr=function(i,p,x){const M=nh(i,p);return x?Mf(M,-x):M},cP=ct("euclid",function(i,p,x){return x.struct(kr(i,p,0))}),pP=ct("bjork",function(i,p){Array.isArray(i)||(i=[i]);const[x,M=x,R=0]=i;return p.struct(kr(x,M,R))}),{euclidrot:vP,euclidRot:mP}=ct(["euclidrot","euclidRot"],function(i,p,x,M){return M.struct(kr(i,p,x))}),ny=function(i,p,x,M){if(i<1)return xe;const R=kr(i,p,0).join("").split("1").slice(1).map(w=>[w.length+1,!0]);return M.struct($o(...R)).late(Ft(x).div(p))},gP=ct(["euclidLegato"],function(i,p,x){return ny(i,p,0,x)}),xP=ct(["euclidLegatoRot"],function(i,p,x,M){return ny(i,p,x,M)}),{euclidish:yP,eish:TP}=ct(["euclidish","eish"],function(i,p,x,M){const R=qo(nh(i,p),new Array(i).fill(1),x);return M.struct(R).setSteps(p)});function ry(i,p,x=.05,M=.1,R=.1,w=globalThis.setInterval,v=globalThis.clearInterval,T=!0){let t=0,h=0,g=10**4,o=.01;const a=n=>x=n(x);R=R||M/2;const r=()=>{const n=i(),l=n+M+R;for(h===0&&(h=n+o);h<l;)h=T?Math.round(h*g)/g:h,p(h,x,t,n),h+=x,t++};let e;const s=()=>{u(),r(),e=w(r,M*1e3)},u=()=>{e!==void 0&&v(e),e=void 0};return{setDuration:a,start:s,stop:()=>{t=0,h=0,u()},pause:()=>u(),duration:x,interval:M,getPhase:()=>h,minLatency:o}}class ay{constructor({interval:p,onTrigger:x,onToggle:M,onError:R,getTime:w,latency:v=.1,setInterval:T,clearInterval:t,beforeStart:h}){this.started=!1,this.beforeStart=h,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=w,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=M,this.latency=v,this.clock=ry(w,(g,o,a,r)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=g),this.num_ticks_since_cps_change++;const e=this.num_ticks_since_cps_change*o*this.cps;try{const s=this.lastEnd;this.lastBegin=s;const u=this.num_cycles_at_cps_change+e;if(this.lastEnd=u,this.lastTick=g,g<r){console.log("skip query: too late");return}this.pattern.queryArc(s,u,{_cps:this.cps,cyclist:"cyclist"}).forEach(n=>{if(n.hasOnset()){const l=(n.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+v,c=n.duration/this.cps,d=l-g;x?.(n,d,c,this.cps,l),n.value.cps!==void 0&&this.cps!=n.value.cps&&(this.cps=n.value.cps,this.num_ticks_since_cps_change=0)}})}catch(s){Kn(s),R?.(s)}},p,.1,.1,T,t)}now(){if(!this.started)return 0;const p=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+p*this.cps}setStarted(p){this.started=p,this.onToggle?.(p)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");Ve("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){Ve("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){Ve("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(p,x=!1){this.pattern=p,x&&!this.started&&await this.start()}setCps(p=.5){this.cps!==p&&(this.cps=p,this.num_ticks_since_cps_change=0)}log(p,x,M){const R=M.filter(w=>w.hasOnset());console.log(`${p.toFixed(4)} - ${x.toFixed(4)} ${Array(R.length).fill("I").join("")}`)}}let Fn={};const oy=function(){hy()},hy=function(){Fn={}},CP=ct("timeline",function(i,p){i=Rt(i);const x=function(M){const R=!!M.controls.cyclist,w=i.query(M),v=[];for(const T of w){const t=T.value;let h;if(t===0)h=0;else if(t in Fn)h=Fn[t];else{const o=T.wholeOrPart();!R||M.span.begin.lt(o.midpoint())?h=o.begin:h=o.end}R&&(Fn[t]=h,t!==0&&delete Fn[-t]);const g=p.late(h).query(M.setSpan(T.part)).map(o=>o.setContext(o.combineContext(T)));v.push(...g)}return v};return new Mt(x,p._steps)},!1),Wi=function(i,p,x=!0){const M=Array.isArray(i),R=Object.keys(i).length;return i=Df(i,Rt),R===0?xe:p.fmap(w=>{let v=w;return M&&(v=x?Math.round(v)%R:Yr(Math.round(v),0,i.length-1)),i[v]})},uy=function(i,p){return Array.isArray(p)&&([p,i]=[i,p]),SP(i,p)},SP=ct("pick",function(i,p){return Wi(i,p,!1).innerJoin()}),ly=ct("pickmod",function(i,p){return Wi(i,p,!0).innerJoin()}),MP=ct("pickF",function(i,p,x){return x.apply(uy(i,p))}),EP=ct("pickmodF",function(i,p,x){return x.apply(ly(i,p))}),PP=ct("pickOut",function(i,p){return Wi(i,p,!1).outerJoin()}),AP=ct("pickmodOut",function(i,p){return Wi(i,p,!0).outerJoin()}),RP=ct("pickRestart",function(i,p){return Wi(i,p,!1).restartJoin()}),FP=ct("pickmodRestart",function(i,p){return Wi(i,p,!0).restartJoin()}),LP=ct("pickReset",function(i,p){return Wi(i,p,!1).resetJoin()}),DP=ct("pickmodReset",function(i,p){return Wi(i,p,!0).resetJoin()}),{inhabit:wP,pickSqueeze:GP}=ct(["inhabit","pickSqueeze"],function(i,p){return Wi(i,p,!1).squeezeJoin()}),{inhabitmod:bP,pickmodSqueeze:IP}=ct(["inhabitmod","pickmodSqueeze"],function(i,p){return Wi(i,p,!0).squeezeJoin()}),OP=(i,p)=>(p=p.map(Rt),p.length==0?xe:i.fmap(x=>{const M=pi(Math.round(x),p.length);return p[M]}).squeezeJoin());class BP{constructor({onTrigger:p,onToggle:x,getTime:M}){this.started=!1,this.cps=.5,this.getTime=M,this.time_at_last_tick_message=0,this.collator=new wf({getTargetClockTime:M}),this.onToggle=x,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL(""+new URL("data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEwoKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkqLjAwMX1sZXQgXz0wLHI9MCxvPS41O2NvbnN0IGg9bmV3IE1hcCxtPS4xLE09bmV3IEJyb2FkY2FzdENoYW5uZWwoInN0cnVkZWx0aWNrIiksYj0ocyxlKT0+e00ucG9zdE1lc3NhZ2Uoe3R5cGU6cyxwYXlsb2FkOmV9KX0sQz1FKEwsKHMsZSx0LG4pPT57Y29uc3QgaT1yKmUsZD1zLW4sYz1uK2QsdT1pKm8sbD1fK3UsZz1uLWMtZSxmPWUqbyxwPWwrZix5PWwrZypvO2IoInRpY2siLHtiZWdpbjpsLGVuZDpwLGNwczpvLHRpbWU6bixjeWNsZTp5fSkscisrfSxtKTtsZXQgaz0hMTtjb25zdCBJPXM9PntoLnNldChzLHtzdGFydGVkOiEwfSksIWsmJihDLnN0YXJ0KCksaz0hMCl9LEE9YXN5bmMgcz0+e2guc2V0KHMse3N0YXJ0ZWQ6ITF9KTtjb25zdCBlPUFycmF5LmZyb20oaC52YWx1ZXMoKSkuc29tZSh0PT50LnN0YXJ0ZWQpOyFrfHxlfHwoQy5zdG9wKCksdygwKSxrPSExKX0sdz1zPT57cj0wLF89c30sRD1zPT57Y29uc3R7dHlwZTplLHBheWxvYWQ6dH09cztzd2l0Y2goZSl7Y2FzZSJjcHNjaGFuZ2UiOntpZih0LmNwcyE9PW8pe2NvbnN0IG49ciptO189XytuKm8sbz10LmNwcyxyPTB9YnJlYWt9Y2FzZSJzZXRjeWNsZSI6e3codC5jeWNsZSk7YnJlYWt9Y2FzZSJ0b2dnbGUiOnt0LnN0YXJ0ZWQ/SShzLmlkKTpBKHMuaWQpO2JyZWFrfX19O3NlbGYub25jb25uZWN0PWZ1bmN0aW9uKHMpe2NvbnN0IGU9cy5wb3J0c1swXTtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKHQpe0QodC5kYXRhKX0pLGUuc3RhcnQoKX07ZnVuY3Rpb24gRShzLGUsdD0uMDUsbj0uMSxpPS4xKXtsZXQgZD0wLGM9MCx1PTEwKio0LGw9LjAxO2NvbnN0IGc9YT0+dD1hKHQpO2k9aXx8bi8yO2NvbnN0IGY9KCk9Pntjb25zdCBhPXMoKSxPPWErbitpO2ZvcihjPT09MCYmKGM9YStsKTtjPE87KWM9TWF0aC5yb3VuZChjKnUpL3UsYz49YSYmZShjLHQsZCxhKSxjPGEmJmNvbnNvbGUubG9nKCJUT08gTEFURSIsYyksYys9dCxkKyt9O2xldCBwO2NvbnN0IHk9KCk9PntUKCksZigpLHA9c2V0SW50ZXJ2YWwoZixuKjFlMyl9LFQ9KCk9PnAhPT12b2lkIDAmJmNsZWFySW50ZXJ2YWwocCk7cmV0dXJue3NldER1cmF0aW9uOmcsc3RhcnQ6eSxzdG9wOigpPT57ZD0wLGM9MCxUKCl9LHBhdXNlOigpPT5UKCksZHVyYXRpb246dCxpbnRlcnZhbDpuLGdldFBoYXNlOigpPT5jLG1pbkxhdGVuY3k6bH19fSkoKTsK",import.meta.url).href,import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const R=v=>{const{cps:T,begin:t,end:h,cycle:g,time:o}=v;this.cps=T,this.cycle=g;const a=this.collator.calculateOffset(o)+o;w(t,h,a),this.time_at_last_tick_message=a},w=(v,T,t)=>{this.started!==!1&&this.pattern.queryArc(v,T,{_cps:this.cps,cyclist:"neocyclist"}).forEach(h=>{if(h.hasOnset()){const g=io(h.whole.begin-this.cycle,this.cps)+t+this.latency,o=io(h.duration,this.cps);p?.(h,0,o,this.cps,g)}})};this.channel.onmessage=v=>{if(!this.started)return;const{payload:T,type:t}=v.data;t==="tick"&&R(T)}}sendMessage(p,x){this.worker.port.postMessage({type:p,payload:x,id:this.id})}now(){const p=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+p}setCps(p=1){this.sendMessage("cpschange",{cps:p})}setCycle(p){this.sendMessage("setcycle",{cycle:p})}setStarted(p){this.sendMessage("toggle",{started:p}),this.started=p,this.onToggle?.(p)}start(){Ve("[cyclist] start"),this.setStarted(!0)}stop(){Ve("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(p,x=!1){this.pattern=p,x&&!this.started&&this.start()}log(p,x,M){const R=M.filter(w=>w.hasOnset());console.log(`${p.toFixed(4)} - ${x.toFixed(4)} ${Array(R.length).fill("I").join("")}`)}}let ho,fy,dy,cy,py;function uo(){if(!ho)throw new Error("no time set! use setTime to define a time source");return ho()}function Dr(i){ho=i}function vy(i){fy=i}function XP(){return fy?.()}function my(i){dy=i}function NP(){return dy}function gy(i){cy=i}function VP(){return cy}function xy(i){py=!!i}function zP(){return py}function lo(i,p){if(p||(p="assertion failed"),!i)throw new Error(p)}let oe=class{constructor(i,p){this.type=i,p!==void 0&&(this.value=p),this.ins=[]}static parseInput(i,p){if(typeof i=="function"){if(!p)throw new Error("tried to parse function input without without passing node..");return i(p)}return typeof i=="object"?i:typeof i=="number"&&!isNaN(i)||typeof i=="string"?vi(i):(console.log(`invalid input type "${typeof i}" for node of type "${p.type}", falling back to 0. The input was:`,i),0)}};const $s=(i,p)=>new oe(i,p);let Ue=new Map;const os="poly",fo="exit";oe.prototype.inherit=function(i){return i.inputOf&&(this.inputOf=i.inputOf),i.outputOf&&(this.outputOf=i.outputOf),this};oe.prototype.toObject=function(){return JSON.parse(JSON.stringify(this))};oe.prototype.stringify=function(){return JSON.stringify(this,null,2).replaceAll('"',"'")};function yy(i,...p){let x=1;if(p=p.map(R=>{if(Array.isArray(R)){if(R.length===1)return R[0];R=new oe(os).withIns(...R)}if(typeof R=="function"){const w=R(new oe("peek"));w.type===os&&(x=Math.max(w.ins.length,x))}return R.type===os&&(x=Math.max(R.ins.length,x)),R}),x===1){const R=$s(i);return R.withIns(...p.map(w=>oe.parseInput(w,R)))}if(i===fo){const R=p.map(w=>w.type===os?w.ins.map(v=>oe.parseInput(v).inherit(v)):w).flat();return $s(fo).withIns(...R)}const M=Array.from({length:x},(R,w)=>{const v=new oe(i),T=p.map(t=>t.type===os?oe.parseInput(t.ins[w%t.ins.length],v).inherit(t):(t=oe.parseInput(t,v),t.type===os&&(t=t.ins[w]),t));return v.withIns(...T)});return new oe(os).withIns(...M)}function WP(i,p){const x=Ue.get(i);return x?.ins?.[p]?x.ins[p].name:""}let Xt=(i,p)=>ze(i,(...x)=>yy(i,...x),p);Ue.set("register",{tags:["meta"],graph:!1,description:"Registers a new Node function. Sets it on the prototype + returns the function itself. Like `module` but doesn't hide complexity in graph viz.",examples:[`let kick = register('kick', gate => gate.adsr(0,.11,0,.11)
.apply(env => env.mul(env)
  .mul(158)
  .sine(env)
  .distort(.85)
))
impulse(2).kick().out()`]});let ze=(i,p,x)=>(x&&Ue.set(i,x),oe.prototype[i]=function(...M){return p(this,...M)},oe.prototype["_"+i]=function(){return this},p);Ue.set("module",{tags:["meta"],graph:!0,description:"Creates a module. Like `register`, but the graph viz will hide the internal complexity of the module.",examples:[`let kick = module('kick', gate => gate.adsr(0,.11,0,.11)
.apply(env => env.mul(env)
  .mul(158)
  .sine(env)
  .distort(.85)
))
impulse(2).kick().out()`]});let ZP=0;function oi(i,p,x){return ze(i,(...M)=>{const R=ZP++;return M=M.map((w,v)=>oe.parseInput(w).asModuleInput?.(i,R,v)),p(...M).asModuleOutput?.(i,R)},x)}Ue.set("n",{tags:["math"],description:"Constant value node. Turns a number into a Node.",ins:[{name:"value",default:0}]});function vi(i){return Array.isArray(i)?poly(...i.map(p=>vi(p))):typeof i=="object"?i:$s("n",i)}Ue.set("out",{tags:["meta"],description:"Sends the node to the audio output"});Ue.set("withIns",{internal:!0,tags:["innards"],description:"Sets the inputs of a node. Returns the node itself",ins:[{name:"in",dynamic:!0}]});oe.prototype.withIns=function(...i){return this.ins=i,this};Ue.set("flatten",{internal:!0,tags:["innards"],description:"Flattens the node to a list of all nodes in the graph, where each Node's ins are now indices"});oe.prototype.flatten=function(){return UP(this)};Ue.set("apply",{graph:!0,tags:["meta"],description:"Applies the given function to the Node. Useful when a node has to be used multiple times.",examples:[`impulse(4)
.apply(imp=>imp
  .seq(110,220,330,440)
  .sine()
  .mul( imp.ad(.1,.1) )
).out()`]});oe.prototype.apply=function(i){return i(this)};Ue.set("clone",{internal:!0,tags:["innards"],description:"Clones the node"});oe.prototype.clone=function(){return new oe(this.type,this.value).withIns(...this.ins)};Ue.set("map",{tags:["meta"],description:"Applies the given function to all ins if it's poly node. Otherwise it applies the function to itself.",examples:[`n([110,220,330])
.map( freq=>freq.mul([1,1.007]).saw().mix() )
.mix(2).mul(.5).out()`]});oe.prototype.map=function(i){return this.type!=="poly"?i(this):poly(...this.ins.map(i))};oe.prototype.channel=function(i){return this.type!=="poly"?this:this.ins[i%this.ins.length]};Ue.set("select",{tags:["meta"],graph:!0,description:"Find the first occurence of the given type up in the graph and returns the match. Useful to exit a feedback loop at another point.",examples:[`sine(220).mul(impulse(1).ad(.001,.2))
.add( x=>x.delay(.2).mul(.8) )
.select('delay').out()
`]});oe.prototype.select=function(i){for(let p of this.ins){if(p.type===i)return p;const x=p.select(i);if(x)return x}};Ue.set("debug",{tags:["meta"],description:"Logs the node to the console"});oe.prototype.debug=function(i=p=>p){return console.log(i(this)),this};function YP(i){const p=modules.get(i),x=Array.from({length:p.length},(R,w)=>$s(`$INPUT${w}`)),M=p(...x);return JSON.stringify(M,null,2)}function UP(i){const p=[];return rh(i,x=>(p.push(x),x)),p.map(x=>{let M={...x,type:x.type,ins:x.ins.map(R=>p.indexOf(R)+"")};return x.value!==void 0&&(M.value=x.value),x.to!==void 0&&(M.to=p.indexOf(x.to)),M})}let Ty=Xt("exit",{internal:!0});function Cy(i,p){let x=[];const M=ze("out",function(R,w=[0,1]){return x.push(R.output(w)),R});return p?(p.out=M,Function(...Object.keys(p),i)(...Object.values(p))):(globalThis.out=M,Function(i)()),Ty(...x)}oe.prototype.over=function(i){return this.apply(p=>add(p,i(p)))};oe.prototype.dfs=function(i,p){return this.apply(x=>rh(x,i,p))};oe.prototype.apply2=function(i){return i(this,this)};let rh=(i,p,x=[])=>(i=p(i,x),x.push(i),i.ins=i.ins.map(M=>x.includes(M)?M:rh(M,p,x)),i);oe.prototype.asModuleInput=function(i,p,x){return this.inputOf=this.inputOf||[],this.inputOf.push([i,p,x]),this};oe.prototype.asModuleOutput=function(i,p){return this.outputOf=[i,p],this};function ah(i,p={}){const{log:x=!1,lang:M="js",fallbackType:R="thru",constType:w="n",getRegister:v=e=>`r[${e}]`,getOutput:T=e=>`o[${e}]`,getSource:t=e=>`s[${e}]`}=p;x&&console.log("compile",i);const h=HP(i);let g=[],o=e=>h[e].type!==w?v(e):typeof h[e].value=="string"?`"${h[e].value}"`:h[e].value;const a=[];for(let e in h){const s=h[e],u=h[e].ins.map(d=>o(h.indexOf(d))),n=a.length;let l=Ue.get(s.type);l||(console.warn(`unhandled node type "${h[e].type}". falling back to "${R}"`),l=Ue.get(R));const c={vars:u,node:s,nodes:h,id:e,ugenIndex:n,ugen:l.ugen,name:o(e),lang:M,getRegister:v,getOutput:T,getSource:t};l.compile&&g.push(l.compile(c)),l.ugen&&a.push({type:l.ugen,inputs:u})}const r=g.join(`
`);return x&&(console.log("compiled code:"),console.log(r)),{src:r,ugens:a,registers:h.length}}oe.prototype.compile=function(i){return ah(this,i)};function HP(i){const p=[],x=new Set;function M(R){if(!(typeof R!="object"||x.has(R))){x.add(R);for(let w in R.ins)M(R.ins[w]);p.push(R)}}return M(i),p}const Vu=Object.freeze(Object.defineProperty({__proto__:null,compile:ah},Symbol.toStringTag,{value:"Module"}));class Sy{constructor(){this._events={}}on(p,x){this._events[p]||(this._events[p]=[]);let M=this._events[p];lo(M.indexOf(x)==-1),M.push(x)}removeListener(p,x){let M=this._events[p],R=M.indexOf(x);R!=-1&&M.splice(R,1)}trigger(p,...x){let M=this._events[p]||[];for(let R=0;R<M.length;R++)M[R].apply(null,x)}}class KP extends Sy{constructor(p=navigator){super(),this.midiAccess=null,this.getMIDIAccess(p)}async getMIDIAccess(p){if("requestMIDIAccess"in p){this.midiAccess=await p.requestMIDIAccess({sysex:!1}),console.log("got MIDI access");for(let x of this.midiAccess.inputs.values())x.state=="connected"&&(x.onmidimessage=M=>this.trigger("midimessage",x.id,M.data));this.midiAccess.onstatechange=x=>{x.port.type=="input"&&x.port.state=="connected"&&(console.log("MIDI device connected:",x.port.name,"PORT:",x.port.id),x.port.onmidimessage=M=>this.trigger("midimessage",x.port.id,M.data))}}}broadcast(p,x){if(midi)for(let M of this.midiAccess.outputs.values())M.send(p,x)}}function kP(i){let p=i[0]&240,x=(i[0]&15)+1;if(p==176&&i.length==3){let M=i[1],R=i[2]/127*2-1;return{type:"CC",channel:x,cc:M,value:R}}if(p==224&&i.length==3){let M=i[1],R=(i[2]<<7|M)/16383*2-1;return{type:"PITCHBEND",channel:x,value:R}}if(p==144&&i.length==3){let M=i[1],R=i[2]/127;return{type:"NOTE_ON",channel:x,note:M,velocity:R}}if(p==128&&i.length==3){let M=i[1];return{type:"NOTE_ON",channel:x,note:M,velocity:0}}}class JP extends Sy{constructor(){super(),this.attach()}attach(){typeof window<"u"&&(this.handleMouseMove=p=>{const x=p.clientX/document.body.clientWidth*2-1,M=p.clientY/document.body.clientHeight*2-1;this.trigger("move",x,M)},document.addEventListener("mousemove",this.handleMouseMove))}detach(){typeof window<"u"&&document.removeEventListener("mousemove",this.handleMouseMove)}}const jP="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGcoaCx0KXtpZih0fHwodD0iYXNzZXJ0aW9uIGZhaWxlZCIpLCFoKXRocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiBTKGgsdCxzKXtyZXR1cm4gaDw9MD90Omg+PTE/czp0K2gqKHMtdCl9ZnVuY3Rpb24gUChoLHQscyl7cmV0dXJuIGg8PXQ/MDpoPj1zPzE6cz09PXQ/MDooaC10KS8ocy10KX1mdW5jdGlvbiBFKGgsdCl7cmV0dXJuIGg8dD8oaC89dCxoK2gtaCpoLTEpOmg+MS10PyhoPShoLTEpL3QsaCpoK2graCsxKTowfWZ1bmN0aW9uIFUoaCl7cmV0dXJuIE1hdGguZmxvb3IoaCk9PT1ofWZ1bmN0aW9uIF8oaCl7cmV0dXJuIFUoaCkmJmg+MH1mdW5jdGlvbiBrKGgsdCl7dD1NYXRoLm1pbihNYXRoLm1heCh0LDApLDEpLHQtPS4wMTt2YXIgcz0yKnQvKDEtdCksZT0oMStzKSpoLygxK3MqTWF0aC5hYnMoaCkpO3JldHVybiBlfWZ1bmN0aW9uIHcoaCx0LHMpe3JldHVybiBoPj0xP3M6dCtoKihzLXQpfWZ1bmN0aW9uIFQoKXt0aGlzLnN0YXRlPSJvZmYiLHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5zdGFydFZhbD0wfVQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oaCx0LHMsZSxpLG4pe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9aCx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcj1oLXRoaXMuc3RhcnRUaW1lO3JldHVybiByPnM/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1oLDEpOncoci9zLHRoaXMuc3RhcnRWYWwsMSl9Y2FzZSJkZWNheSI6e2xldCByPWgtdGhpcy5zdGFydFRpbWUsbD13KHIvZSwxLGkpO3JldHVybiB0PD0wPyh0aGlzLnN0YXRlPSJyZWxlYXNlIix0aGlzLnN0YXJ0VGltZT1oLHRoaXMuc3RhcnRWYWw9bCxsKTpyPmU/KHRoaXMuc3RhdGU9InN1c3RhaW4iLHRoaXMuc3RhcnRUaW1lPWgsaSk6bH1jYXNlInN1c3RhaW4iOnJldHVybiB0PD0wJiYodGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9aCx0aGlzLnN0YXJ0VmFsPWkpLGk7Y2FzZSJyZWxlYXNlIjp7bGV0IHI9aC10aGlzLnN0YXJ0VGltZTtpZihyPm4pcmV0dXJuIHRoaXMuc3RhdGU9Im9mZiIsMDtsZXQgbD13KHIvbix0aGlzLnN0YXJ0VmFsLDApO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPWgsdGhpcy5zdGFydFZhbD1sKSxsfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn07ZnVuY3Rpb24gdigpe3RoaXMuczA9MCx0aGlzLnMxPTB9di5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oaCx0LHMpe2coIWlzTmFOKGgpLCJOYU4gdmFsdWUgZmVkIGluIFR3b1BvbGVGaWx0ZXIiKSx0PU1hdGgubWluKHQsMSkscz1NYXRoLm1heChzLDApO3ZhciBlPU1hdGgucG93KC41LCgxLXQpLy4xMjUpLGk9TWF0aC5wb3coLjUsKHMrLjEyNSkvLjEyNSksbj0xLWkqZSxyPXRoaXMuczAsbD10aGlzLnMxO3JldHVybiByPW4qci1lKmwrZSpoLGw9bipsK2UqcixoPWwsdGhpcy5zMD1yLHRoaXMuczE9bCxofTtsZXQgQT1jbGFzcyBDe2NvbnN0cnVjdG9yKHQscyl7dGhpcy5zYW1wbGVSYXRlPXQscz90aGlzLmJ1ZmZlcj1zLnNsaWNlKDApOih0aGlzLmJ1ZmZlcj1uZXcgRmxvYXQzMkFycmF5KDEwKnQpLHRoaXMuYnVmZmVyLmZpbGwoMCkpLHRoaXMud3JpdGVJZHg9MCx0aGlzLnJlYWRJZHg9MH1yZXNldCgpe3RoaXMuYnVmZmVyLmZpbGwoMCksdGhpcy53cml0ZUlkeD0wLHRoaXMucmVhZElkeD0wfWNsb25lKCl7Y29uc3QgdD1uZXcgQyh0aGlzLnNhbXBsZVJhdGUsdGhpcy5idWZmZXIpO3JldHVybiB0LndyaXRlSWR4PXRoaXMud3JpdGVJZHgsdC5yZWFkSWR4PXRoaXMucmVhZElkeCx0fXdyaXRlKHQscyl7dGhpcy53cml0ZUlkeD0odGhpcy53cml0ZUlkeCsxKSV0aGlzLmJ1ZmZlci5sZW5ndGgsdGhpcy5idWZmZXJbdGhpcy53cml0ZUlkeF09dDtsZXQgZT1NYXRoLm1pbihNYXRoLmZsb29yKHRoaXMuc2FtcGxlUmF0ZSpzKSx0aGlzLmJ1ZmZlci5sZW5ndGgtMSk7dGhpcy5yZWFkSWR4PXRoaXMud3JpdGVJZHgtZSx0aGlzLnJlYWRJZHg8MCYmKHRoaXMucmVhZElkeCs9dGhpcy5idWZmZXIubGVuZ3RoKX1yZWFkKCl7cmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMucmVhZElkeF19fTtjb25zdCB5PTEvNDhlMyxNPTI0LE49TS80O2NsYXNzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy5ub2RlSWQ9dCx0aGlzLnN0YXRlPXMsdGhpcy5zYW1wbGVSYXRlPWUsdGhpcy5zYW1wbGVUaW1lPTEvZSx0aGlzLnNlbmQ9aX19Y2xhc3MgcSBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5lbnY9bmV3IFR9dXBkYXRlKHQscyxlLGksbixyKXtyZXR1cm4gdGhpcy5lbnYuZXZhbCh0LHMsZSxpLG4scil9fWNsYXNzIEYgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7bGV0IHM9TSp0LzYwLGU9LjU7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSpzLHRoaXMucGhhc2UlMTxlPzE6LTF9fWNsYXNzIEQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuaW5TZ249ITAsdGhpcy5vdXRTZ249ITAsdGhpcy5jbG9ja0NudD0wfXVwZGF0ZSh0LHMpe2xldCBlPXQ+MDtyZXR1cm4gdGhpcy5pblNnbiE9ZSYmKHRoaXMuY2xvY2tDbnQrKyx0aGlzLmNsb2NrQ250Pj1zJiYodGhpcy5jbG9ja0NudD0wLHRoaXMub3V0U2duPSF0aGlzLm91dFNnbikpLHRoaXMuaW5TZ249ZSx0aGlzLm91dFNnbj8xOi0xfX1jbGFzcyBMIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmluU2duPSExfXVwZGF0ZSh0LHMpe2xldCBlPXM+MDtyZXR1cm4gZSYmdGhpcy5pblNnbiE9ZSYmdGhpcy5zZW5kKHt0eXBlOiJDTE9DS19QVUxTRSIsbm9kZUlkOnRoaXMubm9kZUlkLHRpbWU6dH0pLHRoaXMuaW5TZ249ZSwwfX1jb25zdCBPPW5ldyBNYXA7Y2xhc3MgViBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSk7Y29uc3Qgbj1zLmlucHV0c1syXTtuJiZPLmhhcyhuKT90aGlzLmRlbGF5PU8uZ2V0KG4pLmNsb25lKCk6dGhpcy5kZWxheT1uZXcgQShlKSxuJiZPLnNldChuLHRoaXMuZGVsYXkpfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLmRlbGF5LndyaXRlKHQscyksdGhpcy5kZWxheS5yZWFkKCl9fWNsYXNzIEcgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpfXVwZGF0ZSh0LHMpe3JldHVybiBrKHQscyl9fWNsYXNzIFIgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudmFsdWU9MCx0aGlzLnRyaWdTZ249ITF9d3JpdGUodCxzKXshdGhpcy50cmlnU2duJiZzPjAmJih0aGlzLnZhbHVlPXQpLHRoaXMudHJpZ1Nnbj1zPjB9cmVhZCgpe3JldHVybiB0aGlzLnZhbHVlfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLndyaXRlKHQscyksdGhpcy5yZWFkKCl9fWNsYXNzIEJ7Y29uc3RydWN0b3IoKXt0aGlzLnZhbHVlPTB9dXBkYXRlKHQpe3JldHVybiB0aGlzLnZhbHVlPXQsdGhpcy52YWx1ZX19Y29uc3QgJD0zNDA7bGV0IEk9MDtjbGFzcyBIe2NvbnN0cnVjdG9yKCl7dGhpcy5jaD1JLHRoaXMuc3RhcnRfc2VlZD0kKih0aGlzLmNoKzEpPj4+MCx0aGlzLnN0YXRlPXRoaXMuc3RhcnRfc2VlZCx0aGlzLnZhbHVlPTAsdGhpcy5hPTE2NjQ1MjUsdGhpcy5jPTEwMTM5MDQyMjMsdGhpcy5tYXNrPTE2Nzc3MjE1LHRoaXMuc2NhbGU9MS8oMTw8MjQpLEkrK311cGRhdGUodCxzKXtpZighdClyZXR1cm4gdGhpcy52YWx1ZTtzJiYodGhpcy5zdGF0ZT10aGlzLnN0YXJ0X3NlZWQpLHRoaXMuc3RhdGU9dGhpcy5zdGF0ZSp0aGlzLmErdGhpcy5jPj4+MDtjb25zdCBlPSh0aGlzLnN0YXRlJnRoaXMubWFzaykqdGhpcy5zY2FsZTtyZXR1cm4gdGhpcy52YWx1ZT1lKjItMSx0aGlzLnZhbHVlfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy52YWx1ZT1NYXRoLnJhbmRvbSgpKjItMX11cGRhdGUodCl7cmV0dXJuIHQ/KHRoaXMudmFsdWU9TWF0aC5yYW5kb20oKSoyLTEsdGhpcy52YWx1ZSk6dGhpcy52YWx1ZX19Y2xhc3MgS3t1cGRhdGUodCl7cmV0dXJuIE1hdGgucmFuZG9tKCk8dCp5P01hdGgucmFuZG9tKCk6MH19Y2xhc3MgV3tjb25zdHJ1Y3Rvcigpe3RoaXMub3V0PTB9dXBkYXRlKCl7bGV0IHQ9TWF0aC5yYW5kb20oKSoyLTE7cmV0dXJuIHRoaXMub3V0PSh0aGlzLm91dCsuMDIqdCkvMS4wMix0aGlzLm91dH19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe3RoaXMuYjA9MCx0aGlzLmIxPTAsdGhpcy5iMj0wLHRoaXMuYjM9MCx0aGlzLmI0PTAsdGhpcy5iNT0wLHRoaXMuYjY9MH11cGRhdGUoKXtjb25zdCB0PU1hdGgucmFuZG9tKCkqMi0xO3RoaXMuYjA9Ljk5ODg2KnRoaXMuYjArdCouMDU1NTE3OSx0aGlzLmIxPS45OTMzMip0aGlzLmIxK3QqLjA3NTA3NTksdGhpcy5iMj0uOTY5KnRoaXMuYjIrdCouMTUzODUyLHRoaXMuYjM9Ljg2NjUqdGhpcy5iMyt0Ki4zMTA0ODU2LHRoaXMuYjQ9LjU1KnRoaXMuYjQrdCouNTMyOTUyMix0aGlzLmI1PS0uNzYxNip0aGlzLmI1LXQqLjAxNjg5ODtjb25zdCBzPXRoaXMuYjArdGhpcy5iMSt0aGlzLmIyK3RoaXMuYjMrdGhpcy5iNCt0aGlzLmI1K3RoaXMuYjYrdCouNTM2MjtyZXR1cm4gdGhpcy5iNj10Ki4xMTU5MjYscyouMTF9fWNsYXNzIFkgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MX11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHN9fWNsYXNzIHogZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCxzKXtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsdGhpcy5waGFzZSUxPHM/MTotMX19Y2xhc3MgWiBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5waGFzZT0wfXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsdGhpcy5waGFzZSUxKjItMX19Y2xhc3MgSntjb25zdHJ1Y3Rvcigpe3RoaXMucGhhc2U9TWF0aC5yYW5kb20oKX11cGRhdGUodCl7Y29uc3Qgcz10L3NhbXBsZVJhdGU7bGV0IGU9RSh0aGlzLnBoYXNlLHMpLGk9Mip0aGlzLnBoYXNlLTEtZTtyZXR1cm4gdGhpcy5waGFzZSs9cyx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlLT0xKSxpfX1jbGFzcyBRIGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTAsdGhpcy5zeW5jU2duPSExfXVwZGF0ZSh0LHMsZSl7IXRoaXMuc3luY1NnbiYmcz4wJiYodGhpcy5waGFzZT0wKSx0aGlzLnN5bmNTZ249cz4wO2xldCBpPSh0aGlzLnBoYXNlK2UpJTE7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0LE1hdGguc2luKGkqMipNYXRoLlBJKX19Y2xhc3MgdHR7ZEJUb0xpbmVhcih0KXtyZXR1cm4gTWF0aC5wb3coMTAsdC8yMCl9bGluZWFyVG9EQih0KXtyZXR1cm4gMjAqTWF0aC5sb2cxMCh0KX11cGRhdGUodCxzLGUpe2xldCBpPXRoaXMubGluZWFyVG9EQihNYXRoLmFicyh0KSksbj0wO3JldHVybiBpPnMmJihuPShpLXMpKigxLTEvZSkpLHRoaXMuZEJUb0xpbmVhcigtbil9fWNsYXNzIHN0IGV4dGVuZHMgb3tjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQpe3RoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0O2xldCBzPXRoaXMucGhhc2UlMTtyZXR1cm4oczwuNT8yKnM6MS0yKihzLS41KSkqMi0xfX1jbGFzcyBldCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSk7Y29uc3Qgbj1lLzMwO2coXyhuKSksdGhpcy5idWZmZXI9bmV3IEZsb2F0MzJBcnJheShuKSx0aGlzLndyaXRlUG9zPTB9dXBkYXRlKHQscyxlLGkpe3JldHVybiB0aGlzLmJ1ZmZlclt0aGlzLndyaXRlUG9zXT10LHRoaXMud3JpdGVQb3MrKyx0aGlzLndyaXRlUG9zJXRoaXMuYnVmZmVyLmxlbmd0aD09MCYmKHRoaXMud3JpdGVQb3M9MCx0aGlzLnNlbmQoe3R5cGU6IlNFTkRfU0FNUExFUyIsaWQ6cyxzYW1wbGVzOnRoaXMuYnVmZmVyLGNoYW5uZWxzOmUsY2hhbm5lbDppfSkpLHR9fWNsYXNzIGl0e2NvbnN0cnVjdG9yKCl7dGhpcy5sYWdVbml0PTQ0MTAsdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyp0aGlzLmxhZ1VuaXQsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgaHR7Y29uc3RydWN0b3IoKXt0aGlzLmxhc3Q9MH11cGRhdGUodCxzLGUpe2NvbnN0IGk9cyp5LG49ZSp5O2xldCByPXQtdGhpcy5sYXN0O3JldHVybiByPmk/cj1pOnI8LW4mJihyPS1uKSx0aGlzLmxhc3QrPXIsdGhpcy5sYXN0fX1jbGFzcyBhdCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyoxZTMsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgbnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB2fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuZmlsdGVyLmFwcGx5KHQscyxlKSx0aGlzLmZpbHRlci5zMX19Y2xhc3MgcnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB2fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuZmlsdGVyLmFwcGx5KHQscyxlKSx0aGlzLmZpbHRlci5zMH19Y2xhc3MgdXQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpfXVwZGF0ZSh0LHMpe3JldHVybiBzPDAmJihzPTApLHM9cysxLHQ9dCpzLDQqKE1hdGguYWJzKC4yNSp0Ky4yNS1NYXRoLnJvdW5kKC4yNSp0Ky4yNSkpLS4yNSl9fWNsYXNzIGx0IGV4dGVuZHMgb3t1cGRhdGUodCl7cmV0dXJuIHR9fWNsYXNzIG0gZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMubm90ZT0wLHRoaXMuZnJlcT0wLHRoaXMudmVsb2NpdHk9MCx0aGlzLmdhdGVTdGF0ZT0ib2ZmIix0aGlzLnR5cGU9Im1pZGlpbiIsdGhpcy5jaGFubmVsPS0xfWlzRnJlZSgpe3JldHVybiB0aGlzLmdhdGVTdGF0ZT09PSJvZmYifW5vdGVPbih0LHMpe3M+MD8odGhpcy5ub3RlPXQsdGhpcy52ZWxvY2l0eT1zLHRoaXMuZnJlcT0yKiooKHQtNjkpLzEyKSo0NDAsdGhpcy5nYXRlU3RhdGU9InByZXRyaWciKTp0aGlzLm5vdGVPZmYoKX1ub3RlT2ZmKCl7dGhpcy5ub3RlPTAsdGhpcy5nYXRlU3RhdGU9Im9mZiJ9Z2V0R2F0ZSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiAxO2Nhc2Uib2ZmIjpyZXR1cm4gMDtkZWZhdWx0OmcoITEpfX1nZXRGcmVxKCl7c3dpdGNoKHRoaXMuZ2F0ZVN0YXRlKXtjYXNlInByZXRyaWciOnJldHVybiB0aGlzLmdhdGVTdGF0ZT0ib24iLDA7Y2FzZSJvbiI6cmV0dXJuIHRoaXMuZnJlcTtjYXNlIm9mZiI6cmV0dXJuIHRoaXMuZnJlcTtkZWZhdWx0OmcoITEpfX1nZXRWZWxvY2l0eSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiB0aGlzLnZlbG9jaXR5O2Nhc2Uib2ZmIjpyZXR1cm4gdGhpcy52ZWxvY2l0eTtkZWZhdWx0OmcoITEpfX19Y2xhc3Mgb3QgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWdhdGUifXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5jaGFubmVsPXQsdGhpcy5nZXRHYXRlKCl9fWNsYXNzIGN0IGV4dGVuZHMgbXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnR5cGU9Im1pZGlmcmVxIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0RnJlcSgpfX1jbGFzcyBkdCBleHRlbmRzIG17Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJtaWRpdmVsIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0VmVsb2NpdHkoKX19Y2xhc3MgZnR7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy51cD0hMSx0aGlzLnNlbmQ9aSx0aGlzLnZhbHVlPTAsdGhpcy50eXBlPSJjYyJ9c2V0VmFsdWUodCl7dGhpcy52YWx1ZT10fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuaWQ9cywhdGhpcy51cCYmdD4wPyh0aGlzLnVwPSEwLHRoaXMuc2VuZCh7dHlwZToiU0lHTkFMX1RSSUdHRVIiLGlkOnMsdGltZTplfSksdGhpcy52YWx1ZSk6KHRoaXMudXA9dD4wLHRoaXMudmFsdWUpfX1jbGFzcyBwdCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJjYyIsdGhpcy52YWx1ZT1zLmlucHV0c1sxXT8/MH1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQpe3JldHVybiB0aGlzLmlkPXQsdGhpcy52YWx1ZX19Y2xhc3MgYnQgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWNjIix0aGlzLnZhbHVlPXMuaW5wdXRzWzJdPz8tMSx0aGlzLmNoYW5uZWw9LTEsdGhpcy5jY251bWJlcj0tMX1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMuY2NudW1iZXI9dCx0aGlzLmNoYW5uZWw9cyx0aGlzLnZhbHVlfX1jbGFzcyBndCBleHRlbmRzIG97Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5jbG9ja1Nnbj0hMCx0aGlzLnN0ZXA9MCx0aGlzLmZpcnN0PSEwfXVwZGF0ZSh0LC4uLnMpe3JldHVybiF0aGlzLmNsb2NrU2duJiZ0PjA/KHRoaXMuc3RlcD0odGhpcy5zdGVwKzEpJXMubGVuZ3RoLHRoaXMuY2xvY2tTZ249dD4wLDApOih0aGlzLmNsb2NrU2duPXQ+MCxzW3RoaXMuc3RlcF0pfX1jbGFzcyBtdCBleHRlbmRzIG97dXBkYXRlKHQsLi4ucyl7Y29uc3QgZT10JXMubGVuZ3RoK3MubGVuZ3RoO3JldHVybiBzW01hdGguZmxvb3IoZSklcy5sZW5ndGhdfX1jbGFzcyBTdHt1cGRhdGUodCxzLGUsaSxuKXtsZXQgcj1QKHQscyxlKTtyZXR1cm4gUyhyLGksbil9fWNsYXNzIHd0e3VwZGF0ZSh0LHMsZSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQscyksZSl9fWNsYXNzIHZ0e2NvbnN0cnVjdG9yKCl7dGhpcy5oaT0hMX11cGRhdGUodCl7cmV0dXJuIXRoaXMuaGkmJnQ+MD8odGhpcy5oaT0hMCwxKToodGhpcy5oaSYmdDw9MCYmKHRoaXMuaGk9ITEpLDApfX1jbGFzcyB5dHtjb25zdHJ1Y3Rvcigpe3RoaXMueDE9MCx0aGlzLngyPTAsdGhpcy55MT0wLHRoaXMueTI9MCx0aGlzLmEwPTEsdGhpcy5hMT0wLHRoaXMuYTI9MCx0aGlzLmIwPTEsdGhpcy5iMT0wLHRoaXMuYjI9MH11cGRhdGUodD0wLHM9MCxlPTUwMCxpPTEsbj0xKXtjb25zdCByPTIqTWF0aC5QSSplL3NhbXBsZVJhdGUsbD1NYXRoLnNpbihyKTtpPU1hdGgucG93KDEwLGkvMjApO2NvbnN0IHU9bC8oMippKSxjPU1hdGguY29zKHIpO2lmKHM9PT0wKXRoaXMuYjE9MS1jLHRoaXMuYjA9dGhpcy5iMS8yLHRoaXMuYjI9dGhpcy5iMCx0aGlzLmEwPTErdSx0aGlzLmExPS0yKmMsdGhpcy5hMj0xLXU7ZWxzZSBpZihzPT09MSl0aGlzLmIwPSgxK2MpLzIsdGhpcy5iMT0tKDErYyksdGhpcy5iMj10aGlzLmIwLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT0yKXRoaXMuYjA9bC8yLHRoaXMuYjE9MCx0aGlzLmIyPS10aGlzLmIwLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT0zKXRoaXMuYjA9MSx0aGlzLmIxPS0yKmMsdGhpcy5iMj0xLHRoaXMuYTA9MSt1LHRoaXMuYTE9LTIqYyx0aGlzLmEyPTEtdTtlbHNlIGlmKHM9PT00KXRoaXMuYjA9MS11LHRoaXMuYjE9LTIqYyx0aGlzLmIyPTErdSx0aGlzLmEwPTErdSx0aGlzLmExPS0yKmMsdGhpcy5hMj0xLXU7ZWxzZSBpZihzPT09NSl7Y29uc3QgYT1NYXRoLnBvdygxMCxuLzQwKTt0aGlzLmIwPTErdSphLHRoaXMuYjE9LTIqYyx0aGlzLmIyPTEtdSphLHRoaXMuYTA9MSt1L2EsdGhpcy5hMT0tMipjLHRoaXMuYTI9MS11L2F9ZWxzZSBpZihzPT09Nil7Y29uc3QgYT1NYXRoLnBvdygxMCxuLzQwKSxkPTIqTWF0aC5zcXJ0KGEpKnUsZj0oYS0xKSpjLHA9KGErMSkqYzt0aGlzLmIwPWEqKGErMS1mK2QpLHRoaXMuYjE9MiphKihhLTEtcCksdGhpcy5iMj1hKihhKzEtZi1kKSx0aGlzLmEwPWErMStmK2QsdGhpcy5hMT0tMiooYS0xK3ApLHRoaXMuYTI9YSsxK2YtZH1lbHNlIGlmKHM9PT03KXtjb25zdCBhPU1hdGgucG93KDEwLG4vNDApLGQ9MipNYXRoLnNxcnQoYSkqdSxmPShhLTEpKmMscD0oYSsxKSpjO3RoaXMuYjA9YSooYSsxK2YrZCksdGhpcy5iMT0tMiphKihhLTErcCksdGhpcy5iMj1hKihhKzErZi1kKSx0aGlzLmEwPWErMS1mK2QsdGhpcy5hMT0yKihhLTEtcCksdGhpcy5hMj1hKzEtZi1kfXRoaXMuYjAvPXRoaXMuYTAsdGhpcy5iMS89dGhpcy5hMCx0aGlzLmIyLz10aGlzLmEwLHRoaXMuYTEvPXRoaXMuYTAsdGhpcy5hMi89dGhpcy5hMCx0aGlzLmEwPTE7Y29uc3QgYj10aGlzLmIwKnQrdGhpcy5iMSp0aGlzLngxK3RoaXMuYjIqdGhpcy54Mi10aGlzLmExKnRoaXMueTEtdGhpcy5hMip0aGlzLnkyO3JldHVybiB0aGlzLngyPXRoaXMueDEsdGhpcy54MT10LHRoaXMueTI9dGhpcy55MSx0aGlzLnkxPWIsYn19Y29uc3QgTXQ9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLEFEU1JOb2RlOnEsQXVkaW9JbjpsdCxBdWRpb05vZGU6byxCUEY6cnQsQmlxdWFkRmlsdGVyOnl0LEJyb3duTm9pc2VPc2M6VyxDQzpwdCxDTE9DS19QUFE6TSxDTE9DS19QUFM6TixDbGlwOnd0LENsb2NrOkYsQ2xvY2tEaXY6RCxDbG9ja091dDpMLERlbGF5OlYsRGlzdG9ydDpHLER1c3RPc2M6SyxGaWx0ZXI6bnQsRm9sZDp1dCxIb2xkOlIsSW1wdWxzZU9zYzpZLExhZzppdCxMY2dOb2lzZTpILE1pZGlDQzpidCxNaWRpRnJlcTpjdCxNaWRpR2F0ZTpvdCxNaWRpSW46bSxNaWRpVmVsOmR0LE5vaXNlT3NjOmosT3V0cHV0OkIsUGljazptdCxQaW5rTm9pc2U6WCxQdWxzZU9zYzp6LFJlbWFwOlN0LFNhd09zYzpKLFNjb3BlOmV0LFNlcXVlbmNlOmd0LFNpZGVjaGFpbkNvbXByZXNzb3I6dHQsU2lnbmFsOmZ0LFNpbmVPc2M6USxTbGV3Omh0LFNsaWRlOmF0LFRyaU9zYzpzdCxUcmlnOnZ0LFphd09zYzpafSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSkpLHg9bmV3IE1hcChPYmplY3QuZW50cmllcyhNdCkpO2NsYXNzIE90e2NvbnN0cnVjdG9yKHQscyl7Zyh0PT00OGUzKSx0aGlzLnNhbXBsZVJhdGU9dCx0aGlzLnBsYXlQb3M9MCx0aGlzLnNlbmQ9cyx0aGlzLnVuaXRzPVtdLHRoaXMudW5pdElEPTAsdGhpcy5mYWRlVGltZT0uMDEsdGhpcy5tYXhVbml0cz0xLHRoaXMucT1bXX1mYWRlT3V0VW5pdCh0KXt0LmZhZGVPdXQodGhpcy5wbGF5UG9zLHRoaXMuZmFkZVRpbWUpLHRoaXMuZnJlZVVuaXQodC5pZCx0aGlzLmZhZGVUaW1lKX1mYWRlT3V0VW5pdEJ5SWQodCl7Y29uc3Qgcz10aGlzLnVuaXRzLmZpbmQoZT0+ZS5pZD09PXQpO3MmJnRoaXMuZmFkZU91dFVuaXQocyl9ZmFkZU91dEFsbFVuaXRzKCl7dGhpcy51bml0cy5mb3JFYWNoKHQ9PnRoaXMuZmFkZU91dFVuaXQodCkpfWZhZGVPdXRPbGRVbml0cygpe2NvbnN0IHQ9dGhpcy51bml0cy5maWx0ZXIoZT0+ZS5hY3RpdmUpLHM9dC5sZW5ndGgtdGhpcy5tYXhVbml0cztzPD0wfHx0LnNsaWNlKDAscykuZm9yRWFjaChlPT50aGlzLmZhZGVPdXRVbml0KGUpKX1zdG9wKCl7dGhpcy5mYWRlT3V0QWxsVW5pdHMoKSx0aGlzLnNlbmQoe3R5cGU6IlNUT1AiLGZhZGVUaW1lOnRoaXMuZmFkZVRpbWV9KX1zcGF3blVuaXQodCxzKXtjb25zdCBlPW5ldyB4dCh0aGlzLnVuaXRJRCsrLHQsdGhpcy5zYW1wbGVSYXRlLHRoaXMuc2VuZCk7dGhpcy51bml0cy5wdXNoKGUpLGUuZmFkZUluKHRoaXMucGxheVBvcyx0aGlzLmZhZGVUaW1lKSx0aGlzLmZhZGVPdXRPbGRVbml0cygpLGNvbnNvbGUubG9nKGBzcGF3biB1bml0ICR7ZS5pZH0sIHVuaXRzIGFsaXZlOiAke3RoaXMudW5pdHMubGVuZ3RofWApLHMmJnRoaXMuc2NoZWR1bGVNZXNzYWdlKHttc2c6e3R5cGU6IkZBREVfT1VUX1VOSVQiLGlkOmUuaWR9LHRpbWU6c30pfWZyZWVVbml0KHQscyl7aWYocyl7dGhpcy5zY2hlZHVsZU1lc3NhZ2Uoe21zZzp7dHlwZToiRlJFRV9VTklUIixpZDp0fSx0aW1lOnN9KTtyZXR1cm59Y29uc3QgZT10aGlzLnVuaXRzLmxlbmd0aDt0aGlzLnVuaXRzPXRoaXMudW5pdHMuZmlsdGVyKGk9PmkuaWQhPT10KSxlPnRoaXMudW5pdHMubGVuZ3RoJiZjb25zb2xlLmxvZyhgZnJlZSB1bml0ICR7dH0sIHVuaXRzIGFsaXZlOiAke3RoaXMudW5pdHMubGVuZ3RofWApfXBhcnNlTXNnKHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UiU1BBV05fVU5JVCI6dGhpcy5zcGF3blVuaXQodC51bml0LHQuZHVyYXRpb24pO2JyZWFrO2Nhc2UiRlJFRV9VTklUIjp0aGlzLmZyZWVVbml0KHQuaWQpO2JyZWFrO2Nhc2UiRkFERV9PVVRfVU5JVCI6dGhpcy5mYWRlT3V0VW5pdEJ5SWQodC5pZCk7YnJlYWs7Y2FzZSJOT1RFX09OIjp0aGlzLm5vdGVPbih0KTticmVhaztjYXNlIkNDIjp0aGlzLm1pZGlDQyh0KTticmVhaztjYXNlIlNFVF9DT05UUk9MIjp0aGlzLnNldENvbnRyb2wodCk7YnJlYWs7Y2FzZSJGQURFX1RJTUUiOnRoaXMuZmFkZVRpbWU9TnVtYmVyKHQuZmFkZVRpbWUpO2JyZWFrO2Nhc2UiTUFYX1VOSVRTIjp0aGlzLm1heFVuaXRzPU51bWJlcih0Lm1heFVuaXRzKTticmVhaztjYXNlIlNUT1AiOnRoaXMuc3RvcCgpO2JyZWFrO2Nhc2UiU0VUX1VHRU4iOnRoaXMuYWRkVWdlbih0LmNsYXNzTmFtZSx0LnVnZW4pO2JyZWFrO2Nhc2UiU0NIRURVTEVfTVNHIjp0aGlzLnNjaGVkdWxlTWVzc2FnZSh0KTticmVhaztjYXNlIkJBVENIX01TRyI6dC5tZXNzYWdlcy5mb3JFYWNoKHM9PnRoaXMucGFyc2VNc2cocykpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihgdW5rbm93biBtZXNzYWdlIHR5cGUgJHt0LnR5cGV9YCl9fW5vdGVPbih0KXt0aGlzLnVuaXRzLmZvckVhY2gocz0+cy5ub3RlT24odCkpfW1pZGlDQyh0KXt0aGlzLnVuaXRzLmZvckVhY2gocz0+cy5taWRpQ0ModCkpfXNldENvbnRyb2wodCl7dGhpcy51bml0cy5mb3JFYWNoKHM9PnMuc2V0Q29udHJvbCh0KSl9c2NoZWR1bGVNZXNzYWdlKHQpe2lmKHQudGltZT10aGlzLnBsYXlQb3MrdC50aW1lLCF0aGlzLnEubGVuZ3RoKXt0aGlzLnEucHVzaCh0KTtyZXR1cm59bGV0IHM9MDtmb3IoO3M8dGhpcy5xLmxlbmd0aCYmdGhpcy5xW3NdLnRpbWU8dC50aW1lOylzKys7dGhpcy5xLnNwbGljZShzLDAsdCl9Z2VuU2FtcGxlKHQpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy5wbGF5UG9zOyl0aGlzLnBhcnNlTXNnKHRoaXMucVswXS5tc2cpLHRoaXMucS5zaGlmdCgpO2lmKCF0aGlzLnVuaXRzLmxlbmd0aClyZXR1cm5bMCwwXTtjb25zdCBzPVswLDBdO2ZvcihsZXQgZT0wO2U8dGhpcy51bml0cy5sZW5ndGg7ZSsrKXtjb25zdCBpPXRoaXMudW5pdHNbZV0sbj1pLmdldExldmVsKHRoaXMucGxheVBvcyk7aS5nZW5TYW1wbGUodGhpcy5wbGF5UG9zLGkubm9kZXMsdCxpLnJlZ2lzdGVycyxpLm91dHB1dHMsaS5zb3VyY2VzKSxzWzBdKz1pLm91dHB1dHNbMF0qbixzWzFdKz1pLm91dHB1dHNbMV0qbn1yZXR1cm4gdGhpcy5wbGF5UG9zKz0xLzQ4ZTMsc31hZGRVZ2VuKHQscyl7Y29uc3QgZT1uZXcgRnVuY3Rpb24oYCR7c307cmV0dXJuICR7dH1gKSgpO3guc2V0KHQsZSl9fWNsYXNzIHh0e2NvbnN0cnVjdG9yKHQscyxlLGkpe3RoaXMuaWQ9dCx0aGlzLnNhbXBsZVJhdGU9ZSx0aGlzLnNlbmQ9aSx0aGlzLm5vZGVzPVtdLHRoaXMuYWN0aXZlPSEwO2ZvcihsZXQgciBpbiBzLnVnZW5zKXtjb25zdCBsPXMudWdlbnNbcl07aWYoeC5oYXMobC50eXBlKSl7Y29uc3QgdT14LmdldChsLnR5cGUpLGM9TnVtYmVyKHIpO3RoaXMubm9kZXNbY109bmV3IHUoYyxsLHRoaXMuc2FtcGxlUmF0ZSx0aGlzLnNlbmQpfWVsc2UgY29uc29sZS53YXJuKGB1bmtub3duIHVnZW4gIiR7bC50eXBlfSJgKX10aGlzLnJlZ2lzdGVycz1uZXcgQXJyYXkocy5yZWdpc3RlcnMpLmZpbGwoMCk7bGV0IG49MTY7dGhpcy5vdXRwdXRzPW5ldyBBcnJheShuKS5maWxsKDApLHRoaXMuc291cmNlcz1uZXcgQXJyYXkobikuZmlsbCgwKSxzLnNyYz1gby5maWxsKDApOyAvLyByZXNldCBvdXRwdXRzCmArcy5zcmMsdGhpcy5nZW5TYW1wbGU9bmV3IEZ1bmN0aW9uKCJ0aW1lIiwibm9kZXMiLCJpbnB1dCIsInIiLCJvIiwicyIscy5zcmMpfW5vdGVPbih0KXt2YXIgdSxjLGI7Y29uc3R7Y2hhbm5lbDpzLG5vdGU6ZSx2ZWxvY2l0eTppfT10LG49dGhpcy5ub2Rlcy5maWx0ZXIoYT0+YS50eXBlPT09Im1pZGlmcmVxIiYmKGEuY2hhbm5lbD09PS0xfHxhLmNoYW5uZWw9PT1zKSkscj10aGlzLm5vZGVzLmZpbHRlcihhPT5hLnR5cGU9PT0ibWlkaWdhdGUiJiYoYS5jaGFubmVsPT09LTF8fGEuY2hhbm5lbD09PXMpKSxsPXRoaXMubm9kZXMuZmlsdGVyKGE9PmEudHlwZT09PSJtaWRpdmVsIiYmKGEuY2hhbm5lbD09PS0xfHxhLmNoYW5uZWw9PT1zKSk7aWYoaT4wKXtsZXQgYT1uLmZpbmQocD0+cC5pc0ZyZWUoKSl8fG5bMF0sZD1yLmZpbmQocD0+cC5pc0ZyZWUoKSl8fHJbMF0sZj1sLmZpbmQocD0+cC5pc0ZyZWUoKSl8fGxbMF07YT09bnVsbHx8YS5ub3RlT24oZSxpKSxkPT1udWxsfHxkLm5vdGVPbihlLGkpLGY9PW51bGx8fGYubm90ZU9uKGUsaSl9ZWxzZSh1PW4uZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fHUubm90ZU9mZigpLChjPXIuZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fGMubm90ZU9mZigpLChiPWwuZmluZChhPT5hLm5vdGU9PT1lKSk9PW51bGx8fGIubm90ZU9mZigpfW1pZGlDQyh0KXtjb25zdHtjaGFubmVsOnMsY2M6ZSx2YWx1ZTppfT10O3RoaXMubm9kZXMuZm9yRWFjaChuPT57bi50eXBlPT09Im1pZGljYyImJihuLmNoYW5uZWw9PT0tMXx8bi5jaGFubmVsPT09cykmJm4uY2NudW1iZXI9PT1lJiZuLnNldFZhbHVlKGkpfSl9c2V0Q29udHJvbCh0KXtjb25zdHt2YWx1ZTpzLGlkOmV9PXQsaT10aGlzLm5vZGVzLmZpbmQobj0+bi50eXBlPT09ImNjIiYmbi5pZD09PWUpO2kmJmkuc2V0VmFsdWUocyl9Z2V0TGV2ZWwodCl7cmV0dXJuIHRoaXMuZmFkZVN0YXJ0PT09dm9pZCAwPzA6dGhpcy5hY3RpdmU/UygodC10aGlzLmZhZGVTdGFydCkvdGhpcy5mYWRlVGltZSwwLC4zKTpTKCh0LXRoaXMuZmFkZVN0YXJ0KS90aGlzLmZhZGVUaW1lLHRoaXMuZmFkZUZyb20sMCl9ZmFkZUluKHQscyl7dGhpcy5mYWRlU3RhcnQ9dCx0aGlzLmZhZGVUaW1lPXN9ZmFkZU91dCh0LHMpe3RoaXMuZmFkZVRpbWU9cyx0aGlzLmZhZGVGcm9tPXRoaXMuZ2V0TGV2ZWwodCksdGhpcy5hY3RpdmU9ITEsdGhpcy5mYWRlU3RhcnQ9dH1pc0RvbmUodCl7cmV0dXJuIXRoaXMuYWN0aXZlJiZ0aGlzLmdldExldmVsKHQpPT09MH19Y2xhc3MgVHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzKSx0aGlzLmF1ZGlvR3JhcGg9bmV3IE90KDQ4ZTMsdGhpcy5wb3J0LnBvc3RNZXNzYWdlLmJpbmQodGhpcy5wb3J0KSl9b25tZXNzYWdlKHQpe2xldCBzPXQuZGF0YTt0aGlzLmF1ZGlvR3JhcGgucGFyc2VNc2cocyl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1zWzBdLG49dFswXVswXSxyPWlbMF0sbD1pWzFdO2ZvcihsZXQgdT0wO3U8ci5sZW5ndGg7dSsrKXtsZXRbYyxiXT10aGlzLmF1ZGlvR3JhcGguZ2VuU2FtcGxlKG4/blt1XTowKTtyW3VdPWMsbFt1XT1ifXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigic2FtcGxlLWdlbmVyYXRvciIsVHQpfSkoKTsK",QP="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIG4gZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiaXNSZWNvcmRpbmciLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuX2J1ZmZlclNpemU9MjA0OCx0aGlzLl9idWZmZXI9bmV3IEZsb2F0MzJBcnJheSh0aGlzLl9idWZmZXJTaXplKSx0aGlzLl9pbml0QnVmZmVyKCl9X2luaXRCdWZmZXIoKXt0aGlzLl9ieXRlc1dyaXR0ZW49MH1faXNCdWZmZXJFbXB0eSgpe3JldHVybiB0aGlzLl9ieXRlc1dyaXR0ZW49PT0wfV9pc0J1ZmZlckZ1bGwoKXtyZXR1cm4gdGhpcy5fYnl0ZXNXcml0dGVuPT09dGhpcy5fYnVmZmVyU2l6ZX1fYXBwZW5kVG9CdWZmZXIoZSl7dGhpcy5faXNCdWZmZXJGdWxsKCkmJnRoaXMuX2ZsdXNoKCksdGhpcy5fYnVmZmVyW3RoaXMuX2J5dGVzV3JpdHRlbl09ZSx0aGlzLl9ieXRlc1dyaXR0ZW4rPTF9X2ZsdXNoKCl7bGV0IGU9dGhpcy5fYnVmZmVyO3RoaXMuX2J5dGVzV3JpdHRlbjx0aGlzLl9idWZmZXJTaXplJiYoZT1lLnNsaWNlKDAsdGhpcy5fYnl0ZXNXcml0dGVuKSksdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHtldmVudFR5cGU6ImRhdGEiLGF1ZGlvQnVmZmVyOmV9KSx0aGlzLl9pbml0QnVmZmVyKCl9X3JlY29yZGluZ1N0b3BwZWQoKXt0aGlzLnBvcnQucG9zdE1lc3NhZ2Uoe2V2ZW50VHlwZToic3RvcCJ9KX1wcm9jZXNzKGUsbyxoKXtjb25zdCBpPWguaXNSZWNvcmRpbmcsZj1vWzBdLHM9ZVswXSx1PWZbMF0sXz1mWzFdO2xldCByPSExO2ZvcihsZXQgdD0wO3Q8dS5sZW5ndGg7dCsrKXQ8aS5sZW5ndGgmJihyPWlbdF09PT0xKSwhciYmIXRoaXMuX2lzQnVmZmVyRW1wdHkoKSYmKHRoaXMuX2ZsdXNoKCksdGhpcy5fcmVjb3JkaW5nU3RvcHBlZCgpKSxyJiYodGhpcy5fYXBwZW5kVG9CdWZmZXIoc1swXVt0XSksdGhpcy5fYXBwZW5kVG9CdWZmZXIoc1sxXVt0XSkpLHVbdF09c1swXVt0XSxfW3RdPXNbMV1bdF07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJyZWNvcmRlciIsbil9KSgpOwo=";function $P(i,p,x){if(i.length<1)return;i[0];const M=3,R=32,w=i.map(a=>a.length).reduce((a,r)=>a+r,0),v=R/8,T=x*v,t=44,h=new ArrayBuffer(t+w*v),g=new DataView(h);cr(g,0,"RIFF"),g.setUint32(4,36+w*v,!0),cr(g,8,"WAVE"),cr(g,12,"fmt "),g.setUint32(16,16,!0),g.setUint16(20,M,!0),g.setUint16(22,x,!0),g.setUint32(24,p,!0),g.setUint32(28,p*T,!0),g.setUint16(32,T,!0),g.setUint16(34,R,!0),cr(g,36,"data"),g.setUint32(40,w*v,!0);let o=44;for(const a of i)qP(g,o,a),o+=a.length*v;return h}function cr(i,p,x){for(let M=0;M<x.length;M++)i.setUint8(p+M,x.charCodeAt(M))}function qP(i,p,x){for(var M=0;M<x.length;M++,p+=4)i.setFloat32(p,x[M],!0)}const zu=Object.freeze(Object.defineProperty({__proto__:null,Node:oe,compile:ah,evaluate:Cy,exit:Ty,exportModule:YP,getInletName:WP,getNode:yy,module:oi,n:vi,node:$s,nodeRegistry:Ue,outputType:fo,polyType:os,register:ze,registerNode:Xt},Symbol.toStringTag,{value:"Module"}));let _P=i=>`Math.sin(${i})`,tA=i=>`Math.cos(${i})`,eA=i=>`Math.tan(${i})`,iA=i=>`Math.asin(${i})`,sA=i=>`Math.acos(${i})`,nA=i=>`Math.atan(${i})`,My=(i,p,x)=>`${i} = ${p};${x?` /* ${x} */`:""}`,oh=(i,...p)=>My(i.name,`nodes[${i.ugenIndex}].update(${p.join(",")})`,i.node.type),rA=i=>`(2 ** ((${i} - 69) / 12) * 440)`,aA=(i,p)=>`${i} ** ${p}`,oA=i=>`Math.exp(${i})`,hA=i=>`Math.log(${i})`,uA=(i,p)=>`${i}%${p}`,lA=i=>`Math.abs(${i})`,fA=i=>`Math.round(${i})`,dA=i=>`Math.floor(${i})`,cA=i=>`Math.sign(${i})`,pA=i=>`Math.ceil(${i})`,vA=(i,p)=>`Math.min(${i}, ${p})`,mA=(i,p)=>`Math.max(${i}, ${p})`,gA=(i,p)=>`[${i}, ${p}]`,Xn=i=>`${i}[0]`,xA=i=>`${i}[1]`,yA=(i,p)=>`(${Xn(i)} < ${Xn(p)} ? ${i} : ${p})`,TA=(i,p)=>`(${Xn(i)} > ${Xn(p)} ? ${i} : ${p})`;const CA=Object.freeze(Object.defineProperty({__proto__:null,abs:lA,ceil:pA,def:My,defAcos:sA,defAsin:iA,defAtan:nA,defCos:tA,defSin:_P,defTan:eA,defUgen:oh,exp:oA,floor:dA,log:hA,max:mA,midinote:rA,min:vA,mod:uA,pair_a:Xn,pair_a_max:TA,pair_a_min:yA,pair_b:xA,pair_make:gA,pow:aA,round:fA,sign:cA},Symbol.toStringTag,{value:"Module"}));class SA{constructor(p=null){this.ugens=new Map,this.outputNode=p}async spawn(p,x){this.graph=p;const{src:M,ugens:R,registers:w}=p.compile({log:!1});!this.mouse&&M.includes("mouse")&&this.initMouse(),!this.midiInited&&R.some(v=>v.type.startsWith("Midi"))&&this.initMidi(),!this.audioIn&&R.some(v=>v.type==="AudioIn")&&await this.initAudioIn(),this.sendCustomUgens(),this.send({type:"SPAWN_UNIT",unit:{src:M,ugens:R,registers:w},duration:x})}registerUgen(p){this.ugens.set(p.name,p)}sendCustomUgens(){if(!this.ugens.size)return;let p=[];for(let[x,M]of this.ugens)p.push({type:"SET_UGEN",className:x,ugen:M+""});this.send({type:"BATCH_MSG",messages:p})}scheduleMessage(p,x){this.send({type:"SCHEDULE_MSG",msg:p,time:x})}setControl(p,x,M){const R={type:"SET_CONTROL",id:p,value:x};M?this.send({type:"SCHEDULE_MSG",time:M,msg:R}):this.send(R)}setControls(p){const x={type:"BATCH_MSG",messages:p.map(M=>{const R={type:"SET_CONTROL",id:M.id,value:M.value};return M.time===void 0?R:{type:"SCHEDULE_MSG",time:M.time,msg:R}})};this.send(x)}async initAudioIn(){console.log("init audio input...");const p=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});this.audioCtx.createMediaStreamSource(p).connect(this.audioWorklet)}initMidi(){console.log("init midi input..."),this.midiInited=!0,new KP().on("midimessage",(p,x)=>{const M=kP(x);M&&this.send(M)})}initMouse(){console.log("init mouse"),this.mouse=new JP,this.mouse.on("move",(p,x)=>{this.setControl("mouseX",p),this.setControl("mouseY",x)})}send(p){lo(p instanceof Object),this.audioWorklet&&this.audioWorklet.port.postMessage(p)}async init(){if(!this.audioCtx){if(lo(!this.audioCtx),this.audioCtx=this.outputNode?.context||new AudioContext({latencyHint:"interactive",sampleRate:48e3}),await this.audioCtx.resume(),!this.audioCtx.audioWorklet)throw new Error("Audio cannot be loaded: non-secure origin? (AudioContext.audioWorklet is undefined)");await this.audioCtx.audioWorklet.addModule(jP),await this.audioCtx.audioWorklet.addModule(QP),this.audioWorklet=new AudioWorkletNode(this.audioCtx,"sample-generator",{outputChannelCount:[2]}),this.audioWorklet.port.onmessage=p=>{const{id:x,time:M,type:R}=p.data;R==="SIGNAL_TRIGGER"?this.graph.dfs(w=>{if(w.type==="signal"&&w.id===x){const v=w.callback(M,x);isNaN(v)?v!==void 0&&console.warn(`expected number from "on" callback with id "${x}", got "${v}" instead.`):window.postMessage({type:"KABELSALAT_SET_CONTROL",value:v,id:x})}return w}):R==="STOP"?setTimeout(()=>this.destroy(),p.data.fadeTime*1e3+200):R==="SEND_SAMPLES"&&this.graph.dfs(w=>(w.type!=="scope"||w.ins.length<2||w.ins[1].value!==x||window.postMessage({type:"KABELSALAT_UPDATE_SCOPE",samples:p.data.samples,channels:p.data.channels,channel:p.data.channel,id:x}),w))},this.recorder=new window.AudioWorkletNode(this.audioCtx,"recorder"),this.audioWorklet.connect(this.recorder),this.sendCustomUgens(),this.recorder.connect(this.outputNode||this.audioCtx.destination),this.recorder.port.onmessage=p=>{if(p.data.eventType==="data"&&this.recordedBuffers.push(p.data.audioBuffer),p.data.eventType==="stop"){console.log("recording stopped");const x=$P(this.recordedBuffers,this.audioCtx.sampleRate,2);MA(x,"kabelsalat.wav","audio/wav"),this.recordedBuffers=[]}},this.recordOnPlay&&this.record()}}destroy(){this.audioWorklet?.disconnect(),this.audioWorklet=null,this.recorder?.disconnect(),this.recorder=null,!this.outputNode&&this.audioCtx?.close(),this.audioCtx=null}stop(){this.audioCtx&&this.send({type:"STOP"}),this.mouse?.detach()}record(){if(!this.audioCtx){this.recordOnPlay=!0;return}this.recordedBuffers=[],this.recorder.parameters.get("isRecording").setValueAtTime(1,0),console.log("recording started")}stopRecording(){this.recordOnPlay=!1,this.audioCtx&&this.recorder.parameters.get("isRecording").setValueAtTime(0,0)}set fadeTime(p){this.send({type:"FADE_TIME",fadeTime:p})}set maxUnits(p){this.send({type:"MAX_UNITS",maxUnits:p})}}function MA(i,p,x){const M=new Blob([i],{type:x}),R=document.createElement("a");R.href=window.URL.createObjectURL(M),R.download=p,R.click()}let EA=0;ze("signal",(i,p)=>{const x=EA++,M=getNode("signal",i,x);return M.callback=p,M.id=x,M},{ugen:"Signal",compile:({vars:[i,p],...x})=>oh(x,i,p,"time")});let PA=i=>`sin(${i})`,AA=i=>`cos(${i})`,RA=i=>`tan(${i})`,FA=i=>`asin(${i})`,LA=i=>`acos(${i})`,DA=i=>`atan(${i})`,co=(i,p,x)=>`${i} = ${p};${x?` /* ${x} */`:""}`,wA=(i,...p)=>{if(p.unshift(`nodes[${i.ugenIndex}]`),i.ugen==="Sequence"||i.ugen==="Pick"){const x=p.length-2,M=`(float[${x}]){${p.slice(2).join(",")}}`;return co(i.name,`${i.ugen}_update(${p[0]}, ${p[1]}, ${x}, ${M})`,i.ugen)}return co(i.name,`${i.ugen}_update(${p.join(",")})`,i.ugen)},GA=i=>`pow(2.0, ((${i} - 69.0) / 12.0)) * 440.0`,bA=(i,p)=>`pow(${i}, ${p})`,IA=i=>`exp(${i})`,OA=i=>`log(${i})`,BA=(i,p)=>`${i}>=${p}?${i}-${p}:${i}`,XA=i=>`fabs(${i})`,NA=(i,p)=>`fmin(${i}, ${p})`,VA=(i,p)=>`fmax(${i}, ${p})`,zA=i=>`fround(${i})`,WA=i=>`floor(${i})`,ZA=i=>`ceil(${i})`,YA=(i,p)=>`((pair) {${i}, ${p}})`,Nn=i=>`${i}.a`,UA=i=>`${i}.b`,HA=(i,p)=>`(${Nn(i)} < ${Nn(p)} ? ${i} : ${p})`,KA=(i,p)=>`(${Nn(i)} > ${Nn(p)} ? ${i} : ${p})`;const kA=Object.freeze(Object.defineProperty({__proto__:null,abs:XA,ceil:ZA,def:co,defAcos:LA,defAsin:FA,defAtan:DA,defCos:AA,defSin:PA,defTan:RA,defUgen:wA,exp:IA,floor:WA,log:OA,max:VA,midinote:GA,min:NA,mod:BA,pair_a:Nn,pair_a_max:KA,pair_a_min:HA,pair_b:UA,pair_make:YA,pow:bA,round:zA},Symbol.toStringTag,{value:"Module"})),Ct={js:CA,c:kA},Ey=(i,p)=>Xt(i,{ugen:p,compile:({vars:x,...M})=>Ct[M.lang].defUgen(M,...x)});let JA=ze("time",i=>new oe("time",i),{tags:["meta"],description:"Returns elapsed time in seconds",compile:({name:i,lang:p})=>Ct[p].def(i,"time")}),jA=ze("raw",(i,p)=>new oe("raw",p).withIns(vi(i)),{ins:[{name:"in"},{name:"code",description:"expression with variable `t` being the elapsed time and `$input` the input."}],tags:["meta"],description:"Raw code node, expects floats between -1 and 1",compile:({vars:i,node:p,name:x})=>`let $input = ${i[0]}; 
const ${x} = (${p.value}); // raw`,examples:[`sine(4).range(.5,1)
.raw("(time*110%1*2-1)*$input")
.out()`]}),QA=ze("bytebeat",(i,p)=>new oe("bytebeat",p).withIns(vi(i)),{ins:[{name:"t",description:"time in samples"},{name:"code",description:"bytebeat code with variable `t`"}],tags:["meta"],description:"Bytebeat node, expects numbers from 0 to 255",examples:[`time().mul(8000).bytebeat\`
// Fractalized Past
// by: lhphr
// from: https://dollchan.net/btb/res/3.html#69

(t>>10^t>>11)%5*((t>>14&3^t>>15&1)+1)*t%99+((3+(t>>14&3)-(t>>16&1))/3*t%99&64)
\`.out()`],compile:({vars:i,node:p,name:x})=>`let t = ${i[0]}; 
const ${x} = ((${p.value}) & 255) / 127.5 - 1; // bytebeat`}),$A=ze("floatbeat",(i,p)=>new oe("bytebeat",p).withIns(vi(i)),{ins:[{name:"t",description:"time in samples"},{name:"code",description:"floatbeat code with variable `t`"}],tags:["meta"],description:"Raw code node, expects numbers from -1 to 1",compile:({vars:i,node:p,name:x})=>`let t = ${i[0]}; const ${x} = (${p.value}); // floatbeat`}),qA=Xt("adsr",{ugen:"ADSRNode",tags:["envelope"],description:"ADSR envelope",examples:[`impulse(1).perc(.5)
.adsr(.01, .1, .5, .1)
.mul(sine(220)).out()`],ins:[{name:"gate",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"dec",default:.1,description:"decay time"},{name:"sus",default:.2,description:"sustain level"},{name:"rel",default:.1,description:"release time"}],compile:({vars:[i=0,p=.02,x=.1,M=.2,R=.1],...w})=>Ct[w.lang].defUgen(w,"time",i,p,x,M,R)}),_A=oi("ar",(i=0,p=.02,x=.1)=>i.adsr(p,0,1,x),{tags:["envelope"],description:"AR envelope",examples:["impulse(1).ad(.01, .1).mul(sine(220)).out()"],ins:[{name:"trig",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"rel",default:.1,description:"release time"}]}),tR=oi("ad",(i=0,p=.02,x=.1)=>i.adsr(p,x,0,x),{tags:["envelope"],description:"AD envelope",examples:["impulse(1).ad(.01, .1).mul(sine(220)).out()"],ins:[{name:"trig",default:0,description:"gate input"},{name:"att",default:.02,description:"attack time"},{name:"dec",default:.1,description:"decay time"}]}),eR=Xt("clock",{ugen:"Clock",internal:!0,tags:["regular","clock"],description:"Clock source, with tempo in BPM",examples:["clock(120).clockdiv(16).mul(sine(220)).out()"],ins:[{name:"bpm",default:120,description:"clock tempo in bpm (beats per minute)"}],compile:({vars:[i=120],...p})=>Ct[p.lang].defUgen(p,i)}),iR=Xt("clockdiv",{ugen:"ClockDiv",tags:["clock","trigger"],description:"Clock signal divider",examples:["impulse(8).clockdiv(2).ad(.1,.1).mul(sine(220)).out()"],ins:[{name:"clock",default:0,description:"clock input"},{name:"divisor",default:2,description:"tempo divisor"}],compile:({vars:[i=0,p=2],...x})=>Ct[x.lang].defUgen(x,i,p)}),sR=Xt("distort",{ugen:"Distort",tags:["fx","distortion"],description:"Overdrive-style distortion",examples:[`sine(220)
.distort( saw(.5).range(0,1) )
.out()`],ins:[{name:"in",default:0},{name:"amt",default:0,description:"distortion amount"}],compile:({vars:[i=0,p=0],...x})=>Ct[x.lang].defUgen(x,i,p)}),Py=Xt("noise",{ugen:"NoiseOsc",tags:["source","noise"],description:"White noise source",examples:["noise().mul(.25).out()"],ins:[{name:"next",default:1,description:"if 0, the noise will hold the previous value. defaults to 1."}],compile:({lang:i,vars:[p=1],...x})=>Ct[i].defUgen(x,p)}),nR=Xt("lcgnoise",{ugen:"LcgNoise",tags:["source","noise"],description:"Lcg white noise source.",examples:["lcgnoise().mul(.25).out()"],ins:[{name:"next",default:1,description:"if 0, the noise will hold the previous value. defaults to 1."},{name:"reset",default:0,description:"if 1, the random number generator sequence will reset."}],compile:({lang:i,vars:[p=1,x=0],...M})=>Ct[i].defUgen(M,p,x)}),rR=Xt("pink",{ugen:"PinkNoise",tags:["source","noise"],description:"Pink noise source",examples:["pink().mul(.5).out()"],ins:[],compile:({lang:i,...p})=>Ct[i].defUgen(p)}),aR=Xt("brown",{ugen:"BrownNoiseOsc",tags:["source","noise"],description:"Brown noise source",examples:["brown().out()"],ins:[],compile:({lang:i,...p})=>Ct[i].defUgen(p)}),oR=Xt("dust",{ugen:"DustOsc",tags:["trigger","noise","source"],description:"Generates random impulses from 0 to +1.",examples:["dust(200).out()"],ins:[{name:"density",default:0,description:"average impulses per second"}],compile:({vars:[i=0],...p})=>Ct[p.lang].defUgen(p,i)}),Ay=Xt("impulse",{ugen:"ImpulseOsc",tags:["regular","trigger"],description:"Regular single sample impulses (0 - 1)",examples:["impulse(10).out()"],ins:[{name:"freq",default:0},{name:"phase",default:0}],compile:({vars:[i=0,p=0],...x})=>Ct[x.lang].defUgen(x,i,p)}),hR=Xt("saw",{ugen:"SawOsc",tags:["regular","waveform","source"],description:"Sawtooth wave oscillator with anti aliasing",examples:["saw(110).mul(.5).out()"],ins:[{name:"freq",default:0}],compile:({vars:[i=0],...p})=>Ct[p.lang].defUgen(p,i)}),uR=Xt("zaw",{ugen:"ZawOsc",tags:["regular","waveform","source"],description:"Sawtooth wave oscillator with sharp edges. Use saw for anti aliased variant.",examples:["zaw(110).mul(.5).out()"],ins:[{name:"freq",default:0}],compile:({vars:[i=0],...p})=>Ct[p.lang].defUgen(p,i)}),lR=Xt("sine",{tags:["regular","waveform","source"],ugen:"SineOsc",description:"Sine wave oscillator",examples:["sine(220).out()"],ins:[{name:"freq",default:0},{name:"sync",default:0,description:"sync input"},{name:"phase",default:0,description:"phase offset"}],compile:({vars:[i=0,p=0,x=0],...M})=>Ct[M.lang].defUgen(M,i,p,x)}),fR=Xt("tri",{ugen:"TriOsc",tags:["regular","waveform","source"],description:"Triangle wave oscillator",examples:["tri(220).out()"],ins:[{name:"freq",default:0}],compile:({vars:[i=0],...p})=>Ct[p.lang].defUgen(p,i)}),dR=Xt("pulse",{ugen:"PulseOsc",tags:["regular","waveform","source"],description:"Pulse wave oscillator",examples:["pulse(220, sine(.1).range(.1,.5)).mul(.5).out()"],ins:[{name:"freq",default:0},{name:"pw",default:.5,description:"pulse width 0 - 1"}],compile:({vars:[i=0,p=.5],...x})=>Ct[x.lang].defUgen(x,i,p)}),cR=Xt("slide",{ugen:"Slide",tags:["fx"],internal:!0,description:"Slide/portamento node",examples:[`impulse(2).seq(55,110,220,330)
.slide(4).sine().out()`],ins:[{name:"in",default:0},{name:"rate",default:1}],compile:({vars:[i=0,p=1],...x})=>Ct[x.lang].defUgen(x,i,p)}),pR=Xt("lag",{ugen:"Lag",tags:["fx"],description:"Smoothes a signal. Good for slide / portamento effects.",examples:[`impulse(2).seq(220,330,440,550)
.lag(.4).sine().out()`],ins:[{name:"in",default:0},{name:"rate",default:1,description:"60 dB lag time in seconds"}],compile:({vars:[i=0,p=1],...x})=>Ct[x.lang].defUgen(x,i,p)}),vR=Xt("slew",{ugen:"Slew",tags:["fx"],description:"Limits the slope of an input signal. The slope is expressed in units per second.",examples:["pulse(800).slew(4000, 4000).out()"],ins:[{name:"in",default:0},{name:"up",default:1,description:"Maximum upward slope in units per second"},{name:"dn",default:1,description:"Maximum downward slope in units per second"}],compile:({vars:[i=0,p=1,x=1],...M})=>Ct[M.lang].defUgen(M,i,p,x)}),Ry=Xt("filter",{ugen:"Filter",tags:["fx","filter"],internal:!0,description:"Two-pole low-pass filter",examples:["saw(55).lpf( sine(1).range(.4,.8) ).out()"],ins:[{name:"in",default:0},{name:"cutoff",default:1},{name:"reso",default:0}],compile:({vars:[i=0,p=1,x=0],...M})=>Ct[M.lang].defUgen(M,i,p,x)}),mR=Xt("fold",{ugen:"Fold",tags:["fx","distortion","limiter"],description:'Distort incoming audio signal by "folding"',examples:[`sine(55)
.fold( sine(.5).range(0.2,4) )
.out()`],ins:[{name:"in",default:0},{name:"rate",default:0}],compile:({vars:[i=0,p=0],...x})=>Ct[x.lang].defUgen(x,i,p)}),gR=Xt("seq",{ugen:"Sequence",tags:["sequencer"],description:"Trigger controlled sequencer",examples:[`impulse(2).seq(220,330,440,550)
.sine().out()`],ins:[{name:"trig",default:0},{name:"step",default:0,dynamic:!0,description:"step inputs"}],compile:({vars:i,...p})=>Ct[p.lang].defUgen(p,...i)}),xR=Xt("delay",{ugen:"Delay",tags:["fx"],description:"Delay line node",examples:[`impulse(1).ad(.01,.2).mul(sine(220))
.add(x=>x.delay(.1).mul(.8)).out()`],ins:[{name:"in",default:0},{name:"time",default:0}],compile:({vars:[i=0,p=0],...x})=>Ct[x.lang].defUgen(x,i,p)}),yR=Xt("hold",{ugen:"Hold",tags:["fx"],description:"Sample and hold",examples:[`noise().hold(impulse(2))
.range(220,880).sine().out()`],ins:[{name:"in",default:0},{name:"trig",default:0}],compile:({vars:[i=0,p=0],...x})=>Ct[x.lang].defUgen(x,i,p)}),TR=Xt("midifreq",{ugen:"MidiFreq",tags:["external","midi"],description:"Outputs frequency of midi note in. Multiple instances will do voice allocation",examples:["midifreq().sine().out()"],ins:[{name:"channel",default:-1,description:"Channel filter. Defaults to all channels"}],compile:({vars:[i=-1],...p})=>Ct[p.lang].defUgen(p,i)}),CR=Xt("midigate",{ugen:"MidiGate",tags:["external","midi"],description:"outputs gate of midi note in. Multiple instances will do voice allocation",examples:["midigate().lag(1).mul(sine(220)).out()"],ins:[{name:"channel",default:-1}],compile:({vars:[i=-1],...p})=>Ct[p.lang].defUgen(p,i)}),SR=Xt("midivel",{ugen:"MidiVel",tags:["external","midi"],description:"outputs velocity of midi note in. Multiple instances will do voice allocation",examples:["midigate().ar(0.01,0.2).mul(saw(midifreq())).mul(midivel()).mul(.8).out()"],ins:[{name:"channel",default:-1}],compile:({vars:[i=-1],...p})=>Ct[p.lang].defUgen(p,i)}),MR=Xt("midicc",{ugen:"MidiCC",tags:["external","midi"],description:"Outputs bipolar value of given midi cc number. initValue can be set to be the output before getting first cc message.",examples:["midicc(74).range(100,200).sine().out()"],ins:[{name:"ccnumber",default:-1},{name:"channel",default:-1},{name:"initValue",default:-1}],compile:({vars:[i=-1,p=-1],...x})=>Ct[x.lang].defUgen(x,i,p)}),hh=Xt("cc",{ugen:"CC",tags:["external"],description:"CC control",ins:[{name:"id",default:0},{name:"value",default:0}],compile:({vars:[i],...p})=>Ct[p.lang].defUgen(p,i)}),ER=Xt("audioin",{ugen:"AudioIn",tags:["source","external"],description:"External Audio Input, depends on your system input",examples:["audioin().add(x=>x.delay(.1).mul(.8)).out()"],ins:[],compile:i=>Ct[i.lang].defUgen(i,"input")}),po=Xt("log",{tags:["math"],description:"calculates the logarithm (base 10) of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].log(i))}),Fy=Xt("exp",{tags:["math"],description:"raises e to the power of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].exp(i))}),PR=Xt("pow",{tags:["math"],description:"raises the input to the given power",ins:[{name:"in"},{name:"power"}],compile:({vars:[i=0,p=1],name:x,lang:M})=>Ct[M].def(x,Ct[M].pow(i,p))}),Ly=Xt("sin",{tags:["math"],description:"calculates the sine of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].defSin(i))}),Dy=Xt("cos",{tags:["math"],description:"calculates the cosine of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].defCos(i))}),AR=Xt("tan",{tags:["math"],description:"calculates the tan of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].defTan(i))}),RR=Xt("acos",{tags:["math"],description:"calculates the acos of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].defAcos(i))}),FR=Xt("asin",{tags:["math"],description:"calculates the asin of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].defAsin(i))}),LR=Xt("atan",{tags:["math"],description:"calculates the atan of the input signal",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].defAtan(i))}),DR=Xt("mul",{tags:["math"],description:"Multiplies the given signals.",examples:["sine(220).mul( sine(4).range(.25,1) ).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,i.join(" * ")||0)}),uh=Xt("add",{tags:["math"],description:"sums the given signals",examples:["n([0,3,7,10]).add(60).midinote().sine().mix(2).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,i.join(" + ")||0)}),wR=Xt("div",{tags:["math"],description:"adds the given signals",ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,i.join(" / ")||0)}),GR=Xt("sub",{tags:["math"],description:"subtracts the given signals",ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,i.join(" - ")||0)}),bR=Xt("mod",{tags:["math"],description:"calculates the modulo",examples:["add(x=>x.add(.003).mod(1)).out()"],ins:[{name:"in"},{name:"modulo"}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,Ct[x].mod(...i)||0)}),IR=Xt("abs",{tags:["math"],description:"returns the absolute value of the signal",ins:[{name:"in"}],examples:["sine(440).abs().out()"],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].abs(i))}),OR=Xt("round",{tags:["math"],description:"Rounds the signal to the nearest integer",ins:[{name:"in"}],examples:["sine(440.5).round().out()"],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].round(i))}),BR=Xt("clamp",{tags:["math"],description:"Clamps the signal to stay within the given range",ins:[{name:"in"},{name:"min"},{name:"max"}],examples:["sine(440.5).clamp(-.6,.6).out()"],compile:({vars:[i=0,p=-1,x=1],name:M,lang:R})=>{const w=Ct[R].min(p,x),v=Ct[R].max(p,x),T=Ct[R].min(Ct[R].max(i,w),v);return Ct[R].def(M,T)}}),XR=Xt("floor",{tags:["math"],description:"Rounds the signal down",ins:[{name:"in"}],examples:["sine(440.5).floor().out()"],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].floor(i))}),NR=Xt("ceil",{tags:["math"],description:"Rounds the signal up",ins:[{name:"in"}],examples:["sine(440.5).ceil().out()"],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].ceil(i))}),VR=Xt("sign",{tags:["math"],description:"Returns 1 if positive and -1 if negative. uses Math.sign",ins:[{name:"in"}],examples:["sine(440.5).ceil().out()"],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,Ct[x].sign(i))}),zR=Xt("min",{tags:["math"],description:"returns the minimum of the given signals",examples:["impulse(4).apply(x => min(x.seq(0,3,2), x.seq(0,7,0,5,0)).add(48).midinote().sine()).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,i.reduce(Ct[x].min)||0)}),WR=Xt("max",{tags:["math"],description:"returns the maximum of the given signals",examples:["impulse(4).apply(x => max(x.seq(0,3,2), x.seq(0,7,0,5,0)).add(48).midinote().sine()).out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,i.reduce(Ct[x].max)||0)}),ZR=Xt("argmin",{tags:["math"],description:"returns the index of the minimum of the given signals",examples:["argmin(saw(1), saw(3), saw(5)).mul(12).add(48).midinote().sine().out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,Ct[x].pair_b(i.map(Ct[x].pair_make).reduce(Ct[x].pair_a_min))||0)}),YR=Xt("argmax",{tags:["math"],description:"returns the index of the maximum of the given signals",examples:["argmax(saw(1), saw(3), saw(5)).mul(12).add(48).midinote().sine().out()"],ins:[{name:"in",dynamic:!0}],compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,Ct[x].pair_b(i.map(Ct[x].pair_make).reduce(Ct[x].pair_a_max))||0)}),wy=Xt("greater",{tags:["logic"],description:"returns 1 if input is greater then threshold",ins:[{name:"in"},{name:"threshold"}],examples:[`greater(sine(1),0)
.bipolar().range(100,200)
.sine().out()`],compile:({vars:[i=0,p=0],name:x,lang:M})=>Ct[M].def(x,`${i} > ${p}`)}),Gy=Xt("lower",{tags:["logic"],description:"returns 1 if input is lower then threshold",ins:[{name:"in"},{name:"threshold"}],examples:[`lower(sine(1),0)
.bipolar().range(100,200)
.sine().out()`],compile:({vars:[i=0,p=0],name:x,lang:M})=>Ct[M].def(x,`${i} < ${p}`)}),UR=wy,HR=Gy,KR=Xt("xor",{tags:["logic"],description:"returns 1 if exactly one of the inputs is 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[i=0,p=0],name:x,lang:M})=>Ct[M].def(x,`${i} != ${p} ? 1 : 0`)}),kR=Xt("and",{tags:["logic"],description:"returns 1 if both inputs are 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[i=0,p=0],name:x,lang:M})=>Ct[M].def(x,`${i} && ${p} ? 1 : 0`)}),JR=Xt("or",{tags:["logic"],description:"returns 1 if one or both inputs are 1",ins:[{name:"a"},{name:"b"}],compile:({vars:[i=0,p=0],name:x,lang:M})=>Ct[M].def(x,`${i} || ${p} ? 1 : 0`)}),jR=Xt("not",{tags:["logic"],description:"returns 1 if input is 0, otherwise 0",ins:[{name:"in"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,`(${i} === 0 ? 1 : 0)`)}),QR=Xt("bool",{tags:["logic"],description:"returns 1 signal is non zero. inspired by genish",ins:[{name:"a"}],compile:({vars:[i=0],name:p,lang:x})=>Ct[x].def(p,`(${i} === 0 ? 0 : 1)`)}),$R=Xt("ifelse",{tags:["logic"],description:"if control is 1, a is returned, otherwise b",ins:[{name:"control"},{name:"a"},{name:"b"}],compile:({vars:[i=0,p=0,x=0],name:M,lang:R})=>Ct[R].def(M,`(${i} === 1 ? ${p} : ${x})`),examples:["ifelse(pulse(1), sine(220), sine(330)).out()"]}),qR=Xt("range",{tags:["math"],description:"Scales the incoming bipolar value to the given range.",examples:["sine(.5).range(.25,1).mul(sine(440)).out()"],ins:[{name:"in"},{name:"min"},{name:"max"}],compile:({vars:i,name:p,lang:x})=>{const[M,R,w,v=1]=i,T=`((${M} + 1) * 0.5)`,t=v===1?T:Ct[x].pow(T,v);return Ct[x].def(p,`${t} * (${w} - ${R}) + ${R}`)}}),_R=Xt("remap",{ugen:"Remap",tags:["math"],description:"Remaps input from one value range to another",ins:[{name:"in"},{name:"inmin"},{name:"inmax"},{name:"outmin"},{name:"outmax"}],compile:({vars:[i=0,p=-1,x=1,M=-1,R=1],...w})=>Ct[w.lang].defUgen(w,i,p,x,M,R)}),tF=Xt("thru",{compile:({name:i,vars:p,lang:x})=>Ct[x].def(i,p[0],"thru")}),eF=oi("rangex",(i,p,x)=>{let M=po(p),R=po(x).sub(M),w=i.unipolar().mul(R).add(M);return Fy(w)},{tags:["math"],description:"exponential range",ins:[{name:"in"},{name:"min"},{name:"max"}],examples:["sine([1,3]).rangex(100, 2e3).sine().out()"]}),iF=Xt("midinote",{compile:({vars:[i],name:p,lang:x})=>Ct[x].def(p,Ct[x].midinote(i)),tags:["math"],description:"convert midi number to frequency",ins:[{name:"midi"}],examples:[`impulse(4).seq(0,3,7,12).add(60)
.midinote().sine().out()`]}),sF=Xt("src",{internal:!0,compile:({vars:[i=0],name:p,lang:x,...M})=>Ct[x].def(p,M.getSource(i),`read source ${i}`)}),nF=Xt("output",{internal:!0,ugen:"Output",compile:({vars:[i,p=0],name:x,lang:M,...R})=>{const w=R.getOutput(p),v=R.getSource(p);return[Ct[M].def(w,[w,i].join(" + "),`+ output ${p}`),Ct[M].def(v,w,`write source ${p}`)].join(`
`)}}),by=Xt("poly"),Iy=vi(Math.PI),rF=ze("fork",(i,p=1)=>by(...Array.from({length:p},()=>i.clone())),{ins:[{name:"in"},{name:"times"}],tags:["multi-channel"],description:"split the signal into n channels",examples:["dust(4).fork(2).adsr(.1).mul(sine(220)).out()"]}),aF=oi("perc",(i,p)=>i.adsr(0,0,1,p),{tags:["envelope"],description:"percussive envelope. usable with triggers or gates",ins:[{name:"gate"},{name:"release"}],examples:["impulse(4).perc(.1).mul( pink() ).out()"]}),oF=oi("hpf",(i,p,x=0)=>i.sub(i.lpf(p,x)),{ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"high pass filter",tags:["fx","filter"],examples:["tri([220,331,442]).mix().hpf(sine(.5).range(0,.9)).out()"]}),hF=oi("lpf",Ry,{ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"low pass filter",tags:["fx","filter"],examples:["saw(55).lpf( sine(1).range(.4,.8) ).out()"]}),uF=Xt("bpf",{ugen:"BPF",ins:[{name:"in"},{name:"cutoff"},{name:"reso"}],description:"high pass filter",tags:["fx","filter"],compile:({vars:[i=0,p=1,x=0],...M})=>Ct[M.lang].defUgen(M,i,p,x)}),lF=oi("lfnoise",i=>Py().hold(Ay(i)),{ins:[{name:"freq"}],description:"low frequency stepped noise.",tags:["regular","noise"],examples:["lfnoise(4).range(200,800).sine().out()"]}),fF=oi("bipolar",i=>vi(i).mul(2).sub(1),{ins:[{name:"in"}],description:"convert unipolar [0,1] signal to bipolar [-1,1]",tags:["math"]}),dF=oi("unipolar",i=>vi(i).add(1).div(2),{ins:[{name:"in"}],description:"convert bipolar [-1,1] signal to unipolar [0,1]",tags:["math"]}),cF=oi("pan",(i,p)=>(p=vi(p).add(1).mul(Iy,.25),i.mul([Dy(p),Ly(p)])),{ins:[{name:"in"},{name:"pos",description:"bipolar position: -1 = left, 0 = center, 1 = right"}],description:"pans signal to stereo position. splits signal path in 2",tags:["multi-channel"],examples:["sine(220).pan(sine(.25)).out()"]}),pF=Xt("pick",{tags:["multi-channel"],ugen:"Pick",description:"Pick",ins:[{name:"index"},{name:"inputs",dynamic:!0}],description:"picks input of given index",examples:[`sine(.25).range(0,2).round()
.pick(...sine([220,330,440]).ins)
.out()`],compile:({vars:i,...p})=>Ct[p.lang].defUgen(p,...i)}),vF=Xt("clip",{tags:["fx"],ugen:"Clip",description:"Hard limits the signal between lo and hi.",ins:[{name:"input"},{name:"lo"},{name:"hi"}],compile:({vars:[i=0,p=-1,x=1],...M})=>Ct[M.lang].defUgen(M,i,p,x)}),mF=Xt("trig",{tags:["trigger"],ugen:"Trig",description:"Emits a trigger impulse whenever the signal becomes positive. Useful to turn gates into triggers.",ins:[{name:"input",default:0},{name:"lo",default:-1},{name:"hi",default:1}],compile:({vars:[i=0,p=-1,x=1],...M})=>Ct[M.lang].defUgen(M,i,p,x),examples:[`pulse(2)
.trig() // comment out to hear difference
.ar(.01,.2)
.mul(sine(200)).out()`]}),gF=Xt("qf",{tags:["fx","filter"],ugen:"BiquadFilter",description:"biQuad Filter.",ins:[{name:"input",default:0},{name:"type",default:0,description:"filter type: 0 = lowpass, 1 = highpass, 2 = band pass, 3 = notch, 4 = allpass, 5 = peaking, 6 = lowshelf, 7 = highshelf"},{name:"freq",default:500,description:"filter cutoff in Hz"},{name:"q",default:1,description:"q factor"},{name:"gain",default:1}],compile:({vars:i,...p})=>Ct[p.lang].defUgen(p,...i),examples:[`pink()
.qf(
 impulse(.5).seq(0,1,2,3,4,5,6,7), // type
  tri(0.5).rangex(100, 8000),  // freq
 10, // Q
 1, // gain (only relevant for types 5-7)
).div(4).out();`]}),xF=ze("qlpf",(i,p,x=10)=>i.qf(0,p,x),{description:"biQuad Low Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qlpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),yF=ze("qhpf",(i,p,x=10)=>i.qf(1,p,x),{description:"biQuad High pass filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qhpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),TF=ze("qbpf",(i,p,x=10)=>i.qf(2,p,x),{description:"biQuad Band Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qbpf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),CF=ze("qnf",(i,p,x=10)=>i.qf(3,p,x),{description:"biQuad Notch Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`pink().qnf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),SF=ze("qapf",(i,p,x=10)=>i.qf(3,p,x),{description:"biQuad All Pass Filter",ins:[{name:"input"},{name:"freq"},{name:"q",description:"resonance"}],tags:["fx","filter"],examples:[`impulse(1).qapf(
  tri(0.5).rangex(100, 8000), // cutoff freq
  10 // Q
).out()`]}),MF=ze("split",(i,p)=>i.type!=="poly"?p([i]):p(i.ins),{ins:[{name:"input"},{name:"fn"}],tags:["multi-channel"],description:"apply fn to an array of signals, one for each channel in input",examples:["sine([220,330,550]).split(chs => add(...chs)).out()"]}),EF=ze("mix",(i,p=1)=>{if([1,2].includes(p)||(p=2,console.warn("mix only supports 1 or 2 channels atm.. falling back to 2")),i.type!=="poly")return i;if(p===2){const x=i.ins.map((M,R,w)=>{const v=(R/(w.length-1)*2-1+1)*Math.PI/4;return M.mul([Math.cos(v),Math.sin(v)]).inherit(i)});return uh(...x)}return i.ins=i.ins.map(x=>x.inherit(i)),$s("mix").withIns(...i.ins)},{compile:({vars:i,name:p,lang:x})=>Ct[x].def(p,`(${i.join(" + ")})`),description:`mixes down multiple channels. Useful to make sure you get a mono or stereo signal out at the end. 
When mixing down to 2 channels, the input channels are equally distributed over the stereo image, e.g. 3 channels are panned [-1,0,1]`,ins:[{name:"in"},{name:"channels",default:1,description:"how many channels to mix down to. Only supports 1 and 2"}],tags:["multi-channel"],examples:["sine([220,330,440]).mix(2).out()"]});oe.prototype.feedback=function(i){return this.add(i)};let PF=i=>uh(i),AF=vi,RF=vi,FF=oi("mouseX",()=>hh("mouseX"),{ins:[],description:"X position of mouse, bipolar range",tags:["external"],examples:["mouseX.range(100,800).sine().out()"]}),LF=FF(),DF=oi("mouseY",()=>hh("mouseY"),{ins:[],description:"Y position of mouse, bipolar range",tags:["external"],examples:["mouseY.range(800,100).sine().out()"]}),wF=DF(),GF=ze("scope",(i,p)=>{let x=1;i.type==="poly"&&(x=i.ins.length);const M=getNode("scope",i,p,x);return M.type!=="poly"?(M.ins.push({type:"n",value:0,ins:[]}),M):(M.ins.forEach((R,w)=>R.ins.push({type:"n",value:w,ins:[]})),M)},{ugen:"Scope",description:"renders an an oscilloscope of the current point in the graph. expects values between -1 and 1. warning: this feature is still experimental! when using it, make sure to not switch tabs, as it might fry your browser.",compile:({vars:[i,p,x,M],...R})=>oh(R,i,p,x,M)});const Wu=Object.freeze(Object.defineProperty({__proto__:null,B:AF,PI:Iy,_:RF,abs:IR,acos:RR,ad:tR,add:uh,adsr:qA,and:kR,ar:_A,argmax:YR,argmin:ZR,asin:FR,atan:LR,audioin:ER,bipolar:fF,bool:QR,bpf:uF,brown:aR,bytebeat:QA,cc:hh,ceil:NR,clamp:BR,clip:vF,clock:eR,clockdiv:iR,cos:Dy,delay:xR,distort:sR,div:wR,dust:oR,exp:Fy,feedback:PF,filter:Ry,floatbeat:$A,floor:XR,fold:mR,fork:rF,greater:wy,gt:UR,hold:yR,hpf:oF,ifelse:$R,impulse:Ay,lag:pR,lfnoise:lF,log:po,lower:Gy,lpf:hF,lt:HR,max:WR,midicc:MR,midifreq:TR,midigate:CR,midinote:iF,midivel:SR,min:zR,mix:EF,mod:bR,mouseX:LF,mouseY:wF,mul:DR,noise:Py,not:jR,or:JR,output:nF,pan:cF,perc:aF,pick:pF,pink:rR,poly:by,pow:PR,pulse:dR,qapf:SF,qbpf:TF,qf:gF,qhpf:yF,qlpf:xF,qnf:CF,range:qR,rangex:eF,raw:jA,registerUgen:Ey,remap:_R,rng:nR,round:OR,saw:hR,scope:GF,seq:gR,sign:VR,sin:Ly,sine:lR,slew:vR,slide:cR,split:MF,src:sF,sub:GR,tan:AR,thru:tF,time:JA,tri:fR,trig:mF,unipolar:dF,xor:KR,zaw:uR},Symbol.toStringTag,{value:"Module"}));class bF{constructor({onToggle:p,onToggleRecording:x,beforeEval:M,transpiler:R,localScope:w=!1,outputNode:v=null}={}){this.outputNode=v,this.audio=new SA(this.outputNode),this.onToggle=p,this.transpiler=R,this.onToggleRecording=x,this.beforeEval=M,this.localScope=w,typeof window<"u"&&(w||(Object.assign(globalThis,zu),Object.assign(globalThis,Wu),Object.assign(globalThis,Vu),Object.assign(globalThis,{repl:this})),window.addEventListener("message",t=>{t.data.type==="KABELSALAT_SET_CONTROL"&&this.audio.setControl(t.data.id,t.data.value)}));const T=this;oe.prototype.spawn=function(t=[0,1],h){T.audio.spawn(this.output(t).exit(),h)}}registerUgen(p,x){return this.audio.registerUgen(x),Ey(p,x.name)}evaluate(p){this.localScope||(Object.assign(globalThis,{audio:this.audio}),Object.assign(globalThis,{addUgen:this.registerUgen.bind(this)}));let x;this.transpiler?x=this.transpiler(p):x={output:p},this.beforeEval?.(x);let M;return this.localScope&&(M={...zu,...Wu,...Vu,audio:this.audio,addUgen:this.registerUgen.bind(this),repl:this}),Cy(x.output,M)}async play(p){await this.audio.init(),p.ins.length&&this.audio.spawn(p),this.onToggle?.(!0)}run(p){const x=this.evaluate(p);this.play(x)}stop(){this.stopRecording(),this.audio.stop(),this.onToggle?.(!1)}record(){this.audio.record(),this.onToggleRecording?.(!0)}stopRecording(){this.audio.stopRecording(),this.onToggleRecording?.(!1)}}function IF({defaultOutput:i,onEvalError:p,beforeEval:x,beforeStart:M,afterEval:R,getTime:w,transpiler:v,onToggle:T,editPattern:t,onUpdateState:h,sync:g=!1,setInterval:o,clearInterval:a,id:r,mondo:e=!1}){const s=new bF({localScope:!0}),u={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},n={id:r},l=W=>{Object.assign(u,W),u.isDirty=u.code!==u.activeCode,u.error=u.evalError||u.schedulerError,h?.(u)},c={onTrigger:Oy({defaultOutput:i,getTime:w}),getTime:w,onToggle:W=>{l({started:W}),xy(W),T?.(W),W||oy()},setInterval:o,clearInterval:a,beforeStart:M},d=g&&typeof SharedWorker<"u"?new BP(c):new ay(c);gy(c.onTrigger),vy(()=>d.cps);let f={},m=0,y;const S=function(){return f={},m=0,y=void 0,xe},C=W=>s.evaluate(W).compile({log:!1});function E(W){return W._Pattern?W.__pure:W}const P=async(W,X=!0)=>(W=t?.(W)||W,await d.setPattern(W,X),my(W),W);Dr(()=>d.now());const A=()=>d.stop(),F=()=>d.start(),G=()=>d.pause(),D=()=>d.toggle(),L=W=>(d.setCps(E(W)),xe),b=W=>(d.setCps(E(W)/60),xe);let I=[];const N=function(W){return I.push(W),xe},Z=function(W){return y=W,xe},U=()=>{Mt.prototype.p=function(X){return typeof X=="string"&&(X.startsWith("_")||X.endsWith("_"))?xe:(X.includes("$")&&(X=`${X}${m}`,m++),f[X]=this,this)},Mt.prototype.q=function(X){return xe};try{for(let X=1;X<10;++X)Object.defineProperty(Mt.prototype,`d${X}`,{get(){return this.p(X)},configurable:!0}),Object.defineProperty(Mt.prototype,`p${X}`,{get(){return this.p(X)},configurable:!0}),Mt.prototype[`q${X}`]=xe}catch(X){console.warn("injectPatternMethods: error:",X)}const W=ct("cpm",function(X,V){return V._fast(X/60/d.cps)});return Lr({all:N,each:Z,hush:S,cpm:W,setCps:L,setcps:L,setCpm:b,setcpm:b,compileKabel:C})};return{scheduler:d,evaluate:async(W,X=!0,V=!0)=>{if(!W)throw new Error("no code to evaluate");try{l({code:W,pending:!0}),await U(),Dr(()=>d.now()),await x?.({code:W}),I=[],V&&S(),e&&(W=`mondolang\`${W}\``);let{pattern:O,meta:z}=await Of(W,v,n);if(Object.keys(f).length){let B=[],Y=!1;for(const[k,J]of Object.entries(f)){const j=k.length>1&&k.startsWith("S");if(j&&Y===!1&&(B=[],Y=!0),!Y||Y&&j){const tt=J.withState(ut=>ut.setControls({id:k}));B.push(tt)}}y&&(B=B.map(k=>y(k))),O=ye(...B)}else y&&(O=y(O));if(I.length)for(const B of I)O=B(O);return Ko(O)||(O=xe),Ve("[eval] code updated"),O=await P(O,X),l({miniLocations:z?.miniLocations||[],widgets:z?.widgets||[],activeCode:W,pattern:O,evalError:void 0,schedulerError:void 0,pending:!1}),R?.({code:W,pattern:O,meta:z}),O}catch(O){Ve(`[eval] error: ${O.message}`,"error"),console.error(O),l({evalError:O,pending:!1}),p?.(O)}},start:F,stop:A,pause:G,setCps:L,setPattern:P,setCode:W=>l({code:W}),toggle:D,state:u}}const Oy=({getTime:i,defaultOutput:p})=>async(x,M,R,w,v)=>{try{(!x.context.onTrigger||!x.context.dominantTrigger)&&await p(x,M,R,w,v),x.context.onTrigger&&await x.context.onTrigger(x,i(),w,v)}catch(T){Kn(T,"getTrigger")}};function OF(i){return new Mt(p=>[new Ae(void 0,p.span,i)])}const je=i=>{const p=x=>[new Ae(void 0,x.span,i(x.span.begin,x.controls))];return new Mt(p)},Jn=je(i=>i%1),lh=Jn.toBipolar(),Jr=je(i=>1-i%1),fh=Jr.toBipolar(),dh=je(i=>Math.sin(Math.PI*2*i)),By=dh.fromBipolar(),BF=By._early(Ft(1).div(4)),XF=dh._early(Ft(1).div(4)),Xy=je(i=>Math.floor(i*2%2)),NF=Xy.toBipolar(),VF=Ke(Jn,Jr),zF=Ke(lh,fh),WF=Ke(Jr,Jn),ZF=Ke(fh,lh),YF=je(Hs);let ch=0,ph=0;typeof window<"u"&&document.addEventListener("mousemove",i=>{ch=i.clientY/document.body.clientHeight,ph=i.clientX/document.body.clientWidth});const UF=je(()=>ch),HF=je(()=>ch),KF=je(()=>ph),kF=je(()=>ph),JF=i=>(i|=0,i^=i>>>16,i=Math.imul(i,2246822507),i^=i>>>13,i=Math.imul(i,3266489909),i^=i>>>16,i>>>0),jF=i=>Math.floor(i*536870912),QF=(i,p=0,x=0)=>{const M=i>>>0>>>0,R=Math.floor(i/4294967296)>>>0;let w=M^Math.imul(R^2246822507,3266489909);return w^=Math.imul(p^2135587861,2654435769),w^=Math.imul(x^374761393,668265261),w>>>0},Zu=(i,p=0,x=0)=>JF(QF(i,p,x))/4294967296,$F=(i,p,x=0)=>{const M=jF(i);if(p===1)return Zu(M,0,x);const R=new Array(p);for(let w=0;w<p;w++)R[w]=Zu(M,w,x);return R},Ny=i=>{const p=i<<13^i,x=p>>17^p;return x<<5^x},qF=i=>i-Math.trunc(i),_F=i=>Ny(Math.trunc(qF(i/300)*536870912)),Yu=i=>i%536870912/536870912,tL=(i,p)=>{if(p===1)return Math.abs(Yu(i));const x=[];for(let M=0;M<p;M++)x.push(Yu(i)),i=Ny(i);return x},eL=(i,p)=>tL(_F(i),p);let Vy="legacy";const ls=(i,p=1,x=0)=>Vy==="legacy"?eL(i+x,p):$F(i,p,x),iL=(i="legacy")=>Vy=i,zy=i=>Jn.range(0,i).round().segment(i),sL=i=>{const p=Rt(i).log2(0).floor().add(1);return Wy(i,p)},Wy=(i,p=16)=>{p=Rt(p);const x=zy(p).mul(-1).add(p.sub(1));return Rt(i).segment(p).brshift(x).band(Se(1))},nL=i=>{const p=Rt(i).log2(0).floor().add(1);return Zy(i,p)},Zy=(i,p=16)=>Rt(i).withValue(x=>M=>{const R=[];for(let w=M-1;w>=0;w--)R.push(x>>w&1);return R}).appLeft(Rt(p)),rL=i=>je(p=>x=>ls(p,x).map(Math.abs)).appLeft(Rt(i)),Yy=i=>je((p,x)=>{const M=ls(p.floor().add(.5),i,x.randSeed).map((w,v)=>[w,v]).sort((w,v)=>(w[0]>v[0])-(w[0]<v[0])).map(w=>w[1]),R=p.cyclePos().mul(i).floor()%i;return M[R]})._segment(i),Uy=(i,p,x)=>{const M=[...Array(p).keys()].map(R=>x.zoom(Ft(R).div(p),Ft(R+1).div(p)));return i.fmap(R=>M[R].repeatCycles(p)._fast(p)).innerJoin()},aL=ct("shuffle",(i,p)=>Uy(Yy(i),i,p)),oL=ct("scramble",(i,p)=>Uy(mh(i)._segment(i),i,p)),Hy=(i,p)=>new Mt(x=>{let{randSeed:M,...R}=x.controls;return M=i(M),p.query(x.setControls({...R,randSeed:M}))},p._steps),hL=ct("seed",(i,p)=>Hy(()=>i,p)),Je=je((i,p)=>ls(i,1,p.randSeed)),uL=Je.toBipolar(),vh=i=>Je.fmap(p=>p<i),lL=i=>Rt(i).fmap(vh).innerJoin(),fL=vh(.5),mh=i=>Je.fmap(p=>Math.trunc(p*i)),dL=i=>Rt(i).fmap(mh).innerJoin(),gh=(i,p)=>(p=p.map(Rt),p.length==0?xe:i.range(0,p.length).fmap(x=>{const M=Math.min(Math.max(Math.floor(x),0),p.length-1);return p[M]})),jr=(i,p)=>gh(i,p).outerJoin(),Qr=(i,p)=>gh(i,p).innerJoin(),Ky=(...i)=>jr(Je,i),cL=(...i)=>Qr(Je,i),pL=Ky;Mt.prototype.choose=function(...i){return jr(this,i)};Mt.prototype.choose2=function(...i){return jr(this.fromBipolar(),i)};const ky=(...i)=>Qr(Je.segment(1),i),vL=ky,Jy=function(i,...p){const x=p.map(T=>Rt(T[0])),M=[];let R=Se(0);for(const T of p)R=R.add(T[1]),M.push(R);const w=Xf(M),v=function(T){const t=R.mul(T);return w.fmap(h=>g=>x[h.findIndex(o=>o>g,h)]).appLeft(t)};return i.bind(v)},mL=(...i)=>Jy(...i).outerJoin(),gL=(...i)=>mL(Je,...i),jy=(...i)=>Jy(Je.segment(1),...i).innerJoin(),xL=jy;function yL(i,p=0){let x=Math.floor(i),M=x+1;const R=t=>6*t**5-15*t**4+10*t**3,w=t=>h=>g=>h+R(t)*(g-h),v=ls(x,1,p),T=ls(M,1,p);return w(i-x)(v)(T)}function TL(i,p=0){const x=Math.floor(i),M=x+1,R=ls(x,1,p),w=ls(M,1,p),v=R+w,T=(i-x)/(M-x);return((t,h,g)=>t+g*(h-t))(R,v,T)/2}const CL=je((i,p)=>yL(i,p.randSeed)),SL=je((i,p)=>TL(i,p.randSeed)),ML=ct("degradeByWith",(i,p,x)=>x.fmap(M=>R=>M).appLeft(i.filterValues(M=>M>p)),!0,!0),EL=ct("degradeBy",function(i,p){return p._degradeByWith(Je,i)},!0,!0),PL=ct("degrade",i=>i._degradeBy(.5),!0,!0),AL=ct("undegradeBy",function(i,p){return p._degradeByWith(Je.fmap(x=>1-x),i)},!0,!0),RL=ct("undegrade",i=>i._undegradeBy(.5),!0,!0),FL=ct("sometimesBy",function(i,p,x){return Rt(i).fmap(M=>ye(x._degradeBy(M),p(x._undegradeBy(1-M)))).innerJoin()}),LL=ct("sometimes",function(i,p){return p._sometimesBy(.5,i)}),DL=ct("someCyclesBy",function(i,p,x){return Rt(i).fmap(M=>ye(x._degradeByWith(Je._segment(1),M),p(x._degradeByWith(Je.fmap(R=>1-R)._segment(1),1-M)))).innerJoin()}),wL=ct("someCycles",function(i,p){return p._someCyclesBy(.5,i)}),GL=ct("often",function(i,p){return p.sometimesBy(.75,i)}),bL=ct("rarely",function(i,p){return p.sometimesBy(.25,i)}),IL=ct("almostNever",function(i,p){return p.sometimesBy(.1,i)}),OL=ct("almostAlways",function(i,p){return p.sometimesBy(.9,i)}),BL=ct("never",function(i,p){return p}),XL=ct("always",function(i,p){return i(p)});function xh(i){Array.isArray(i)===!1&&(i=[i]);const p=bf();return i.every(x=>{const M=Gf.get(x)??x;return p[M]})}const NL=ct("whenKey",function(i,p,x){return x.when(xh(i),p)}),VL=ct("keyDown",function(i){return i.fmap(xh)}),zL=new Mt(function(i){return[new Ae(void 0,i.span,i.span.duration)]}),Qy=new Mt(function(i){return[new Ae(void 0,i.span,Ft(1).div(i.span.duration))]}),WL=Qy,ZL=new Mt(function(i){const p=Ft(1).div(i.span.duration);return[new Ae(void 0,i.span,Math.log(p)/Math.log(2)+1)]});let wr;try{wr=window?.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let Uu=wr?.getVoices();function YL(i,p,x){wr.cancel();const M=new SpeechSynthesisUtterance(i);M.lang=p,Uu=wr.getVoices();const R=Uu.filter(w=>w.lang.includes(p));typeof x=="number"?M.voice=R[x%R.length]:typeof x=="string"&&(M.voice=R.find(w=>w.name===w)),speechSynthesis.speak(M)}const UL=ct("speak",function(i,p,x){return x.onTrigger(M=>{YL(M.value,i,p)})}),HL=function(i,p={}){const x=document.getElementById("code"),M="background-image:url("+i+");background-size:contain;";x.style=M;const{className:R}=x,w=(T,t)=>{({style:()=>x.style=M+";"+t,className:()=>x.className=t+" "+R})[T]()},v=Object.entries(p).filter(([T,t])=>typeof t=="function");Object.entries(p).filter(([T,t])=>typeof t=="string").forEach(([T,t])=>w(T,t)),v.length},KL=()=>{const i=document.getElementById("code");i&&(i.style="")};Ve(" @strudel/core loaded ");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const $y=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:wf,Cyclist:ay,FXr:ey,FXrel:ty,FXrelease:_x,Fraction:Ft,Hap:Ae,Pattern:Mt,State:Qs,TimeSpan:Ge,__chooseWith:gh,_brandBy:vh,_fitslice:Hf,_irand:mh,_keyDown:xh,_match:Kf,_mod:pi,_morph:qo,_polymeterListSteps:Jf,_retime:ro,_slices:ao,accelerate:$d,activeLabel:y1,ad:Px,add:P5,adsr:Ex,almostAlways:OL,almostNever:IL,always:XL,amp:ic,analyze:mp,anchor:k1,and:U5,apply:T4,applyN:Uf,ar:Rx,arp:n5,arpWith:s5,arrange:l5,as:kx,asym:_9,att:nc,attack:sc,averageArray:Tf,backgroundImage:HL,band:w5,bandf:Pp,bandq:Fp,bank:pp,base64ToUnicode:Lf,bbexpr:qp,bbst:tv,beat:k9,begin:Dp,berlin:SL,bgain:b1,binary:sL,binaryL:nL,binaryN:Wy,binaryNL:Zy,bind:m5,binshift:Qg,bite:A4,bjork:pP,bjorklund:nh,blshift:I5,bmod:$x,bor:G5,bp:Rp,bpa:bv,bpattack:Gv,bpd:Vv,bpdc:pm,bpdecay:Nv,bpdepth:lm,bpdepthfreq:dm,bpdepthfrequency:fm,bpe:Rv,bpenv:Av,bpf:Ap,bpq:Lp,bpr:$v,bprate:hm,bprelease:Qv,bps:Hv,bpshape:cm,bpskew:vm,bpsustain:Uv,bpsync:um,brak:B4,brand:fL,brandBy:lL,brshift:O5,bus:w1,busgain:G1,bxor:b5,bypass:c9,byteBeatExpression:$p,byteBeatStartTime:_p,calculateSteps:t5,cat:In,ccn:bx,ccv:Ix,ceil:j5,ch:iv,channel:mv,channels:ev,chebyshev:iP,choose:Ky,chooseCycles:ky,chooseIn:cL,chooseInWith:Qr,chooseOut:pL,chooseWith:jr,chop:X9,chord:U1,chorus:vp,chunk:i9,chunkBack:r9,chunkBackInto:d9,chunkInto:l9,chunkback:a9,chunkbackinto:f9,chunkinto:u9,clamp:Yr,cleanupUi:KL,clip:hx,coarse:Np,code2hash:KE,color:Sx,colour:Mx,comb:kg,compose:IE,compress:i4,compressSpan:s4,compressor:gg,compressorAttack:Tg,compressorKnee:xg,compressorRatio:yg,compressorRelease:Cg,compressspan:n4,constant:OE,contract:td,control:Gx,controls:lP,cosine:BF,cosine2:XF,cpm:C4,cps:ox,createClock:ry,createParam:Kr,createParams:ih,crush:Xp,ctf:yv,ctlNum:Ox,ctranspose:M1,cubic:$9,curry:re,curve:cx,cut:gv,cutoff:xv,cycleToSeconds:io,cyclesPer:zL,dec:yp,decay:xp,degrade:PL,degradeBy:EL,degradeByWith:ML,degree:C1,delay:Nm,delayfb:zm,delayfeedback:Vm,delayspeed:Zm,delaysync:Km,delayt:Um,delaytime:Ym,deltaSlide:px,det:jm,detune:Jm,dfb:Wm,dict:K1,dictionary:H1,diode:q9,dist:pg,distort:cg,distorttype:mg,distortvol:vg,div:F5,djf:Xm,drawLine:If,drive:Kp,drop:$f,dry:qm,ds:Ax,dt:Hm,duck:kp,duckattack:Qp,duckdepth:Jp,duckonset:jp,dur:fx,duration:lx,early:S4,echo:J4,echoWith:U4,echowith:H4,eish:TP,end:wp,enhance:Kg,env:Qx,eq:z5,eqt:W5,errorLogger:Kn,euclid:cP,euclidLegato:gP,euclidLegatoRot:xP,euclidRot:mP,euclidish:yP,euclidrot:vP,evalScope:Lr,evaluate:Of,every:y4,expand:_f,expression:Rg,extend:qf,fadeInTime:e1,fadeOutTime:t1,fadeTime:_m,fanchor:_v,fast:f4,fastChunk:h9,fastGap:r4,fastcat:Ke,fastchunk:o9,fastgap:a4,fft:gp,filter:x9,filterWhen:y9,firstOf:x4,fit:Z9,flatten:ji,floor:J5,fm:Mc,fm1:Ec,fm2:Pc,fm3:Ac,fm4:Rc,fm5:Fc,fm6:Lc,fm7:Dc,fm8:wc,fmatt:Qc,fmatt1:$c,fmatt2:qc,fmatt3:_c,fmatt4:t0,fmatt5:e0,fmatt6:i0,fmatt7:s0,fmatt8:n0,fmattack:Wc,fmattack1:Zc,fmattack2:Yc,fmattack3:Uc,fmattack4:Hc,fmattack5:Kc,fmattack6:kc,fmattack7:Jc,fmattack8:jc,fmdec:M0,fmdec1:E0,fmdec2:P0,fmdec3:A0,fmdec4:R0,fmdec5:F0,fmdec6:L0,fmdec7:D0,fmdec8:w0,fmdecay:p0,fmdecay1:v0,fmdecay2:m0,fmdecay3:g0,fmdecay4:x0,fmdecay5:y0,fmdecay6:T0,fmdecay7:C0,fmdecay8:S0,fmenv:Gc,fmenv1:bc,fmenv2:Ic,fmenv3:Oc,fmenv4:Bc,fmenv5:Xc,fmenv6:Nc,fmenv7:Vc,fmenv8:zc,fmh:rc,fmh1:ac,fmh2:oc,fmh3:hc,fmh4:uc,fmh5:lc,fmh6:fc,fmh7:dc,fmh8:cc,fmi:pc,fmi1:vc,fmi2:mc,fmi3:gc,fmi4:xc,fmi5:yc,fmi6:Tc,fmi7:Cc,fmi8:Sc,fmrel:rp,fmrel1:ap,fmrel2:op,fmrel3:hp,fmrel4:up,fmrel5:lp,fmrel6:fp,fmrel7:dp,fmrel8:cp,fmrelease:Q0,fmrelease1:$0,fmrelease2:q0,fmrelease3:_0,fmrelease4:tp,fmrelease5:ep,fmrelease6:ip,fmrelease7:sp,fmrelease8:np,fmsus:W0,fmsus1:Z0,fmsus2:Y0,fmsus3:U0,fmsus4:H0,fmsus5:K0,fmsus6:k0,fmsus7:J0,fmsus8:j0,fmsustain:G0,fmsustain1:b0,fmsustain2:I0,fmsustain3:O0,fmsustain4:B0,fmsustain5:X0,fmsustain6:N0,fmsustain7:V0,fmsustain8:z0,fmwave:r0,fmwave1:a0,fmwave2:o0,fmwave3:h0,fmwave4:u0,fmwave5:l0,fmwave6:f0,fmwave7:d0,fmwave8:c0,focus:o4,focusSpan:h4,focusspan:u4,fold:tP,fractionalArgs:BE,frameRate:_g,frames:tx,freeze:Wg,freq:i1,freqToMidi:zo,fromBipolar:$5,fshift:Lg,fshiftnote:Dg,fshiftphase:wg,ftype:qv,func:K5,fxr:iy,gain:tc,gap:sn,gat:v1,gate:p1,getAccidentalsOffset:Vo,getControlName:Bn,getCps:XP,getCurrentKeyboardState:bf,getEventOffsetMs:LE,getFreq:yf,getFrequency:Sf,getIsStarted:zP,getPattern:NP,getPerformanceTimeSeconds:JE,getPlayableNoteValue:bE,getRandsAtTime:ls,getSoundIndex:GE,getTime:uo,getTrigger:Oy,getTriggerFunc:VP,grow:S9,gt:X5,gte:V5,hard:Q9,harmonic:E1,hash2code:kE,hbrick:$g,hcutoff:Dm,hold:Ep,hours:ex,hp:Gm,hpa:wv,hpattack:Dv,hpd:Xv,hpdc:Sm,hpdecay:Bv,hpdepth:xm,hpdepthfreq:Tm,hpdepthfrequency:ym,hpe:Pv,hpenv:Ev,hpf:wm,hpq:Im,hpr:jv,hprate:mm,hprelease:Jv,hps:Yv,hpshape:Cm,hpskew:Mm,hpsustain:Zv,hpsync:gm,hresonance:bm,hsl:g9,hsla:m9,hurry:d4,id:Hs,imag:Hg,inhabit:wP,inhabitmod:bP,innerBind:g5,inside:v4,inv:b4,invert:G4,ir:ng,irand:dL,irbegin:og,iresponse:rg,irspeed:ag,isControlName:hd,isNote:Ls,isNoteWithOctave:PE,isPattern:Ko,isaw:Jr,isaw2:fh,iter:q4,iterBack:_4,iterback:t9,itri:WF,itri2:ZF,jux:Y4,juxBy:W4,juxby:Z4,kcutoff:Ig,keep:M5,keepif:E5,keyAlias:Gf,keyDown:VL,krush:bg,label:T1,lastOf:g4,late:Zf,lbrick:qg,legato:ux,leslie:m1,lfo:jx,linger:R4,listRange:kn,lock:km,logKey:Xo,logger:Ve,loop:Gp,loopAt:z9,loopAtCps:Y9,loopBegin:bp,loopEnd:Op,loopat:W9,loopatcps:U9,loopb:Ip,loope:Bp,lp:Cv,lpa:Lv,lpattack:Fv,lpd:Ov,lpdc:am,lpdecay:Iv,lpdepth:im,lpdepthfreq:nm,lpdepthfrequency:sm,lpe:Mv,lpenv:Sv,lpf:Tv,lpq:Bm,lpr:kv,lprate:tm,lprelease:Kv,lps:Wv,lpshape:rm,lpskew:om,lpsustain:zv,lpsync:em,lrate:g1,lsize:x1,lt:B5,lte:N5,mapArgs:Zo,mask:d5,midi2note:wE,midiToFreq:js,midibend:Zx,midichan:Fx,midicmd:wx,midimap:Lx,midiport:Dx,miditouch:Yx,minutes:ix,mod:L5,mode:Q1,morph:J9,mouseX:kF,mouseY:HF,mousex:KF,mousey:UF,mtranspose:S1,mul:R5,n:Qd,nanFallback:Cf,ne:Z5,net:Y5,never:BL,noise:Rm,note:Ne,noteToMidi:Ii,nothing:Ri,nrpnn:Bx,nrpv:Xx,nudge:R1,numeralArgs:ii,objectMap:Df,oct:L1,octave:F1,octaveR:A1,octaves:j1,octer:Og,octersub:Bg,octersubsub:Xg,off:O4,offset:J1,often:GL,or:H5,orbit:D1,oschost:Hx,oscport:Kx,outerBind:x5,outside:m4,overgain:I1,overshape:O1,pace:kf,pairs:Af,palindrome:z4,pan:B1,panchor:c1,panorient:z1,panspan:X1,pansplay:N1,panwidth:V1,parray:_o,parseFractional:Pf,parseNumeral:Wo,partials:sP,patt:n1,pattack:s1,pcurve:d1,pdec:a1,pdecay:r1,penv:f1,per:Qy,perCycle:WL,perlin:CL,perx:ZL,ph:ov,phasdp:vv,phaser:hv,phasercenter:fv,phaserdepth:cv,phaserrate:av,phasersweep:uv,phases:nP,phc:dv,phd:pv,phs:lv,pick:uy,pickF:MP,pickOut:PP,pickReset:LP,pickRestart:RP,pickSqueeze:GP,pickmod:ly,pickmodF:EP,pickmodOut:AP,pickmodReset:DP,pickmodRestart:FP,pickmodSqueeze:IP,pipe:Ef,pitchJump:vx,pitchJumpTime:mx,ply:l4,plyForEach:$4,plyWith:Q4,pm:h5,polyBind:C5,polyTouch:Ux,polymeter:Ur,polyrhythm:a5,postgain:ec,pow:D5,pr:o5,prel:l1,prelease:u1,press:V4,pressBy:N4,progNum:Nx,psus:h1,psustain:o1,pure:Se,pw:sv,pwrate:nv,pwsweep:rv,rand:Je,rand2:uL,randL:rL,randcat:vL,randrun:Yy,range:q5,range2:t4,rangex:_5,rarely:bL,ratio:e4,rdim:eg,real:Ug,ref:H9,register:ct,registerControl:nt,registerMultiControl:zi,reify:Rt,rel:Mp,release:Sp,removeUndefineds:Ds,repeatCycles:e9,repl:IF,replicate:C9,reset_state:oy,reset_timelines:hy,resonance:Om,rev:Yf,revv:X4,rfade:sg,rib:v9,ribbon:p9,ring:Ng,ringdf:zg,ringf:Vg,rlp:_1,room:$1,roomdim:tg,roomfade:ig,roomlp:q1,roomsize:hg,rotate:Mf,round:k5,rsize:fg,run:zy,s:th,s_add:L9,s_alt:P9,s_cat:E9,s_contract:b9,s_expand:w9,s_extend:G9,s_polymeter:A9,s_sub:D9,s_taper:R9,s_taperlist:F9,s_tour:I9,s_zip:O9,saw:Jn,saw2:lh,scram:jg,scramble:oL,scrub:Jx,seconds:sx,seed:hL,seg:L4,segment:F4,semitone:Z1,seq:Wf,seqPLoop:f5,sequence:Fi,sequenceP:Xf,set:S5,setCpsFunc:vy,setIsStarted:xy,setPattern:my,setStringParser:Bf,setTime:Dr,setTriggerFunc:gy,shape:dg,shrink:id,shrinklist:ed,shuffle:aL,signal:je,silence:xe,sine:By,sine2:dh,sinefold:eP,size:ug,slice:ad,slide:W1,slow:c4,slowChunk:n9,slowcat:ps,slowcatPrime:Jo,slowchunk:s9,smear:Jg,soft:j9,sol2note:YE,someCycles:wL,someCyclesBy:DL,sometimes:LL,sometimesBy:FL,songPtr:nx,sound:ud,source:Jd,sparsity:p4,speak:UL,speed:eh,splice:V9,splitAt:Yo,spread:$m,square:Xy,square2:NF,squeeze:OP,squeezeBind:y5,squiz:Eg,src:jd,stack:ye,stackBy:u5,stackCentre:zf,stackLeft:Nf,stackRight:Vf,steady:OF,stepBind:T5,stepalt:jf,stepcat:ti,steps:B9,stepsPerOctave:P1,stretch:Sg,striate:N9,stringifyValues:Uo,struct:c5,strudelScope:Ho,stut:j4,stutWith:K4,stutwith:k4,sub:A5,superimpose:p5,sus:Cp,sustain:Tp,sustainpedal:Fg,swing:w4,swingBy:D4,sysex:Vx,sysexdata:Wx,sysexid:zx,sz:lg,take:Qf,time:YF,timeCat:$o,timecat:M9,timeline:CP,toBipolar:Q5,tokenizeNote:xf,tour:sd,transient:qx,trem:zp,tremolo:Vp,tremolodepth:Zp,tremolophase:Up,tremoloshape:Hp,tremoloskew:Yp,tremolosync:Wp,tri:VF,tri2:zF,triode:Gg,tsdelay:Yg,uid:rx,undegrade:RL,undegradeBy:AL,unicodeToBase64:Ff,uniq:UE,uniqsort:HE,uniqsortr:Rf,unison:Qm,unit:Mg,useRNG:iL,v:Am,val:ax,valueToMidi:FE,vel:_d,velocity:qd,vib:Em,vibmod:Fm,vibrato:Pm,vmod:Lm,voice:Y1,vowel:Pg,warp:Rd,warpatt:Dd,warpattack:Ld,warpdc:zd,warpdec:Gd,warpdecay:wd,warpdepth:Nd,warpenv:Kd,warpmode:Zd,warprate:Xd,warprel:Bd,warprelease:Od,warpshape:Vd,warpskew:Wd,warpsus:Id,warpsustain:bd,warpsync:kd,waveloss:Ag,wavetablePhaseRand:Hd,wavetablePosition:fd,wavetableWarp:Fd,wavetableWarpMode:Yd,wchoose:gL,wchooseCycles:jy,when:I4,whenKey:NL,withSeed:Hy,withValue:v5,within:T9,worklet:aP,wrandcat:xL,wt:ld,wtatt:pd,wtattack:cd,wtdc:Pd,wtdec:md,wtdecay:vd,wtdepth:Md,wtenv:dd,wtphaserand:Ud,wtrate:Cd,wtrel:Td,wtrelease:yd,wtshape:Ed,wtskew:Ad,wtsus:xd,wtsustain:gd,wtsync:Sd,xfade:od,xsdelay:Zg,zcrush:yx,zdelay:Tx,zip:nd,zipWith:Zr,zmod:xx,znoise:gx,zoom:M4,zoomArc:E4,zoomarc:P4,zrand:dx,zzfx:Cx},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class i extends DelayNode{constructor(x,M,R,w){return super(x),M=Math.abs(M),this.delayTime.value=R,this.feedbackGain=x.createGain(),this.feedbackGain.gain.value=Math.min(Math.abs(w),.995),this.feedback=this.feedbackGain.gain,this.delayGain=x.createGain(),this.delayGain.gain.value=M,this.connect(this.feedbackGain),this.connect(this.delayGain),this.feedbackGain.connect(this),this.connect=v=>this.delayGain.connect(v),this}start(x){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,x+this.delayTime.value)}}BaseAudioContext.prototype.createFeedbackDelay=function(p,x,M){return new i(this,p,x,M)}}let Vn;const qy=()=>(Vn=new AudioContext,Vn),Gr=i=>(Vn=i,Vn),ie=()=>Vn||qy();function kL(){return ie().currentTime}let _y=i=>console.log(i);function zn(i,p="superdough"){Ie(`[${p}] error: ${i.message}`)}const Ie=(...i)=>_y(...i),t2=i=>{_y=i};let Ia={};function e2(i,p){const x=ie();if(Ia[i])return Ia[i];const M=2*x.sampleRate,R=x.createBuffer(1,M,x.sampleRate),w=R.getChannelData(0);let v=0,T,t,h,g,o,a,r;T=t=h=g=o=a=r=0;for(let e=0;e<M;e++)if(i==="white")w[e]=Math.random()*2-1;else if(i==="brown"){let s=Math.random()*2-1;w[e]=(v+.02*s)/1.02,v=w[e]}else if(i==="pink"){let s=Math.random()*2-1;T=.99886*T+s*.0555179,t=.99332*t+s*.0750759,h=.969*h+s*.153852,g=.8665*g+s*.3104856,o=.55*o+s*.5329522,a=-.7616*a-s*.016898,w[e]=T+t+h+g+o+a+r+s*.5362,w[e]*=.11,r=s*.115926}else if(i==="crackle"){const s=p*.01;Math.random()<s?w[e]=Math.random()*2-1:w[e]=0}return i!=="crackle"&&(Ia[i]=R),R}function vo(i="white",p,x=.02){const M=ie().createBufferSource();return M.buffer=e2(i,x),M.loop=!0,M.start(p),{node:M,stop:R=>M.stop(R)}}function JL(i,p,x){const M=vo("pink",x),R=l2(i,M.node,p);return Bi(M.node,()=>{ue(M.node)}),{node:R.node,stop:w=>M?.stop(w),teardown:R.teardown}}const mo=new Map,yh=Symbol("nodePoolKey"),jL=i=>!!i[yh],i2=i=>i.context?.currentTime??0,QL=i=>{const p=new Set;i.parameters?.forEach(R=>p.add(R));const x=new Set;let M=i;for(;M!==Object.prototype;){for(const R of Object.getOwnPropertyNames(M)){if(x.has(R))continue;x.add(R);const w=i[R];w instanceof AudioParam&&p.add(w)}M=Object.getPrototypeOf(M)}return p},Th=i=>{if(i.disconnect(),i instanceof AudioScheduledSourceNode)return;const p=i[yh];if(p==null)return;const x=i2(i);QL(i).forEach(R=>R.cancelScheduledValues(x));const M=mo.get(p)??[];M.push(new WeakRef(i)),mo.set(p,M)},$L=i=>{if(!(i instanceof AudioWorkletNode))return!0;const p=i2(i),x=i?.parameters?.get("end").value??0;return p<x+.45},jn=(i,p)=>{const x=mo.get(i)??[];let M,R=!1;for(;x.length;)if(M=x.pop()?.deref(),M!=null&&$L(M)){R=!0;break}return R||(M=p()),M[yh]=i,M},qL=i=>{if(typeof i!="string")return[];const[p,x="",M]=i.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return p?[p,x,M?Number(M):void 0]:[]},_L={c:0,d:2,e:4,f:5,g:7,a:9,b:11},tD={"#":1,b:-1,s:1,f:-1},eD=i=>i?.split("").reduce((p,x)=>p+tD[x],0)||0,$r=(i,p=3)=>{const[x,M,R=p]=qL(i);if(!x)throw new Error('not a note: "'+i+'"');const w=_L[x.toLowerCase()],v=eD(M);return(Number(R)+1)*12+w+v},s2=i=>Math.pow(2,(i-69)/12)*440,Oi=(i,p,x)=>Math.min(Math.max(i,p),x),iD=i=>12*Math.log(i/440)/Math.LN2+69,sD=(i,p)=>{if(typeof i!="object")throw new Error("valueToMidi: expected object value");let{freq:x,note:M}=i;return typeof x=="number"?iD(x):typeof M=="string"?$r(M):typeof M=="number"?M:p};function Qi(i,p=0,x){return isNaN(Number(i))?(!x&&Ie(`"${i}" is not a number, falling back to ${p}`,"warning"),p):i}const n2=(i,p)=>(i%p+p)%p,Hu=(i,p)=>n2(Math.round(Qi(i,0)),p);function Ku(i,p){return i/p}function r2(i,p){const{s:x,n:M=0}=i;let R=sD(i,36),w=R-36,v,T=0;if(Array.isArray(p))T=Hu(M,p.length),v=p[T];else{const h=o=>$r(o)-R,g=Object.keys(p).filter(o=>!o.startsWith("_")).reduce((o,a,r)=>!o||Math.abs(h(a))<Math.abs(h(o))?a:o,null);w=-h(g),T=Hu(M,p[g].length),v=p[g][T]}const t=`${x}:${T}`;return{transpose:w,url:v,index:T,midi:R,label:t}}const Oa=(i,p)=>Object.fromEntries(Object.entries(p).map(([x,M])=>[x,i[M]])),a2=i=>{try{return new URL(".",new URL(i)).href.replace(/\/$/,"")}catch{return i.split("/").slice(0,-1).join("/")}},Ch=["pink","white","brown","crackle"];function Ce(i){const p=ie().createGain();return p.gain.value=i,p}function Wn(i,p,x){const M=Ce(x);return i.connect(M),M.connect(p),M}const ku=(i,p,x,M)=>M-x===0?0:(p-i)/(M-x);function ke(i,p,x,M){const R=new AudioWorkletNode(i,p,M);return Object.entries(x).forEach(([w,v])=>{v!==void 0&&(R.parameters.get(w).value=v)}),R}const si=(i,p,x,M,R,w,v,T,t,h="exponential")=>{p=Qi(p),x=Qi(x),M=Qi(M),R=Qi(R);const g=h==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";h==="exponential"&&(w=w===0?.001:w,v=v===0?.001:v);const o=v-w,a=w+M*o,r=t-T,e=s=>{let u;return p>s?u=s*ku(w,v,0,p)+w:u=(s-p)*ku(v,a,0,x)+v,h==="exponential"&&(u=u||.001),u};i.setValueAtTime(w,T),p>r?i[g](e(r),t):p+x>r?(i[g](e(p),T+p),i[g](e(r),t)):(i[g](e(p),T+p),i[g](e(p+x),T+p+x),i.setValueAtTime(a,t)),i[g](w,t+R)};function nD(i){return typeof i=="number"?i%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[i]??0}function o2(i,p={}){return ke(i,"envelope-processor",p)}function rn(i,p={}){const{shape:x=0,begin:M=0,end:R=0,time:w,depth:v=1,dcoffset:T=-.5,frequency:t=1,skew:h=.5,phaseoffset:g=0,curve:o=1,min:a,max:r,...e}=p,s={begin:M,end:R,time:w??M,depth:v,dcoffset:T,frequency:t,skew:h,phaseoffset:g,curve:o,shape:nD(x),min:a??T*v,max:r??T*v+v,...e};return ke(i,"lfo-processor",s)}function h2(i,p,x,M,R,w){const v=jn("compressor",()=>new DynamicsCompressorNode(i,{}));return Object.entries({threshold:p??-3,ratio:x??10,knee:M??10,attack:R??.005,release:w??.05}).forEach(([T,t])=>{v[T].value=t}),v}const ni=(i,p="linear",x)=>{const[M,R,w,v]=i;if(M==null&&R==null&&w==null&&v==null)return x??[.001,.001,1,.01];const T=w??(M!=null&&R==null||M==null&&R==null?1:.001);return[Math.max(M??0,.001),Math.max(R??0,.001),Math.min(T,1),Math.max(v??0,.01)]};function Sh(i,p,x,M,R){let{defaultDepth:w=1,depth:v,dcoffset:T,...t}=R;v==null&&(v=Object.values(t).some(g=>g!=null)?w:0);let h;return v&&(h=rn(i,{begin:x,end:M,depth:v,dcoffset:T,...t}),h.connect(p)),h}function go(i,p,x,M,R,w){let{amount:v,offset:T,defaultAmount:t=1,curve:h="linear",values:g,holdEnd:o,defaultValues:a}=R;v==null&&(v=g.some(s=>s!=null)?t:0);const r=T??0,e=v+r;if(Math.abs(e-r)){const[s,u,n,l]=ni(g,h,a);si(p,s,u,n,l,r,e,x,o,h)}return Sh(i,p,x,M,w)}function u2(i,p,x,M,R,w){let{frequency:v,anchor:T,env:t,type:h,model:g,q:o=1,drive:a=.69,depth:r,depthfrequency:e,dcoffset:s=-.5,skew:u,shape:n,rate:l,sync:c}=M,d,f;g==="ladder"?(f=ke(i,"ladder-processor",{frequency:v,q:o,drive:a}),d=f.parameters.get("frequency")):(f=jn("filter",()=>i.createBiquadFilter()),f.type=h,Object.entries({Q:o,frequency:v}).forEach(([F,G])=>{f[F].value=G}),d=f.frequency);const m=[M.attack,M.decay,M.sustain,M.release],[y,S,C,E]=ni(m,"exponential",[.005,.14,0,.1]);if([...m,t].some(F=>F!==void 0)){t=Qi(t,1,!0),T=Qi(T,0,!0);const F=Math.abs(t),G=F*T;let D=Oi(2**-G*v,0,2e4),L=Oi(2**(F-G)*v,0,2e4);t<0&&([D,L]=[L,D]),si(d,y,S,C,E,D,L,p,x,"exponential")}c!=null&&(l=R*c);const P=[r,e,u,n,l].some(F=>F!==void 0);let A;if(P){r=r??1;const F=w/R,G={depth:e??(r??1)*v,dcoffset:s,skew:u,shape:n,frequency:l??R,min:-v+30,max:2e4-v,time:F,curve:1};A=Sh(i,d,p,x,G)}return{filter:f,lfo:A}}let Ju=i=>i<.5?1:1-(i-.5)/.5;function l2(i,p,x=0){const M=ie();if(!x)return i;let R=M.createGain(),w=M.createGain();i.connect(R),p.connect(w),R.gain.value=Ju(x),w.gain.value=Ju(1-x);let v=M.createGain();return R.connect(v),w.connect(v),{node:v,teardown:()=>{ue(R),ue(w),i.disconnect(R),p.disconnect(w)}}}let rD=["linear","exponential"];function qs(i,p,x,M){if((p.pattack??p.pdecay??p.psustain??p.prelease??p.penv)===void 0)return;const R=Qi(p.penv,1,!0),w=rD[p.pcurve??0];let[v,T,t,h]=ni([p.pattack,p.pdecay,p.psustain,p.prelease],w,[.2,.001,1,.001]),g=p.panchor??t;const o=R*100,a=0-o*g,r=o-o*g;si(i,v,T,t,h,a,r,x,M,w)}function _s(i,p,x){const{vibmod:M=.5,vib:R}=p;let w;if(R>0){w=ie().createOscillator(),w.frequency.value=R;const v=ie().createGain();return v.gain.value=M*100,w.connect(v),v.connect(i),Bi(w,()=>{ue(v),ue(w)}),w.start(x),{stop:T=>w.stop(T),nodes:{vib:[w],vib_gain:[v]}}}}function aD(i,p,x=ie()){const M=x.currentTime;Gi(x,i,M,p)}function Gi(i,p,x,M){const R=new ConstantSourceNode(i),w=Ce(0);return w.connect(i.destination),R.connect(w),Bi(R,()=>{ue(w),ue(R),p()}),R.start(x),R.stop(M),R}const oD=(i,p="sine")=>{const x=ie();let M;return Ch.includes(p)?(M=x.createBufferSource(),M.buffer=e2(p,2),M.loop=!0):(M=x.createOscillator(),M.type=p,M.frequency.value=i),M.start(),M},hD=(i,p,x="sine")=>{const M=i.value*p;return{osc:oD(M,x),freq:M}};function Zn(i,p,x){const M=ie(),R=[],w={},v={};for(let T=1;T<=8;T++)for(let t=0;t<=8;t++){let h;T===t+1?h=`fmi${T===1?"":T}`:h=`fmi${T}${t}`;const g=p[h];if(!g)continue;let o=[];for(let[a,r]of[[!0,T],[!1,t]]){if(r===0){o.push(i);continue}if(!w[r]){const f=r===1?"":r,{osc:m,freq:y}=hD(i,p[`fmh${f}`]??1,p[`fmwave${f}`]??"sine");R.push(m);const S=[m],C=["attack","decay","sustain","release"].map(P=>p[`fm${P}${f}`]);let E=m;if(C.some(P=>P!==void 0)){const P=M.createGain(),[A,F,G,D]=ni(C),L=x+p.duration,b=p[`fmenv${f}`]??"exp";si(P.gain,A,F,G,D,0,1,x,L,b==="exp"?"exponential":"linear"),S.push(P),E=m.connect(P)}w[r]={input:m.frequency,output:E,freq:y,osc:m,toCleanup:S},v[`fm_${r}`]=[m]}const{input:e,output:s,freq:u,osc:n,toCleanup:l}=w[r],c=Ce(g),d=Ce(u);o.push(a?s.connect(c).connect(d):e),v2(n,[...l,c,d]),v[`fm_${r}_gain`]=[c]}if(!o[1]){Ie(`[superdough] control ${h} failed to connect FM ${T} to target ${t} due to missing frequency parameter (likely because fm${t} is noise)`,"warning");continue}o[0].connect(o[1])}return{nodes:v,stop:T=>R.forEach(t=>t?.stop(T))}}const f2=i=>i/(1+i),uD=(i,p)=>(i%p+p)%p,lD=(i,p)=>(1+p)*i/(1+p*Math.abs(i)),Ks=(i,p)=>Math.tanh(i*(1+p)),fD=(i,p)=>Oi((1+p)*i,-1,1),d2=(i,p)=>{let x=(1+.5*p)*i;const M=uD(x+1,4);return 1-Math.abs(M-2)},dD=(i,p)=>Math.sin(Math.PI/2*d2(i,p)),cD=(i,p)=>{const x=f2(Math.log1p(p)),M=(i-x/3*i*i*i)/(1-x/3);return Ks(M,p)},c2=(i,p,x=!1)=>{const M=1+2*p,R=.07*f2(Math.log1p(p)),w=Ks(i+R,2*p),v=Ks(x?R:-i+R,2*p),T=w-v,t=1/Math.cosh(M*R),h=t*t,g=Math.max(1e-8,(x?1:2)*M*h);return Ks(T/g,p)},pD=(i,p)=>c2(i,p,!0),vD=(i,p)=>{const x=10*Math.log1p(p);let M=1,R=i,w,v=0;for(let T=1;T<64;T++){if(T<2){v+=T==0?M:R;continue}w=2*i*M-R,R=M,M=w,T%2===0&&(v+=Math.min(1.3*x/T,2)*w)}return Ks(v,x/20)},Mh={scurve:lD,soft:Ks,hard:fD,cubic:cD,diode:c2,asym:pD,fold:d2,sinefold:dD,chebyshev:vD},yn=Object.freeze(Object.keys(Mh)),mD=i=>{let p=i;typeof i=="string"&&(p=yn.indexOf(i),p===-1&&(Ie(`[superdough] Could not find waveshaping algorithm ${i}.
        Available options are ${yn.join(", ")}.
        Defaulting to ${yn[0]}.`),p=0));const x=yn[p%yn.length];return Mh[x]},p2=(i,p,x)=>ke(ie(),"distort-processor",{distort:i,postgain:p},{processorOptions:{algorithm:x}}),hs=(i,p=36)=>{let{note:x,freq:M,octave:R=0}=i;return x=x||p,typeof x=="string"&&(x=$r(x)),!M&&typeof x=="number"&&(M=s2(x)),M*=Math.pow(2,R),Number(M)},Bi=(i,p)=>{const x=p;i.onended=function(){x&&x(),this.onended=null}},ue=i=>{if(i!=null){if(!(i instanceof AudioNode))throw new Error("releaseAudioNode can only release an AudioNode");if(i.disconnect(),i instanceof AudioScheduledSourceNode)try{i.stop()}catch{i.start(i.context.currentTime+5),i.stop()}i instanceof AudioWorkletNode&&i.parameters.get("end")?.setValueAtTime(0,0)}},v2=(i,p)=>{Bi(i,()=>p.forEach(x=>ue(x)))};var Eh={};Eh.generateReverb=function(i,p){for(var x=i.audioContext||new AudioContext,M=x.sampleRate,R=i.numChannels||2,w=i.decayTime*1.5,v=Math.round(i.decayTime*M),T=Math.round(w*M),t=Math.round((i.fadeInTime||0)*M),h=Math.pow(1/1e3,1/v),g=x.createBuffer(R,T,M),o=0;o<R;o++){for(var a=g.getChannelData(o),r=0;r<T;r++)a[r]=yD()*Math.pow(h,r);for(var r=0;r<t;r++)a[r]*=r/t}gD(g,i.lpFreqStart||0,i.lpFreqEnd||0,i.decayTime,p)};Eh.generateGraph=function(i,p,x,M,R){var w=document.createElement("canvas");w.width=p,w.height=x;var v=w.getContext("2d");v.fillStyle="#000",v.fillRect(0,0,w.width,w.height),v.fillStyle="#fff";for(var T=p/i.length,t=x/(R-M),h=0;h<i.length;h++)v.fillRect(h*T,x-(i[h]-M)*t,1,1);return w};var gD=function(i,p,x,M,R){if(p==0){R(i);return}var w=xD(i),v=new OfflineAudioContext(i.numberOfChannels,w[0].length,i.sampleRate),T=v.createBufferSource();T.buffer=i;var t=v.createBiquadFilter();p=Math.min(p,i.sampleRate/2),x=Math.min(x,i.sampleRate/2),t.type="lowpass",t.Q.value=1e-4,t.frequency.setValueAtTime(p,0),t.frequency.linearRampToValueAtTime(x,M),T.connect(t),t.connect(v.destination),T.start(),v.oncomplete=function(h){R(h.renderedBuffer),ue(t),ue(T)},v.startRendering(),window.filterNode=t},xD=function(i){for(var p=[],x=0;x<i.numberOfChannels;x++)p[x]=i.getChannelData(x);return p},yD=function(){return Math.random()*2-1};typeof AudioContext<"u"&&(BaseAudioContext.prototype.adjustLength=function(i,p,x=1,M=0){const R=Math.floor(Oi(M,0,1)*p.length),w=p.sampleRate*i,v=this.createBuffer(p.numberOfChannels,p.length,p.sampleRate);for(let T=0;T<p.numberOfChannels;T++){let t=p.getChannelData(T),h=v.getChannelData(T);for(let g=0;g<w;g++){let o=(R+g*Math.abs(x))%t.length;x<1&&(o=o*-1),h[g]=t.at(o)||0}}return v},BaseAudioContext.prototype.createReverb=function(i,p,x,M,R,w,v){const T=this.createConvolver();return T.generate=(t=2,h=.1,g=15e3,o=1e3,a,r,e)=>{T.duration=t,T.fade=h,T.lp=g,T.dim=o,T.ir=a,T.irspeed=r,T.irbegin=e,a?T.buffer=this.adjustLength(t,a,r,e):Eh.generateReverb({audioContext:this,numChannels:2,decayTime:t,fadeInTime:h,lpFreqStart:g,lpFreqEnd:o},s=>{T.buffer=s})},T.generate(i,p,x,M,R,w,v),T});var ju={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get (){return this.ae},get (){return this.oe},get (){return this.aa},get (){return this.aa},get (){return this.oe},get (){return this.ue},get (){return this.y}};if(typeof GainNode<"u"){class i extends GainNode{constructor(x,M){if(super(x),!ju[M])throw new Error("vowel: unknown vowel "+M);const{gains:R,qs:w,freqs:v}=ju[M];this.makeupGain=x.createGain(),this.filters=[],this.gains=[];for(let T=0;T<5;T++){const t=x.createGain();t.gain.value=R[T];const h=x.createBiquadFilter();h.type="bandpass",h.Q.value=w[T],h.frequency.value=v[T],super.connect(h),h.connect(t),this.filters.push(h),t.connect(this.makeupGain),this.gains.push(t)}return this.makeupGain.gain.value=8,this}connect(x){this.makeupGain.connect(x)}disconnect(){ue(this.makeupGain),this.filters.forEach(ue),this.gains.forEach(ue),super.disconnect(),this.makeupGain=null,this.filters=null,this.gains=null}}BaseAudioContext.prototype.createVowelFilter=function(p){return new i(this,p)}}const TD="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oUil7InVzZSBzdHJpY3QiO3ZhciBXZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIFllPShSLFcsWCk9PlcgaW4gUj9XZShSLFcse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOlh9KTpSW1ddPVg7dmFyIER0PShSLFcsWCk9PlllKFIsdHlwZW9mIFchPSJzeW1ib2wiP1crIiI6VyxYKTtjbGFzcyBYIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgcz0wO3M8dGhpcy5uYklucHV0cztzKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMocywxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHMsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxzKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKXtsZXQgaT10W2VdLmxlbmd0aDtpIT10aGlzLmlucHV0QnVmZmVyc1tlXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGUsaSl9Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspe2xldCBpPXNbZV0ubGVuZ3RoO2khPXRoaXMub3V0cHV0QnVmZmVyc1tlXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhlLGkpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxzKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkocyk7Zm9yKGxldCBlPTA7ZTxzO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bZV0uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KHMpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtlXT10aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQscyl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShzKTtmb3IobGV0IGU9MDtlPHM7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bZV09bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtlXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1tzXVtlXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl7bGV0IGk9dFtzXVtlXTt0aGlzLmlucHV0QnVmZmVyc1tzXVtlXS5zZXQoaSx0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbc10ubGVuZ3RoO2UrKyl7bGV0IGk9dGhpcy5vdXRwdXRCdWZmZXJzW3NdW2VdLnN1YmFycmF5KDAsMTI4KTt0W3NdW2VdLnNldChpKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IHM9MDtzPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW3NdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgcz0wO3M8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtzKyspZm9yKGxldCBlPTA7ZTx0aGlzLmJsb2NrU2l6ZTtlKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW3NdW2VdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW3NdW2VdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQscyxlKXtjb25zdCBuPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIW4/ITE6KHRoaXMuc3RhcnRlZD1uLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxzKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLGUpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhzKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQscyxlKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBRdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBzPW5ldyBBcnJheSh0aGlzLnNpemUqMiksZT0wO2U8cy5sZW5ndGg7ZSs9Mil7Y29uc3QgaD1NYXRoLlBJKmUvdGhpcy5zaXplO3NbZV09TWF0aC5jb3MoaCksc1tlKzFdPS1NYXRoLnNpbihoKX10aGlzLnRhYmxlPXM7Zm9yKHZhciBpPTAsbj0xO3RoaXMuc2l6ZT5uO248PD0xKWkrKzt0aGlzLl93aWR0aD1pJTI9PT0wP2ktMTppLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgYT0wO2E8dGhpcy5fYml0cmV2Lmxlbmd0aDthKyspe3RoaXMuX2JpdHJldlthXT0wO2Zvcih2YXIgbz0wO288dGhpcy5fd2lkdGg7bys9Mil7dmFyIGM9dGhpcy5fd2lkdGgtby0yO3RoaXMuX2JpdHJldlthXXw9KGE+Pj5vJjMpPDxjfX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LHMpe2Zvcih2YXIgZT1zfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxpPTA7aTx0Lmxlbmd0aDtpKz0yKWVbaT4+PjFdPXRbaV07cmV0dXJuIGV9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRbc109MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LHMpe2Zvcih2YXIgZT1zfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLGk9MDtpPGUubGVuZ3RoO2krPTIpZVtpXT10W2k+Pj4xXSxlW2krMV09MDtyZXR1cm4gZX1jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgcz10aGlzLl9jc2l6ZSxlPXM+Pj4xLGk9MjtpPGU7aSs9Mil0W3MtaV09dFtpXSx0W3MtaSsxXT0tdFtpKzFdfXRyYW5zZm9ybSh0LHMpe2lmKHQ9PT1zKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LHMpe2lmKHQ9PT1zKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxzKXtpZih0PT09cyl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9cyx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxzPXRoaXMuX2NzaXplLGU9dGhpcy5fd2lkdGgsaT0xPDxlLG49cy9pPDwxLGEsbyxjPXRoaXMuX2JpdHJldjtpZihuPT09NClmb3IoYT0wLG89MDthPHM7YSs9bixvKyspe2NvbnN0IG09Y1tvXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKGEsbSxpKX1lbHNlIGZvcihhPTAsbz0wO2E8czthKz1uLG8rKyl7Y29uc3QgbT1jW29dO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQoYSxtLGkpfXZhciBoPXRoaXMuX2ludj8tMToxLGY9dGhpcy50YWJsZTtmb3IoaT4+PTI7aT49MjtpPj49Mil7bj1zL2k8PDE7dmFyIHU9bj4+PjI7Zm9yKGE9MDthPHM7YSs9bilmb3IodmFyIGQ9YSt1LGw9YSxwPTA7bDxkO2wrPTIscCs9aSl7Y29uc3QgbT1sLEk9bSt1LHc9SSt1LHY9dyt1LE09dFttXSxQPXRbbSsxXSxnPXRbSV0sVD10W0krMV0sQT10W3ddLFY9dFt3KzFdLE89dFt2XSxOPXRbdisxXSxDPU0sRj1QLHE9ZltwXSxCPWgqZltwKzFdLEw9ZypxLVQqQixFPWcqQitUKnEsSD1mWzIqcF0saXQ9aCpmWzIqcCsxXSwkPUEqSC1WKml0LFU9QSppdCtWKkgsSz1mWzMqcF0sWj1oKmZbMypwKzFdLGs9TypLLU4qWixmdD1PKlorTipLLGR0PUMrJCxydD1GK1UsbnQ9Qy0kLHB0PUYtVSxtdD1MK2ssYXQ9RStmdCxvdD1oKihMLWspLGd0PWgqKEUtZnQpLHZ0PWR0K210LEF0PXJ0K2F0LE90PWR0LW10LE50PXJ0LWF0LEN0PW50K2d0LEZ0PXB0LW90LEV0PW50LWd0LGt0PXB0K290O3RbbV09dnQsdFttKzFdPUF0LHRbSV09Q3QsdFtJKzFdPUZ0LHRbd109T3QsdFt3KzFdPU50LHRbdl09RXQsdFt2KzFdPWt0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPW5bc10sbz1uW3MrMV0sYz1uW3MrZV0saD1uW3MrZSsxXSxmPWErYyx1PW8raCxkPWEtYyxsPW8taDtpW3RdPWYsaVt0KzFdPXUsaVt0KzJdPWQsaVt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPXRoaXMuX2ludj8tMToxLG89ZSoyLGM9ZSozLGg9bltzXSxmPW5bcysxXSx1PW5bcytlXSxkPW5bcytlKzFdLGw9bltzK29dLHA9bltzK28rMV0sbT1uW3MrY10sST1uW3MrYysxXSx3PWgrbCx2PWYrcCxNPWgtbCxQPWYtcCxnPXUrbSxUPWQrSSxBPWEqKHUtbSksVj1hKihkLUkpLE89dytnLE49ditULEM9TStWLEY9UC1BLHE9dy1nLEI9di1ULEw9TS1WLEU9UCtBO2lbdF09TyxpW3QrMV09TixpW3QrMl09QyxpW3QrM109RixpW3QrNF09cSxpW3QrNV09QixpW3QrNl09TCxpW3QrN109RX1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQscz10aGlzLl9jc2l6ZSxlPXRoaXMuX3dpZHRoLGk9MTw8ZSxuPXMvaTw8MSxhLG8sYz10aGlzLl9iaXRyZXY7aWYobj09PTQpZm9yKGE9MCxvPTA7YTxzO2ErPW4sbysrKXtjb25zdCBSdD1jW29dO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKGEsUnQ+Pj4xLGk+Pj4xKX1lbHNlIGZvcihhPTAsbz0wO2E8czthKz1uLG8rKyl7Y29uc3QgUnQ9Y1tvXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChhLFJ0Pj4+MSxpPj4+MSl9dmFyIGg9dGhpcy5faW52Py0xOjEsZj10aGlzLnRhYmxlO2ZvcihpPj49MjtpPj0yO2k+Pj0yKXtuPXMvaTw8MTt2YXIgdT1uPj4+MSxkPXU+Pj4xLGw9ZD4+PjE7Zm9yKGE9MDthPHM7YSs9bilmb3IodmFyIHA9MCxtPTA7cDw9bDtwKz0yLG0rPWkpe3ZhciBJPWErcCx3PUkrZCx2PXcrZCxNPXYrZCxQPXRbSV0sZz10W0krMV0sVD10W3ddLEE9dFt3KzFdLFY9dFt2XSxPPXRbdisxXSxOPXRbTV0sQz10W00rMV0sRj1QLHE9ZyxCPWZbbV0sTD1oKmZbbSsxXSxFPVQqQi1BKkwsSD1UKkwrQSpCLGl0PWZbMiptXSwkPWgqZlsyKm0rMV0sVT1WKml0LU8qJCxLPVYqJCtPKml0LFo9ZlszKm1dLGs9aCpmWzMqbSsxXSxmdD1OKlotQyprLGR0PU4qaytDKloscnQ9RitVLG50PXErSyxwdD1GLVUsbXQ9cS1LLGF0PUUrZnQsb3Q9SCtkdCxndD1oKihFLWZ0KSx2dD1oKihILWR0KSxBdD1ydCthdCxPdD1udCtvdCxOdD1wdCt2dCxDdD1tdC1ndDtpZih0W0ldPUF0LHRbSSsxXT1PdCx0W3ddPU50LHRbdysxXT1DdCxwPT09MCl7dmFyIEZ0PXJ0LWF0LEV0PW50LW90O3Rbdl09RnQsdFt2KzFdPUV0O2NvbnRpbnVlfWlmKHAhPT1sKXt2YXIga3Q9cHQsT2U9LW10LE5lPXJ0LENlPS1udCxGZT0taCp2dCxFZT0taCpndCxrZT0taCpvdCxSZT0taCphdCxEZT1rdCtGZSx6ZT1PZStFZSxxZT1OZStSZSxMZT1DZS1rZSxadD1hK2QtcCxYdD1hK3UtcDt0W1p0XT1EZSx0W1p0KzFdPXplLHRbWHRdPXFlLHRbWHQrMV09TGV9fX19X3NpbmdsZVJlYWxUcmFuc2Zvcm0yKHQscyxlKXtjb25zdCBpPXRoaXMuX291dCxuPXRoaXMuX2RhdGEsYT1uW3NdLG89bltzK2VdLGM9YStvLGg9YS1vO2lbdF09YyxpW3QrMV09MCxpW3QrMl09aCxpW3QrM109MH1fc2luZ2xlUmVhbFRyYW5zZm9ybTQodCxzLGUpe2NvbnN0IGk9dGhpcy5fb3V0LG49dGhpcy5fZGF0YSxhPXRoaXMuX2ludj8tMToxLG89ZSoyLGM9ZSozLGg9bltzXSxmPW5bcytlXSx1PW5bcytvXSxkPW5bcytjXSxsPWgrdSxwPWgtdSxtPWYrZCxJPWEqKGYtZCksdz1sK20sdj1wLE09LUksUD1sLW0sZz1wLFQ9STtpW3RdPXcsaVt0KzFdPTAsaVt0KzJdPXYsaVt0KzNdPU0saVt0KzRdPVAsaVt0KzVdPTAsaVt0KzZdPWcsaVt0KzddPVR9fWxldCB0cz1yPT5jb25zb2xlLmxvZyhyKTtjb25zdCBzcz0oLi4ucik9PnRzKC4uLnIpLGVzPShyLHQscyk9Pk1hdGgubWluKE1hdGgubWF4KHIsdCkscyksenQ9cj0+ci8oMStyKSxpcz0ocix0KT0+KHIldCt0KSV0LHJzPShyLHQpPT4oMSt0KSpyLygxK3QqTWF0aC5hYnMocikpLEo9KHIsdCk9Pk1hdGgudGFuaChyKigxK3QpKSxucz0ocix0KT0+ZXMoKDErdCkqciwtMSwxKSxxdD0ocix0KT0+e2xldCBzPSgxKy41KnQpKnI7Y29uc3QgZT1pcyhzKzEsNCk7cmV0dXJuIDEtTWF0aC5hYnMoZS0yKX0sYXM9KHIsdCk9Pk1hdGguc2luKE1hdGguUEkvMipxdChyLHQpKSxvcz0ocix0KT0+e2NvbnN0IHM9enQoTWF0aC5sb2cxcCh0KSksZT0oci1zLzMqcipyKnIpLygxLXMvMyk7cmV0dXJuIEooZSx0KX0sTHQ9KHIsdCxzPSExKT0+e2NvbnN0IGU9MSsyKnQsbj0uMDcqenQoTWF0aC5sb2cxcCh0KSksYT1KKHIrbiwyKnQpLG89SihzP246LXIrbiwyKnQpLGM9YS1vLGg9MS9NYXRoLmNvc2goZSpuKSxmPWgqaCx1PU1hdGgubWF4KDFlLTgsKHM/MToyKSplKmYpO3JldHVybiBKKGMvdSx0KX0sV3Q9e3NjdXJ2ZTpycyxzb2Z0OkosaGFyZDpucyxjdWJpYzpvcyxkaW9kZTpMdCxhc3ltOihyLHQpPT5MdChyLHQsITApLGZvbGQ6cXQsc2luZWZvbGQ6YXMsY2hlYnlzaGV2OihyLHQpPT57Y29uc3Qgcz0xMCpNYXRoLmxvZzFwKHQpO2xldCBlPTEsaT1yLG4sYT0wO2ZvcihsZXQgbz0xO288NjQ7bysrKXtpZihvPDIpe2ErPW89PTA/ZTppO2NvbnRpbnVlfW49MipyKmUtaSxpPWUsZT1uLG8lMj09PTAmJihhKz1NYXRoLm1pbigxLjMqcy9vLDIpKm4pfXJldHVybiBKKGEscy8yMCl9fSxodD1PYmplY3QuZnJlZXplKE9iamVjdC5rZXlzKFd0KSksaHM9cj0+e2xldCB0PXI7dHlwZW9mIHI9PSJzdHJpbmciJiYodD1odC5pbmRleE9mKHIpLHQ9PT0tMSYmKHNzKGBbc3VwZXJkb3VnaF0gQ291bGQgbm90IGZpbmQgd2F2ZXNoYXBpbmcgYWxnb3JpdGhtICR7cn0uCiAgICAgICAgQXZhaWxhYmxlIG9wdGlvbnMgYXJlICR7aHQuam9pbigiLCAiKX0uCiAgICAgICAgRGVmYXVsdGluZyB0byAke2h0WzBdfS5gKSx0PTApKTtjb25zdCBzPWh0W3QlaHQubGVuZ3RoXTtyZXR1cm4gV3Rbc119O2Z1bmN0aW9uIGN0KHIsdCl7aWYodHx8KHQ9ImFzc2VydGlvbiBmYWlsZWQiKSwhcil0aHJvdyBuZXcgRXJyb3IodCl9ZnVuY3Rpb24gY3Mocix0LHMpe3JldHVybiByPD0wP3Q6cj49MT9zOnQrcioocy10KX1mdW5jdGlvbiB1cyhyLHQscyl7cmV0dXJuIHI8PXQ/MDpyPj1zPzE6cz09PXQ/MDooci10KS8ocy10KX1mdW5jdGlvbiBscyhyLHQpe3JldHVybiByPHQ/KHIvPXQscityLXIqci0xKTpyPjEtdD8ocj0oci0xKS90LHIqcityK3IrMSk6MH1mdW5jdGlvbiBmcyhyKXtyZXR1cm4gTWF0aC5mbG9vcihyKT09PXJ9ZnVuY3Rpb24gZHMocil7cmV0dXJuIGZzKHIpJiZyPjB9ZnVuY3Rpb24gcHMocix0KXt0PU1hdGgubWluKE1hdGgubWF4KHQsMCksMSksdC09LjAxO3ZhciBzPTIqdC8oMS10KSxlPSgxK3MpKnIvKDErcypNYXRoLmFicyhyKSk7cmV0dXJuIGV9ZnVuY3Rpb24gSXQocix0LHMpe3JldHVybiByPj0xP3M6dCtyKihzLXQpfWZ1bmN0aW9uIFl0KCl7dGhpcy5zdGF0ZT0ib2ZmIix0aGlzLnN0YXJ0VGltZT0wLHRoaXMuc3RhcnRWYWw9MH1ZdC5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihyLHQscyxlLGksbil7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2Uib2ZmIjpyZXR1cm4gdD4wJiYodGhpcy5zdGF0ZT0iYXR0YWNrIix0aGlzLnN0YXJ0VGltZT1yLHRoaXMuc3RhcnRWYWw9MCksMDtjYXNlImF0dGFjayI6e2xldCBhPXItdGhpcy5zdGFydFRpbWU7cmV0dXJuIGE+cz8odGhpcy5zdGF0ZT0iZGVjYXkiLHRoaXMuc3RhcnRUaW1lPXIsMSk6SXQoYS9zLHRoaXMuc3RhcnRWYWwsMSl9Y2FzZSJkZWNheSI6e2xldCBhPXItdGhpcy5zdGFydFRpbWUsbz1JdChhL2UsMSxpKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cix0aGlzLnN0YXJ0VmFsPW8sbyk6YT5lPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1yLGkpOm99Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXIsdGhpcy5zdGFydFZhbD1pKSxpO2Nhc2UicmVsZWFzZSI6e2xldCBhPXItdGhpcy5zdGFydFRpbWU7aWYoYT5uKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IG89SXQoYS9uLHRoaXMuc3RhcnRWYWwsMCk7cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cix0aGlzLnN0YXJ0VmFsPW8pLG99fXRocm93ImludmFsaWQgZW52ZWxvcGUgc3RhdGUifTtmdW5jdGlvbiB3dCgpe3RoaXMuczA9MCx0aGlzLnMxPTB9d3QucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHIsdCxzKXtjdCghaXNOYU4ociksIk5hTiB2YWx1ZSBmZWQgaW4gVHdvUG9sZUZpbHRlciIpLHQ9TWF0aC5taW4odCwxKSxzPU1hdGgubWF4KHMsMCk7dmFyIGU9TWF0aC5wb3coLjUsKDEtdCkvLjEyNSksaT1NYXRoLnBvdyguNSwocysuMTI1KS8uMTI1KSxuPTEtaSplLGE9dGhpcy5zMCxvPXRoaXMuczE7cmV0dXJuIGE9biphLWUqbytlKnIsbz1uKm8rZSphLHI9byx0aGlzLnMwPWEsdGhpcy5zMT1vLHJ9O2xldCBtcz1jbGFzcyBKdHtjb25zdHJ1Y3Rvcih0LHMpe3RoaXMuc2FtcGxlUmF0ZT10LHM/dGhpcy5idWZmZXI9cy5zbGljZSgwKToodGhpcy5idWZmZXI9bmV3IEZsb2F0MzJBcnJheSgxMCp0KSx0aGlzLmJ1ZmZlci5maWxsKDApKSx0aGlzLndyaXRlSWR4PTAsdGhpcy5yZWFkSWR4PTB9cmVzZXQoKXt0aGlzLmJ1ZmZlci5maWxsKDApLHRoaXMud3JpdGVJZHg9MCx0aGlzLnJlYWRJZHg9MH1jbG9uZSgpe2NvbnN0IHQ9bmV3IEp0KHRoaXMuc2FtcGxlUmF0ZSx0aGlzLmJ1ZmZlcik7cmV0dXJuIHQud3JpdGVJZHg9dGhpcy53cml0ZUlkeCx0LnJlYWRJZHg9dGhpcy5yZWFkSWR4LHR9d3JpdGUodCxzKXt0aGlzLndyaXRlSWR4PSh0aGlzLndyaXRlSWR4KzEpJXRoaXMuYnVmZmVyLmxlbmd0aCx0aGlzLmJ1ZmZlclt0aGlzLndyaXRlSWR4XT10O2xldCBlPU1hdGgubWluKE1hdGguZmxvb3IodGhpcy5zYW1wbGVSYXRlKnMpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1lLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXJlYWQoKXtyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19O2NvbnN0IFN0PTEvNDhlMyxfdD0yNCxncz1fdC80O2NsYXNzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy5ub2RlSWQ9dCx0aGlzLnN0YXRlPXMsdGhpcy5zYW1wbGVSYXRlPWUsdGhpcy5zYW1wbGVUaW1lPTEvZSx0aGlzLnNlbmQ9aX19Y2xhc3MgYnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZW52PW5ldyBZdH11cGRhdGUodCxzLGUsaSxuLGEpe3JldHVybiB0aGlzLmVudi5ldmFsKHQscyxlLGksbixhKX19Y2xhc3MgdnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7bGV0IHM9X3QqdC82MCxlPS41O3JldHVybiB0aGlzLnBoYXNlKz10aGlzLnNhbXBsZVRpbWUqcyx0aGlzLnBoYXNlJTE8ZT8xOi0xfX1jbGFzcyBJcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5pblNnbj0hMCx0aGlzLm91dFNnbj0hMCx0aGlzLmNsb2NrQ250PTB9dXBkYXRlKHQscyl7bGV0IGU9dD4wO3JldHVybiB0aGlzLmluU2duIT1lJiYodGhpcy5jbG9ja0NudCsrLHRoaXMuY2xvY2tDbnQ+PXMmJih0aGlzLmNsb2NrQ250PTAsdGhpcy5vdXRTZ249IXRoaXMub3V0U2duKSksdGhpcy5pblNnbj1lLHRoaXMub3V0U2duPzE6LTF9fWNsYXNzIHdzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmluU2duPSExfXVwZGF0ZSh0LHMpe2xldCBlPXM+MDtyZXR1cm4gZSYmdGhpcy5pblNnbiE9ZSYmdGhpcy5zZW5kKHt0eXBlOiJDTE9DS19QVUxTRSIsbm9kZUlkOnRoaXMubm9kZUlkLHRpbWU6dH0pLHRoaXMuaW5TZ249ZSwwfX1jb25zdCBNdD1uZXcgTWFwO2NsYXNzIFNzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKTtjb25zdCBuPXMuaW5wdXRzWzJdO24mJk10LmhhcyhuKT90aGlzLmRlbGF5PU10LmdldChuKS5jbG9uZSgpOnRoaXMuZGVsYXk9bmV3IG1zKGUpLG4mJk10LnNldChuLHRoaXMuZGVsYXkpfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLmRlbGF5LndyaXRlKHQscyksdGhpcy5kZWxheS5yZWFkKCl9fWNsYXNzIF9zIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKX11cGRhdGUodCxzKXtyZXR1cm4gcHModCxzKX19Y2xhc3MgTXMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudmFsdWU9MCx0aGlzLnRyaWdTZ249ITF9d3JpdGUodCxzKXshdGhpcy50cmlnU2duJiZzPjAmJih0aGlzLnZhbHVlPXQpLHRoaXMudHJpZ1Nnbj1zPjB9cmVhZCgpe3JldHVybiB0aGlzLnZhbHVlfXVwZGF0ZSh0LHMpe3JldHVybiB0aGlzLndyaXRlKHQscyksdGhpcy5yZWFkKCl9fWNsYXNzIHhze2NvbnN0cnVjdG9yKCl7dGhpcy52YWx1ZT0wfXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy52YWx1ZT10LHRoaXMudmFsdWV9fWNvbnN0IHlzPTM0MDtsZXQgR3Q9MDtjbGFzcyBQc3tjb25zdHJ1Y3Rvcigpe3RoaXMuY2g9R3QsdGhpcy5zdGFydF9zZWVkPXlzKih0aGlzLmNoKzEpPj4+MCx0aGlzLnN0YXRlPXRoaXMuc3RhcnRfc2VlZCx0aGlzLnZhbHVlPTAsdGhpcy5hPTE2NjQ1MjUsdGhpcy5jPTEwMTM5MDQyMjMsdGhpcy5tYXNrPTE2Nzc3MjE1LHRoaXMuc2NhbGU9NTk2MDQ2NDQ3NzUzOTA2M2UtMjMsR3QrK311cGRhdGUodCxzKXtpZighdClyZXR1cm4gdGhpcy52YWx1ZTtzJiYodGhpcy5zdGF0ZT10aGlzLnN0YXJ0X3NlZWQpLHRoaXMuc3RhdGU9dGhpcy5zdGF0ZSp0aGlzLmErdGhpcy5jPj4+MDtjb25zdCBlPSh0aGlzLnN0YXRlJnRoaXMubWFzaykqdGhpcy5zY2FsZTtyZXR1cm4gdGhpcy52YWx1ZT1lKjItMSx0aGlzLnZhbHVlfX1jbGFzcyBUc3tjb25zdHJ1Y3Rvcigpe3RoaXMudmFsdWU9TWF0aC5yYW5kb20oKSoyLTF9dXBkYXRlKHQpe3JldHVybiB0Pyh0aGlzLnZhbHVlPU1hdGgucmFuZG9tKCkqMi0xLHRoaXMudmFsdWUpOnRoaXMudmFsdWV9fWNsYXNzIEJze3VwZGF0ZSh0KXtyZXR1cm4gTWF0aC5yYW5kb20oKTx0KlN0P01hdGgucmFuZG9tKCk6MH19Y2xhc3MgVnN7Y29uc3RydWN0b3IoKXt0aGlzLm91dD0wfXVwZGF0ZSgpe2xldCB0PU1hdGgucmFuZG9tKCkqMi0xO3JldHVybiB0aGlzLm91dD0odGhpcy5vdXQrLjAyKnQpLzEuMDIsdGhpcy5vdXR9fWNsYXNzIEFze2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHQ9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCt0Ki4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErdCouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMit0Ki4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3QqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCt0Ki41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtdCouMDE2ODk4O2NvbnN0IHM9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNit0Ki41MzYyO3JldHVybiB0aGlzLmI2PXQqLjExNTkyNixzKi4xMX19Y2xhc3MgT3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MX11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHN9fWNsYXNzIE5zIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMucGhhc2UrPXRoaXMuc2FtcGxlVGltZSp0LHRoaXMucGhhc2UlMTxzPzE6LTF9fWNsYXNzIENzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnBoYXNlPTB9dXBkYXRlKHQpe3JldHVybiB0aGlzLnBoYXNlKz10aGlzLnNhbXBsZVRpbWUqdCx0aGlzLnBoYXNlJTEqMi0xfX1jbGFzcyBGc3tjb25zdHJ1Y3Rvcigpe3RoaXMucGhhc2U9TWF0aC5yYW5kb20oKX11cGRhdGUodCl7Y29uc3Qgcz10L3NhbXBsZVJhdGU7bGV0IGU9bHModGhpcy5waGFzZSxzKSxpPTIqdGhpcy5waGFzZS0xLWU7cmV0dXJuIHRoaXMucGhhc2UrPXMsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZS09MSksaX19Y2xhc3MgRXMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MCx0aGlzLnN5bmNTZ249ITF9dXBkYXRlKHQscyxlKXshdGhpcy5zeW5jU2duJiZzPjAmJih0aGlzLnBoYXNlPTApLHRoaXMuc3luY1Nnbj1zPjA7bGV0IGk9KHRoaXMucGhhc2UrZSklMTtyZXR1cm4gdGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQsTWF0aC5zaW4oaSoyKk1hdGguUEkpfX1jbGFzcyBrc3tkQlRvTGluZWFyKHQpe3JldHVybiBNYXRoLnBvdygxMCx0LzIwKX1saW5lYXJUb0RCKHQpe3JldHVybiAyMCpNYXRoLmxvZzEwKHQpfXVwZGF0ZSh0LHMsZSl7bGV0IGk9dGhpcy5saW5lYXJUb0RCKE1hdGguYWJzKHQpKSxuPTA7cmV0dXJuIGk+cyYmKG49KGktcykqKDEtMS9lKSksdGhpcy5kQlRvTGluZWFyKC1uKX19Y2xhc3MgUnMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMucGhhc2U9MH11cGRhdGUodCl7dGhpcy5waGFzZSs9dGhpcy5zYW1wbGVUaW1lKnQ7bGV0IHM9dGhpcy5waGFzZSUxO3JldHVybihzPC41PzIqczoxLTIqKHMtLjUpKSoyLTF9fWNsYXNzIERzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKTtjb25zdCBuPWUvMzA7Y3QoZHMobikpLHRoaXMuYnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkobiksdGhpcy53cml0ZVBvcz0wfXVwZGF0ZSh0LHMsZSxpKXtyZXR1cm4gdGhpcy5idWZmZXJbdGhpcy53cml0ZVBvc109dCx0aGlzLndyaXRlUG9zKyssdGhpcy53cml0ZVBvcyV0aGlzLmJ1ZmZlci5sZW5ndGg9PTAmJih0aGlzLndyaXRlUG9zPTAsdGhpcy5zZW5kKHt0eXBlOiJTRU5EX1NBTVBMRVMiLGlkOnMsc2FtcGxlczp0aGlzLmJ1ZmZlcixjaGFubmVsczplLGNoYW5uZWw6aX0pKSx0fX1jbGFzcyB6c3tjb25zdHJ1Y3Rvcigpe3RoaXMubGFnVW5pdD00NDEwLHRoaXMucz0wfXVwZGF0ZSh0LHMpe3JldHVybiBzPXMqdGhpcy5sYWdVbml0LHM8MSYmKHM9MSksdGhpcy5zKz0xL3MqKHQtdGhpcy5zKSx0aGlzLnN9fWNsYXNzIHFze2NvbnN0cnVjdG9yKCl7dGhpcy5sYXN0PTB9dXBkYXRlKHQscyxlKXtjb25zdCBpPXMqU3Qsbj1lKlN0O2xldCBhPXQtdGhpcy5sYXN0O3JldHVybiBhPmk/YT1pOmE8LW4mJihhPS1uKSx0aGlzLmxhc3QrPWEsdGhpcy5sYXN0fX1jbGFzcyBMcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5zPTB9dXBkYXRlKHQscyl7cmV0dXJuIHM9cyoxZTMsczwxJiYocz0xKSx0aGlzLnMrPTEvcyoodC10aGlzLnMpLHRoaXMuc319Y2xhc3MgV3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMuZmlsdGVyPW5ldyB3dH11cGRhdGUodCxzLGUpe3JldHVybiB0aGlzLmZpbHRlci5hcHBseSh0LHMsZSksdGhpcy5maWx0ZXIuczF9fWNsYXNzIFlzIGV4dGVuZHMgeXtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLmZpbHRlcj1uZXcgd3R9dXBkYXRlKHQscyxlKXtyZXR1cm4gdGhpcy5maWx0ZXIuYXBwbHkodCxzLGUpLHRoaXMuZmlsdGVyLnMwfX1jbGFzcyBHcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSl9dXBkYXRlKHQscyl7cmV0dXJuIHM8MCYmKHM9MCkscz1zKzEsdD10KnMsNCooTWF0aC5hYnMoLjI1KnQrLjI1LU1hdGgucm91bmQoLjI1KnQrLjI1KSktLjI1KX19Y2xhc3MganMgZXh0ZW5kcyB5e3VwZGF0ZSh0KXtyZXR1cm4gdH19Y2xhc3MgYnQgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMubm90ZT0wLHRoaXMuZnJlcT0wLHRoaXMudmVsb2NpdHk9MCx0aGlzLmdhdGVTdGF0ZT0ib2ZmIix0aGlzLnR5cGU9Im1pZGlpbiIsdGhpcy5jaGFubmVsPS0xfWlzRnJlZSgpe3JldHVybiB0aGlzLmdhdGVTdGF0ZT09PSJvZmYifW5vdGVPbih0LHMpe3M+MD8odGhpcy5ub3RlPXQsdGhpcy52ZWxvY2l0eT1zLHRoaXMuZnJlcT0yKiooKHQtNjkpLzEyKSo0NDAsdGhpcy5nYXRlU3RhdGU9InByZXRyaWciKTp0aGlzLm5vdGVPZmYoKX1ub3RlT2ZmKCl7dGhpcy5ub3RlPTAsdGhpcy5nYXRlU3RhdGU9Im9mZiJ9Z2V0R2F0ZSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiAxO2Nhc2Uib2ZmIjpyZXR1cm4gMDtkZWZhdWx0OmN0KCExKX19Z2V0RnJlcSgpe3N3aXRjaCh0aGlzLmdhdGVTdGF0ZSl7Y2FzZSJwcmV0cmlnIjpyZXR1cm4gdGhpcy5nYXRlU3RhdGU9Im9uIiwwO2Nhc2Uib24iOnJldHVybiB0aGlzLmZyZXE7Y2FzZSJvZmYiOnJldHVybiB0aGlzLmZyZXE7ZGVmYXVsdDpjdCghMSl9fWdldFZlbG9jaXR5KCl7c3dpdGNoKHRoaXMuZ2F0ZVN0YXRlKXtjYXNlInByZXRyaWciOnJldHVybiB0aGlzLmdhdGVTdGF0ZT0ib24iLDA7Y2FzZSJvbiI6cmV0dXJuIHRoaXMudmVsb2NpdHk7Y2FzZSJvZmYiOnJldHVybiB0aGlzLnZlbG9jaXR5O2RlZmF1bHQ6Y3QoITEpfX19Y2xhc3MgSHMgZXh0ZW5kcyBidHtjb25zdHJ1Y3Rvcih0LHMsZSxpKXtzdXBlcih0LHMsZSxpKSx0aGlzLnR5cGU9Im1pZGlnYXRlIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0R2F0ZSgpfX1jbGFzcyBVcyBleHRlbmRzIGJ0e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWZyZXEifXVwZGF0ZSh0KXtyZXR1cm4gdGhpcy5jaGFubmVsPXQsdGhpcy5nZXRGcmVxKCl9fWNsYXNzICRzIGV4dGVuZHMgYnR7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJtaWRpdmVsIn11cGRhdGUodCl7cmV0dXJuIHRoaXMuY2hhbm5lbD10LHRoaXMuZ2V0VmVsb2NpdHkoKX19Y2xhc3MgS3N7Y29uc3RydWN0b3IodCxzLGUsaSl7dGhpcy51cD0hMSx0aGlzLnNlbmQ9aSx0aGlzLnZhbHVlPTAsdGhpcy50eXBlPSJjYyJ9c2V0VmFsdWUodCl7dGhpcy52YWx1ZT10fXVwZGF0ZSh0LHMsZSl7cmV0dXJuIHRoaXMuaWQ9cywhdGhpcy51cCYmdD4wPyh0aGlzLnVwPSEwLHRoaXMuc2VuZCh7dHlwZToiU0lHTkFMX1RSSUdHRVIiLGlkOnMsdGltZTplfSksdGhpcy52YWx1ZSk6KHRoaXMudXA9dD4wLHRoaXMudmFsdWUpfX1jbGFzcyBacyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy50eXBlPSJjYyIsdGhpcy52YWx1ZT1zLmlucHV0c1sxXT8/MH1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQpe3JldHVybiB0aGlzLmlkPXQsdGhpcy52YWx1ZX19Y2xhc3MgWHMgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKHQscyxlLGkpe3N1cGVyKHQscyxlLGkpLHRoaXMudHlwZT0ibWlkaWNjIix0aGlzLnZhbHVlPXMuaW5wdXRzWzJdPz8tMSx0aGlzLmNoYW5uZWw9LTEsdGhpcy5jY251bWJlcj0tMX1zZXRWYWx1ZSh0KXt0aGlzLnZhbHVlPXR9dXBkYXRlKHQscyl7cmV0dXJuIHRoaXMuY2NudW1iZXI9dCx0aGlzLmNoYW5uZWw9cyx0aGlzLnZhbHVlfX1jbGFzcyBKcyBleHRlbmRzIHl7Y29uc3RydWN0b3IodCxzLGUsaSl7c3VwZXIodCxzLGUsaSksdGhpcy5jbG9ja1Nnbj0hMCx0aGlzLnN0ZXA9MCx0aGlzLmZpcnN0PSEwfXVwZGF0ZSh0LC4uLnMpe3JldHVybiF0aGlzLmNsb2NrU2duJiZ0PjA/KHRoaXMuc3RlcD0odGhpcy5zdGVwKzEpJXMubGVuZ3RoLHRoaXMuY2xvY2tTZ249dD4wLDApOih0aGlzLmNsb2NrU2duPXQ+MCxzW3RoaXMuc3RlcF0pfX1jbGFzcyBRcyBleHRlbmRzIHl7dXBkYXRlKHQsLi4ucyl7Y29uc3QgZT10JXMubGVuZ3RoK3MubGVuZ3RoO3JldHVybiBzW01hdGguZmxvb3IoZSklcy5sZW5ndGhdfX1jbGFzcyB0ZXt1cGRhdGUodCxzLGUsaSxuKXtsZXQgYT11cyh0LHMsZSk7cmV0dXJuIGNzKGEsaSxuKX19Y2xhc3Mgc2V7dXBkYXRlKHQscyxlKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodCxzKSxlKX19Y2xhc3MgZWV7Y29uc3RydWN0b3IoKXt0aGlzLmhpPSExfXVwZGF0ZSh0KXtyZXR1cm4hdGhpcy5oaSYmdD4wPyh0aGlzLmhpPSEwLDEpOih0aGlzLmhpJiZ0PD0wJiYodGhpcy5oaT0hMSksMCl9fWNsYXNzIGlle2NvbnN0cnVjdG9yKCl7dGhpcy54MT0wLHRoaXMueDI9MCx0aGlzLnkxPTAsdGhpcy55Mj0wLHRoaXMuYTA9MSx0aGlzLmExPTAsdGhpcy5hMj0wLHRoaXMuYjA9MSx0aGlzLmIxPTAsdGhpcy5iMj0wfXVwZGF0ZSh0PTAscz0wLGU9NTAwLGk9MSxuPTEpe2NvbnN0IGE9MipNYXRoLlBJKmUvc2FtcGxlUmF0ZSxvPU1hdGguc2luKGEpO2k9TWF0aC5wb3coMTAsaS8yMCk7Y29uc3QgYz1vLygyKmkpLGg9TWF0aC5jb3MoYSk7aWYocz09PTApdGhpcy5iMT0xLWgsdGhpcy5iMD10aGlzLmIxLzIsdGhpcy5iMj10aGlzLmIwLHRoaXMuYTA9MStjLHRoaXMuYTE9LTIqaCx0aGlzLmEyPTEtYztlbHNlIGlmKHM9PT0xKXRoaXMuYjA9KDEraCkvMix0aGlzLmIxPS0oMStoKSx0aGlzLmIyPXRoaXMuYjAsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTIpdGhpcy5iMD1vLzIsdGhpcy5iMT0wLHRoaXMuYjI9LXRoaXMuYjAsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTMpdGhpcy5iMD0xLHRoaXMuYjE9LTIqaCx0aGlzLmIyPTEsdGhpcy5hMD0xK2MsdGhpcy5hMT0tMipoLHRoaXMuYTI9MS1jO2Vsc2UgaWYocz09PTQpdGhpcy5iMD0xLWMsdGhpcy5iMT0tMipoLHRoaXMuYjI9MStjLHRoaXMuYTA9MStjLHRoaXMuYTE9LTIqaCx0aGlzLmEyPTEtYztlbHNlIGlmKHM9PT01KXtjb25zdCB1PU1hdGgucG93KDEwLG4vNDApO3RoaXMuYjA9MStjKnUsdGhpcy5iMT0tMipoLHRoaXMuYjI9MS1jKnUsdGhpcy5hMD0xK2MvdSx0aGlzLmExPS0yKmgsdGhpcy5hMj0xLWMvdX1lbHNlIGlmKHM9PT02KXtjb25zdCB1PU1hdGgucG93KDEwLG4vNDApLGQ9MipNYXRoLnNxcnQodSkqYyxsPSh1LTEpKmgscD0odSsxKSpoO3RoaXMuYjA9dSoodSsxLWwrZCksdGhpcy5iMT0yKnUqKHUtMS1wKSx0aGlzLmIyPXUqKHUrMS1sLWQpLHRoaXMuYTA9dSsxK2wrZCx0aGlzLmExPS0yKih1LTErcCksdGhpcy5hMj11KzErbC1kfWVsc2UgaWYocz09PTcpe2NvbnN0IHU9TWF0aC5wb3coMTAsbi80MCksZD0yKk1hdGguc3FydCh1KSpjLGw9KHUtMSkqaCxwPSh1KzEpKmg7dGhpcy5iMD11Kih1KzErbCtkKSx0aGlzLmIxPS0yKnUqKHUtMStwKSx0aGlzLmIyPXUqKHUrMStsLWQpLHRoaXMuYTA9dSsxLWwrZCx0aGlzLmExPTIqKHUtMS1wKSx0aGlzLmEyPXUrMS1sLWR9dGhpcy5iMC89dGhpcy5hMCx0aGlzLmIxLz10aGlzLmEwLHRoaXMuYjIvPXRoaXMuYTAsdGhpcy5hMS89dGhpcy5hMCx0aGlzLmEyLz10aGlzLmEwLHRoaXMuYTA9MTtjb25zdCBmPXRoaXMuYjAqdCt0aGlzLmIxKnRoaXMueDErdGhpcy5iMip0aGlzLngyLXRoaXMuYTEqdGhpcy55MS10aGlzLmEyKnRoaXMueTI7cmV0dXJuIHRoaXMueDI9dGhpcy54MSx0aGlzLngxPXQsdGhpcy55Mj10aGlzLnkxLHRoaXMueTE9ZixmfX1jb25zdCByZT1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsQURTUk5vZGU6YnMsQXVkaW9JbjpqcyxBdWRpb05vZGU6eSxCUEY6WXMsQmlxdWFkRmlsdGVyOmllLEJyb3duTm9pc2VPc2M6VnMsQ0M6WnMsQ0xPQ0tfUFBROl90LENMT0NLX1BQUzpncyxDbGlwOnNlLENsb2NrOnZzLENsb2NrRGl2OklzLENsb2NrT3V0OndzLERlbGF5OlNzLERpc3RvcnQ6X3MsRHVzdE9zYzpCcyxGaWx0ZXI6V3MsRm9sZDpHcyxIb2xkOk1zLEltcHVsc2VPc2M6T3MsTGFnOnpzLExjZ05vaXNlOlBzLE1pZGlDQzpYcyxNaWRpRnJlcTpVcyxNaWRpR2F0ZTpIcyxNaWRpSW46YnQsTWlkaVZlbDokcyxOb2lzZU9zYzpUcyxPdXRwdXQ6eHMsUGljazpRcyxQaW5rTm9pc2U6QXMsUHVsc2VPc2M6TnMsUmVtYXA6dGUsU2F3T3NjOkZzLFNjb3BlOkRzLFNlcXVlbmNlOkpzLFNpZGVjaGFpbkNvbXByZXNzb3I6a3MsU2lnbmFsOktzLFNpbmVPc2M6RXMsU2xldzpxcyxTbGlkZTpMcyxUcmlPc2M6UnMsVHJpZzplZSxaYXdPc2M6Q3N9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSksbmU9bmV3IE1hcChPYmplY3QuZW50cmllcyhyZSkpLFk9MTI4LEQ9TWF0aC5QSSx6PTIqRCxHPTEvc2FtcGxlUmF0ZSx4dD1yPT4xLU1hdGguZXhwKC1HL3IpLGp0PXI9Pk1hdGgucG93KDEwLHIvMjApLFM9KHIsdCxzKT0+TWF0aC5taW4oTWF0aC5tYXgocix0KSxzKSx1dD0ocix0LHMpPT5zKih0LXIpK3IsYj0ocix0KT0+clt0XT8/clswXSxRPXI9PnItTWF0aC5mbG9vcihyKSx0dD1yPT5yfDAsc3Q9cj0+dHQocisuNSksYWU9cj0+dHQocisxKSxIdD1yPT5yLXR0KHIpLGo9cj0+e2NvbnN0IHQ9cioqMjtyZXR1cm4gciooMjcrdCkvKDI3KzkqdCl9LFV0PShyLHQpPT57aWYocjwyKXJldHVybiBpPT4wO2NvbnN0IHM9dC8oci0xKSxlPXQqLjU7cmV0dXJuIGk9Pmkqcy1lfSxldD0ocix0KT0+cipNYXRoLnBvdygyLHQvMTIpO2Z1bmN0aW9uIG9lKHIsdCl7dD1NYXRoLm1pbih0LDEtdCk7Y29uc3Qgcz0xL3Q7cmV0dXJuIHI8dD8ocio9cywyKnItcioqMi0xKTpyPjEtdD8ocj0oci0xKSpzLHIqKjIrMipyKzEpOjB9Y29uc3QgeXQ9e3RyaShyLHQ9LjUpe2NvbnN0IHM9MS10O3JldHVybiByPj10PzEvcy1yL3M6ci90fSxzaW5lKHIpe3JldHVybiBNYXRoLnNpbih6KnIpKi41Ky41fSxyYW1wKHIpe3JldHVybiByfSxzYXcocil7cmV0dXJuIDEtcn0sc3F1YXJlKHIsdD0uNSl7cmV0dXJuIHI+PXQ/MDoxfSxjdXN0b20ocix0PVswLDFdKXtjb25zdCBzPXQubGVuZ3RoLTEsZT1NYXRoLmZsb29yKHIqcyksaT0xL3Msbj1TKHRbZV0sMCwxKSxvPVModFtlKzFdLDAsMSksYz1uLGg9MCxmPWk7cmV0dXJuKG8tYykvKGYtaCkqKHItaSplKStufSxzYXdibGVwKHIsdCl7cmV0dXJuIDIqci0xLW9lKHIsdCl9fSxoZT1PYmplY3Qua2V5cyh5dCk7Y2xhc3MgY2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToidGltZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJza2V3IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJkZXB0aCIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJwaGFzZW9mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJjdXJ2ZSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkY29mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtaW4iLGRlZmF1bHRWYWx1ZTotMWU5fSx7bmFtZToibWF4IixkZWZhdWx0VmFsdWU6MWU5fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGhhc2V9aW5jcmVtZW50UGhhc2UodCl7dGhpcy5waGFzZSs9dCx0aGlzLnBoYXNlPjEmJih0aGlzLnBoYXNlPXRoaXMucGhhc2UtMSl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1lLmJlZ2luWzBdLG49ZS5lbmRbMF07aWYoY3VycmVudFRpbWU+PW4pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PWkpcmV0dXJuITA7Y29uc3QgYT1zWzBdLG89ZS5mcmVxdWVuY3lbMF0sYz1lLnRpbWVbMF0saD1lLmRlcHRoWzBdLGY9ZS5za2V3WzBdLHU9ZS5waGFzZW9mZnNldFswXSxkPWUuY3VydmVbMF0sbD1lLmRjb2Zmc2V0WzBdLHA9ZS5taW5bMF0sbT1lLm1heFswXSxJPWhlW2Uuc2hhcGVbMF1dLHc9YVswXS5sZW5ndGg/PzA7dGhpcy5waGFzZT09bnVsbCYmKHRoaXMucGhhc2U9SHQoYypvK3UpKTtjb25zdCB2PW8qRztmb3IobGV0IE09MDtNPHc7TSsrKXtmb3IobGV0IFA9MDtQPGEubGVuZ3RoO1ArKyl7bGV0IGc9KHl0W0ldKHRoaXMucGhhc2UsZikrbCkqaDtnPU1hdGgucG93KGcsZCksYVtQXVtNXT1TKGcscCxtKX10aGlzLmluY3JlbWVudFBoYXNlKHYpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGZvLXByb2Nlc3NvciIsY2UpO2NsYXNzIHVlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNvYXJzZSIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxzLGUpe2NvbnN0IGk9dFswXSxuPXNbMF0sYT1pWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWEpcmV0dXJuITE7dGhpcy5zdGFydGVkPWE7bGV0IG89ZS5jb2Fyc2VbMF0/PzA7bz1NYXRoLm1heCgxLG8pO2ZvcihsZXQgYz0wO2M8WTtjKyspZm9yKGxldCBoPTA7aDxpLmxlbmd0aDtoKyspbltoXVtjXT1jJW89PT0wP2lbaF1bY106bltoXVtjLTFdO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY29hcnNlLXByb2Nlc3NvciIsdWUpO2NsYXNzIGxlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNydXNoIixkZWZhdWx0VmFsdWU6MH1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT10WzBdLG49c1swXSxhPWlbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhYSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9YTtsZXQgbz1lLmNydXNoWzBdPz84O289TWF0aC5tYXgoMSxvKTtmb3IobGV0IGM9MDtjPFk7YysrKWZvcihsZXQgaD0wO2g8aS5sZW5ndGg7aCsrKXtjb25zdCBmPU1hdGgucG93KDIsby0xKTtuW2hdW2NdPU1hdGgucm91bmQoaVtoXVtjXSpmKS9mfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY3J1c2gtcHJvY2Vzc29yIixsZSk7Y2xhc3MgZmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdLGE9aVswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFhKXJldHVybiExO3RoaXMuc3RhcnRlZD1hO2xldCBvPWUuc2hhcGVbMF07bz1vPDE/bzouOTk5OTk5OTk5NixvPTIqby8oMS1vKTtjb25zdCBjPU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxlLnBvc3RnYWluWzBdKSk7Zm9yKGxldCBoPTA7aDxZO2grKylmb3IobGV0IGY9MDtmPGkubGVuZ3RoO2YrKyluW2ZdW2hdPSgxK28pKmlbZl1baF0vKDErbypNYXRoLmFicyhpW2ZdW2hdKSkqYztyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInNoYXBlLXByb2Nlc3NvciIsZmUpO2NsYXNzICR0e2NvbnN0cnVjdG9yKCl7RHQodGhpcywiczAiLDApO0R0KHRoaXMsInMxIiwwKX11cGRhdGUodCxzLGU9MCl7ZT1TKGUsMCwxKSxzPVMocywwLHNhbXBsZVJhdGUvMi0xKTtjb25zdCBpPVMoMipNYXRoLnNpbihzKkQqRyksMCwxLjE0KSxhPTEtTWF0aC5wb3coLjUsOCplKzEpKmk7cmV0dXJuIHRoaXMuczA9YSp0aGlzLnMwLWkqdGhpcy5zMStpKnQsdGhpcy5zMT1hKnRoaXMuczEraSp0aGlzLnMwLHRoaXMuczF9fWNsYXNzIGRlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InZhbHVlIixkZWZhdWx0VmFsdWU6LjV9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5maWx0ZXJzPVtuZXcgJHQsbmV3ICR0XX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdLGE9aVswXSE9PXZvaWQgMDt0aGlzLnN0YXJ0ZWQ9YTtjb25zdCBvPVMoZS52YWx1ZVswXSwwLDEpO2xldCBjPSJub25lIixoLGY9MTtvPi41MT8oYz0iaGlwYXNzIixmPShvLS41KSoyKTpvPC40OSYmKGM9ImxvcGFzcyIsZj1vKjIpLGg9TWF0aC5wb3coZioxMSw0KTtmb3IobGV0IHU9MDt1PGkubGVuZ3RoO3UrKylmb3IobGV0IGQ9MDtkPFk7ZCsrKWM9PSJub25lIj9uW3VdW2RdPWlbdV1bZF06KHRoaXMuZmlsdGVyc1t1XS51cGRhdGUoaVt1XVtkXSxoLC4xKSxjPT09ImxvcGFzcyI/blt1XVtkXT10aGlzLmZpbHRlcnNbdV0uczE6Yz09PSJoaXBhc3MiP25bdV1bZF09aVt1XVtkXS10aGlzLmZpbHRlcnNbdV0uczE6blt1XVtkXT1pW3VdW2RdKTtyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRqZi1wcm9jZXNzb3IiLGRlKTtjbGFzcyBwZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo1MDB9LHtuYW1lOiJxIixkZWZhdWx0VmFsdWU6MX0se25hbWU6ImRyaXZlIixkZWZhdWx0VmFsdWU6LjY5fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLnAwPVswLDBdLHRoaXMucDE9WzAsMF0sdGhpcy5wMj1bMCwwXSx0aGlzLnAzPVswLDBdLHRoaXMucDMyPVswLDBdLHRoaXMucDMzPVswLDBdLHRoaXMucDM0PVswLDBdfXByb2Nlc3ModCxzLGUpe2NvbnN0IGk9dFswXSxuPXNbMF0sYT1pWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWEpcmV0dXJuITE7dGhpcy5zdGFydGVkPWE7Y29uc3Qgbz1lLnFbMF0sYz1TKE1hdGguZXhwKGUuZHJpdmVbMF0pLC4xLDJlMyk7bGV0IGg9ZS5mcmVxdWVuY3lbMF07aD1oKnoqRyxoPWg+MT8xOmg7Y29uc3QgZj1NYXRoLm1pbig4LG8qLjEzKTtsZXQgdT0xL2MqTWF0aC5taW4oMS43NSwxK2YpO2ZvcihsZXQgZD0wO2Q8WTtkKyspZm9yKGxldCBsPTA7bDxpLmxlbmd0aDtsKyspe2NvbnN0IHA9dGhpcy5wM1tsXSouMzYwODkxK3RoaXMucDMyW2xdKi40MTcyOSt0aGlzLnAzM1tsXSouMTc3ODk2K3RoaXMucDM0W2xdKi4wNDM5NzI1O3RoaXMucDM0W2xdPXRoaXMucDMzW2xdLHRoaXMucDMzW2xdPXRoaXMucDMyW2xdLHRoaXMucDMyW2xdPXRoaXMucDNbbF0sdGhpcy5wMFtsXSs9KGooaVtsXVtkXSpjLWYqcCktaih0aGlzLnAwW2xdKSkqaCx0aGlzLnAxW2xdKz0oaih0aGlzLnAwW2xdKS1qKHRoaXMucDFbbF0pKSpoLHRoaXMucDJbbF0rPShqKHRoaXMucDFbbF0pLWoodGhpcy5wMltsXSkpKmgsdGhpcy5wM1tsXSs9KGoodGhpcy5wMltsXSktaih0aGlzLnAzW2xdKSkqaCxuW2xdW2RdPXAqdX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImxhZGRlci1wcm9jZXNzb3IiLHBlKTtjbGFzcyBtZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJkaXN0b3J0IixkZWZhdWx0VmFsdWU6MH0se25hbWU6InBvc3RnYWluIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHtwcm9jZXNzb3JPcHRpb25zOnR9KXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLmFsZ29yaXRobT1ocyh0LmFsZ29yaXRobSl9cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT10WzBdLG49c1swXSxhPWlbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhYSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9YTtmb3IobGV0IG89MDtvPFk7bysrKXtjb25zdCBjPVMoYihlLnBvc3RnYWluLG8pLC4wMDEsMSksaD1NYXRoLmV4cG0xKGIoZS5kaXN0b3J0LG8pKTtmb3IobGV0IGY9MDtmPGkubGVuZ3RoO2YrKyl7Y29uc3QgdT1pW2ZdW29dO25bZl1bb109Yyp0aGlzLmFsZ29yaXRobSh1LGgpfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRpc3RvcnQtcHJvY2Vzc29yIixtZSk7Y2xhc3MgZ2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dD0+e2NvbnN0e3R5cGU6cyxwYXlsb2FkOmV9PXQuZGF0YXx8e307cz09PSJpbml0aWFsaXplIiYmdGhpcy5pbml0aWFsaXplKGUpfSx0aGlzLmluaXRpYWxpemUoKX1pbml0aWFsaXplKHQpe3RoaXMucGhhc2U9W119c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTotMSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjotMX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOi0xLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOi0xfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9XX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPWUuYmVnaW5bMF0sbj1lLmVuZFswXSxhPWk+PTAsbz1uPj0wLGM9byYmY3VycmVudFRpbWU+PW4rLjUsaD1vJiZjdXJyZW50VGltZT49bixmPWN1cnJlbnRUaW1lPD1pO2lmKGMpcmV0dXJuITE7aWYoaHx8Znx8IWEpcmV0dXJuITA7Y29uc3QgdT1zWzBdLGQ9ZS52b2ljZXNbMF07Zm9yKGxldCBsPTA7bDx1WzBdLmxlbmd0aDtsKyspe2NvbnN0IHA9YihlLmRldHVuZSxsKSxtPWIoZS5mcmVxc3ByZWFkLGwpLEk9YihlLnBhbnNwcmVhZCxsKSouNSsuNTtsZXQgdz1NYXRoLnNxcnQoMS1JKSx2PU1hdGguc3FydChJKSxNPWIoZS5mcmVxdWVuY3ksbCk7TT1ldChNLHAvMTAwKTtjb25zdCBQPVV0KGQsbSk7Zm9yKGxldCBnPTA7ZzxkO2crKyl7Y29uc3QgVD1ldChNLFAoZykpLEE9UShUKkcpO3RoaXMucGhhc2VbZ109dGhpcy5waGFzZVtnXT8/TWF0aC5yYW5kb20oKTtjb25zdCBWPXl0LnNhd2JsZXAodGhpcy5waGFzZVtnXSxBKTt1WzBdW2xdKz1WKncsdVsxXVtsXSs9Vip2O2xldCBPPXRoaXMucGhhc2VbZ10rQTtPPj0xJiYoTy09MSksdGhpcy5waGFzZVtnXT1PO2NvbnN0IE49dzt3PXYsdj1OfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInN1cGVyc2F3LW9zY2lsbGF0b3IiLGdlKTtjb25zdCBiZT0yMDQ4LFB0PW5ldyBNYXA7ZnVuY3Rpb24gdmUocil7aWYoIVB0LmhhcyhyKSl7Y29uc3QgdD1uZXcgRmxvYXQzMkFycmF5KHIpO2ZvcihsZXQgcz0wO3M8cjtzKyspdFtzXT0uNSooMS1NYXRoLmNvcyh6KnMvcikpO1B0LnNldChyLHQpfXJldHVybiBQdC5nZXQocil9Y2xhc3MgSWUgZXh0ZW5kcyBYe3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOmJlfSxzdXBlcih0KSx0aGlzLnRpbWVDdXJzb3I9MCx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy5pbnZmZnRTaXplPTEvdGhpcy5mZnRTaXplLHRoaXMuaGFubldpbmRvdz12ZSh0aGlzLmZmdFNpemUpLHRoaXMuZmZ0PW5ldyBRdCh0aGlzLmZmdFNpemUpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy50aW1lQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLm1hZ25pdHVkZXM9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmZmdFNpemUvMisxKSx0aGlzLnBlYWtJbmRleGVzPW5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpLHRoaXMubmJQZWFrcz0wfXByb2Nlc3NPTEEodCxzLGUpe2xldCBpPWUucGl0Y2hGYWN0b3JbZS5waXRjaEZhY3Rvci5sZW5ndGgtMV07aTwwJiYoaT1pKi4yNSksaT1NYXRoLm1heCgwLGkrMSk7Zm9yKGxldCBuPTA7bjx0aGlzLm5iSW5wdXRzO24rKylmb3IobGV0IGE9MDthPHRbbl0ubGVuZ3RoO2ErKyl7Y29uc3Qgbz10W25dW2FdLGM9c1tuXVthXTt0aGlzLmFwcGx5SGFubldpbmRvdyhvKSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsbyksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKGkpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLGMpLHRoaXMuYXBwbHlIYW5uV2luZG93KGMpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IobGV0IHM9MDtzPHRoaXMuYmxvY2tTaXplO3MrKyl0W3NdKj10aGlzLmhhbm5XaW5kb3dbc10qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2xldCB0PTAscz0wO2Zvcig7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7Y29uc3QgZT10aGlzLmZyZXFDb21wbGV4QnVmZmVyW3NdLGk9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltzKzFdO3RoaXMubWFnbml0dWRlc1t0XT1lKioyK2kqKjIsdCs9MSxzKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDtsZXQgdD0yO2NvbnN0IHM9dGhpcy5tYWduaXR1ZGVzLmxlbmd0aC0yO2Zvcig7dDxzOyl7Y29uc3QgZT10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PWV8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1lKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PWV8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1lKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2ZvcihsZXQgcz0wO3M8dGhpcy5uYlBlYWtzO3MrKyl7Y29uc3QgZT10aGlzLnBlYWtJbmRleGVzW3NdLGk9c3QoZSp0KTtpZihpPnRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7bGV0IG49MCxhPXRoaXMuZmZ0U2l6ZTtzPjAmJihuPWUtc3QoKGUtdGhpcy5wZWFrSW5kZXhlc1tzLTFdKS8yKSksczx0aGlzLm5iUGVha3MtMSYmKGE9ZSthZSgodGhpcy5wZWFrSW5kZXhlc1tzKzFdLWUpLzIpKTtjb25zdCBvPW4tZSxjPWEtZSxoPXoqdGhpcy5pbnZmZnRTaXplKihpLWUpLGY9TWF0aC5jb3MoaCp0aGlzLnRpbWVDdXJzb3IpLHU9TWF0aC5zaW4oaCp0aGlzLnRpbWVDdXJzb3IpO2ZvcihsZXQgZD1vO2Q8YztkKyspe2NvbnN0IGw9ZStkLHA9aStkO2lmKHA+PXRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7Y29uc3QgbT0yKmwsST1tKzEsdz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW21dLHY9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltJXSxNPXcqZi12KnUsUD13KnUrdipmLGc9MipwLFQ9ZysxO3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2ddKz1NLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW1RdKz1QfX19fXJlZ2lzdGVyUHJvY2Vzc29yKCJwaGFzZS12b2NvZGVyLXByb2Nlc3NvciIsSWUpO2NsYXNzIHdlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoaT0tRCx0aGlzLlkwPTAsdGhpcy5ZMT0wLHRoaXMuUFc9RCx0aGlzLkI9Mi4zLHRoaXMuZHBoaWY9MCx0aGlzLmVudmY9MH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6InB1bHNld2lkdGgiLGRlZmF1bHRWYWx1ZToxLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9XX1wcm9jZXNzKHQscyxlKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9ZS5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49ZS5lbmRbMF0pcmV0dXJuITE7Y29uc3QgaT1zWzBdO2xldCBuPTEsYTtmb3IobGV0IG89MDtvPChpWzBdLmxlbmd0aD8/MCk7bysrKXtjb25zdCBjPSgxLVMoYihlLnB1bHNld2lkdGgsbyksLS45OSwuOTkpKSpELGg9YihlLmRldHVuZSxvKSxmPWV0KGIoZS5mcmVxdWVuY3ksbyksaC8xMDApO2E9Zip6KkcsdGhpcy5kcGhpZis9LjEqKGEtdGhpcy5kcGhpZiksbio9Ljk5OTgsdGhpcy5lbnZmKz0uMSoobi10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpmKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49RCYmKHRoaXMucGhpLT16KTtsZXQgdT1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMCk7dGhpcy5ZMD0uNSoodSt0aGlzLlkwKTtsZXQgZD1NYXRoLmNvcyh0aGlzLnBoaSt0aGlzLkIqdGhpcy5ZMStjKTt0aGlzLlkxPS41KihkK3RoaXMuWTEpO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF1bb109LjE1Kih1LWQpKnRoaXMuZW52Zn1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInB1bHNlLW9zY2lsbGF0b3IiLHdlKTtjb25zdCBUdD17Yml0QzpmdW5jdGlvbihyLHQscyl7cmV0dXJuIHImdD9zOjB9LGJyOmZ1bmN0aW9uKHIsdD04KXtpZih0PjMyKXRocm93IG5ldyBFcnJvcigiYnIoKSBTaXplIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gMzIiKTtsZXQgcz0wO2ZvcihsZXQgZT0wO2U8dDtlKyspc3w9VHQuYml0QyhyLDE8PGUsMTw8dC0oZSsxKSk7cmV0dXJuIHN9LHNpbmY6ZnVuY3Rpb24ocil7cmV0dXJuIE1hdGguc2luKHIqRC8xMjgpfSxjb3NmOmZ1bmN0aW9uKHIpe3JldHVybiBNYXRoLmNvcyhyKkQvMTI4KX0sdGFuZjpmdW5jdGlvbihyKXtyZXR1cm4gTWF0aC50YW4ocipELzEyOCl9LHJlZ0c6ZnVuY3Rpb24ocix0KXtyZXR1cm4gdC50ZXN0KHIudG9TdHJpbmcoMikpfX07bGV0IGx0LEJ0O2Z1bmN0aW9uIFNlKHIpe2lmKGx0PT1udWxsKXtsdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhNYXRoKSxCdD1sdC5tYXAoZT0+TWF0aFtlXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhUdCkscz10Lm1hcChlPT5UdFtlXSk7bHQucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSxCdC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5zKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLmx0LCJ0IixgcmV0dXJuIDAsCiR7cnx8MH07YCkuYmluZChnbG9iYWxUaGlzLC4uLkJ0KX1jbGFzcyBfZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5wb3J0Lm9ubWVzc2FnZT10PT57bGV0e2NvZGVUZXh0OnN9PXQuZGF0YTtjb25zdHtieXRlQmVhdFN0YXJ0VGltZTplfT10LmRhdGE7ZSE9bnVsbCYmKHRoaXMudD0wLHRoaXMuaW5pdGlhbE9mZnNldD1NYXRoLmZsb29yKGUpKSxzPXMudHJpbSgpLnJlcGxhY2UoL15ldmFsXCh1bmVzY2FwZVwoZXNjYXBlKD86YHxcKCd8XCgifFwoYCkoLio/KSg/OmB8J1wpfCJcKXxgXCkpLnJlcGxhY2VcKFwvdVwoXC5cLlwpXC9nLFsiJ2BdXCQxJVsiJ2BdXClcKVwpJC8sKGksbik9PnVuZXNjYXBlKGVzY2FwZShuKS5yZXBsYWNlKC91KC4uKS9nLCIkMSUiKSkpLHRoaXMuZnVuYz1TZShzKX0sdGhpcy5pbml0aWFsT2Zmc2V0PTAsdGhpcy50PW51bGwsdGhpcy5mdW5jPW51bGx9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9XX1wcm9jZXNzKHQscyxlKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9ZS5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49ZS5lbmRbMF0pcmV0dXJuITE7dGhpcy50PT1udWxsJiYodGhpcy50PWUuYmVnaW5bMF0qc2FtcGxlUmF0ZSk7Y29uc3QgaT1zWzBdLG49MjU2Kkc7Zm9yKGxldCBhPTA7YTxpWzBdLmxlbmd0aDthKyspe2NvbnN0IG89YihlLmRldHVuZSxhKSxjPWV0KGIoZS5mcmVxdWVuY3ksYSksby8xMDApLGg9bipjKnRoaXMudCt0aGlzLmluaXRpYWxPZmZzZXQsdT0odGhpcy5mdW5jKGgpJjI1NSkvMTI3LjUtMSxkPVModSouMiwtLjQsLjQpO2ZvcihsZXQgbD0wO2w8aS5sZW5ndGg7bCsrKWlbbF1bYV09ZDt0aGlzLnQrK31yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImJ5dGUtYmVhdC1wcm9jZXNzb3IiLF9lKTtjbGFzcyBNZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiYXR0YWNrIixkZWZhdWx0VmFsdWU6LjAwNSxtaW5WYWx1ZTowfSx7bmFtZToiZGVjYXkiLGRlZmF1bHRWYWx1ZTouMTQsbWluVmFsdWU6MH0se25hbWU6InN1c3RhaW4iLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOjAsbWF4VmFsdWU6MX0se25hbWU6InJlbGVhc2UiLGRlZmF1bHRWYWx1ZTouMSxtaW5WYWx1ZTowfSx7bmFtZToiYXR0YWNrQ3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJkZWNheUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToicmVsZWFzZUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToiZGVwdGgiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToibWluIixkZWZhdWx0VmFsdWU6LTFlOX0se25hbWU6Im1heCIsZGVmYXVsdFZhbHVlOjFlOX0se25hbWU6InJldHJpZ2dlciIsZGVmYXVsdFZhbHVlOjEsbWluVmFsdWU6MCxtYXhWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudmFsPTAsdGhpcy5zZWdJZHg9MCx0aGlzLnN0YXRlPTAsdGhpcy5iZWdpblRpbWU9MCx0aGlzLmVuZFRpbWU9MCx0aGlzLmF0dGFja1N0YXJ0PTB9X3dhcnAodCxzLGU9OCl7aWYodD09PTB8fHQ9PT0xKXJldHVybiB0O2lmKHM+MCl7Y29uc3QgaT0xK2UqcztyZXR1cm4gMS1NYXRoLnBvdygxLXQsaSl9ZWxzZXtjb25zdCBpPTEtZSpzO3JldHVybiBNYXRoLnBvdyh0LGkpfX1fYWR2YW5jZSh0LHMsZSxpKXtpZihlPT09MHx8dD09PXMpdGhpcy52YWw9cztlbHNle2NvbnN0IG49TWF0aC5taW4oMSwoY3VycmVudFRpbWUtdGhpcy5iZWdpblRpbWUpL2UpLGE9dGhpcy5fd2FycChuLGkpO3RoaXMudmFsPXQrKHMtdCkqYX19cHJvY2Vzcyh0LHMsZSl7Y29uc3QgaT1lLmJlZ2luWzBdLG49ZS5lbmRbMF07aWYoY3VycmVudFRpbWU+PW4pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PWkpcmV0dXJuITA7Y29uc3QgYT1zWzBdWzBdLG89YihlLnJldHJpZ2dlciwwKT49LjU7aSE9PXRoaXMuYmVnaW5UaW1lJiYodGhpcy5zdGF0ZT09PTB8fG8pJiYodGhpcy5iZWdpblRpbWU9aSx0aGlzLnN0YXRlPTEsdGhpcy5lbmRUaW1lPWIoZS5lbmQsMCksdGhpcy5hdHRhY2tTdGFydD10aGlzLnZhbCk7Y29uc3QgYz10aGlzLmVuZFRpbWUtdGhpcy5iZWdpblRpbWU7Zm9yKGxldCBoPTA7aDxhLmxlbmd0aDtoKyspe2NvbnN0IGY9YihlLmF0dGFjayxoKSx1PWIoZS5kZWNheSxoKSxkPWIoZS5zdXN0YWluLGgpLGw9YihlLnJlbGVhc2UsaCkscD1iKGUuYXR0YWNrQ3VydmUsaCksbT1iKGUuZGVjYXlDdXJ2ZSxoKSxJPWIoZS5yZWxlYXNlQ3VydmUsaCksdz1iKGUuZGVwdGgsaCksdj1iKGUubWluLGgpLE09YihlLm1heCxoKSxQPVt7dGltZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksc3RhcnQ6MCx0YXJnZXQ6MH0se3RpbWU6ZixzdGFydDp0aGlzLmF0dGFja1N0YXJ0LHRhcmdldDoxLGN1cnZlOnB9LHt0aW1lOmYrdSxzdGFydDoxLHRhcmdldDpkLGN1cnZlOm19LHt0aW1lOmMsc3RhcnQ6ZCx0YXJnZXQ6ZH0se3RpbWU6YytsLHN0YXJ0OmQsdGFyZ2V0OjAsY3VydmU6SX1dO2xldHt0aW1lOmcsc3RhcnQ6VCx0YXJnZXQ6QSxjdXJ2ZTpWfT1QW3RoaXMuc3RhdGVdO2Zvcih0aGlzLl9hZHZhbmNlKFQsQSxnLFYpO2N1cnJlbnRUaW1lLXRoaXMuYmVnaW5UaW1lPj1nOyl0aGlzLnN0YXRlPSh0aGlzLnN0YXRlKzEpJVAubGVuZ3RoLGc9UFt0aGlzLnN0YXRlXS50aW1lO2FbaF09Uyh0aGlzLnZhbCp3LHYsTSl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJlbnZlbG9wZS1wcm9jZXNzb3IiLE1lKTtjb25zdCB4PU9iamVjdC5mcmVlemUoe05PTkU6MCxBU1lNOjEsTUlSUk9SOjIsQkVORFA6MyxCRU5ETTo0LEJFTkRNUDo1LFNZTkM6NixRVUFOVDo3LEZPTEQ6OCxQV006OSxPUkJJVDoxMCxTUElOOjExLENIQU9TOjEyLFBSSU1FUzoxMyxCSU5BUlk6MTQsQlJPV05JQU46MTUsUkVDSVBST0NBTDoxNixXT1JNSE9MRToxNyxMT0dJU1RJQzoxOCxTSUdNT0lEOjE5LEZSQUNUQUw6MjAsRkxJUDoyMX0pO2Z1bmN0aW9uIHhlKHIpe3JldHVybiByPXIrMjEyNzkxMjIxNCsocjw8MTIpLHI9cl4zMzQ1MDcyNzAwXnI+Pj4xOSxyPXIrMzc0NzYxMzkzKyhyPDw1KSxyPXIrMzU1MDYzNTExNl5yPDw5LHI9cis0MjUxOTkzNzk3KyhyPDwzKSxyPXJeMzA0MjU5NDU2OV5yPj4+MTYscj4+PjB9Y29uc3QgS3Q9cj0+KHhlKHIpPj4+OCkvMTY3NzcyMTY7ZnVuY3Rpb24geWUocix0KXtsZXQgcz0wO2ZvcihsZXQgZT0wO2U8dDtlKyspcz1zPDwxfHImMSxyPj4+PTE7cmV0dXJuIHN9ZnVuY3Rpb24gUGUocil7Y29uc3QgdD1NYXRoLmZsb29yKHIpLHM9ci10LGU9S3QodCksaT1LdCh0KzEpO3JldHVybiBlKyhpLWUpKnN9ZnVuY3Rpb24gVGUocix0PTQpe2xldCBzPS41LGU9MCxpPTAsbj0xO2ZvcihsZXQgYT0wO2E8dDthKyspZSs9cypQZShyKm4pLGkrPXMscyo9LjUsbio9MjtyZXR1cm4gZS9pKjItMX1jb25zdCBWdD17fTtjbGFzcyBCZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOi0xLG1pbjotMSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6LTEsbWluOi0xLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXFzcHJlYWQiLGRlZmF1bHRWYWx1ZTouMTgsbWluOjB9LHtuYW1lOiJwb3NpdGlvbiIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6MX0se25hbWU6IndhcnBNb2RlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjEsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9LHtuYW1lOiJwYW5zcHJlYWQiLGRlZmF1bHRWYWx1ZTouNyxtaW46MCxtYXg6MX0se25hbWU6InBoYXNlcmFuZCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9XX1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLnBvcnQub25tZXNzYWdlPXM9Pntjb25zdHt0eXBlOmUscGF5bG9hZDppfT1zLmRhdGF8fHt9O2U9PT0iaW5pdGlhbGl6ZSImJnRoaXMuaW5pdGlhbGl6ZShpKX0sdGhpcy5pbml0aWFsaXplKCl9aW5pdGlhbGl6ZSh0KXtpZih0aGlzLnRhYmxlPW51bGwsdGhpcy5mcmFtZUxlbj1udWxsLHRoaXMubnVtRnJhbWVzPW51bGwsdGhpcy5waGFzZT1bXSx0IT1udWxsJiZ0LmtleSl7Y29uc3Qgcz10LmtleTt0aGlzLmZyYW1lTGVuPXQuZnJhbWVMZW4sVnRbc118fChWdFtzXT10LmZyYW1lcyksdGhpcy50YWJsZT1WdFtzXSx0aGlzLm51bUZyYW1lcz10aGlzLnRhYmxlLmxlbmd0aH19X21pcnJvcih0KXtyZXR1cm4gMS1NYXRoLmFicygyKnQtMSl9X3RvQml0cyh0LHM9MixlPTEyKXtjb25zdCBpPWUrKHMtZSkqdDtyZXR1cm57YjppLG46c3QoTWF0aC5wb3coMixpKSl9fV93YXJwUGhhc2UodCxzLGUpe3N3aXRjaChlKXtjYXNlIHguTk9ORTpyZXR1cm4gdDtjYXNlIHguQVNZTTp7Y29uc3QgaT0uMDErLjk5KnM7cmV0dXJuIHQ8aT8uNSp0L2k6LjUrLjUqKHQtaSkvKDEtaSl9Y2FzZSB4Lk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LHMseC5BU1lNKSk7Y2FzZSB4LkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMypzKTtjYXNlIHguQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKnMpKTtjYXNlIHguQkVORE1QOnJldHVybiBzPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMipzLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqcy0xLDIpO2Nhc2UgeC5TWU5DOntjb25zdCBpPU1hdGgucG93KDE2LHMqKjIpO3JldHVybiB0KmklMX1jYXNlIHguUVVBTlQ6e2NvbnN0e246aX09dGhpcy5fdG9CaXRzKHMpO3JldHVybiB0dCh0KmkpL2l9Y2FzZSB4LkZPTEQ6e2NvbnN0IG49MStNYXRoLm1heCgxLHN0KDcqcykpO3JldHVybiBNYXRoLmFicyhIdChuKnQpLS41KSoyfWNhc2UgeC5QV006e2NvbnN0IGk9UyguNSsuNDkqKDIqcy0xKSwwLDEpO3JldHVybiB0PGk/dC9pKi41Oi41Kyh0LWkpLygxLWkpKi41fWNhc2UgeC5PUkJJVDp7Y29uc3QgaT0uNSpzO3JldHVybiBRKHQraSpNYXRoLnNpbih6KjMqdCkpfWNhc2UgeC5TUElOOntjb25zdCBpPS41KnMse259PXRoaXMuX3RvQml0cyhzLDEsNik7cmV0dXJuIFEodCtpKk1hdGguc2luKHoqbip0KSl9Y2FzZSB4LkNIQU9TOntjb25zdCBuPSgzLjcrLjMqcykqdCooMS10KTtyZXR1cm4gUygoMS1zKSp0K3MqbiwwLDEpfWNhc2UgeC5QUklNRVM6e2NvbnN0IGk9YT0+e2lmKGE8MilyZXR1cm4hMTtpZihhJTI9PT0wKXJldHVybiBhPT09Mjtmb3IobGV0IG89MztvKioyPD1hO28rPTIpaWYoYSVvPT09MClyZXR1cm4hMTtyZXR1cm4hMH07bGV0e259PXRoaXMuX3RvQml0cyhzLDMpO2Zvcig7IWkobik7KW4rKztyZXR1cm4gdHQodCpuKS9ufWNhc2UgeC5CSU5BUlk6e2xldHtiOml9PXRoaXMuX3RvQml0cyhzLDMpO2k9c3QoaSk7Y29uc3Qgbj0xPDxpLGE9dHQodCpuKTtyZXR1cm4geWUoYSxpKS9ufWNhc2UgeC5CUk9XTklBTjp7Y29uc3QgaT0uMjUqcypUZSg2NCp0LDQpO3JldHVybiBRKHQraSl9Y2FzZSB4LlJFQ0lQUk9DQUw6e2NvbnN0IGk9Mis0KnMsbj10KmksYT10KygxLXQpKmksbz1hPjFlLTEyP24vYTowO3JldHVybiBTKG8sMCwxKX1jYXNlIHguV09STUhPTEU6e2NvbnN0IGk9UyguOCpzLDAsMSksbj0uNSooMS1pKSxhPS41KigxK2kpO3JldHVybiB0PG4/dC9uKi41OnQ+YT8uNSooMSsodC1hKS8oMS1hKSk6LjV9Y2FzZSB4LkxPR0lTVElDOntsZXQgaT10O2NvbnN0IG49My42Ky40KnMsYT0xK3N0KDIqcyk7Zm9yKGxldCBvPTA7bzxhO28rKylpPW4qaSooMS1pKTtyZXR1cm4gUyhpLDAsMSl9Y2FzZSB4LlNJR01PSUQ6e2NvbnN0IGk9MSsxMCpzLG49dC0uNSxhPTEvKDErTWF0aC5leHAoLWkqbikpLG89MS8oMStNYXRoLmV4cCguNSppKSksYz0xLygxK01hdGguZXhwKC0uNSppKSk7cmV0dXJuKGEtbykvKGMtbyl9Y2FzZSB4LkZSQUNUQUw6e2NvbnN0IGk9LjUqTWF0aC5zaW4oeip0KSpzO3JldHVybiBRKHQraSl9Y2FzZSB4LkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQscyl7Y29uc3QgZT10Lmxlbmd0aCxpPXMqZTtsZXQgbj1pfDA7bj49ZSYmKG49MCk7Y29uc3QgYT1pLW4sbz10W25dO2xldCBjPW4rMTtjPj1lJiYoYz0wKTtjb25zdCBoPXRbY107cmV0dXJuIG8rKGgtbykqYX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPWUuYmVnaW5bMF0sbj1lLmVuZFswXSxhPWk+PTAsbz1uPj0wLGM9byYmY3VycmVudFRpbWU+PW4rLjUsaD1vJiZjdXJyZW50VGltZT49bixmPWN1cnJlbnRUaW1lPD1pO2lmKGMpcmV0dXJuITE7aWYoaHx8Znx8IWEpcmV0dXJuITA7Y29uc3QgdT1zWzBdWzBdLGQ9c1swXVsxXXx8c1swXVswXTtpZighdGhpcy50YWJsZSlyZXR1cm4gdS5maWxsKDApLGQhPT11JiZkLnNldCh1KSwhMDtjb25zdCBsPWUudm9pY2VzWzBdO2ZvcihsZXQgcD0wO3A8dS5sZW5ndGg7cCsrKXtjb25zdCBtPWIoZS5kZXR1bmUscCksST1iKGUuZnJlcXNwcmVhZCxwKSx2PVMoYihlLnBvc2l0aW9uLHApLDAsMSkqKHRoaXMubnVtRnJhbWVzLTEpLE09dnwwLFA9di1NLGc9UyhiKGUud2FycCxwKSwwLDEpLFQ9YihlLndhcnBNb2RlLHApLEE9UyhiKGUucGhhc2VyYW5kLHApLDAsMSksVj1sPjE/UyhiKGUucGFuc3ByZWFkLHApLDAsMSk6MCxPPU1hdGguc3FydCguNS0uNSpWKSxOPU1hdGguc3FydCguNSsuNSpWKTtsZXQgQz1iKGUuZnJlcXVlbmN5LHApO0M9ZXQoQyxtLzEwMCk7Y29uc3QgRj0xL01hdGguc3FydChsKSxxPVV0KGwsSSk7Zm9yKGxldCBCPTA7QjxsO0IrKyl7Y29uc3QgTD0oQiYxKT09MTtsZXQgRT1PLEg9TjtMJiYoRT1OLEg9Tyk7Y29uc3QgJD1ldChDLHEoQikpKkc7dGhpcy5waGFzZVtCXT10aGlzLnBoYXNlW0JdPz9NYXRoLnJhbmRvbSgpKkE7Y29uc3QgVT10aGlzLl93YXJwUGhhc2UodGhpcy5waGFzZVtCXSxnLFQpLEs9dGhpcy5fc2FtcGxlRnJhbWUodGhpcy50YWJsZVtNXSxVKSxaPXRoaXMuX3NhbXBsZUZyYW1lKHRoaXMudGFibGVbTWF0aC5taW4odGhpcy5udW1GcmFtZXMtMSxNKzEpXSxVKTtsZXQgaz11dChLLFosUCk7VD09PXguRkxJUCYmdGhpcy5waGFzZVtCXTxnJiYoaz0tayksdVtwXSs9aypFKkYsZFtwXSs9aypIKkYsdGhpcy5waGFzZVtCXT1RKHRoaXMucGhhc2VbQl0rJCl9fXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3Nvcigid2F2ZXRhYmxlLW9zY2lsbGF0b3ItcHJvY2Vzc29yIixCZSk7Y2xhc3MgVmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVybltdfWNvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5nYWluQ29lZmY9eHQoLjIpLHRoaXMuYXZnR2Fpbj0xO2xldHthdHRhY2tUaW1lOnM9LjAwMyxzdXN0YWluVGltZTplPS4wOCxhdHRhY2s6aT0wLHN1c3RhaW46bj0wLHNlbnNpdGl2aXR5OmE9LjEsbWl4Om89MSxiZWdpbjpjPTAsZW5kOmg9MH09dC5wcm9jZXNzb3JPcHRpb25zO3M9UyhzLDVlLTQsLjA1KSxlPVMoZSwuMDEsLjUpLHRoaXMuYXR0YWNrQ29lZmY9eHQocyksdGhpcy5zdXN0YWluQ29lZmY9eHQoZSksdGhpcy5hdHRhY2tBbXQ9UyhpLC0xLDEpLHRoaXMuc3VzdGFpbkFtdD1TKG4sLTEsMSksdGhpcy5zY2FsaW5nPS41KzUqUyhhLDAsMSksdGhpcy5taXg9UyhvLDAsMSksdGhpcy5iZWdpbj1jLHRoaXMuZW5kPWgsdGhpcy5hdHRhY2tFbnY9bmV3IEZsb2F0MzJBcnJheSgyKSx0aGlzLnN1c3RhaW5FbnY9bmV3IEZsb2F0MzJBcnJheSgyKX1wcm9jZXNzKHQscyxlKXtjb25zdCBpPXRbMF0sbj1zWzBdO2lmKGN1cnJlbnRUaW1lPj10aGlzLmVuZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9dGhpcy5iZWdpbilyZXR1cm4hMDtjb25zdCBhPWkubGVuZ3RoO2E+dGhpcy5hdHRhY2tFbnYubGVuZ3RoJiYodGhpcy5hdHRhY2tFbnY9bmV3IEZsb2F0MzJBcnJheShhKSx0aGlzLnN1c3RhaW5FbnY9bmV3IEZsb2F0MzJBcnJheShhKSk7bGV0IG89dGhpcy5hdmdHYWluO2ZvcihsZXQgYz0wO2M8YTtjKyspe2xldCBoPXRoaXMuYXR0YWNrRW52W2NdLGY9dGhpcy5zdXN0YWluRW52W2NdO2ZvcihsZXQgdT0wO3U8WTt1Kyspe2NvbnN0IGQ9aVtjXVt1XSxsPU1hdGguYWJzKGQpO2g9dXQoaCxsLHRoaXMuYXR0YWNrQ29lZmYpLGY9dXQoZixsLHRoaXMuc3VzdGFpbkNvZWZmKTtjb25zdCBwPVModGhpcy5zY2FsaW5nKihoLWYpLyhmKzFlLTYpLC0xLjUsMS41KSxtPXA+MD9wOjAsST1wPDA/LXA6MCx3PWp0KHRoaXMuYXR0YWNrQW10Km0qMTgpLHY9anQodGhpcy5zdXN0YWluQW10KkkqMzYpLE09Uyh3KnYsMCw4KTtvPXV0KG8sTSx0aGlzLmdhaW5Db2VmZik7Y29uc3QgUD1vPi4wMDE/MS9vOjEsZz1kKk0qUDtsZXQgVD11dChkLGcsdGhpcy5taXgpO1QvPTErTWF0aC5hYnMoVCksbltjXVt1XT1UfXRoaXMuYXR0YWNrRW52W2NdPWgsdGhpcy5zdXN0YWluRW52W2NdPWZ9cmV0dXJuIHRoaXMuYXZnR2Fpbj1vLCEwfX1yZWdpc3RlclByb2Nlc3NvcigidHJhbnNpZW50LXByb2Nlc3NvciIsVmUpO2NsYXNzIEFlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBsYXlQb3M9MDtjb25zdCB0PTE2O3RoaXMub3V0cHV0cz1uZXcgQXJyYXkodCkuZmlsbCgwKSx0aGlzLnNvdXJjZXM9bmV3IEFycmF5KHQpLmZpbGwoMCksdGhpcy5nYXRlRW5kZWQ9ITEsdGhpcy5zdGFydGVkPSExLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3ZhciBoLGY7bGV0e3NyYzplLHNjaGVtYTp7dWdlbnM6aSxyZWdpc3RlcnM6bn0sc3RhcnQ6YSxnYXRlRW5kOm8sZW5kOmN9PXMuZGF0YTt0aGlzLnN0YXJ0PWEsdGhpcy5nYXRlRW5kPW8sdGhpcy5lbmQ9Yyx0aGlzLnJlZ2lzdGVycz1uZXcgQXJyYXkobikuZmlsbCgwKSx0aGlzLnNyYz1gby5maWxsKDApOyAvLyByZXNldCBvdXRwdXRzCiR7ZX1gLHRoaXMubm9kZXM9W107Zm9yKGxldCB1PTA7dTxpLmxlbmd0aDt1Kyspe2NvbnN0IGQ9aVt1XSxsPW5lLmdldChkLnR5cGUpLHA9bmV3IGwodSxkLHNhbXBsZVJhdGUpO3AudHlwZT09PSJjYyImJigoZj0oaD1kLmlucHV0cyk9PW51bGw/dm9pZCAwOmhbMF0pIT1udWxsJiZmLmluY2x1ZGVzKCJzdHJ1ZGVsLWdhdGUiKSkmJihwLnNldFZhbHVlKDEpLHRoaXMuZ2F0ZU5vZGU9cCksdGhpcy5ub2Rlc1t1XT1wfXRoaXMuZ2VuU2FtcGxlPW5ldyBGdW5jdGlvbigidGltZSIsIm5vZGVzIiwiaW5wdXQiLCJyIiwibyIsInMiLHRoaXMuc3JjKX19cHJvY2Vzcyh0LHMpe3ZhciBvLGM7Y29uc3QgZT0obz10WzBdKT09bnVsbD92b2lkIDA6b1swXTtpZihjdXJyZW50VGltZT49dGhpcy5lbmQpcmV0dXJuITE7aWYodGhpcy5nZW5TYW1wbGU9PT12b2lkIDB8fGN1cnJlbnRUaW1lPHRoaXMuc3RhcnQpcmV0dXJuITA7dGhpcy5zdGFydGVkPSEwLCF0aGlzLmdhdGVFbmRlZCYmY3VycmVudFRpbWU+dGhpcy5nYXRlRW5kJiYoKGM9dGhpcy5nYXRlTm9kZSk9PW51bGx8fGMuc2V0VmFsdWUoMCksdGhpcy5nYXRlRW5kZWQ9ITApO2NvbnN0IGk9c1swXSxuPWlbMF0sYT1pWzFdO2ZvcihsZXQgaD0wO2g8WTtoKyspe3RoaXMuZ2VuU2FtcGxlKHRoaXMucGxheVBvcyx0aGlzLm5vZGVzLGU/ZVtoXTowLHRoaXMucmVnaXN0ZXJzLHRoaXMub3V0cHV0cyx0aGlzLnNvdXJjZXMpO2NvbnN0IGY9dGhpcy5vdXRwdXRzWzBdLHU9dGhpcy5vdXRwdXRzWzFdO2E/KG5baF09ZixhW2hdPXUpOm5baF09LjUqKGYrdSksdGhpcy5wbGF5UG9zKz0xL3NhbXBsZVJhdGV9cmV0dXJuITB9fXJldHVybiByZWdpc3RlclByb2Nlc3NvcigiZ2VuZXJpYy1wcm9jZXNzb3IiLEFlKSxSLldhcnBNb2RlPXgsT2JqZWN0LmRlZmluZVByb3BlcnR5KFIsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLFJ9KHt9KTsK";let Ci=[],rs=0;const pr=4;let CD=i=>{let p=[],x={get(){return x.lc||x.listen(()=>{})(),x.value},lc:0,listen(M){return x.lc=p.push(M),()=>{for(let w=rs+pr;w<Ci.length;)Ci[w]===M?Ci.splice(w,pr):w+=pr;let R=p.indexOf(M);~R&&(p.splice(R,1),--x.lc||x.off())}},notify(M,R){let w=!Ci.length;for(let v of p)Ci.push(v,x.value,M,R);if(w){for(rs=0;rs<Ci.length;rs+=pr)Ci[rs](Ci[rs+1],Ci[rs+2],Ci[rs+3]);Ci.length=0}},off(){},set(M){let R=x.value;R!==M&&(x.value=M,x.notify(R))},subscribe(M){let R=x.listen(M);return M(x.value),R},value:i};return x},SD=(i={})=>{let p=CD(i);return p.setKey=function(x,M){let R=p.value;typeof M>"u"&&x in p.value?(p.value={...p.value},delete p.value[x],p.notify(R,x)):p.value[x]!==M&&(p.value={...p.value,[x]:M},p.notify(R,x))},p};const MD={stretch:{node:"stretch",param:"pitchFactor"},gain:{node:"gain",param:"gain"},postgain:{node:"post",param:"gain"},pan:{node:"pan",param:"pan"},tremolo:{node:"tremolo",param:"frequency"},tremolosync:{node:"tremolo",param:"frequency"},tremolodepth:{node:"tremolo_gain",param:"gain"},tremoloskew:{node:"tremolo",param:"skew"},tremolophase:{node:"tremolo",param:"phase"},tremoloshape:{node:"tremolo",param:"shape"},lfo:{node:"lfo",param:"frequency"},lfo_rate:{node:"lfo",param:"frequency"},lfo_sync:{node:"lfo",param:"frequency"},lfo_depth:{node:"lfo",param:"depth"},lfo_depthabs:{node:"lfo",param:"depth"},lfo_skew:{node:"lfo",param:"skew"},lfo_curve:{node:"lfo",param:"curve"},lfo_dcoffset:{node:"lfo",param:"dcoffset"},env:{node:"env",param:"depth"},env_attack:{node:"env",param:"attack"},env_decay:{node:"env",param:"decay"},env_sustain:{node:"env",param:"sustain"},env_release:{node:"env",param:"release"},bmod:{node:"bmod",param:"depth"},bmod_depth:{node:"bmod",param:"depth"},bmod_depthabs:{node:"bmod",param:"depth"},cutoff:{node:"lpf",param:"frequency"},resonance:{node:"lpf",param:"Q"},lprate:{node:"lpf_lfo",param:"rate"},lpsync:{node:"lpf_lfo",param:"sync"},lpdepth:{node:"lpf_lfo",param:"depth"},lpdepthfrequency:{node:"lpf_lfo",param:"depth"},lpshape:{node:"lpf_lfo",param:"shape"},lpdc:{node:"lpf_lfo",param:"dcoffset"},lpskew:{node:"lpf_lfo",param:"skew"},hcutoff:{node:"hpf",param:"frequency"},hresonance:{node:"hpf",param:"Q"},hprate:{node:"hpf_lfo",param:"rate"},hpsync:{node:"hpf_lfo",param:"sync"},hpdepth:{node:"hpf_lfo",param:"depth"},hpdepthfrequency:{node:"hpf_lfo",param:"depth"},hpshape:{node:"hpf_lfo",param:"shape"},hpdc:{node:"hpf_lfo",param:"dcoffset"},hpskew:{node:"hpf_lfo",param:"skew"},bandf:{node:"bpf",param:"frequency"},bandq:{node:"bpf",param:"Q"},bprate:{node:"bpf_lfo",param:"rate"},bpsync:{node:"bpf_lfo",param:"sync"},bpdepth:{node:"bpf_lfo",param:"depth"},bpdepthfrequency:{node:"bpf_lfo",param:"depth"},bpshape:{node:"bpf_lfo",param:"shape"},bpdc:{node:"bpf_lfo",param:"dcoffset"},bpskew:{node:"bpf_lfo",param:"skew"},vowel:{node:"vowel",param:"frequency"},coarse:{node:"coarse",param:"coarse"},crush:{node:"crush",param:"crush"},shape:{node:"shape",param:"shape"},shapevol:{node:"shape",param:"postgain"},distort:{node:"distort",param:"distort"},distortvol:{node:"distort",param:"postgain"},distorttype:{node:"distort",param:"distort"},compressor:{node:"compressor",param:"threshold"},compressorRatio:{node:"compressor",param:"ratio"},compressorKnee:{node:"compressor",param:"knee"},compressorAttack:{node:"compressor",param:"attack"},compressorRelease:{node:"compressor",param:"release"},phaserrate:{node:"phaser_lfo",param:"frequency"},phasersweep:{node:"phaser_lfo",param:"depth"},phasercenter:{node:"phaser",param:"frequency"},phaserdepth:{node:"phaser",param:"Q"},delay:{node:"delay_mix",param:"gain"},delaytime:{node:"delay",param:"delayTime"},delayfeedback:{node:"delay",param:"feedback"},delaysync:{node:"delay",param:"delayTime"},dry:{node:"dry",param:"gain"},room:{node:"room_mix",param:"gain"},djf:{node:"djf",param:"value"},busgain:{node:"bus",param:"gain"},s:{node:"source",param:"frequency"},detune:{node:"source",param:"freqspread"},wt:{node:"source",param:"position"},warp:{node:"source",param:"warp"},freq:{node:"source",param:"frequency"},note:{node:"source",param:"frequency"},wtdc:{node:"wt_lfo",param:"dc"},wtskew:{node:"wt_lfo",param:"skew"},wtrate:{node:"wt_lfo",param:"frequency"},wtsync:{node:"wt_lfo",param:"frequency"},wtdepth:{node:"wt_lfo",param:"depth"},warpdc:{node:"warp_lfo",param:"dc"},warpskew:{node:"warp_lfo",param:"skew"},warprate:{node:"warp_lfo",param:"frequency"},warpsync:{node:"warp_lfo",param:"frequency"},warpdepth:{node:"warp_lfo",param:"depth"},fmi:{node:"fm_1_gain",param:"gain"},fmi2:{node:"fm_2_gain",param:"gain"},fmi3:{node:"fm_3_gain",param:"gain"},fmi4:{node:"fm_4_gain",param:"gain"},fmi5:{node:"fm_5_gain",param:"gain"},fmi6:{node:"fm_6_gain",param:"gain"},fmi7:{node:"fm_7_gain",param:"gain"},fmi8:{node:"fm_8_gain",param:"gain"},fmh:{node:"fm_1",param:"frequency"},fmh2:{node:"fm_2",param:"frequency"},fmh3:{node:"fm_3",param:"frequency"},fmh4:{node:"fm_4",param:"frequency"},fmh5:{node:"fm_5",param:"frequency"},fmh6:{node:"fm_6",param:"frequency"},fmh7:{node:"fm_7",param:"frequency"},fmh8:{node:"fm_8",param:"frequency"},pw:{node:"source",param:"pulsewidth"},pwrate:{node:"pw_lfo",param:"frequency"},pwsweep:{node:"pw_lfo",param:"depth"},vib:{node:"vib",param:"frequency"},vibmod:{node:"vib_gain",param:"gain"},byteBeatStartTime:{node:"source",param:"byteBeatStartTime"},spread:{node:"source",param:"panspread"},transient:{node:"transient",param:"attack"}};function ED(){return MD}const PD=(i,p)=>{if(i?.parameters){const M=i.parameters.get(p);if(M instanceof AudioParam)return M}let x=i?.[p];if(x===void 0&&p==="frequency"&&(x=i?.detune??i?.playbackRate),x instanceof AudioParam)return x},Qu=ED(),AD=(i,p)=>{const x=i.split("_")[0];return Qu[`${x}_${p}`]??Qu[x]},Ph=(i,p)=>i==="frequency"&&p>=30?{min:20-p,max:24e3-p}:{min:void 0,max:void 0},RD=(i,p,x)=>{const M=ie(),R=new Float32Array(256);for(let T=0;T<R.length;T++){const t=T/(R.length-1)*2-1;R[T]=Oi(t*x,p,x)}const w=new WaveShaperNode(M,{curve:R}),v=Ce(1/x);return i.connect(v).connect(w),{modulator:i,toCleanup:[w,v]}},Ah=(i,p,x)=>{const M=AD(i,x);if(!M)return zn(new Error(`Could not find control data for target '${i}'. It may not be modulatable.`),"superdough"),{targetParams:[],paramName:i};const R=M.param,w=p[M.node]?M.node:i,v=p[w];if(!v){const t=Object.keys(p);return zn(new Error(`Could not connect to target '${w}'  it does not exist. Available targets: ${t.join(", ")}`),"superdough"),{targetParams:[],paramName:R}}const T=[];return v.forEach(t=>{const h=PD(t,R);T.push(h)}),{targetParams:T,paramName:R}},m2=(i,p,x)=>{const{rate:M=1,sync:R,cps:w,cycle:v,control:T="lfo",subControl:t,fxi:h="main",depth:g=1,depthabs:o,...a}=p,{targetParams:r,paramName:e}=Ah(T,x[h],t);if(!r.length)return;let s=r[0].value;s=s===0?1:s;const{min:u,max:n}=Ph(e,s),l=o??g*s,c={...a,frequency:R!==void 0?R*w:M,time:v/w,depth:l,min:u,max:n},d=rn(ie(),c);return x.main[`lfo_${i}`]=[d],r.forEach(f=>d.connect(f)),d},g2=(i,p,x)=>{const{control:M,subControl:R,acurve:w,dcurve:v,rcurve:T,depth:t=1,depthabs:h,fxi:g="main",...o}=p,{targetParams:a,paramName:r}=Ah(M,x[g],R);if(!a.length)return;let e=a[0].value;e=e===0?1:e;const{min:s,max:u}=Ph(r,e),n=h??t*e,l=o2(ie(),{...o,depth:n,min:s,max:u,attackCurve:w,decayCurve:v,releaseCurve:T});return x.main[`env_${i}`]=[l],a.forEach(c=>l.connect(c)),l},x2=(i,p,x)=>{const M=ie(),{control:R,subControl:w,depth:v=1,depthabs:T,fxi:t="main"}=i,{targetParams:h,paramName:g}=Ah(R,p[t],w);if(!h.length)return{toCleanup:[]};const o=x.getBus(i.bus),a=new ConstantSourceNode(M,{offset:i.dc??0});a.start(i.begin);const r=a.connect(Ce(1));o.connect(r);let e=h[0].value;e=e===0?1:e;const{min:s,max:u}=Ph(g,e),n=T??v*e,l=Ce(Math.sign(n)*Math.abs(n)/.3),c=r.connect(l),d=[];let f=c;if(s!==void 0&&u!==void 0){const m=RD(c,s,u);f=m.modulator,d.push(...m.toCleanup)}return Gi(M,()=>{h.forEach(m=>f.connect(m))},0,i.begin),d.push(a,r,l),{modulator:f,toCleanup:d}},Rh={},Ba={},FD=i=>Rh[i];function LD(i,p){var x=1024;if(i<x)return i+" B";var M=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],R=-1;do i/=x,++R;while(i>=x);return i.toFixed(1)+" "+M[R]}function y2(i,p){const{speed:x=1}=i,{transpose:M,url:R,index:w,midi:v,label:T}=r2(i,p);let t=Math.abs(x)*Math.pow(2,M/12);return{transpose:M,url:R,index:w,midi:v,label:T,playbackRate:t}}const T2=async(i,p,x)=>{let{url:M,label:R,playbackRate:w}=y2(i,p);x&&(M=await x(M));const v=ie(),T=await br(M,v,R);return i.unit==="c"&&(w=w*T.duration),{buffer:T,playbackRate:w}},C2=async(i,p,x)=>{let{buffer:M,playbackRate:R}=await T2(i,p,x);i.speed<0&&(M=S2(M));const w=ie().createBufferSource();w.buffer=M,w.playbackRate.value=R;const{loopBegin:v=0,loopEnd:T=1,begin:t=0,end:h=1}=i,g=w.buffer.duration,o=t*g;i.loop&&(w.loop=!0,w.loopStart=v*g,w.loopEnd=T*g);const a=g/w.playbackRate.value,r=(h-t)*a;return{bufferSource:w,offset:o,bufferDuration:g,playbackDuration:a,sliceDuration:r}},br=(i,p,x,M=0)=>{const R=x?`sound "${x}:${M}"`:"sample";if(i=i.replace("#","%23"),!Ba[i]){Ie(`[sampler] load ${R}..`,"load-sample",{url:i});const w=Date.now();Ba[i]=fetch(i).then(v=>v.arrayBuffer()).then(async v=>{const T=Date.now()-w,t=LD(v.byteLength);Ie(`[sampler] load ${R}... done! loaded ${t} in ${T}ms`,"loaded-sample",{url:i});const h=await p.decodeAudioData(v);return Rh[i]=h,h})}return Ba[i]};function S2(i){const p=ie(),x=p.createBuffer(i.numberOfChannels,i.length,p.sampleRate);for(let M=0;M<i.numberOfChannels;M++)x.copyToChannel(i.getChannelData(M).slice().reverse(),M,M);return x}const DD=i=>Rh[i];function M2(i){if(i.startsWith("bubo:")){const[p,x]=i.split(":");i=`github:Bubobubobubobubo/dough-${x}`}return i}function E2(i,p=""){if(!i.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let x=i.slice(7);x=x.endsWith("/")?x.slice(0,-1):x;let M=x.split("/"),R=M[0],w=M.length>=2?M[1]:"samples",v=M.length>=3?M[2]:"main",T=M.slice(3);return T.push(p||""),T=T.join("/"),`https://raw.githubusercontent.com/${R}/${w}/${v}/${T}`}const P2=(i,p,x=i._base||"")=>Object.entries(i).forEach(([M,R])=>{if(typeof R=="string"&&(R=[R]),typeof R!="object")throw new Error("wrong sample map format for "+M);x=R._base||x,x=M2(x),x.startsWith("github:")&&(x=E2(x,""));const w=v=>x+v;Array.isArray(R)?R=R.map(w):R=Object.fromEntries(Object.entries(R).map(([v,T])=>[v,(typeof T=="string"?[T]:T).map(w)])),p(M,R)});let A2={};function wD(i,p){A2[i]=p}function GD(i){const p=Object.entries(A2).find(([x])=>i.startsWith(x));if(p)return p[1]}async function bD(i){const p=GD(i);if(p)return p(i);if(i=M2(i),i.startsWith("github:")&&(i=E2(i,"strudel.json")),i.startsWith("local:")&&(i="http://localhost:5432"),i.startsWith("shabda:")){let[R,w]=i.split("shabda:");i=`https://shabda.ndre.gr/${w}.json?strudel=1`}if(i.startsWith("shabda/speech")){let[R,w]=i.split("shabda/speech");w=w.startsWith("/")?w.substring(1):w;let[v,T]=w.split(":"),t="f",h="en-GB";v&&([h,t]=v.split("/")),i=`https://shabda.ndre.gr/speech/${T}.json?gender=${t}&language=${h}&strudel=1'`}if(typeof fetch!="function")return;const x=a2(i);if(typeof fetch>"u")return;const M=await fetch(i).then(R=>R.json()).catch(R=>{throw console.error(R),new Error(`error loading "${i}"`)});return[M,M._base||x]}const R2=async(i,p=i._base||"",x={})=>{if(typeof i=="string"){const[w,v]=await bD(i);return R2(w,p||v,x)}const{prebake:M,tag:R}=x;P2(i,(w,v)=>{L2(w,v,{baseUrl:p,prebake:M,tag:R})},p)},$u=[];async function F2(i,p,x,M,R){let{s:w,nudge:v=0,cut:T,loop:t,clip:h=void 0,n:g=0,speed:o=1,duration:a}=p;if(o===0)return;const r=ie();let[e,s,u,n]=ni([p.attack,p.decay,p.sustain,p.release]);const{bufferSource:l,sliceDuration:c,offset:d}=await C2(p,M,R);if(!l){Ie(`[sampler] could not load "${w}:${g}"`,"error");return}if(r.currentTime>i){Ie(`[sampler] loading sound "${w}:${g}" took too long`,"highlight"),ue(l);return}const f=_s(l.detune,p,i),m=i+v;l.start(m,d);const y=r.createGain(),S=l.connect(y);h==null&&t==null&&p.release==null&&(a=c);let C=i+a;si(S.gain,e,s,u,n,0,1,i,C,"linear"),qs(l.detune,p,i,C);const E=r.createGain();S.connect(E),Bi(l,function(){ue(l),f?.stop(),ue(S),ue(E),x()});let P=C+n+.01;l.stop(P);const A=G=>{l.stop(G)},F={node:E,nodes:{source:[l],...f?.nodes},stop:A};if(T!==void 0){const G=$u[T];G&&(G.node.gain.setValueAtTime(1,m),G.node.gain.linearRampToValueAtTime(0,m+.01)),$u[T]=F}return F}function ID(i,p,x){Mi(i,(M,R,w)=>F2(M,R,w,p),{type:"sample",samples:p,...x})}function L2(i,p,x){i.startsWith("wt_")?Fh(i,p,x):ID(i,p,x)}const Zs=(i,p)=>i!==void 0&&i!==p,xo=i=>new GainNode(i,{gain:1,channelCount:2,channelCountMode:"explicit"});class OD{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(p){this.audioContext=p,this.output=xo(p),this.summingNode=xo(p),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(p,x=0){return this.djfNode==null&&(this.djfNode=ke(this.audioContext,"djf-processor",{value:p}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(p,x),this.djfNode}getDelay(p=0,x=.5,M){return x=Oi(x,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,p,x),this.delayNode.connect(this.summingNode),this.delayNode.start?.(M)),this.delayNode.delayTime.value!==p&&this.delayNode.delayTime.setValueAtTime(p,M),this.delayNode.feedback.value!==x&&this.delayNode.feedback.setValueAtTime(x,M),this.delayNode}getReverb(p,x,M,R,w,v,T){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(p,x,M,R,w,v,T),this.reverbNode.connect(this.summingNode)),(Zs(p,this.reverbNode.duration)||Zs(x,this.reverbNode.fade)||Zs(M,this.reverbNode.lp)||Zs(R,this.reverbNode.dim)||Zs(v,this.reverbNode.irspeed)||Zs(T,this.reverbNode.irbegin)||this.reverbNode.ir!==w)&&this.reverbNode.generate(p,x,M,R,w,v,T),this.reverbNode}sendReverb(p,x){return Wn(p,this.reverbNode,x)}sendDelay(p,x){return Wn(p,this.delayNode,x)}duck(p,x=0,M=.1,R=1){const w=x,v=Math.max(M,.002),T=this.output.gain;Gi(this.audioContext,()=>{const t=this.audioContext.currentTime,h=T.value;T.cancelScheduledValues(t),T.setValueAtTime(h,t);const g=Math.max(p,t),o=Oi(1-Math.sqrt(R),.01,h);T.exponentialRampToValueAtTime(o,g+w),T.exponentialRampToValueAtTime(1,g+w+v)},0,p-.01)}connectToOutput(p){p.connect(this.summingNode)}}class BD{channelMerger;destinationGain;constructor(p){this.audioContext=p,this.initializeAudio()}initializeAudio(){const p=this.audioContext,x=p.destination.maxChannelCount;this.audioContext.destination.channelCount=x,this.channelMerger=new ChannelMergerNode(p,{numberOfInputs:p.destination.channelCount}),this.destinationGain=new GainNode(p),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(p.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(p,x=[0,1])=>{const M=new StereoPannerNode(this.audioContext);p.connect(M);const R=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:M.channelCount});M.connect(R),x.forEach((w,v)=>{R.connect(this.channelMerger,v%M.channelCount,w%this.audioContext.destination.channelCount)})}}class D2{audioContext;output;nodes={};buses={};constructor(p){this.audioContext=p,this.output=new BD(p)}reset(){Object.values(this.nodes).forEach(p=>{p.disconnect()}),Object.values(this.buses).forEach(p=>{p.disconnect()}),this.nodes={},this.buses={},this.output.reset()}duck(p,x,M=0,R=.1,w=1){const v=[p].flat(),T=[M].flat(),t=[R].flat(),h=[w].flat();v.forEach((g,o)=>{const a=this.nodes[g];if(a==null){zn(new Error(`duck target orbit ${g} does not exist`),"superdough");return}const r=T[o]??T[0],e=Math.max(t[o]??t[0],.002),s=h[o]??h[0];a.duck(x,r,e,s)})}getOrbit(p,x){return this.nodes[p]==null&&(this.nodes[p]=new OD(this.audioContext),this.output.connectToDestination(this.nodes[p].output,x)),this.nodes[p]}getBus(p){return this.buses[p]==null&&(this.buses[p]=xo(this.audioContext)),this.buses[p]}}const yo=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),To=new Set;function w2(){To.clear()}async function XD(i,p,x=2048){const M=`${i},${x}`;if(!To.has(M)){const R=(await WD(i,p)).getChannelData(0),w=R.length,v=Math.max(1,Math.floor(w/x)),T=new Array(v);for(let t=0;t<v;t++){const h=t*x;T[t]=R.subarray(h,h+x)}return To.add(M),{frames:T,frameLen:x,numFrames:v,key:M}}return{frameLen:x,key:M}}function ND(i,p){var x=1024;if(i<x)return i+" B";var M=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],R=-1;do i/=x,++R;while(i>=x);return i.toFixed(1)+" "+M[R]}function VD(i){const p=new DataView(i);let x=12;for(;x+8<=p.byteLength;){const M=String.fromCharCode(p.getUint8(x),p.getUint8(x+1),p.getUint8(x+2),p.getUint8(x+3)),R=p.getUint32(x+4,!0);if(M==="fmt ")return p.getUint32(x+12,!0);x+=8+R+(R&1)}return null}async function zD(i){const p=VD(i)||44100;return await new OfflineAudioContext(1,1,p).decodeAudioData(i)}const Xa={},WD=(i,p)=>{if(i=i.replace("#","%23"),!Xa[i]){Ie(`[wavetable] load table ${p}..`,"load-table",{url:i});const x=Date.now();Xa[i]=fetch(i).then(M=>M.arrayBuffer()).then(async M=>{const R=Date.now()-x,w=ND(M.byteLength);return Ie(`[wavetable] load table ${p}... done! loaded ${w} in ${R}ms`,"loaded-table",{url:i}),await zD(M)})}return Xa[i]};function G2(i,p=""){if(!i.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[x,M]=i.split("github:");return M=M.endsWith("/")?M.slice(0,-1):M,M.split("/").length===2&&(M+="/main"),`https://raw.githubusercontent.com/${M}/${p}`}const qu=(i,p,x,M={})=>(p=i._base||p,Object.entries(i).forEach(([R,w])=>{if(R==="_base")return!1;if(typeof w=="string"&&(w=[w]),typeof w!="object")throw new Error("wrong json format for "+R);let v=p;v.startsWith("github:")&&(v=G2(v,"")),w=w.map(T=>v+T).filter(T=>T.toLowerCase().endsWith(".wav")?!0:(Ie(`[wavetable] skipping ${T} -- wavetables must be ".wav" format`),!1)),w.length&&Fh(R,w,{baseUrl:p,frameLen:x})}));function Fh(i,p,x){Mi(i,(M,R,w,v)=>b2(M,R,w,p,v,x?.frameLen??2048),{type:"wavetable",tables:p,...x})}const ZD=async(i,p,x,M={})=>{if(x!==void 0)return qu(x,i,p);i.startsWith("github:")&&(i=G2(i,"strudel.json")),i.startsWith("local:")&&(i="http://localhost:5432");const R=a2(i);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(i).then(w=>w.json()).then(w=>qu(w,R,p,M)).catch(w=>{throw console.error(w),new Error(`error loading "${i}"`)})};async function b2(i,p,x,M,R,w){const{s:v,n:T=0,duration:t,clip:h}=p,g=ie(),[o,a,r,e]=ni([p.attack,p.decay,p.sustain,p.release]);let{warpmode:s}=p;typeof s=="string"&&(s=yo[s.toUpperCase()]??yo.NONE);const u=hs(p),{url:n,label:l}=r2(p,M),c=await XD(n,l,w);let d=i+t;h!==void 0&&(d=Math.min(i+h*t,d));const f=d+e,m=f+.01,y={begin:i,end:m,frequency:u,freqspread:p.detune,position:p.wt,warp:p.warp,warpMode:s,voices:Math.max(p.unison??1,1),panspread:p.spread,phaserand:p.wtphaserand??p.unison>1?1:0},S=jn("wavetable",()=>new AudioWorkletNode(g,"wavetable-oscillator-processor",{outputChannelCount:[2]}));if(Object.entries(y).forEach(([V,O])=>{const z=S.parameters.get(V),B=O!==void 0?O:z.defaultValue;z.value=B}),S.port.postMessage({type:"initialize",payload:c}),g.currentTime>i){Ie(`[wavetable] still loading sound "${v}:${T}"`,"highlight");return}const C=[p.wtattack,p.wtdecay,p.wtsustain,p.wtrelease],E=[p.warpattack,p.warpdecay,p.warpsustain,p.warprelease],P=S.parameters,A=P.get("position"),F=P.get("warp");let G=p.wtrate;p.wtsync!=null&&(G=R*p.wtsync);const D=go(g,A,i,f,{offset:p.wt,amount:p.wtenv,defaultAmount:.5,values:C,holdEnd:d,defaultValues:[0,.5,0,.1]},{frequency:G,depth:p.wtdepth,defaultDepth:.5,shape:p.wtshape,skew:p.wtskew,dcoffset:p.wtdc??0});let L=p.warprate;p.warpsync!=null&&(L=L=R*p.warpsync);const b=go(g,F,i,f,{offset:p.warp,amount:p.warpenv,defaultAmount:.5,values:E,holdEnd:d,defaultValues:[0,.5,0,.1]},{frequency:L,depth:p.warpdepth,defaultDepth:.5,shape:p.warpshape,skew:p.warpskew,dcoffset:p.warpdc??0}),I=_s(S.parameters.get("detune"),p,i),N=Zn(S.parameters.get("frequency"),p,i),Z=g.createGain(),U=S.connect(Z);si(U.gain,o,a,r,e,0,.3,i,d,"linear"),qs(S.parameters.get("detune"),p,i,d);const W={node:U,nodes:{source:[S],wt_lfo:[D],warp_lfo:[b],...N?.nodes,...I?.nodes}},X=Gi(g,()=>{Th(S),I?.stop(),N?.stop(),ue(D),ue(b),x()},i,m);return W.stop=V=>{X.stop(V)},W}const Lh=128,Co="System Standard";let Dh=Lh;function I2(i){Dh=parseInt(i)??Lh}let wh=!1;function O2(i){wh=i==!0}const Pi=SD();function Mi(i,p,x={}){i=i.toLowerCase().replace(/\s+/g,"_"),Pi.setKey(i,{onTrigger:p,data:x})}let B2=i=>i;function wi(i){return B2(i)}function YD(i){B2=i}function So(i){for(const x in i)i[x.toLowerCase()]=i[x];const p=Pi.get();for(const x in p){const[M,R]=x.split("_");if(!R)continue;const w=i[M];if(w){if(typeof w=="string")p[`${w}_${R}`.toLowerCase()]=p[x];else if(Array.isArray(w))for(const v of w)p[`${v}_${R}`.toLowerCase()]=p[x]}}Pi.set({...p})}async function UD(i){const p=await(await fetch(i)).json();So(p)}async function HD(...i){switch(i.length){case 1:return typeof i[0]=="string"?UD(i[0]):So(i[0]);case 2:return So({[i[0]]:i[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+i.length)}}function KD(i,p){if(ys(i)==null){Ie("soundAlias: original sound not found");return}Pi.setKey(p,ys(i))}function ys(i){return typeof i!="string"?(console.warn(`getSound: expected string got "${i}". fall back to triangle`),Pi.get().triangle):Pi.get()[i.toLowerCase()]}const X2=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let i=await navigator.mediaDevices.enumerateDevices();i=i.filter(x=>x.kind==="audiooutput"&&x.deviceId!=="default");const p=new Map;return p.set(Co,""),i.forEach(x=>{p.set(x.label,x.deviceId)}),p};let Qn={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,busgain:1,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8,tremolodepth:1,tremolophase:0,release:.01};const kD=Object.freeze({...Qn});function JD(i,p){Qn[i]=p}function jD(){Qn={...kD}}let Gh=new Map(Object.entries(Qn));function bh(i,p){Gh.set(i,p)}function De(i){return Gh.get(i)}function QD(i){Object.keys(i).forEach(p=>{bh(p,i[p])})}function N2(){Gh=new Map(Object.entries(Qn))}function $D(i){N2(),i==="1.0"&&bh("fanchor",.5)}const qD=()=>Pi.set({});let V2=[];function z2(i){V2.push(i)}let vr;function W2(){if(!vr){const i=ie(),p=V2.concat([TD]);vr=Promise.all(p.map(x=>i.audioWorklet.addModule(x))).then(()=>vr=void 0)}return vr}async function Ih(i={}){const{disableWorklets:p=!1,maxPolyphony:x,audioDeviceName:M=Co,multiChannelOrbits:R=!1}=i;if(I2(x),O2(R),w2(),typeof window>"u")return;const w=ie();if(M!=null&&M!=Co)try{const v=(await X2()).get(M),T=(v??"").length>0;w.sinkId!==v&&T&&await w.setSinkId(v),Ie(`[superdough] Audio Device set to ${M}, it might take a few seconds before audio plays on all output channels`)}catch{Ie("[superdough] failed to set audio interface","warning")}if(!w instanceof OfflineAudioContext&&await w.resume(),p){Ie("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await W2(),Ie("[superdough] AudioWorklets loaded")}catch(v){console.warn("could not load AudioWorklet effects",v)}Ie("[superdough] ready")}let Na;async function Z2(i){return Na||(Na=new Promise(p=>{document.addEventListener("mousedown",async function x(){document.removeEventListener("mousedown",x),await Ih(i),p()})})),Na}let Cs;function qr(){return Cs==null&&(Cs=new D2(ie())),Cs}function Mo(i){return Cs=i,Cs}function Y2(i,p){qr().output.connectToDestination(i,p)}function _D(i,p,x=1,M=.5,R=1e3,w=2e3){const v=ie(),T=rn(v,{frequency:x,depth:w*2,begin:i,end:p}),t=1;let h=282;const g=[];for(let o=0;o<t;o++){const a=jn("filter",()=>v.createBiquadFilter());a.type="notch",a.gain.value=1,a.frequency.value=R+h,a.Q.value=2-Math.min(Math.max(M*2,0),1.9),T.connect(a.detune),h+=282,g.push(a)}return{filterChain:g,lfo:T}}function tw(i){i=i??0;const p=["12db","ladder","24db"];return typeof i=="number"?p[Math.floor(n2(i,p.length))]:i}let Ye={},Ss={};function U2(i,p=1024,x=.5){if(!Ye[i]||Ye[i].context!=ie()){const M=ie().createAnalyser();M.fftSize=p,M.smoothingTimeConstant=x,Ye[i]=M,Ss[i]=new Float32Array(Ye[i].frequencyBinCount)}return Ye[i].fftSize!==p&&(Ye[i].fftSize=p,Ss[i]=new Float32Array(Ye[i].frequencyBinCount)),Ye[i]}function _r(i="time",p=1){const x={time:()=>Ye[p]?.getFloatTimeDomainData(Ss[p]),frequency:()=>Ye[p]?.getFloatFrequencyData(Ss[p])}[i];if(!x)throw new Error(`getAnalyzerData: ${i} not supported. use one of ${Object.keys(x).join(", ")}`);return x(),Ss[p]}function H2(){Cs?.reset(),Ye={},Ss={}}let Tn=new Map;function _u(i){return(Array.isArray(i)?i:[i]).map(p=>p-1)}class ew{constructor(){this.audioNodes=[],this.tails=[]}connect(...p){return p.forEach(x=>{this.tails.forEach(M=>{M.connect(x)})}),this.tails=p,this.audioNodes.push(...p),this}connectOne(p,x){return this.tails[p].connect(x),this.tails[p]=x,this.audioNodes.push(x),this}releaseNodes(){this.audioNodes.forEach(p=>jL(p)?Th(p):ue(p)),this.audioNodes=[],this.tails=[]}}const ta=async(i,p,x,M=.5,R=.5)=>{const w={main:{}},v=ie(),T=qr();let{stretch:t}=i;if(t!=null&&(p=p-.04),typeof i!="object")throw new Error(`expected hap.value to be an object, but got "${i}". Hint: append .note() or .s() to the end`,"error");if(i.duration=x,p<v.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${p.toFixed(2)}, now: ${v.currentTime.toFixed(2)})`);return}let{s:h=De("s"),bank:g,source:o,postgain:a=De("postgain"),duckorbit:r,duckonset:e,duckattack:s,duckdepth:u,djf:n,release:l=De("release"),dry:c,delay:d=De("delay"),delayfeedback:f=De("delayfeedback"),delaysync:m=De("delaysync"),delaytime:y,orbit:S=De("orbit"),bus:C,busgain:E=De("busgain"),room:P,roomfade:A,roomlp:F,roomdim:G,roomsize:D,ir:L,irspeed:b,irbegin:I,i:N=De("i"),analyze:Z,fft:U=De("fft"),FX:W=[],FXrelease:X}=i;y=y??Ku(m,M);const V=_u(wh&&S>0?[S*2-1,S*2]:De("channels")),O=i.channels!=null?_u(i.channels):V,z=T.getOrbit(S,O);r!=null&&T.duck(r,p,e,s,u),a=wi(a),d=wi(d),E=wi(E);const B=p+x,Y=Math.max(l,X??0),k=B+Y,J=Math.round(Math.random()*1e6);for(let ht=0;ht<=Tn.size-Dh;ht++){const st=Tn.entries().next(),dt=st.value[1].deref(),lt=st.value[0],ft=p+.25;dt?.node?.gain?.linearRampToValueAtTime(0,ft),dt?.stop?.(ft),Tn.delete(lt)}if(["-","~","_"].includes(h))return;g&&h&&(h=`${g}_${h}`,i.s=h);const j=new ew;let tt;if(o)tt=o(p,i,x,M),w.main.source=[tt];else if(ys(h)){const{onTrigger:ht}=ys(h),st=await ht(p,i,()=>Gi(v,()=>{j.releaseNodes(),Tn.delete(J)},0,k),M);st&&(tt=st.node,Tn.set(J,new WeakRef(st)),w.main={...w.main,...st.nodes})}else throw new Error(`sound ${h} not found! Is it loaded?`);if(!tt)return;if(v.currentTime>p){Ie("[webaudio] skip hap: still loading",v.currentTime-p);return}j.connect(tt),W=[...W,i];for(let[ht,st]of Object.entries(W)){const dt=ht==W.length-1?"main":ht;w[dt]??={};const lt=w[dt];let{gain:ft=De("gain"),velocity:Lt=De("velocity"),shapevol:Nt=De("shapevol"),distorttype:Vt=De("distorttype"),distortvol:pt=De("distortvol"),tremolodepth:Pt=De("tremolodepth"),phaserdepth:Dt=De("phaserdepth"),delay:Gt=De("delay"),delayfeedback:Ut=De("delayfeedback"),delaysync:Ot=De("delaysync"),delaytime:Wt,i:Zt=De("i")}=st;if(ft=wi(Qi(ft,1)),Nt=wi(Nt),pt=wi(pt),Lt=wi(Lt),Pt=wi(Pt),ft*=Lt,Wt=Wt??Ku(Ot,M),st.workletSrc!==void 0){const wt=ke(v,"generic-processor",{},{outputChannelCount:[2]});j.connect(wt);const Ht=st.workletSrc.replace(/\bpat\[(\d+)\]/g,(Me,be)=>st.workletInputs[be]).replaceAll("sFreq",hs(i)).replaceAll("sGate",`cc('strudel-gate-${J}')`),{src:he,ugens:me,registers:te}=compileKabel(Ht);wt.port.postMessage({src:he,schema:{ugens:me,registers:te},start:p,gateEnd:B,end:k})}if(st.stretch!==void 0){const wt=ke(v,"phase-vocoder-processor",{pitchFactor:st.stretch});j.connect(wt),lt.stretch=[wt]}if(st.transient!==void 0){const wt=ke(v,"transient-processor",{},{processorOptions:{attack:st.transient,sustain:st.transsustain,begin:p,end:k}});j.connect(wt),lt.transient=wt}const ve=Ce(ft);lt.gain=[ve],j.connect(ve);const Te=tw(i.ftype),_t=wt=>u2(v,p,B,wt,M,R);if(st.cutoff!==void 0){const wt=Oa(st,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});wt.type="lowpass";const{filter:Ht,lfo:he}=_t(wt);if(lt.lpf=[Ht],lt.lpf_lfo=[he],j.connect(Ht),he&&j.audioNodes.push(he),Te==="24db"){const{filter:me,lfo:te}=_t(wt);lt.lpf.push(me),lt.lpf_lfo.push(te),j.connect(me),te&&j.audioNodes.push(te)}}if(st.hcutoff!==void 0){const wt=Oa(st,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});wt.type="highpass";const{filter:Ht,lfo:he}=_t(wt);if(lt.hpf=[Ht],lt.hpf_lfo=[he],he&&j.audioNodes.push(he),j.connect(Ht),Te==="24db"){const{filter:me,lfo:te}=_t(wt);lt.hpf.push(me),lt.hpf_lfo.push(te),j.connect(me),te&&j.audioNodes.push(te)}}if(st.bandf!==void 0){const wt=Oa(st,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});wt.type="bandpass";const{filter:Ht,lfo:he}=_t(wt);if(lt.bpf=[Ht],lt.bpf_lfo=[he],j.connect(Ht),he&&j.audioNodes.push(he),Te==="24db"){const{filter:me,lfo:te}=_t(wt);lt.bpf.push(me),lt.bpf_lfo.push(te),j.connect(me),te&&j.audioNodes.push(te)}}if(st.vowel!==void 0){const wt=v.createVowelFilter(st.vowel);lt.vowel=wt.filters,j.connect(wt)}if(st.coarse!==void 0){const wt=ke(v,"coarse-processor",{coarse:st.coarse});lt.coarse=[wt],j.connect(wt)}if(st.crush!==void 0){const wt=ke(v,"crush-processor",{crush:st.crush});lt.crush=[wt],j.connect(wt)}if(st.shape!==void 0){const wt=ke(v,"shape-processor",{shape:st.shape,postgain:Nt});lt.shape=[wt],j.connect(wt)}if(st.distort!==void 0){const wt=p2(st.distort,pt,Vt);lt.distort=[wt],j.connect(wt)}let ce=st.tremolo;if(st.tremolosync!=null&&(ce=M*st.tremolosync),ce!==void 0){const wt=Math.max(1-Pt,0),Ht=new GainNode(v,{gain:wt}),he=R/M,me=rn(v,{skew:st.tremoloskew??(st.tremoloshape!=null?.5:1),frequency:ce,depth:Pt,time:he,dcoffset:0,shape:st.tremoloshape,phaseoffset:st.tremolophase,min:0,max:1,curve:1.5,begin:p,end:k});lt.tremolo=[me],lt.tremolo_gain=[Ht],me.connect(Ht.gain),j.audioNodes.push(me),j.connect(Ht)}if(st.compressor!==void 0){const wt=h2(v,st.compressor,st.compressorRatio,st.compressorKnee,st.compressorAttack,st.compressorRelease);lt.compressor=[wt],j.connect(wt)}if(st.pan!==void 0){const wt=v.createStereoPanner();lt.pan=[wt],wt.pan.value=2*st.pan-1,j.connect(wt)}if(st.phaserrate!==void 0&&Dt>0){const{filterChain:wt,lfo:Ht}=_D(p,k,st.phaserrate,Dt,st.phasercenter,st.phasersweep);lt.phaser=[...wt],lt.phaser_lfo=[Ht],wt.forEach(he=>j.connect(he)),j.audioNodes.push(Ht)}if(dt!=="main"&&Gt>0&&Wt>0&&Ut>0){const wt=Ce(1);Ut=Oi(Ut,0,.98);const Ht=v.createFeedbackDelay(1,Wt,Ut),he=Ce(Gt),me=Ce(st.dry??1),te=new GainNode(v,{gain:1,channelCount:2,channelCountMode:"explicit"});j.connect(wt).connect(me,Ht).connectOne(1,he).connect(te),j.audioNodes.push(Ht.feedbackGain,Ht.delayGain),lt.delay=[Ht],lt.delay_mix=[he]}if(dt!=="main"&&st.room>0){let wt;if(st.ir!==void 0){let be,ei=ys(st.ir);Array.isArray(ei)?be=ei.data.samples[st.i%ei.data.samples.length]:typeof ei=="object"&&(be=Object.values(ei.data.samples).flat()[Zt%Object.values(ei.data.samples).length]),wt=await br(be,v,st.ir,0)}const Ht=Ce(1),he=v.createReverb(st.roomsize,st.roomfade,st.roomlp,st.roomdim,wt,st.irspeed,st.irbegin),me=Ce(st.room),te=Ce(st.dry??1),Me=new GainNode(v,{gain:1,channelCount:2,channelCountMode:"explicit"});j.connect(Ht).connect(te,he).connectOne(1,me).connect(Me),lt.room=[he],lt.room_mix=[me]}}if(X!==void 0&&X>l){const ht=Ce(1);ht.gain.setValueAtTime(1,B+l),ht.gain.linearRampToValueAtTime(0,k),j.connect(ht)}const ut=new GainNode(v,{gain:a});if(w.main.post=[ut],j.connect(ut),d>0&&y>0&&f>0){const ht=z.getDelay(y,f,p);w.main.delay=[ht];const st=z.sendDelay(ut,d);w.main.delay_mix=[st],j.audioNodes.push(st)}if(P>0){let ht;if(L!==void 0){let lt,ft=ys(L);Array.isArray(ft)?lt=ft.data.samples[N%ft.data.samples.length]:typeof ft=="object"&&(lt=Object.values(ft.data.samples).flat()[N%Object.values(ft.data.samples).length]),ht=await br(lt,v,L,0)}const st=z.getReverb(D,A,F,G,ht,b,I);w.main.room=[st];const dt=z.sendReverb(ut,P);w.main.room_mix=[dt],j.audioNodes.push(dt)}if(C!=null){const ht=T.getBus(C),st=Wn(ut,ht,E);j.audioNodes.push(st)}if(n!=null){const ht=z.getDjf(n,p);w.main.djf=[ht]}if(Z&&!(v instanceof OfflineAudioContext)){const ht=U2(Z,2**(U+5)),st=Wn(ut,ht,1);j.audioNodes.push(st)}if(c!=null){c=wi(c);const ht=new GainNode(v,{gain:c});j.connect(ht),z.connectToOutput(ht)}else z.connectToOutput(ut);W.forEach((ht,st)=>{const dt=st===W.length-1?"main":st;if(ht.lfo)for(const lt of ht.lfo.__ids){const ft=ht.lfo[lt];ft.fxi??=dt;const Lt=m2(lt,{...ft,cps:M,cycle:R,begin:p,end:k},w);Lt&&j.audioNodes.push(Lt)}if(ht.env)for(const lt of ht.env.__ids){const ft=ht.env[lt];ft.fxi??=dt;const Lt=g2(lt,{...ft,begin:p,end:k},w);Lt&&j.audioNodes.push(Lt)}if(ht.bmod)for(const lt of ht.bmod.__ids){const ft=ht.bmod[lt];ft.fxi??=dt;const{toCleanup:Lt}=x2({...ft,begin:p},w,Cs);j.audioNodes.push(...Lt)}})},iw=(i,p,x,M)=>{ta(p,i-x,p.duration/M,M)},sw=["triangle","square","sawtooth","sine","user","one"],nw=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function rw(i,p){const x=i,M=new Float32Array(p);for(let R=0;R<p;R++){const w=R*2/p-1;M[R]=Math.tanh(w*x)}return M}function K2(){[...sw].forEach(i=>{Mi(i,(p,x,M)=>{const[R,w,v,T]=ni([x.attack,x.decay,x.sustain,x.release],"linear",[.001,.05,.6,.01]),t=Ce(.3),h=J2(i,p,x,()=>{ue(t),M()}),{node:g,nodes:o,stop:a,triggerRelease:r}=h,{duration:e}=x,s=Ce(1),u=g.connect(t).connect(s),n=p+e;si(u.gain,R,w,v,T,0,1,p,n,"linear");const l=n+T+.01;return r?.(l),a(l),{node:u,nodes:o,stop:c=>{a(c)}}},{type:"synth",prebake:!0})}),Mi("sbd",(i,p,x)=>{const{duration:M,decay:R=.5,pdecay:w=.5,penv:v=36,clip:T}=p,t=ie(),h=.02,g=1.2,o=.025,a=1,r=t.createOscillator();r.type="triangle",r.frequency.value=hs(p,29),r.detune.setValueAtTime(v*100,0),r.detune.setValueAtTime(v*100,i),r.detune.exponentialRampToValueAtTime(.001,i+w);const e=Ce(1);e.gain.setValueAtTime(1,i+h),e.gain.exponentialRampToValueAtTime(.001,i+h+R),r.start(i);const s=vo("brown",i,2),u=Ce(1);u.gain.setValueAtTime(g,i),u.gain.exponentialRampToValueAtTime(.001,i+o);const n=new WaveShaperNode(t);n.curve=rw(2,t.sampleRate);const l=Ce(a);Bi(r,()=>{ue(r),ue(e),ue(n),ue(s.node),ue(u),ue(l),x()});const c=r.connect(n).connect(e).connect(l);s.node.connect(u).connect(l);let d=i+R+.01;return T!=null&&(d=Math.min(i+T*M,d)),l.gain.setValueAtTime(a,d-.01),l.gain.linearRampToValueAtTime(0,d),r.stop(d),s.stop(d),{node:c,nodes:{source:[r]},stop:f=>{r.stop(f)}}},{type:"synth",prebake:!0}),Mi("supersaw",(i,p,x)=>{const M=ie();let{duration:R,n:w,unison:v=5,spread:T=.6,detune:t}=p;t=t??w??.18;const h=hs(p),[g,o,a,r]=ni([p.attack,p.decay,p.sustain,p.release],"linear",[.001,.05,.6,.01]),e=i+R,s=e+r+.01,u=Oi(v,1,100);let n=u>1?Oi(T,0,1):0;const l={frequency:h,begin:i,end:s,freqspread:t,voices:u,panspread:n},c=jn("supersaw",()=>new AudioWorkletNode(M,"supersaw-oscillator",{outputChannelCount:[2]}));Object.entries(l).forEach(([C,E])=>{const P=c.parameters.get(C),A=E!==void 0?E:P.defaultValue;P.value=A}),c.port.postMessage({type:"initialize"});const d=1/Math.sqrt(u);qs(c.parameters.get("detune"),p,i,e);const f=_s(c.parameters.get("detune"),p,i),m=Zn(c.parameters.get("frequency"),p,i);let y=Ce(1);y=c.connect(y),si(y.gain,g,o,a,r,0,.3*d,i,e,"linear");let S=Gi(M,()=>{Th(c),x(),m?.stop(),f?.stop()},i,s);return{node:y,nodes:{source:[c],...m?.nodes,...f?.nodes},stop:C=>{S.stop(C)}}},{prebake:!0,type:"synth"}),Mi("bytebeat",(i,p,x)=>{const M=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:R=0}=p,w=hs(p),{byteBeatExpression:v=M[R%M.length],byteBeatStartTime:T}=p,t=ie();let{duration:h}=p;const[g,o,a,r]=ni([p.attack,p.decay,p.sustain,p.release],"linear",[.001,.05,.6,.01]),e=i+h,s=e+r+.01;let u=ke(t,"byte-beat-processor",{frequency:w,begin:i,end:s},{outputChannelCount:[2]});u.port.postMessage({codeText:v,byteBeatStartTime:T,frequency:w});let n=Ce(1);n=u.connect(n),si(n.gain,g,o,a,r,0,1,i,e,"linear");let l=Gi(t,()=>{ue(u),x()},i,s);return{node:n,source:u,stop:c=>{l.stop(c)}}},{prebake:!0,type:"synth"}),Mi("pulse",(i,p,x)=>{const M=ie();let{pwrate:R,pwsweep:w}=p;w==null&&(R!=null?w=.3:w=0),R==null&&w!=null&&(R=1);let{duration:v,pw:T=.5}=p;const t=hs(p),[h,g,o,a]=ni([p.attack,p.decay,p.sustain,p.release],"linear",[.001,.05,.6,.01]),r=i+v,e=r+a+.01;let s=ke(M,"pulse-oscillator",{frequency:t,begin:i,end:e,pulsewidth:T},{outputChannelCount:[2]});qs(s.parameters.get("detune"),p,i,r);const u=_s(s.parameters.get("detune"),p,i),n=Zn(s.parameters.get("frequency"),p,i);let l=Ce(1);l=s.connect(l),si(l.gain,h,g,o,a,0,1,i,r,"linear");let c;w!=0&&(c=rn(M,{frequency:R,depth:w,begin:i,end:e}),c.connect(s.parameters.get("pulsewidth")));let d=Gi(M,()=>{ue(s),ue(c),x(),n?.stop(),u?.stop()},i,e);return{node:l,nodes:{source:[s],pw_lfo:[c],...n?.nodes,...u?.nodes},stop:f=>{d.stop(f)}}},{prebake:!0,type:"synth"}),Mi("bus",(i,p,x)=>{const M=ie(),[R,w,v,T]=ni([p.attack,p.decay,p.sustain,p.release],"linear",[.001,.05,1,.01]),t=i+p.duration,h=t+T+.01,g=qr().getBus(p.n??0),o=g.connect(Ce(0));si(o.gain,R,w,v,T,0,1,i,t,"linear");const a=Gi(M,()=>{g.disconnect(o),x()},i,h);return{node:o,nodes:{source:[g]},stop:r=>{a.stop(r)}}},{prebake:!0,type:"input"}),[...Ch].forEach(i=>{Mi(i,(p,x,M)=>{const[R,w,v,T]=ni([x.attack,x.decay,x.sustain,x.release],"linear",[.001,.05,.6,.01]);let t,{density:h}=x;t=vo(i,p,h);let{node:g,stop:o,triggerRelease:a}=t;const r=Ce(.3),{duration:e}=x;Bi(g,()=>{ue(g),ue(r),M()});const s=Ce(1);let u=g.connect(r).connect(s);const n=p+e;si(u.gain,R,w,v,T,0,1,p,n,"linear");const l=n+T+.01;return a?.(l),o(l),{node:u,nodes:{source:[g]},stop:c=>{o(c)}}},{type:"synth",prebake:!0})}),nw.forEach(([i,p])=>Pi.set({...Pi.get(),[i]:Pi.get()[p]}))}const tl=2*Math.PI;function k2(i,p,x){i=typeof i=="object"?i:new Float32Array(i).fill(1);const M=i.length,R=new Float32Array(M+1),w=new Float32Array(M+1),v=ie(),T=v.createOscillator(),t={sawtooth:g=>[0,-1/g],square:g=>[0,g%2===0?0:1/g],triangle:g=>[g%2===0?0:1/(g*g),0],user:g=>[0,1]};if(!t[x])throw new Error(`unknown wave type ${x}`);for(let g=0;g<M;g++){const o=i[g],[a,r]=t[x](g+1),e=p?.[g]??0;let s=a*o,u=r*o;if(e!==0){const n=Math.cos(tl*e),l=Math.sin(tl*e);s=n*s-l*u,u=l*s+n*u}R[g+1]=s,w[g+1]=u}const h=v.createPeriodicWave(R,w);return T.setPeriodicWave(h),T}function J2(i,p,x,M){const{duration:R,noise:w=0}=x,v=x.partials??x.n;let T;if(i==="user"&&!v&&(Ie("[superdough] Synth 'user' was selected, but partials not specified. Defaulting to triangle. Use pat.partials to setup custom waveform"),i="triangle"),i=i==="user"&&!v?"triangle":i,i==="one")return T=new ConstantSourceNode(ie(),{offset:1}),T.start(p),{node:T,nodes:{source:T},stop:o=>T?.stop(o)};!v||v?.length===0||i==="sine"?(T=ie().createOscillator(),T.type=i||"triangle"):T=k2(v,x.phases,i),T.frequency.value=hs(x);const t=_s(T.detune,x,p);qs(T.detune,x,p,p+R);const h=Zn(T.frequency,x,p);let g;return w&&(g=JL(T,w,p)),Bi(T,()=>{g?.teardown(),ue(T),ue(g?.node),M()}),T.start(p),{node:g?.node||T,nodes:{source:[T],...t?.nodes,...h?.nodes},stop:o=>{h.stop(o),t?.stop(o),g?.stop(o),T.stop(o)},triggerRelease:o=>{}}}function aw(i=1,p=.05,x=220,M=0,R=0,w=.1,v=0,T=1,t=0,h=0,g=0,o=0,a=0,r=0,e=0,s=0,u=0,n=1,l=0,c=0){let d=Math.PI*2,f=ie().sampleRate,m=N=>N>0?1:-1,y=t*=500*d/f/f,S=x*=(1+p*2*Math.random()-p)*d/f,C=[],E=0,P=0,A=0,F=1,G=0,D=0,L=0,b,I;for(M=M*f+9,l*=f,R*=f,w*=f,u*=f,h*=500*d/f**3,e*=d/f,g*=d/f,o*=f,a=a*f|0,I=M+l+R+w+u|0;A<I;C[A++]=L)++D%(s*100|0)||(L=v?v>1?v>2?v>3?Math.sin((E%d)**3):Math.max(Math.min(Math.tan(E),1),-1):1-(2*E/d%2+2)%2:1-4*Math.abs(Math.round(E/d)-E/d):Math.sin(E),L=(a?1-c+c*Math.sin(d*A/a):1)*m(L)*Math.abs(L)**T*i*1*(A<M?A/M:A<M+l?1-(A-M)/l*(1-n):A<M+l+R?n:A<I-u?(I-A-u)/w*n:0),L=u?L/2+(u>A?0:(A<I-u?1:(I-A)/u)*C[A-u|0]/2):L),b=(x+=t+=h)*Math.cos(e*P++),E+=b-b*r*(1-(Math.sin(A)+1)*1e9%2),F&&++F>o&&(x+=g,S+=g,F=0),a&&!(++G%a)&&(x=S,t=y,F||=1);return C}const j2=(i,p)=>{let{s:x,note:M=36,freq:R,zrand:w=0,attack:v=0,decay:T=0,sustain:t=.8,release:h=.1,curve:g=1,slide:o=0,deltaSlide:a=0,pitchJump:r=0,pitchJumpTime:e=0,lfo:s=0,znoise:u=0,zmod:n=0,zcrush:l=0,zdelay:c=0,tremolo:d=0,duration:f=.2,zzfx:m}=i;const y=Math.max(f-v-T,0);typeof M=="string"&&(M=$r(M)),!R&&typeof M=="number"&&(R=s2(M)),x=x.replace("z_","");const S=["sine","triangle","sawtooth","tan","noise"].indexOf(x)||0;g=x==="square"?0:g;const C=aw(...m||[.25,w,R,v,y,h,S,g,o,a,r,e,s,u,n,l,c,t,T,d]),E=ie(),P=E.createBuffer(1,C.length,E.sampleRate);P.getChannelData(0).set(C);const A=ie().createBufferSource();return A.buffer=P,A.start(p),{node:A}};function ow(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(i=>{Mi(i,(p,x,M)=>{const{node:R}=j2({s:i,...x},p);return Bi(R,()=>{ue(R),M()}),{node:R,nodes:{source:[R]},stop:()=>{}}},{type:"synth",prebake:!0})})}let ks;async function Q2(i,p){const x=`dsp-worklet-${Date.now()}`,M=`${p}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${x}', MyProcessor);
`,R=`data:text/javascript;base64,${btoa(M)}`;await i.audioWorklet.addModule(R);const w=new AudioWorkletNode(i,x);return{node:w,stop:()=>w.port.postMessage("stop")}}const $2=()=>{ks&&(ks?.stop(),ks?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",i=>{i.data==="strudel-stop"?$2():i.data?.dough&&ks?.node.port.postMessage(i.data)});const hw=async i=>{const p=ie();$2(),ks=await Q2(p,i),ks.node.connect(p.destination)};function q2(i,p,x,M){window.postMessage({time:M,dough:i.value,currentTime:p,duration:i.duration,cps:x})}let Ln;function uw(){const i=ie();Ln=ke(i,"dough-processor",{},{outputChannelCount:[2]}),Y2(Ln)}const Mr=new Map,el=new Map;Mt.prototype.supradough=function(){return this.onTrigger((i,p,x,M)=>{i.value._begin=M,i.value._duration=i.duration/x,!Ln&&uw();const R=(i.value.bank?i.value.bank+"_":"")+i.value.s,w=i.value.n??0,v=`${R}:${w}`;if(Mr.has(R)&&(i.value.s=v),Mr.has(R)&&!el.has(v)){const T=Mr.get(R),t=T[w%T.length];console.log(`load ${v} from ${t}`);const h=dw(t);el.set(v,h),h.then(({channels:g,sampleRate:o})=>Ln.port.postMessage({sample:v,channels:g,sampleRate:o}))}Ln.port.postMessage({spawn:i.value})},1)};function lw(i,p=""){if(!i.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[x,M]=i.split("github:");return M=M.endsWith("/")?M.slice(0,-1):M,M.split("/").length===2&&(M+="/main"),`https://raw.githubusercontent.com/${M}/${p}`}async function fw(i){if(i.startsWith("github:")&&(i=lw(i,"strudel.json")),i.startsWith("local:")&&(i="http://localhost:5432"),i.startsWith("shabda:")){let[M,R]=i.split("shabda:");i=`https://shabda.ndre.gr/${R}.json?strudel=1`}if(i.startsWith("shabda/speech")){let[M,R]=i.split("shabda/speech");R=R.startsWith("/")?R.substring(1):R;let[w,v]=R.split(":"),T="f",t="en-GB";w&&([t,T]=w.split("/")),i=`https://shabda.ndre.gr/speech/${v}.json?gender=${T}&language=${t}&strudel=1'`}if(typeof fetch!="function")return;const p=i.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const x=await fetch(i).then(M=>M.json()).catch(M=>{throw console.error(M),new Error(`error loading "${i}"`)});return[x,x._base||p]}async function dw(i){const p=await fetch(i).then(M=>M.arrayBuffer()).then(M=>ie().decodeAudioData(M));let x=[];for(let M=0;M<p.numberOfChannels;M++)x.push(p.getChannelData(M));return{channels:x,sampleRate:p.sampleRate}}async function _2(i,p){if(typeof i=="string"){const[x,M]=await fw(i);return _2(x,M)}Object.entries(i).map(async([x,M])=>{x!=="_base"&&(M=M.map(R=>p+R),Mr.set(x,M))})}const cw="data:text/javascript;base64,dmFyIGh0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgbnQ9KHUsbSxmKT0+bSBpbiB1P2h0KHUsbSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Zn0pOnVbbV09Zjt2YXIgZT0odSxtLGYpPT5udCh1LHR5cGVvZiBtIT0ic3ltYm9sIj9tKyIiOm0sZik7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxtPU1hdGguUEkvdSxmPTEvdTtsZXQgVj1oPT5NYXRoLnBvdyhoLDIpO2NvbnN0IE89KGgscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaCxzKSx0KTtmdW5jdGlvbiBfKGgpe3JldHVybiBWKGgpfWZ1bmN0aW9uIFQoaCxzLHQpe2NvbnN0IGk9TWF0aC5zaW4oKDEtdCkqLjUqTWF0aC5QSSksbj1NYXRoLnNpbih0Ki41Kk1hdGguUEkpO3JldHVybiBoKmkrcypufWNsYXNzIGd7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNpbih0aGlzLnBoYXNlKjIqTWF0aC5QSSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2Urcy91KSUxLHR9fWNsYXNzIEl7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTEqMi0xfX1mdW5jdGlvbiBNKGgscyl7cmV0dXJuIGg8cz8oaC89cyxoK2gtaCpoLTEpOmg+MS1zPyhoPShoLTEpL3MsaCpoK2graCsxKTowfWNsYXNzIFN7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5waGFzZT1zLnBoYXNlPz8wfXVwZGF0ZShzKXtjb25zdCB0PXMvdTtsZXQgaT1NKHRoaXMucGhhc2UsdCksbj0yKnRoaXMucGhhc2UtMS1pO3JldHVybiB0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2UtPTEpLG59fWZ1bmN0aW9uIHooaCxzLHQpe3JldHVybiBoPDI/MDooKG4sbCxyKT0+cioobC1uKStuKSgtcyouNSxzKi41LHQvKGgtMSkpfWZ1bmN0aW9uIEYoaCxzKXtyZXR1cm4gaCpNYXRoLnBvdygyLHMvMTIpfWNsYXNzIEx7Y29uc3RydWN0b3Iocz17fSl7dGhpcy52b2ljZXM9cy52b2ljZXM/PzUsdGhpcy5mcmVxc3ByZWFkPXMuZnJlcXNwcmVhZD8/LjIsdGhpcy5wYW5zcHJlYWQ9cy5wYW5zcHJlYWQ/Py40LHRoaXMucGhhc2U9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZvaWNlcykubWFwKCgpPT5NYXRoLnJhbmRvbSgpKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNxcnQoMS10aGlzLnBhbnNwcmVhZCksaT1NYXRoLnNxcnQodGhpcy5wYW5zcHJlYWQpO2xldCBuPTAsbD0wO2ZvcihsZXQgcj0wO3I8dGhpcy52b2ljZXM7cisrKXtjb25zdCBhPUYocyx6KHRoaXMudm9pY2VzLHRoaXMuZnJlcXNwcmVhZCxyKSkvdSxjPShyJjEpPT0xO2xldCBkPXQ7YyYmKGQ9aSk7bGV0IGI9TSh0aGlzLnBoYXNlW3JdLGEpLEU9Mip0aGlzLnBoYXNlW3JdLTEtYjtuPW4rRSpkLGw9bCtFKmQsdGhpcy5waGFzZVtyXSs9YSx0aGlzLnBoYXNlW3JdPjEmJih0aGlzLnBoYXNlW3JdLT0xKX1yZXR1cm4gbitsfX1jbGFzcyBre2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMpe3RoaXMucGhhc2UrPWYqcztsZXQgdD10aGlzLnBoYXNlJTE7cmV0dXJuKHQ8LjU/Mip0OjEtMioodC0uNSkpKjItMX19Y2xhc3MgcXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiczAiLDApO2UodGhpcywiczEiLDApfXVwZGF0ZShzLHQsaT0wKXtpPU1hdGgubWF4KGksMCksdD1NYXRoLm1pbih0LDJlNCk7bGV0IG49MipNYXRoLnNpbih0Km0pO249TyhuLDAsMS4xNCk7Y29uc3Qgcj0xLU1hdGgucG93KC41LChpKy4xMjUpLy4xMjUpKm47cmV0dXJuIHRoaXMuczA9cip0aGlzLnMwLW4qdGhpcy5zMStuKnMsdGhpcy5zMT1yKnRoaXMuczErbip0aGlzLnMwLHRoaXMuczF9fWNsYXNzIEN7Y29uc3RydWN0b3Iocz0wKXt0aGlzLnBoYXNlPXN9c2F3KHMsdCl7bGV0IGk9KHRoaXMucGhhc2UrcyklMSxuPU0oaSx0KTtyZXR1cm4gMippLTEtbn11cGRhdGUocyx0PS41KXtjb25zdCBpPXMvdTtsZXQgbj10aGlzLnNhdygwLGkpLXRoaXMuc2F3KHQsaSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2UraSklMSxuK3QqMi0xfX1jbGFzcyBOe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMsdD0uNSl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTE8dD8xOi0xfX1jbGFzcyBQe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ1cGRhdGUiLHM9Pk1hdGgucmFuZG9tKCk8cypmP01hdGgucmFuZG9tKCk6MCl9fWNsYXNzIEd7dXBkYXRlKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkqMi0xfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy5vdXQ9MH11cGRhdGUoKXtsZXQgcz1NYXRoLnJhbmRvbSgpKjItMTtyZXR1cm4gdGhpcy5vdXQ9KHRoaXMub3V0Ky4wMipzKS8xLjAyLHRoaXMub3V0fX1jbGFzcyBCe2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHM9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCtzKi4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErcyouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMitzKi4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3MqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCtzKi41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtcyouMDE2ODk4O2NvbnN0IHQ9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNitzKi41MzYyO3JldHVybiB0aGlzLmI2PXMqLjExNTkyNix0Ki4xMX19Y2xhc3MgJHtjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDEpfXVwZGF0ZShzKXt0aGlzLnBoYXNlKz1mKnM7bGV0IHQ9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHR9fWZ1bmN0aW9uIHgoaCxzLHQsaT0xKXtpZihoPD0wKXJldHVybiBzO2lmKGg+PTEpcmV0dXJuIHQ7bGV0IG47cmV0dXJuIGk9PT0wP249aDppPjA/bj1NYXRoLnBvdyhoLGkpOm49MS1NYXRoLnBvdygxLWgsLWkpLHMrKHQtcykqbn1jbGFzcyB2e2NvbnN0cnVjdG9yKHM9e30pe3RoaXMuc3RhdGU9Im9mZiIsdGhpcy5zdGFydFRpbWU9MCx0aGlzLnN0YXJ0VmFsPTAsdGhpcy5kZWNheUN1cnZlPXMuZGVjYXlDdXJ2ZT8/MX11cGRhdGUocyx0LGksbixsLHIpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcD1zLXRoaXMuc3RhcnRUaW1lO3JldHVybiBwPmk/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1zLDEpOngocC9pLHRoaXMuc3RhcnRWYWwsMSwxKX1jYXNlImRlY2F5Ijp7bGV0IHA9cy10aGlzLnN0YXJ0VGltZSxhPXgocC9uLDEsbCwtdGhpcy5kZWNheUN1cnZlKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWEsYSk6cD5uPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1zLGwpOmF9Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1sKSxsO2Nhc2UicmVsZWFzZSI6e2xldCBwPXMtdGhpcy5zdGFydFRpbWU7aWYocD5yKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IGE9eChwL3IsdGhpcy5zdGFydFZhbCwwLC10aGlzLmRlY2F5Q3VydmUpO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1hKSxhfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn19Y29uc3QgVz0xMDtjbGFzcyBSe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ3cml0ZUlkeCIsMCk7ZSh0aGlzLCJyZWFkSWR4IiwwKTtlKHRoaXMsImJ1ZmZlciIsbmV3IEZsb2F0MzJBcnJheShXKnUpKX13cml0ZShzLHQpe3RoaXMud3JpdGVJZHg9KHRoaXMud3JpdGVJZHgrMSkldGhpcy5idWZmZXIubGVuZ3RoLHRoaXMuYnVmZmVyW3RoaXMud3JpdGVJZHhdPXM7bGV0IGk9TWF0aC5taW4oTWF0aC5mbG9vcih1KnQpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1pLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXVwZGF0ZShzLHQpe3JldHVybiB0aGlzLndyaXRlKHMsdCksdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe2UodGhpcywiZGVsYXkiLG5ldyBSKTtlKHRoaXMsIm1vZHVsYXRvciIsbmV3IGspfXVwZGF0ZShzLHQsaSxuLGwpe2NvbnN0IHI9dGhpcy5tb2R1bGF0b3IudXBkYXRlKG4pKmwscD10aGlzLmRlbGF5LnVwZGF0ZShzLGkqKDErcikpO3JldHVybiBUKHMscCx0KX19Y2xhc3MgVXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiaG9sZCIsMCk7ZSh0aGlzLCJ0IiwwKX11cGRhdGUocyx0KXtyZXR1cm4gdGhpcy50KysldD09PTAmJih0aGlzLnQ9MCx0aGlzLmhvbGQ9cyksdGhpcy5ob2xkfX1jbGFzcyBZe3VwZGF0ZShzLHQpe3Q9TWF0aC5tYXgoMSx0KTtjb25zdCBpPU1hdGgucG93KDIsdC0xKTtyZXR1cm4gTWF0aC5yb3VuZChzKmkpL2l9fWNsYXNzIFp7dXBkYXRlKHMsdD0wLGk9MSl7aT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEsaSkpO2NvbnN0IG49TWF0aC5leHBtMSh0KTtyZXR1cm4oMStuKSpzLygxK24qTWF0aC5hYnMocykpKml9fWNsYXNzIHd7Y29uc3RydWN0b3Iocyx0LGkpe2UodGhpcywiYnVmZmVyIik7ZSh0aGlzLCJzYW1wbGVSYXRlIik7ZSh0aGlzLCJwb3MiLDApO2UodGhpcywic2FtcGxlRnJlcSIsQSgpKTt0aGlzLmJ1ZmZlcj1zLHRoaXMuc2FtcGxlUmF0ZT10LHRoaXMuZHVyYXRpb249dGhpcy5idWZmZXIubGVuZ3RoL3RoaXMuc2FtcGxlUmF0ZSx0aGlzLnNwZWVkPXUvdGhpcy5zYW1wbGVSYXRlLGkmJih0aGlzLnNwZWVkKj10aGlzLmR1cmF0aW9uKX11cGRhdGUocyl7aWYodGhpcy5wb3M+PXRoaXMuYnVmZmVyLmxlbmd0aClyZXR1cm4gMDtjb25zdCB0PXMvdGhpcy5zYW1wbGVGcmVxKnRoaXMuc3BlZWQ7bGV0IGk9dGhpcy5idWZmZXJbTWF0aC5mbG9vcih0aGlzLnBvcyldO3JldHVybiB0aGlzLnBvcz10aGlzLnBvcyt0LGl9fWUodywic2FtcGxlcyIsbmV3IE1hcCk7Y29uc3QgeT0oaCxzPSJsaW5lYXIiLHQpPT57Y29uc3RbcixwLGEsY109aDtpZihyPT1udWxsJiZwPT1udWxsJiZhPT1udWxsJiZjPT1udWxsKXJldHVybiB0Pz9bLjAwMSwuMDAxLDEsLjAxXTtjb25zdCBkPWE/PyhyIT1udWxsJiZwPT1udWxsfHxyPT1udWxsJiZwPT1udWxsPzE6LjAwMSk7cmV0dXJuW01hdGgubWF4KHI/PzAsLjAwMSksTWF0aC5tYXgocD8/MCwuMDAxKSxNYXRoLm1pbihkLDEpLE1hdGgubWF4KGM/PzAsLjAxKV19O2xldCBEPXtzaW5lOmcsc2F3OlMsemF3Okksc2F3dG9vdGg6Uyx6YXd0b290aDpJLHN1cGVyc2F3OkwsdHJpOmssdHJpYW5nbGU6ayxwdWxzZTpDLHNxdWFyZTpDLHB1bHplOk4sZHVzdDpQLGNyYWNrbGU6UCxpbXB1bHNlOiQsd2hpdGU6Ryxicm93bjpqLHBpbms6Qn07Y29uc3QgSD17Y2hvcnVzOjAsbm90ZTo0OCxzOiJ0cmlhbmdsZSIsYmFuazoiIixnYWluOjEscG9zdGdhaW46MSx2ZWxvY2l0eToxLGRlbnNpdHk6Ii4wMyIsZnR5cGU6IjEyZGIiLGZhbmNob3I6MCxyZXNvbmFuY2U6MCxocmVzb25hbmNlOjAsYmFuZHE6MCxjaGFubmVsczpbMSwyXSxwaGFzZXJkZXB0aDouNzUsc2hhcGV2b2w6MSxkaXN0b3J0dm9sOjEsZGVsYXk6MCxieXRlQmVhdEV4cHJlc3Npb246IjAiLGRlbGF5ZmVlZGJhY2s6LjUsZGVsYXlzcGVlZDoxLGRlbGF5dGltZTouMjUsb3JiaXQ6MSxpOjEsZmZ0OjgsejoidHJpYW5nbGUiLHBhbjouNSxmbWg6MSxmbWVudjowLHNwZWVkOjEscHc6LjV9O2xldCBvPWg9PkhbaF07Y29uc3QgSj17YzowLGQ6MixlOjQsZjo1LGc6NyxhOjksYjoxMX0sSz17IiMiOjEsYjotMSxzOjEsZjotMX0sUT0oaCxzPTMpPT57dmFyIGE7bGV0W3QsaT0iIixuPSIiXT0oKGE9U3RyaW5nKGgpLm1hdGNoKC9eKFthLWdBLUddKShbI2JzZl0qKShbMC05XSopJC8pKT09bnVsbD92b2lkIDA6YS5zbGljZSgxKSl8fFtdO2lmKCF0KXRocm93IG5ldyBFcnJvcignbm90IGEgbm90ZTogIicraCsnIicpO2NvbnN0IGw9Slt0LnRvTG93ZXJDYXNlKCldLHI9KGk9PW51bGw/dm9pZCAwOmkuc3BsaXQoIiIpLnJlZHVjZSgoYyxkKT0+YytLW2RdLDApKXx8MDtyZXR1cm4oTnVtYmVyKG58fHMpKzEpKjEyK2wrcn0sdHQ9aD0+TWF0aC5wb3coMiwoaC02OSkvMTIpKjQ0MCxBPWg9PihoPWh8fG8oIm5vdGUiKSx0eXBlb2YgaD09InN0cmluZyImJihoPVEoaCwzKSksdHQoaCkpO2NsYXNzIHN0e2NvbnN0cnVjdG9yKHMpe2UodGhpcywiaWQiLDApO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJhdHRhY2siKTtlKHRoaXMsImRlY2F5Iik7ZSh0aGlzLCJzdXN0YWluIik7ZSh0aGlzLCJyZWxlYXNlIik7ZSh0aGlzLCJfYmVnaW4iKTtlKHRoaXMsIl9kdXJhdGlvbiIpO2UodGhpcywiX3NvdW5kIik7ZSh0aGlzLCJfY2hhbm5lbHMiLDEpO2UodGhpcywiX2J1ZmZlcnMiKTtlKHRoaXMsInVuaXQiKTtlKHRoaXMsIl9wZW52Iik7ZSh0aGlzLCJwZW52Iik7ZSh0aGlzLCJwYXR0YWNrIik7ZSh0aGlzLCJwZGVjYXkiKTtlKHRoaXMsInBzdXN0YWluIik7ZSh0aGlzLCJwcmVsZWFzZSIpO2UodGhpcywidmliIik7ZSh0aGlzLCJfdmliIik7ZSh0aGlzLCJ2aWJtb2QiKTtlKHRoaXMsIl9mbSIpO2UodGhpcywiZm1oIik7ZSh0aGlzLCJmbWkiKTtlKHRoaXMsIl9mbWVudiIpO2UodGhpcywiZm1hdHRhY2siKTtlKHRoaXMsImZtZGVjYXkiKTtlKHRoaXMsImZtc3VzdGFpbiIpO2UodGhpcywiZm1yZWxlYXNlIik7ZSh0aGlzLCJfbHBlbnYiKTtlKHRoaXMsImxwZW52Iik7ZSh0aGlzLCJscGF0dGFjayIpO2UodGhpcywibHBkZWNheSIpO2UodGhpcywibHBzdXN0YWluIik7ZSh0aGlzLCJscHJlbGVhc2UiKTtlKHRoaXMsIl9ocGVudiIpO2UodGhpcywiaHBlbnYiKTtlKHRoaXMsImhwYXR0YWNrIik7ZSh0aGlzLCJocGRlY2F5Iik7ZSh0aGlzLCJocHN1c3RhaW4iKTtlKHRoaXMsImhwcmVsZWFzZSIpO2UodGhpcywiX2JwZW52Iik7ZSh0aGlzLCJicGVudiIpO2UodGhpcywiYnBhdHRhY2siKTtlKHRoaXMsImJwZGVjYXkiKTtlKHRoaXMsImJwc3VzdGFpbiIpO2UodGhpcywiYnByZWxlYXNlIik7ZSh0aGlzLCJjdXRvZmYiKTtlKHRoaXMsImhjdXRvZmYiKTtlKHRoaXMsImJhbmRmIik7ZSh0aGlzLCJjb2Fyc2UiKTtlKHRoaXMsImNydXNoIik7ZSh0aGlzLCJkaXN0b3J0Iik7ZSh0aGlzLCJmcmVxIik7ZSh0aGlzLCJub3RlIik7ZSh0aGlzLCJfbHBmIik7ZSh0aGlzLCJfaHBmIik7ZSh0aGlzLCJfYnBmIik7ZSh0aGlzLCJfY2hvcnVzIik7ZSh0aGlzLCJfY29hcnNlIik7ZSh0aGlzLCJfY3J1c2giKTtlKHRoaXMsIl9kaXN0b3J0Iik7dmFyIGksbixsLHIscCxhLGM7dGhpcy5mcmVxPz8odGhpcy5mcmVxPUEocy5ub3RlKSksdGhpcy5fYmVnaW49cy5fYmVnaW4sdGhpcy5fZHVyYXRpb249cy5fZHVyYXRpb24sdGhpcy5yZWxlYXNlPXMucmVsZWFzZT8/MDtsZXQgdD10aGlzO2lmKE9iamVjdC5hc3NpZ24odCxzKSx0LnM9dC5zPz9vKCJzIiksdC5nYWluPV8odC5nYWluPz9vKCJnYWluIikpLHQudmVsb2NpdHk9Xyh0LnZlbG9jaXR5Pz9vKCJ2ZWxvY2l0eSIpKSx0LnBvc3RnYWluPV8odC5wb3N0Z2Fpbj8/bygicG9zdGdhaW4iKSksdC5kZW5zaXR5PXQuZGVuc2l0eT8/bygiZGVuc2l0eSIpLHQuZmFuY2hvcj10LmZhbmNob3I/P28oImZhbmNob3IiKSx0LmRyaXZlPXQuZHJpdmU/Py42OSx0LnBoYXNlcmRlcHRoPXQucGhhc2VyZGVwdGg/P28oInBoYXNlcmRlcHRoIiksdC5zaGFwZXZvbD1fKHQuc2hhcGV2b2w/P28oInNoYXBldm9sIikpLHQuZGlzdG9ydHZvbD1fKHQuZGlzdG9ydHZvbD8/bygiZGlzdG9ydHZvbCIpKSx0Lmk9dC5pPz9vKCJpIiksdC5jaG9ydXM9dC5jaG9ydXM/P28oImNob3J1cyIpLHQuZmZ0PXQuZmZ0Pz9vKCJmZnQiKSx0LnBhbj10LnBhbj8/bygicGFuIiksdC5vcmJpdD10Lm9yYml0Pz9vKCJvcmJpdCIpLHQuZm1lbnY9dC5mbWVudj8/bygiZm1lbnYiKSx0LnJlc29uYW5jZT10LnJlc29uYW5jZT8/bygicmVzb25hbmNlIiksdC5ocmVzb25hbmNlPXQuaHJlc29uYW5jZT8/bygiaHJlc29uYW5jZSIpLHQuYmFuZHE9dC5iYW5kcT8/bygiYmFuZHEiKSx0LnNwZWVkPXQuc3BlZWQ/P28oInNwZWVkIiksdC5wdz10LnB3Pz9vKCJwdyIpLFt0LmF0dGFjayx0LmRlY2F5LHQuc3VzdGFpbix0LnJlbGVhc2VdPXkoW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV0pLHQuX2hvbGRFbmQ9dC5fYmVnaW4rdC5fZHVyYXRpb24sdC5fZW5kPXQuX2hvbGRFbmQrdC5yZWxlYXNlKy4wMSx0LmZtaSYmKHQucz09PSJzYXcifHx0LnM9PT0ic2F3dG9vdGgiKSYmKHQucz0iemF3IiksRFt0LnNdKXtjb25zdCBkPURbdC5zXTt0Ll9zb3VuZD1uZXcgZCx0Ll9jaGFubmVscz0xfWVsc2UgaWYody5zYW1wbGVzLmhhcyh0LnMpKXtjb25zdCBkPXcuc2FtcGxlcy5nZXQodC5zKTt0Ll9idWZmZXJzPVtdLHQuX2NoYW5uZWxzPWQuY2hhbm5lbHMubGVuZ3RoO2ZvcihsZXQgYj0wO2I8dC5fY2hhbm5lbHM7YisrKXQuX2J1ZmZlcnMucHVzaChuZXcgdyhkLmNoYW5uZWxzW2JdLGQuc2FtcGxlUmF0ZSx0LnVuaXQ9PT0iYyIpKX1lbHNlIGNvbnNvbGUud2Fybigic291bmQgbm90IGxvYWRlZCIsdC5zKTt0LnBlbnYmJih0Ll9wZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV09eShbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV0pKSx0LnZpYiYmKHQuX3ZpYj1uZXcgZyx0LnZpYm1vZD10LnZpYm1vZD8/bygidmlibW9kIikpLHQuZm1pJiYodC5fZm09bmV3IGcsdC5mbWg9dC5mbWg/P28oImZtaCIpLHQuZm1lbnYmJih0Ll9mbWVudj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXT15KFt0LmZtYXR0YWNrLHQuZm1kZWNheSx0LmZtc3VzdGFpbix0LmZtcmVsZWFzZV0pKSksdC5fYWRzcj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksdC5kZWxheT1fKHQuZGVsYXk/P28oImRlbGF5IikpLHQuZGVsYXlmZWVkYmFjaz10LmRlbGF5ZmVlZGJhY2s/P28oImRlbGF5ZmVlZGJhY2siKSx0LmRlbGF5c3BlZWQ9dC5kZWxheXNwZWVkPz9vKCJkZWxheXNwZWVkIiksdC5kZWxheXRpbWU9dC5kZWxheXRpbWU/P28oImRlbGF5dGltZSIpLHQubHBlbnYmJih0Ll9scGVudj1uZXcgdih7ZGVjYXlDdXJ2ZTo0fSksW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXT15KFt0LmxwYXR0YWNrLHQubHBkZWNheSx0Lmxwc3VzdGFpbix0LmxwcmVsZWFzZV0pKSx0LmhwZW52JiYodC5faHBlbnY9bmV3IHYoe2RlY2F5Q3VydmU6NH0pLFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV09eShbdC5ocGF0dGFjayx0LmhwZGVjYXksdC5ocHN1c3RhaW4sdC5ocHJlbGVhc2VdKSksdC5icGVudiYmKHQuX2JwZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdPXkoW3QuYnBhdHRhY2ssdC5icGRlY2F5LHQuYnBzdXN0YWluLHQuYnByZWxlYXNlXSkpLHQuX2Nob3J1cz10LmNob3J1cz9bXTpudWxsLHQuX2xwZj10LmN1dG9mZj9bXTpudWxsLHQuX2hwZj10LmhjdXRvZmY/W106bnVsbCx0Ll9icGY9dC5iYW5kZj9bXTpudWxsLHQuX2NvYXJzZT10LmNvYXJzZT9bXTpudWxsLHQuX2NydXNoPXQuY3J1c2g/W106bnVsbCx0Ll9kaXN0b3J0PXQuZGlzdG9ydD9bXTpudWxsO2ZvcihsZXQgZD0wO2Q8dGhpcy5fY2hhbm5lbHM7ZCsrKShpPXQuX2xwZik9PW51bGx8fGkucHVzaChuZXcgcSksKG49dC5faHBmKT09bnVsbHx8bi5wdXNoKG5ldyBxKSwobD10Ll9icGYpPT1udWxsfHxsLnB1c2gobmV3IHEpLChyPXQuX2Nob3J1cyk9PW51bGx8fHIucHVzaChuZXcgWCksKHA9dC5fY29hcnNlKT09bnVsbHx8cC5wdXNoKG5ldyBVKSwoYT10Ll9jcnVzaCk9PW51bGx8fGEucHVzaChuZXcgWSksKGM9dC5fZGlzdG9ydCk9PW51bGx8fGMucHVzaChuZXcgWil9dXBkYXRlKHMpe2lmKCF0aGlzLl9zb3VuZCYmIXRoaXMuX2J1ZmZlcnMpcmV0dXJuIDA7bGV0IHQ9KyhzPj10aGlzLl9iZWdpbiYmczw9dGhpcy5faG9sZEVuZCksaT10aGlzLmZyZXEqdGhpcy5zcGVlZDtpZih0aGlzLl9mbSYmdGhpcy5mbWghPT12b2lkIDAmJnRoaXMuZm1pIT09dm9pZCAwKXtsZXQgYT10aGlzLmZtaTtpZih0aGlzLl9mbWVudil7Y29uc3QgYj10aGlzLl9mbWVudi51cGRhdGUocyx0LHRoaXMuZm1hdHRhY2ssdGhpcy5mbWRlY2F5LHRoaXMuZm1zdXN0YWluLHRoaXMuZm1yZWxlYXNlKTthPXRoaXMuZm1lbnYqYiphfWNvbnN0IGM9aSp0aGlzLmZtaCxkPWMqYTtpPWkrdGhpcy5fZm0udXBkYXRlKGMpKmR9aWYodGhpcy5fdmliJiZ0aGlzLnZpYm1vZCE9PXZvaWQgMCYmKGk9aSoyKioodGhpcy5fdmliLnVwZGF0ZSh0aGlzLnZpYikqdGhpcy52aWJtb2QvMTIpKSx0aGlzLl9wZW52JiZ0aGlzLnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fcGVudi51cGRhdGUocyx0LHRoaXMucGF0dGFjayx0aGlzLnBkZWNheSx0aGlzLnBzdXN0YWluLHRoaXMucHJlbGVhc2UpO2k9aSthKnRoaXMucGVudn1sZXQgbj10aGlzLmN1dG9mZjtpZihuIT09dm9pZCAwJiZ0aGlzLl9scGVudil7Y29uc3QgYT10aGlzLl9scGVudi51cGRhdGUocyx0LHRoaXMubHBhdHRhY2ssdGhpcy5scGRlY2F5LHRoaXMubHBzdXN0YWluLHRoaXMubHByZWxlYXNlKTtuPXRoaXMubHBlbnYqYSpuK259bGV0IGw9dGhpcy5oY3V0b2ZmO2lmKGwhPT12b2lkIDAmJnRoaXMuX2hwZW52JiZ0aGlzLmhwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2hwZW52LnVwZGF0ZShzLHQsdGhpcy5ocGF0dGFjayx0aGlzLmhwZGVjYXksdGhpcy5ocHN1c3RhaW4sdGhpcy5ocHJlbGVhc2UpO2w9MioqdGhpcy5ocGVudiphKmwrbH1sZXQgcj10aGlzLmJhbmRmO2lmKHIhPT12b2lkIDAmJnRoaXMuX2JwZW52JiZ0aGlzLmJwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2JwZW52LnVwZGF0ZShzLHQsdGhpcy5icGF0dGFjayx0aGlzLmJwZGVjYXksdGhpcy5icHN1c3RhaW4sdGhpcy5icHJlbGVhc2UpO3I9MioqdGhpcy5icGVudiphKnIrcn1jb25zdCBwPXRoaXMuX2Fkc3IudXBkYXRlKHMsdCx0aGlzLmF0dGFjayx0aGlzLmRlY2F5LHRoaXMuc3VzdGFpbix0aGlzLnJlbGVhc2UpO2ZvcihsZXQgYT0wO2E8dGhpcy5fY2hhbm5lbHM7YSsrKXtpZih0aGlzLl9zb3VuZCYmdGhpcy5zPT09InB1bHNlIj90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSx0aGlzLnB3KTp0aGlzLl9zb3VuZD90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSk6dGhpcy5fYnVmZmVycyYmKHRoaXMub3V0W2FdPXRoaXMuX2J1ZmZlcnNbYV0udXBkYXRlKGkpKSx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLmdhaW4qdGhpcy52ZWxvY2l0eSx0aGlzLl9jaG9ydXMpe2NvbnN0IGM9dGhpcy5fY2hvcnVzW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNob3J1cywuMDMrLjA1KmEsMSwuMTEpO3RoaXMub3V0W2FdPWMrdGhpcy5vdXRbYV19dGhpcy5fbHBmJiYodGhpcy5fbHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxuLHRoaXMucmVzb25hbmNlKSx0aGlzLm91dFthXT10aGlzLl9scGZbYV0uczEpLHRoaXMuX2hwZiYmKHRoaXMuX2hwZlthXS51cGRhdGUodGhpcy5vdXRbYV0sbCx0aGlzLmhyZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdLXRoaXMuX2hwZlthXS5zMSksdGhpcy5fYnBmJiYodGhpcy5fYnBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxyLHRoaXMuYmFuZHEpLHRoaXMub3V0W2FdPXRoaXMuX2JwZlthXS5zMCksdGhpcy5fY29hcnNlJiYodGhpcy5vdXRbYV09dGhpcy5fY29hcnNlW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNvYXJzZSkpLHRoaXMuX2NydXNoJiYodGhpcy5vdXRbYV09dGhpcy5fY3J1c2hbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY3J1c2gpKSx0aGlzLl9kaXN0b3J0JiYodGhpcy5vdXRbYV09dGhpcy5fZGlzdG9ydFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5kaXN0b3J0LHRoaXMuZGlzdG9ydHZvbCkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnAsdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qdGhpcy5wb3N0Z2Fpbix0aGlzLl9idWZmZXJzfHwodGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qLjIpfWlmKHRoaXMuX2NoYW5uZWxzPT09MSYmKHRoaXMub3V0WzFdPXRoaXMub3V0WzBdKSx0aGlzLnBhbiE9PS41KXtjb25zdCBhPXRoaXMucGFuKk1hdGguUEkvMjt0aGlzLm91dFswXT10aGlzLm91dFswXSpNYXRoLmNvcyhhKSx0aGlzLm91dFsxXT10aGlzLm91dFsxXSpNYXRoLnNpbihhKX19fWNsYXNzIGV0e2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe2UodGhpcywidm9pY2VzIixbXSk7ZSh0aGlzLCJ2aWQiLDApO2UodGhpcywicSIsW10pO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJkZWxheXNlbmQiLFswLDBdKTtlKHRoaXMsImRlbGF5dGltZSIsbygiZGVsYXl0aW1lIikpO2UodGhpcywiZGVsYXlmZWVkYmFjayIsbygiZGVsYXlmZWVkYmFjayIpKTtlKHRoaXMsImRlbGF5c3BlZWQiLG8oImRlbGF5c3BlZWQiKSk7ZSh0aGlzLCJ0IiwwKTt0aGlzLnNhbXBsZVJhdGU9cyx0aGlzLnQ9TWF0aC5mbG9vcih0KnMpLHRoaXMuX2RlbGF5TD1uZXcgUix0aGlzLl9kZWxheVI9bmV3IFJ9bG9hZFNhbXBsZShzLHQsaSl7dy5zYW1wbGVzLnNldChzLHtjaGFubmVsczp0LHNhbXBsZVJhdGU6aX0pfXNjaGVkdWxlU3Bhd24ocyl7aWYocy5fYmVnaW49PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJbZG91Z2hdOiBzY2hlZHVsZVNwYXduIGV4cGVjdGVkIF9iZWdpbiB0byBiZSBzZXQiKTtpZihzLl9kdXJhdGlvbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2R1cmF0aW9uIHRvIGJlIHNldCIpO3Muc2FtcGxlUmF0ZT10aGlzLnNhbXBsZVJhdGU7Y29uc3QgdD1NYXRoLmZsb29yKHMuX2JlZ2luKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTp0LHR5cGU6InNwYXduIixhcmc6c30pfXNwYXduKHMpe3MuaWQ9dGhpcy52aWQrKztjb25zdCB0PW5ldyBzdChzKTt0aGlzLnZvaWNlcy5wdXNoKHQpO2NvbnN0IGk9TWF0aC5jZWlsKHQuX2VuZCp0aGlzLnNhbXBsZVJhdGUpO3RoaXMuc2NoZWR1bGUoe3RpbWU6aSx0eXBlOiJkZXNwYXduIixhcmc6dC5pZH0pfWRlc3Bhd24ocyl7dGhpcy52b2ljZXM9dGhpcy52b2ljZXMuZmlsdGVyKHQ9PnQuaWQhPT1zKX1zY2hlZHVsZShzKXtpZighdGhpcy5xLmxlbmd0aCl7dGhpcy5xLnB1c2gocyk7cmV0dXJufWxldCB0PTA7Zm9yKDt0PHRoaXMucS5sZW5ndGgmJnRoaXMucVt0XS50aW1lPHMudGltZTspdCsrO3RoaXMucS5zcGxpY2UodCwwLHMpfXVwZGF0ZSgpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy50Oyl0aGlzW3RoaXMucVswXS50eXBlXSh0aGlzLnFbMF0uYXJnKSx0aGlzLnEuc2hpZnQoKTt0aGlzLm91dFswXT0wLHRoaXMub3V0WzFdPTA7Zm9yKGxldCBpPTA7aTx0aGlzLnZvaWNlcy5sZW5ndGg7aSsrKXRoaXMudm9pY2VzW2ldLnVwZGF0ZSh0aGlzLnQvdGhpcy5zYW1wbGVSYXRlKSx0aGlzLm91dFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdLHRoaXMub3V0WzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0sdGhpcy52b2ljZXNbaV0uZGVsYXkmJih0aGlzLmRlbGF5c2VuZFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdKnRoaXMudm9pY2VzW2ldLmRlbGF5LHRoaXMuZGVsYXlzZW5kWzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0qdGhpcy52b2ljZXNbaV0uZGVsYXksdGhpcy5kZWxheXRpbWU9dGhpcy52b2ljZXNbaV0uZGVsYXl0aW1lLHRoaXMuZGVsYXlzcGVlZD10aGlzLnZvaWNlc1tpXS5kZWxheXNwZWVkLHRoaXMuZGVsYXlmZWVkYmFjaz10aGlzLnZvaWNlc1tpXS5kZWxheWZlZWRiYWNrKTtjb25zdCBzPXRoaXMuX2RlbGF5TC51cGRhdGUodGhpcy5kZWxheXNlbmRbMF0sdGhpcy5kZWxheXRpbWUpLHQ9dGhpcy5fZGVsYXlSLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFsxXSx0aGlzLmRlbGF5dGltZSk7dGhpcy5kZWxheXNlbmRbMF09cyp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5kZWxheXNlbmRbMV09dCp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5vdXRbMF0rPXMsdGhpcy5vdXRbMV0rPXQsdGhpcy50Kyt9fWNvbnN0IGl0PShoLHMsdCk9Pk1hdGgubWluKE1hdGgubWF4KGgscyksdCk7Y2xhc3MgYXQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZG91Z2g9bmV3IGV0KHNhbXBsZVJhdGUsY3VycmVudFRpbWUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3MuZGF0YS5zcGF3bj90aGlzLmRvdWdoLnNjaGVkdWxlU3Bhd24ocy5kYXRhLnNwYXduKTpzLmRhdGEuc2FtcGxlP3RoaXMuZG91Z2gubG9hZFNhbXBsZShzLmRhdGEuc2FtcGxlLHMuZGF0YS5jaGFubmVscyxzLmRhdGEuc2FtcGxlUmF0ZSk6cy5kYXRhLnNhbXBsZXM/cy5kYXRhLnNhbXBsZXMuZm9yRWFjaCgoW3QsaSxuXSk9Pnt0aGlzLmRvdWdoLmxvYWRTYW1wbGUodCxpLG4pfSk6Y29uc29sZS5sb2coInVucmVjb2duaXplZCBldmVudCB0eXBlIixzLmRhdGEpfX1wcm9jZXNzKHMsdCxpKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtjb25zdCBuPXRbMF07Zm9yKGxldCBsPTA7bDxuWzBdLmxlbmd0aDtsKyspe3RoaXMuZG91Z2gudXBkYXRlKCk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspbltyXVtsXT1pdCh0aGlzLmRvdWdoLm91dFtyXSwtMSwxKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRvdWdoLXByb2Nlc3NvciIsYXQpfSkoKTsK",pw=cw;z2(pw);const{Pattern:vw,logger:Eo,repl:mw}=$y;t2(Eo);const tT=i=>(i.ensureObjectValue(),i.value),eT=(i,p,x,M,R)=>ta(tT(i),R,x,M,i.whole?.begin.valueOf());async function gw(i,p,x,M,R,w,v,T=void 0){let t=ie();await t.close(),t=new OfflineAudioContext(2,(M-x)/p*R,R),Gr(t),Mo(new D2(t)),await Ih({maxPolyphony:w,multiChannelOrbits:v}),Eo("[webaudio] preloading");let h=i.queryArc(x,M,{_cps:p}).sort((g,o)=>g.whole.begin.valueOf()-o.whole.begin.valueOf());for(const g of h)if(g.hasOnset())try{await ta(tT(g),(g.whole.begin.valueOf()-x)/p,g.duration/p,p,(g.whole?.begin.valueOf()-x)/p)}catch(o){zn(o,"webaudio")}return Eo("[webaudio] start rendering"),t.startRendering().then(g=>{const o=xw(g),a=new Blob([o],{type:"audio/wav"}),r=URL.createObjectURL(a),e=document.createElement("a");e.href=r,T=T?`${T}.wav`:`${new Date().toISOString()}.wav`,e.download=`${T}`,document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(r)}).finally(async()=>{Gr(null),Mo(null),H2()})}function iT(i={}){const p=i.audioContext??ie();return Gr(p),i={getTime:()=>p.currentTime,defaultOutput:eT,...i},mw(i)}vw.prototype.dough=function(){return this.onTrigger(q2,1)};function xw(i,p){p=p||{};var x=i.numberOfChannels,M=i.sampleRate,R=p.float32?3:1,w=R===3?32:16,v;return x===2?v=Tw(i.getChannelData(0),i.getChannelData(1)):v=i.getChannelData(0),yw(v,R,M,x,w)}function yw(i,p,x,M,R){var w=R/8,v=M*w,T=new ArrayBuffer(44+i.length*w),t=new DataView(T);return mr(t,0,"RIFF"),t.setUint32(4,36+i.length*w,!0),mr(t,8,"WAVE"),mr(t,12,"fmt "),t.setUint32(16,16,!0),t.setUint16(20,p,!0),t.setUint16(22,M,!0),t.setUint32(24,x,!0),t.setUint32(28,x*v,!0),t.setUint16(32,v,!0),t.setUint16(34,R,!0),mr(t,36,"data"),t.setUint32(40,i.length*w,!0),p===1?Sw(t,44,i):Cw(t,44,i),T}function Tw(i,p){for(var x=i.length+p.length,M=new Float32Array(x),R=0,w=0;R<x;)M[R++]=i[w],M[R++]=p[w],w++;return M}function Cw(i,p,x){for(var M=0;M<x.length;M++,p+=4)i.setFloat32(p,x[M],!0)}function Sw(i,p,x){for(var M=0;M<x.length;M++,p+=2){var R=Math.max(-1,Math.min(1,x[M]));i.setInt16(p,R<0?R*32768:R*32767,!0)}}function mr(i,p,x){for(var M=0;M<x.length;M++)i.setUint8(p+M,x.charCodeAt(M))}const ws=(i="test-canvas",p)=>{let{contextType:x="2d",pixelated:M=!1,pixelRatio:R=window.devicePixelRatio}={},w=document.querySelector("#"+i);if(!w){w=document.createElement("canvas"),w.id=i,w.width=window.innerWidth*R,w.height=window.innerHeight*R,w.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",M&&(w.style.imageRendering="pixelated"),document.body.prepend(w);let v;window.addEventListener("resize",()=>{v&&clearTimeout(v),v=setTimeout(()=>{w.width=window.innerWidth*R,w.height=window.innerHeight*R},200)})}return w.getContext(x,{willReadFrequently:!0})};let Dn={};function Mw(i){Dn[i]!==void 0&&(cancelAnimationFrame(Dn[i]),delete Dn[i])}let Ji={};Mt.prototype.draw=function(i,p){if(typeof window>"u")return this;let{id:x=1,lookbehind:M=0,lookahead:R=0}=p,w=Math.max(uo(),0);Mw(x),M=Math.abs(M),Ji[x]=(Ji[x]||[]).filter(h=>!h.isInFuture(w));let v=this.queryArc(w,w+R).filter(h=>h.hasOnset());Ji[x]=Ji[x].concat(v);let T;const t=()=>{const h=uo(),g=h+R;Ji[x]=Ji[x].filter(r=>r.isInNearPast(M,h));let o=Math.max(T||g,g-1/10);const a=this.queryArc(o,g).filter(r=>r.hasOnset());Ji[x]=Ji[x].concat(a),T=g,i(Ji[x],h,g,this),Dn[x]=requestAnimationFrame(t)};return Dn[x]=requestAnimationFrame(t),this};Mt.prototype.onPaint=function(i){return this.withState(p=>(p.controls.painters||(p.controls.painters=[]),p.controls.painters.push(i),p))};Mt.prototype.getPainters=function(){let i=[];return this.queryArc(0,0,{painters:i}),i};let Ew={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function $i(){return Ew}let il="#22222210";Mt.prototype.animate=function({callback:i,sync:p=!1,smear:x=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const M=ws();let{clientWidth:R,clientHeight:w}=M.canvas;R*=window.devicePixelRatio,w*=window.devicePixelRatio;let v=x===0?"99":Number((1-x)*100).toFixed(0);v=v.length===1?`0${v}`:v,il=`#200010${v}`;const T=t=>{let h;t=Math.round(t),h=this.slow(1e3).queryArc(t,t),M.fillStyle=il,M.fillRect(0,0,R,w),h.forEach(g=>{let{x:o,y:a,w:r,h:e,s,r:u,angle:n=0,fill:l="darkseagreen"}=g.value;if(r*=R,e*=w,u!==void 0&&n!==void 0){const d=n*2*Math.PI,[f,m]=[(R-r)/2,(w-e)/2];o=f+Math.cos(d)*u*f,a=m+Math.sin(d)*u*m}else o*=R-r,a*=w-e;const c={...g.value,x:o,y:a,w:r,h:e};M.fillStyle=l,s==="rect"?M.fillRect(o,a,r,e):s==="ellipse"&&(M.beginPath(),M.ellipse(o+r/2,a+e/2,r/2,e/2,0,0,2*Math.PI),M.fill()),i&&i(M,c,g)}),window.frame=requestAnimationFrame(T)};return window.frame=requestAnimationFrame(T),xe};const{x:sT,y:CO,w:SO,h:MO,angle:EO,r:PO,fill:AO,smear:RO}=ih("x","y","w","h","angle","r","fill","smear");ct("rescale",function(i,p){return p.mul(sT(i).w(i).y(i).h(i))});ct("moveXY",function(i,p,x){return x.add(sT(i).y(p))});ct("zoomIn",function(i,p){const x=Se(1).sub(i).div(2);return p.rescale(i).move(x,x)});const Cn=(i,p,x)=>i*(x-p)+p,sl=i=>{let{value:p}=i;typeof i.value!="object"&&(p={value:p});let{note:x,n:M,freq:R,s:w}=p;if(R)return zo(R);if(x=x??M,typeof x=="string")try{return Ii(x)}catch{return 0}return typeof x=="number"?x:w?"_"+w:p};Mt.prototype.pianoroll=function(i={}){let{cycles:p=4,playhead:x=.5,overscan:M=0,hideNegative:R=!1,ctx:w=ws(),id:v=1}=i,T=-p*x,t=p*(1-x);const h=(g,o)=>(!R||g.whole.begin>=0)&&g.isWithinTime(o+T,o+t);return this.draw((g,o)=>{nT({...i,time:o,ctx:w,haps:g.filter(a=>h(a,o))})},{lookbehind:T-M,lookahead:t+M,id:v}),this};function nT({time:i,haps:p,cycles:x=4,playhead:M=.5,flipTime:R=0,flipValues:w=0,hideNegative:v=!1,inactive:T=$i().foreground,active:t=$i().foreground,background:h="transparent",smear:g=0,playheadColor:o=$i().foreground,minMidi:a=10,maxMidi:r=90,autorange:e=0,timeframe:s,fold:u=1,vertical:n=0,labels:l=!1,fill:c=1,fillActive:d=!1,strokeActive:f=!0,stroke:m,hideInactive:y=0,colorizeInactive:S=1,fontFamily:C,ctx:E,id:P}={}){const A=E.canvas.width,F=E.canvas.height;let G=-x*M,D=x*(1-M);P&&(p=p.filter(Y=>Y.hasTag(P))),s&&(console.warn("timeframe is deprecated! use from/to instead"),G=0,D=s);const L=n?F:A,b=n?A:F;let I=n?[L,0]:[0,L];const N=D-G,Z=n?[0,b]:[b,0];let U=r-a+1,W=b/U,X=[];R&&I.reverse(),w&&Z.reverse();const{min:V,max:O,values:z}=p.reduce(({min:Y,max:k,values:J},j)=>{const tt=sl(j);return{min:tt<Y?tt:Y,max:tt>k?tt:k,values:J.includes(tt)?J:[...J,tt]}},{min:1/0,max:-1/0,values:[]});e&&(a=V,r=O,U=r-a+1),X=z.sort((Y,k)=>typeof Y=="number"&&typeof k=="number"?Y-k:typeof Y=="number"?1:String(Y).localeCompare(String(k))),W=u?b/X.length:b/U,E.fillStyle=h,E.globalAlpha=1,g||(E.clearRect(0,0,A,F),E.fillRect(0,0,A,F)),p.forEach(Y=>{const k=Y.whole.begin<=i&&Y.endClipped>i;let J=m??(f&&k),j=!k&&c||k&&d;if(y&&!k)return;let tt=Y.value?.color;t=tt||t,T=S&&tt||T,tt=k?t:T,E.fillStyle=j?tt:"transparent",E.strokeStyle=tt;const{velocity:ut=1,gain:ht=1}=Y.value||{};E.globalAlpha=ut*ht;const st=(Y.whole.begin-(R?D:G))/N,dt=Cn(st,...I);let lt=Cn(Y.duration/N,0,L);const ft=sl(Y),Lt=u?X.indexOf(ft)/X.length:(Number(ft)-a)/U,Nt=Cn(Lt,...Z);let Vt=0;const pt=Cn(i/N,...I);let Pt;if(n?Pt=[Nt+1-(w?W:0),L-pt+dt+Vt+1-(R?0:lt),W-2,lt-2]:Pt=[dt-pt+Vt+1-(R?lt:0),Nt+1-(w?0:W),lt-2,W-2],J&&E.strokeRect(...Pt),j&&E.fillRect(...Pt),l){const Dt=Y.value.note??Y.value.s+(Y.value.n?`:${Y.value.n}`:""),{label:Gt,activeLabel:Ut}=Y.value,Ot=(k&&Ut||Gt)??Dt;let Wt=n?lt:W*.75;E.font=`${Wt}px ${C||"monospace"}`,E.fillStyle=j?"black":tt,E.textBaseline="top",E.fillText(Ot,...Pt)}}),E.globalAlpha=1;const B=Cn(-G/N,...I);return E.strokeStyle=o,E.beginPath(),n?(E.moveTo(0,B),E.lineTo(b,B)):(E.moveTo(B,0),E.lineTo(B,b)),E.stroke(),this}function Pw(i,p={}){let[x,M]=i;x=Math.abs(x);const R=M+x,w=R!==0?x/R:0;return{fold:1,...p,cycles:R,playhead:w}}const Aw=(i={})=>(p,x,M,R)=>nT({ctx:p,time:x,haps:M,...Pw(R,i)});Mt.prototype.punchcard=function(i){return this.onPaint(Aw(i))};Mt.prototype.wordfall=function(i){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...i})};function Rw(i,p,x,M){const R=(i-90)*Math.PI/180;return[x+Math.cos(R)*p,M+Math.sin(R)*p]}const nl=(i,p,x,M,R=0)=>Rw((i+R)*360,p*i,x,M);function rl(i){let{ctx:p,from:x=0,to:M=3,margin:R=50,cx:w=100,cy:v=100,rotate:T=0,thickness:t=R/2,color:h=$i().foreground,cap:g="round",stretch:o=1,fromOpacity:a=1,toOpacity:r=1}=i;x*=o,M*=o,T*=o,p.lineWidth=t,p.lineCap=g,p.strokeStyle=h,p.globalAlpha=a,p.beginPath();let[e,s]=nl(x,R,w,v,T);p.moveTo(e,s);const u=1/60;let n=x;for(;n<=M;){const[l,c]=nl(n,R,w,v,T);p.globalAlpha=(n-x)/(M-x)*r,p.lineTo(l,c),n+=u}p.stroke()}function Fw(i){let{stretch:p=1,size:x=80,thickness:M=x/2,cap:R="butt",inset:w=3,playheadColor:v="#ffffff",playheadLength:T=.02,playheadThickness:t=M,padding:h=0,steady:g=1,activeColor:o=$i().foreground,inactiveColor:a=$i().gutterForeground,colorizeInactive:r=0,fade:e=!0,ctx:s,time:u,haps:n,drawTime:l,id:c}=i;c&&(n=n.filter(A=>A.hasTag(c)));const[d,f]=[s.canvas.width,s.canvas.height];s.clearRect(0,0,d*2,f*2);const[m,y]=[d/2,f/2],S={margin:x/p,cx:m,cy:y,stretch:p,cap:R,thickness:M},C={...S,thickness:t,from:w-T,to:w,color:v},[E]=l,P=g*u;n.forEach(A=>{const F=A.whole.begin<=u&&A.endClipped>u,G=A.whole.begin-u+w,D=A.endClipped-u+w-h,L=A.value?.color||o,b=r||F?L:a,I=e?1-Math.abs((A.whole.begin-u)/E):1;rl({ctx:s,...S,from:G,to:D,rotate:P,color:b,fromOpacity:I,toOpacity:I})}),rl({ctx:s,...C,rotate:P})}Mt.prototype.spiral=function(i={}){return this.onPaint((p,x,M,R)=>Fw({ctx:p,time:x,haps:M,drawTime:R,...i}))};const Lw=js(36),al=(i,p,x,M)=>{M=M*Math.PI*2;const R=Math.sin(M)*x+i,w=Math.cos(M)*x+p;return[R,w]},ol=(i,p)=>.5-Math.log2(i/p)%1;function Dw({haps:i,ctx:p,id:x,hapcircles:M=1,circle:R=0,edo:w=12,root:v=Lw,thickness:T=3,hapRadius:t=6,mode:h="flake",margin:g=10}={}){const o=h==="polygon",a=h==="flake",r=p.canvas.width,e=p.canvas.height;p.clearRect(0,0,r,e);const s=$i().foreground,u=Math.min(r,e)/2-T/2-t-g,n=r/2,l=e/2;x&&(i=i.filter(d=>d.hasTag(x))),p.strokeStyle=s,p.fillStyle=s,p.globalAlpha=1,p.lineWidth=T,R&&(p.beginPath(),p.arc(n,l,u,0,2*Math.PI),p.stroke()),w&&(Array.from({length:w},(d,f)=>{const m=ol(v*Math.pow(2,f/w),v),[y,S]=al(n,l,u,m);p.beginPath(),p.arc(y,S,t,0,2*Math.PI),p.fill()}),p.stroke());let c=[];p.lineWidth=t,i.forEach(d=>{let f;try{f=Sf(d)}catch{return}const m=ol(f,v),[y,S]=al(n,l,u,m),C=d.value.color||s;p.strokeStyle=C,p.fillStyle=C;const{velocity:E=1,gain:P=1}=d.value||{},A=E*P;p.globalAlpha=A,c.push([y,S,m,C,A]),p.beginPath(),M&&(p.moveTo(y+t,S),p.arc(y,S,t,0,2*Math.PI),p.fill()),a&&(p.moveTo(n,l),p.lineTo(y,S)),p.stroke()}),p.strokeStyle=s,p.globalAlpha=1,o&&c.length&&(c=c.sort((d,f)=>d[2]-f[2]),p.beginPath(),p.moveTo(c[0][0],c[0][1]),c.forEach(([d,f,m,y,S])=>{p.strokeStyle=y,p.globalAlpha=S,p.lineTo(d,f)}),p.lineTo(c[0][0],c[0][1]),p.stroke())}Mt.prototype.pitchwheel=function(i={}){let{ctx:p=ws(),id:x=1}=i;return this.tag(x).onPaint((M,R,w)=>Dw({...i,ctx:p,haps:w.filter(v=>v.isActive(R)),id:x}))};function rT(i,{align:p=!0,color:x="white",thickness:M=3,scale:R=.25,pos:w=.75,trigger:v=0,ctx:T=ws(),id:t=1}={}){T.lineWidth=M,T.strokeStyle=x;let h=T.canvas;if(!i){T.beginPath();let s=w*h.height;T.moveTo(0,s),T.lineTo(h.width,s),T.stroke();return}const g=_r("time",t);T.beginPath();const o=i.frequencyBinCount;let a=p?Array.from(g).findIndex((s,u,n)=>u&&n[u-1]>-v&&s<=-v):0;a=Math.max(a,0);const r=h.width*1/o;let e=0;for(let s=a;s<o;s++){const u=g[s]+1,n=(w-R*(u-1))*h.height;s===0?T.moveTo(e,n):T.lineTo(e,n),e+=r}T.stroke()}function aT(i,{color:p="white",scale:x=.25,pos:M=.75,lean:R=.5,min:w=-150,max:v=0,ctx:T=ws(),id:t=1}={}){if(!i){T.beginPath();let e=M*g.height;T.moveTo(0,e),T.lineTo(g.width,e),T.stroke();return}const h=_r("frequency",t),g=T.canvas;T.fillStyle=p;const o=i.frequencyBinCount,a=g.width*1/o;let r=0;for(let e=0;e<o;e++){const s=Yr((h[e]-w)/(v-w),0,1)*x,u=s*g.height,n=(M-s*R)*g.height;T.fillRect(r,n,Math.max(a,1),u),r+=a}}function oT(i=0,p="0,0,0",x=ws()){i?(x.fillStyle=`rgba(${p},${1-i})`,x.fillRect(0,0,x.canvas.width,x.canvas.height)):x.clearRect(0,0,x.canvas.width,x.canvas.height)}Mt.prototype.fscope=function(i={}){let p=i.id??1;return this.analyze(p).draw(()=>{oT(i.smear,"0,0,0",i.ctx),Ye[p]&&aT(Ye[p],i)},{id:p})};Mt.prototype.tscope=function(i={}){let p=i.id??1;return this.analyze(p).draw(x=>{i.color=x[0]?.value?.color||$i().foreground,i.color,oT(i.smear,"0,0,0",i.ctx),rT(Ye[p],i)},{id:p})};Mt.prototype.scope=Mt.prototype.tscope;let hl={};Mt.prototype.spectrum=function(i={}){let p=i.id??1;return this.analyze(p).draw(x=>{i.color=x[0]?.value?.color||hl[p]||$i().foreground,hl[p]=i.color,ww(Ye[p],i)},{id:p})};Mt.prototype.scope=Mt.prototype.tscope;const Va=new Map;function ww(i,{thickness:p=3,speed:x=1,min:M=-80,max:R=0,ctx:w=ws(),id:v=1,color:T}={}){if(w.lineWidth=p,w.strokeStyle=T,!i)return;const t=x,h=_r("frequency",v),g=w.canvas;w.fillStyle=T;const o=i.frequencyBinCount;let a=Va.get(v)||w.getImageData(0,0,g.width,g.height);Va.set(v,a),w.clearRect(0,0,w.canvas.width,w.canvas.height),w.putImageData(a,-t,0);let r=g.width-x;for(let e=0;e<o;e++){const s=Yr((h[e]-M)/(R-M),0,1);w.globalAlpha=s;const u=Math.log(e+1)/Math.log(o)*g.height;w.fillRect(r,g.height-u,t,2)}Va.set(v,w.getImageData(0,0,g.width,g.height))}const Gw=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY:Lh,Warpmode:yo,aliasBank:HD,get analysers(){return Ye},get analysersData(){return Ss},applyFM:Zn,applyGainCurve:wi,applyParameterModulators:go,cleanupOnEnd:v2,connectBusModulator:x2,connectEnvelope:g2,connectLFO:m2,connectToDestination:Y2,createFilter:u2,distortionAlgorithms:Mh,dough:hw,doughTrigger:q2,doughsamples:_2,drawFrequencyScope:aT,drawTimeScope:rT,drywet:l2,dspWorklet:Q2,effectSend:Wn,errorLogger:zn,gainNode:Ce,getADSRValues:ni,getAnalyserById:U2,getAnalyzerData:_r,getAudioContext:ie,getAudioContextCurrentTime:kL,getAudioDevices:X2,getCachedBuffer:FD,getCompressor:h2,getDefaultValue:De,getDistortion:p2,getDistortionAlgorithm:mD,getEnvelope:o2,getFrequencyFromValue:hs,getLfo:rn,getLoadedBuffer:DD,getOscillator:J2,getParamADSR:si,getParamLfo:Sh,getPitchEnvelope:qs,getSampleBuffer:T2,getSampleBufferSource:C2,getSampleInfo:y2,getSound:ys,getSuperdoughAudioController:qr,getVibratoOscillator:_s,getWorklet:ke,getZZFX:j2,initAudio:Ih,initAudioOnFirstClick:Z2,loadBuffer:br,loadWorklets:W2,logger:Ie,get maxPolyphony(){return Dh},get multiChannelOrbits(){return wh},noises:Ch,onTriggerSample:F2,onTriggerSynth:b2,onceEnded:Bi,processSampleMap:P2,registerSampleSource:L2,registerSamplesPrefix:wD,registerSound:Mi,registerSynthSounds:K2,registerWaveTable:Fh,registerWorklet:z2,registerZZFXSounds:ow,releaseAudioNode:ue,renderPatternAudio:gw,resetDefaultValues:N2,resetDefaults:jD,resetGlobalEffects:H2,resetLoadedSounds:qD,resetSeenKeys:w2,reverseBuffer:S2,samples:R2,scheduleAtTime:aD,setAudioContext:Gr,setDefault:JD,setDefaultAudioContext:qy,setDefaultValue:bh,setDefaultValues:QD,setGainCurve:YD,setLogger:t2,setMaxPolyphony:I2,setMultiChannelOrbits:O2,setSuperdoughAudioController:Mo,setVersionDefaults:$D,soundAlias:KD,soundMap:Pi,superdough:ta,superdoughTrigger:iw,tables:ZD,waveformN:k2,webAudioTimeout:Gi,webaudioOutput:eT,webaudioRepl:iT},Symbol.toStringTag,{value:"Module"}));function bw(i,p){function x(){this.constructor=i}x.prototype=p.prototype,i.prototype=new x}function As(i,p,x,M){var R=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(R,As.prototype),R.expected=p,R.found=x,R.location=M,R.name="SyntaxError",R}bw(As,Error);function za(i,p,x){return x=x||" ",i.length>p?i:(p-=i.length,x+=x.repeat(p),i+x.slice(0,p))}As.prototype.format=function(i){var p="Error: "+this.message;if(this.location){var x=null,M;for(M=0;M<i.length;M++)if(i[M].source===this.location.source){x=i[M].text.split(/\r\n|\n|\r/g);break}var R=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(R):R,v=this.location.source+":"+w.line+":"+w.column;if(x){var T=this.location.end,t=za("",w.line.toString().length," "),h=x[R.line-1],g=R.line===T.line?T.column:h.length+1,o=g-R.column||1;p+=`
 --> `+v+`
`+t+` |
`+w.line+" | "+h+`
`+t+" | "+za("",R.column-1," ")+za("",o,"^")}else p+=`
 at `+v}return p};As.buildMessage=function(i,p){var x={literal:function(h){return'"'+R(h.text)+'"'},class:function(h){var g=h.parts.map(function(o){return Array.isArray(o)?w(o[0])+"-"+w(o[1]):w(o)});return"["+(h.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(h){return h.description}};function M(h){return h.charCodeAt(0).toString(16).toUpperCase()}function R(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+M(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+M(g)})}function w(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+M(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+M(g)})}function v(h){return x[h.type](h)}function T(h){var g=h.map(v),o,a;if(g.sort(),g.length>0){for(o=1,a=1;o<g.length;o++)g[o-1]!==g[o]&&(g[a]=g[o],a++);g.length=a}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function t(h){return h?'"'+R(h)+'"':"end of input"}return"Expected "+T(i)+" but "+t(p)+" found."};function hT(i,p){p=p!==void 0?p:{};var x={},M=p.grammarSource,R={start:Eu},w=Eu,v=".",T="-",t="0",h=",",g="|",o="[",a="]",r="{",e="}",s="%",u="<",n=">",l="!",c="(",d=")",f="/",m="*",y="?",S=":",C="..",E="^",P="struct",A="target",F="euclid",G="slow",D="rotL",L="rotR",b="fast",I="scale",N="//",Z="cat",U="$",W="setcps",X="setbpm",V="hush",O=/^[1-9]/,z=/^[eE]/,B=/^[+\-]/,Y=/^[0-9]/,k=/^[ \n\r\t\xA0]/,J=/^["']/,j=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,tt=/^[@_]/,ut=/^[^\n]/,ht=Aa("number"),st=fe(".",!1),dt=Hi([["1","9"]],!1,!1),lt=Hi(["e","E"],!1,!1),ft=Hi(["+","-"],!1,!1),Lt=fe("-",!1),Nt=fe("0",!1),Vt=Hi([["0","9"]],!1,!1),pt=Aa("whitespace"),Pt=Hi([" ",`
`,"\r","	",""],!1,!1),Dt=fe(",",!1),Gt=fe("|",!1),Ut=Hi(['"',"'"],!1,!1),Ot=Aa('a letter, a number, "-", "#", ".", "^", "_"'),Wt=Hi(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","","","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"","",["",""],["",""],"",["",""],["",""],"",["",""],"","","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","",["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","","",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"","",["",""],"",["",""],"","","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Zt=fe("[",!1),ve=fe("]",!1),Te=fe("{",!1),_t=fe("}",!1),ce=fe("%",!1),wt=fe("<",!1),Ht=fe(">",!1),he=Hi(["@","_"],!1,!1),me=fe("!",!1),te=fe("(",!1),Me=fe(")",!1),be=fe("/",!1),ei=fe("*",!1),sr=fe("?",!1),Ea=fe(":",!1),Pa=fe("..",!1),H=fe("^",!1),$=fe("struct",!1),Q=fe("target",!1),q=fe("euclid",!1),it=fe("slow",!1),vt=fe("rotL",!1),yt=fe("rotR",!1),At=fe("fast",!1),zt=fe("scale",!1),ae=fe("//",!1),we=Hi([`
`],!0,!1),Ui=fe("cat",!1),is=fe("$",!1),nr=fe("setcps",!1),rr=fe("setbpm",!1),hi=fe("hush",!1),mS=function(){return parseFloat(eM())},gS=function(K){const et=K.join("");return et==="."||et==="_"},xS=function(K){return new UM(K.join(""))},yS=function(K){return K},TS=function(K,et){return K.arguments_.stepsPerCycle=et,K},CS=function(K){return K},SS=function(K){return K.arguments_.alignment="polymeter_slowcat",K},MS=function(K){return et=>et.options_.weight=(et.options_.weight??1)+(K??2)-1},ES=function(K){return et=>{const ot=(et.options_.reps??1)+(K??2)-1;et.options_.reps=ot,et.options_.ops=et.options_.ops.filter(xt=>xt.type_!=="replicate"),et.options_.ops.push({type_:"replicate",arguments_:{amount:ot}}),et.options_.weight=ot}},PS=function(K,et,ot){return xt=>xt.options_.ops.push({type_:"bjorklund",arguments_:{pulse:K,step:et,rotation:ot}})},AS=function(K){return et=>et.options_.ops.push({type_:"stretch",arguments_:{amount:K,type:"slow"}})},RS=function(K){return et=>et.options_.ops.push({type_:"stretch",arguments_:{amount:K,type:"fast"}})},FS=function(K){return et=>et.options_.ops.push({type_:"degradeBy",arguments_:{amount:K,seed:Da++}})},LS=function(K){return et=>et.options_.ops.push({type_:"tail",arguments_:{element:K}})},DS=function(K){return et=>et.options_.ops.push({type_:"range",arguments_:{element:K}})},wS=function(K,et){const ot=new KM(K,{ops:[],weight:1,reps:1});for(const xt of et)xt(ot);return ot},GS=function(K,et){return new ur(et,"fastcat",void 0,!!K)},bS=function(K){return{alignment:"stack",list:K}},IS=function(K){return{alignment:"rand",list:K,seed:Da++}},OS=function(K){return{alignment:"feet",list:K,seed:Da++}},BS=function(K,et){return et&&et.list.length>0?new ur([K,...et.list],et.alignment,et.seed):K},XS=function(K,et){return new ur(et?[K,...et.list]:[K],"polymeter")},NS=function(K){return K},VS=function(K){return{name:"struct",args:{mini:K}}},zS=function(K){return{name:"target",args:{name:K}}},WS=function(K,et,ot){return{name:"bjorklund",args:{pulse:K,step:parseInt(et)}}},ZS=function(K){return{name:"stretch",args:{amount:K}}},YS=function(K){return{name:"shift",args:{amount:"-"+K}}},US=function(K){return{name:"shift",args:{amount:K}}},HS=function(K){return{name:"stretch",args:{amount:"1/"+K}}},KS=function(K){return{name:"scale",args:{scale:K.join("")}}},Cu=function(K,et){return et},kS=function(K,et){return et.unshift(K),new ur(et,"slowcat")},JS=function(K){return K},jS=function(K,et){return new HM(K.name,K.args,et)},QS=function(K){return K},$S=function(K){return K},qS=function(K){return new La("setcps",{value:K})},_S=function(K){return new La("setcps",{value:K/120/2})},tM=function(){return new La("hush")},rt=p.peg$currPos|0,se=rt,Is=[{line:1,column:1}],xi=rt,ar=p.peg$maxFailExpected||[],Jt=p.peg$silentFails|0,mn;if(p.startRule){if(!(p.startRule in R))throw new Error(`Can't start parsing from rule "`+p.startRule+'".');w=R[p.startRule]}function eM(){return i.substring(se,rt)}function Su(){return Ra(se,rt)}function fe(K,et){return{type:"literal",text:K,ignoreCase:et}}function Hi(K,et,ot){return{type:"class",parts:K,inverted:et,ignoreCase:ot}}function iM(){return{type:"end"}}function Aa(K){return{type:"other",description:K}}function Mu(K){var et=Is[K],ot;if(et)return et;if(K>=Is.length)ot=Is.length-1;else for(ot=K;!Is[--ot];);for(et=Is[ot],et={line:et.line,column:et.column};ot<K;)i.charCodeAt(ot)===10?(et.line++,et.column=1):et.column++,ot++;return Is[K]=et,et}function Ra(K,et,ot){var xt=Mu(K),jt=Mu(et),Re={source:M,start:{offset:K,line:xt.line,column:xt.column},end:{offset:et,line:jt.line,column:jt.column}};return Re}function $t(K){rt<xi||(rt>xi&&(xi=rt,ar=[]),ar.push(K))}function sM(K,et,ot){return new As(As.buildMessage(K,et),K,et,ot)}function Eu(){var K;return K=YM(),K}function Ki(){var K,et;return Jt++,K=rt,uM(),et=or(),et!==x?(hM(),oM(),se=K,K=mS()):(rt=K,K=x),Jt--,K===x&&Jt===0&&$t(ht),K}function nM(){var K;return i.charCodeAt(rt)===46?(K=v,rt++):(K=x,Jt===0&&$t(st)),K}function rM(){var K;return K=i.charAt(rt),O.test(K)?rt++:(K=x,Jt===0&&$t(dt)),K}function aM(){var K;return K=i.charAt(rt),z.test(K)?rt++:(K=x,Jt===0&&$t(lt)),K}function oM(){var K,et,ot,xt,jt;if(K=rt,et=aM(),et!==x){if(ot=i.charAt(rt),B.test(ot)?rt++:(ot=x,Jt===0&&$t(ft)),ot===x&&(ot=null),xt=[],jt=Os(),jt!==x)for(;jt!==x;)xt.push(jt),jt=Os();else xt=x;xt!==x?(et=[et,ot,xt],K=et):(rt=K,K=x)}else rt=K,K=x;return K}function hM(){var K,et,ot,xt;if(K=rt,et=nM(),et!==x){if(ot=[],xt=Os(),xt!==x)for(;xt!==x;)ot.push(xt),xt=Os();else ot=x;ot!==x?(et=[et,ot],K=et):(rt=K,K=x)}else rt=K,K=x;return K}function or(){var K,et,ot,xt;if(K=lM(),K===x)if(K=rt,et=rM(),et!==x){for(ot=[],xt=Os();xt!==x;)ot.push(xt),xt=Os();et=[et,ot],K=et}else rt=K,K=x;return K}function uM(){var K;return i.charCodeAt(rt)===45?(K=T,rt++):(K=x,Jt===0&&$t(Lt)),K}function lM(){var K;return i.charCodeAt(rt)===48?(K=t,rt++):(K=x,Jt===0&&$t(Nt)),K}function Os(){var K;return K=i.charAt(rt),Y.test(K)?rt++:(K=x,Jt===0&&$t(Vt)),K}function qt(){var K,et;for(Jt++,K=[],et=i.charAt(rt),k.test(et)?rt++:(et=x,Jt===0&&$t(Pt));et!==x;)K.push(et),et=i.charAt(rt),k.test(et)?rt++:(et=x,Jt===0&&$t(Pt));return Jt--,et=x,Jt===0&&$t(pt),K}function Bs(){var K,et,ot,xt;return K=rt,et=qt(),i.charCodeAt(rt)===44?(ot=h,rt++):(ot=x,Jt===0&&$t(Dt)),ot!==x?(xt=qt(),et=[et,ot,xt],K=et):(rt=K,K=x),K}function Pu(){var K,et,ot,xt;return K=rt,et=qt(),i.charCodeAt(rt)===124?(ot=g,rt++):(ot=x,Jt===0&&$t(Gt)),ot!==x?(xt=qt(),et=[et,ot,xt],K=et):(rt=K,K=x),K}function Au(){var K,et,ot,xt;return K=rt,et=qt(),i.charCodeAt(rt)===46?(ot=v,rt++):(ot=x,Jt===0&&$t(st)),ot!==x?(xt=qt(),et=[et,ot,xt],K=et):(rt=K,K=x),K}function Xs(){var K;return K=i.charAt(rt),J.test(K)?rt++:(K=x,Jt===0&&$t(Ut)),K}function hr(){var K;return Jt++,K=i.charAt(rt),j.test(K)?rt++:(K=x,Jt===0&&$t(Wt)),Jt--,K===x&&Jt===0&&$t(Ot),K}function Ru(){var K,et,ot,xt;if(K=rt,qt(),et=[],ot=hr(),ot!==x)for(;ot!==x;)et.push(ot),ot=hr();else et=x;return et!==x?(ot=qt(),se=rt,xt=gS(et),xt?xt=x:xt=void 0,xt!==x?(se=K,K=xS(et)):(rt=K,K=x)):(rt=K,K=x),K}function fM(){var K,et,ot,xt;return K=rt,qt(),i.charCodeAt(rt)===91?(et=o,rt++):(et=x,Jt===0&&$t(Zt)),et!==x?(qt(),ot=Du(),ot!==x?(qt(),i.charCodeAt(rt)===93?(xt=a,rt++):(xt=x,Jt===0&&$t(ve)),xt!==x?(qt(),se=K,K=yS(ot)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function dM(){var K,et,ot,xt,jt;return K=rt,qt(),i.charCodeAt(rt)===123?(et=r,rt++):(et=x,Jt===0&&$t(Te)),et!==x?(qt(),ot=wu(),ot!==x?(qt(),i.charCodeAt(rt)===125?(xt=e,rt++):(xt=x,Jt===0&&$t(_t)),xt!==x?(jt=cM(),jt===x&&(jt=null),qt(),se=K,K=TS(ot,jt)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function cM(){var K,et,ot;return K=rt,i.charCodeAt(rt)===37?(et=s,rt++):(et=x,Jt===0&&$t(ce)),et!==x?(ot=Ns(),ot!==x?(se=K,K=CS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function pM(){var K,et,ot,xt;return K=rt,qt(),i.charCodeAt(rt)===60?(et=u,rt++):(et=x,Jt===0&&$t(wt)),et!==x?(qt(),ot=wu(),ot!==x?(qt(),i.charCodeAt(rt)===62?(xt=n,rt++):(xt=x,Jt===0&&$t(Ht)),xt!==x?(qt(),se=K,K=SS(ot)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function Ns(){var K;return K=Ru(),K===x&&(K=fM(),K===x&&(K=dM(),K===x&&(K=pM()))),K}function Fu(){var K;return K=vM(),K===x&&(K=gM(),K===x&&(K=xM(),K===x&&(K=yM(),K===x&&(K=mM(),K===x&&(K=TM(),K===x&&(K=CM(),K===x&&(K=SM()))))))),K}function vM(){var K,et,ot;return K=rt,qt(),et=i.charAt(rt),tt.test(et)?rt++:(et=x,Jt===0&&$t(he)),et!==x?(ot=Ki(),ot===x&&(ot=null),se=K,K=MS(ot)):(rt=K,K=x),K}function mM(){var K,et,ot;return K=rt,qt(),i.charCodeAt(rt)===33?(et=l,rt++):(et=x,Jt===0&&$t(me)),et!==x?(ot=Ki(),ot===x&&(ot=null),se=K,K=ES(ot)):(rt=K,K=x),K}function gM(){var K,et,ot,xt,jt,Re,yi;return K=rt,i.charCodeAt(rt)===40?(et=c,rt++):(et=x,Jt===0&&$t(te)),et!==x?(qt(),ot=gn(),ot!==x?(qt(),xt=Bs(),xt!==x?(qt(),jt=gn(),jt!==x?(qt(),Bs(),qt(),Re=gn(),Re===x&&(Re=null),qt(),i.charCodeAt(rt)===41?(yi=d,rt++):(yi=x,Jt===0&&$t(Me)),yi!==x?(se=K,K=PS(ot,jt,Re)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function xM(){var K,et,ot;return K=rt,i.charCodeAt(rt)===47?(et=f,rt++):(et=x,Jt===0&&$t(be)),et!==x?(ot=Ns(),ot!==x?(se=K,K=AS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function yM(){var K,et,ot;return K=rt,i.charCodeAt(rt)===42?(et=m,rt++):(et=x,Jt===0&&$t(ei)),et!==x?(ot=Ns(),ot!==x?(se=K,K=RS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function TM(){var K,et,ot;return K=rt,i.charCodeAt(rt)===63?(et=y,rt++):(et=x,Jt===0&&$t(sr)),et!==x?(ot=Ki(),ot===x&&(ot=null),se=K,K=FS(ot)):(rt=K,K=x),K}function CM(){var K,et,ot;return K=rt,i.charCodeAt(rt)===58?(et=S,rt++):(et=x,Jt===0&&$t(Ea)),et!==x?(ot=Ns(),ot!==x?(se=K,K=LS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function SM(){var K,et,ot;return K=rt,i.substr(rt,2)===C?(et=C,rt+=2):(et=x,Jt===0&&$t(Pa)),et!==x?(ot=Ns(),ot!==x?(se=K,K=DS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function gn(){var K,et,ot,xt;if(K=rt,et=Ns(),et!==x){for(ot=[],xt=Fu();xt!==x;)ot.push(xt),xt=Fu();se=K,K=wS(et,ot)}else rt=K,K=x;return K}function ss(){var K,et,ot,xt;if(K=rt,i.charCodeAt(rt)===94?(et=E,rt++):(et=x,Jt===0&&$t(H)),et===x&&(et=null),ot=[],xt=gn(),xt!==x)for(;xt!==x;)ot.push(xt),xt=gn();else ot=x;return ot!==x?(se=K,K=GS(et,ot)):(rt=K,K=x),K}function Lu(){var K,et,ot,xt,jt;if(K=rt,et=[],ot=rt,xt=Bs(),xt!==x?(jt=ss(),jt!==x?ot=jt:(rt=ot,ot=x)):(rt=ot,ot=x),ot!==x)for(;ot!==x;)et.push(ot),ot=rt,xt=Bs(),xt!==x?(jt=ss(),jt!==x?ot=jt:(rt=ot,ot=x)):(rt=ot,ot=x);else et=x;return et!==x&&(se=K,et=bS(et)),K=et,K}function MM(){var K,et,ot,xt,jt;if(K=rt,et=[],ot=rt,xt=Pu(),xt!==x?(jt=ss(),jt!==x?ot=jt:(rt=ot,ot=x)):(rt=ot,ot=x),ot!==x)for(;ot!==x;)et.push(ot),ot=rt,xt=Pu(),xt!==x?(jt=ss(),jt!==x?ot=jt:(rt=ot,ot=x)):(rt=ot,ot=x);else et=x;return et!==x&&(se=K,et=IS(et)),K=et,K}function EM(){var K,et,ot,xt,jt;if(K=rt,et=[],ot=rt,xt=Au(),xt!==x?(jt=ss(),jt!==x?ot=jt:(rt=ot,ot=x)):(rt=ot,ot=x),ot!==x)for(;ot!==x;)et.push(ot),ot=rt,xt=Au(),xt!==x?(jt=ss(),jt!==x?ot=jt:(rt=ot,ot=x)):(rt=ot,ot=x);else et=x;return et!==x&&(se=K,et=OS(et)),K=et,K}function Du(){var K,et,ot;return K=rt,et=ss(),et!==x?(ot=Lu(),ot===x&&(ot=MM(),ot===x&&(ot=EM())),ot===x&&(ot=null),se=K,K=BS(et,ot)):(rt=K,K=x),K}function wu(){var K,et,ot;return K=rt,et=ss(),et!==x?(ot=Lu(),ot===x&&(ot=null),se=K,K=XS(et,ot)):(rt=K,K=x),K}function PM(){var K,et,ot,xt;return K=rt,qt(),et=Xs(),et!==x?(qt(),ot=Du(),ot!==x?(qt(),xt=Xs(),xt!==x?(se=K,K=NS(ot)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function AM(){var K;return K=IM(),K===x&&(K=DM(),K===x&&(K=bM(),K===x&&(K=FM(),K===x&&(K=LM(),K===x&&(K=RM(),K===x&&(K=GM(),K===x&&(K=wM()))))))),K}function RM(){var K,et,ot;return K=rt,i.substr(rt,6)===P?(et=P,rt+=6):(et=x,Jt===0&&$t($)),et!==x?(qt(),ot=Vs(),ot!==x?(se=K,K=VS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function FM(){var K,et,ot,xt,jt;return K=rt,i.substr(rt,6)===A?(et=A,rt+=6):(et=x,Jt===0&&$t(Q)),et!==x?(qt(),ot=Xs(),ot!==x?(xt=Ru(),xt!==x?(jt=Xs(),jt!==x?(se=K,K=zS(xt)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function LM(){var K,et,ot,xt;return K=rt,i.substr(rt,6)===F?(et=F,rt+=6):(et=x,Jt===0&&$t(q)),et!==x?(qt(),ot=or(),ot!==x?(qt(),xt=or(),xt!==x?(qt(),or(),se=K,K=WS(ot,xt)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x),K}function DM(){var K,et,ot;return K=rt,i.substr(rt,4)===G?(et=G,rt+=4):(et=x,Jt===0&&$t(it)),et!==x?(qt(),ot=Ki(),ot!==x?(se=K,K=ZS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function wM(){var K,et,ot;return K=rt,i.substr(rt,4)===D?(et=D,rt+=4):(et=x,Jt===0&&$t(vt)),et!==x?(qt(),ot=Ki(),ot!==x?(se=K,K=YS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function GM(){var K,et,ot;return K=rt,i.substr(rt,4)===L?(et=L,rt+=4):(et=x,Jt===0&&$t(yt)),et!==x?(qt(),ot=Ki(),ot!==x?(se=K,K=US(ot)):(rt=K,K=x)):(rt=K,K=x),K}function bM(){var K,et,ot;return K=rt,i.substr(rt,4)===b?(et=b,rt+=4):(et=x,Jt===0&&$t(At)),et!==x?(qt(),ot=Ki(),ot!==x?(se=K,K=HS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function IM(){var K,et,ot,xt,jt;if(K=rt,i.substr(rt,5)===I?(et=I,rt+=5):(et=x,Jt===0&&$t(zt)),et!==x)if(qt(),ot=Xs(),ot!==x){if(xt=[],jt=hr(),jt!==x)for(;jt!==x;)xt.push(jt),jt=hr();else xt=x;xt!==x?(jt=Xs(),jt!==x?(se=K,K=KS(xt)):(rt=K,K=x)):(rt=K,K=x)}else rt=K,K=x;else rt=K,K=x;return K}function Fa(){var K,et,ot,xt;if(K=rt,i.substr(rt,2)===N?(et=N,rt+=2):(et=x,Jt===0&&$t(ae)),et!==x){for(ot=[],xt=i.charAt(rt),ut.test(xt)?rt++:(xt=x,Jt===0&&$t(we));xt!==x;)ot.push(xt),xt=i.charAt(rt),ut.test(xt)?rt++:(xt=x,Jt===0&&$t(we));et=[et,ot],K=et}else rt=K,K=x;return K}function OM(){var K,et,ot,xt,jt,Re,yi,zs;if(K=rt,i.substr(rt,3)===Z?(et=Z,rt+=3):(et=x,Jt===0&&$t(Ui)),et!==x)if(qt(),i.charCodeAt(rt)===91?(ot=o,rt++):(ot=x,Jt===0&&$t(Zt)),ot!==x)if(qt(),xt=Vs(),xt!==x){for(jt=[],Re=rt,yi=Bs(),yi!==x?(zs=Vs(),zs!==x?(se=Re,Re=Cu(xt,zs)):(rt=Re,Re=x)):(rt=Re,Re=x);Re!==x;)jt.push(Re),Re=rt,yi=Bs(),yi!==x?(zs=Vs(),zs!==x?(se=Re,Re=Cu(xt,zs)):(rt=Re,Re=x)):(rt=Re,Re=x);Re=qt(),i.charCodeAt(rt)===93?(yi=a,rt++):(yi=x,Jt===0&&$t(ve)),yi!==x?(se=K,K=kS(xt,jt)):(rt=K,K=x)}else rt=K,K=x;else rt=K,K=x;else rt=K,K=x;return K}function BM(){var K;return K=OM(),K===x&&(K=PM()),K}function Vs(){var K,et,ot,xt,jt;if(K=rt,et=BM(),et!==x){for(qt(),ot=[],xt=Fa();xt!==x;)ot.push(xt),xt=Fa();se=K,K=JS(et)}else rt=K,K=x;return K===x&&(K=rt,et=AM(),et!==x?(qt(),i.charCodeAt(rt)===36?(ot=U,rt++):(ot=x,Jt===0&&$t(is)),ot!==x?(xt=qt(),jt=Vs(),jt!==x?(se=K,K=jS(et,jt)):(rt=K,K=x)):(rt=K,K=x)):(rt=K,K=x)),K}function XM(){var K,et;return K=rt,et=Vs(),et!==x&&(se=K,et=QS(et)),K=et,K===x&&(K=Fa()),K}function NM(){var K;return K=XM(),K}function VM(){var K,et;return K=rt,qt(),et=zM(),et===x&&(et=WM(),et===x&&(et=ZM())),et!==x?(qt(),se=K,K=$S(et)):(rt=K,K=x),K}function zM(){var K,et,ot;return K=rt,i.substr(rt,6)===W?(et=W,rt+=6):(et=x,Jt===0&&$t(nr)),et!==x?(qt(),ot=Ki(),ot!==x?(se=K,K=qS(ot)):(rt=K,K=x)):(rt=K,K=x),K}function WM(){var K,et,ot;return K=rt,i.substr(rt,6)===X?(et=X,rt+=6):(et=x,Jt===0&&$t(rr)),et!==x?(qt(),ot=Ki(),ot!==x?(se=K,K=_S(ot)):(rt=K,K=x)):(rt=K,K=x),K}function ZM(){var K,et;return K=rt,i.substr(rt,4)===V?(et=V,rt+=4):(et=x,Jt===0&&$t(hi)),et!==x&&(se=K,et=tM()),K=et,K}function YM(){var K;return K=NM(),K===x&&(K=VM()),K}var UM=function(K){this.type_="atom",this.source_=K,this.location_=Su()},ur=function(K,et,ot,xt){this.type_="pattern",this.arguments_={alignment:et,_steps:xt},ot!==void 0&&(this.arguments_.seed=ot),this.source_=K},HM=function(K,et,ot){this.type_=K,this.arguments_=et,this.source_=ot},KM=function(K,et){this.type_="element",this.source_=K,this.options_=et,this.location_=Su()},La=function(K,et){this.type_="command",this.name_=K,this.options_=et},Da=0;if(mn=w(),p.peg$library)return{peg$result:mn,peg$currPos:rt,peg$FAILED:x,peg$maxFailExpected:ar,peg$maxFailPos:xi};if(mn!==x&&rt===i.length)return mn;throw mn!==x&&rt<i.length&&$t(iM()),sM(ar,xi<i.length?i.charAt(xi):null,xi<i.length?Ra(xi,xi+1):Ra(xi,xi))}const Iw=["start"],uT=3e-4,Ow=(i,p)=>(x,M)=>{const R=i.source_[M].options_?.ops,w=x.__steps_source;if(R)for(const v of R)switch(v.type_){case"stretch":{const T=["fast","slow"],{type:t,amount:h}=v.arguments_;if(!T.includes(t))throw new Error(`mini: stretch: type must be one of ${T.join("|")} but got ${t}`);x=Rt(x)[t](p(h));break}case"replicate":{const{amount:T}=v.arguments_;x=Rt(x),x=x._repeatCycles(T)._fast(T);break}case"bjorklund":{v.arguments_.rotation?x=x.euclidRot(p(v.arguments_.pulse),p(v.arguments_.step),p(v.arguments_.rotation)):x=x.euclid(p(v.arguments_.pulse),p(v.arguments_.step));break}case"degradeBy":{x=Rt(x)._degradeByWith(Je.early(uT*v.arguments_.seed),v.arguments_.amount??.5);break}case"tail":{const T=p(v.arguments_.element);x=x.fmap(t=>h=>Array.isArray(t)?[...t,h]:[t,h]).appLeft(T);break}case"range":{const T=p(v.arguments_.element);x=Rt(x);const t=(h,g,o=1)=>Array.from({length:Math.abs(g-h)/o+1},(a,r)=>h<g?h+r*o:h-r*o);x=((h,g)=>h.squeezeBind(o=>g.bind(a=>Ke(...t(o,a)))))(x,T);break}default:console.warn(`operator "${v.type_}" not implemented`)}return x.__steps_source=x.__steps_source||w,x};function an(i,p,x,M=0){x?.(i);const R=w=>an(w,p,x,M);switch(i.type_){case"pattern":{const w=i.source_.map(h=>R(h)).map(Ow(i,R)),v=i.arguments_.alignment,T=w.filter(h=>h.__steps_source);let t;switch(v){case"stack":{t=ye(...w),T.length&&(t._steps=Ei(...T.map(h=>Ft(h._steps))));break}case"polymeter_slowcat":{t=ye(...w.map(h=>h._slow(h.__weight))),T.length&&(t._steps=Ei(...T.map(h=>Ft(h._steps))));break}case"polymeter":{const h=i.arguments_.stepsPerCycle?R(i.arguments_.stepsPerCycle).fmap(o=>Ft(o)):Se(Ft(w.length>0?w[0].__weight:1)),g=w.map(o=>o.fast(h.fmap(a=>a.div(o.__weight))));t=ye(...g);break}case"rand":{t=Qr(Je.early(uT*i.arguments_.seed).segment(1),w),T.length&&(t._steps=Ei(...T.map(h=>Ft(h._steps))));break}case"feet":{t=Ke(...w);break}default:{if(i.source_.some(h=>!!h.options_?.weight)){const h=i.source_.reduce((g,o)=>g.add(o.options_?.weight||Ft(1)),Ft(0));t=$o(...i.source_.map((g,o)=>[g.options_?.weight||Ft(1),w[o]])),t.__weight=h,t._steps=h,T.length&&(t._steps=t._steps.mul(Ei(...T.map(g=>Ft(g._steps)))))}else t=Fi(...w),t._steps=w.length;i.arguments_._steps&&(t.__steps_source=!0)}}return T.length&&(t.__steps_source=!0),t}case"element":return R(i.source_);case"atom":{if(i.source_==="~"||i.source_==="-")return xe;if(!i.location_)return console.warn("no location for",i),i.source_;const w=isNaN(Number(i.source_))?i.source_:Number(i.source_);if(M===-1)return Se(w);const[v,T]=Oh(p,i,M);return Se(w).withLoc(v,T)}case"stretch":return R(i.source_).slow(R(i.arguments_.amount));default:return console.warn(`node type "${i.type_}" not implemented -> returning silence`),xe}}const Oh=(i,p,x=0)=>{const{start:M,end:R}=p.location_,w=i?.split("").slice(M.offset,R.offset).join(""),[v=0,T=0]=w?w.split(p.source_).map(t=>t.split("").filter(h=>h===" ").length):[];return[M.offset+v+x,R.offset-T+x]},$n=(i,p=0,x=i)=>{try{return hT(i)}catch(M){const R=[M.location.start.offset+p,M.location.end.offset+p],w=x.slice(0,R[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${w}: ${M.message}`)}},lT=(i,p,x)=>{const M=$n(i,p,x);let R=[];return an(M,i,w=>{w.type_==="atom"&&R.push(w)},-1),R},Bh=(i,p=0,x)=>lT(i,p,x).map(M=>Oh(i,M,p)),Xh=(...i)=>{const p=i.map(x=>{const M=`"${x}"`,R=$n(M);return an(R,M)});return Fi(...p)},Bw=(i,p)=>{const x=`"${i}"`,M=$n(x);return an(M,x,null,p)},Xw=i=>{const p=$n(i);return an(p,i)};function Nw(i){return typeof i=="string"?Xh(i):Rt(i)}function fT(){Bf(Xh)}const Vw=Object.freeze(Object.defineProperty({__proto__:null,StartRules:Iw,SyntaxError:As,getLeafLocation:Oh,getLeafLocations:Bh,getLeaves:lT,h:Xw,m:Bw,mini:Xh,mini2ast:$n,miniAllStrings:fT,minify:Nw,parse:hT,patternifyAST:an},Symbol.toStringTag,{value:"Module"}));var zw=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],dT=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Ww="-----------------------------------------------------------------------------------------------------------------------------------------------------",cT="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Wa={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Za="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Zw={5:Za,"5module":Za+" export import",6:Za+" const class extends export import super"},Yw=/^in(stanceof)?$/,Uw=new RegExp("["+cT+"]"),Hw=new RegExp("["+cT+Ww+"]");function Po(i,p){for(var x=65536,M=0;M<p.length;M+=2){if(x+=p[M],x>i)return!1;if(x+=p[M+1],x>=i)return!0}return!1}function qi(i,p){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&Uw.test(String.fromCharCode(i)):p===!1?!1:Po(i,dT)}function tn(i,p){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&Hw.test(String.fromCharCode(i)):p===!1?!1:Po(i,dT)||Po(i,zw)}var pe=function(i,p){p===void 0&&(p={}),this.label=i,this.keyword=p.keyword,this.beforeExpr=!!p.beforeExpr,this.startsExpr=!!p.startsExpr,this.isLoop=!!p.isLoop,this.isAssign=!!p.isAssign,this.prefix=!!p.prefix,this.postfix=!!p.postfix,this.binop=p.binop||null,this.updateContext=null};function ui(i,p){return new pe(i,{beforeExpr:!0,binop:p})}var li={beforeExpr:!0},$e={startsExpr:!0},Nh={};function de(i,p){return p===void 0&&(p={}),p.keyword=i,Nh[i]=new pe(i,p)}var _={num:new pe("num",$e),regexp:new pe("regexp",$e),string:new pe("string",$e),name:new pe("name",$e),privateId:new pe("privateId",$e),eof:new pe("eof"),bracketL:new pe("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new pe("]"),braceL:new pe("{",{beforeExpr:!0,startsExpr:!0}),braceR:new pe("}"),parenL:new pe("(",{beforeExpr:!0,startsExpr:!0}),parenR:new pe(")"),comma:new pe(",",li),semi:new pe(";",li),colon:new pe(":",li),dot:new pe("."),question:new pe("?",li),questionDot:new pe("?."),arrow:new pe("=>",li),template:new pe("template"),invalidTemplate:new pe("invalidTemplate"),ellipsis:new pe("...",li),backQuote:new pe("`",$e),dollarBraceL:new pe("${",{beforeExpr:!0,startsExpr:!0}),eq:new pe("=",{beforeExpr:!0,isAssign:!0}),assign:new pe("_=",{beforeExpr:!0,isAssign:!0}),incDec:new pe("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new pe("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ui("||",1),logicalAND:ui("&&",2),bitwiseOR:ui("|",3),bitwiseXOR:ui("^",4),bitwiseAND:ui("&",5),equality:ui("==/!=/===/!==",6),relational:ui("</>/<=/>=",7),bitShift:ui("<</>>/>>>",8),plusMin:new pe("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ui("%",10),star:ui("*",10),slash:ui("/",10),starstar:new pe("**",{beforeExpr:!0}),coalesce:ui("??",1),_break:de("break"),_case:de("case",li),_catch:de("catch"),_continue:de("continue"),_debugger:de("debugger"),_default:de("default",li),_do:de("do",{isLoop:!0,beforeExpr:!0}),_else:de("else",li),_finally:de("finally"),_for:de("for",{isLoop:!0}),_function:de("function",$e),_if:de("if"),_return:de("return",li),_switch:de("switch"),_throw:de("throw",li),_try:de("try"),_var:de("var"),_const:de("const"),_while:de("while",{isLoop:!0}),_with:de("with"),_new:de("new",{beforeExpr:!0,startsExpr:!0}),_this:de("this",$e),_super:de("super",$e),_class:de("class",$e),_extends:de("extends",li),_export:de("export"),_import:de("import",$e),_null:de("null",$e),_true:de("true",$e),_false:de("false",$e),_in:de("in",{beforeExpr:!0,binop:7}),_instanceof:de("instanceof",{beforeExpr:!0,binop:7}),_typeof:de("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:de("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:de("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},mi=/\r\n?|\n|\u2028|\u2029/,Kw=new RegExp(mi.source,"g");function on(i){return i===10||i===13||i===8232||i===8233}function pT(i,p,x){x===void 0&&(x=i.length);for(var M=p;M<x;M++){var R=i.charCodeAt(M);if(on(R))return M<x-1&&R===13&&i.charCodeAt(M+1)===10?M+2:M+1}return-1}var vT=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,fi=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,mT=Object.prototype,kw=mT.hasOwnProperty,Jw=mT.toString,hn=Object.hasOwn||function(i,p){return kw.call(i,p)},ul=Array.isArray||function(i){return Jw.call(i)==="[object Array]"},ll=Object.create(null);function us(i){return ll[i]||(ll[i]=new RegExp("^(?:"+i.replace(/ /g,"|")+")$"))}function _i(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var jw=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Yn=function(i,p){this.line=i,this.column=p};Yn.prototype.offset=function(i){return new Yn(this.line,this.column+i)};var ea=function(i,p,x){this.start=p,this.end=x,i.sourceFile!==null&&(this.source=i.sourceFile)};function gT(i,p){for(var x=1,M=0;;){var R=pT(i,M,p);if(R<0)return new Yn(x,p-M);++x,M=R}}var Ao={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},fl=!1;function Qw(i){var p={};for(var x in Ao)p[x]=i&&hn(i,x)?i[x]:Ao[x];if(p.ecmaVersion==="latest"?p.ecmaVersion=1e8:p.ecmaVersion==null?(!fl&&typeof console=="object"&&console.warn&&(fl=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),p.ecmaVersion=11):p.ecmaVersion>=2015&&(p.ecmaVersion-=2009),p.allowReserved==null&&(p.allowReserved=p.ecmaVersion<5),(!i||i.allowHashBang==null)&&(p.allowHashBang=p.ecmaVersion>=14),ul(p.onToken)){var M=p.onToken;p.onToken=function(R){return M.push(R)}}return ul(p.onComment)&&(p.onComment=$w(p,p.onComment)),p}function $w(i,p){return function(x,M,R,w,v,T){var t={type:x?"Block":"Line",value:M,start:R,end:w};i.locations&&(t.loc=new ea(this,v,T)),i.ranges&&(t.range=[R,w]),p.push(t)}}var Un=1,un=2,Vh=4,xT=8,yT=16,TT=32,zh=64,CT=128,qn=256,Wh=Un|un|qn;function Zh(i,p){return un|(i?Vh:0)|(p?xT:0)}var Ir=0,Yh=1,es=2,ST=3,MT=4,ET=5,Oe=function(i,p,x){this.options=i=Qw(i),this.sourceFile=i.sourceFile,this.keywords=us(Zw[i.ecmaVersion>=6?6:i.sourceType==="module"?"5module":5]);var M="";i.allowReserved!==!0&&(M=Wa[i.ecmaVersion>=6?6:i.ecmaVersion===5?5:3],i.sourceType==="module"&&(M+=" await")),this.reservedWords=us(M);var R=(M?M+" ":"")+Wa.strict;this.reservedWordsStrict=us(R),this.reservedWordsStrictBind=us(R+" "+Wa.strictBind),this.input=String(p),this.containsEsc=!1,x?(this.pos=x,this.lineStart=this.input.lastIndexOf(`
`,x-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(mi).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=_.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=i.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&i.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Un),this.regexpState=null,this.privateNameStack=[]},Zi={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Oe.prototype.parse=function(){var i=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(i)};Zi.inFunction.get=function(){return(this.currentVarScope().flags&un)>0};Zi.inGenerator.get=function(){return(this.currentVarScope().flags&xT)>0&&!this.currentVarScope().inClassFieldInit};Zi.inAsync.get=function(){return(this.currentVarScope().flags&Vh)>0&&!this.currentVarScope().inClassFieldInit};Zi.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var p=this.scopeStack[i];if(p.inClassFieldInit||p.flags&qn)return!1;if(p.flags&un)return(p.flags&Vh)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Zi.allowSuper.get=function(){var i=this.currentThisScope(),p=i.flags,x=i.inClassFieldInit;return(p&zh)>0||x||this.options.allowSuperOutsideMethod};Zi.allowDirectSuper.get=function(){return(this.currentThisScope().flags&CT)>0};Zi.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Zi.allowNewDotTarget.get=function(){var i=this.currentThisScope(),p=i.flags,x=i.inClassFieldInit;return(p&(un|qn))>0||x};Zi.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&qn)>0};Oe.extend=function(){for(var i=[],p=arguments.length;p--;)i[p]=arguments[p];for(var x=this,M=0;M<i.length;M++)x=i[M](x);return x};Oe.parse=function(i,p){return new this(p,i).parse()};Oe.parseExpressionAt=function(i,p,x){var M=new this(x,i,p);return M.nextToken(),M.parseExpression()};Oe.tokenizer=function(i,p){return new this(p,i)};Object.defineProperties(Oe.prototype,Zi);var Qe=Oe.prototype,qw=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Qe.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){fi.lastIndex=i,i+=fi.exec(this.input)[0].length;var p=qw.exec(this.input.slice(i));if(!p)return!1;if((p[1]||p[2])==="use strict"){fi.lastIndex=i+p[0].length;var x=fi.exec(this.input),M=x.index+x[0].length,R=this.input.charAt(M);return R===";"||R==="}"||mi.test(x[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(R)||R==="!"&&this.input.charAt(M+1)==="=")}i+=p[0].length,fi.lastIndex=i,i+=fi.exec(this.input)[0].length,this.input[i]===";"&&i++}};Qe.eat=function(i){return this.type===i?(this.next(),!0):!1};Qe.isContextual=function(i){return this.type===_.name&&this.value===i&&!this.containsEsc};Qe.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1};Qe.expectContextual=function(i){this.eatContextual(i)||this.unexpected()};Qe.canInsertSemicolon=function(){return this.type===_.eof||this.type===_.braceR||mi.test(this.input.slice(this.lastTokEnd,this.start))};Qe.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Qe.semicolon=function(){!this.eat(_.semi)&&!this.insertSemicolon()&&this.unexpected()};Qe.afterTrailingComma=function(i,p){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),p||this.next(),!0};Qe.expect=function(i){this.eat(i)||this.unexpected()};Qe.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var ia=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Qe.checkPatternErrors=function(i,p){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var x=p?i.parenthesizedAssign:i.parenthesizedBind;x>-1&&this.raiseRecoverable(x,p?"Assigning to rvalue":"Parenthesized pattern")}};Qe.checkExpressionErrors=function(i,p){if(!i)return!1;var x=i.shorthandAssign,M=i.doubleProto;if(!p)return x>=0||M>=0;x>=0&&this.raise(x,"Shorthand property assignments are valid only in destructuring patterns"),M>=0&&this.raiseRecoverable(M,"Redefinition of __proto__ property")};Qe.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Qe.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var kt=Oe.prototype;kt.parseTopLevel=function(i){var p=Object.create(null);for(i.body||(i.body=[]);this.type!==_.eof;){var x=this.parseStatement(null,!0,p);i.body.push(x)}if(this.inModule)for(var M=0,R=Object.keys(this.undefinedExports);M<R.length;M+=1){var w=R[M];this.raiseRecoverable(this.undefinedExports[w].start,"Export '"+w+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var Uh={kind:"loop"},_w={kind:"switch"};kt.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;fi.lastIndex=this.pos;var p=fi.exec(this.input),x=this.pos+p[0].length,M=this.input.charCodeAt(x);if(M===91||M===92)return!0;if(i)return!1;if(M===123||M>55295&&M<56320)return!0;if(qi(M,!0)){for(var R=x+1;tn(M=this.input.charCodeAt(R),!0);)++R;if(M===92||M>55295&&M<56320)return!0;var w=this.input.slice(x,R);if(!Yw.test(w))return!0}return!1};kt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;fi.lastIndex=this.pos;var i=fi.exec(this.input),p=this.pos+i[0].length,x;return!mi.test(this.input.slice(this.pos,p))&&this.input.slice(p,p+8)==="function"&&(p+8===this.input.length||!(tn(x=this.input.charCodeAt(p+8))||x>55295&&x<56320))};kt.parseStatement=function(i,p,x){var M=this.type,R=this.startNode(),w;switch(this.isLet(i)&&(M=_._var,w="let"),M){case _._break:case _._continue:return this.parseBreakContinueStatement(R,M.keyword);case _._debugger:return this.parseDebuggerStatement(R);case _._do:return this.parseDoStatement(R);case _._for:return this.parseForStatement(R);case _._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(R,!1,!i);case _._class:return i&&this.unexpected(),this.parseClass(R,!0);case _._if:return this.parseIfStatement(R);case _._return:return this.parseReturnStatement(R);case _._switch:return this.parseSwitchStatement(R);case _._throw:return this.parseThrowStatement(R);case _._try:return this.parseTryStatement(R);case _._const:case _._var:return w=w||this.value,i&&w!=="var"&&this.unexpected(),this.parseVarStatement(R,w);case _._while:return this.parseWhileStatement(R);case _._with:return this.parseWithStatement(R);case _.braceL:return this.parseBlock(!0,R);case _.semi:return this.parseEmptyStatement(R);case _._export:case _._import:if(this.options.ecmaVersion>10&&M===_._import){fi.lastIndex=this.pos;var v=fi.exec(this.input),T=this.pos+v[0].length,t=this.input.charCodeAt(T);if(t===40||t===46)return this.parseExpressionStatement(R,this.parseExpression())}return this.options.allowImportExportEverywhere||(p||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),M===_._import?this.parseImport(R):this.parseExport(R,x);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(R,!0,!i);var h=this.value,g=this.parseExpression();return M===_.name&&g.type==="Identifier"&&this.eat(_.colon)?this.parseLabeledStatement(R,h,g,i):this.parseExpressionStatement(R,g)}};kt.parseBreakContinueStatement=function(i,p){var x=p==="break";this.next(),this.eat(_.semi)||this.insertSemicolon()?i.label=null:this.type!==_.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var M=0;M<this.labels.length;++M){var R=this.labels[M];if((i.label==null||R.name===i.label.name)&&(R.kind!=null&&(x||R.kind==="loop")||i.label&&x))break}return M===this.labels.length&&this.raise(i.start,"Unsyntactic "+p),this.finishNode(i,x?"BreakStatement":"ContinueStatement")};kt.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")};kt.parseDoStatement=function(i){return this.next(),this.labels.push(Uh),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(_._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(_.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")};kt.parseForStatement=function(i){this.next();var p=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Uh),this.enterScope(0),this.expect(_.parenL),this.type===_.semi)return p>-1&&this.unexpected(p),this.parseFor(i,null);var x=this.isLet();if(this.type===_._var||this.type===_._const||x){var M=this.startNode(),R=x?"let":this.value;return this.next(),this.parseVar(M,!0,R),this.finishNode(M,"VariableDeclaration"),(this.type===_._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&M.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===_._in?p>-1&&this.unexpected(p):i.await=p>-1),this.parseForIn(i,M)):(p>-1&&this.unexpected(p),this.parseFor(i,M))}var w=this.isContextual("let"),v=!1,T=this.containsEsc,t=new ia,h=this.start,g=p>-1?this.parseExprSubscripts(t,"await"):this.parseExpression(!0,t);return this.type===_._in||(v=this.options.ecmaVersion>=6&&this.isContextual("of"))?(p>-1?(this.type===_._in&&this.unexpected(p),i.await=!0):v&&this.options.ecmaVersion>=8&&(g.start===h&&!T&&g.type==="Identifier"&&g.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(i.await=!1)),w&&v&&this.raise(g.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(g,!1,t),this.checkLValPattern(g),this.parseForIn(i,g)):(this.checkExpressionErrors(t,!0),p>-1&&this.unexpected(p),this.parseFor(i,g))};kt.parseFunctionStatement=function(i,p,x){return this.next(),this.parseFunction(i,wn|(x?0:Ro),!1,p)};kt.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(_._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")};kt.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(_.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")};kt.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(_.braceL),this.labels.push(_w),this.enterScope(0);for(var p,x=!1;this.type!==_.braceR;)if(this.type===_._case||this.type===_._default){var M=this.type===_._case;p&&this.finishNode(p,"SwitchCase"),i.cases.push(p=this.startNode()),p.consequent=[],this.next(),M?p.test=this.parseExpression():(x&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),x=!0,p.test=null),this.expect(_.colon)}else p||this.unexpected(),p.consequent.push(this.parseStatement(null));return this.exitScope(),p&&this.finishNode(p,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")};kt.parseThrowStatement=function(i){return this.next(),mi.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var t7=[];kt.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),p=i.type==="Identifier";return this.enterScope(p?TT:0),this.checkLValPattern(i,p?MT:es),this.expect(_.parenR),i};kt.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===_._catch){var p=this.startNode();this.next(),this.eat(_.parenL)?p.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),p.param=null,this.enterScope(0)),p.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(p,"CatchClause")}return i.finalizer=this.eat(_._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")};kt.parseVarStatement=function(i,p,x){return this.next(),this.parseVar(i,!1,p,x),this.semicolon(),this.finishNode(i,"VariableDeclaration")};kt.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push(Uh),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")};kt.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")};kt.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")};kt.parseLabeledStatement=function(i,p,x,M){for(var R=0,w=this.labels;R<w.length;R+=1){var v=w[R];v.name===p&&this.raise(x.start,"Label '"+p+"' is already declared")}for(var T=this.type.isLoop?"loop":this.type===_._switch?"switch":null,t=this.labels.length-1;t>=0;t--){var h=this.labels[t];if(h.statementStart===i.start)h.statementStart=this.start,h.kind=T;else break}return this.labels.push({name:p,kind:T,statementStart:this.start}),i.body=this.parseStatement(M?M.indexOf("label")===-1?M+"label":M:"label"),this.labels.pop(),i.label=x,this.finishNode(i,"LabeledStatement")};kt.parseExpressionStatement=function(i,p){return i.expression=p,this.semicolon(),this.finishNode(i,"ExpressionStatement")};kt.parseBlock=function(i,p,x){for(i===void 0&&(i=!0),p===void 0&&(p=this.startNode()),p.body=[],this.expect(_.braceL),i&&this.enterScope(0);this.type!==_.braceR;){var M=this.parseStatement(null);p.body.push(M)}return x&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(p,"BlockStatement")};kt.parseFor=function(i,p){return i.init=p,this.expect(_.semi),i.test=this.type===_.semi?null:this.parseExpression(),this.expect(_.semi),i.update=this.type===_.parenR?null:this.parseExpression(),this.expect(_.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")};kt.parseForIn=function(i,p){var x=this.type===_._in;return this.next(),p.type==="VariableDeclaration"&&p.declarations[0].init!=null&&(!x||this.options.ecmaVersion<8||this.strict||p.kind!=="var"||p.declarations[0].id.type!=="Identifier")&&this.raise(p.start,(x?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=p,i.right=x?this.parseExpression():this.parseMaybeAssign(),this.expect(_.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,x?"ForInStatement":"ForOfStatement")};kt.parseVar=function(i,p,x,M){for(i.declarations=[],i.kind=x;;){var R=this.startNode();if(this.parseVarId(R,x),this.eat(_.eq)?R.init=this.parseMaybeAssign(p):!M&&x==="const"&&!(this.type===_._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!M&&R.id.type!=="Identifier"&&!(p&&(this.type===_._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):R.init=null,i.declarations.push(this.finishNode(R,"VariableDeclarator")),!this.eat(_.comma))break}return i};kt.parseVarId=function(i,p){i.id=this.parseBindingAtom(),this.checkLValPattern(i.id,p==="var"?Yh:es,!1)};var wn=1,Ro=2,PT=4;kt.parseFunction=function(i,p,x,M,R){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!M)&&(this.type===_.star&&p&Ro&&this.unexpected(),i.generator=this.eat(_.star)),this.options.ecmaVersion>=8&&(i.async=!!M),p&wn&&(i.id=p&PT&&this.type!==_.name?null:this.parseIdent(),i.id&&!(p&Ro)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?Yh:es:ST));var w=this.yieldPos,v=this.awaitPos,T=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Zh(i.async,i.generator)),p&wn||(i.id=this.type===_.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,x,!1,R),this.yieldPos=w,this.awaitPos=v,this.awaitIdentPos=T,this.finishNode(i,p&wn?"FunctionDeclaration":"FunctionExpression")};kt.parseFunctionParams=function(i){this.expect(_.parenL),i.params=this.parseBindingList(_.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};kt.parseClass=function(i,p){this.next();var x=this.strict;this.strict=!0,this.parseClassId(i,p),this.parseClassSuper(i);var M=this.enterClassBody(),R=this.startNode(),w=!1;for(R.body=[],this.expect(_.braceL);this.type!==_.braceR;){var v=this.parseClassElement(i.superClass!==null);v&&(R.body.push(v),v.type==="MethodDefinition"&&v.kind==="constructor"?(w&&this.raiseRecoverable(v.start,"Duplicate constructor in the same class"),w=!0):v.key&&v.key.type==="PrivateIdentifier"&&e7(M,v)&&this.raiseRecoverable(v.key.start,"Identifier '#"+v.key.name+"' has already been declared"))}return this.strict=x,this.next(),i.body=this.finishNode(R,"ClassBody"),this.exitClassBody(),this.finishNode(i,p?"ClassDeclaration":"ClassExpression")};kt.parseClassElement=function(i){if(this.eat(_.semi))return null;var p=this.options.ecmaVersion,x=this.startNode(),M="",R=!1,w=!1,v="method",T=!1;if(this.eatContextual("static")){if(p>=13&&this.eat(_.braceL))return this.parseClassStaticBlock(x),x;this.isClassElementNameStart()||this.type===_.star?T=!0:M="static"}if(x.static=T,!M&&p>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===_.star)&&!this.canInsertSemicolon()?w=!0:M="async"),!M&&(p>=9||!w)&&this.eat(_.star)&&(R=!0),!M&&!w&&!R){var t=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?v=t:M=t)}if(M?(x.computed=!1,x.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),x.key.name=M,this.finishNode(x.key,"Identifier")):this.parseClassElementName(x),p<13||this.type===_.parenL||v!=="method"||R||w){var h=!x.static&&Or(x,"constructor"),g=h&&i;h&&v!=="method"&&this.raise(x.key.start,"Constructor can't have get/set modifier"),x.kind=h?"constructor":v,this.parseClassMethod(x,R,w,g)}else this.parseClassField(x);return x};kt.isClassElementNameStart=function(){return this.type===_.name||this.type===_.privateId||this.type===_.num||this.type===_.string||this.type===_.bracketL||this.type.keyword};kt.parseClassElementName=function(i){this.type===_.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)};kt.parseClassMethod=function(i,p,x,M){var R=i.key;i.kind==="constructor"?(p&&this.raise(R.start,"Constructor can't be a generator"),x&&this.raise(R.start,"Constructor can't be an async method")):i.static&&Or(i,"prototype")&&this.raise(R.start,"Classes may not have a static property named prototype");var w=i.value=this.parseMethod(p,x,M);return i.kind==="get"&&w.params.length!==0&&this.raiseRecoverable(w.start,"getter should have no params"),i.kind==="set"&&w.params.length!==1&&this.raiseRecoverable(w.start,"setter should have exactly one param"),i.kind==="set"&&w.params[0].type==="RestElement"&&this.raiseRecoverable(w.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")};kt.parseClassField=function(i){if(Or(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&Or(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(_.eq)){var p=this.currentThisScope(),x=p.inClassFieldInit;p.inClassFieldInit=!0,i.value=this.parseMaybeAssign(),p.inClassFieldInit=x}else i.value=null;return this.semicolon(),this.finishNode(i,"PropertyDefinition")};kt.parseClassStaticBlock=function(i){i.body=[];var p=this.labels;for(this.labels=[],this.enterScope(qn|zh);this.type!==_.braceR;){var x=this.parseStatement(null);i.body.push(x)}return this.next(),this.exitScope(),this.labels=p,this.finishNode(i,"StaticBlock")};kt.parseClassId=function(i,p){this.type===_.name?(i.id=this.parseIdent(),p&&this.checkLValSimple(i.id,es,!1)):(p===!0&&this.unexpected(),i.id=null)};kt.parseClassSuper=function(i){i.superClass=this.eat(_._extends)?this.parseExprSubscripts(null,!1):null};kt.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared};kt.exitClassBody=function(){var i=this.privateNameStack.pop(),p=i.declared,x=i.used;if(this.options.checkPrivateFields)for(var M=this.privateNameStack.length,R=M===0?null:this.privateNameStack[M-1],w=0;w<x.length;++w){var v=x[w];hn(p,v.name)||(R?R.used.push(v):this.raiseRecoverable(v.start,"Private field '#"+v.name+"' must be declared in an enclosing class"))}};function e7(i,p){var x=p.key.name,M=i[x],R="true";return p.type==="MethodDefinition"&&(p.kind==="get"||p.kind==="set")&&(R=(p.static?"s":"i")+p.kind),M==="iget"&&R==="iset"||M==="iset"&&R==="iget"||M==="sget"&&R==="sset"||M==="sset"&&R==="sget"?(i[x]="true",!1):M?!0:(i[x]=R,!1)}function Or(i,p){var x=i.computed,M=i.key;return!x&&(M.type==="Identifier"&&M.name===p||M.type==="Literal"&&M.value===p)}kt.parseExportAllDeclaration=function(i,p){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(p,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==_.string&&this.unexpected(),i.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")};kt.parseExport=function(i,p){if(this.next(),this.eat(_.star))return this.parseExportAllDeclaration(i,p);if(this.eat(_._default))return this.checkExport(p,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(p,i.declaration.declarations):this.checkExport(p,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null;else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(p),this.eatContextual("from"))this.type!==_.string&&this.unexpected(),i.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause());else{for(var x=0,M=i.specifiers;x<M.length;x+=1){var R=M[x];this.checkUnreserved(R.local),this.checkLocalExport(R.local),R.local.type==="Literal"&&this.raise(R.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")};kt.parseExportDeclaration=function(i){return this.parseStatement(null)};kt.parseExportDefaultDeclaration=function(){var i;if(this.type===_._function||(i=this.isAsyncFunction())){var p=this.startNode();return this.next(),i&&this.next(),this.parseFunction(p,wn|PT,!1,i)}else if(this.type===_._class){var x=this.startNode();return this.parseClass(x,"nullableID")}else{var M=this.parseMaybeAssign();return this.semicolon(),M}};kt.checkExport=function(i,p,x){i&&(typeof p!="string"&&(p=p.type==="Identifier"?p.name:p.value),hn(i,p)&&this.raiseRecoverable(x,"Duplicate export '"+p+"'"),i[p]=!0)};kt.checkPatternExport=function(i,p){var x=p.type;if(x==="Identifier")this.checkExport(i,p,p.start);else if(x==="ObjectPattern")for(var M=0,R=p.properties;M<R.length;M+=1){var w=R[M];this.checkPatternExport(i,w)}else if(x==="ArrayPattern")for(var v=0,T=p.elements;v<T.length;v+=1){var t=T[v];t&&this.checkPatternExport(i,t)}else x==="Property"?this.checkPatternExport(i,p.value):x==="AssignmentPattern"?this.checkPatternExport(i,p.left):x==="RestElement"&&this.checkPatternExport(i,p.argument)};kt.checkVariableExport=function(i,p){if(i)for(var x=0,M=p;x<M.length;x+=1){var R=M[x];this.checkPatternExport(i,R.id)}};kt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};kt.parseExportSpecifier=function(i){var p=this.startNode();return p.local=this.parseModuleExportName(),p.exported=this.eatContextual("as")?this.parseModuleExportName():p.local,this.checkExport(i,p.exported,p.exported.start),this.finishNode(p,"ExportSpecifier")};kt.parseExportSpecifiers=function(i){var p=[],x=!0;for(this.expect(_.braceL);!this.eat(_.braceR);){if(x)x=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;p.push(this.parseExportSpecifier(i))}return p};kt.parseImport=function(i){return this.next(),this.type===_.string?(i.specifiers=t7,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===_.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(i,"ImportDeclaration")};kt.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,es),this.finishNode(i,"ImportSpecifier")};kt.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,es),this.finishNode(i,"ImportDefaultSpecifier")};kt.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,es),this.finishNode(i,"ImportNamespaceSpecifier")};kt.parseImportSpecifiers=function(){var i=[],p=!0;if(this.type===_.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(_.comma)))return i;if(this.type===_.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(_.braceL);!this.eat(_.braceR);){if(p)p=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;i.push(this.parseImportSpecifier())}return i};kt.parseWithClause=function(){var i=[];if(!this.eat(_._with))return i;this.expect(_.braceL);for(var p={},x=!0;!this.eat(_.braceR);){if(x)x=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;var M=this.parseImportAttribute(),R=M.key.type==="Identifier"?M.key.name:M.key.value;hn(p,R)&&this.raiseRecoverable(M.key.start,"Duplicate attribute key '"+R+"'"),p[R]=!0,i.push(M)}return i};kt.parseImportAttribute=function(){var i=this.startNode();return i.key=this.type===_.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(_.colon),this.type!==_.string&&this.unexpected(),i.value=this.parseExprAtom(),this.finishNode(i,"ImportAttribute")};kt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===_.string){var i=this.parseLiteral(this.value);return jw.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)};kt.adaptDirectivePrologue=function(i){for(var p=0;p<i.length&&this.isDirectiveCandidate(i[p]);++p)i[p].directive=i[p].expression.raw.slice(1,-1)};kt.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var gi=Oe.prototype;gi.toAssignable=function(i,p,x){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",x&&this.checkPatternErrors(x,!0);for(var M=0,R=i.properties;M<R.length;M+=1){var w=R[M];this.toAssignable(w,p),w.type==="RestElement"&&(w.argument.type==="ArrayPattern"||w.argument.type==="ObjectPattern")&&this.raise(w.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,p);break;case"ArrayExpression":i.type="ArrayPattern",x&&this.checkPatternErrors(x,!0),this.toAssignableList(i.elements,p);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,p),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,p);break;case"ParenthesizedExpression":this.toAssignable(i.expression,p,x);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!p)break;default:this.raise(i.start,"Assigning to rvalue")}else x&&this.checkPatternErrors(x,!0);return i};gi.toAssignableList=function(i,p){for(var x=i.length,M=0;M<x;M++){var R=i[M];R&&this.toAssignable(R,p)}if(x){var w=i[x-1];this.options.ecmaVersion===6&&p&&w&&w.type==="RestElement"&&w.argument.type!=="Identifier"&&this.unexpected(w.argument.start)}return i};gi.parseSpread=function(i){var p=this.startNode();return this.next(),p.argument=this.parseMaybeAssign(!1,i),this.finishNode(p,"SpreadElement")};gi.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==_.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")};gi.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case _.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(_.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case _.braceL:return this.parseObj(!0)}return this.parseIdent()};gi.parseBindingList=function(i,p,x,M){for(var R=[],w=!0;!this.eat(i);)if(w?w=!1:this.expect(_.comma),p&&this.type===_.comma)R.push(null);else{if(x&&this.afterTrailingComma(i))break;if(this.type===_.ellipsis){var v=this.parseRestBinding();this.parseBindingListItem(v),R.push(v),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else R.push(this.parseAssignableListItem(M))}return R};gi.parseAssignableListItem=function(i){var p=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(p),p};gi.parseBindingListItem=function(i){return i};gi.parseMaybeDefault=function(i,p,x){if(x=x||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(_.eq))return x;var M=this.startNodeAt(i,p);return M.left=x,M.right=this.parseMaybeAssign(),this.finishNode(M,"AssignmentPattern")};gi.checkLValSimple=function(i,p,x){p===void 0&&(p=Ir);var M=p!==Ir;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(M?"Binding ":"Assigning to ")+i.name+" in strict mode"),M&&(p===es&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),x&&(hn(x,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),x[i.name]=!0),p!==ET&&this.declareName(i.name,p,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":M&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return M&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,p,x);default:this.raise(i.start,(M?"Binding":"Assigning to")+" rvalue")}};gi.checkLValPattern=function(i,p,x){switch(p===void 0&&(p=Ir),i.type){case"ObjectPattern":for(var M=0,R=i.properties;M<R.length;M+=1){var w=R[M];this.checkLValInnerPattern(w,p,x)}break;case"ArrayPattern":for(var v=0,T=i.elements;v<T.length;v+=1){var t=T[v];t&&this.checkLValInnerPattern(t,p,x)}break;default:this.checkLValSimple(i,p,x)}};gi.checkLValInnerPattern=function(i,p,x){switch(p===void 0&&(p=Ir),i.type){case"Property":this.checkLValInnerPattern(i.value,p,x);break;case"AssignmentPattern":this.checkLValPattern(i.left,p,x);break;case"RestElement":this.checkLValPattern(i.argument,p,x);break;default:this.checkLValPattern(i,p,x)}};var Si=function(i,p,x,M,R){this.token=i,this.isExpr=!!p,this.preserveSpace=!!x,this.override=M,this.generator=!!R},Le={b_stat:new Si("{",!1),b_expr:new Si("{",!0),b_tmpl:new Si("${",!1),p_stat:new Si("(",!1),p_expr:new Si("(",!0),q_tmpl:new Si("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new Si("function",!1),f_expr:new Si("function",!0),f_expr_gen:new Si("function",!0,!1,null,!0),f_gen:new Si("function",!1,!1,null,!0)},ln=Oe.prototype;ln.initialContext=function(){return[Le.b_stat]};ln.curContext=function(){return this.context[this.context.length-1]};ln.braceIsBlock=function(i){var p=this.curContext();return p===Le.f_expr||p===Le.f_stat?!0:i===_.colon&&(p===Le.b_stat||p===Le.b_expr)?!p.isExpr:i===_._return||i===_.name&&this.exprAllowed?mi.test(this.input.slice(this.lastTokEnd,this.start)):i===_._else||i===_.semi||i===_.eof||i===_.parenR||i===_.arrow?!0:i===_.braceL?p===Le.b_stat:i===_._var||i===_._const||i===_.name?!1:!this.exprAllowed};ln.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var p=this.context[i];if(p.token==="function")return p.generator}return!1};ln.updateContext=function(i){var p,x=this.type;x.keyword&&i===_.dot?this.exprAllowed=!1:(p=x.updateContext)?p.call(this,i):this.exprAllowed=x.beforeExpr};ln.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)};_.parenR.updateContext=_.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===Le.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr};_.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?Le.b_stat:Le.b_expr),this.exprAllowed=!0};_.dollarBraceL.updateContext=function(){this.context.push(Le.b_tmpl),this.exprAllowed=!0};_.parenL.updateContext=function(i){var p=i===_._if||i===_._for||i===_._with||i===_._while;this.context.push(p?Le.p_stat:Le.p_expr),this.exprAllowed=!0};_.incDec.updateContext=function(){};_._function.updateContext=_._class.updateContext=function(i){i.beforeExpr&&i!==_._else&&!(i===_.semi&&this.curContext()!==Le.p_stat)&&!(i===_._return&&mi.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===_.colon||i===_.braceL)&&this.curContext()===Le.b_stat)?this.context.push(Le.f_expr):this.context.push(Le.f_stat),this.exprAllowed=!1};_.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};_.backQuote.updateContext=function(){this.curContext()===Le.q_tmpl?this.context.pop():this.context.push(Le.q_tmpl),this.exprAllowed=!1};_.star.updateContext=function(i){if(i===_._function){var p=this.context.length-1;this.context[p]===Le.f_expr?this.context[p]=Le.f_expr_gen:this.context[p]=Le.f_gen}this.exprAllowed=!0};_.name.updateContext=function(i){var p=!1;this.options.ecmaVersion>=6&&i!==_.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(p=!0),this.exprAllowed=p};var ee=Oe.prototype;ee.checkPropClash=function(i,p,x){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var M=i.key,R;switch(M.type){case"Identifier":R=M.name;break;case"Literal":R=String(M.value);break;default:return}var w=i.kind;if(this.options.ecmaVersion>=6){R==="__proto__"&&w==="init"&&(p.proto&&(x?x.doubleProto<0&&(x.doubleProto=M.start):this.raiseRecoverable(M.start,"Redefinition of __proto__ property")),p.proto=!0);return}R="$"+R;var v=p[R];if(v){var T;w==="init"?T=this.strict&&v.init||v.get||v.set:T=v.init||v[w],T&&this.raiseRecoverable(M.start,"Redefinition of property")}else v=p[R]={init:!1,get:!1,set:!1};v[w]=!0}};ee.parseExpression=function(i,p){var x=this.start,M=this.startLoc,R=this.parseMaybeAssign(i,p);if(this.type===_.comma){var w=this.startNodeAt(x,M);for(w.expressions=[R];this.eat(_.comma);)w.expressions.push(this.parseMaybeAssign(i,p));return this.finishNode(w,"SequenceExpression")}return R};ee.parseMaybeAssign=function(i,p,x){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var M=!1,R=-1,w=-1,v=-1;p?(R=p.parenthesizedAssign,w=p.trailingComma,v=p.doubleProto,p.parenthesizedAssign=p.trailingComma=-1):(p=new ia,M=!0);var T=this.start,t=this.startLoc;(this.type===_.parenL||this.type===_.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var h=this.parseMaybeConditional(i,p);if(x&&(h=x.call(this,h,T,t)),this.type.isAssign){var g=this.startNodeAt(T,t);return g.operator=this.value,this.type===_.eq&&(h=this.toAssignable(h,!1,p)),M||(p.parenthesizedAssign=p.trailingComma=p.doubleProto=-1),p.shorthandAssign>=h.start&&(p.shorthandAssign=-1),this.type===_.eq?this.checkLValPattern(h):this.checkLValSimple(h),g.left=h,this.next(),g.right=this.parseMaybeAssign(i),v>-1&&(p.doubleProto=v),this.finishNode(g,"AssignmentExpression")}else M&&this.checkExpressionErrors(p,!0);return R>-1&&(p.parenthesizedAssign=R),w>-1&&(p.trailingComma=w),h};ee.parseMaybeConditional=function(i,p){var x=this.start,M=this.startLoc,R=this.parseExprOps(i,p);if(this.checkExpressionErrors(p))return R;if(this.eat(_.question)){var w=this.startNodeAt(x,M);return w.test=R,w.consequent=this.parseMaybeAssign(),this.expect(_.colon),w.alternate=this.parseMaybeAssign(i),this.finishNode(w,"ConditionalExpression")}return R};ee.parseExprOps=function(i,p){var x=this.start,M=this.startLoc,R=this.parseMaybeUnary(p,!1,!1,i);return this.checkExpressionErrors(p)||R.start===x&&R.type==="ArrowFunctionExpression"?R:this.parseExprOp(R,x,M,-1,i)};ee.parseExprOp=function(i,p,x,M,R){var w=this.type.binop;if(w!=null&&(!R||this.type!==_._in)&&w>M){var v=this.type===_.logicalOR||this.type===_.logicalAND,T=this.type===_.coalesce;T&&(w=_.logicalAND.binop);var t=this.value;this.next();var h=this.start,g=this.startLoc,o=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,R),h,g,w,R),a=this.buildBinary(p,x,i,o,t,v||T);return(v&&this.type===_.coalesce||T&&(this.type===_.logicalOR||this.type===_.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(a,p,x,M,R)}return i};ee.buildBinary=function(i,p,x,M,R,w){M.type==="PrivateIdentifier"&&this.raise(M.start,"Private identifier can only be left side of binary expression");var v=this.startNodeAt(i,p);return v.left=x,v.operator=R,v.right=M,this.finishNode(v,w?"LogicalExpression":"BinaryExpression")};ee.parseMaybeUnary=function(i,p,x,M){var R=this.start,w=this.startLoc,v;if(this.isContextual("await")&&this.canAwait)v=this.parseAwait(M),p=!0;else if(this.type.prefix){var T=this.startNode(),t=this.type===_.incDec;T.operator=this.value,T.prefix=!0,this.next(),T.argument=this.parseMaybeUnary(null,!0,t,M),this.checkExpressionErrors(i,!0),t?this.checkLValSimple(T.argument):this.strict&&T.operator==="delete"&&AT(T.argument)?this.raiseRecoverable(T.start,"Deleting local variable in strict mode"):T.operator==="delete"&&Fo(T.argument)?this.raiseRecoverable(T.start,"Private fields can not be deleted"):p=!0,v=this.finishNode(T,t?"UpdateExpression":"UnaryExpression")}else if(!p&&this.type===_.privateId)(M||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),v=this.parsePrivateIdent(),this.type!==_._in&&this.unexpected();else{if(v=this.parseExprSubscripts(i,M),this.checkExpressionErrors(i))return v;for(;this.type.postfix&&!this.canInsertSemicolon();){var h=this.startNodeAt(R,w);h.operator=this.value,h.prefix=!1,h.argument=v,this.checkLValSimple(v),this.next(),v=this.finishNode(h,"UpdateExpression")}}if(!x&&this.eat(_.starstar))if(p)this.unexpected(this.lastTokStart);else return this.buildBinary(R,w,v,this.parseMaybeUnary(null,!1,!1,M),"**",!1);else return v};function AT(i){return i.type==="Identifier"||i.type==="ParenthesizedExpression"&&AT(i.expression)}function Fo(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&Fo(i.expression)||i.type==="ParenthesizedExpression"&&Fo(i.expression)}ee.parseExprSubscripts=function(i,p){var x=this.start,M=this.startLoc,R=this.parseExprAtom(i,p);if(R.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return R;var w=this.parseSubscripts(R,x,M,!1,p);return i&&w.type==="MemberExpression"&&(i.parenthesizedAssign>=w.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=w.start&&(i.parenthesizedBind=-1),i.trailingComma>=w.start&&(i.trailingComma=-1)),w};ee.parseSubscripts=function(i,p,x,M,R){for(var w=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,v=!1;;){var T=this.parseSubscript(i,p,x,M,w,v,R);if(T.optional&&(v=!0),T===i||T.type==="ArrowFunctionExpression"){if(v){var t=this.startNodeAt(p,x);t.expression=T,T=this.finishNode(t,"ChainExpression")}return T}i=T}};ee.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(_.arrow)};ee.parseSubscriptAsyncArrow=function(i,p,x,M){return this.parseArrowExpression(this.startNodeAt(i,p),x,!0,M)};ee.parseSubscript=function(i,p,x,M,R,w,v){var T=this.options.ecmaVersion>=11,t=T&&this.eat(_.questionDot);M&&t&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var h=this.eat(_.bracketL);if(h||t&&this.type!==_.parenL&&this.type!==_.backQuote||this.eat(_.dot)){var g=this.startNodeAt(p,x);g.object=i,h?(g.property=this.parseExpression(),this.expect(_.bracketR)):this.type===_.privateId&&i.type!=="Super"?g.property=this.parsePrivateIdent():g.property=this.parseIdent(this.options.allowReserved!=="never"),g.computed=!!h,T&&(g.optional=t),i=this.finishNode(g,"MemberExpression")}else if(!M&&this.eat(_.parenL)){var o=new ia,a=this.yieldPos,r=this.awaitPos,e=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var s=this.parseExprList(_.parenR,this.options.ecmaVersion>=8,!1,o);if(R&&!t&&this.shouldParseAsyncArrow())return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=a,this.awaitPos=r,this.awaitIdentPos=e,this.parseSubscriptAsyncArrow(p,x,s,v);this.checkExpressionErrors(o,!0),this.yieldPos=a||this.yieldPos,this.awaitPos=r||this.awaitPos,this.awaitIdentPos=e||this.awaitIdentPos;var u=this.startNodeAt(p,x);u.callee=i,u.arguments=s,T&&(u.optional=t),i=this.finishNode(u,"CallExpression")}else if(this.type===_.backQuote){(t||w)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var n=this.startNodeAt(p,x);n.tag=i,n.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(n,"TaggedTemplateExpression")}return i};ee.parseExprAtom=function(i,p,x){this.type===_.slash&&this.readRegexp();var M,R=this.potentialArrowAt===this.start;switch(this.type){case _._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),M=this.startNode(),this.next(),this.type===_.parenL&&!this.allowDirectSuper&&this.raise(M.start,"super() call outside constructor of a subclass"),this.type!==_.dot&&this.type!==_.bracketL&&this.type!==_.parenL&&this.unexpected(),this.finishNode(M,"Super");case _._this:return M=this.startNode(),this.next(),this.finishNode(M,"ThisExpression");case _.name:var w=this.start,v=this.startLoc,T=this.containsEsc,t=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!T&&t.name==="async"&&!this.canInsertSemicolon()&&this.eat(_._function))return this.overrideContext(Le.f_expr),this.parseFunction(this.startNodeAt(w,v),0,!1,!0,p);if(R&&!this.canInsertSemicolon()){if(this.eat(_.arrow))return this.parseArrowExpression(this.startNodeAt(w,v),[t],!1,p);if(this.options.ecmaVersion>=8&&t.name==="async"&&this.type===_.name&&!T&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return t=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(_.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(w,v),[t],!0,p)}return t;case _.regexp:var h=this.value;return M=this.parseLiteral(h.value),M.regex={pattern:h.pattern,flags:h.flags},M;case _.num:case _.string:return this.parseLiteral(this.value);case _._null:case _._true:case _._false:return M=this.startNode(),M.value=this.type===_._null?null:this.type===_._true,M.raw=this.type.keyword,this.next(),this.finishNode(M,"Literal");case _.parenL:var g=this.start,o=this.parseParenAndDistinguishExpression(R,p);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(o)&&(i.parenthesizedAssign=g),i.parenthesizedBind<0&&(i.parenthesizedBind=g)),o;case _.bracketL:return M=this.startNode(),this.next(),M.elements=this.parseExprList(_.bracketR,!0,!0,i),this.finishNode(M,"ArrayExpression");case _.braceL:return this.overrideContext(Le.b_expr),this.parseObj(!1,i);case _._function:return M=this.startNode(),this.next(),this.parseFunction(M,0);case _._class:return this.parseClass(this.startNode(),!1);case _._new:return this.parseNew();case _.backQuote:return this.parseTemplate();case _._import:return this.options.ecmaVersion>=11?this.parseExprImport(x):this.unexpected();default:return this.parseExprAtomDefault()}};ee.parseExprAtomDefault=function(){this.unexpected()};ee.parseExprImport=function(i){var p=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===_.parenL&&!i)return this.parseDynamicImport(p);if(this.type===_.dot){var x=this.startNodeAt(p.start,p.loc&&p.loc.start);return x.name="import",p.meta=this.finishNode(x,"Identifier"),this.parseImportMeta(p)}else this.unexpected()};ee.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(_.parenR)?i.options=null:(this.expect(_.comma),this.afterTrailingComma(_.parenR)?i.options=null:(i.options=this.parseMaybeAssign(),this.eat(_.parenR)||(this.expect(_.comma),this.afterTrailingComma(_.parenR)||this.unexpected())));else if(!this.eat(_.parenR)){var p=this.start;this.eat(_.comma)&&this.eat(_.parenR)?this.raiseRecoverable(p,"Trailing comma is not allowed in import()"):this.unexpected(p)}return this.finishNode(i,"ImportExpression")};ee.parseImportMeta=function(i){this.next();var p=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),p&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")};ee.parseLiteral=function(i){var p=this.startNode();return p.value=i,p.raw=this.input.slice(this.start,this.end),p.raw.charCodeAt(p.raw.length-1)===110&&(p.bigint=p.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(p,"Literal")};ee.parseParenExpression=function(){this.expect(_.parenL);var i=this.parseExpression();return this.expect(_.parenR),i};ee.shouldParseArrow=function(i){return!this.canInsertSemicolon()};ee.parseParenAndDistinguishExpression=function(i,p){var x=this.start,M=this.startLoc,R,w=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var v=this.start,T=this.startLoc,t=[],h=!0,g=!1,o=new ia,a=this.yieldPos,r=this.awaitPos,e;for(this.yieldPos=0,this.awaitPos=0;this.type!==_.parenR;)if(h?h=!1:this.expect(_.comma),w&&this.afterTrailingComma(_.parenR,!0)){g=!0;break}else if(this.type===_.ellipsis){e=this.start,t.push(this.parseParenItem(this.parseRestBinding())),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else t.push(this.parseMaybeAssign(!1,o,this.parseParenItem));var s=this.lastTokEnd,u=this.lastTokEndLoc;if(this.expect(_.parenR),i&&this.shouldParseArrow(t)&&this.eat(_.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=a,this.awaitPos=r,this.parseParenArrowList(x,M,t,p);(!t.length||g)&&this.unexpected(this.lastTokStart),e&&this.unexpected(e),this.checkExpressionErrors(o,!0),this.yieldPos=a||this.yieldPos,this.awaitPos=r||this.awaitPos,t.length>1?(R=this.startNodeAt(v,T),R.expressions=t,this.finishNodeAt(R,"SequenceExpression",s,u)):R=t[0]}else R=this.parseParenExpression();if(this.options.preserveParens){var n=this.startNodeAt(x,M);return n.expression=R,this.finishNode(n,"ParenthesizedExpression")}else return R};ee.parseParenItem=function(i){return i};ee.parseParenArrowList=function(i,p,x,M){return this.parseArrowExpression(this.startNodeAt(i,p),x,!1,M)};var i7=[];ee.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===_.dot){var p=this.startNodeAt(i.start,i.loc&&i.loc.start);p.name="new",i.meta=this.finishNode(p,"Identifier"),this.next();var x=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),x&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var M=this.start,R=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),M,R,!0,!1),this.eat(_.parenL)?i.arguments=this.parseExprList(_.parenR,this.options.ecmaVersion>=8,!1):i.arguments=i7,this.finishNode(i,"NewExpression")};ee.parseTemplateElement=function(i){var p=i.isTagged,x=this.startNode();return this.type===_.invalidTemplate?(p||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),x.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):x.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),x.tail=this.type===_.backQuote,this.finishNode(x,"TemplateElement")};ee.parseTemplate=function(i){i===void 0&&(i={});var p=i.isTagged;p===void 0&&(p=!1);var x=this.startNode();this.next(),x.expressions=[];var M=this.parseTemplateElement({isTagged:p});for(x.quasis=[M];!M.tail;)this.type===_.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(_.dollarBraceL),x.expressions.push(this.parseExpression()),this.expect(_.braceR),x.quasis.push(M=this.parseTemplateElement({isTagged:p}));return this.next(),this.finishNode(x,"TemplateLiteral")};ee.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===_.name||this.type===_.num||this.type===_.string||this.type===_.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===_.star)&&!mi.test(this.input.slice(this.lastTokEnd,this.start))};ee.parseObj=function(i,p){var x=this.startNode(),M=!0,R={};for(x.properties=[],this.next();!this.eat(_.braceR);){if(M)M=!1;else if(this.expect(_.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(_.braceR))break;var w=this.parseProperty(i,p);i||this.checkPropClash(w,R,p),x.properties.push(w)}return this.finishNode(x,i?"ObjectPattern":"ObjectExpression")};ee.parseProperty=function(i,p){var x=this.startNode(),M,R,w,v;if(this.options.ecmaVersion>=9&&this.eat(_.ellipsis))return i?(x.argument=this.parseIdent(!1),this.type===_.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(x,"RestElement")):(x.argument=this.parseMaybeAssign(!1,p),this.type===_.comma&&p&&p.trailingComma<0&&(p.trailingComma=this.start),this.finishNode(x,"SpreadElement"));this.options.ecmaVersion>=6&&(x.method=!1,x.shorthand=!1,(i||p)&&(w=this.start,v=this.startLoc),i||(M=this.eat(_.star)));var T=this.containsEsc;return this.parsePropertyName(x),!i&&!T&&this.options.ecmaVersion>=8&&!M&&this.isAsyncProp(x)?(R=!0,M=this.options.ecmaVersion>=9&&this.eat(_.star),this.parsePropertyName(x)):R=!1,this.parsePropertyValue(x,i,M,R,w,v,p,T),this.finishNode(x,"Property")};ee.parseGetterSetter=function(i){i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);var p=i.kind==="get"?0:1;if(i.value.params.length!==p){var x=i.value.start;i.kind==="get"?this.raiseRecoverable(x,"getter should have no params"):this.raiseRecoverable(x,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")};ee.parsePropertyValue=function(i,p,x,M,R,w,v,T){(x||M)&&this.type===_.colon&&this.unexpected(),this.eat(_.colon)?(i.value=p?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,v),i.kind="init"):this.options.ecmaVersion>=6&&this.type===_.parenL?(p&&this.unexpected(),i.kind="init",i.method=!0,i.value=this.parseMethod(x,M)):!p&&!T&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==_.comma&&this.type!==_.braceR&&this.type!==_.eq?((x||M)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((x||M)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=R),i.kind="init",p?i.value=this.parseMaybeDefault(R,w,this.copyNode(i.key)):this.type===_.eq&&v?(v.shorthandAssign<0&&(v.shorthandAssign=this.start),i.value=this.parseMaybeDefault(R,w,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.shorthand=!0):this.unexpected()};ee.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(_.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(_.bracketR),i.key;i.computed=!1}return i.key=this.type===_.num||this.type===_.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ee.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)};ee.parseMethod=function(i,p,x){var M=this.startNode(),R=this.yieldPos,w=this.awaitPos,v=this.awaitIdentPos;return this.initFunction(M),this.options.ecmaVersion>=6&&(M.generator=i),this.options.ecmaVersion>=8&&(M.async=!!p),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Zh(p,M.generator)|zh|(x?CT:0)),this.expect(_.parenL),M.params=this.parseBindingList(_.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(M,!1,!0,!1),this.yieldPos=R,this.awaitPos=w,this.awaitIdentPos=v,this.finishNode(M,"FunctionExpression")};ee.parseArrowExpression=function(i,p,x,M){var R=this.yieldPos,w=this.awaitPos,v=this.awaitIdentPos;return this.enterScope(Zh(x,!1)|yT),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!x),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(p,!0),this.parseFunctionBody(i,!0,!1,M),this.yieldPos=R,this.awaitPos=w,this.awaitIdentPos=v,this.finishNode(i,"ArrowFunctionExpression")};ee.parseFunctionBody=function(i,p,x,M){var R=p&&this.type!==_.braceL,w=this.strict,v=!1;if(R)i.body=this.parseMaybeAssign(M),i.expression=!0,this.checkParams(i,!1);else{var T=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!w||T)&&(v=this.strictDirective(this.end),v&&T&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var t=this.labels;this.labels=[],v&&(this.strict=!0),this.checkParams(i,!w&&!v&&!p&&!x&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,ET),i.body=this.parseBlock(!1,void 0,v&&!w),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=t}this.exitScope()};ee.isSimpleParamList=function(i){for(var p=0,x=i;p<x.length;p+=1){var M=x[p];if(M.type!=="Identifier")return!1}return!0};ee.checkParams=function(i,p){for(var x=Object.create(null),M=0,R=i.params;M<R.length;M+=1){var w=R[M];this.checkLValInnerPattern(w,Yh,p?null:x)}};ee.parseExprList=function(i,p,x,M){for(var R=[],w=!0;!this.eat(i);){if(w)w=!1;else if(this.expect(_.comma),p&&this.afterTrailingComma(i))break;var v=void 0;x&&this.type===_.comma?v=null:this.type===_.ellipsis?(v=this.parseSpread(M),M&&this.type===_.comma&&M.trailingComma<0&&(M.trailingComma=this.start)):v=this.parseMaybeAssign(!1,M),R.push(v)}return R};ee.checkUnreserved=function(i){var p=i.start,x=i.end,M=i.name;if(this.inGenerator&&M==="yield"&&this.raiseRecoverable(p,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&M==="await"&&this.raiseRecoverable(p,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&M==="arguments"&&this.raiseRecoverable(p,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(M==="arguments"||M==="await")&&this.raise(p,"Cannot use "+M+" in class static initialization block"),this.keywords.test(M)&&this.raise(p,"Unexpected keyword '"+M+"'"),!(this.options.ecmaVersion<6&&this.input.slice(p,x).indexOf("\\")!==-1)){var R=this.strict?this.reservedWordsStrict:this.reservedWords;R.test(M)&&(!this.inAsync&&M==="await"&&this.raiseRecoverable(p,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(p,"The keyword '"+M+"' is reserved"))}};ee.parseIdent=function(i){var p=this.parseIdentNode();return this.next(!!i),this.finishNode(p,"Identifier"),i||(this.checkUnreserved(p),p.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=p.start)),p};ee.parseIdentNode=function(){var i=this.startNode();return this.type===_.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=_.name):this.unexpected(),i};ee.parsePrivateIdent=function(){var i=this.startNode();return this.type===_.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i};ee.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var p=this.startNode();return this.next(),this.type===_.semi||this.canInsertSemicolon()||this.type!==_.star&&!this.type.startsExpr?(p.delegate=!1,p.argument=null):(p.delegate=this.eat(_.star),p.argument=this.parseMaybeAssign(i)),this.finishNode(p,"YieldExpression")};ee.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var p=this.startNode();return this.next(),p.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(p,"AwaitExpression")};var Br=Oe.prototype;Br.raise=function(i,p){var x=gT(this.input,i);p+=" ("+x.line+":"+x.column+")";var M=new SyntaxError(p);throw M.pos=i,M.loc=x,M.raisedAt=this.pos,M};Br.raiseRecoverable=Br.raise;Br.curPosition=function(){if(this.options.locations)return new Yn(this.curLine,this.pos-this.lineStart)};var ms=Oe.prototype,s7=function(i){this.flags=i,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};ms.enterScope=function(i){this.scopeStack.push(new s7(i))};ms.exitScope=function(){this.scopeStack.pop()};ms.treatFunctionsAsVarInScope=function(i){return i.flags&un||!this.inModule&&i.flags&Un};ms.declareName=function(i,p,x){var M=!1;if(p===es){var R=this.currentScope();M=R.lexical.indexOf(i)>-1||R.functions.indexOf(i)>-1||R.var.indexOf(i)>-1,R.lexical.push(i),this.inModule&&R.flags&Un&&delete this.undefinedExports[i]}else if(p===MT){var w=this.currentScope();w.lexical.push(i)}else if(p===ST){var v=this.currentScope();this.treatFunctionsAsVar?M=v.lexical.indexOf(i)>-1:M=v.lexical.indexOf(i)>-1||v.var.indexOf(i)>-1,v.functions.push(i)}else for(var T=this.scopeStack.length-1;T>=0;--T){var t=this.scopeStack[T];if(t.lexical.indexOf(i)>-1&&!(t.flags&TT&&t.lexical[0]===i)||!this.treatFunctionsAsVarInScope(t)&&t.functions.indexOf(i)>-1){M=!0;break}if(t.var.push(i),this.inModule&&t.flags&Un&&delete this.undefinedExports[i],t.flags&Wh)break}M&&this.raiseRecoverable(x,"Identifier '"+i+"' has already been declared")};ms.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)};ms.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};ms.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var p=this.scopeStack[i];if(p.flags&Wh)return p}};ms.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var p=this.scopeStack[i];if(p.flags&Wh&&!(p.flags&yT))return p}};var sa=function(i,p,x){this.type="",this.start=p,this.end=0,i.options.locations&&(this.loc=new ea(i,x)),i.options.directSourceFile&&(this.sourceFile=i.options.directSourceFile),i.options.ranges&&(this.range=[p,0])},_n=Oe.prototype;_n.startNode=function(){return new sa(this,this.start,this.startLoc)};_n.startNodeAt=function(i,p){return new sa(this,i,p)};function RT(i,p,x,M){return i.type=p,i.end=x,this.options.locations&&(i.loc.end=M),this.options.ranges&&(i.range[1]=x),i}_n.finishNode=function(i,p){return RT.call(this,i,p,this.lastTokEnd,this.lastTokEndLoc)};_n.finishNodeAt=function(i,p,x,M){return RT.call(this,i,p,x,M)};_n.copyNode=function(i){var p=new sa(this,i.start,this.startLoc);for(var x in i)p[x]=i[x];return p};var n7="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",FT="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",LT=FT+" Extended_Pictographic",DT=LT,wT=DT+" EBase EComp EMod EPres ExtPict",GT=wT,r7=GT,a7={9:FT,10:LT,11:DT,12:wT,13:GT,14:r7},o7="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",h7={9:"",10:"",11:"",12:"",13:"",14:o7},dl="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",bT="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",IT=bT+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",OT=IT+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",BT=OT+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",XT=BT+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",u7=XT+" "+n7,l7={9:bT,10:IT,11:OT,12:BT,13:XT,14:u7},NT={};function f7(i){var p=NT[i]={binary:us(a7[i]+" "+dl),binaryOfStrings:us(h7[i]),nonBinary:{General_Category:us(dl),Script:us(l7[i])}};p.nonBinary.Script_Extensions=p.nonBinary.Script,p.nonBinary.gc=p.nonBinary.General_Category,p.nonBinary.sc=p.nonBinary.Script,p.nonBinary.scx=p.nonBinary.Script_Extensions}for(var Ya=0,cl=[9,10,11,12,13,14];Ya<cl.length;Ya+=1){var d7=cl[Ya];f7(d7)}var Yt=Oe.prototype,Xr=function(i,p){this.parent=i,this.base=p||this};Xr.prototype.separatedFrom=function(i){for(var p=this;p;p=p.parent)for(var x=i;x;x=x.parent)if(p.base===x.base&&p!==x)return!0;return!1};Xr.prototype.sibling=function(){return new Xr(this.parent,this.base)};var Yi=function(i){this.parser=i,this.validFlags="gim"+(i.options.ecmaVersion>=6?"uy":"")+(i.options.ecmaVersion>=9?"s":"")+(i.options.ecmaVersion>=13?"d":"")+(i.options.ecmaVersion>=15?"v":""),this.unicodeProperties=NT[i.options.ecmaVersion>=14?14:i.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Yi.prototype.reset=function(i,p,x){var M=x.indexOf("v")!==-1,R=x.indexOf("u")!==-1;this.start=i|0,this.source=p+"",this.flags=x,M&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=R&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=R&&this.parser.options.ecmaVersion>=9)};Yi.prototype.raise=function(i){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+i)};Yi.prototype.at=function(i,p){p===void 0&&(p=!1);var x=this.source,M=x.length;if(i>=M)return-1;var R=x.charCodeAt(i);if(!(p||this.switchU)||R<=55295||R>=57344||i+1>=M)return R;var w=x.charCodeAt(i+1);return w>=56320&&w<=57343?(R<<10)+w-56613888:R};Yi.prototype.nextIndex=function(i,p){p===void 0&&(p=!1);var x=this.source,M=x.length;if(i>=M)return M;var R=x.charCodeAt(i),w;return!(p||this.switchU)||R<=55295||R>=57344||i+1>=M||(w=x.charCodeAt(i+1))<56320||w>57343?i+1:i+2};Yi.prototype.current=function(i){return i===void 0&&(i=!1),this.at(this.pos,i)};Yi.prototype.lookahead=function(i){return i===void 0&&(i=!1),this.at(this.nextIndex(this.pos,i),i)};Yi.prototype.advance=function(i){i===void 0&&(i=!1),this.pos=this.nextIndex(this.pos,i)};Yi.prototype.eat=function(i,p){return p===void 0&&(p=!1),this.current(p)===i?(this.advance(p),!0):!1};Yi.prototype.eatChars=function(i,p){p===void 0&&(p=!1);for(var x=this.pos,M=0,R=i;M<R.length;M+=1){var w=R[M],v=this.at(x,p);if(v===-1||v!==w)return!1;x=this.nextIndex(x,p)}return this.pos=x,!0};Yt.validateRegExpFlags=function(i){for(var p=i.validFlags,x=i.flags,M=!1,R=!1,w=0;w<x.length;w++){var v=x.charAt(w);p.indexOf(v)===-1&&this.raise(i.start,"Invalid regular expression flag"),x.indexOf(v,w+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),v==="u"&&(M=!0),v==="v"&&(R=!0)}this.options.ecmaVersion>=15&&M&&R&&this.raise(i.start,"Invalid regular expression flag")};function c7(i){for(var p in i)return!0;return!1}Yt.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&c7(i.groupNames)&&(i.switchN=!0,this.regexp_pattern(i))};Yt.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames=Object.create(null),i.backReferenceNames.length=0,i.branchID=null,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var p=0,x=i.backReferenceNames;p<x.length;p+=1){var M=x[p];i.groupNames[M]||i.raise("Invalid named capture referenced")}};Yt.regexp_disjunction=function(i){var p=this.options.ecmaVersion>=16;for(p&&(i.branchID=new Xr(i.branchID,null)),this.regexp_alternative(i);i.eat(124);)p&&(i.branchID=i.branchID.sibling()),this.regexp_alternative(i);p&&(i.branchID=i.branchID.parent),this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")};Yt.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););};Yt.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1};Yt.regexp_eatAssertion=function(i){var p=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=p}if(i.eat(40)&&i.eat(63)){var x=!1;if(this.options.ecmaVersion>=9&&(x=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!x,!0}return i.pos=p,!1};Yt.regexp_eatQuantifier=function(i,p){return p===void 0&&(p=!1),this.regexp_eatQuantifierPrefix(i,p)?(i.eat(63),!0):!1};Yt.regexp_eatQuantifierPrefix=function(i,p){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,p)};Yt.regexp_eatBracedQuantifier=function(i,p){var x=i.pos;if(i.eat(123)){var M=0,R=-1;if(this.regexp_eatDecimalDigits(i)&&(M=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(R=i.lastIntValue),i.eat(125)))return R!==-1&&R<M&&!p&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!p&&i.raise("Incomplete quantifier"),i.pos=x}return!1};Yt.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)};Yt.regexp_eatReverseSolidusAtomEscape=function(i){var p=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=p}return!1};Yt.regexp_eatUncapturingGroup=function(i){var p=i.pos;if(i.eat(40)){if(i.eat(63)){if(this.options.ecmaVersion>=16){var x=this.regexp_eatModifiers(i),M=i.eat(45);if(x||M){for(var R=0;R<x.length;R++){var w=x.charAt(R);x.indexOf(w,R+1)>-1&&i.raise("Duplicate regular expression modifiers")}if(M){var v=this.regexp_eatModifiers(i);!x&&!v&&i.current()===58&&i.raise("Invalid regular expression modifiers");for(var T=0;T<v.length;T++){var t=v.charAt(T);(v.indexOf(t,T+1)>-1||x.indexOf(t)>-1)&&i.raise("Duplicate regular expression modifiers")}}}}if(i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}}i.pos=p}return!1};Yt.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1};Yt.regexp_eatModifiers=function(i){for(var p="",x=0;(x=i.current())!==-1&&p7(x);)p+=_i(x),i.advance();return p};function p7(i){return i===105||i===109||i===115}Yt.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)};Yt.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1};Yt.regexp_eatSyntaxCharacter=function(i){var p=i.current();return VT(p)?(i.lastIntValue=p,i.advance(),!0):!1};function VT(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}Yt.regexp_eatPatternCharacters=function(i){for(var p=i.pos,x=0;(x=i.current())!==-1&&!VT(x);)i.advance();return i.pos!==p};Yt.regexp_eatExtendedPatternCharacter=function(i){var p=i.current();return p!==-1&&p!==36&&!(p>=40&&p<=43)&&p!==46&&p!==63&&p!==91&&p!==94&&p!==124?(i.advance(),!0):!1};Yt.regexp_groupSpecifier=function(i){if(i.eat(63)){this.regexp_eatGroupName(i)||i.raise("Invalid group");var p=this.options.ecmaVersion>=16,x=i.groupNames[i.lastStringValue];if(x)if(p)for(var M=0,R=x;M<R.length;M+=1){var w=R[M];w.separatedFrom(i.branchID)||i.raise("Duplicate capture group name")}else i.raise("Duplicate capture group name");p?(x||(i.groupNames[i.lastStringValue]=[])).push(i.branchID):i.groupNames[i.lastStringValue]=!0}};Yt.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1};Yt.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=_i(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=_i(i.lastIntValue);return!0}return!1};Yt.regexp_eatRegExpIdentifierStart=function(i){var p=i.pos,x=this.options.ecmaVersion>=11,M=i.current(x);return i.advance(x),M===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,x)&&(M=i.lastIntValue),v7(M)?(i.lastIntValue=M,!0):(i.pos=p,!1)};function v7(i){return qi(i,!0)||i===36||i===95}Yt.regexp_eatRegExpIdentifierPart=function(i){var p=i.pos,x=this.options.ecmaVersion>=11,M=i.current(x);return i.advance(x),M===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,x)&&(M=i.lastIntValue),m7(M)?(i.lastIntValue=M,!0):(i.pos=p,!1)};function m7(i){return tn(i,!0)||i===36||i===95||i===8204||i===8205}Yt.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)};Yt.regexp_eatBackReference=function(i){var p=i.pos;if(this.regexp_eatDecimalEscape(i)){var x=i.lastIntValue;if(i.switchU)return x>i.maxBackReference&&(i.maxBackReference=x),!0;if(x<=i.numCapturingParens)return!0;i.pos=p}return!1};Yt.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1};Yt.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)};Yt.regexp_eatCControlLetter=function(i){var p=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=p}return!1};Yt.regexp_eatZero=function(i){return i.current()===48&&!na(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1};Yt.regexp_eatControlEscape=function(i){var p=i.current();return p===116?(i.lastIntValue=9,i.advance(),!0):p===110?(i.lastIntValue=10,i.advance(),!0):p===118?(i.lastIntValue=11,i.advance(),!0):p===102?(i.lastIntValue=12,i.advance(),!0):p===114?(i.lastIntValue=13,i.advance(),!0):!1};Yt.regexp_eatControlLetter=function(i){var p=i.current();return zT(p)?(i.lastIntValue=p%32,i.advance(),!0):!1};function zT(i){return i>=65&&i<=90||i>=97&&i<=122}Yt.regexp_eatRegExpUnicodeEscapeSequence=function(i,p){p===void 0&&(p=!1);var x=i.pos,M=p||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var R=i.lastIntValue;if(M&&R>=55296&&R<=56319){var w=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var v=i.lastIntValue;if(v>=56320&&v<=57343)return i.lastIntValue=(R-55296)*1024+(v-56320)+65536,!0}i.pos=w,i.lastIntValue=R}return!0}if(M&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&g7(i.lastIntValue))return!0;M&&i.raise("Invalid unicode escape"),i.pos=x}return!1};function g7(i){return i>=0&&i<=1114111}Yt.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var p=i.current();return p!==99&&(!i.switchN||p!==107)?(i.lastIntValue=p,i.advance(),!0):!1};Yt.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var p=i.current();if(p>=49&&p<=57){do i.lastIntValue=10*i.lastIntValue+(p-48),i.advance();while((p=i.current())>=48&&p<=57);return!0}return!1};var WT=0,ts=1,di=2;Yt.regexp_eatCharacterClassEscape=function(i){var p=i.current();if(x7(p))return i.lastIntValue=-1,i.advance(),ts;var x=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((x=p===80)||p===112)){i.lastIntValue=-1,i.advance();var M;if(i.eat(123)&&(M=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return x&&M===di&&i.raise("Invalid property name"),M;i.raise("Invalid property name")}return WT};function x7(i){return i===100||i===68||i===115||i===83||i===119||i===87}Yt.regexp_eatUnicodePropertyValueExpression=function(i){var p=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var x=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var M=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,x,M),ts}}if(i.pos=p,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var R=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,R)}return WT};Yt.regexp_validateUnicodePropertyNameAndValue=function(i,p,x){hn(i.unicodeProperties.nonBinary,p)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[p].test(x)||i.raise("Invalid property value")};Yt.regexp_validateUnicodePropertyNameOrValue=function(i,p){if(i.unicodeProperties.binary.test(p))return ts;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(p))return di;i.raise("Invalid property name")};Yt.regexp_eatUnicodePropertyName=function(i){var p=0;for(i.lastStringValue="";ZT(p=i.current());)i.lastStringValue+=_i(p),i.advance();return i.lastStringValue!==""};function ZT(i){return zT(i)||i===95}Yt.regexp_eatUnicodePropertyValue=function(i){var p=0;for(i.lastStringValue="";y7(p=i.current());)i.lastStringValue+=_i(p),i.advance();return i.lastStringValue!==""};function y7(i){return ZT(i)||na(i)}Yt.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)};Yt.regexp_eatCharacterClass=function(i){if(i.eat(91)){var p=i.eat(94),x=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),p&&x===di&&i.raise("Negated character class may contain strings"),!0}return!1};Yt.regexp_classContents=function(i){return i.current()===93?ts:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),ts)};Yt.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var p=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var x=i.lastIntValue;i.switchU&&(p===-1||x===-1)&&i.raise("Invalid character class"),p!==-1&&x!==-1&&p>x&&i.raise("Range out of order in character class")}}};Yt.regexp_eatClassAtom=function(i){var p=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var x=i.current();(x===99||HT(x))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=p}var M=i.current();return M!==93?(i.lastIntValue=M,i.advance(),!0):!1};Yt.regexp_eatClassEscape=function(i){var p=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=p}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)};Yt.regexp_classSetExpression=function(i){var p=ts,x;if(!this.regexp_eatClassSetRange(i))if(x=this.regexp_eatClassSetOperand(i)){x===di&&(p=di);for(var M=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(x=this.regexp_eatClassSetOperand(i))){x!==di&&(p=ts);continue}i.raise("Invalid character in character class")}if(M!==i.pos)return p;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(M!==i.pos)return p}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(x=this.regexp_eatClassSetOperand(i),!x)return p;x===di&&(p=di)}};Yt.regexp_eatClassSetRange=function(i){var p=i.pos;if(this.regexp_eatClassSetCharacter(i)){var x=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var M=i.lastIntValue;return x!==-1&&M!==-1&&x>M&&i.raise("Range out of order in character class"),!0}i.pos=p}return!1};Yt.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?ts:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)};Yt.regexp_eatNestedClass=function(i){var p=i.pos;if(i.eat(91)){var x=i.eat(94),M=this.regexp_classContents(i);if(i.eat(93))return x&&M===di&&i.raise("Negated character class may contain strings"),M;i.pos=p}if(i.eat(92)){var R=this.regexp_eatCharacterClassEscape(i);if(R)return R;i.pos=p}return null};Yt.regexp_eatClassStringDisjunction=function(i){var p=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var x=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return x}else i.raise("Invalid escape");i.pos=p}return null};Yt.regexp_classStringDisjunctionContents=function(i){for(var p=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===di&&(p=di);return p};Yt.regexp_classString=function(i){for(var p=0;this.regexp_eatClassSetCharacter(i);)p++;return p===1?ts:di};Yt.regexp_eatClassSetCharacter=function(i){var p=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=p,!1);var x=i.current();return x<0||x===i.lookahead()&&T7(x)||C7(x)?!1:(i.advance(),i.lastIntValue=x,!0)};function T7(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function C7(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}Yt.regexp_eatClassSetReservedPunctuator=function(i){var p=i.current();return S7(p)?(i.lastIntValue=p,i.advance(),!0):!1};function S7(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}Yt.regexp_eatClassControlLetter=function(i){var p=i.current();return na(p)||p===95?(i.lastIntValue=p%32,i.advance(),!0):!1};Yt.regexp_eatHexEscapeSequence=function(i){var p=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=p}return!1};Yt.regexp_eatDecimalDigits=function(i){var p=i.pos,x=0;for(i.lastIntValue=0;na(x=i.current());)i.lastIntValue=10*i.lastIntValue+(x-48),i.advance();return i.pos!==p};function na(i){return i>=48&&i<=57}Yt.regexp_eatHexDigits=function(i){var p=i.pos,x=0;for(i.lastIntValue=0;YT(x=i.current());)i.lastIntValue=16*i.lastIntValue+UT(x),i.advance();return i.pos!==p};function YT(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function UT(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}Yt.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var p=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var x=i.lastIntValue;p<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=p*64+x*8+i.lastIntValue:i.lastIntValue=p*8+x}else i.lastIntValue=p;return!0}return!1};Yt.regexp_eatOctalDigit=function(i){var p=i.current();return HT(p)?(i.lastIntValue=p-48,i.advance(),!0):(i.lastIntValue=0,!1)};function HT(i){return i>=48&&i<=55}Yt.regexp_eatFixedHexDigits=function(i,p){var x=i.pos;i.lastIntValue=0;for(var M=0;M<p;++M){var R=i.current();if(!YT(R))return i.pos=x,!1;i.lastIntValue=16*i.lastIntValue+UT(R),i.advance()}return!0};var Hh=function(i){this.type=i.type,this.value=i.value,this.start=i.start,this.end=i.end,i.options.locations&&(this.loc=new ea(i,i.startLoc,i.endLoc)),i.options.ranges&&(this.range=[i.start,i.end])},le=Oe.prototype;le.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Hh(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};le.getToken=function(){return this.next(),new Hh(this)};typeof Symbol<"u"&&(le[Symbol.iterator]=function(){var i=this;return{next:function(){var p=i.getToken();return{done:p.type===_.eof,value:p}}}});le.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(_.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())};le.readToken=function(i){return qi(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)};le.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var p=this.input.charCodeAt(this.pos+1);return p<=56319||p>=57344?i:(i<<10)+p-56613888};le.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),p=this.pos,x=this.input.indexOf("*/",this.pos+=2);if(x===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=x+2,this.options.locations)for(var M=void 0,R=p;(M=pT(this.input,R,this.pos))>-1;)++this.curLine,R=this.lineStart=M;this.options.onComment&&this.options.onComment(!0,this.input.slice(p+2,x),p,this.pos,i,this.curPosition())};le.skipLineComment=function(i){for(var p=this.pos,x=this.options.onComment&&this.curPosition(),M=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!on(M);)M=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(p+i,this.pos),p,this.pos,x,this.curPosition())};le.skipSpace=function(){t:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(i>8&&i<14||i>=5760&&vT.test(String.fromCharCode(i)))++this.pos;else break t}}};le.finishToken=function(i,p){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var x=this.type;this.type=i,this.value=p,this.updateContext(x)};le.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var p=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&p===46?(this.pos+=3,this.finishToken(_.ellipsis)):(++this.pos,this.finishToken(_.dot))};le.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(_.assign,2):this.finishOp(_.slash,1)};le.readToken_mult_modulo_exp=function(i){var p=this.input.charCodeAt(this.pos+1),x=1,M=i===42?_.star:_.modulo;return this.options.ecmaVersion>=7&&i===42&&p===42&&(++x,M=_.starstar,p=this.input.charCodeAt(this.pos+2)),p===61?this.finishOp(_.assign,x+1):this.finishOp(M,x)};le.readToken_pipe_amp=function(i){var p=this.input.charCodeAt(this.pos+1);if(p===i){if(this.options.ecmaVersion>=12){var x=this.input.charCodeAt(this.pos+2);if(x===61)return this.finishOp(_.assign,3)}return this.finishOp(i===124?_.logicalOR:_.logicalAND,2)}return p===61?this.finishOp(_.assign,2):this.finishOp(i===124?_.bitwiseOR:_.bitwiseAND,1)};le.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(_.assign,2):this.finishOp(_.bitwiseXOR,1)};le.readToken_plus_min=function(i){var p=this.input.charCodeAt(this.pos+1);return p===i?p===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||mi.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(_.incDec,2):p===61?this.finishOp(_.assign,2):this.finishOp(_.plusMin,1)};le.readToken_lt_gt=function(i){var p=this.input.charCodeAt(this.pos+1),x=1;return p===i?(x=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+x)===61?this.finishOp(_.assign,x+1):this.finishOp(_.bitShift,x)):p===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(p===61&&(x=2),this.finishOp(_.relational,x))};le.readToken_eq_excl=function(i){var p=this.input.charCodeAt(this.pos+1);return p===61?this.finishOp(_.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&p===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(_.arrow)):this.finishOp(i===61?_.eq:_.prefix,1)};le.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var p=this.input.charCodeAt(this.pos+1);if(p===46){var x=this.input.charCodeAt(this.pos+2);if(x<48||x>57)return this.finishOp(_.questionDot,2)}if(p===63){if(i>=12){var M=this.input.charCodeAt(this.pos+2);if(M===61)return this.finishOp(_.assign,3)}return this.finishOp(_.coalesce,2)}}return this.finishOp(_.question,1)};le.readToken_numberSign=function(){var i=this.options.ecmaVersion,p=35;if(i>=13&&(++this.pos,p=this.fullCharCodeAtPos(),qi(p,!0)||p===92))return this.finishToken(_.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+_i(p)+"'")};le.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(_.parenL);case 41:return++this.pos,this.finishToken(_.parenR);case 59:return++this.pos,this.finishToken(_.semi);case 44:return++this.pos,this.finishToken(_.comma);case 91:return++this.pos,this.finishToken(_.bracketL);case 93:return++this.pos,this.finishToken(_.bracketR);case 123:return++this.pos,this.finishToken(_.braceL);case 125:return++this.pos,this.finishToken(_.braceR);case 58:return++this.pos,this.finishToken(_.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(_.backQuote);case 48:var p=this.input.charCodeAt(this.pos+1);if(p===120||p===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(p===111||p===79)return this.readRadixNumber(8);if(p===98||p===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(_.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+_i(i)+"'")};le.finishOp=function(i,p){var x=this.input.slice(this.pos,this.pos+p);return this.pos+=p,this.finishToken(i,x)};le.readRegexp=function(){for(var i,p,x=this.pos;;){this.pos>=this.input.length&&this.raise(x,"Unterminated regular expression");var M=this.input.charAt(this.pos);if(mi.test(M)&&this.raise(x,"Unterminated regular expression"),i)i=!1;else{if(M==="[")p=!0;else if(M==="]"&&p)p=!1;else if(M==="/"&&!p)break;i=M==="\\"}++this.pos}var R=this.input.slice(x,this.pos);++this.pos;var w=this.pos,v=this.readWord1();this.containsEsc&&this.unexpected(w);var T=this.regexpState||(this.regexpState=new Yi(this));T.reset(x,R,v),this.validateRegExpFlags(T),this.validateRegExpPattern(T);var t=null;try{t=new RegExp(R,v)}catch{}return this.finishToken(_.regexp,{pattern:R,flags:v,value:t})};le.readInt=function(i,p,x){for(var M=this.options.ecmaVersion>=12&&p===void 0,R=x&&this.input.charCodeAt(this.pos)===48,w=this.pos,v=0,T=0,t=0,h=p??1/0;t<h;++t,++this.pos){var g=this.input.charCodeAt(this.pos),o=void 0;if(M&&g===95){R&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),T===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),t===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),T=g;continue}if(g>=97?o=g-97+10:g>=65?o=g-65+10:g>=48&&g<=57?o=g-48:o=1/0,o>=i)break;T=g,v=v*i+o}return M&&T===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===w||p!=null&&this.pos-w!==p?null:v};function M7(i,p){return p?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function KT(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}le.readRadixNumber=function(i){var p=this.pos;this.pos+=2;var x=this.readInt(i);return x==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(x=KT(this.input.slice(p,this.pos)),++this.pos):qi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(_.num,x)};le.readNumber=function(i){var p=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(p,"Invalid number");var x=this.pos-p>=2&&this.input.charCodeAt(p)===48;x&&this.strict&&this.raise(p,"Invalid number");var M=this.input.charCodeAt(this.pos);if(!x&&!i&&this.options.ecmaVersion>=11&&M===110){var R=KT(this.input.slice(p,this.pos));return++this.pos,qi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(_.num,R)}x&&/[89]/.test(this.input.slice(p,this.pos))&&(x=!1),M===46&&!x&&(++this.pos,this.readInt(10),M=this.input.charCodeAt(this.pos)),(M===69||M===101)&&!x&&(M=this.input.charCodeAt(++this.pos),(M===43||M===45)&&++this.pos,this.readInt(10)===null&&this.raise(p,"Invalid number")),qi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var w=M7(this.input.slice(p,this.pos),x);return this.finishToken(_.num,w)};le.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),p;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var x=++this.pos;p=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,p>1114111&&this.invalidStringToken(x,"Code point out of bounds")}else p=this.readHexChar(4);return p};le.readString=function(i){for(var p="",x=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var M=this.input.charCodeAt(this.pos);if(M===i)break;M===92?(p+=this.input.slice(x,this.pos),p+=this.readEscapedChar(!1),x=this.pos):M===8232||M===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(on(M)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return p+=this.input.slice(x,this.pos++),this.finishToken(_.string,p)};var kT={};le.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===kT)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1};le.invalidStringToken=function(i,p){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw kT;this.raise(i,p)};le.readTmplToken=function(){for(var i="",p=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var x=this.input.charCodeAt(this.pos);if(x===96||x===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===_.template||this.type===_.invalidTemplate)?x===36?(this.pos+=2,this.finishToken(_.dollarBraceL)):(++this.pos,this.finishToken(_.backQuote)):(i+=this.input.slice(p,this.pos),this.finishToken(_.template,i));if(x===92)i+=this.input.slice(p,this.pos),i+=this.readEscapedChar(!0),p=this.pos;else if(on(x)){switch(i+=this.input.slice(p,this.pos),++this.pos,x){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(x);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),p=this.pos}else++this.pos}};le.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(_.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};le.readEscapedChar=function(i){var p=this.input.charCodeAt(++this.pos);switch(++this.pos,p){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return _i(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var x=this.pos-1;this.invalidStringToken(x,"Invalid escape sequence in template string")}default:if(p>=48&&p<=55){var M=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],R=parseInt(M,8);return R>255&&(M=M.slice(0,-1),R=parseInt(M,8)),this.pos+=M.length-1,p=this.input.charCodeAt(this.pos),(M!=="0"||p===56||p===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-M.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(R)}return on(p)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(p)}};le.readHexChar=function(i){var p=this.pos,x=this.readInt(16,i);return x===null&&this.invalidStringToken(p,"Bad character escape sequence"),x};le.readWord1=function(){this.containsEsc=!1;for(var i="",p=!0,x=this.pos,M=this.options.ecmaVersion>=6;this.pos<this.input.length;){var R=this.fullCharCodeAtPos();if(tn(R,M))this.pos+=R<=65535?1:2;else if(R===92){this.containsEsc=!0,i+=this.input.slice(x,this.pos);var w=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var v=this.readCodePoint();(p?qi:tn)(v,M)||this.invalidStringToken(w,"Invalid Unicode escape"),i+=_i(v),x=this.pos}else break;p=!1}return i+this.input.slice(x,this.pos)};le.readWord=function(){var i=this.readWord1(),p=_.name;return this.keywords.test(i)&&(p=Nh[i]),this.finishToken(p,i)};var E7="8.14.0";Oe.acorn={Parser:Oe,version:E7,defaultOptions:Ao,Position:Yn,SourceLocation:ea,getLineInfo:gT,Node:sa,TokenType:pe,tokTypes:_,keywordTypes:Nh,TokContext:Si,tokContexts:Le,isIdentifierChar:tn,isIdentifierStart:qi,Token:Hh,isNewLine:on,lineBreak:mi,lineBreakG:Kw,nonASCIIwhitespace:vT};function P7(i,p){return Oe.parse(i,p)}var A7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JT(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function R7(i){if(i.__esModule)return i;var p=i.default;if(typeof p=="function"){var x=function M(){return this instanceof M?Reflect.construct(p,arguments,this.constructor):p.apply(this,arguments)};x.prototype=p.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(i).forEach(function(M){var R=Object.getOwnPropertyDescriptor(i,M);Object.defineProperty(x,M,R.get?R:{enumerable:!0,get:function(){return i[M]}})}),x}var pl={},vl={},ml;function F7(){return ml||(ml=1,(function(i){(function p(x){var M,R,w,v,T,t;function h(f){var m={},y,S;for(y in f)f.hasOwnProperty(y)&&(S=f[y],typeof S=="object"&&S!==null?m[y]=h(S):m[y]=S);return m}function g(f,m){var y,S,C,E;for(S=f.length,C=0;S;)y=S>>>1,E=C+y,m(f[E])?S=y:(C=E+1,S-=y+1);return C}M={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},w={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},v={},T={},t={},R={Break:v,Skip:T,Remove:t};function o(f,m){this.parent=f,this.key=m}o.prototype.replace=function(f){this.parent[this.key]=f},o.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function a(f,m,y,S){this.node=f,this.path=m,this.wrap=y,this.ref=S}function r(){}r.prototype.path=function(){var f,m,y,S,C,E;function P(A,F){if(Array.isArray(F))for(y=0,S=F.length;y<S;++y)A.push(F[y]);else A.push(F)}if(!this.__current.path)return null;for(C=[],f=2,m=this.__leavelist.length;f<m;++f)E=this.__leavelist[f],P(C,E.path);return P(C,this.__current.path),C},r.prototype.type=function(){var f=this.current();return f.type||this.__current.wrap},r.prototype.parents=function(){var f,m,y;for(y=[],f=1,m=this.__leavelist.length;f<m;++f)y.push(this.__leavelist[f].node);return y},r.prototype.current=function(){return this.__current.node},r.prototype.__execute=function(f,m){var y,S;return S=void 0,y=this.__current,this.__current=m,this.__state=null,f&&(S=f.call(this,m.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=y,S},r.prototype.notify=function(f){this.__state=f},r.prototype.skip=function(){this.notify(T)},r.prototype.break=function(){this.notify(v)},r.prototype.remove=function(){this.notify(t)},r.prototype.__initialize=function(f,m){this.visitor=m,this.root=f,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,m.fallback==="iteration"?this.__fallback=Object.keys:typeof m.fallback=="function"&&(this.__fallback=m.fallback),this.__keys=w,m.keys&&(this.__keys=Object.assign(Object.create(this.__keys),m.keys))};function e(f){return f==null?!1:typeof f=="object"&&typeof f.type=="string"}function s(f,m){return(f===M.ObjectExpression||f===M.ObjectPattern)&&m==="properties"}function u(f,m){for(var y=f.length-1;y>=0;--y)if(f[y].node===m)return!0;return!1}r.prototype.traverse=function(f,m){var y,S,C,E,P,A,F,G,D,L,b,I;for(this.__initialize(f,m),I={},y=this.__worklist,S=this.__leavelist,y.push(new a(f,null,null,null)),S.push(new a(null,null,null,null));y.length;){if(C=y.pop(),C===I){if(C=S.pop(),A=this.__execute(m.leave,C),this.__state===v||A===v)return;continue}if(C.node){if(A=this.__execute(m.enter,C),this.__state===v||A===v)return;if(y.push(I),S.push(C),this.__state===T||A===T)continue;if(E=C.node,P=E.type||C.wrap,L=this.__keys[P],!L)if(this.__fallback)L=this.__fallback(E);else throw new Error("Unknown node type "+P+".");for(G=L.length;(G-=1)>=0;)if(F=L[G],b=E[F],!!b){if(Array.isArray(b)){for(D=b.length;(D-=1)>=0;)if(b[D]&&!u(S,b[D])){if(s(P,L[G]))C=new a(b[D],[F,D],"Property",null);else if(e(b[D]))C=new a(b[D],[F,D],null,null);else continue;y.push(C)}}else if(e(b)){if(u(S,b))continue;y.push(new a(b,F,null,null))}}}}},r.prototype.replace=function(f,m){var y,S,C,E,P,A,F,G,D,L,b,I,N;function Z(U){var W,X,V,O;if(U.ref.remove()){for(X=U.ref.key,O=U.ref.parent,W=y.length;W--;)if(V=y[W],V.ref&&V.ref.parent===O){if(V.ref.key<X)break;--V.ref.key}}}for(this.__initialize(f,m),b={},y=this.__worklist,S=this.__leavelist,I={root:f},A=new a(f,null,null,new o(I,"root")),y.push(A),S.push(A);y.length;){if(A=y.pop(),A===b){if(A=S.pop(),P=this.__execute(m.leave,A),P!==void 0&&P!==v&&P!==T&&P!==t&&A.ref.replace(P),(this.__state===t||P===t)&&Z(A),this.__state===v||P===v)return I.root;continue}if(P=this.__execute(m.enter,A),P!==void 0&&P!==v&&P!==T&&P!==t&&(A.ref.replace(P),A.node=P),(this.__state===t||P===t)&&(Z(A),A.node=null),this.__state===v||P===v)return I.root;if(C=A.node,!!C&&(y.push(b),S.push(A),!(this.__state===T||P===T))){if(E=C.type||A.wrap,D=this.__keys[E],!D)if(this.__fallback)D=this.__fallback(C);else throw new Error("Unknown node type "+E+".");for(F=D.length;(F-=1)>=0;)if(N=D[F],L=C[N],!!L)if(Array.isArray(L)){for(G=L.length;(G-=1)>=0;)if(L[G]){if(s(E,D[F]))A=new a(L[G],[N,G],"Property",new o(L,G));else if(e(L[G]))A=new a(L[G],[N,G],null,new o(L,G));else continue;y.push(A)}}else e(L)&&y.push(new a(L,N,null,new o(C,N)))}}return I.root};function n(f,m){var y=new r;return y.traverse(f,m)}function l(f,m){var y=new r;return y.replace(f,m)}function c(f,m){var y;return y=g(m,function(S){return S.range[0]>f.range[0]}),f.extendedRange=[f.range[0],f.range[1]],y!==m.length&&(f.extendedRange[1]=m[y].range[0]),y-=1,y>=0&&(f.extendedRange[0]=m[y].range[1]),f}function d(f,m,y){var S=[],C,E,P,A;if(!f.range)throw new Error("attachComments needs range information");if(!y.length){if(m.length){for(P=0,E=m.length;P<E;P+=1)C=h(m[P]),C.extendedRange=[0,f.range[0]],S.push(C);f.leadingComments=S}return f}for(P=0,E=m.length;P<E;P+=1)S.push(c(h(m[P]),y));return A=0,n(f,{enter:function(F){for(var G;A<S.length&&(G=S[A],!(G.extendedRange[1]>F.range[0]));)G.extendedRange[1]===F.range[0]?(F.leadingComments||(F.leadingComments=[]),F.leadingComments.push(G),S.splice(A,1)):A+=1;if(A===S.length)return R.Break;if(S[A].extendedRange[0]>F.range[1])return R.Skip}}),A=0,n(f,{leave:function(F){for(var G;A<S.length&&(G=S[A],!(F.range[1]<G.extendedRange[0]));)F.range[1]===G.extendedRange[0]?(F.trailingComments||(F.trailingComments=[]),F.trailingComments.push(G),S.splice(A,1)):A+=1;if(A===S.length)return R.Break;if(S[A].extendedRange[0]>F.range[1])return R.Skip}}),f}return x.Syntax=M,x.traverse=n,x.replace=l,x.attachComments=d,x.VisitorKeys=w,x.VisitorOption=R,x.Controller=r,x.cloneEnvironment=function(){return p({})},x})(i)})(vl)),vl}var gr={},gl={exports:{}},xl;function L7(){return xl||(xl=1,(function(){function i(v){if(v==null)return!1;switch(v.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function p(v){if(v==null)return!1;switch(v.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function x(v){if(v==null)return!1;switch(v.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function M(v){return x(v)||v!=null&&v.type==="FunctionDeclaration"}function R(v){switch(v.type){case"IfStatement":return v.alternate!=null?v.alternate:v.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return v.body}return null}function w(v){var T;if(v.type!=="IfStatement"||v.alternate==null)return!1;T=v.consequent;do{if(T.type==="IfStatement"&&T.alternate==null)return!0;T=R(T)}while(T);return!1}gl.exports={isExpression:i,isStatement:x,isIterationStatement:p,isSourceElement:M,isProblematicIfStatement:w,trailingStatement:R}})()),gl.exports}var yl={exports:{}},Tl;function jT(){return Tl||(Tl=1,(function(){var i,p,x,M,R,w;p={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},i={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function v(u){return 48<=u&&u<=57}function T(u){return 48<=u&&u<=57||97<=u&&u<=102||65<=u&&u<=70}function t(u){return u>=48&&u<=55}x=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function h(u){return u===32||u===9||u===11||u===12||u===160||u>=5760&&x.indexOf(u)>=0}function g(u){return u===10||u===13||u===8232||u===8233}function o(u){if(u<=65535)return String.fromCharCode(u);var n=String.fromCharCode(Math.floor((u-65536)/1024)+55296),l=String.fromCharCode((u-65536)%1024+56320);return n+l}for(M=new Array(128),w=0;w<128;++w)M[w]=w>=97&&w<=122||w>=65&&w<=90||w===36||w===95;for(R=new Array(128),w=0;w<128;++w)R[w]=w>=97&&w<=122||w>=65&&w<=90||w>=48&&w<=57||w===36||w===95;function a(u){return u<128?M[u]:p.NonAsciiIdentifierStart.test(o(u))}function r(u){return u<128?R[u]:p.NonAsciiIdentifierPart.test(o(u))}function e(u){return u<128?M[u]:i.NonAsciiIdentifierStart.test(o(u))}function s(u){return u<128?R[u]:i.NonAsciiIdentifierPart.test(o(u))}yl.exports={isDecimalDigit:v,isHexDigit:T,isOctalDigit:t,isWhiteSpace:h,isLineTerminator:g,isIdentifierStartES5:a,isIdentifierPartES5:r,isIdentifierStartES6:e,isIdentifierPartES6:s}})()),yl.exports}var Cl={exports:{}},Sl;function D7(){return Sl||(Sl=1,(function(){var i=jT();function p(a){switch(a){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function x(a,r){return!r&&a==="yield"?!1:M(a,r)}function M(a,r){if(r&&p(a))return!0;switch(a.length){case 2:return a==="if"||a==="in"||a==="do";case 3:return a==="var"||a==="for"||a==="new"||a==="try";case 4:return a==="this"||a==="else"||a==="case"||a==="void"||a==="with"||a==="enum";case 5:return a==="while"||a==="break"||a==="catch"||a==="throw"||a==="const"||a==="yield"||a==="class"||a==="super";case 6:return a==="return"||a==="typeof"||a==="delete"||a==="switch"||a==="export"||a==="import";case 7:return a==="default"||a==="finally"||a==="extends";case 8:return a==="function"||a==="continue"||a==="debugger";case 10:return a==="instanceof";default:return!1}}function R(a,r){return a==="null"||a==="true"||a==="false"||x(a,r)}function w(a,r){return a==="null"||a==="true"||a==="false"||M(a,r)}function v(a){return a==="eval"||a==="arguments"}function T(a){var r,e,s;if(a.length===0||(s=a.charCodeAt(0),!i.isIdentifierStartES5(s)))return!1;for(r=1,e=a.length;r<e;++r)if(s=a.charCodeAt(r),!i.isIdentifierPartES5(s))return!1;return!0}function t(a,r){return(a-55296)*1024+(r-56320)+65536}function h(a){var r,e,s,u,n;if(a.length===0)return!1;for(n=i.isIdentifierStartES6,r=0,e=a.length;r<e;++r){if(s=a.charCodeAt(r),55296<=s&&s<=56319){if(++r,r>=e||(u=a.charCodeAt(r),!(56320<=u&&u<=57343)))return!1;s=t(s,u)}if(!n(s))return!1;n=i.isIdentifierPartES6}return!0}function g(a,r){return T(a)&&!R(a,r)}function o(a,r){return h(a)&&!w(a,r)}Cl.exports={isKeywordES5:x,isKeywordES6:M,isReservedWordES5:R,isReservedWordES6:w,isRestrictedWord:v,isIdentifierNameES5:T,isIdentifierNameES6:h,isIdentifierES5:g,isIdentifierES6:o}})()),Cl.exports}var Ml;function w7(){return Ml||(Ml=1,(function(){gr.ast=L7(),gr.code=jT(),gr.keyword=D7()})()),gr}var xr={},Ua={},yr={},Tr={},El;function G7(){if(El)return Tr;El=1;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return Tr.encode=function(p){if(0<=p&&p<i.length)return i[p];throw new TypeError("Must be between 0 and 63: "+p)},Tr.decode=function(p){var x=65,M=90,R=97,w=122,v=48,T=57,t=43,h=47,g=26,o=52;return x<=p&&p<=M?p-x:R<=p&&p<=w?p-R+g:v<=p&&p<=T?p-v+o:p==t?62:p==h?63:-1},Tr}var Pl;function QT(){if(Pl)return yr;Pl=1;var i=G7(),p=5,x=1<<p,M=x-1,R=x;function w(T){return T<0?(-T<<1)+1:(T<<1)+0}function v(T){var t=(T&1)===1,h=T>>1;return t?-h:h}return yr.encode=function(T){var t="",h,g=w(T);do h=g&M,g>>>=p,g>0&&(h|=R),t+=i.encode(h);while(g>0);return t},yr.decode=function(T,t,h){var g=T.length,o=0,a=0,r,e;do{if(t>=g)throw new Error("Expected more digits in base 64 VLQ value.");if(e=i.decode(T.charCodeAt(t++)),e===-1)throw new Error("Invalid base64 digit: "+T.charAt(t-1));r=!!(e&R),e&=M,o=o+(e<<a),a+=p}while(r);h.value=v(o),h.rest=t},yr}var Al={},Rl;function tr(){return Rl||(Rl=1,(function(i){function p(d,f,m){if(f in d)return d[f];if(arguments.length===3)return m;throw new Error('"'+f+'" is a required argument.')}i.getArg=p;var x=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,M=/^data:.+\,.+$/;function R(d){var f=d.match(x);return f?{scheme:f[1],auth:f[2],host:f[3],port:f[4],path:f[5]}:null}i.urlParse=R;function w(d){var f="";return d.scheme&&(f+=d.scheme+":"),f+="//",d.auth&&(f+=d.auth+"@"),d.host&&(f+=d.host),d.port&&(f+=":"+d.port),d.path&&(f+=d.path),f}i.urlGenerate=w;function v(d){var f=d,m=R(d);if(m){if(!m.path)return d;f=m.path}for(var y=i.isAbsolute(f),S=f.split(/\/+/),C,E=0,P=S.length-1;P>=0;P--)C=S[P],C==="."?S.splice(P,1):C===".."?E++:E>0&&(C===""?(S.splice(P+1,E),E=0):(S.splice(P,2),E--));return f=S.join("/"),f===""&&(f=y?"/":"."),m?(m.path=f,w(m)):f}i.normalize=v;function T(d,f){d===""&&(d="."),f===""&&(f=".");var m=R(f),y=R(d);if(y&&(d=y.path||"/"),m&&!m.scheme)return y&&(m.scheme=y.scheme),w(m);if(m||f.match(M))return f;if(y&&!y.host&&!y.path)return y.host=f,w(y);var S=f.charAt(0)==="/"?f:v(d.replace(/\/+$/,"")+"/"+f);return y?(y.path=S,w(y)):S}i.join=T,i.isAbsolute=function(d){return d.charAt(0)==="/"||x.test(d)};function t(d,f){d===""&&(d="."),d=d.replace(/\/$/,"");for(var m=0;f.indexOf(d+"/")!==0;){var y=d.lastIndexOf("/");if(y<0||(d=d.slice(0,y),d.match(/^([^\/]+:\/)?\/*$/)))return f;++m}return Array(m+1).join("../")+f.substr(d.length+1)}i.relative=t;var h=(function(){var d=Object.create(null);return!("__proto__"in d)})();function g(d){return d}function o(d){return r(d)?"$"+d:d}i.toSetString=h?g:o;function a(d){return r(d)?d.slice(1):d}i.fromSetString=h?g:a;function r(d){if(!d)return!1;var f=d.length;if(f<9||d.charCodeAt(f-1)!==95||d.charCodeAt(f-2)!==95||d.charCodeAt(f-3)!==111||d.charCodeAt(f-4)!==116||d.charCodeAt(f-5)!==111||d.charCodeAt(f-6)!==114||d.charCodeAt(f-7)!==112||d.charCodeAt(f-8)!==95||d.charCodeAt(f-9)!==95)return!1;for(var m=f-10;m>=0;m--)if(d.charCodeAt(m)!==36)return!1;return!0}function e(d,f,m){var y=u(d.source,f.source);return y!==0||(y=d.originalLine-f.originalLine,y!==0)||(y=d.originalColumn-f.originalColumn,y!==0||m)||(y=d.generatedColumn-f.generatedColumn,y!==0)||(y=d.generatedLine-f.generatedLine,y!==0)?y:u(d.name,f.name)}i.compareByOriginalPositions=e;function s(d,f,m){var y=d.generatedLine-f.generatedLine;return y!==0||(y=d.generatedColumn-f.generatedColumn,y!==0||m)||(y=u(d.source,f.source),y!==0)||(y=d.originalLine-f.originalLine,y!==0)||(y=d.originalColumn-f.originalColumn,y!==0)?y:u(d.name,f.name)}i.compareByGeneratedPositionsDeflated=s;function u(d,f){return d===f?0:d===null?1:f===null?-1:d>f?1:-1}function n(d,f){var m=d.generatedLine-f.generatedLine;return m!==0||(m=d.generatedColumn-f.generatedColumn,m!==0)||(m=u(d.source,f.source),m!==0)||(m=d.originalLine-f.originalLine,m!==0)||(m=d.originalColumn-f.originalColumn,m!==0)?m:u(d.name,f.name)}i.compareByGeneratedPositionsInflated=n;function l(d){return JSON.parse(d.replace(/^\)]}'[^\n]*\n/,""))}i.parseSourceMapInput=l;function c(d,f,m){if(f=f||"",d&&(d[d.length-1]!=="/"&&f[0]!=="/"&&(d+="/"),f=d+f),m){var y=R(m);if(!y)throw new Error("sourceMapURL could not be parsed");if(y.path){var S=y.path.lastIndexOf("/");S>=0&&(y.path=y.path.substring(0,S+1))}f=T(w(y),f)}return v(f)}i.computeSourceURL=c})(Al)),Al}var Ha={},Fl;function $T(){if(Fl)return Ha;Fl=1;var i=tr(),p=Object.prototype.hasOwnProperty,x=typeof Map<"u";function M(){this._array=[],this._set=x?new Map:Object.create(null)}return M.fromArray=function(R,w){for(var v=new M,T=0,t=R.length;T<t;T++)v.add(R[T],w);return v},M.prototype.size=function(){return x?this._set.size:Object.getOwnPropertyNames(this._set).length},M.prototype.add=function(R,w){var v=x?R:i.toSetString(R),T=x?this.has(R):p.call(this._set,v),t=this._array.length;(!T||w)&&this._array.push(R),T||(x?this._set.set(R,t):this._set[v]=t)},M.prototype.has=function(R){if(x)return this._set.has(R);var w=i.toSetString(R);return p.call(this._set,w)},M.prototype.indexOf=function(R){if(x){var w=this._set.get(R);if(w>=0)return w}else{var v=i.toSetString(R);if(p.call(this._set,v))return this._set[v]}throw new Error('"'+R+'" is not in the set.')},M.prototype.at=function(R){if(R>=0&&R<this._array.length)return this._array[R];throw new Error("No element indexed by "+R)},M.prototype.toArray=function(){return this._array.slice()},Ha.ArraySet=M,Ha}var Ka={},Ll;function b7(){if(Ll)return Ka;Ll=1;var i=tr();function p(M,R){var w=M.generatedLine,v=R.generatedLine,T=M.generatedColumn,t=R.generatedColumn;return v>w||v==w&&t>=T||i.compareByGeneratedPositionsInflated(M,R)<=0}function x(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return x.prototype.unsortedForEach=function(M,R){this._array.forEach(M,R)},x.prototype.add=function(M){p(this._last,M)?(this._last=M,this._array.push(M)):(this._sorted=!1,this._array.push(M))},x.prototype.toArray=function(){return this._sorted||(this._array.sort(i.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},Ka.MappingList=x,Ka}var Dl;function qT(){if(Dl)return Ua;Dl=1;var i=QT(),p=tr(),x=$T().ArraySet,M=b7().MappingList;function R(w){w||(w={}),this._file=p.getArg(w,"file",null),this._sourceRoot=p.getArg(w,"sourceRoot",null),this._skipValidation=p.getArg(w,"skipValidation",!1),this._sources=new x,this._names=new x,this._mappings=new M,this._sourcesContents=null}return R.prototype._version=3,R.fromSourceMap=function(w){var v=w.sourceRoot,T=new R({file:w.file,sourceRoot:v});return w.eachMapping(function(t){var h={generated:{line:t.generatedLine,column:t.generatedColumn}};t.source!=null&&(h.source=t.source,v!=null&&(h.source=p.relative(v,h.source)),h.original={line:t.originalLine,column:t.originalColumn},t.name!=null&&(h.name=t.name)),T.addMapping(h)}),w.sources.forEach(function(t){var h=t;v!==null&&(h=p.relative(v,t)),T._sources.has(h)||T._sources.add(h);var g=w.sourceContentFor(t);g!=null&&T.setSourceContent(t,g)}),T},R.prototype.addMapping=function(w){var v=p.getArg(w,"generated"),T=p.getArg(w,"original",null),t=p.getArg(w,"source",null),h=p.getArg(w,"name",null);this._skipValidation||this._validateMapping(v,T,t,h),t!=null&&(t=String(t),this._sources.has(t)||this._sources.add(t)),h!=null&&(h=String(h),this._names.has(h)||this._names.add(h)),this._mappings.add({generatedLine:v.line,generatedColumn:v.column,originalLine:T!=null&&T.line,originalColumn:T!=null&&T.column,source:t,name:h})},R.prototype.setSourceContent=function(w,v){var T=w;this._sourceRoot!=null&&(T=p.relative(this._sourceRoot,T)),v!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[p.toSetString(T)]=v):this._sourcesContents&&(delete this._sourcesContents[p.toSetString(T)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},R.prototype.applySourceMap=function(w,v,T){var t=v;if(v==null){if(w.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);t=w.file}var h=this._sourceRoot;h!=null&&(t=p.relative(h,t));var g=new x,o=new x;this._mappings.unsortedForEach(function(a){if(a.source===t&&a.originalLine!=null){var r=w.originalPositionFor({line:a.originalLine,column:a.originalColumn});r.source!=null&&(a.source=r.source,T!=null&&(a.source=p.join(T,a.source)),h!=null&&(a.source=p.relative(h,a.source)),a.originalLine=r.line,a.originalColumn=r.column,r.name!=null&&(a.name=r.name))}var e=a.source;e!=null&&!g.has(e)&&g.add(e);var s=a.name;s!=null&&!o.has(s)&&o.add(s)},this),this._sources=g,this._names=o,w.sources.forEach(function(a){var r=w.sourceContentFor(a);r!=null&&(T!=null&&(a=p.join(T,a)),h!=null&&(a=p.relative(h,a)),this.setSourceContent(a,r))},this)},R.prototype._validateMapping=function(w,v,T,t){if(v&&typeof v.line!="number"&&typeof v.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(w&&"line"in w&&"column"in w&&w.line>0&&w.column>=0&&!v&&!T&&!t)){if(w&&"line"in w&&"column"in w&&v&&"line"in v&&"column"in v&&w.line>0&&w.column>=0&&v.line>0&&v.column>=0&&T)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:w,source:T,original:v,name:t}))}},R.prototype._serializeMappings=function(){for(var w=0,v=1,T=0,t=0,h=0,g=0,o="",a,r,e,s,u=this._mappings.toArray(),n=0,l=u.length;n<l;n++){if(r=u[n],a="",r.generatedLine!==v)for(w=0;r.generatedLine!==v;)a+=";",v++;else if(n>0){if(!p.compareByGeneratedPositionsInflated(r,u[n-1]))continue;a+=","}a+=i.encode(r.generatedColumn-w),w=r.generatedColumn,r.source!=null&&(s=this._sources.indexOf(r.source),a+=i.encode(s-g),g=s,a+=i.encode(r.originalLine-1-t),t=r.originalLine-1,a+=i.encode(r.originalColumn-T),T=r.originalColumn,r.name!=null&&(e=this._names.indexOf(r.name),a+=i.encode(e-h),h=e)),o+=a}return o},R.prototype._generateSourcesContent=function(w,v){return w.map(function(T){if(!this._sourcesContents)return null;v!=null&&(T=p.relative(v,T));var t=p.toSetString(T);return Object.prototype.hasOwnProperty.call(this._sourcesContents,t)?this._sourcesContents[t]:null},this)},R.prototype.toJSON=function(){var w={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(w.file=this._file),this._sourceRoot!=null&&(w.sourceRoot=this._sourceRoot),this._sourcesContents&&(w.sourcesContent=this._generateSourcesContent(w.sources,w.sourceRoot)),w},R.prototype.toString=function(){return JSON.stringify(this.toJSON())},Ua.SourceMapGenerator=R,Ua}var Sn={},wl={},Gl;function I7(){return Gl||(Gl=1,(function(i){i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2;function p(x,M,R,w,v,T){var t=Math.floor((M-x)/2)+x,h=v(R,w[t],!0);return h===0?t:h>0?M-t>1?p(t,M,R,w,v,T):T==i.LEAST_UPPER_BOUND?M<w.length?M:-1:t:t-x>1?p(x,t,R,w,v,T):T==i.LEAST_UPPER_BOUND?t:x<0?-1:x}i.search=function(x,M,R,w){if(M.length===0)return-1;var v=p(-1,M.length,x,M,R,w||i.GREATEST_LOWER_BOUND);if(v<0)return-1;for(;v-1>=0&&R(M[v],M[v-1],!0)===0;)--v;return v}})(wl)),wl}var ka={},bl;function O7(){if(bl)return ka;bl=1;function i(M,R,w){var v=M[R];M[R]=M[w],M[w]=v}function p(M,R){return Math.round(M+Math.random()*(R-M))}function x(M,R,w,v){if(w<v){var T=p(w,v),t=w-1;i(M,T,v);for(var h=M[v],g=w;g<v;g++)R(M[g],h)<=0&&(t+=1,i(M,t,g));i(M,t+1,g);var o=t+1;x(M,R,w,o-1),x(M,R,o+1,v)}}return ka.quickSort=function(M,R){x(M,R,0,M.length-1)},ka}var Il;function B7(){if(Il)return Sn;Il=1;var i=tr(),p=I7(),x=$T().ArraySet,M=QT(),R=O7().quickSort;function w(h,g){var o=h;return typeof h=="string"&&(o=i.parseSourceMapInput(h)),o.sections!=null?new t(o,g):new v(o,g)}w.fromSourceMap=function(h,g){return v.fromSourceMap(h,g)},w.prototype._version=3,w.prototype.__generatedMappings=null,Object.defineProperty(w.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),w.prototype.__originalMappings=null,Object.defineProperty(w.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),w.prototype._charIsMappingSeparator=function(h,g){var o=h.charAt(g);return o===";"||o===","},w.prototype._parseMappings=function(h,g){throw new Error("Subclasses must implement _parseMappings")},w.GENERATED_ORDER=1,w.ORIGINAL_ORDER=2,w.GREATEST_LOWER_BOUND=1,w.LEAST_UPPER_BOUND=2,w.prototype.eachMapping=function(h,g,o){var a=g||null,r=o||w.GENERATED_ORDER,e;switch(r){case w.GENERATED_ORDER:e=this._generatedMappings;break;case w.ORIGINAL_ORDER:e=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;e.map(function(u){var n=u.source===null?null:this._sources.at(u.source);return n=i.computeSourceURL(s,n,this._sourceMapURL),{source:n,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(h,a)},w.prototype.allGeneratedPositionsFor=function(h){var g=i.getArg(h,"line"),o={source:i.getArg(h,"source"),originalLine:g,originalColumn:i.getArg(h,"column",0)};if(o.source=this._findSourceIndex(o.source),o.source<0)return[];var a=[],r=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,p.LEAST_UPPER_BOUND);if(r>=0){var e=this._originalMappings[r];if(h.column===void 0)for(var s=e.originalLine;e&&e.originalLine===s;)a.push({line:i.getArg(e,"generatedLine",null),column:i.getArg(e,"generatedColumn",null),lastColumn:i.getArg(e,"lastGeneratedColumn",null)}),e=this._originalMappings[++r];else for(var u=e.originalColumn;e&&e.originalLine===g&&e.originalColumn==u;)a.push({line:i.getArg(e,"generatedLine",null),column:i.getArg(e,"generatedColumn",null),lastColumn:i.getArg(e,"lastGeneratedColumn",null)}),e=this._originalMappings[++r]}return a},Sn.SourceMapConsumer=w;function v(h,g){var o=h;typeof h=="string"&&(o=i.parseSourceMapInput(h));var a=i.getArg(o,"version"),r=i.getArg(o,"sources"),e=i.getArg(o,"names",[]),s=i.getArg(o,"sourceRoot",null),u=i.getArg(o,"sourcesContent",null),n=i.getArg(o,"mappings"),l=i.getArg(o,"file",null);if(a!=this._version)throw new Error("Unsupported version: "+a);s&&(s=i.normalize(s)),r=r.map(String).map(i.normalize).map(function(c){return s&&i.isAbsolute(s)&&i.isAbsolute(c)?i.relative(s,c):c}),this._names=x.fromArray(e.map(String),!0),this._sources=x.fromArray(r,!0),this._absoluteSources=this._sources.toArray().map(function(c){return i.computeSourceURL(s,c,g)}),this.sourceRoot=s,this.sourcesContent=u,this._mappings=n,this._sourceMapURL=g,this.file=l}v.prototype=Object.create(w.prototype),v.prototype.consumer=w,v.prototype._findSourceIndex=function(h){var g=h;if(this.sourceRoot!=null&&(g=i.relative(this.sourceRoot,g)),this._sources.has(g))return this._sources.indexOf(g);var o;for(o=0;o<this._absoluteSources.length;++o)if(this._absoluteSources[o]==h)return o;return-1},v.fromSourceMap=function(h,g){var o=Object.create(v.prototype),a=o._names=x.fromArray(h._names.toArray(),!0),r=o._sources=x.fromArray(h._sources.toArray(),!0);o.sourceRoot=h._sourceRoot,o.sourcesContent=h._generateSourcesContent(o._sources.toArray(),o.sourceRoot),o.file=h._file,o._sourceMapURL=g,o._absoluteSources=o._sources.toArray().map(function(f){return i.computeSourceURL(o.sourceRoot,f,g)});for(var e=h._mappings.toArray().slice(),s=o.__generatedMappings=[],u=o.__originalMappings=[],n=0,l=e.length;n<l;n++){var c=e[n],d=new T;d.generatedLine=c.generatedLine,d.generatedColumn=c.generatedColumn,c.source&&(d.source=r.indexOf(c.source),d.originalLine=c.originalLine,d.originalColumn=c.originalColumn,c.name&&(d.name=a.indexOf(c.name)),u.push(d)),s.push(d)}return R(o.__originalMappings,i.compareByOriginalPositions),o},v.prototype._version=3,Object.defineProperty(v.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function T(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}v.prototype._parseMappings=function(h,g){for(var o=1,a=0,r=0,e=0,s=0,u=0,n=h.length,l=0,c={},d={},f=[],m=[],y,S,C,E,P;l<n;)if(h.charAt(l)===";")o++,l++,a=0;else if(h.charAt(l)===",")l++;else{for(y=new T,y.generatedLine=o,E=l;E<n&&!this._charIsMappingSeparator(h,E);E++);if(S=h.slice(l,E),C=c[S],C)l+=S.length;else{for(C=[];l<E;)M.decode(h,l,d),P=d.value,l=d.rest,C.push(P);if(C.length===2)throw new Error("Found a source, but no line and column");if(C.length===3)throw new Error("Found a source and line, but no column");c[S]=C}y.generatedColumn=a+C[0],a=y.generatedColumn,C.length>1&&(y.source=s+C[1],s+=C[1],y.originalLine=r+C[2],r=y.originalLine,y.originalLine+=1,y.originalColumn=e+C[3],e=y.originalColumn,C.length>4&&(y.name=u+C[4],u+=C[4])),m.push(y),typeof y.originalLine=="number"&&f.push(y)}R(m,i.compareByGeneratedPositionsDeflated),this.__generatedMappings=m,R(f,i.compareByOriginalPositions),this.__originalMappings=f},v.prototype._findMapping=function(h,g,o,a,r,e){if(h[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+h[o]);if(h[a]<0)throw new TypeError("Column must be greater than or equal to 0, got "+h[a]);return p.search(h,g,r,e)},v.prototype.computeColumnSpans=function(){for(var h=0;h<this._generatedMappings.length;++h){var g=this._generatedMappings[h];if(h+1<this._generatedMappings.length){var o=this._generatedMappings[h+1];if(g.generatedLine===o.generatedLine){g.lastGeneratedColumn=o.generatedColumn-1;continue}}g.lastGeneratedColumn=1/0}},v.prototype.originalPositionFor=function(h){var g={generatedLine:i.getArg(h,"line"),generatedColumn:i.getArg(h,"column")},o=this._findMapping(g,this._generatedMappings,"generatedLine","generatedColumn",i.compareByGeneratedPositionsDeflated,i.getArg(h,"bias",w.GREATEST_LOWER_BOUND));if(o>=0){var a=this._generatedMappings[o];if(a.generatedLine===g.generatedLine){var r=i.getArg(a,"source",null);r!==null&&(r=this._sources.at(r),r=i.computeSourceURL(this.sourceRoot,r,this._sourceMapURL));var e=i.getArg(a,"name",null);return e!==null&&(e=this._names.at(e)),{source:r,line:i.getArg(a,"originalLine",null),column:i.getArg(a,"originalColumn",null),name:e}}}return{source:null,line:null,column:null,name:null}},v.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(h){return h==null}):!1},v.prototype.sourceContentFor=function(h,g){if(!this.sourcesContent)return null;var o=this._findSourceIndex(h);if(o>=0)return this.sourcesContent[o];var a=h;this.sourceRoot!=null&&(a=i.relative(this.sourceRoot,a));var r;if(this.sourceRoot!=null&&(r=i.urlParse(this.sourceRoot))){var e=a.replace(/^file:\/\//,"");if(r.scheme=="file"&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!r.path||r.path=="/")&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}if(g)return null;throw new Error('"'+a+'" is not in the SourceMap.')},v.prototype.generatedPositionFor=function(h){var g=i.getArg(h,"source");if(g=this._findSourceIndex(g),g<0)return{line:null,column:null,lastColumn:null};var o={source:g,originalLine:i.getArg(h,"line"),originalColumn:i.getArg(h,"column")},a=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,i.getArg(h,"bias",w.GREATEST_LOWER_BOUND));if(a>=0){var r=this._originalMappings[a];if(r.source===o.source)return{line:i.getArg(r,"generatedLine",null),column:i.getArg(r,"generatedColumn",null),lastColumn:i.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},Sn.BasicSourceMapConsumer=v;function t(h,g){var o=h;typeof h=="string"&&(o=i.parseSourceMapInput(h));var a=i.getArg(o,"version"),r=i.getArg(o,"sections");if(a!=this._version)throw new Error("Unsupported version: "+a);this._sources=new x,this._names=new x;var e={line:-1,column:0};this._sections=r.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var u=i.getArg(s,"offset"),n=i.getArg(u,"line"),l=i.getArg(u,"column");if(n<e.line||n===e.line&&l<e.column)throw new Error("Section offsets must be ordered and non-overlapping.");return e=u,{generatedOffset:{generatedLine:n+1,generatedColumn:l+1},consumer:new w(i.getArg(s,"map"),g)}})}return t.prototype=Object.create(w.prototype),t.prototype.constructor=w,t.prototype._version=3,Object.defineProperty(t.prototype,"sources",{get:function(){for(var h=[],g=0;g<this._sections.length;g++)for(var o=0;o<this._sections[g].consumer.sources.length;o++)h.push(this._sections[g].consumer.sources[o]);return h}}),t.prototype.originalPositionFor=function(h){var g={generatedLine:i.getArg(h,"line"),generatedColumn:i.getArg(h,"column")},o=p.search(g,this._sections,function(r,e){var s=r.generatedLine-e.generatedOffset.generatedLine;return s||r.generatedColumn-e.generatedOffset.generatedColumn}),a=this._sections[o];return a?a.consumer.originalPositionFor({line:g.generatedLine-(a.generatedOffset.generatedLine-1),column:g.generatedColumn-(a.generatedOffset.generatedLine===g.generatedLine?a.generatedOffset.generatedColumn-1:0),bias:h.bias}):{source:null,line:null,column:null,name:null}},t.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(h){return h.consumer.hasContentsOfAllSources()})},t.prototype.sourceContentFor=function(h,g){for(var o=0;o<this._sections.length;o++){var a=this._sections[o],r=a.consumer.sourceContentFor(h,!0);if(r)return r}if(g)return null;throw new Error('"'+h+'" is not in the SourceMap.')},t.prototype.generatedPositionFor=function(h){for(var g=0;g<this._sections.length;g++){var o=this._sections[g];if(o.consumer._findSourceIndex(i.getArg(h,"source"))!==-1){var a=o.consumer.generatedPositionFor(h);if(a){var r={line:a.line+(o.generatedOffset.generatedLine-1),column:a.column+(o.generatedOffset.generatedLine===a.line?o.generatedOffset.generatedColumn-1:0)};return r}}}return{line:null,column:null}},t.prototype._parseMappings=function(h,g){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var a=this._sections[o],r=a.consumer._generatedMappings,e=0;e<r.length;e++){var s=r[e],u=a.consumer._sources.at(s.source);u=i.computeSourceURL(a.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var n=null;s.name&&(n=a.consumer._names.at(s.name),this._names.add(n),n=this._names.indexOf(n));var l={source:u,generatedLine:s.generatedLine+(a.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(a.generatedOffset.generatedLine===s.generatedLine?a.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:n};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}R(this.__generatedMappings,i.compareByGeneratedPositionsDeflated),R(this.__originalMappings,i.compareByOriginalPositions)},Sn.IndexedSourceMapConsumer=t,Sn}var Ja={},Ol;function X7(){if(Ol)return Ja;Ol=1;var i=qT().SourceMapGenerator,p=tr(),x=/(\r?\n)/,M=10,R="$$$isSourceNode$$$";function w(v,T,t,h,g){this.children=[],this.sourceContents={},this.line=v??null,this.column=T??null,this.source=t??null,this.name=g??null,this[R]=!0,h!=null&&this.add(h)}return w.fromStringWithSourceMap=function(v,T,t){var h=new w,g=v.split(x),o=0,a=function(){var n=c(),l=c()||"";return n+l;function c(){return o<g.length?g[o++]:void 0}},r=1,e=0,s=null;return T.eachMapping(function(n){if(s!==null)if(r<n.generatedLine)u(s,a()),r++,e=0;else{var l=g[o]||"",c=l.substr(0,n.generatedColumn-e);g[o]=l.substr(n.generatedColumn-e),e=n.generatedColumn,u(s,c),s=n;return}for(;r<n.generatedLine;)h.add(a()),r++;if(e<n.generatedColumn){var l=g[o]||"";h.add(l.substr(0,n.generatedColumn)),g[o]=l.substr(n.generatedColumn),e=n.generatedColumn}s=n},this),o<g.length&&(s&&u(s,a()),h.add(g.splice(o).join(""))),T.sources.forEach(function(n){var l=T.sourceContentFor(n);l!=null&&(t!=null&&(n=p.join(t,n)),h.setSourceContent(n,l))}),h;function u(n,l){if(n===null||n.source===void 0)h.add(l);else{var c=t?p.join(t,n.source):n.source;h.add(new w(n.originalLine,n.originalColumn,c,l,n.name))}}},w.prototype.add=function(v){if(Array.isArray(v))v.forEach(function(T){this.add(T)},this);else if(v[R]||typeof v=="string")v&&this.children.push(v);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+v);return this},w.prototype.prepend=function(v){if(Array.isArray(v))for(var T=v.length-1;T>=0;T--)this.prepend(v[T]);else if(v[R]||typeof v=="string")this.children.unshift(v);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+v);return this},w.prototype.walk=function(v){for(var T,t=0,h=this.children.length;t<h;t++)T=this.children[t],T[R]?T.walk(v):T!==""&&v(T,{source:this.source,line:this.line,column:this.column,name:this.name})},w.prototype.join=function(v){var T,t,h=this.children.length;if(h>0){for(T=[],t=0;t<h-1;t++)T.push(this.children[t]),T.push(v);T.push(this.children[t]),this.children=T}return this},w.prototype.replaceRight=function(v,T){var t=this.children[this.children.length-1];return t[R]?t.replaceRight(v,T):typeof t=="string"?this.children[this.children.length-1]=t.replace(v,T):this.children.push("".replace(v,T)),this},w.prototype.setSourceContent=function(v,T){this.sourceContents[p.toSetString(v)]=T},w.prototype.walkSourceContents=function(v){for(var T=0,t=this.children.length;T<t;T++)this.children[T][R]&&this.children[T].walkSourceContents(v);for(var h=Object.keys(this.sourceContents),T=0,t=h.length;T<t;T++)v(p.fromSetString(h[T]),this.sourceContents[h[T]])},w.prototype.toString=function(){var v="";return this.walk(function(T){v+=T}),v},w.prototype.toStringWithSourceMap=function(v){var T={code:"",line:1,column:0},t=new i(v),h=!1,g=null,o=null,a=null,r=null;return this.walk(function(e,s){T.code+=e,s.source!==null&&s.line!==null&&s.column!==null?((g!==s.source||o!==s.line||a!==s.column||r!==s.name)&&t.addMapping({source:s.source,original:{line:s.line,column:s.column},generated:{line:T.line,column:T.column},name:s.name}),g=s.source,o=s.line,a=s.column,r=s.name,h=!0):h&&(t.addMapping({generated:{line:T.line,column:T.column}}),g=null,h=!1);for(var u=0,n=e.length;u<n;u++)e.charCodeAt(u)===M?(T.line++,T.column=0,u+1===n?(g=null,h=!1):h&&t.addMapping({source:s.source,original:{line:s.line,column:s.column},generated:{line:T.line,column:T.column},name:s.name})):T.column++}),this.walkSourceContents(function(e,s){t.setSourceContent(e,s)}),{code:T.code,map:t}},Ja.SourceNode=w,Ja}var Bl;function N7(){return Bl||(Bl=1,xr.SourceMapGenerator=qT().SourceMapGenerator,xr.SourceMapConsumer=B7().SourceMapConsumer,xr.SourceNode=X7().SourceNode),xr}const V7="2.1.0",z7={version:V7};var Xl;function W7(){return Xl||(Xl=1,(function(i){(function(){var p,x,M,R,w,v,T,t,h,g,o,a,r,e,s,u,n,l,c,d,f,m,y,S,C,E;w=F7(),v=w7(),p=w.Syntax;function P(H){return te.Expression.hasOwnProperty(H.type)}function A(H){return te.Statement.hasOwnProperty(H.type)}x={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},M={"??":x.Coalesce,"||":x.LogicalOR,"&&":x.LogicalAND,"|":x.BitwiseOR,"^":x.BitwiseXOR,"&":x.BitwiseAND,"==":x.Equality,"!=":x.Equality,"===":x.Equality,"!==":x.Equality,is:x.Equality,isnt:x.Equality,"<":x.Relational,">":x.Relational,"<=":x.Relational,">=":x.Relational,in:x.Relational,instanceof:x.Relational,"<<":x.BitwiseSHIFT,">>":x.BitwiseSHIFT,">>>":x.BitwiseSHIFT,"+":x.Additive,"-":x.Additive,"*":x.Multiplicative,"%":x.Multiplicative,"/":x.Multiplicative,"**":x.Exponentiation};var F=1,G=2,D=4,L=8,b=16,I=32,N=64,Z=G|D,U=F|G,W=F|G|D,X=F,V=D,O=F|D,z=F,B=F|I,Y=0,k=F|b,J=F|L;function j(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function tt(H,$){var Q="";for($|=0;$>0;$>>>=1,H+=H)$&1&&(Q+=H);return Q}function ut(H){return/[\r\n]/g.test(H)}function ht(H){var $=H.length;return $&&v.code.isLineTerminator(H.charCodeAt($-1))}function st(H,$){var Q;for(Q in $)$.hasOwnProperty(Q)&&(H[Q]=$[Q]);return H}function dt(H,$){var Q,q;function it(vt){return typeof vt=="object"&&vt instanceof Object&&!(vt instanceof RegExp)}for(Q in $)$.hasOwnProperty(Q)&&(q=$[Q],it(q)?it(H[Q])?dt(H[Q],q):H[Q]=dt({},q):H[Q]=q);return H}function lt(H){var $,Q,q,it,vt;if(H!==H)throw new Error("Numeric literal whose value is NaN");if(H<0||H===0&&1/H<0)throw new Error("Numeric literal whose value is negative");if(H===1/0)return h?"null":g?"1e400":"1e+400";if($=""+H,!g||$.length<3)return $;for(Q=$.indexOf("."),!h&&$.charCodeAt(0)===48&&Q===1&&(Q=0,$=$.slice(1)),q=$,$=$.replace("e+","e"),it=0,(vt=q.indexOf("e"))>0&&(it=+q.slice(vt+1),q=q.slice(0,vt)),Q>=0&&(it-=q.length-Q-1,q=+(q.slice(0,Q)+q.slice(Q+1))+""),vt=0;q.charCodeAt(q.length+vt-1)===48;)--vt;return vt!==0&&(it-=vt,q=q.slice(0,vt)),it!==0&&(q+="e"+it),(q.length<$.length||o&&H>1e12&&Math.floor(H)===H&&(q="0x"+H.toString(16)).length<$.length)&&+q===H&&($=q),$}function ft(H,$){return(H&-2)===8232?($?"u":"\\u")+(H===8232?"2028":"2029"):H===10||H===13?($?"":"\\")+(H===10?"n":"r"):String.fromCharCode(H)}function Lt(H){var $,Q,q,it,vt,yt,At,zt;if(Q=H.toString(),H.source){if($=Q.match(/\/([^/]*)$/),!$)return Q;for(q=$[1],Q="",At=!1,zt=!1,it=0,vt=H.source.length;it<vt;++it)yt=H.source.charCodeAt(it),zt?(Q+=ft(yt,zt),zt=!1):(At?yt===93&&(At=!1):yt===47?Q+="\\":yt===91&&(At=!0),Q+=ft(yt,zt),zt=yt===92);return"/"+Q+"/"+q}return Q}function Nt(H,$){var Q;return H===8?"\\b":H===12?"\\f":H===9?"\\t":(Q=H.toString(16).toUpperCase(),h||H>255?"\\u"+"0000".slice(Q.length)+Q:H===0&&!v.code.isDecimalDigit($)?"\\0":H===11?"\\x0B":"\\x"+"00".slice(Q.length)+Q)}function Vt(H){if(H===92)return"\\\\";if(H===10)return"\\n";if(H===13)return"\\r";if(H===8232)return"\\u2028";if(H===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function pt(H){var $,Q,q,it;for(it=a==="double"?'"':"'",$=0,Q=H.length;$<Q;++$)if(q=H.charCodeAt($),q===39){it='"';break}else if(q===34){it="'";break}else q===92&&++$;return it+H+it}function Pt(H){var $="",Q,q,it,vt=0,yt=0,At,zt;for(Q=0,q=H.length;Q<q;++Q){if(it=H.charCodeAt(Q),it===39)++vt;else if(it===34)++yt;else if(it===47&&h)$+="\\";else if(v.code.isLineTerminator(it)||it===92){$+=Vt(it);continue}else if(!v.code.isIdentifierPartES5(it)&&(h&&it<32||!h&&!r&&(it<32||it>126))){$+=Nt(it,H.charCodeAt(Q+1));continue}$+=String.fromCharCode(it)}if(At=!(a==="double"||a==="auto"&&yt<vt),zt=At?"'":'"',!(At?vt:yt))return zt+$+zt;for(H=$,$=zt,Q=0,q=H.length;Q<q;++Q)it=H.charCodeAt(Q),(it===39&&At||it===34&&!At)&&($+="\\"),$+=String.fromCharCode(it);return $+zt}function Dt(H){var $,Q,q,it="";for($=0,Q=H.length;$<Q;++$)q=H[$],it+=Array.isArray(q)?Dt(q):q;return it}function Gt(H,$){if(!m)return Array.isArray(H)?Dt(H):H;if($==null){if(H instanceof R)return H;$={}}return $.loc==null?new R(null,null,m,H,$.name||null):new R($.loc.start.line,$.loc.start.column,m===!0?$.loc.source||null:m,H,$.name||null)}function Ut(){return s||" "}function Ot(H,$){var Q,q,it,vt;return Q=Gt(H).toString(),Q.length===0?[$]:(q=Gt($).toString(),q.length===0?[H]:(it=Q.charCodeAt(Q.length-1),vt=q.charCodeAt(0),(it===43||it===45)&&it===vt||v.code.isIdentifierPartES5(it)&&v.code.isIdentifierPartES5(vt)||it===47&&vt===105?[H,Ut(),$]:v.code.isWhiteSpace(it)||v.code.isLineTerminator(it)||v.code.isWhiteSpace(vt)||v.code.isLineTerminator(vt)?[H,$]:[H,s,$]))}function Wt(H){return[T,H]}function Zt(H){var $;$=T,T+=t,H(T),T=$}function ve(H){var $;for($=H.length-1;$>=0&&!v.code.isLineTerminator(H.charCodeAt($));--$);return H.length-1-$}function Te(H,$){var Q,q,it,vt,yt,At,zt,ae;for(Q=H.split(/\r\n|[\r\n]/),At=Number.MAX_VALUE,q=1,it=Q.length;q<it;++q){for(vt=Q[q],yt=0;yt<vt.length&&v.code.isWhiteSpace(vt.charCodeAt(yt));)++yt;At>yt&&(At=yt)}for(typeof $<"u"?(zt=T,Q[1][At]==="*"&&($+=" "),T=$):(At&1&&--At,zt=T),q=1,it=Q.length;q<it;++q)ae=Gt(Wt(Q[q].slice(At))),Q[q]=m?ae.join(""):ae;return T=zt,Q.join(`
`)}function _t(H,$){if(H.type==="Line"){if(ht(H.value))return"//"+H.value;var Q="//"+H.value;return S||(Q+=`
`),Q}return d.format.indent.adjustMultilineComment&&/[\n\r]/.test(H.value)?Te("/*"+H.value+"*/",$):"/*"+H.value+"*/"}function ce(H,$){var Q,q,it,vt,yt,At,zt,ae,we,Ui,is,nr,rr,hi;if(H.leadingComments&&H.leadingComments.length>0){if(vt=$,S){for(it=H.leadingComments[0],$=[],ae=it.extendedRange,we=it.range,is=y.substring(ae[0],we[0]),hi=(is.match(/\n/g)||[]).length,hi>0?($.push(tt(`
`,hi)),$.push(Wt(_t(it)))):($.push(is),$.push(_t(it))),Ui=we,Q=1,q=H.leadingComments.length;Q<q;Q++)it=H.leadingComments[Q],we=it.range,nr=y.substring(Ui[1],we[0]),hi=(nr.match(/\n/g)||[]).length,$.push(tt(`
`,hi)),$.push(Wt(_t(it))),Ui=we;rr=y.substring(we[1],ae[1]),hi=(rr.match(/\n/g)||[]).length,$.push(tt(`
`,hi))}else for(it=H.leadingComments[0],$=[],l&&H.type===p.Program&&H.body.length===0&&$.push(`
`),$.push(_t(it)),ht(Gt($).toString())||$.push(`
`),Q=1,q=H.leadingComments.length;Q<q;++Q)it=H.leadingComments[Q],zt=[_t(it)],ht(Gt(zt).toString())||zt.push(`
`),$.push(Wt(zt));$.push(Wt(vt))}if(H.trailingComments)if(S)it=H.trailingComments[0],ae=it.extendedRange,we=it.range,is=y.substring(ae[0],we[0]),hi=(is.match(/\n/g)||[]).length,hi>0?($.push(tt(`
`,hi)),$.push(Wt(_t(it)))):($.push(is),$.push(_t(it)));else for(yt=!ht(Gt($).toString()),At=tt(" ",ve(Gt([T,$,t]).toString())),Q=0,q=H.trailingComments.length;Q<q;++Q)it=H.trailingComments[Q],yt?(Q===0?$=[$,t]:$=[$,At],$.push(_t(it,At))):$=[$,Wt(_t(it))],Q!==q-1&&!ht(Gt($).toString())&&($=[$,`
`]);return $}function wt(H,$,Q){var q,it=0;for(q=H;q<$;q++)y[q]===`
`&&it++;for(q=1;q<it;q++)Q.push(e)}function Ht(H,$,Q){return $<Q?["(",H,")"]:H}function he(H){var $,Q,q;for(q=H.split(/\r\n|\n/),$=1,Q=q.length;$<Q;$++)q[$]=e+T+q[$];return q}function me(H,$){var Q,q,it;return Q=H[d.verbatim],typeof Q=="string"?q=Ht(he(Q),x.Sequence,$):(q=he(Q.content),it=Q.precedence!=null?Q.precedence:x.Sequence,q=Ht(q,it,$)),Gt(q,H)}function te(){}te.prototype.maybeBlock=function(H,$){var Q,q,it=this;return q=!d.comment||!H.leadingComments,H.type===p.BlockStatement&&q?[s,this.generateStatement(H,$)]:H.type===p.EmptyStatement&&q?";":(Zt(function(){Q=[e,Wt(it.generateStatement(H,$))]}),Q)},te.prototype.maybeBlockSuffix=function(H,$){var Q=ht(Gt($).toString());return H.type===p.BlockStatement&&(!d.comment||!H.leadingComments)&&!Q?[$,s]:Q?[$,T]:[$,e,T]};function Me(H){return Gt(H.name,H)}function be(H,$){return H.async?"async"+($?Ut():s):""}function ei(H){var $=H.generator&&!d.moz.starlessGenerator;return $?"*"+s:""}function sr(H){var $=H.value,Q="";return $.async&&(Q+=be($,!H.computed)),$.generator&&(Q+=ei($)?"*":""),Q}te.prototype.generatePattern=function(H,$,Q){return H.type===p.Identifier?Me(H):this.generateExpression(H,$,Q)},te.prototype.generateFunctionParams=function(H){var $,Q,q,it;if(it=!1,H.type===p.ArrowFunctionExpression&&!H.rest&&(!H.defaults||H.defaults.length===0)&&H.params.length===1&&H.params[0].type===p.Identifier)q=[be(H,!0),Me(H.params[0])];else{for(q=H.type===p.ArrowFunctionExpression?[be(H,!1)]:[],q.push("("),H.defaults&&(it=!0),$=0,Q=H.params.length;$<Q;++$)it&&H.defaults[$]?q.push(this.generateAssignment(H.params[$],H.defaults[$],"=",x.Assignment,W)):q.push(this.generatePattern(H.params[$],x.Assignment,W)),$+1<Q&&q.push(","+s);H.rest&&(H.params.length&&q.push(","+s),q.push("..."),q.push(Me(H.rest))),q.push(")")}return q},te.prototype.generateFunctionBody=function(H){var $,Q;return $=this.generateFunctionParams(H),H.type===p.ArrowFunctionExpression&&($.push(s),$.push("=>")),H.expression?($.push(s),Q=this.generateExpression(H.body,x.Assignment,W),Q.toString().charAt(0)==="{"&&(Q=["(",Q,")"]),$.push(Q)):$.push(this.maybeBlock(H.body,J)),$},te.prototype.generateIterationForStatement=function(H,$,Q){var q=["for"+($.await?Ut()+"await":"")+s+"("],it=this;return Zt(function(){$.left.type===p.VariableDeclaration?Zt(function(){q.push($.left.kind+Ut()),q.push(it.generateStatement($.left.declarations[0],Y))}):q.push(it.generateExpression($.left,x.Call,W)),q=Ot(q,H),q=[Ot(q,it.generateExpression($.right,x.Assignment,W)),")"]}),q.push(this.maybeBlock($.body,Q)),q},te.prototype.generatePropertyKey=function(H,$){var Q=[];return $&&Q.push("["),Q.push(this.generateExpression(H,x.Assignment,W)),$&&Q.push("]"),Q},te.prototype.generateAssignment=function(H,$,Q,q,it){return x.Assignment<q&&(it|=F),Ht([this.generateExpression(H,x.Call,it),s+Q+s,this.generateExpression($,x.Assignment,it)],x.Assignment,q)},te.prototype.semicolon=function(H){return!n&&H&I?"":";"},te.Statement={BlockStatement:function(H,$){var Q,q,it=["{",e],vt=this;return Zt(function(){H.body.length===0&&S&&(Q=H.range,Q[1]-Q[0]>2&&(q=y.substring(Q[0]+1,Q[1]-1),q[0]===`
`&&(it=["{"]),it.push(q)));var yt,At,zt,ae;for(ae=z,$&L&&(ae|=b),yt=0,At=H.body.length;yt<At;++yt)S&&(yt===0&&(H.body[0].leadingComments&&(Q=H.body[0].leadingComments[0].extendedRange,q=y.substring(Q[0],Q[1]),q[0]===`
`&&(it=["{"])),H.body[0].leadingComments||wt(H.range[0],H.body[0].range[0],it)),yt>0&&!H.body[yt-1].trailingComments&&!H.body[yt].leadingComments&&wt(H.body[yt-1].range[1],H.body[yt].range[0],it)),yt===At-1&&(ae|=I),H.body[yt].leadingComments&&S?zt=vt.generateStatement(H.body[yt],ae):zt=Wt(vt.generateStatement(H.body[yt],ae)),it.push(zt),ht(Gt(zt).toString())||S&&yt<At-1&&H.body[yt+1].leadingComments||it.push(e),S&&yt===At-1&&(H.body[yt].trailingComments||wt(H.body[yt].range[1],H.range[1],it))}),it.push(Wt("}")),it},BreakStatement:function(H,$){return H.label?"break "+H.label.name+this.semicolon($):"break"+this.semicolon($)},ContinueStatement:function(H,$){return H.label?"continue "+H.label.name+this.semicolon($):"continue"+this.semicolon($)},ClassBody:function(H,$){var Q=["{",e],q=this;return Zt(function(it){var vt,yt;for(vt=0,yt=H.body.length;vt<yt;++vt)Q.push(it),Q.push(q.generateExpression(H.body[vt],x.Sequence,W)),vt+1<yt&&Q.push(e)}),ht(Gt(Q).toString())||Q.push(e),Q.push(T),Q.push("}"),Q},ClassDeclaration:function(H,$){var Q,q;return Q=["class"],H.id&&(Q=Ot(Q,this.generateExpression(H.id,x.Sequence,W))),H.superClass&&(q=Ot("extends",this.generateExpression(H.superClass,x.Unary,W)),Q=Ot(Q,q)),Q.push(s),Q.push(this.generateStatement(H.body,B)),Q},DirectiveStatement:function(H,$){return d.raw&&H.raw?H.raw+this.semicolon($):pt(H.directive)+this.semicolon($)},DoWhileStatement:function(H,$){var Q=Ot("do",this.maybeBlock(H.body,z));return Q=this.maybeBlockSuffix(H.body,Q),Ot(Q,["while"+s+"(",this.generateExpression(H.test,x.Sequence,W),")"+this.semicolon($)])},CatchClause:function(H,$){var Q,q=this;return Zt(function(){var it;H.param?(Q=["catch"+s+"(",q.generateExpression(H.param,x.Sequence,W),")"],H.guard&&(it=q.generateExpression(H.guard,x.Sequence,W),Q.splice(2,0," if ",it))):Q=["catch"]}),Q.push(this.maybeBlock(H.body,z)),Q},DebuggerStatement:function(H,$){return"debugger"+this.semicolon($)},EmptyStatement:function(H,$){return";"},ExportDefaultDeclaration:function(H,$){var Q=["export"],q;return q=$&I?B:z,Q=Ot(Q,"default"),A(H.declaration)?Q=Ot(Q,this.generateStatement(H.declaration,q)):Q=Ot(Q,this.generateExpression(H.declaration,x.Assignment,W)+this.semicolon($)),Q},ExportNamedDeclaration:function(H,$){var Q=["export"],q,it=this;return q=$&I?B:z,H.declaration?Ot(Q,this.generateStatement(H.declaration,q)):(H.specifiers&&(H.specifiers.length===0?Q=Ot(Q,"{"+s+"}"):H.specifiers[0].type===p.ExportBatchSpecifier?Q=Ot(Q,this.generateExpression(H.specifiers[0],x.Sequence,W)):(Q=Ot(Q,"{"),Zt(function(vt){var yt,At;for(Q.push(e),yt=0,At=H.specifiers.length;yt<At;++yt)Q.push(vt),Q.push(it.generateExpression(H.specifiers[yt],x.Sequence,W)),yt+1<At&&Q.push(","+e)}),ht(Gt(Q).toString())||Q.push(e),Q.push(T+"}")),H.source?Q=Ot(Q,["from"+s,this.generateExpression(H.source,x.Sequence,W),this.semicolon($)]):Q.push(this.semicolon($))),Q)},ExportAllDeclaration:function(H,$){return["export"+s,"*"+s,"from"+s,this.generateExpression(H.source,x.Sequence,W),this.semicolon($)]},ExpressionStatement:function(H,$){var Q,q;function it(At){var zt;return At.slice(0,5)!=="class"?!1:(zt=At.charCodeAt(5),zt===123||v.code.isWhiteSpace(zt)||v.code.isLineTerminator(zt))}function vt(At){var zt;return At.slice(0,8)!=="function"?!1:(zt=At.charCodeAt(8),zt===40||v.code.isWhiteSpace(zt)||zt===42||v.code.isLineTerminator(zt))}function yt(At){var zt,ae,we;if(At.slice(0,5)!=="async"||!v.code.isWhiteSpace(At.charCodeAt(5)))return!1;for(ae=6,we=At.length;ae<we&&v.code.isWhiteSpace(At.charCodeAt(ae));++ae);return ae===we||At.slice(ae,ae+8)!=="function"?!1:(zt=At.charCodeAt(ae+8),zt===40||v.code.isWhiteSpace(zt)||zt===42||v.code.isLineTerminator(zt))}return Q=[this.generateExpression(H.expression,x.Sequence,W)],q=Gt(Q).toString(),q.charCodeAt(0)===123||it(q)||vt(q)||yt(q)||c&&$&b&&H.expression.type===p.Literal&&typeof H.expression.value=="string"?Q=["(",Q,")"+this.semicolon($)]:Q.push(this.semicolon($)),Q},ImportDeclaration:function(H,$){var Q,q,it=this;return H.specifiers.length===0?["import",s,this.generateExpression(H.source,x.Sequence,W),this.semicolon($)]:(Q=["import"],q=0,H.specifiers[q].type===p.ImportDefaultSpecifier&&(Q=Ot(Q,[this.generateExpression(H.specifiers[q],x.Sequence,W)]),++q),H.specifiers[q]&&(q!==0&&Q.push(","),H.specifiers[q].type===p.ImportNamespaceSpecifier?Q=Ot(Q,[s,this.generateExpression(H.specifiers[q],x.Sequence,W)]):(Q.push(s+"{"),H.specifiers.length-q===1?(Q.push(s),Q.push(this.generateExpression(H.specifiers[q],x.Sequence,W)),Q.push(s+"}"+s)):(Zt(function(vt){var yt,At;for(Q.push(e),yt=q,At=H.specifiers.length;yt<At;++yt)Q.push(vt),Q.push(it.generateExpression(H.specifiers[yt],x.Sequence,W)),yt+1<At&&Q.push(","+e)}),ht(Gt(Q).toString())||Q.push(e),Q.push(T+"}"+s)))),Q=Ot(Q,["from"+s,this.generateExpression(H.source,x.Sequence,W),this.semicolon($)]),Q)},VariableDeclarator:function(H,$){var Q=$&F?W:Z;return H.init?[this.generateExpression(H.id,x.Assignment,Q),s,"=",s,this.generateExpression(H.init,x.Assignment,Q)]:this.generatePattern(H.id,x.Assignment,Q)},VariableDeclaration:function(H,$){var Q,q,it,vt,yt,At=this;Q=[H.kind],yt=$&F?z:Y;function zt(){for(vt=H.declarations[0],d.comment&&vt.leadingComments?(Q.push(`
`),Q.push(Wt(At.generateStatement(vt,yt)))):(Q.push(Ut()),Q.push(At.generateStatement(vt,yt))),q=1,it=H.declarations.length;q<it;++q)vt=H.declarations[q],d.comment&&vt.leadingComments?(Q.push(","+e),Q.push(Wt(At.generateStatement(vt,yt)))):(Q.push(","+s),Q.push(At.generateStatement(vt,yt)))}return H.declarations.length>1?Zt(zt):zt(),Q.push(this.semicolon($)),Q},ThrowStatement:function(H,$){return[Ot("throw",this.generateExpression(H.argument,x.Sequence,W)),this.semicolon($)]},TryStatement:function(H,$){var Q,q,it,vt;if(Q=["try",this.maybeBlock(H.block,z)],Q=this.maybeBlockSuffix(H.block,Q),H.handlers)for(q=0,it=H.handlers.length;q<it;++q)Q=Ot(Q,this.generateStatement(H.handlers[q],z)),(H.finalizer||q+1!==it)&&(Q=this.maybeBlockSuffix(H.handlers[q].body,Q));else{for(vt=H.guardedHandlers||[],q=0,it=vt.length;q<it;++q)Q=Ot(Q,this.generateStatement(vt[q],z)),(H.finalizer||q+1!==it)&&(Q=this.maybeBlockSuffix(vt[q].body,Q));if(H.handler)if(Array.isArray(H.handler))for(q=0,it=H.handler.length;q<it;++q)Q=Ot(Q,this.generateStatement(H.handler[q],z)),(H.finalizer||q+1!==it)&&(Q=this.maybeBlockSuffix(H.handler[q].body,Q));else Q=Ot(Q,this.generateStatement(H.handler,z)),H.finalizer&&(Q=this.maybeBlockSuffix(H.handler.body,Q))}return H.finalizer&&(Q=Ot(Q,["finally",this.maybeBlock(H.finalizer,z)])),Q},SwitchStatement:function(H,$){var Q,q,it,vt,yt,At=this;if(Zt(function(){Q=["switch"+s+"(",At.generateExpression(H.discriminant,x.Sequence,W),")"+s+"{"+e]}),H.cases)for(yt=z,it=0,vt=H.cases.length;it<vt;++it)it===vt-1&&(yt|=I),q=Wt(this.generateStatement(H.cases[it],yt)),Q.push(q),ht(Gt(q).toString())||Q.push(e);return Q.push(Wt("}")),Q},SwitchCase:function(H,$){var Q,q,it,vt,yt,At=this;return Zt(function(){for(H.test?Q=[Ot("case",At.generateExpression(H.test,x.Sequence,W)),":"]:Q=["default:"],it=0,vt=H.consequent.length,vt&&H.consequent[0].type===p.BlockStatement&&(q=At.maybeBlock(H.consequent[0],z),Q.push(q),it=1),it!==vt&&!ht(Gt(Q).toString())&&Q.push(e),yt=z;it<vt;++it)it===vt-1&&$&I&&(yt|=I),q=Wt(At.generateStatement(H.consequent[it],yt)),Q.push(q),it+1!==vt&&!ht(Gt(q).toString())&&Q.push(e)}),Q},IfStatement:function(H,$){var Q,q,it,vt=this;return Zt(function(){Q=["if"+s+"(",vt.generateExpression(H.test,x.Sequence,W),")"]}),it=$&I,q=z,it&&(q|=I),H.alternate?(Q.push(this.maybeBlock(H.consequent,z)),Q=this.maybeBlockSuffix(H.consequent,Q),H.alternate.type===p.IfStatement?Q=Ot(Q,["else ",this.generateStatement(H.alternate,q)]):Q=Ot(Q,Ot("else",this.maybeBlock(H.alternate,q)))):Q.push(this.maybeBlock(H.consequent,q)),Q},ForStatement:function(H,$){var Q,q=this;return Zt(function(){Q=["for"+s+"("],H.init?H.init.type===p.VariableDeclaration?Q.push(q.generateStatement(H.init,Y)):(Q.push(q.generateExpression(H.init,x.Sequence,Z)),Q.push(";")):Q.push(";"),H.test&&(Q.push(s),Q.push(q.generateExpression(H.test,x.Sequence,W))),Q.push(";"),H.update&&(Q.push(s),Q.push(q.generateExpression(H.update,x.Sequence,W))),Q.push(")")}),Q.push(this.maybeBlock(H.body,$&I?B:z)),Q},ForInStatement:function(H,$){return this.generateIterationForStatement("in",H,$&I?B:z)},ForOfStatement:function(H,$){return this.generateIterationForStatement("of",H,$&I?B:z)},LabeledStatement:function(H,$){return[H.label.name+":",this.maybeBlock(H.body,$&I?B:z)]},Program:function(H,$){var Q,q,it,vt,yt;for(vt=H.body.length,Q=[l&&vt>0?`
`:""],yt=k,it=0;it<vt;++it)!l&&it===vt-1&&(yt|=I),S&&(it===0&&(H.body[0].leadingComments||wt(H.range[0],H.body[it].range[0],Q)),it>0&&!H.body[it-1].trailingComments&&!H.body[it].leadingComments&&wt(H.body[it-1].range[1],H.body[it].range[0],Q)),q=Wt(this.generateStatement(H.body[it],yt)),Q.push(q),it+1<vt&&!ht(Gt(q).toString())&&(S&&H.body[it+1].leadingComments||Q.push(e)),S&&it===vt-1&&(H.body[it].trailingComments||wt(H.body[it].range[1],H.range[1],Q));return Q},FunctionDeclaration:function(H,$){return[be(H,!0),"function",ei(H)||Ut(),H.id?Me(H.id):"",this.generateFunctionBody(H)]},ReturnStatement:function(H,$){return H.argument?[Ot("return",this.generateExpression(H.argument,x.Sequence,W)),this.semicolon($)]:["return"+this.semicolon($)]},WhileStatement:function(H,$){var Q,q=this;return Zt(function(){Q=["while"+s+"(",q.generateExpression(H.test,x.Sequence,W),")"]}),Q.push(this.maybeBlock(H.body,$&I?B:z)),Q},WithStatement:function(H,$){var Q,q=this;return Zt(function(){Q=["with"+s+"(",q.generateExpression(H.object,x.Sequence,W),")"]}),Q.push(this.maybeBlock(H.body,$&I?B:z)),Q}},st(te.prototype,te.Statement),te.Expression={SequenceExpression:function(H,$,Q){var q,it,vt;for(x.Sequence<$&&(Q|=F),q=[],it=0,vt=H.expressions.length;it<vt;++it)q.push(this.generateExpression(H.expressions[it],x.Assignment,Q)),it+1<vt&&q.push(","+s);return Ht(q,x.Sequence,$)},AssignmentExpression:function(H,$,Q){return this.generateAssignment(H.left,H.right,H.operator,$,Q)},ArrowFunctionExpression:function(H,$,Q){return Ht(this.generateFunctionBody(H),x.ArrowFunction,$)},ConditionalExpression:function(H,$,Q){return x.Conditional<$&&(Q|=F),Ht([this.generateExpression(H.test,x.Coalesce,Q),s+"?"+s,this.generateExpression(H.consequent,x.Assignment,Q),s+":"+s,this.generateExpression(H.alternate,x.Assignment,Q)],x.Conditional,$)},LogicalExpression:function(H,$,Q){return H.operator==="??"&&(Q|=N),this.BinaryExpression(H,$,Q)},BinaryExpression:function(H,$,Q){var q,it,vt,yt,At,zt;return yt=M[H.operator],it=H.operator==="**"?x.Postfix:yt,vt=H.operator==="**"?yt:yt+1,yt<$&&(Q|=F),At=this.generateExpression(H.left,it,Q),zt=At.toString(),zt.charCodeAt(zt.length-1)===47&&v.code.isIdentifierPartES5(H.operator.charCodeAt(0))?q=[At,Ut(),H.operator]:q=Ot(At,H.operator),At=this.generateExpression(H.right,vt,Q),H.operator==="/"&&At.toString().charAt(0)==="/"||H.operator.slice(-1)==="<"&&At.toString().slice(0,3)==="!--"?(q.push(Ut()),q.push(At)):q=Ot(q,At),H.operator==="in"&&!(Q&F)?["(",q,")"]:(H.operator==="||"||H.operator==="&&")&&Q&N?["(",q,")"]:Ht(q,yt,$)},CallExpression:function(H,$,Q){var q,it,vt;for(q=[this.generateExpression(H.callee,x.Call,U)],H.optional&&q.push("?."),q.push("("),it=0,vt=H.arguments.length;it<vt;++it)q.push(this.generateExpression(H.arguments[it],x.Assignment,W)),it+1<vt&&q.push(","+s);return q.push(")"),Q&G?Ht(q,x.Call,$):["(",q,")"]},ChainExpression:function(H,$,Q){x.OptionalChaining<$&&(Q|=G);var q=this.generateExpression(H.expression,x.OptionalChaining,Q);return Ht(q,x.OptionalChaining,$)},NewExpression:function(H,$,Q){var q,it,vt,yt,At;if(it=H.arguments.length,At=Q&D&&!u&&it===0?O:X,q=Ot("new",this.generateExpression(H.callee,x.New,At)),!(Q&D)||u||it>0){for(q.push("("),vt=0,yt=it;vt<yt;++vt)q.push(this.generateExpression(H.arguments[vt],x.Assignment,W)),vt+1<yt&&q.push(","+s);q.push(")")}return Ht(q,x.New,$)},MemberExpression:function(H,$,Q){var q,it;return q=[this.generateExpression(H.object,x.Call,Q&G?U:X)],H.computed?(H.optional&&q.push("?."),q.push("["),q.push(this.generateExpression(H.property,x.Sequence,Q&G?W:O)),q.push("]")):(!H.optional&&H.object.type===p.Literal&&typeof H.object.value=="number"&&(it=Gt(q).toString(),it.indexOf(".")<0&&!/[eExX]/.test(it)&&v.code.isDecimalDigit(it.charCodeAt(it.length-1))&&!(it.length>=2&&it.charCodeAt(0)===48)&&q.push(" ")),q.push(H.optional?"?.":"."),q.push(Me(H.property))),Ht(q,x.Member,$)},MetaProperty:function(H,$,Q){var q;return q=[],q.push(typeof H.meta=="string"?H.meta:Me(H.meta)),q.push("."),q.push(typeof H.property=="string"?H.property:Me(H.property)),Ht(q,x.Member,$)},UnaryExpression:function(H,$,Q){var q,it,vt,yt,At;return it=this.generateExpression(H.argument,x.Unary,W),s===""?q=Ot(H.operator,it):(q=[H.operator],H.operator.length>2?q=Ot(q,it):(yt=Gt(q).toString(),At=yt.charCodeAt(yt.length-1),vt=it.toString().charCodeAt(0),((At===43||At===45)&&At===vt||v.code.isIdentifierPartES5(At)&&v.code.isIdentifierPartES5(vt))&&q.push(Ut()),q.push(it))),Ht(q,x.Unary,$)},YieldExpression:function(H,$,Q){var q;return H.delegate?q="yield*":q="yield",H.argument&&(q=Ot(q,this.generateExpression(H.argument,x.Yield,W))),Ht(q,x.Yield,$)},AwaitExpression:function(H,$,Q){var q=Ot(H.all?"await*":"await",this.generateExpression(H.argument,x.Await,W));return Ht(q,x.Await,$)},UpdateExpression:function(H,$,Q){return H.prefix?Ht([H.operator,this.generateExpression(H.argument,x.Unary,W)],x.Unary,$):Ht([this.generateExpression(H.argument,x.Postfix,W),H.operator],x.Postfix,$)},FunctionExpression:function(H,$,Q){var q=[be(H,!0),"function"];return H.id?(q.push(ei(H)||Ut()),q.push(Me(H.id))):q.push(ei(H)||s),q.push(this.generateFunctionBody(H)),q},ArrayPattern:function(H,$,Q){return this.ArrayExpression(H,$,Q,!0)},ArrayExpression:function(H,$,Q,q){var it,vt,yt=this;return H.elements.length?(vt=q?!1:H.elements.length>1,it=["[",vt?e:""],Zt(function(At){var zt,ae;for(zt=0,ae=H.elements.length;zt<ae;++zt)H.elements[zt]?(it.push(vt?At:""),it.push(yt.generateExpression(H.elements[zt],x.Assignment,W))):(vt&&it.push(At),zt+1===ae&&it.push(",")),zt+1<ae&&it.push(","+(vt?e:s))}),vt&&!ht(Gt(it).toString())&&it.push(e),it.push(vt?T:""),it.push("]"),it):"[]"},RestElement:function(H,$,Q){return"..."+this.generatePattern(H.argument)},ClassExpression:function(H,$,Q){var q,it;return q=["class"],H.id&&(q=Ot(q,this.generateExpression(H.id,x.Sequence,W))),H.superClass&&(it=Ot("extends",this.generateExpression(H.superClass,x.Unary,W)),q=Ot(q,it)),q.push(s),q.push(this.generateStatement(H.body,B)),q},MethodDefinition:function(H,$,Q){var q,it;return H.static?q=["static"+s]:q=[],H.kind==="get"||H.kind==="set"?it=[Ot(H.kind,this.generatePropertyKey(H.key,H.computed)),this.generateFunctionBody(H.value)]:it=[sr(H),this.generatePropertyKey(H.key,H.computed),this.generateFunctionBody(H.value)],Ot(q,it)},Property:function(H,$,Q){return H.kind==="get"||H.kind==="set"?[H.kind,Ut(),this.generatePropertyKey(H.key,H.computed),this.generateFunctionBody(H.value)]:H.shorthand?H.value.type==="AssignmentPattern"?this.AssignmentPattern(H.value,x.Sequence,W):this.generatePropertyKey(H.key,H.computed):H.method?[sr(H),this.generatePropertyKey(H.key,H.computed),this.generateFunctionBody(H.value)]:[this.generatePropertyKey(H.key,H.computed),":"+s,this.generateExpression(H.value,x.Assignment,W)]},ObjectExpression:function(H,$,Q){var q,it,vt,yt=this;return H.properties.length?(q=H.properties.length>1,Zt(function(){vt=yt.generateExpression(H.properties[0],x.Sequence,W)}),!q&&!ut(Gt(vt).toString())?["{",s,vt,s,"}"]:(Zt(function(At){var zt,ae;if(it=["{",e,At,vt],q)for(it.push(","+e),zt=1,ae=H.properties.length;zt<ae;++zt)it.push(At),it.push(yt.generateExpression(H.properties[zt],x.Sequence,W)),zt+1<ae&&it.push(","+e)}),ht(Gt(it).toString())||it.push(e),it.push(T),it.push("}"),it)):"{}"},AssignmentPattern:function(H,$,Q){return this.generateAssignment(H.left,H.right,"=",$,Q)},ObjectPattern:function(H,$,Q){var q,it,vt,yt,At,zt=this;if(!H.properties.length)return"{}";if(yt=!1,H.properties.length===1)At=H.properties[0],At.type===p.Property&&At.value.type!==p.Identifier&&(yt=!0);else for(it=0,vt=H.properties.length;it<vt;++it)if(At=H.properties[it],At.type===p.Property&&!At.shorthand){yt=!0;break}return q=["{",yt?e:""],Zt(function(ae){var we,Ui;for(we=0,Ui=H.properties.length;we<Ui;++we)q.push(yt?ae:""),q.push(zt.generateExpression(H.properties[we],x.Sequence,W)),we+1<Ui&&q.push(","+(yt?e:s))}),yt&&!ht(Gt(q).toString())&&q.push(e),q.push(yt?T:""),q.push("}"),q},ThisExpression:function(H,$,Q){return"this"},Super:function(H,$,Q){return"super"},Identifier:function(H,$,Q){return Me(H)},ImportDefaultSpecifier:function(H,$,Q){return Me(H.id||H.local)},ImportNamespaceSpecifier:function(H,$,Q){var q=["*"],it=H.id||H.local;return it&&q.push(s+"as"+Ut()+Me(it)),q},ImportSpecifier:function(H,$,Q){var q=H.imported,it=[q.name],vt=H.local;return vt&&vt.name!==q.name&&it.push(Ut()+"as"+Ut()+Me(vt)),it},ExportSpecifier:function(H,$,Q){var q=H.local,it=[q.name],vt=H.exported;return vt&&vt.name!==q.name&&it.push(Ut()+"as"+Ut()+Me(vt)),it},Literal:function(H,$,Q){var q;if(H.hasOwnProperty("raw")&&f&&d.raw)try{if(q=f(H.raw).body[0].expression,q.type===p.Literal&&q.value===H.value)return H.raw}catch{}return H.regex?"/"+H.regex.pattern+"/"+H.regex.flags:typeof H.value=="bigint"?H.value.toString()+"n":H.bigint?H.bigint+"n":H.value===null?"null":typeof H.value=="string"?Pt(H.value):typeof H.value=="number"?lt(H.value):typeof H.value=="boolean"?H.value?"true":"false":Lt(H.value)},GeneratorExpression:function(H,$,Q){return this.ComprehensionExpression(H,$,Q)},ComprehensionExpression:function(H,$,Q){var q,it,vt,yt,At=this;return q=H.type===p.GeneratorExpression?["("]:["["],d.moz.comprehensionExpressionStartsWithAssignment&&(yt=this.generateExpression(H.body,x.Assignment,W),q.push(yt)),H.blocks&&Zt(function(){for(it=0,vt=H.blocks.length;it<vt;++it)yt=At.generateExpression(H.blocks[it],x.Sequence,W),it>0||d.moz.comprehensionExpressionStartsWithAssignment?q=Ot(q,yt):q.push(yt)}),H.filter&&(q=Ot(q,"if"+s),yt=this.generateExpression(H.filter,x.Sequence,W),q=Ot(q,["(",yt,")"])),d.moz.comprehensionExpressionStartsWithAssignment||(yt=this.generateExpression(H.body,x.Assignment,W),q=Ot(q,yt)),q.push(H.type===p.GeneratorExpression?")":"]"),q},ComprehensionBlock:function(H,$,Q){var q;return H.left.type===p.VariableDeclaration?q=[H.left.kind,Ut(),this.generateStatement(H.left.declarations[0],Y)]:q=this.generateExpression(H.left,x.Call,W),q=Ot(q,H.of?"of":"in"),q=Ot(q,this.generateExpression(H.right,x.Sequence,W)),["for"+s+"(",q,")"]},SpreadElement:function(H,$,Q){return["...",this.generateExpression(H.argument,x.Assignment,W)]},TaggedTemplateExpression:function(H,$,Q){var q=U;Q&G||(q=X);var it=[this.generateExpression(H.tag,x.Call,q),this.generateExpression(H.quasi,x.Primary,V)];return Ht(it,x.TaggedTemplate,$)},TemplateElement:function(H,$,Q){return H.value.raw},TemplateLiteral:function(H,$,Q){var q,it,vt;for(q=["`"],it=0,vt=H.quasis.length;it<vt;++it)q.push(this.generateExpression(H.quasis[it],x.Primary,W)),it+1<vt&&(q.push("${"+s),q.push(this.generateExpression(H.expressions[it],x.Sequence,W)),q.push(s+"}"));return q.push("`"),q},ModuleSpecifier:function(H,$,Q){return this.Literal(H,$,Q)},ImportExpression:function(H,$,Q){return Ht(["import(",this.generateExpression(H.source,x.Assignment,W),")"],x.Call,$)}},st(te.prototype,te.Expression),te.prototype.generateExpression=function(H,$,Q){var q,it;return it=H.type||p.Property,d.verbatim&&H.hasOwnProperty(d.verbatim)?me(H,$):(q=this[it](H,$,Q),d.comment&&(q=ce(H,q)),Gt(q,H))},te.prototype.generateStatement=function(H,$){var Q,q;return Q=this[H.type](H,$),d.comment&&(Q=ce(H,Q)),q=Gt(Q).toString(),H.type===p.Program&&!l&&e===""&&q.charAt(q.length-1)===`
`&&(Q=m?Gt(Q).replaceRight(/\s+$/,""):q.replace(/\s+$/,"")),Gt(Q,H)};function Ea(H){var $;if($=new te,A(H))return $.generateStatement(H,z);if(P(H))return $.generateExpression(H,x.Sequence,W);throw new Error("Unknown node type: "+H.type)}function Pa(H,$){var Q=j(),q,it;return $!=null?(typeof $.indent=="string"&&(Q.format.indent.style=$.indent),typeof $.base=="number"&&(Q.format.indent.base=$.base),$=dt(Q,$),t=$.format.indent.style,typeof $.base=="string"?T=$.base:T=tt(t,$.format.indent.base)):($=Q,t=$.format.indent.style,T=tt(t,$.format.indent.base)),h=$.format.json,g=$.format.renumber,o=h?!1:$.format.hexadecimal,a=h?"double":$.format.quotes,r=$.format.escapeless,e=$.format.newline,s=$.format.space,$.format.compact&&(e=s=t=T=""),u=$.format.parentheses,n=$.format.semicolons,l=$.format.safeConcatenation,c=$.directive,f=h?null:$.parse,m=$.sourceMap,y=$.sourceCode,S=$.format.preserveBlankLines&&y!==null,d=$,m&&(i.browser?R=A7.sourceMap.SourceNode:R=N7().SourceNode),q=Ea(H),m?(it=q.toStringWithSourceMap({file:$.file,sourceRoot:$.sourceMapRoot}),$.sourceContent&&it.map.setSourceContent($.sourceMap,$.sourceContent),$.sourceMapWithCode?it:it.map.toString()):(it={code:q.toString(),map:null},$.sourceMapWithCode?it:it.code)}C={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},E=j().format,i.version=z7.version,i.generate=Pa,i.attachComments=w.attachComments,i.Precedence=dt({},x),i.browser=!1,i.FORMAT_MINIFY=C,i.FORMAT_DEFAULTS=E})()})(pl)),pl}var Z7=W7();const _T=JT(Z7);class Y7{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:p=>this.replacement=p}}replace(p,x,M,R){p&&x&&(M!=null?p[x][M]=R:p[x]=R)}remove(p,x,M){p&&x&&(M!=null?p[x].splice(M,1):delete p[x])}}class U7 extends Y7{constructor(p,x){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:M=>this.replacement=M},this.enter=p,this.leave=x}visit(p,x,M,R){if(p){if(this.enter){const v=this.should_skip,T=this.should_remove,t=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,p,x,M,R),this.replacement&&(p=this.replacement,this.replace(x,M,R,p)),this.should_remove&&this.remove(x,M,R);const h=this.should_skip,g=this.should_remove;if(this.should_skip=v,this.should_remove=T,this.replacement=t,h)return p;if(g)return null}let w;for(w in p){const v=p[w];if(v&&typeof v=="object")if(Array.isArray(v)){const T=v;for(let t=0;t<T.length;t+=1){const h=T[t];Nl(h)&&(this.visit(h,p,w,t)||t--)}}else Nl(v)&&this.visit(v,p,w,null)}if(this.leave){const v=this.replacement,T=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,p,x,M,R),this.replacement&&(p=this.replacement,this.replace(x,M,R,p)),this.should_remove&&this.remove(x,M,R);const t=this.should_remove;if(this.replacement=v,this.should_remove=T,t)return null}}return p}}function Nl(i){return i!==null&&typeof i=="object"&&"type"in i&&typeof i.type=="string"}function tC(i,{enter:p,leave:x}){return new U7(p,x).visit(i,null)}let H7=[],Hn=new Map;function K7(i,p={}){const{wrapAsync:x=!1,addReturn:M=!0,emitMiniLocations:R=!0,emitWidgets:w=!0}=p,v=[];let T=P7(i,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0,onComment:v});const t=gG(v,i.length);let h=[];const g=(e,s)=>{const u=Hn.get("minilang");if(u){const n=`[${e}]`,l=u.getLocations(n,s.start);h=h.concat(l)}else{const n=Bh(`"${e}"`,s.start,i);h=h.concat(n)}};let o=[];tC(T,{enter(e,s){if(dG(e)){const{name:u}=e.tag,n=Hn.get(u),l=e.quasi.quasis[0].value.raw,c=e.quasi.start+1;if(R){const d=n.getLocations(l,c);h=h.concat(d)}return this.skip(),this.replace(mG(u,l,c))}if(cG(e,"tidal")){const u=e.quasi.quasis[0].value.raw,n=e.quasi.start+1;if(R){const l=pG(u,n);h=h.concat(l)}return this.skip(),this.replace(vG(u,n))}if(iG(e,s)){if(Yl(e.start,t))return;const{quasis:u}=e,{raw:n}=u[0].value;return this.skip(),R&&g(n,e),this.replace(Zl(n,e))}if(eG(e)){if(Yl(e.start,t))return;const{value:u}=e;return this.skip(),R&&g(u,e),this.replace(Zl(u,e))}if(sG(e))return w&&o.push({from:e.arguments[0].start,to:e.arguments[0].end,value:e.arguments[0].raw,min:e.arguments[1]?.value??0,max:e.arguments[2]?.value??1,step:e.arguments[3]?.value,type:"slider"}),this.replace(rG(e));if(nG(e)){const u=e.callee.property.name,n=o.filter(c=>c.type===u).length,l={to:e.end,index:n,type:u,id:p.id};return w&&o.push(l),this.replace(oG(e,l))}if(hG(e,s))return this.replace(uG(e));if(lG(e))return this.replace(fG(e))},leave(e,s,u,n){if(!k7(e))return;let[l,...c]=e.arguments;if(!l)throw new Error("K(...) requires an expression");J7(l)&&(l={type:"CallExpression",callee:l,arguments:[],optional:!1});const{template:d,patternExprs:f}=j7(l);if(f.length){const S=[{type:"Literal",value:d},...f,...c];let C=e.callee;return C.type==="ChainExpression"&&(C=C.expression),C.type==="MemberExpression"?this.replace({type:"CallExpression",callee:Wl(C.object),arguments:S,optional:!1}):this.replace({type:"CallExpression",callee:{type:"Identifier",name:"worklet"},arguments:S,optional:!1})}const m=[{type:"Literal",value:Lo(l)},...c];let y=e.callee;return y.type==="ChainExpression"&&(y=y.expression),y.type==="MemberExpression"?this.replace({type:"CallExpression",callee:Wl(y.object),arguments:m,optional:!1}):this.replace({type:"CallExpression",callee:{type:"Identifier",name:"worklet"},arguments:m,optional:!1})}});let{body:a}=T;if(!a.length)console.warn("empty body -> fallback to silence"),a.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!a?.[a.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(M){const{expression:e}=a[a.length-1];a[a.length-1]={type:"ReturnStatement",argument:e}}let r=_T.generate(T);return x&&(r=`(async ()=>{${r}})()`),R?{output:r,miniLocations:h,widgets:o}:{output:r}}function k7(i){if(i.type!=="CallExpression")return!1;let p=i.callee;return p.type==="ChainExpression"&&(p=p.expression),p.type==="MemberExpression"?!p.computed&&p.property?.name==="K":p.type==="Identifier"&&p.name==="K"}function J7(i){return i.type!=="ArrowFunctionExpression"&&i.type!=="FunctionExpression"||i.params.length?!1:i.body?.type==="BlockStatement"}function Lo(i){return _T.generate(i,{format:{semicolons:!1}})}function j7(i){const p=zl(i),x=new Map,M=[];if(tC(p,{enter(v,T,t,h){x.set(v,{parent:T,prop:t,index:h});const g=Q7(v);g&&(M.push({node:v,patternExpr:g}),this.skip())}}),!M.length)return{template:Lo(p),patternExprs:[]};M.sort((v,T)=>Vl(v.node)-Vl(T.node));const R=M.map(({patternExpr:v})=>zl(v));let w=p;return M.forEach(({node:v},T)=>{w=tG(v,_7(T),x,w)}),{template:Lo(w),patternExprs:R}}function Q7(i){if($7(i)){const p=i.arguments?.[0];if(!p)throw new Error("S(...) requires an argument");return p}return eC(i)?i:null}function $7(i){if(i.type!=="CallExpression")return!1;const p=i.callee;return p.type==="Identifier"?p.name==="S":p.type==="MemberExpression"&&!p.computed?p.property?.name==="S":!1}function q7(){return Hn.get("minilang")?.name||"m"}function eC(i){if(i.type!=="CallExpression")return!1;const p=i.callee;if(p.type!=="Identifier"||p.name!==q7())return!1;const x=i.arguments?.[0];return x?.type==="Literal"&&typeof x.value=="string"}function Vl(i){if(typeof i.start=="number")return i.start;if(eC(i)){const p=i.arguments?.[1];if(p?.type==="Literal"&&typeof p.value=="number")return p.value}return 0}function _7(i){return{type:"MemberExpression",object:{type:"Identifier",name:"pat"},property:{type:"Literal",value:i},computed:!0,optional:!1}}function tG(i,p,x,M){const R=x.get(i);if(!R||!R.parent)return p;const{parent:w,prop:v,index:T}=R;return Array.isArray(w[v])?w[v][T]=p:w[v]=p,x.set(p,{parent:w,prop:v,index:T}),M}function zl(i){return JSON.parse(JSON.stringify(i))}function Wl(i){return{type:"MemberExpression",object:i,property:{type:"Identifier",name:"worklet"},computed:!1,optional:!1}}function eG(i,p,x){return i.type!=="Literal"?!1:i.raw[0]==='"'}function iG(i,p){return i.type==="TemplateLiteral"&&p.type!=="TaggedTemplateExpression"}function Zl(i,p){const{start:x}=p,M=Hn.get("minilang");let R="m";return M&&M.name&&(R=M.name),{type:"CallExpression",callee:{type:"Identifier",name:R},arguments:[{type:"Literal",value:i},{type:"Literal",value:x}],optional:!1}}function sG(i){return i.type==="CallExpression"&&i.callee.name==="slider"}function nG(i){return i.type==="CallExpression"&&H7.includes(i.callee.property?.name)}function rG(i){const p="slider_"+i.arguments[0].start;return i.arguments.unshift({type:"Literal",value:p,raw:p}),i.callee.name="sliderWithID",i}function aG(i){return`${i.id||""}_widget_${i.type}_${i.index}`}function oG(i,p){const x=aG(p);return i.arguments.unshift({type:"Literal",value:x,raw:x}),i}function hG(i,p){return i.type==="CallExpression"&&i.callee.name==="samples"&&p.type!=="AwaitExpression"}function uG(i){return{type:"AwaitExpression",argument:i}}function lG(i){return i.type==="LabeledStatement"}function fG(i){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:i.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:i.label.name,raw:`'${i.label.name}'`}]}}}function dG(i){return i.type==="TaggedTemplateExpression"&&Hn.has(i.tag.name)}function cG(i,p){return i.type==="TaggedTemplateExpression"&&i.tag.name===p}function pG(i,p){return i.split("").reduce((x,M,R)=>(M!=='"'||(!x.length||x[x.length-1].length>1?x.push([R+1]):x[x.length-1].push(R)),x),[]).map(([x,M])=>{const R=i.slice(x,M);return Bh(`"${R}"`,p+x-1)}).flat()}function vG(i,p){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:i},{type:"Literal",value:p}],optional:!1}}function mG(i,p,x){return{type:"CallExpression",callee:{type:"Identifier",name:i},arguments:[{type:"Literal",value:p},{type:"Literal",value:x}],optional:!1}}function gG(i,p){const x=[],M=[];for(const R of i){const w=R.value.trim();if(w.startsWith("mini-off"))M.push(R.start);else if(w.startsWith("mini-on")){const v=M.pop();x.push([v,R.end])}}for(;M.length;){const R=M.pop();x.push([R,p])}return x}function Yl(i,p){for(const[x,M]of p)if(i>=x&&i<M)return!0;return!1}function Kh(i){return i!==null&&typeof i=="object"&&"name"in i&&typeof i.name=="string"}function kh(i){return i!==null&&typeof i=="object"&&"step"in i&&typeof i.step=="number"&&"alt"in i&&typeof i.alt=="number"&&!isNaN(i.step)&&!isNaN(i.alt)}var iC=[0,2,4,-1,1,3,5],sC=iC.map(i=>Math.floor(i*7/12));function nC(i){const{step:p,alt:x,oct:M,dir:R=1}=i,w=iC[p]+7*x;if(M===void 0)return[R*w];const v=M-sC[p]-4*x;return[R*w,R*v]}var xG=[3,0,4,1,5,2,6];function rC(i){const[p,x,M]=i,R=xG[yG(p)],w=Math.floor((p+1)/7);if(x===void 0)return{step:R,alt:w,dir:M};const v=x+4*w+sC[R];return{step:R,alt:w,oct:v,dir:M}}function yG(i){const p=(i+1)%7;return p<0?7+p:p}var Ul=(i,p)=>Array(Math.abs(p)+1).join(i),Do=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),TG="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",CG="(AA|A|P|M|m|d|dd)([-+]?\\d+)",SG=new RegExp("^"+TG+"|"+CG+"$");function MG(i){const p=SG.exec(`${i}`);return p===null?["",""]:p[1]?[p[1],p[2]]:[p[4],p[3]]}var Hl={};function Xi(i){return typeof i=="string"?Hl[i]||(Hl[i]=EG(i)):kh(i)?Xi(AG(i)):Kh(i)?Xi(i.name):Do}var Kl=[0,2,4,5,7,9,11],aC="PMMPPMM";function EG(i){const p=MG(i);if(p[0]==="")return Do;const x=+p[0],M=p[1],R=(Math.abs(x)-1)%7,w=aC[R];if(w==="M"&&M==="P")return Do;const v=w==="M"?"majorable":"perfectable",T=""+x+M,t=x<0?-1:1,h=x===8||x===-8?x:t*(R+1),g=PG(v,M),o=Math.floor((Math.abs(x)-1)/7),a=t*(Kl[R]+g+12*o),r=(t*(Kl[R]+g)%12+12)%12,e=nC({step:R,alt:g,oct:o,dir:t});return{empty:!1,name:T,num:x,q:M,step:R,alt:g,dir:t,type:v,simple:h,semitones:a,chroma:r,coord:e,oct:o}}function oC(i,p){const[x,M=0]=i,R=x*7+M*12<0,w=p||R?[-x,-M,-1]:[x,M,1];return Xi(rC(w))}function PG(i,p){return p==="M"&&i==="majorable"||p==="P"&&i==="perfectable"?0:p==="m"&&i==="majorable"?-1:/^A+$/.test(p)?p.length:/^d+$/.test(p)?-1*(i==="perfectable"?p.length:p.length+1):0}function AG(i){const{step:p,alt:x,oct:M=0,dir:R}=i;if(!R)return"";const w=p+1+7*M,v=w===0?p+1:w,T=R<0?"-":"",t=aC[p]==="M"?"majorable":"perfectable";return T+v+RG(t,x)}function RG(i,p){return p===0?i==="majorable"?"M":"P":p===-1&&i==="majorable"?"m":p>0?Ul("A",p):Ul("d",i==="perfectable"?p:p+1)}var kl=(i,p)=>Array(Math.abs(p)+1).join(i),hC=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Jl=new Map,FG=i=>"CDEFGAB".charAt(i),ra=i=>i<0?kl("b",-i):kl("#",i),Jh=i=>i[0]==="b"?-i.length:i.length;function ge(i){const p=JSON.stringify(i),x=Jl.get(p);if(x)return x;const M=typeof i=="string"?GG(i):kh(i)?ge(bG(i)):Kh(i)?ge(i.name):hC;return Jl.set(p,M),M}var LG=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function jh(i){const p=LG.exec(i);return p?[p[1].toUpperCase(),p[2].replace(/x/g,"##"),p[3],p[4]]:["","","",""]}function DG(i){return ge(rC(i))}var wG=(i,p)=>(i%p+p)%p,ja=[0,2,4,5,7,9,11];function GG(i){const p=jh(i);if(p[0]===""||p[3]!=="")return hC;const x=p[0],M=p[1],R=p[2],w=(x.charCodeAt(0)+3)%7,v=Jh(M),T=R.length?+R:void 0,t=nC({step:w,alt:v,oct:T}),h=x+M+R,g=x+M,o=(ja[w]+v+120)%12,a=T===void 0?wG(ja[w]+v,12)-1188:ja[w]+v+12*(T+1),r=a>=0&&a<=127?a:null,e=T===void 0?null:Math.pow(2,(a-69)/12)*440;return{empty:!1,acc:M,alt:v,chroma:o,coord:t,freq:e,height:a,letter:x,midi:r,name:h,oct:T,pc:g,step:w}}function bG(i){const{step:p,alt:x,oct:M}=i,R=FG(p);if(!R)return"";const w=R+ra(x);return M||M===0?w+M:w}function Li(i,p){const x=ge(i),M=Array.isArray(p)?p:Xi(p).coord;if(x.empty||!M||M.length<2)return"";const R=x.coord,w=R.length===1?[R[0]+M[0]]:[R[0]+M[0],R[1]+M[1]];return DG(w).name}function uC(i,p){const x=i.length;return M=>{if(!p)return"";const R=M<0?(x- -M%x)%x:M%x,w=Math.floor(M/x),v=Li(p,[0,w]);return Li(v,i[R])}}function aa(i,p){const x=ge(i),M=ge(p);if(x.empty||M.empty)return"";const R=x.coord,w=M.coord,v=w[0]-R[0],T=R.length===2&&w.length===2?w[1]-R[1]:-Math.floor(v*7/12),t=M.height===x.height&&M.midi!==null&&x.oct===M.oct&&x.step>M.step;return oC([v,T],t).name}var jl=(i,p)=>Array(p+1).join(i),IG=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function lC(i){const p=IG.exec(i);return p?[p[1],p[2],p[3]]:["","",""]}function Nr(i){const[p,x,M]=lC(i);if(x==="")return"";let R=4;for(let v=0;v<M.length;v++)R+=M.charAt(v)===","?-1:1;const w=p[0]==="_"?p.replace(/_/g,"b"):p[0]==="^"?p.replace(/\^/g,"#"):"";return x.charCodeAt(0)>96?x.toUpperCase()+w+(R+1):x+w+R}function fC(i){const p=ge(i);if(p.empty||!p.oct&&p.oct!==0)return"";const{letter:x,acc:M,oct:R}=p,w=M[0]==="b"?M.replace(/b/g,"_"):M.replace(/#/g,"^"),v=R>4?x.toLowerCase():x,T=R===5?"":R>4?jl("'",R-5):jl(",",4-R);return w+v+T}function OG(i,p){return fC(Li(Nr(i),p))}function BG(i,p){return aa(Nr(i),Nr(p))}var XG={abcToScientificNotation:Nr,scientificToAbcNotation:fC,tokenize:lC,transpose:OG,distance:BG};function NG(i,p){const x=[];for(;p--;x[p]=p+i);return x}function VG(i,p){const x=[];for(;p--;x[p]=i-p);return x}function zG(i,p){return i<p?NG(i,p-i+1):VG(i,i-p+1)}function WG(i,p){const x=p.length,M=(i%x+x)%x;return p.slice(M,x).concat(p.slice(0,M))}function ZG(i){return i.filter(p=>p===0||p)}function dC(i){return i.map(p=>ge(p)).filter(p=>!p.empty).sort((p,x)=>p.height-x.height).map(p=>p.name)}function YG(i){return dC(i).filter((p,x,M)=>x===0||p!==M[x-1])}function UG(i,p=Math.random){let x,M,R=i.length;for(;R;)x=Math.floor(p()*R--),M=i[R],i[R]=i[x],i[x]=M;return i}function cC(i){return i.length===0?[[]]:cC(i.slice(1)).reduce((p,x)=>p.concat(i.map((M,R)=>{const w=x.slice();return w.splice(R,0,i[0]),w})),[])}const HG=Object.freeze(Object.defineProperty({__proto__:null,compact:ZG,permutations:cC,range:zG,rotate:WG,shuffle:UG,sortedNoteNames:dC,sortedUniqNoteNames:YG},Symbol.toStringTag,{value:"Module"}));function KG(i,p){const x=[];for(;p--;x[p]=p+i);return x}function kG(i,p){const x=[];for(;p--;x[p]=i-p);return x}function oa(i,p){return i<p?KG(i,p-i+1):kG(i,i-p+1)}function fn(i,p){const x=p.length,M=(i%x+x)%x;return p.slice(M,x).concat(p.slice(0,M))}function Qh(i){return i.filter(p=>p===0||p)}function JG(i,p=Math.random){let x,M,R=i.length;for(;R;)x=Math.floor(p()*R--),M=i[R],i[R]=i[x],i[x]=M;return i}function pC(i){return i.length===0?[[]]:pC(i.slice(1)).reduce((p,x)=>p.concat(i.map((M,R)=>{const w=x.slice();return w.splice(R,0,i[0]),w})),[])}var jG={compact:Qh,permutations:pC,range:oa,rotate:fn,shuffle:JG},fs={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},$h=i=>Number(i).toString(2).padStart(12,"0"),Ql=i=>parseInt(i,2),QG=/^[01]{12}$/;function qh(i){return QG.test(i)}var $G=i=>typeof i=="number"&&i>=0&&i<=4095,qG=i=>i&&qh(i.chroma),$l={[fs.chroma]:fs};function Ze(i){const p=qh(i)?i:$G(i)?$h(i):Array.isArray(i)?lb(i):qG(i)?i.chroma:fs.chroma;return $l[p]=$l[p]||ub(p)}var _G=Ze,vC=i=>Ze(i).chroma,tb=i=>Ze(i).intervals,eb=i=>Ze(i).setNum,ib=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function sb(i){const p=[];for(let x=0;x<12;x++)i.charAt(x)==="1"&&p.push(ib[x]);return p}function nb(i){return Ze(i).intervals.map(p=>Li("C",p))}function rb(){return oa(2048,4095).map($h)}function _h(i,p=!0){const x=Ze(i).chroma.split("");return Qh(x.map((M,R)=>{const w=fn(R,x);return p&&w[0]==="0"?null:w.join("")}))}function ab(i,p){return Ze(i).setNum===Ze(p).setNum}function ha(i){const p=Ze(i).setNum;return x=>{const M=Ze(x).setNum;return p&&p!==M&&(M&p)===M}}function ua(i){const p=Ze(i).setNum;return x=>{const M=Ze(x).setNum;return p&&p!==M&&(M|p)===M}}function mC(i){const p=Ze(i);return x=>{const M=ge(x);return p&&!M.empty&&p.chroma.charAt(M.chroma)==="1"}}function ob(i){const p=mC(i);return x=>x.filter(p)}var gC={get:Ze,chroma:vC,num:eb,intervals:tb,chromas:rb,isSupersetOf:ua,isSubsetOf:ha,isNoteIncludedIn:mC,isEqual:ab,filter:ob,modes:_h,notes:nb,pcset:_G};function hb(i){const p=i.split("");return p.map((x,M)=>fn(M,p).join(""))}function ub(i){const p=Ql(i),x=hb(i).map(Ql).filter(w=>w>=2048).sort()[0],M=$h(x),R=sb(i);return{empty:!1,name:"",setNum:p,chroma:i,normalized:M,intervals:R}}function lb(i){if(i.length===0)return fs.chroma;let p;const x=[0,0,0,0,0,0,0,0,0,0,0,0];for(let M=0;M<i.length;M++)p=ge(i[M]),p.empty&&(p=Xi(i[M])),p.empty||(x[p.chroma]=1);return x.join("")}var fb=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],db=fb;({...fs});var tu=[],Er={};function xC(){return tu.slice()}function cb(i,p,x){const M=vb(i),R={...Ze(i),name:x||"",quality:M,intervals:i,aliases:p};tu.push(R),R.name&&(Er[R.name]=R),Er[R.setNum]=R,Er[R.chroma]=R,R.aliases.forEach(w=>pb(R,w))}function pb(i,p){Er[p]=i}function vb(i){const p=x=>i.indexOf(x)!==-1;return p("5A")?"Augmented":p("3M")?"Major":p("5d")?"Diminished":p("3m")?"Minor":"Unknown"}db.forEach(([i,p,x])=>cb(i.split(" "),x.split(" "),p));tu.sort((i,p)=>i.setNum-p.setNum);var mb=i=>{const p=i.reduce((x,M)=>{const R=ge(M).chroma;return R!==void 0&&(x[R]=x[R]||ge(M).name),x},{});return x=>p[x]};function gb(i,p={}){const x=i.map(M=>ge(M).pc).filter(M=>M);return ge.length===0?[]:Eb(x,1,p).filter(M=>M.weight).sort((M,R)=>R.weight-M.weight).map(M=>M.name)}var la={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},fa=i=>p=>!!(p&i),xb=fa(la.anyThirds),yb=fa(la.perfectFifth),Tb=fa(la.anySeventh),Cb=fa(la.nonPerfectFifths);function Sb(i){const p=parseInt(i.chroma,2);return xb(p)&&yb(p)&&Tb(p)}function Mb(i){const p=parseInt(i,2);return Cb(p)?i:(p|16).toString(2)}function Eb(i,p,x){const M=i[0],R=ge(M).chroma,w=mb(i),v=_h(i,!1),T=[];return v.forEach((t,h)=>{const g=x.assumePerfectFifth&&Mb(t);xC().filter(o=>x.assumePerfectFifth&&Sb(o)?o.chroma===g:o.chroma===t).forEach(o=>{const a=o.aliases[0],r=w(h);h!==R?T.push({weight:.5*p,name:`${r}${a}/${M}`}):T.push({weight:1*p,name:`${r}${a}`})})}),T}function er(i){return i!==null&&typeof i=="object"&&"name"in i&&typeof i.name=="string"}var yC=[0,2,4,5,7,9,11],TC=({step:i,alt:p})=>(yC[i]+p+120)%12,eu=({step:i,alt:p,oct:x,dir:M=1})=>M*(yC[i]+p+12*(x===void 0?-100:x)),CC=i=>{const p=eu(i);return i.oct!==void 0&&p>=-12&&p<=115?p+12:null};function da(i){return i!==null&&typeof i=="object"&&"step"in i&&typeof i.step=="number"&&"alt"in i&&typeof i.alt=="number"}var SC=[0,2,4,-1,1,3,5],MC=SC.map(i=>Math.floor(i*7/12));function ca(i){const{step:p,alt:x,oct:M,dir:R=1}=i,w=SC[p]+7*x;if(M===void 0)return[R*w];const v=M-MC[p]-4*x;return[R*w,R*v]}var Pb=[3,0,4,1,5,2,6];function pa(i){const[p,x,M]=i,R=Pb[Ab(p)],w=Math.floor((p+1)/7);if(x===void 0)return{step:R,alt:w,dir:M};const v=x+4*w+MC[R];return{step:R,alt:w,oct:v,dir:M}}function Ab(i){const p=(i+1)%7;return p<0?7+p:p}var ql=(i,p)=>Array(Math.abs(p)+1).join(i),wo={empty:!0,name:"",acc:""},Rb="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",Fb="(AA|A|P|M|m|d|dd)([-+]?\\d+)",Lb=new RegExp("^"+Rb+"|"+Fb+"$");function iu(i){const p=Lb.exec(`${i}`);return p===null?["",""]:p[1]?[p[1],p[2]]:[p[4],p[3]]}var _l={};function He(i){return typeof i=="string"?_l[i]||(_l[i]=Db(i)):da(i)?He(Gb(i)):er(i)?He(i.name):wo}var tf=[0,2,4,5,7,9,11],EC="PMMPPMM";function Db(i){const p=iu(i);if(p[0]==="")return wo;const x=+p[0],M=p[1],R=(Math.abs(x)-1)%7,w=EC[R];if(w==="M"&&M==="P")return wo;const v=w==="M"?"majorable":"perfectable",T=""+x+M,t=x<0?-1:1,h=x===8||x===-8?x:t*(R+1),g=wb(v,M),o=Math.floor((Math.abs(x)-1)/7),a=t*(tf[R]+g+12*o),r=(t*(tf[R]+g)%12+12)%12,e=ca({step:R,alt:g,oct:o,dir:t});return{empty:!1,name:T,num:x,q:M,step:R,alt:g,dir:t,type:v,simple:h,semitones:a,chroma:r,coord:e,oct:o}}function ir(i,p){const[x,M=0]=i,R=x*7+M*12<0,w=p||R?[-x,-M,-1]:[x,M,1];return He(pa(w))}function wb(i,p){return p==="M"&&i==="majorable"||p==="P"&&i==="perfectable"?0:p==="m"&&i==="majorable"?-1:/^A+$/.test(p)?p.length:/^d+$/.test(p)?-1*(i==="perfectable"?p.length:p.length+1):0}function Gb(i){const{step:p,alt:x,oct:M=0,dir:R}=i;if(!R)return"";const w=p+1+7*M,v=w===0?p+1:w,T=R<0?"-":"",t=EC[p]==="M"?"majorable":"perfectable";return T+v+bb(t,x)}function bb(i,p){return p===0?i==="majorable"?"M":"P":p===-1&&i==="majorable"?"m":p>0?ql("A",p):ql("d",i==="perfectable"?p:p+1)}var ef=(i,p)=>Array(Math.abs(p)+1).join(i),PC={empty:!0,name:"",pc:"",acc:""},sf=new Map,su=i=>"CDEFGAB".charAt(i),nu=i=>i<0?ef("b",-i):ef("#",i),ru=i=>i[0]==="b"?-i.length:i.length;function Ni(i){const p=JSON.stringify(i),x=sf.get(p);if(x)return x;const M=typeof i=="string"?Bb(i):da(i)?Ni(Xb(i)):er(i)?Ni(i.name):PC;return sf.set(p,M),M}var Ib=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function va(i){const p=Ib.exec(i);return p?[p[1].toUpperCase(),p[2].replace(/x/g,"##"),p[3],p[4]]:["","","",""]}function au(i){return Ni(pa(i))}var Ob=(i,p)=>(i%p+p)%p,Qa=[0,2,4,5,7,9,11];function Bb(i){const p=va(i);if(p[0]===""||p[3]!=="")return PC;const x=p[0],M=p[1],R=p[2],w=(x.charCodeAt(0)+3)%7,v=ru(M),T=R.length?+R:void 0,t=ca({step:w,alt:v,oct:T}),h=x+M+R,g=x+M,o=(Qa[w]+v+120)%12,a=T===void 0?Ob(Qa[w]+v,12)-1188:Qa[w]+v+12*(T+1),r=a>=0&&a<=127?a:null,e=T===void 0?null:Math.pow(2,(a-69)/12)*440;return{empty:!1,acc:M,alt:v,chroma:o,coord:t,freq:e,height:a,letter:x,midi:r,name:h,oct:T,pc:g,step:w}}function Xb(i){const{step:p,alt:x,oct:M}=i,R=su(p);if(!R)return"";const w=R+nu(x);return M||M===0?w+M:w}function en(i,p){const x=Ni(i),M=Array.isArray(p)?p:He(p).coord;if(x.empty||!M||M.length<2)return"";const R=x.coord,w=R.length===1?[R[0]+M[0]]:[R[0]+M[0],R[1]+M[1]];return au(w).name}function ma(i,p){const x=i.length;return M=>{if(!p)return"";const R=M<0?(x- -M%x)%x:M%x,w=Math.floor(M/x),v=en(p,[0,w]);return en(v,i[R])}}function ou(i,p){const x=Ni(i),M=Ni(p);if(x.empty||M.empty)return"";const R=x.coord,w=M.coord,v=w[0]-R[0],T=R.length===2&&w.length===2?w[1]-R[1]:-Math.floor(v*7/12),t=M.height===x.height&&M.midi!==null&&x.midi!==null&&x.step>M.step;return ir([v,T],t).name}var AC=(i,p)=>Array(Math.abs(p)+1).join(i);function dn(i,p,x){return function(...M){return console.warn(`${i} is deprecated. Use ${p}.`),x.apply(this,M)}}var RC=dn("isNamed","isNamedPitch",er);const FC=Object.freeze(Object.defineProperty({__proto__:null,accToAlt:ru,altToAcc:nu,chroma:TC,coordToInterval:ir,coordToNote:au,coordinates:ca,deprecate:dn,distance:ou,fillStr:AC,height:eu,interval:He,isNamed:RC,isNamedPitch:er,isPitch:da,midi:CC,note:Ni,pitch:pa,stepToLetter:su,tokenizeInterval:iu,tokenizeNote:va,tonicIntervalsTransposer:ma,transpose:en},Symbol.toStringTag,{value:"Module"}));var Nb=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],Vb=Nb,zb={...fs,name:"",quality:"Unknown",intervals:[],aliases:[]},cn=[],Ms={};function hu(i){return Ms[i]||zb}var Wb=dn("ChordType.chordType","ChordType.get",hu);function Zb(){return cn.map(i=>i.name).filter(i=>i)}function Yb(){return cn.map(i=>i.aliases[0]).filter(i=>i)}function Ub(){return Object.keys(Ms)}function ga(){return cn.slice()}var Hb=dn("ChordType.entries","ChordType.all",ga);function Kb(){cn=[],Ms={}}function LC(i,p,x){const M=Jb(i),R={...Ze(i),name:x||"",quality:M,intervals:i,aliases:p};cn.push(R),R.name&&(Ms[R.name]=R),Ms[R.setNum]=R,Ms[R.chroma]=R,R.aliases.forEach(w=>kb(R,w))}function kb(i,p){Ms[p]=i}function Jb(i){const p=x=>i.indexOf(x)!==-1;return p("5A")?"Augmented":p("3M")?"Major":p("5d")?"Diminished":p("3m")?"Minor":"Unknown"}Vb.forEach(([i,p,x])=>LC(i.split(" "),x.split(" "),p));cn.sort((i,p)=>i.setNum-p.setNum);var DC={names:Zb,symbols:Yb,get:hu,all:ga,add:LC,removeAll:Kb,keys:Ub,entries:Hb,chordType:Wb},jb=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Qb=jb,$b={...fs,intervals:[],aliases:[]},xa=[],Es={};function wC(){return xa.map(i=>i.name)}function ya(i){return Es[i]||$b}var qb=ya;function pn(){return xa.slice()}var _b=pn;function t8(){return Object.keys(Es)}function e8(){xa=[],Es={}}function GC(i,p,x=[]){const M={...Ze(i),name:p,intervals:i,aliases:x};return xa.push(M),Es[M.name]=M,Es[M.setNum]=M,Es[M.chroma]=M,M.aliases.forEach(R=>i8(M,R)),M}function i8(i,p){Es[p]=i}Qb.forEach(([i,p,...x])=>GC(i.split(" "),p,x));var bC={names:wC,get:ya,all:pn,add:GC,removeAll:e8,keys:t8,entries:_b,scaleType:qb},Go={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function uu(i){const[p,x,M,R]=va(i);return p===""?["",i]:p==="A"&&R==="ug"?["","aug"]:[p+x,M+R]}function Gs(i){if(i==="")return Go;if(Array.isArray(i)&&i.length===2)return Pr(i[1],i[0]);{const[p,x]=uu(i),M=Pr(x,p);return M.empty?Pr(i):M}}function Pr(i,p,x){const M=hu(i),R=Ni(p||""),w=Ni(x||"");if(M.empty||p&&R.empty||x&&w.empty)return Go;const v=ou(R.pc,w.pc),T=M.intervals.indexOf(v)+1;if(!w.empty&&!T)return Go;const t=Array.from(M.intervals);for(let a=1;a<T;a++){const r=t[0][0],e=t[0][1],s=parseInt(r,10)+7;t.push(`${s}${e}`),t.shift()}const h=R.empty?[]:t.map(a=>en(R,a));i=M.aliases.indexOf(i)!==-1?i:M.aliases[0];const g=`${R.empty?"":R.pc}${i}${w.empty||T<=1?"":"/"+w.pc}`,o=`${p?R.pc+" ":""}${M.name}${T>1&&x?" over "+w.pc:""}`;return{...M,name:o,symbol:g,type:M.name,root:w.name,intervals:t,rootDegree:T,tonic:R.name,notes:h}}var s8=dn("Chord.chord","Chord.get",Gs);function n8(i,p){const[x,M]=uu(i);return x?en(x,p)+M:i}function r8(i){const p=Gs(i),x=ua(p.chroma);return pn().filter(M=>x(M.chroma)).map(M=>M.name)}function a8(i){const p=Gs(i),x=ua(p.chroma);return ga().filter(M=>x(M.chroma)).map(M=>p.tonic+M.aliases[0])}function o8(i){const p=Gs(i),x=ha(p.chroma);return ga().filter(M=>x(M.chroma)).map(M=>p.tonic+M.aliases[0])}function h8(i){const{intervals:p,tonic:x}=Gs(i),M=ma(p,x);return R=>R?M(R>0?R-1:R):""}function u8(i){const{intervals:p,tonic:x}=Gs(i);return ma(p,x)}var l8={getChord:Pr,get:Gs,detect:gb,chordScales:r8,extended:a8,reduced:o8,tokenize:uu,transpose:n8,degrees:h8,steps:u8,chord:s8},f8=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],d8=f8,Ta=[];d8.forEach(([i,p,x])=>T8(i,p,x));var c8={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function p8(){return Ta.reduce((i,p)=>(p.names.forEach(x=>i.push(x)),i),[])}function v8(){return Ta.map(i=>i.shorthand)}var m8=/^([^.]+)(\.*)$/;function lu(i){const[p,x,M]=m8.exec(i)||[],R=Ta.find(T=>T.shorthand===x||T.names.includes(x));if(!R)return c8;const w=C8(R.fraction,M.length),v=w[0]/w[1];return{...R,name:i,dots:M,value:v,fraction:w}}var g8=i=>lu(i).value,x8=i=>lu(i).fraction,y8={names:p8,shorthands:v8,get:lu,value:g8,fraction:x8};function T8(i,p,x){Ta.push({empty:!1,dots:"",name:"",value:1/i,fraction:i<1?[1/i,1]:[1,i],shorthand:p,names:x})}function C8(i,p){const x=Math.pow(2,p);let M=i[0]*x,R=i[1]*x;const w=M;for(let v=0;v<p;v++)M+=w/Math.pow(2,v+1);for(;M%2===0&&R%2===0;)M/=2,R/=2;return[M,R]}function S8(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var IC=He,M8=i=>He(i).name,E8=i=>He(i).semitones,P8=i=>He(i).q,A8=i=>He(i).num;function R8(i){const p=He(i);return p.empty?"":p.simple+p.q}function F8(i){const p=He(i);if(p.empty)return"";const x=(7-p.step)%7,M=p.type==="perfectable"?-p.alt:-(p.alt+1);return He({step:x,alt:M,oct:p.oct,dir:p.dir}).name}var L8=[1,2,2,3,3,4,5,5,6,6,7,7],D8="P m M m M P d P m M m M".split(" ");function w8(i){const p=i<0?-1:1,x=Math.abs(i),M=x%12,R=Math.floor(x/12);return p*(L8[M]+7*R)+D8[M]}var G8=aa,OC=BC((i,p)=>[i[0]+p[0],i[1]+p[1]]),b8=i=>p=>OC(i,p),I8=BC((i,p)=>[i[0]-p[0],i[1]-p[1]]);function O8(i,p){const x=IC(i);if(x.empty)return"";const[M,R,w]=x.coord;return ir([M+p,R,w]).name}var Rs={names:S8,get:IC,name:M8,num:A8,semitones:E8,quality:P8,fromSemitones:w8,distance:G8,invert:F8,simplify:R8,add:OC,addTo:b8,substract:I8,transposeFifths:O8};function BC(i){return(p,x)=>{const M=He(p).coord,R=He(x).coord;if(M&&R){const w=i(M,R);return ir(w).name}}}function XC(i){return+i>=0&&+i<=127}function NC(i){if(XC(i))return+i;const p=ge(i);return p.empty?null:p.midi}function B8(i,p=440){return Math.pow(2,(i-69)/12)*p}var X8=Math.log(2),N8=Math.log(440);function fu(i){const p=12*(Math.log(i)-N8)/X8+69;return Math.round(p*100)/100}var V8="C C# D D# E F F# G G# A A# B".split(" "),z8="C Db D Eb E F Gb G Ab A Bb B".split(" ");function gs(i,p={}){if(isNaN(i)||i===-1/0||i===1/0)return"";i=Math.round(i);const x=(p.sharps===!0?V8:z8)[i%12];if(p.pitchClass)return x;const M=Math.floor(i/12)-1;return x+M}function du(i){return i%12}function W8(i){return i.split("").reduce((p,x,M)=>(M<12&&x==="1"&&p.push(M),p),[])}function Z8(i){return i.map(du).sort((p,x)=>p-x).filter((p,x,M)=>x===0||p!==M[x-1])}function cu(i){return Array.isArray(i)?Z8(i):W8(i)}function Y8(i){const p=cu(i);return x=>{const M=du(x);for(let R=0;R<12;R++){if(p.includes(M+R))return x+R;if(p.includes(M-R))return x-R}}}function VC(i,p){const x=cu(i),M=x.length;return R=>{const w=R<0?(M- -R%M)%M:R%M,v=Math.floor(R/M);return x[w]+v*12+p}}function U8(i,p){const x=VC(i,p);return M=>{if(M!==0)return x(M>0?M-1:M)}}var H8={chroma:du,freqToMidi:fu,isMidi:XC,midiToFreq:B8,midiToNoteName:gs,pcsetNearest:Y8,pcset:cu,pcsetDegrees:U8,pcsetSteps:VC,toMidi:NC},K8=["C","D","E","F","G","A","B"],zC=i=>i.name,WC=i=>i.map(ge).filter(p=>!p.empty);function k8(i){return i===void 0?K8.slice():Array.isArray(i)?WC(i).map(zC):[]}var Di=ge,J8=i=>Di(i).name,j8=i=>Di(i).pc,Q8=i=>Di(i).acc,$8=i=>Di(i).oct,q8=i=>Di(i).midi,_8=i=>Di(i).freq,t6=i=>Di(i).chroma;function ZC(i){return gs(i)}function e6(i){return gs(fu(i))}function i6(i){return gs(fu(i),{sharps:!0})}function s6(i){return gs(i,{sharps:!0})}var n6=aa,Ai=Li,r6=Li,YC=i=>p=>Ai(p,i),a6=YC,UC=i=>p=>Ai(i,p),o6=UC;function Vr(i,p){return Ai(i,[p,0])}var h6=Vr;function u6(i,p){return Ai(i,[0,p])}var pu=(i,p)=>i.height-p.height,l6=(i,p)=>p.height-i.height;function HC(i,p){return p=p||pu,WC(i).sort(p).map(zC)}function KC(i){return HC(i,pu).filter((p,x,M)=>x===0||p!==M[x-1])}var f6=i=>{const p=Di(i);return p.empty?"":gs(p.midi||p.chroma,{sharps:p.alt>0,pitchClass:p.midi===null})};function kC(i,p){const x=Di(i);if(x.empty)return"";const M=Di(p||gs(x.midi||x.chroma,{sharps:x.alt<0,pitchClass:!0}));if(M.empty||M.chroma!==x.chroma)return"";if(x.oct===void 0)return M.pc;const R=x.chroma-x.alt,w=M.chroma-M.alt,v=R>11||w<0?-1:R<0||w>11?1:0,T=x.oct+v;return M.pc+T}var bi={names:k8,get:Di,name:J8,pitchClass:j8,accidentals:Q8,octave:$8,midi:q8,ascending:pu,descending:l6,distance:n6,sortedNames:HC,sortedUniqNames:KC,fromMidi:ZC,fromMidiSharps:s6,freq:_8,fromFreq:e6,fromFreqSharps:i6,chroma:t6,transpose:Ai,tr:r6,transposeBy:YC,trBy:a6,transposeFrom:UC,trFrom:o6,transposeFifths:Vr,transposeOctaves:u6,trFifths:h6,simplify:f6,enharmonic:kC},JC={empty:!0,name:"",chordType:""},nf={};function ds(i){return typeof i=="string"?nf[i]||(nf[i]=x6(i)):typeof i=="number"?ds(Ca[i]||""):kh(i)?p6(i):Kh(i)?ds(i.name):JC}var d6=ds;function c6(i=!0){return(i?Ca:g6).slice()}function p6(i){return ds(ra(i.alt)+Ca[i.step])}var v6=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function m6(i){return v6.exec(i)||["","","",""]}var jC="I II III IV V VI VII",Ca=jC.split(" "),g6=jC.toLowerCase().split(" ");function x6(i){const[p,x,M,R]=m6(i);if(!M)return JC;const w=M.toUpperCase(),v=Ca.indexOf(w),T=Jh(x),t=1;return{empty:!1,name:p,roman:M,interval:Xi({step:v,alt:T,dir:t}).name,acc:x,chordType:R,alt:T,step:v,major:M===w,oct:0,dir:t}}var y6={names:c6,get:ds,romanNumeral:d6},We=Object.freeze([]),QC={type:"major",tonic:"",alteration:0,keySignature:""},Ar={tonic:"",grades:We,intervals:We,scale:We,triads:We,chords:We,chordsHarmonicFunction:We,chordScales:We,secondaryDominants:We,secondaryDominantSupertonics:We,substituteDominantsMinorRelative:We,substituteDominants:We,substituteDominantSupertonics:We,secondaryDominantsMinorRelative:We},T6={...QC,...Ar,type:"major",minorRelative:"",scale:We,substituteDominants:We,secondaryDominantSupertonics:We,substituteDominantsMinorRelative:We},C6={...QC,type:"minor",relativeMajor:"",natural:Ar,harmonic:Ar,melodic:Ar},$a=(i,p,x="")=>p.map((M,R)=>`${i[R]}${x}${M}`);function Sa(i,p,x,M,R){return w=>{const v=i.map(r=>ds(r).interval||""),T=v.map(r=>Ai(w,r)),t=$a(T,x),h=T.map(r=>Ai(r,"5P")).map(r=>T.includes(r)&&!t.includes(r+"7")?r+"7":""),g=rf(h,p),o=h.map(r=>{if(!r)return"";const e=r.slice(0,-1);return Ai(e,"5d")+"7"}),a=rf(o,p);return{tonic:w,grades:i,intervals:v,scale:T,triads:$a(T,p),chords:t,chordsHarmonicFunction:M.slice(),chordScales:$a(T,R," "),secondaryDominants:h,secondaryDominantSupertonics:g,substituteDominants:o,substituteDominantSupertonics:a,secondaryDominantsMinorRelative:g,substituteDominantsMinorRelative:a}}}var rf=(i,p)=>i.map((x,M)=>{if(!x)return"";const R=x.slice(0,-1),w=Ai(R,"5P");return p[M].endsWith("m")?w+"m7":w+"m7b5"}),$C=(i,p)=>{const x=ge(i),M=ge(p);return x.empty||M.empty?0:M.coord[0]-x.coord[0]},S6=Sa("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),M6=Sa("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),E6=Sa("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),P6=Sa("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function A6(i){const p=ge(i).pc;if(!p)return T6;const x=S6(p),M=$C("C",p);return{...x,type:"major",minorRelative:Ai(p,"-3m"),alteration:M,keySignature:ra(M)}}function R6(i){const p=ge(i).pc;if(!p)return C6;const x=$C("C",p)-3;return{type:"minor",tonic:p,relativeMajor:Ai(p,"3m"),alteration:x,keySignature:ra(x),natural:M6(p),harmonic:E6(p),melodic:P6(p)}}function F6(i){return typeof i=="number"?Vr("C",i):typeof i=="string"&&/^b+|#+$/.test(i)?Vr("C",Jh(i)):null}var L6={majorKey:A6,majorTonicFromKeySignature:F6,minorKey:R6},D6=Xi;function w6(i){const p=Xi(i);return p.empty?"":p.simple+p.q}function G6(i,p){const x=D6(i);if(x.empty)return"";const[M,R,w]=x.coord;return oC([M+p,R,w]).name}var vu=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],af={...fs,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},mu=vu.map(B6),bo={};mu.forEach(i=>{bo[i.name]=i,i.aliases.forEach(p=>{bo[p]=i})});function Fs(i){return typeof i=="string"?bo[i.toLowerCase()]||af:i&&i.name?Fs(i.name):af}var b6=Fs;function qC(){return mu.slice()}var I6=qC;function O6(){return mu.map(i=>i.name)}function B6(i){const[p,x,M,R,w,v,T]=i,t=T?[T]:[],h=Number(x).toString(2);return{empty:!1,intervals:ya(R).intervals,modeNum:p,chroma:h,normalized:h,name:R,setNum:x,alt:M,triad:w,seventh:v,aliases:t}}function X6(i,p){return Fs(i).intervals.map(x=>Li(p,x))}function _C(i){return(p,x)=>{const M=Fs(p);if(M.empty)return[];const R=fn(M.modeNum,i),w=M.intervals.map(v=>Li(x,v));return R.map((v,T)=>w[T]+v)}}var N6=_C(vu.map(i=>i[4])),V6=_C(vu.map(i=>i[5]));function tS(i,p){const x=Fs(p),M=Fs(i);return x.empty||M.empty?"":w6(G6("1P",M.alt-x.alt))}function z6(i,p,x){return Li(x,tS(i,p))}var W6={get:Fs,names:O6,all:qC,distance:tS,relativeTonic:z6,notes:X6,triads:N6,seventhChords:V6,entries:I6,mode:b6};function Z6(i){const[p,x,M,R]=jh(i);return p===""?qa("",i):p==="A"&&R==="ug"?qa("","aug"):qa(p+x,M+R)}function qa(i,p){const x=p.split("/");if(x.length===1)return[i,x[0],""];const[M,R,w,v]=jh(x[1]);return M!==""&&w===""&&v===""?[i,x[0],M+R]:[i,p,""]}function Y6(i,p){return p.map(ds).map(x=>Li(i,Xi(x))+x.chordType)}function U6(i,p){return p.map(x=>{const[M,R]=Z6(x),w=aa(i,M);return ds(Xi(w)).name+R})}var H6={fromRomanNumerals:Y6,toRomanNumerals:U6};function eS(i){const p=Qh(i.map(x=>typeof x=="number"?x:NC(x)));return!i.length||p.length!==i.length?[]:p.reduce((x,M)=>{const R=x[x.length-1];return x.concat(oa(R,M).slice(1))},[p[0]])}function K6(i,p){return eS(i).map(x=>gs(x,p))}var k6={numeric:eS,chromatic:K6},J6={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function iS(i){if(typeof i!="string")return["",""];const p=i.indexOf(" "),x=ge(i.substring(0,p));if(x.empty){const R=ge(i);return R.empty?["",i]:[R.name,""]}const M=i.substring(x.name.length+1).toLowerCase();return[x.name,M.length?M:""]}var j6=wC;function Vi(i){const p=Array.isArray(i)?i:iS(i),x=ge(p[0]).name,M=ya(p[1]);if(M.empty)return J6;const R=M.name,w=x?M.intervals.map(T=>Li(x,T)):[],v=x?x+" "+R:R;return{...M,name:v,type:R,tonic:x,notes:w}}var Q6=Vi;function $6(i,p={}){const x=vC(i),M=ge(p.tonic??i[0]??""),R=M.chroma;if(R===void 0)return[];const w=x.split("");w[R]="1";const v=fn(R,w).join(""),T=pn().find(h=>h.chroma===v),t=[];return T&&t.push(M.name+" "+T.name),p.match==="exact"||sS(v).forEach(h=>{t.push(M.name+" "+h)}),t}function q6(i){const p=Vi(i),x=ha(p.chroma);return xC().filter(M=>x(M.chroma)).map(M=>M.aliases[0])}function sS(i){const p=qh(i)?i:Vi(i).chroma,x=ua(p);return pn().filter(M=>x(M.chroma)).map(M=>M.name)}function _6(i){const p=ha(Vi(i).chroma);return pn().filter(x=>p(x.chroma)).map(x=>x.name)}function nS(i){const p=i.map(R=>ge(R).pc).filter(R=>R),x=p[0],M=KC(p);return fn(M.indexOf(x),M)}function tI(i){const p=Vi(i);if(p.empty)return[];const x=p.tonic?p.notes:p.intervals;return _h(p.chroma).map((M,R)=>{const w=Vi(M).name;return w?[x[R],w]:["",""]}).filter(M=>M[0])}function eI(i){const p=Array.isArray(i)?nS(i):Vi(i).notes,x=p.map(M=>ge(M).chroma);return M=>{const R=ge(typeof M=="number"?ZC(M):M),w=R.height;if(w===void 0)return;const v=w%12,T=x.indexOf(v);if(T!==-1)return kC(R.name,p[T])}}function iI(i){const p=eI(i);return(x,M)=>{const R=ge(x).height,w=ge(M).height;return R===void 0||w===void 0?[]:oa(R,w).map(p).filter(v=>v)}}function sI(i){const{intervals:p,tonic:x}=Vi(i),M=uC(p,x);return R=>R?M(R>0?R-1:R):""}function nI(i){const{intervals:p,tonic:x}=Vi(i);return uC(p,x)}var zr={degrees:sI,detect:$6,extended:sS,get:Vi,modeNames:tI,names:j6,rangeOf:iI,reduced:_6,scaleChords:q6,scaleNotes:nS,steps:nI,tokenize:iS,scale:Q6},rI={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},aI=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function oI(){return aI.slice()}var hI=/^(\d*\d(?:\+\d)*)\/(\d+)$/,of=new Map;function uI(i){const p=JSON.stringify(i),x=of.get(p);if(x)return x;const M=dI(gu(i));return of.set(p,M),M}function gu(i){if(typeof i=="string"){const[w,v,T]=hI.exec(i)||[];return gu([v,T])}const[p,x]=i,M=+x;if(typeof p=="number")return[p,M];const R=p.split("+").map(w=>+w);return R.length===1?[R[0],M]:[R,M]}var lI={names:oI,parse:gu,get:uI},fI=i=>Math.log(i)/Math.log(2)%1===0;function dI([i,p]){const x=Array.isArray(i)?i.reduce((T,t)=>T+t,0):i,M=p;if(x===0||M===0)return rI;const R=Array.isArray(i)?`${i.join("+")}/${p}`:`${i}/${p}`,w=Array.isArray(i)?i:[],v=M===4||M===2?"simple":M===8&&x%3===0?"compound":fI(M)?"irregular":"irrational";return{empty:!1,name:R,type:v,upper:x,lower:M,additive:w}}var cI=FC,pI=gC,vI=DC,mI=bC;const gI=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:XG,Array:HG,Chord:l8,ChordDictionary:vI,ChordType:DC,Collection:jG,Core:FC,DurationValue:y8,Interval:Rs,Key:L6,Midi:H8,Mode:W6,Note:bi,PcSet:pI,Pcset:gC,Progression:H6,Range:k6,RomanNumeral:y6,Scale:zr,ScaleDictionary:mI,ScaleType:bC,TimeSignature:lI,Tonal:cI,accToAlt:ru,altToAcc:nu,chroma:TC,coordToInterval:ir,coordToNote:au,coordinates:ca,deprecate:dn,distance:ou,fillStr:AC,height:eu,interval:He,isNamed:RC,isNamedPitch:er,isPitch:da,midi:CC,note:Ni,pitch:pa,stepToLetter:su,tokenizeInterval:iu,tokenizeNote:va,tonicIntervalsTransposer:ma,transpose:en},Symbol.toStringTag,{value:"Module"})),xI=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],yI=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],TI=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],CI={b:-1,"#":1},SI=i=>{const[p,...x]=i.split("");return yI.indexOf(p.toLowerCase())+x.reduce((M,R)=>M+CI[R],0)};function MI(i){const p=(i||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return p?p.slice(1):[]}const Io=i=>i%12,rS=i=>{let p=Number(i);return isNaN(p)?Rs.semitones(i):p},Oo=(i,p)=>{if(typeof i=="number")return i;if(typeof i=="string")return Ii(i,p)},EI=(i,p=!1)=>{const x=Math.floor(i/12)-1;return(p?TI:xI)[i%12]+x};function PI(i,p,x=1){i=i.map(R=>typeof R=="string"?Ii(R):R);const M=Math.floor(p/i.length)*x*12;return p=pi(p,i.length),i[p]+M}function aS(i,p,x){let M=0,R=1/0;return p.forEach((w,v)=>{const T=Math.abs(w-i);(!x&&T<R||x&&T<=R)&&(M=v,R=T)}),M}let _a={};function AI(i,p,x,M){const[R,w]=zr.tokenize(p),v=Oo(R),T=Io(v);if(!_a[w]){const{intervals:o}=zr.get(`C ${w}`);_a[w]=o.map(rS)}const t=_a[w];if(!t)return null;let h=v;if(x){x=Oo(x,3);const o=Io(x),a=pi(o-T,12),r=aS(a,t,M);i=i+r,h=x-a}const g=Math.floor(i/t.length)*12;return i=pi(i,t.length),t[i]+h+g}let hf={below:i=>i.slice(-1)[0],duck:i=>i.slice(-1)[0],above:i=>i[0],root:i=>i[0]};function RI({chord:i,dictionary:p,offset:x=0,n:M,mode:R="below",anchor:w="c5",octaves:v=1}){const[T,t]=MI(i),h=SI(T);w=Oo(w?.note||w,4);const g=Io(w),o=p[t].map(m=>(typeof m=="string"?m.split(" "):m).map(rS));let a,r,e=o.map((m,y)=>{const S=hf[R](m),C=pi(g-S-h,12);return(a===void 0||C<a)&&(a=C,r=y),C});R==="root"&&(r=0);const s=Math.ceil(x/o.length)*12,u=pi(r+x,o.length),n=o[u],l=hf[R](n),c=w-e[u]+s,d=n.map(m=>c-l+m);let f=d.map(m=>EI(m));return R==="duck"&&(f=f.filter((m,y)=>d[y]!==w)),M!==void 0?[PI(f,M,v)]:f}const FI=i=>(i<=0?-1:1)+i*7+"P";function xu(i){i=i.replaceAll(":"," ");const p=zr.get(i),{tonic:x,empty:M}=p;if(M&&Ls(i)||M&&!x)throw new Error(`Scale name ${i} is incomplete. Make sure to use ":" instead of spaces, example: .scale("C:major")`);if(M)throw new Error(`Invalid scale name "${i}"`);return p}function LI(i,p){i=Math.ceil(i);let{intervals:x,tonic:M}=xu(p);M=M||"C";const{pc:R,oct:w=3}=bi.get(M),v=Math.floor(i/x.length),T=pi(i,x.length),t=Rs.add(x[T],FI(v));return bi.transpose(R+w,t)}function uf(i,p,x){let{notes:M}=xu(i);if(M=M.map(o=>bi.get(o).pc),p=Number(p),isNaN(p))throw new Error(`scale offset "${p}" not a number`);const{pc:R,oct:w=3}=bi.get(x),v=M.indexOf(R);if(v===-1)throw new Error(`note "${x}" is not in scale "${i}"`);let T=v,t=w,h=R;const g=Math.sign(p);for(;Math.abs(T-v)<Math.abs(p);){T+=g;const o=pi(T,M.length);g<0&&h[0]==="C"&&(t+=g),h=M[o],g>0&&h[0]==="C"&&(t+=g)}return h+t}const{transpose:DI,trans:wI}=ct(["transpose","trans"],function(i,p){return p.withHap(x=>{const M=x.value.note??x.value;if(typeof M=="number"){let v;typeof i=="number"?v=i:typeof i=="string"&&(v=Rs.semitones(i)||0);const T=M+v;return typeof x.value=="object"?x.withValue(()=>({...x.value,note:T})):x.withValue(()=>T)}if(typeof M!="string"||!Ls(M))return Ve(`[tonal] transpose: not a note "${M}"`,"warning"),x;const R=isNaN(Number(i))?String(i):Rs.fromSemitones(i),w=bi.transpose(M,R);return typeof x.value=="object"?x.withValue(()=>({...x.value,note:w})):x.withValue(()=>w)})}),{scaleTranspose:GI,scaleTrans:bI,strans:II}=ct(["scaleTranspose","scaleTrans","strans"],function(i,p){return p.withHap(x=>{if(!x.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof x.value=="object")return x.withValue(()=>({...x.value,note:uf(x.context.scale,Number(i),x.value.note)}));if(typeof x.value!="string")throw new Error("can only use scaleTranspose with notes");return x.withValue(()=>uf(x.context.scale,Number(i),x.value))})});function OI(i){let p=Number(i),x=0;if(isNaN(p)){i=String(i);const M=/^(-?\d+)([#bsf]*)$/.exec(i);if(!M)throw new Error(`invalid scale step "${i}", expected number or integer with optional # b suffixes`);p=Number(M[1]);const R=M[2]||"";x=Vo(R)}return[p,x]}let to={};function BI(i,p,x=!0){let M=typeof p=="string"?Ii(p):p;if(to[i]===void 0){const{intervals:o,tonic:a}=xu(i),{pc:r}=bi.get(a),e=o.concat("8P").map(u=>bi.transpose(r+"0",u)),s=e.map(Ii);to[i]=[s,e]}const[R,w]=to[i],v=R[0],T=Math.floor((M-v)/12),t=R.map(o=>o+12*T),h=aS(M,t,x),g=w[h];return bi.transpose(g,Rs.fromSemitones(12*T))}const XI=ct("scale",function(i,p){return Array.isArray(i)&&(i=i.flat().join(" ")),p.withHaps(x=>(x=x.map(M=>{let R=M.value;const w=typeof R=="object";R=w?R:{n:R};const{note:v,n:T,value:t,...h}=R,g=v??T??t;if(g===void 0)return Ve(`[tonal] Invalid value format for 'scale'. Value must contain n, note, or value but received keys [${Object.keys(R).join(", ")}]`,"error"),M;let o;if(Ls(g))o=BI(i,g),M.value={...h,note:o};else try{const[a,r]=OI(g);h.anchor?o=AI(a,i,h.anchor):o=LI(a,i),r!=0&&(o=bi.transpose(o,Rs.fromSemitones(r)))}catch(a){Kn(a,"tonal");return}return M.value=w?{...h,note:o}:o,M.setContext({...M.context,scale:i})}),Ds(x)))},!0,!0);var lf={},Cr={},Mn={},ff;function oS(){if(ff)return Mn;ff=1,Mn.__esModule=!0,Mn.getBestVoicing=void 0;function i(p){var x=p.chord,M=p.range,R=p.finder,w=p.picker,v=p.lastVoicing,T=R(x,M);return T.length?w(T,v):[]}return Mn.getBestVoicing=i,Mn}var En={};const hS=R7(gI);var Pn={},df;function uS(){if(df)return Pn;df=1,Pn.__esModule=!0,Pn.tokenizeChord=void 0;function i(p){var x=(p||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return x?x.slice(1):[]}return Pn.tokenizeChord=i,Pn}var cf;function NI(){if(cf)return En;cf=1,En.__esModule=!0,En.voicingsInRange=void 0;var i=hS,p=lS(),x=uS();function M(R,w,v){w===void 0&&(w=p.lefthand),v===void 0&&(v=["D3","A4"]);var T=(0,x.tokenizeChord)(R),t=T[0],h=T[1];if(!w[h])return[];var g=w[h].map(function(a){return a.split(" ")}),o=i.Range.chromatic(v);return g.reduce(function(a,r){var e=r.map(function(l){return i.Interval.substract(l,r[0])}),s=i.Note.transpose(t,r[0]),u=o.filter(function(l){return i.Note.chroma(l)===i.Note.chroma(s)}).filter(function(l){return i.Note.midi(i.Note.transpose(l,e[e.length-1]))<=i.Note.midi(v[1])}).map(function(l){return i.Note.enharmonic(l,s)}),n=u.map(function(l){return e.map(function(c){return i.Note.transpose(l,c)})});return a.concat(n)},[])}return En.voicingsInRange=M,En}var pf;function lS(){return pf||(pf=1,(function(i){var p=Cr.__assign||function(){return p=Object.assign||function(T){for(var t,h=1,g=arguments.length;h<g;h++){t=arguments[h];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(T[o]=t[o])}return T},p.apply(this,arguments)},x=Cr.__rest||function(T,t){var h={};for(var g in T)Object.prototype.hasOwnProperty.call(T,g)&&t.indexOf(g)<0&&(h[g]=T[g]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,g=Object.getOwnPropertySymbols(T);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(T,g[o])&&(h[g[o]]=T[g[o]]);return h};i.__esModule=!0,i.dictionaryVoicing=i.dictionaryVoicingFinder=i.triads=i.guidetones=i.lefthand=void 0;var M=oS(),R=NI();i.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},i.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},i.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var w=function(T){return function(t,h){return(0,R.voicingsInRange)(t,T,h)}};i.dictionaryVoicingFinder=w;var v=function(T){var t=T.dictionary,h=T.range,g=x(T,["dictionary","range"]);return(0,M.getBestVoicing)(p(p({},g),{range:h,finder:(0,i.dictionaryVoicingFinder)(t)}))};i.dictionaryVoicing=v})(Cr)),Cr}var An={},vf;function VI(){if(vf)return An;vf=1,An.__esModule=!0,An.minTopNoteDiff=void 0;var i=hS;function p(x,M){if(!M)return x[0];var R=function(w){return Math.abs(i.Note.midi(M[M.length-1])-i.Note.midi(w[w.length-1]))};return x.reduce(function(w,v){return R(v)<R(w)?v:w},x[0])}return An.minTopNoteDiff=p,An}var mf;function zI(){return mf||(mf=1,(function(i){i.__esModule=!0;var p=lS(),x=VI(),M=oS(),R=uS();i.default={tokenizeChord:R.tokenizeChord,getBestVoicing:M.getBestVoicing,dictionaryVoicing:p.dictionaryVoicing,dictionaryVoicingFinder:p.dictionaryVoicingFinder,lefthand:p.lefthand,guidetones:p.guidetones,triads:p.triads,minTopNoteDiff:x.minTopNoteDiff}})(lf)),lf}var WI=zI();const gf=JT(WI),Ts={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},Js={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing:ZI,minTopNoteDiff:YI}=gf.default||gf,UI={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},HI={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},KI={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},kI={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},vn={lefthand:{dictionary:UI,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:KI,mode:"below",anchor:"a4"},guidetones:{dictionary:HI,mode:"above",anchor:"a4"},legacy:{dictionary:kI,mode:"below",anchor:"a4"}};let fS="ireal";const dS=i=>fS=i,JI=(i,p)=>cS(i,vn[i].dictionary,p),cS=(i,p,x=["F3","A4"])=>{Object.assign(vn,{[i]:{dictionary:p,range:x}})},yu=(i,p,x={})=>{Object.assign(vn,{[i]:{dictionary:p,...x}})},jI=(i,p,x)=>{const{dictionary:M,range:R}=vn[p];return ZI({chord:i,dictionary:M,range:R,picker:YI,lastVoicing:x})};let Rr;const QI=ct("voicings",function(i,p){return p.fmap(x=>(Rr=jI(x,i,Rr),ye(...Rr))).outerJoin()}),$I=ct("rootNotes",function(i,p){return p.fmap(x=>{const M=(x.chord||x).match(/^([a-gA-G][b#]?).*$/)[1]+i;return x.chord?{note:M}:M})}),qI=ct("voicing",function(i){return i.fmap(p=>{p=typeof p=="string"?{chord:p}:p;let{dictionary:x=fS,chord:M,anchor:R,offset:w,mode:v,n:T,octaves:t,...h}=p;x=typeof x=="string"?vn[x]:{dictionary:x,mode:"below",anchor:"c5"};try{let g=RI({...x,chord:M,anchor:R,offset:w,mode:v,n:T,octaves:t});return ye(...g).note().set(h)}catch{return Ve(`[voicing]: unknown chord "${M}"`),xe}}).outerJoin()});function Gn(i,p,x){x=Array.isArray(x)?x:[x],x.forEach(M=>{M[p]=M[i]})}Gn("^","",[Ts,Js]);Object.keys(Ts).forEach(i=>{if(i.includes("-")){let p=i.replace("-","m");Gn(i,p,[Js,Ts])}if(i.includes("^")){let p=i.replace("^","M");Gn(i,p,[Js,Ts])}if(i.includes("+")){let p=i.replace("+","aug");Gn(i,p,[Js,Ts])}});yu("ireal",Ts);yu("ireal-ext",Js);function _I(){Rr=void 0,dS("ireal")}const tO="@strudel/tonal",eO=Object.freeze(Object.defineProperty({__proto__:null,addVoicings:cS,complex:Js,packageName:tO,registerVoicings:yu,resetVoicings:_I,rootNotes:$I,scale:XI,scaleTrans:bI,scaleTranspose:GI,setDefaultVoicings:dS,setVoicingRange:JI,simple:Ts,strans:II,trans:wI,transpose:DI,voicing:qI,voicingAlias:Gn,voicingRegistry:vn,voicings:QI},Symbol.toStringTag,{value:"Module"}));async function iO(){const i=Lr(Lr,Promise.resolve().then(()=>$y),Promise.resolve().then(()=>Vw),Promise.resolve().then(()=>eO),Promise.resolve().then(()=>Gw),{hush:vS,evaluate:sO});await Promise.all([i,K2()])}let Bo,Ps;function pS(i={}){Z2(),i.miniAllStrings!==!1&&fT();const{prebake:p,...x}=i;return Ps=iT({...x,transpiler:K7}),Bo=(async()=>(await iO(),await p?.(),Ps))(),Dr(()=>Ps.scheduler.now()),Bo}window.initStrudel=pS;Mt.prototype.play=function(){if(!Ps)throw new Error(".play: no repl found. Have you called initStrudel?");return Bo.then(()=>{Ps.setPattern(this,!0)}),this};function vS(){Ps.stop()}async function sO(i,p=!0){return Ps.evaluate(i,p)}class nO{constructor(){this.initialized=!1,this.currentMusic=null}init(){if(!this.initialized)try{pS(),this.initialized=!0}catch(p){console.warn("[Audio] Strudel init failed:",p)}}playMusic(p){this.initialized&&(this.stopMusic(),setTimeout(()=>{try{this.currentMusic=p()}catch(x){console.warn("[Audio] BGM error:",x)}},100))}stopMusic(){if(this.initialized){try{vS()}catch{}this.currentMusic=null}}}const Ys=new nO;function rO(){return ye(Ne("<d3,f3,a3> <a2,c3,e3> <e3,g3,b3> <b2,d3,f3>").s("sine").attack(1.5).release(2.5).gain(.08).room(.9).roomsize(8).lpf(1200).slow(2),Ne("~ a4 ~ ~ e4 ~ ~ ~ ~ d5 ~ ~ ~ c5 ~ ~").s("triangle").gain(.05).decay(.4).sustain(.05).release(1.2).delay(.5).delaytime(.6).delayfeedback(.55).room(.7).lpf(2e3).slow(2),Ne("d1").s("sine").gain(.06).attack(2).release(3).lpf(150).room(.4),Ne("~ ~ ~ ~ ~ a5 ~ ~ ~ ~ ~ ~ ~ ~ ~ ~").s("sine").gain(.02).slow(4).delay(.7).delaytime(.8).delayfeedback(.6).room(.95).roomsize(10).lpf(3e3)).slow(2).cpm(55).play()}function aO(){return ye(Ne("a3 ~ c4 ~ e4 ~ d4 c4 ~ a3 ~ ~ e4 ~ c4 ~").s("triangle").gain(.09).lpf(1800).decay(.25).sustain(.15).release(.6).room(.4).delay(.15).delaytime(.375).delayfeedback(.3),Ne("<a2,c3,e3> <d3,f3,a3> <e3,g3,b3> <a2,c3,e3>").s("sine").attack(.8).release(1.5).gain(.06).room(.6).roomsize(5).lpf(1e3),Ne("a1 ~ ~ a1 ~ ~ ~ ~ d1 ~ ~ d1 ~ ~ ~ ~").s("triangle").gain(.1).lpf(300).decay(.3).sustain(0),th("~ hh ~ ~ ~ hh ~ ~, bd ~ ~ ~ ~ ~ ~ ~").gain(.12),Ne("~ ~ ~ ~ ~ ~ ~ f5 ~ ~ ~ ~ ~ ~ ~ ~").s("sine").gain(.025).decay(.5).sustain(0).room(.8).roomsize(7).lpf(2500)).cpm(85).play()}function oO(){return ye(Ne("e4 ~ ~ d4 ~ ~ c4 ~ ~ b3 ~ ~ a3 ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~").s("triangle").gain(.1).decay(.8).sustain(.05).release(1.5).room(.85).roomsize(8).lpf(1400),Ne("a2,c3,e3,b3").s("sine").attack(1).release(3).gain(.06).room(.9).roomsize(9).lpf(800),Ne("a0").s("sine").gain(.05).attack(2).release(4).lpf(120).room(.3),Ne("~ ~ ~ ~ e6 ~ ~ ~ ~ ~ ~ ~").s("sine").gain(.015).slow(3).delay(.6).delaytime(.9).delayfeedback(.5).room(.95).roomsize(10).lpf(3500)).slow(3).cpm(40).play()}function hO(){return ye(Ne("a3 ~ c4 ~ e4 ~ ~ g4 ~ a4 ~ ~ ~ ~ ~ ~").s("triangle").gain(.1).decay(.4).sustain(.2).release(1).room(.7).roomsize(6).lpf(2200),Ne("<a2,c3,e3> <c3,e3,g3> <f3,a3,c4> <g3,b3,d4>").s("sine").attack(.8).release(2).gain(.07).room(.8).roomsize(7).lpf(1600).slow(2),Ne("a2 ~ c2 ~ f2 ~ g2 ~").s("triangle").gain(.08).lpf(350).slow(2),Ne("~ e5 ~ ~ ~ a5 ~ ~ ~ c5 ~ ~ ~ ~ ~ ~").s("sine").gain(.03).delay(.4).delaytime(.4).delayfeedback(.45).room(.6).lpf(3500).slow(2)).cpm(65).play()}let Rn=null;function bs(){return Rn||(Rn=new(window.AudioContext||window.webkitAudioContext)),Rn.state==="suspended"&&Rn.resume(),Rn}function Wr(i,p,x,M,R){const w=bs(),v=w.createOscillator(),T=w.createGain();if(v.type=p,v.frequency.setValueAtTime(i,w.currentTime),T.gain.setValueAtTime(M,w.currentTime),T.gain.exponentialRampToValueAtTime(.001,w.currentTime+x),R){const t=w.createBiquadFilter();t.type="lowpass",t.frequency.setValueAtTime(R,w.currentTime),v.connect(t),t.connect(T)}else v.connect(T);T.connect(w.destination),v.start(w.currentTime),v.stop(w.currentTime+x)}function Tu(i,p,x,M,R,w){const v=bs(),T=v.currentTime;i.forEach((t,h)=>{const g=T+h*(x+M),o=v.createOscillator(),a=v.createGain();if(o.type=p,o.frequency.setValueAtTime(t,g),a.gain.setValueAtTime(R,g),a.gain.exponentialRampToValueAtTime(.001,g+x),w){const r=v.createBiquadFilter();r.type="lowpass",r.frequency.setValueAtTime(w,g),o.connect(r),r.connect(a)}else o.connect(a);a.connect(v.destination),o.start(g),o.stop(g+x)})}function Ma(i,p,x,M){const R=bs(),w=R.sampleRate*i,v=R.createBuffer(1,w,R.sampleRate),T=v.getChannelData(0);for(let o=0;o<w;o++)T[o]=Math.random()*2-1;const t=R.createBufferSource();t.buffer=v;const h=R.createGain();h.gain.setValueAtTime(p,R.currentTime),h.gain.exponentialRampToValueAtTime(.001,R.currentTime+i);let g=t;if(M){const o=R.createBiquadFilter();o.type="highpass",o.frequency.setValueAtTime(M,R.currentTime),g.connect(o),g=o}if(x){const o=R.createBiquadFilter();o.type="lowpass",o.frequency.setValueAtTime(x,R.currentTime),g.connect(o),g=o}g.connect(h),h.connect(R.destination),t.start(R.currentTime),t.stop(R.currentTime+i)}function uO(){Ma(.08,.18,2e3,800),Wr(600,"square",.05,.12,1500)}function lO(){Wr(400,"square",.06,.2,1200),Wr(250,"triangle",.1,.15),Ma(.08,.12,1500)}function fO(){const i=bs(),p=i.currentTime,x=i.createOscillator(),M=i.createGain();x.type="sine",x.frequency.setValueAtTime(659,p),M.gain.setValueAtTime(.2,p),M.gain.exponentialRampToValueAtTime(.001,p+.12),x.connect(M),M.connect(i.destination),x.start(p),x.stop(p+.12);const R=i.createOscillator(),w=i.createGain();R.type="sine",R.frequency.setValueAtTime(880,p+.08),w.gain.setValueAtTime(.25,p+.08),w.gain.exponentialRampToValueAtTime(.001,p+.22),R.connect(w),w.connect(i.destination),R.start(p+.08),R.stop(p+.22)}function dO(){const i=bs(),p=i.currentTime,x=i.createOscillator(),M=i.createGain();x.type="sine",x.frequency.setValueAtTime(80,p),x.frequency.exponentialRampToValueAtTime(40,p+.25),M.gain.setValueAtTime(.3,p),M.gain.exponentialRampToValueAtTime(.001,p+.3),x.connect(M),M.connect(i.destination),x.start(p),x.stop(p+.3),Ma(.12,.15,300)}function cO(){Tu([523,659,784],"square",.1,.03,.2,2500)}function pO(){Tu([523,659,784,1047],"triangle",.12,.02,.22)}function vO(){const i=bs(),p=i.currentTime,x=i.createOscillator(),M=i.createGain();x.type="triangle",x.frequency.setValueAtTime(180,p),x.frequency.exponentialRampToValueAtTime(80,p+.12),M.gain.setValueAtTime(.25,p),M.gain.exponentialRampToValueAtTime(.001,p+.15),x.connect(M),M.connect(i.destination),x.start(p),x.stop(p+.15),Ma(.04,.1,1e3,400)}function mO(){Tu([523,659,784,988,1047],"triangle",.12,.04,.22),setTimeout(()=>{Wr(523,"sine",.5,.15)},100)}function gO(){const i=bs(),p=i.currentTime,x=[523,466,415,392,330],M="triangle",R=.18,w=.04;x.forEach((h,g)=>{const o=p+g*(R+w),a=i.createOscillator(),r=i.createGain();a.type=M,a.frequency.setValueAtTime(h,o),r.gain.setValueAtTime(.2,o),r.gain.exponentialRampToValueAtTime(.001,o+R),a.connect(r),r.connect(i.destination),a.start(o),a.stop(o+R)});const v=p+x.length*(R+w),T=i.createOscillator(),t=i.createGain();T.type="sine",T.frequency.setValueAtTime(60,v),T.frequency.exponentialRampToValueAtTime(30,v+.5),t.gain.setValueAtTime(.2,v),t.gain.exponentialRampToValueAtTime(.001,v+.5),T.connect(t),t.connect(i.destination),T.start(v),T.stop(v+.5)}function xO(){gt.on(mt.AUDIO_INIT,()=>Ys.init()),gt.on(mt.MUSIC_MENU,()=>Ys.playMusic(rO)),gt.on(mt.MUSIC_GAMEPLAY,()=>Ys.playMusic(aO)),gt.on(mt.MUSIC_GAMEOVER,()=>Ys.playMusic(oO)),gt.on(mt.MUSIC_LEVELCOMPLETE,()=>Ys.playMusic(hO)),gt.on(mt.MUSIC_STOP,()=>Ys.stopMusic()),gt.on(mt.TOWER_FIRED,()=>uO()),gt.on(mt.ENEMY_DIED,()=>lO()),gt.on(mt.CORN_EARNED,()=>fO()),gt.on(mt.BARN_HIT,()=>dO()),gt.on(mt.WAVE_START,()=>cO()),gt.on(mt.WAVE_COMPLETE,()=>pO()),gt.on(mt.TOWER_PLACED,()=>vO()),gt.on(mt.GAME_OVER,()=>gO()),gt.on(mt.LEVEL_COMPLETE,()=>mO())}xO();const yO=new cs.Game(yE);window.__GAME__=yO;window.__GAME_STATE__=Tt;window.__EVENT_BUS__=gt;window.__EVENTS__=mt;
